/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./demo/client.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./addons/xterm-addon-attach/out/AttachAddon.js":
/*!******************************************************!*\
  !*** ./addons/xterm-addon-attach/out/AttachAddon.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var AttachAddon = (function () {
    function AttachAddon(socket, options) {
        this._disposables = [];
        this._socket = socket;
        this._socket.binaryType = 'arraybuffer';
        this._bidirectional = (options && options.bidirectional === false) ? false : true;
    }
    AttachAddon.prototype.activate = function (terminal) {
        var _this = this;
        this._disposables.push(addSocketListener(this._socket, 'message', function (ev) {
            var data = ev.data;
            terminal.write(typeof data === 'string' ? data : new Uint8Array(data));
        }));
        if (this._bidirectional) {
            this._disposables.push(terminal.onData(function (data) { return _this._sendData(data); }));
            this._disposables.push(terminal.onBinary(function (data) { return _this._sendBinary(data); }));
        }
        this._disposables.push(addSocketListener(this._socket, 'close', function () { return _this.dispose(); }));
        this._disposables.push(addSocketListener(this._socket, 'error', function () { return _this.dispose(); }));
    };
    AttachAddon.prototype.dispose = function () {
        this._disposables.forEach(function (d) { return d.dispose(); });
    };
    AttachAddon.prototype._sendData = function (data) {
        if (this._socket.readyState !== 1) {
            return;
        }
        this._socket.send(data);
    };
    AttachAddon.prototype._sendBinary = function (data) {
        if (this._socket.readyState !== 1) {
            return;
        }
        var buffer = new Uint8Array(data.length);
        for (var i = 0; i < data.length; ++i) {
            buffer[i] = data.charCodeAt(i) & 255;
        }
        this._socket.send(buffer);
    };
    return AttachAddon;
}());
exports.AttachAddon = AttachAddon;
function addSocketListener(socket, type, handler) {
    socket.addEventListener(type, handler);
    return {
        dispose: function () {
            if (!handler) {
                return;
            }
            socket.removeEventListener(type, handler);
        }
    };
}


/***/ }),

/***/ "./addons/xterm-addon-fit/out/FitAddon.js":
/*!************************************************!*\
  !*** ./addons/xterm-addon-fit/out/FitAddon.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var MINIMUM_COLS = 2;
var MINIMUM_ROWS = 1;
var FitAddon = (function () {
    function FitAddon() {
    }
    FitAddon.prototype.activate = function (terminal) {
        this._terminal = terminal;
    };
    FitAddon.prototype.dispose = function () { };
    FitAddon.prototype.fit = function () {
        var dims = this.proposeDimensions();
        if (!dims || !this._terminal) {
            return;
        }
        var core = this._terminal._core;
        if (this._terminal.rows !== dims.rows || this._terminal.cols !== dims.cols) {
            core._renderService.clear();
            this._terminal.resize(dims.cols, dims.rows);
        }
    };
    FitAddon.prototype.proposeDimensions = function () {
        if (!this._terminal) {
            return undefined;
        }
        if (!this._terminal.element || !this._terminal.element.parentElement) {
            return undefined;
        }
        var core = this._terminal._core;
        var parentElementStyle = window.getComputedStyle(this._terminal.element.parentElement);
        var parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));
        var parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));
        var elementStyle = window.getComputedStyle(this._terminal.element);
        var elementPadding = {
            top: parseInt(elementStyle.getPropertyValue('padding-top')),
            bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),
            right: parseInt(elementStyle.getPropertyValue('padding-right')),
            left: parseInt(elementStyle.getPropertyValue('padding-left'))
        };
        var elementPaddingVer = elementPadding.top + elementPadding.bottom;
        var elementPaddingHor = elementPadding.right + elementPadding.left;
        var availableHeight = parentElementHeight - elementPaddingVer;
        var availableWidth = parentElementWidth - elementPaddingHor - core.viewport.scrollBarWidth;
        var geometry = {
            cols: Math.max(MINIMUM_COLS, Math.floor(availableWidth / core._renderService.dimensions.actualCellWidth)),
            rows: Math.max(MINIMUM_ROWS, Math.floor(availableHeight / core._renderService.dimensions.actualCellHeight))
        };
        return geometry;
    };
    return FitAddon;
}());
exports.FitAddon = FitAddon;


/***/ }),

/***/ "./addons/xterm-addon-search/out/SearchAddon.js":
/*!******************************************************!*\
  !*** ./addons/xterm-addon-search/out/SearchAddon.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var NON_WORD_CHARACTERS = ' ~!@#$%^&*()+`-=[]{}|\;:"\',./<>?';
var LINES_CACHE_TIME_TO_LIVE = 15 * 1000;
var SearchAddon = (function () {
    function SearchAddon() {
        this._linesCacheTimeoutId = 0;
    }
    SearchAddon.prototype.activate = function (terminal) {
        this._terminal = terminal;
    };
    SearchAddon.prototype.dispose = function () { };
    SearchAddon.prototype.findNext = function (term, searchOptions) {
        if (!this._terminal) {
            throw new Error('Cannot use addon until it has been loaded');
        }
        if (!term || term.length === 0) {
            this._terminal.clearSelection();
            return false;
        }
        var startCol = 0;
        var startRow = 0;
        var currentSelection;
        if (this._terminal.hasSelection()) {
            var incremental = searchOptions ? searchOptions.incremental : false;
            currentSelection = this._terminal.getSelectionPosition();
            startRow = incremental ? currentSelection.startRow : currentSelection.endRow;
            startCol = incremental ? currentSelection.startColumn : currentSelection.endColumn;
        }
        this._initLinesCache();
        var searchPosition = {
            startRow: startRow,
            startCol: startCol
        };
        var result = this._findInLine(term, searchPosition, searchOptions);
        if (!result) {
            for (var y = startRow + 1; y < this._terminal.buffer.baseY + this._terminal.rows; y++) {
                searchPosition.startRow = y;
                searchPosition.startCol = 0;
                result = this._findInLine(term, searchPosition, searchOptions);
                if (result) {
                    break;
                }
            }
        }
        if (!result && startRow !== 0) {
            for (var y = 0; y < startRow; y++) {
                searchPosition.startRow = y;
                searchPosition.startCol = 0;
                result = this._findInLine(term, searchPosition, searchOptions);
                if (result) {
                    break;
                }
            }
        }
        if (!result && currentSelection)
            return true;
        return this._selectResult(result);
    };
    SearchAddon.prototype.findPrevious = function (term, searchOptions) {
        if (!this._terminal) {
            throw new Error('Cannot use addon until it has been loaded');
        }
        if (!term || term.length === 0) {
            this._terminal.clearSelection();
            return false;
        }
        var isReverseSearch = true;
        var startRow = this._terminal.buffer.baseY + this._terminal.rows;
        var startCol = this._terminal.cols;
        var result;
        var incremental = searchOptions ? searchOptions.incremental : false;
        var currentSelection;
        if (this._terminal.hasSelection()) {
            currentSelection = this._terminal.getSelectionPosition();
            startRow = currentSelection.startRow;
            startCol = currentSelection.startColumn;
        }
        this._initLinesCache();
        var searchPosition = {
            startRow: startRow,
            startCol: startCol
        };
        if (incremental) {
            result = this._findInLine(term, searchPosition, searchOptions, false);
            if (!(result && result.row === startRow && result.col === startCol)) {
                result = this._findInLine(term, searchPosition, searchOptions, true);
            }
        }
        else {
            result = this._findInLine(term, searchPosition, searchOptions, isReverseSearch);
        }
        if (!result) {
            searchPosition.startCol = Math.max(searchPosition.startCol, this._terminal.cols);
            for (var y = startRow - 1; y >= 0; y--) {
                searchPosition.startRow = y;
                result = this._findInLine(term, searchPosition, searchOptions, isReverseSearch);
                if (result) {
                    break;
                }
            }
        }
        if (!result && startRow !== (this._terminal.buffer.baseY + this._terminal.rows)) {
            for (var y = (this._terminal.buffer.baseY + this._terminal.rows); y > startRow; y--) {
                searchPosition.startRow = y;
                result = this._findInLine(term, searchPosition, searchOptions, isReverseSearch);
                if (result) {
                    break;
                }
            }
        }
        if (!result && currentSelection)
            return true;
        return this._selectResult(result);
    };
    SearchAddon.prototype._initLinesCache = function () {
        var _this = this;
        var terminal = this._terminal;
        if (!this._linesCache) {
            this._linesCache = new Array(terminal.buffer.length);
            this._cursorMoveListener = terminal.onCursorMove(function () { return _this._destroyLinesCache(); });
            this._resizeListener = terminal.onResize(function () { return _this._destroyLinesCache(); });
        }
        window.clearTimeout(this._linesCacheTimeoutId);
        this._linesCacheTimeoutId = window.setTimeout(function () { return _this._destroyLinesCache(); }, LINES_CACHE_TIME_TO_LIVE);
    };
    SearchAddon.prototype._destroyLinesCache = function () {
        this._linesCache = undefined;
        if (this._cursorMoveListener) {
            this._cursorMoveListener.dispose();
            this._cursorMoveListener = undefined;
        }
        if (this._resizeListener) {
            this._resizeListener.dispose();
            this._resizeListener = undefined;
        }
        if (this._linesCacheTimeoutId) {
            window.clearTimeout(this._linesCacheTimeoutId);
            this._linesCacheTimeoutId = 0;
        }
    };
    SearchAddon.prototype._isWholeWord = function (searchIndex, line, term) {
        return (((searchIndex === 0) || (NON_WORD_CHARACTERS.indexOf(line[searchIndex - 1]) !== -1)) &&
            (((searchIndex + term.length) === line.length) || (NON_WORD_CHARACTERS.indexOf(line[searchIndex + term.length]) !== -1)));
    };
    SearchAddon.prototype._findInLine = function (term, searchPosition, searchOptions, isReverseSearch) {
        if (searchOptions === void 0) { searchOptions = {}; }
        if (isReverseSearch === void 0) { isReverseSearch = false; }
        var terminal = this._terminal;
        var row = searchPosition.startRow;
        var col = searchPosition.startCol;
        var firstLine = terminal.buffer.getLine(row);
        if (firstLine && firstLine.isWrapped) {
            if (isReverseSearch) {
                searchPosition.startCol += terminal.cols;
                return;
            }
            searchPosition.startRow--;
            searchPosition.startCol += terminal.cols;
            return this._findInLine(term, searchPosition, searchOptions);
        }
        var stringLine = this._linesCache ? this._linesCache[row] : void 0;
        if (stringLine === void 0) {
            stringLine = this._translateBufferLineToStringWithWrap(row, true);
            if (this._linesCache) {
                this._linesCache[row] = stringLine;
            }
        }
        var searchTerm = searchOptions.caseSensitive ? term : term.toLowerCase();
        var searchStringLine = searchOptions.caseSensitive ? stringLine : stringLine.toLowerCase();
        var resultIndex = -1;
        if (searchOptions.regex) {
            var searchRegex = RegExp(searchTerm, 'g');
            var foundTerm = void 0;
            if (isReverseSearch) {
                while (foundTerm = searchRegex.exec(searchStringLine.slice(0, col))) {
                    resultIndex = searchRegex.lastIndex - foundTerm[0].length;
                    term = foundTerm[0];
                    searchRegex.lastIndex -= (term.length - 1);
                }
            }
            else {
                foundTerm = searchRegex.exec(searchStringLine.slice(col));
                if (foundTerm && foundTerm[0].length > 0) {
                    resultIndex = col + (searchRegex.lastIndex - foundTerm[0].length);
                    term = foundTerm[0];
                }
            }
        }
        else {
            if (isReverseSearch) {
                if (col - searchTerm.length >= 0) {
                    resultIndex = searchStringLine.lastIndexOf(searchTerm, col - searchTerm.length);
                }
            }
            else {
                resultIndex = searchStringLine.indexOf(searchTerm, col);
            }
        }
        if (resultIndex >= 0) {
            if (resultIndex >= terminal.cols) {
                row += Math.floor(resultIndex / terminal.cols);
                resultIndex = resultIndex % terminal.cols;
            }
            if (searchOptions.wholeWord && !this._isWholeWord(resultIndex, searchStringLine, term)) {
                return;
            }
            var line = terminal.buffer.getLine(row);
            if (line) {
                for (var i = 0; i < resultIndex; i++) {
                    var cell = line.getCell(i);
                    if (!cell) {
                        break;
                    }
                    var char = cell.char;
                    if (char.length > 1) {
                        resultIndex -= char.length - 1;
                    }
                    var charWidth = cell.width;
                    if (charWidth === 0) {
                        resultIndex++;
                    }
                }
            }
            return {
                term: term,
                col: resultIndex,
                row: row
            };
        }
    };
    SearchAddon.prototype._translateBufferLineToStringWithWrap = function (lineIndex, trimRight) {
        var terminal = this._terminal;
        var lineString = '';
        var lineWrapsToNext;
        do {
            var nextLine = terminal.buffer.getLine(lineIndex + 1);
            lineWrapsToNext = nextLine ? nextLine.isWrapped : false;
            var line = terminal.buffer.getLine(lineIndex);
            if (!line) {
                break;
            }
            lineString += line.translateToString(!lineWrapsToNext && trimRight).substring(0, terminal.cols);
            lineIndex++;
        } while (lineWrapsToNext);
        return lineString;
    };
    SearchAddon.prototype._selectResult = function (result) {
        var terminal = this._terminal;
        if (!result) {
            terminal.clearSelection();
            return false;
        }
        terminal.select(result.col, result.row, result.term.length);
        if (result.row >= (terminal.buffer.viewportY + terminal.rows) || result.row < terminal.buffer.viewportY) {
            var scroll_1 = result.row - terminal.buffer.viewportY;
            scroll_1 = scroll_1 - Math.floor(terminal.rows / 2);
            terminal.scrollLines(scroll_1);
        }
        return true;
    };
    return SearchAddon;
}());
exports.SearchAddon = SearchAddon;


/***/ }),

/***/ "./addons/xterm-addon-web-links/out/WebLinksAddon.js":
/*!***********************************************************!*\
  !*** ./addons/xterm-addon-web-links/out/WebLinksAddon.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var protocolClause = '(https?:\\/\\/)';
var domainCharacterSet = '[\\da-z\\.-]+';
var negatedDomainCharacterSet = '[^\\da-z\\.-]+';
var domainBodyClause = '(' + domainCharacterSet + ')';
var tldClause = '([a-z\\.]{2,6})';
var ipClause = '((\\d{1,3}\\.){3}\\d{1,3})';
var localHostClause = '(localhost)';
var portClause = '(:\\d{1,5})';
var hostClause = '((' + domainBodyClause + '\\.' + tldClause + ')|' + ipClause + '|' + localHostClause + ')' + portClause + '?';
var pathCharacterSet = '(\\/[\\/\\w\\.\\-%~:+]*)*([^:"\'\\s])';
var pathClause = '(' + pathCharacterSet + ')?';
var queryStringHashFragmentCharacterSet = '[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&\'*+,:;~\\=\\.\\-]*';
var queryStringClause = '(\\?' + queryStringHashFragmentCharacterSet + ')?';
var hashFragmentClause = '(#' + queryStringHashFragmentCharacterSet + ')?';
var negatedPathCharacterSet = '[^\\/\\w\\.\\-%]+';
var bodyClause = hostClause + pathClause + queryStringClause + hashFragmentClause;
var start = '(?:^|' + negatedDomainCharacterSet + ')(';
var end = ')($|' + negatedPathCharacterSet + ')';
var strictUrlRegex = new RegExp(start + protocolClause + bodyClause + end);
function handleLink(event, uri) {
    window.open(uri, '_blank');
}
var WebLinksAddon = (function () {
    function WebLinksAddon(_handler, _options) {
        if (_handler === void 0) { _handler = handleLink; }
        if (_options === void 0) { _options = {}; }
        this._handler = _handler;
        this._options = _options;
        this._options.matchIndex = 1;
    }
    WebLinksAddon.prototype.activate = function (terminal) {
        this._terminal = terminal;
        this._linkMatcherId = this._terminal.registerLinkMatcher(strictUrlRegex, this._handler, this._options);
    };
    WebLinksAddon.prototype.dispose = function () {
        if (this._linkMatcherId !== undefined && this._terminal !== undefined) {
            this._terminal.deregisterLinkMatcher(this._linkMatcherId);
        }
    };
    return WebLinksAddon;
}());
exports.WebLinksAddon = WebLinksAddon;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/GlyphRenderer.js":
/*!*******************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/GlyphRenderer.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var WebglUtils_1 = __webpack_require__(/*! ./WebglUtils */ "./addons/xterm-addon-webgl/out/WebglUtils.js");
var RenderModel_1 = __webpack_require__(/*! ./RenderModel */ "./addons/xterm-addon-webgl/out/RenderModel.js");
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
var TypedArray_1 = __webpack_require__(/*! ./TypedArray */ "./addons/xterm-addon-webgl/out/TypedArray.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var vertexShaderSource = "#version 300 es\nlayout (location = " + 0 + ") in vec2 a_unitquad;\nlayout (location = " + 1 + ") in vec2 a_cellpos;\nlayout (location = " + 2 + ") in vec2 a_offset;\nlayout (location = " + 3 + ") in vec2 a_size;\nlayout (location = " + 4 + ") in vec2 a_texcoord;\nlayout (location = " + 5 + ") in vec2 a_texsize;\n\nuniform mat4 u_projection;\nuniform vec2 u_resolution;\n\nout vec2 v_texcoord;\n\nvoid main() {\n  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_texcoord = a_texcoord + a_unitquad * a_texsize;\n}";
var fragmentShaderSource = "#version 300 es\nprecision lowp float;\n\nin vec2 v_texcoord;\n\nuniform sampler2D u_texture;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = texture(u_texture, v_texcoord);\n}";
var INDICES_PER_CELL = 10;
var BYTES_PER_CELL = INDICES_PER_CELL * Float32Array.BYTES_PER_ELEMENT;
var CELL_POSITION_INDICES = 2;
var GlyphRenderer = (function () {
    function GlyphRenderer(_terminal, _colors, _gl, _dimensions) {
        this._terminal = _terminal;
        this._colors = _colors;
        this._gl = _gl;
        this._dimensions = _dimensions;
        this._activeBuffer = 0;
        this._vertices = {
            count: 0,
            attributes: new Float32Array(0),
            attributesBuffers: [
                new Float32Array(0),
                new Float32Array(0)
            ],
            selectionAttributes: new Float32Array(0)
        };
        var gl = this._gl;
        var program = WebglUtils_1.throwIfFalsy(WebglUtils_1.createProgram(gl, vertexShaderSource, fragmentShaderSource));
        this._program = program;
        this._projectionLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_projection'));
        this._resolutionLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_resolution'));
        this._textureLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_texture'));
        this._vertexArrayObject = gl.createVertexArray();
        gl.bindVertexArray(this._vertexArrayObject);
        var unitQuadVertices = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);
        var unitQuadVerticesBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, unitQuadVerticesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, unitQuadVertices, gl.STATIC_DRAW);
        gl.enableVertexAttribArray(0);
        gl.vertexAttribPointer(0, 2, this._gl.FLOAT, false, 0, 0);
        var unitQuadElementIndices = new Uint8Array([0, 1, 3, 0, 2, 3]);
        var elementIndicesBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elementIndicesBuffer);
        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, unitQuadElementIndices, gl.STATIC_DRAW);
        this._attributesBuffer = WebglUtils_1.throwIfFalsy(gl.createBuffer());
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.enableVertexAttribArray(2);
        gl.vertexAttribPointer(2, 2, gl.FLOAT, false, BYTES_PER_CELL, 0);
        gl.vertexAttribDivisor(2, 1);
        gl.enableVertexAttribArray(3);
        gl.vertexAttribPointer(3, 2, gl.FLOAT, false, BYTES_PER_CELL, 2 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(3, 1);
        gl.enableVertexAttribArray(4);
        gl.vertexAttribPointer(4, 2, gl.FLOAT, false, BYTES_PER_CELL, 4 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(4, 1);
        gl.enableVertexAttribArray(5);
        gl.vertexAttribPointer(5, 2, gl.FLOAT, false, BYTES_PER_CELL, 6 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(5, 1);
        gl.enableVertexAttribArray(1);
        gl.vertexAttribPointer(1, 2, gl.FLOAT, false, BYTES_PER_CELL, 8 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(1, 1);
        this._atlasTexture = WebglUtils_1.throwIfFalsy(gl.createTexture());
        gl.bindTexture(gl.TEXTURE_2D, this._atlasTexture);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([0, 0, 255, 255]));
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
        gl.enable(gl.BLEND);
        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
        this.onResize();
    }
    GlyphRenderer.prototype.beginFrame = function () {
        return this._atlas ? this._atlas.beginFrame() : true;
    };
    GlyphRenderer.prototype.updateCell = function (x, y, code, bg, fg, chars) {
        this._updateCell(this._vertices.attributes, x, y, code, bg, fg, chars);
    };
    GlyphRenderer.prototype._updateCell = function (array, x, y, code, bg, fg, chars) {
        var terminal = this._terminal;
        var i = (y * terminal.cols + x) * INDICES_PER_CELL;
        if (code === Constants_1.NULL_CELL_CODE || code === Constants_1.WHITESPACE_CELL_CODE || code === undefined) {
            TypedArrayUtils_1.fill(array, 0, i, i + INDICES_PER_CELL - 1 - CELL_POSITION_INDICES);
            return;
        }
        var rasterizedGlyph;
        if (!this._atlas) {
            return;
        }
        if (chars && chars.length > 1) {
            rasterizedGlyph = this._atlas.getRasterizedGlyphCombinedChar(chars, bg, fg);
        }
        else {
            rasterizedGlyph = this._atlas.getRasterizedGlyph(code, bg, fg);
        }
        if (!rasterizedGlyph) {
            TypedArrayUtils_1.fill(array, 0, i, i + INDICES_PER_CELL - 1 - CELL_POSITION_INDICES);
            return;
        }
        array[i] = -rasterizedGlyph.offset.x + this._dimensions.scaledCharLeft;
        array[i + 1] = -rasterizedGlyph.offset.y + this._dimensions.scaledCharTop;
        array[i + 2] = rasterizedGlyph.size.x / this._dimensions.scaledCanvasWidth;
        array[i + 3] = rasterizedGlyph.size.y / this._dimensions.scaledCanvasHeight;
        array[i + 4] = rasterizedGlyph.texturePositionClipSpace.x;
        array[i + 5] = rasterizedGlyph.texturePositionClipSpace.y;
        array[i + 6] = rasterizedGlyph.sizeClipSpace.x;
        array[i + 7] = rasterizedGlyph.sizeClipSpace.y;
    };
    GlyphRenderer.prototype.updateSelection = function (model, columnSelectMode) {
        var terminal = this._terminal;
        this._vertices.selectionAttributes = TypedArray_1.slice(this._vertices.attributes, 0);
        var bg = (this._colors.selectionOpaque.rgba >>> 8) | 50331648;
        if (columnSelectMode) {
            var startCol = model.selection.startCol;
            var width = model.selection.endCol - startCol;
            var height = model.selection.viewportCappedEndRow - model.selection.viewportCappedStartRow + 1;
            for (var y = model.selection.viewportCappedStartRow; y < model.selection.viewportCappedStartRow + height; y++) {
                this._updateSelectionRange(startCol, startCol + width, y, model, bg);
            }
        }
        else {
            var startCol = model.selection.viewportStartRow === model.selection.viewportCappedStartRow ? model.selection.startCol : 0;
            var startRowEndCol = model.selection.viewportCappedStartRow === model.selection.viewportCappedEndRow ? model.selection.endCol : terminal.cols;
            this._updateSelectionRange(startCol, startRowEndCol, model.selection.viewportCappedStartRow, model, bg);
            var middleRowsCount = Math.max(model.selection.viewportCappedEndRow - model.selection.viewportCappedStartRow - 1, 0);
            for (var y = model.selection.viewportCappedStartRow + 1; y <= model.selection.viewportCappedStartRow + middleRowsCount; y++) {
                this._updateSelectionRange(0, startRowEndCol, y, model, bg);
            }
            if (model.selection.viewportCappedStartRow !== model.selection.viewportCappedEndRow) {
                var endCol = model.selection.viewportEndRow === model.selection.viewportCappedEndRow ? model.selection.endCol : terminal.cols;
                this._updateSelectionRange(0, endCol, model.selection.viewportCappedEndRow, model, bg);
            }
        }
    };
    GlyphRenderer.prototype._updateSelectionRange = function (startCol, endCol, y, model, bg) {
        var terminal = this._terminal;
        var row = y + terminal.buffer.viewportY;
        var line;
        for (var x = startCol; x < endCol; x++) {
            var offset = (y * this._terminal.cols + x) * RenderModel_1.RENDER_MODEL_INDICIES_PER_CELL;
            var code = model.cells[offset];
            var fg = model.cells[offset + RenderModel_1.RENDER_MODEL_FG_OFFSET];
            if (fg & 67108864) {
                var workCell = new AttributeData_1.AttributeData();
                workCell.fg = fg;
                workCell.bg = model.cells[offset + RenderModel_1.RENDER_MODEL_BG_OFFSET];
                fg = (fg & ~(50331648 | 16777215 | 67108864));
                switch (workCell.getBgColorMode()) {
                    case 16777216:
                    case 33554432:
                        var c = this._getColorFromAnsiIndex(workCell.getBgColor()).rgba;
                        fg |= (c >> 8) & 16711680 | (c >> 8) & 65280 | (c >> 8) & 255;
                    case 50331648:
                        var arr = AttributeData_1.AttributeData.toColorRGB(workCell.getBgColor());
                        fg |= arr[0] << 16 | arr[1] << 8 | arr[2] << 0;
                    case 0:
                    default:
                        var c2 = this._colors.background.rgba;
                        fg |= (c2 >> 8) & 16711680 | (c2 >> 8) & 65280 | (c2 >> 8) & 255;
                }
                fg |= 50331648;
            }
            if (code & RenderModel_1.COMBINED_CHAR_BIT_MASK) {
                if (!line) {
                    line = terminal.buffer.getLine(row);
                }
                var chars = line.getCell(x).char;
                this._updateCell(this._vertices.selectionAttributes, x, y, model.cells[offset], bg, fg, chars);
            }
            else {
                this._updateCell(this._vertices.selectionAttributes, x, y, model.cells[offset], bg, fg);
            }
        }
    };
    GlyphRenderer.prototype._getColorFromAnsiIndex = function (idx) {
        if (idx >= this._colors.ansi.length) {
            throw new Error('No color found for idx ' + idx);
        }
        return this._colors.ansi[idx];
    };
    GlyphRenderer.prototype.onResize = function () {
        var terminal = this._terminal;
        var gl = this._gl;
        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
        var newCount = terminal.cols * terminal.rows * INDICES_PER_CELL;
        if (this._vertices.count !== newCount) {
            this._vertices.count = newCount;
            this._vertices.attributes = new Float32Array(newCount);
            for (var i_1 = 0; i_1 < this._vertices.attributesBuffers.length; i_1++) {
                this._vertices.attributesBuffers[i_1] = new Float32Array(newCount);
            }
            var i = 0;
            for (var y = 0; y < terminal.rows; y++) {
                for (var x = 0; x < terminal.cols; x++) {
                    this._vertices.attributes[i + 8] = x / terminal.cols;
                    this._vertices.attributes[i + 9] = y / terminal.rows;
                    i += INDICES_PER_CELL;
                }
            }
        }
    };
    GlyphRenderer.prototype.setColors = function () {
    };
    GlyphRenderer.prototype.render = function (renderModel, isSelectionVisible) {
        if (!this._atlas) {
            return;
        }
        var gl = this._gl;
        gl.useProgram(this._program);
        gl.bindVertexArray(this._vertexArrayObject);
        this._activeBuffer = (this._activeBuffer + 1) % 2;
        var activeBuffer = this._vertices.attributesBuffers[this._activeBuffer];
        var bufferLength = 0;
        for (var y = 0; y < renderModel.lineLengths.length; y++) {
            var si = y * this._terminal.cols * INDICES_PER_CELL;
            var sub = (isSelectionVisible ? this._vertices.selectionAttributes : this._vertices.attributes).subarray(si, si + renderModel.lineLengths[y] * INDICES_PER_CELL);
            activeBuffer.set(sub, bufferLength);
            bufferLength += sub.length;
        }
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, activeBuffer.subarray(0, bufferLength), gl.STREAM_DRAW);
        if (this._atlas.hasCanvasChanged) {
            this._atlas.hasCanvasChanged = false;
            gl.uniform1i(this._textureLocation, 0);
            gl.activeTexture(gl.TEXTURE0 + 0);
            gl.bindTexture(gl.TEXTURE_2D, this._atlasTexture);
            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this._atlas.cacheCanvas);
            gl.generateMipmap(gl.TEXTURE_2D);
        }
        gl.uniformMatrix4fv(this._projectionLocation, false, WebglUtils_1.PROJECTION_MATRIX);
        gl.uniform2f(this._resolutionLocation, gl.canvas.width, gl.canvas.height);
        gl.drawElementsInstanced(gl.TRIANGLES, 6, gl.UNSIGNED_BYTE, 0, bufferLength / INDICES_PER_CELL);
    };
    GlyphRenderer.prototype.setAtlas = function (atlas) {
        var gl = this._gl;
        this._atlas = atlas;
        gl.bindTexture(gl.TEXTURE_2D, this._atlasTexture);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, atlas.cacheCanvas);
        gl.generateMipmap(gl.TEXTURE_2D);
    };
    GlyphRenderer.prototype.setDimensions = function (dimensions) {
        this._dimensions = dimensions;
    };
    return GlyphRenderer;
}());
exports.GlyphRenderer = GlyphRenderer;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/RectangleRenderer.js":
/*!***********************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/RectangleRenderer.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var WebglUtils_1 = __webpack_require__(/*! ./WebglUtils */ "./addons/xterm-addon-webgl/out/WebglUtils.js");
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
var RenderModel_1 = __webpack_require__(/*! ./RenderModel */ "./addons/xterm-addon-webgl/out/RenderModel.js");
var vertexShaderSource = "#version 300 es\nlayout (location = " + 0 + ") in vec2 a_position;\nlayout (location = " + 1 + ") in vec2 a_size;\nlayout (location = " + 2 + ") in vec4 a_color;\nlayout (location = " + 3 + ") in vec2 a_unitquad;\n\nuniform mat4 u_projection;\nuniform vec2 u_resolution;\n\nout vec4 v_color;\n\nvoid main() {\n  vec2 zeroToOne = (a_position + (a_unitquad * a_size)) / u_resolution;\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_color = a_color;\n}";
var fragmentShaderSource = "#version 300 es\nprecision lowp float;\n\nin vec4 v_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = v_color;\n}";
var INDICES_PER_RECTANGLE = 8;
var BYTES_PER_RECTANGLE = INDICES_PER_RECTANGLE * Float32Array.BYTES_PER_ELEMENT;
var INITIAL_BUFFER_RECTANGLE_CAPACITY = 20 * INDICES_PER_RECTANGLE;
var RectangleRenderer = (function () {
    function RectangleRenderer(_terminal, _colors, _gl, _dimensions) {
        this._terminal = _terminal;
        this._colors = _colors;
        this._gl = _gl;
        this._dimensions = _dimensions;
        this._vertices = {
            count: 0,
            attributes: new Float32Array(INITIAL_BUFFER_RECTANGLE_CAPACITY),
            selection: new Float32Array(3 * INDICES_PER_RECTANGLE)
        };
        var gl = this._gl;
        this._program = WebglUtils_1.throwIfFalsy(WebglUtils_1.createProgram(gl, vertexShaderSource, fragmentShaderSource));
        this._resolutionLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_resolution'));
        this._projectionLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_projection'));
        this._vertexArrayObject = gl.createVertexArray();
        gl.bindVertexArray(this._vertexArrayObject);
        var unitQuadVertices = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);
        var unitQuadVerticesBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, unitQuadVerticesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, unitQuadVertices, gl.STATIC_DRAW);
        gl.enableVertexAttribArray(3);
        gl.vertexAttribPointer(3, 2, this._gl.FLOAT, false, 0, 0);
        var unitQuadElementIndices = new Uint8Array([0, 1, 3, 0, 2, 3]);
        var elementIndicesBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elementIndicesBuffer);
        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, unitQuadElementIndices, gl.STATIC_DRAW);
        this._attributesBuffer = WebglUtils_1.throwIfFalsy(gl.createBuffer());
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.enableVertexAttribArray(0);
        gl.vertexAttribPointer(0, 2, gl.FLOAT, false, BYTES_PER_RECTANGLE, 0);
        gl.vertexAttribDivisor(0, 1);
        gl.enableVertexAttribArray(1);
        gl.vertexAttribPointer(1, 2, gl.FLOAT, false, BYTES_PER_RECTANGLE, 2 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(1, 1);
        gl.enableVertexAttribArray(2);
        gl.vertexAttribPointer(2, 4, gl.FLOAT, false, BYTES_PER_RECTANGLE, 4 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(2, 1);
        this._updateCachedColors();
    }
    RectangleRenderer.prototype.render = function () {
        var gl = this._gl;
        gl.useProgram(this._program);
        gl.bindVertexArray(this._vertexArrayObject);
        gl.uniformMatrix4fv(this._projectionLocation, false, WebglUtils_1.PROJECTION_MATRIX);
        gl.uniform2f(this._resolutionLocation, gl.canvas.width, gl.canvas.height);
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, this._vertices.attributes, gl.DYNAMIC_DRAW);
        gl.drawElementsInstanced(this._gl.TRIANGLES, 6, gl.UNSIGNED_BYTE, 0, this._vertices.count);
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, this._vertices.selection, gl.DYNAMIC_DRAW);
        gl.drawElementsInstanced(this._gl.TRIANGLES, 6, gl.UNSIGNED_BYTE, 0, 3);
    };
    RectangleRenderer.prototype.onResize = function () {
        this._updateViewportRectangle();
    };
    RectangleRenderer.prototype.setColors = function () {
        this._updateCachedColors();
        this._updateViewportRectangle();
    };
    RectangleRenderer.prototype._updateCachedColors = function () {
        this._bgFloat = this._colorToFloat32Array(this._colors.background);
        this._selectionFloat = this._colorToFloat32Array(this._colors.selectionOpaque);
    };
    RectangleRenderer.prototype._updateViewportRectangle = function () {
        this._addRectangleFloat(this._vertices.attributes, 0, 0, 0, this._terminal.cols * this._dimensions.scaledCellWidth, this._terminal.rows * this._dimensions.scaledCellHeight, this._bgFloat);
    };
    RectangleRenderer.prototype.updateSelection = function (model, columnSelectMode) {
        var terminal = this._terminal;
        if (!model.hasSelection) {
            TypedArrayUtils_1.fill(this._vertices.selection, 0, 0);
            return;
        }
        if (columnSelectMode) {
            var startCol = model.startCol;
            var width = model.endCol - startCol;
            var height = model.viewportCappedEndRow - model.viewportCappedStartRow + 1;
            this._addRectangleFloat(this._vertices.selection, 0, startCol * this._dimensions.scaledCellWidth, model.viewportCappedStartRow * this._dimensions.scaledCellHeight, width * this._dimensions.scaledCellWidth, height * this._dimensions.scaledCellHeight, this._selectionFloat);
            TypedArrayUtils_1.fill(this._vertices.selection, 0, INDICES_PER_RECTANGLE);
        }
        else {
            var startCol = model.viewportStartRow === model.viewportCappedStartRow ? model.startCol : 0;
            var startRowEndCol = model.viewportCappedStartRow === model.viewportCappedEndRow ? model.endCol : terminal.cols;
            this._addRectangleFloat(this._vertices.selection, 0, startCol * this._dimensions.scaledCellWidth, model.viewportCappedStartRow * this._dimensions.scaledCellHeight, (startRowEndCol - startCol) * this._dimensions.scaledCellWidth, this._dimensions.scaledCellHeight, this._selectionFloat);
            var middleRowsCount = Math.max(model.viewportCappedEndRow - model.viewportCappedStartRow - 1, 0);
            this._addRectangleFloat(this._vertices.selection, INDICES_PER_RECTANGLE, 0, (model.viewportCappedStartRow + 1) * this._dimensions.scaledCellHeight, terminal.cols * this._dimensions.scaledCellWidth, middleRowsCount * this._dimensions.scaledCellHeight, this._selectionFloat);
            if (model.viewportCappedStartRow !== model.viewportCappedEndRow) {
                var endCol = model.viewportEndRow === model.viewportCappedEndRow ? model.endCol : terminal.cols;
                this._addRectangleFloat(this._vertices.selection, INDICES_PER_RECTANGLE * 2, 0, model.viewportCappedEndRow * this._dimensions.scaledCellHeight, endCol * this._dimensions.scaledCellWidth, this._dimensions.scaledCellHeight, this._selectionFloat);
            }
            else {
                TypedArrayUtils_1.fill(this._vertices.selection, 0, INDICES_PER_RECTANGLE * 2);
            }
        }
    };
    RectangleRenderer.prototype.updateBackgrounds = function (model) {
        var terminal = this._terminal;
        var vertices = this._vertices;
        var rectangleCount = 1;
        for (var y = 0; y < terminal.rows; y++) {
            var currentStartX = -1;
            var currentBg = 0;
            var currentFg = 0;
            var currentInverse = false;
            for (var x = 0; x < terminal.cols; x++) {
                var modelIndex = ((y * terminal.cols) + x) * RenderModel_1.RENDER_MODEL_INDICIES_PER_CELL;
                var bg = model.cells[modelIndex + RenderModel_1.RENDER_MODEL_BG_OFFSET];
                var fg = model.cells[modelIndex + RenderModel_1.RENDER_MODEL_FG_OFFSET];
                var inverse = !!(fg & 67108864);
                if (bg !== currentBg || (fg !== currentFg && (currentInverse || inverse))) {
                    if (currentBg !== 0 || (currentInverse && currentFg !== 0)) {
                        var offset = rectangleCount++ * INDICES_PER_RECTANGLE;
                        this._updateRectangle(vertices, offset, currentFg, currentBg, currentStartX, x, y);
                    }
                    currentStartX = x;
                    currentBg = bg;
                    currentFg = fg;
                    currentInverse = inverse;
                }
            }
            if (currentBg !== 0 || (currentInverse && currentFg !== 0)) {
                var offset = rectangleCount++ * INDICES_PER_RECTANGLE;
                this._updateRectangle(vertices, offset, currentFg, currentBg, currentStartX, terminal.cols, y);
            }
        }
        vertices.count = rectangleCount;
    };
    RectangleRenderer.prototype._updateRectangle = function (vertices, offset, fg, bg, startX, endX, y) {
        var rgba;
        if (fg & 67108864) {
            switch (fg & 50331648) {
                case 16777216:
                case 33554432:
                    rgba = this._colors.ansi[fg & 255].rgba;
                    break;
                case 50331648:
                    rgba = (fg & 16777215) << 8;
                    break;
                case 0:
                default:
                    rgba = this._colors.foreground.rgba;
            }
        }
        else {
            switch (bg & 50331648) {
                case 16777216:
                case 33554432:
                    rgba = this._colors.ansi[bg & 255].rgba;
                    break;
                case 50331648:
                    rgba = (bg & 16777215) << 8;
                    break;
                case 0:
                default:
                    rgba = this._colors.background.rgba;
            }
        }
        if (vertices.attributes.length < offset + 4) {
            vertices.attributes = WebglUtils_1.expandFloat32Array(vertices.attributes, this._terminal.rows * this._terminal.cols * INDICES_PER_RECTANGLE);
        }
        var x1 = startX * this._dimensions.scaledCellWidth;
        var y1 = y * this._dimensions.scaledCellHeight;
        var r = ((rgba >> 24) & 0xFF) / 255;
        var g = ((rgba >> 16) & 0xFF) / 255;
        var b = ((rgba >> 8) & 0xFF) / 255;
        this._addRectangle(vertices.attributes, offset, x1, y1, (endX - startX) * this._dimensions.scaledCellWidth, this._dimensions.scaledCellHeight, r, g, b, 1);
    };
    RectangleRenderer.prototype._addRectangle = function (array, offset, x1, y1, width, height, r, g, b, a) {
        array[offset] = x1;
        array[offset + 1] = y1;
        array[offset + 2] = width;
        array[offset + 3] = height;
        array[offset + 4] = r;
        array[offset + 5] = g;
        array[offset + 6] = b;
        array[offset + 7] = a;
    };
    RectangleRenderer.prototype._addRectangleFloat = function (array, offset, x1, y1, width, height, color) {
        array[offset] = x1;
        array[offset + 1] = y1;
        array[offset + 2] = width;
        array[offset + 3] = height;
        array[offset + 4] = color[0];
        array[offset + 5] = color[1];
        array[offset + 6] = color[2];
        array[offset + 7] = color[3];
    };
    RectangleRenderer.prototype._colorToFloat32Array = function (color) {
        return new Float32Array([
            ((color.rgba >> 24) & 0xFF) / 255,
            ((color.rgba >> 16) & 0xFF) / 255,
            ((color.rgba >> 8) & 0xFF) / 255,
            ((color.rgba) & 0xFF) / 255
        ]);
    };
    return RectangleRenderer;
}());
exports.RectangleRenderer = RectangleRenderer;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/RenderModel.js":
/*!*****************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/RenderModel.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
exports.RENDER_MODEL_INDICIES_PER_CELL = 3;
exports.RENDER_MODEL_BG_OFFSET = 1;
exports.RENDER_MODEL_FG_OFFSET = 2;
exports.COMBINED_CHAR_BIT_MASK = 0x80000000;
var RenderModel = (function () {
    function RenderModel() {
        this.cells = new Uint32Array(0);
        this.lineLengths = new Uint32Array(0);
        this.selection = {
            hasSelection: false,
            viewportStartRow: 0,
            viewportEndRow: 0,
            viewportCappedStartRow: 0,
            viewportCappedEndRow: 0,
            startCol: 0,
            endCol: 0
        };
    }
    RenderModel.prototype.resize = function (cols, rows) {
        var indexCount = cols * rows * exports.RENDER_MODEL_INDICIES_PER_CELL;
        if (indexCount !== this.cells.length) {
            this.cells = new Uint32Array(indexCount);
            this.lineLengths = new Uint32Array(rows);
        }
    };
    RenderModel.prototype.clear = function () {
        TypedArrayUtils_1.fill(this.cells, 0, 0);
        TypedArrayUtils_1.fill(this.lineLengths, 0, 0);
        this.clearSelection();
    };
    RenderModel.prototype.clearSelection = function () {
        this.selection.hasSelection = false;
        this.selection.viewportStartRow = 0;
        this.selection.viewportEndRow = 0;
        this.selection.viewportCappedStartRow = 0;
        this.selection.viewportCappedEndRow = 0;
        this.selection.startCol = 0;
        this.selection.endCol = 0;
    };
    return RenderModel;
}());
exports.RenderModel = RenderModel;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/TypedArray.js":
/*!****************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/TypedArray.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function slice(array, start, end) {
    if (array.slice) {
        return array.slice(start, end);
    }
    return sliceFallback(array, start, end);
}
exports.slice = slice;
function sliceFallback(array, start, end) {
    if (start === void 0) { start = 0; }
    if (end === void 0) { end = array.length; }
    if (start < 0) {
        start = (array.length + start) % array.length;
    }
    if (end >= array.length) {
        end = array.length;
    }
    else {
        end = (array.length + end) % array.length;
    }
    start = Math.min(start, end);
    var result = new array.constructor(end - start);
    for (var i = 0; i < end - start; ++i) {
        result[i] = array[i + start];
    }
    return result;
}
exports.sliceFallback = sliceFallback;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/WebglAddon.js":
/*!****************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/WebglAddon.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var WebglRenderer_1 = __webpack_require__(/*! ./WebglRenderer */ "./addons/xterm-addon-webgl/out/WebglRenderer.js");
var WebglAddon = (function () {
    function WebglAddon(_preserveDrawingBuffer) {
        this._preserveDrawingBuffer = _preserveDrawingBuffer;
    }
    WebglAddon.prototype.activate = function (terminal) {
        if (!terminal.element) {
            throw new Error('Cannot activate WebglAddon before Terminal.open');
        }
        this._terminal = terminal;
        var renderService = terminal._core._renderService;
        var colors = terminal._core._colorManager.colors;
        this._renderer = new WebglRenderer_1.WebglRenderer(terminal, colors, this._preserveDrawingBuffer);
        renderService.setRenderer(this._renderer);
    };
    WebglAddon.prototype.dispose = function () {
        if (!this._terminal) {
            throw new Error('Cannot dispose WebglAddon because it is activated');
        }
        var renderService = this._terminal._core._renderService;
        renderService.setRenderer(this._terminal._core._createRenderer());
        renderService.onResize(this._terminal.cols, this._terminal.rows);
        this._renderer = undefined;
    };
    Object.defineProperty(WebglAddon.prototype, "textureAtlas", {
        get: function () {
            var _a;
            return (_a = this._renderer) === null || _a === void 0 ? void 0 : _a.textureAtlas;
        },
        enumerable: true,
        configurable: true
    });
    return WebglAddon;
}());
exports.WebglAddon = WebglAddon;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/WebglRenderer.js":
/*!*******************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/WebglRenderer.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var GlyphRenderer_1 = __webpack_require__(/*! ./GlyphRenderer */ "./addons/xterm-addon-webgl/out/GlyphRenderer.js");
var LinkRenderLayer_1 = __webpack_require__(/*! ./renderLayer/LinkRenderLayer */ "./addons/xterm-addon-webgl/out/renderLayer/LinkRenderLayer.js");
var CursorRenderLayer_1 = __webpack_require__(/*! ./renderLayer/CursorRenderLayer */ "./addons/xterm-addon-webgl/out/renderLayer/CursorRenderLayer.js");
var CharAtlasCache_1 = __webpack_require__(/*! ./atlas/CharAtlasCache */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasCache.js");
var RectangleRenderer_1 = __webpack_require__(/*! ./RectangleRenderer */ "./addons/xterm-addon-webgl/out/RectangleRenderer.js");
var RenderModel_1 = __webpack_require__(/*! ./RenderModel */ "./addons/xterm-addon-webgl/out/RenderModel.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var WebglRenderer = (function (_super) {
    __extends(WebglRenderer, _super);
    function WebglRenderer(_terminal, _colors, preserveDrawingBuffer) {
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._colors = _colors;
        _this._model = new RenderModel_1.RenderModel();
        _this._workCell = new CellData_1.CellData();
        _this._onRequestRefreshRows = new EventEmitter_1.EventEmitter();
        _this._core = _this._terminal._core;
        _this._renderLayers = [
            new LinkRenderLayer_1.LinkRenderLayer(_this._core.screenElement, 2, _this._colors, _this._core),
            new CursorRenderLayer_1.CursorRenderLayer(_this._core.screenElement, 3, _this._colors, _this._onRequestRefreshRows)
        ];
        _this.dimensions = {
            scaledCharWidth: 0,
            scaledCharHeight: 0,
            scaledCellWidth: 0,
            scaledCellHeight: 0,
            scaledCharLeft: 0,
            scaledCharTop: 0,
            scaledCanvasWidth: 0,
            scaledCanvasHeight: 0,
            canvasWidth: 0,
            canvasHeight: 0,
            actualCellWidth: 0,
            actualCellHeight: 0
        };
        _this._devicePixelRatio = window.devicePixelRatio;
        _this._updateDimensions();
        _this._canvas = document.createElement('canvas');
        var contextAttributes = {
            antialias: false,
            depth: false,
            preserveDrawingBuffer: preserveDrawingBuffer
        };
        _this._gl = _this._canvas.getContext('webgl2', contextAttributes);
        if (!_this._gl) {
            throw new Error('WebGL2 not supported');
        }
        _this._core.screenElement.appendChild(_this._canvas);
        _this._rectangleRenderer = new RectangleRenderer_1.RectangleRenderer(_this._terminal, _this._colors, _this._gl, _this.dimensions);
        _this._glyphRenderer = new GlyphRenderer_1.GlyphRenderer(_this._terminal, _this._colors, _this._gl, _this.dimensions);
        _this.onCharSizeChanged();
        _this._isAttached = document.body.contains(_this._core.screenElement);
        return _this;
    }
    Object.defineProperty(WebglRenderer.prototype, "onRequestRefreshRows", {
        get: function () { return this._onRequestRefreshRows.event; },
        enumerable: true,
        configurable: true
    });
    WebglRenderer.prototype.dispose = function () {
        this._renderLayers.forEach(function (l) { return l.dispose(); });
        this._core.screenElement.removeChild(this._canvas);
        _super.prototype.dispose.call(this);
    };
    Object.defineProperty(WebglRenderer.prototype, "textureAtlas", {
        get: function () {
            var _a;
            return (_a = this._charAtlas) === null || _a === void 0 ? void 0 : _a.cacheCanvas;
        },
        enumerable: true,
        configurable: true
    });
    WebglRenderer.prototype.setColors = function (colors) {
        var _this = this;
        this._colors = colors;
        this._renderLayers.forEach(function (l) {
            l.setColors(_this._terminal, _this._colors);
            l.reset(_this._terminal);
        });
        this._rectangleRenderer.setColors();
        this._glyphRenderer.setColors();
        this._refreshCharAtlas();
        this._model.clear();
    };
    WebglRenderer.prototype.onDevicePixelRatioChange = function () {
        if (this._devicePixelRatio !== window.devicePixelRatio) {
            this._devicePixelRatio = window.devicePixelRatio;
            this.onResize(this._terminal.cols, this._terminal.rows);
        }
    };
    WebglRenderer.prototype.onResize = function (cols, rows) {
        var _this = this;
        this._updateDimensions();
        this._model.resize(this._terminal.cols, this._terminal.rows);
        this._rectangleRenderer.onResize();
        this._renderLayers.forEach(function (l) { return l.resize(_this._terminal, _this.dimensions); });
        this._canvas.width = this.dimensions.scaledCanvasWidth;
        this._canvas.height = this.dimensions.scaledCanvasHeight;
        this._canvas.style.width = this.dimensions.canvasWidth + "px";
        this._canvas.style.height = this.dimensions.canvasHeight + "px";
        this._core.screenElement.style.width = this.dimensions.canvasWidth + "px";
        this._core.screenElement.style.height = this.dimensions.canvasHeight + "px";
        this._glyphRenderer.setDimensions(this.dimensions);
        this._glyphRenderer.onResize();
        this._refreshCharAtlas();
        this._model.clear();
    };
    WebglRenderer.prototype.onCharSizeChanged = function () {
        this.onResize(this._terminal.cols, this._terminal.rows);
    };
    WebglRenderer.prototype.onBlur = function () {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.onBlur(_this._terminal); });
    };
    WebglRenderer.prototype.onFocus = function () {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.onFocus(_this._terminal); });
    };
    WebglRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.onSelectionChanged(_this._terminal, start, end, columnSelectMode); });
        this._updateSelectionModel(start, end);
        this._rectangleRenderer.updateSelection(this._model.selection, columnSelectMode);
        this._glyphRenderer.updateSelection(this._model, columnSelectMode);
        this._onRequestRefreshRows.fire({ start: 0, end: this._terminal.rows - 1 });
    };
    WebglRenderer.prototype.onCursorMove = function () {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.onCursorMove(_this._terminal); });
    };
    WebglRenderer.prototype.onOptionsChanged = function () {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.onOptionsChanged(_this._terminal); });
        this._updateDimensions();
        this._refreshCharAtlas();
    };
    WebglRenderer.prototype._refreshCharAtlas = function () {
        if (this.dimensions.scaledCharWidth <= 0 && this.dimensions.scaledCharHeight <= 0) {
            this._isAttached = false;
            return;
        }
        var atlas = CharAtlasCache_1.acquireCharAtlas(this._terminal, this._colors, this.dimensions.scaledCharWidth, this.dimensions.scaledCharHeight);
        if (!('getRasterizedGlyph' in atlas)) {
            throw new Error('The webgl renderer only works with the webgl char atlas');
        }
        this._charAtlas = atlas;
        this._charAtlas.warmUp();
        this._glyphRenderer.setAtlas(this._charAtlas);
    };
    WebglRenderer.prototype.clear = function () {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.reset(_this._terminal); });
    };
    WebglRenderer.prototype.registerCharacterJoiner = function (handler) {
        return -1;
    };
    WebglRenderer.prototype.deregisterCharacterJoiner = function (joinerId) {
        return false;
    };
    WebglRenderer.prototype.renderRows = function (start, end) {
        var _this = this;
        if (!this._isAttached) {
            if (document.body.contains(this._core.screenElement) && this._core._charSizeService.width && this._core._charSizeService.height) {
                this._updateDimensions();
                this._refreshCharAtlas();
                this._isAttached = true;
            }
            else {
                return;
            }
        }
        this._renderLayers.forEach(function (l) { return l.onGridChanged(_this._terminal, start, end); });
        if (this._glyphRenderer.beginFrame()) {
            this._model.clear();
        }
        this._updateModel(start, end);
        this._rectangleRenderer.render();
        this._glyphRenderer.render(this._model, this._model.selection.hasSelection);
    };
    WebglRenderer.prototype._updateModel = function (start, end) {
        var terminal = this._core;
        for (var y = start; y <= end; y++) {
            var row = y + terminal.buffer.ydisp;
            var line = terminal.buffer.lines.get(row);
            this._model.lineLengths[y] = 0;
            for (var x = 0; x < terminal.cols; x++) {
                line.loadCell(x, this._workCell);
                var chars = this._workCell.getChars();
                var code = this._workCell.getCode();
                var i = ((y * terminal.cols) + x) * RenderModel_1.RENDER_MODEL_INDICIES_PER_CELL;
                if (code !== Constants_1.NULL_CELL_CODE) {
                    this._model.lineLengths[y] = x + 1;
                }
                if (this._model.cells[i] === code &&
                    this._model.cells[i + RenderModel_1.RENDER_MODEL_BG_OFFSET] === this._workCell.bg &&
                    this._model.cells[i + RenderModel_1.RENDER_MODEL_FG_OFFSET] === this._workCell.fg) {
                    continue;
                }
                if (chars.length > 1) {
                    code = code | RenderModel_1.COMBINED_CHAR_BIT_MASK;
                }
                this._model.cells[i] = code;
                this._model.cells[i + RenderModel_1.RENDER_MODEL_BG_OFFSET] = this._workCell.bg;
                this._model.cells[i + RenderModel_1.RENDER_MODEL_FG_OFFSET] = this._workCell.fg;
                this._glyphRenderer.updateCell(x, y, code, this._workCell.bg, this._workCell.fg, chars);
            }
        }
        this._rectangleRenderer.updateBackgrounds(this._model);
    };
    WebglRenderer.prototype._updateSelectionModel = function (start, end) {
        var terminal = this._terminal;
        if (!start || !end || (start[0] === end[0] && start[1] === end[1])) {
            this._model.clearSelection();
            return;
        }
        var viewportStartRow = start[1] - terminal.buffer.viewportY;
        var viewportEndRow = end[1] - terminal.buffer.viewportY;
        var viewportCappedStartRow = Math.max(viewportStartRow, 0);
        var viewportCappedEndRow = Math.min(viewportEndRow, terminal.rows - 1);
        if (viewportCappedStartRow >= terminal.rows || viewportCappedEndRow < 0) {
            this._model.clearSelection();
            return;
        }
        this._model.selection.hasSelection = true;
        this._model.selection.viewportStartRow = viewportStartRow;
        this._model.selection.viewportEndRow = viewportEndRow;
        this._model.selection.viewportCappedStartRow = viewportCappedStartRow;
        this._model.selection.viewportCappedEndRow = viewportCappedEndRow;
        this._model.selection.startCol = start[0];
        this._model.selection.endCol = end[0];
    };
    WebglRenderer.prototype._updateDimensions = function () {
        if (!this._core._charSizeService.width || !this._core._charSizeService.height) {
            return;
        }
        this.dimensions.scaledCharWidth = Math.floor(this._core._charSizeService.width * this._devicePixelRatio);
        this.dimensions.scaledCharHeight = Math.ceil(this._core._charSizeService.height * this._devicePixelRatio);
        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.getOption('lineHeight'));
        this.dimensions.scaledCharTop = this._terminal.getOption('lineHeight') === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);
        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.getOption('letterSpacing'));
        this.dimensions.scaledCharLeft = Math.floor(this._terminal.getOption('letterSpacing') / 2);
        this.dimensions.scaledCanvasHeight = this._terminal.rows * this.dimensions.scaledCellHeight;
        this.dimensions.scaledCanvasWidth = this._terminal.cols * this.dimensions.scaledCellWidth;
        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / this._devicePixelRatio);
        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / this._devicePixelRatio);
        this.dimensions.actualCellHeight = this.dimensions.scaledCellHeight / this._devicePixelRatio;
        this.dimensions.actualCellWidth = this.dimensions.scaledCellWidth / this._devicePixelRatio;
    };
    return WebglRenderer;
}(Lifecycle_1.Disposable));
exports.WebglRenderer = WebglRenderer;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/WebglUtils.js":
/*!****************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/WebglUtils.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.PROJECTION_MATRIX = new Float32Array([
    2, 0, 0, 0,
    0, -2, 0, 0,
    0, 0, 1, 0,
    -1, 1, 0, 1
]);
function createProgram(gl, vertexSource, fragmentSource) {
    var program = throwIfFalsy(gl.createProgram());
    gl.attachShader(program, throwIfFalsy(createShader(gl, gl.VERTEX_SHADER, vertexSource)));
    gl.attachShader(program, throwIfFalsy(createShader(gl, gl.FRAGMENT_SHADER, fragmentSource)));
    gl.linkProgram(program);
    var success = gl.getProgramParameter(program, gl.LINK_STATUS);
    if (success) {
        return program;
    }
    console.error(gl.getProgramInfoLog(program));
    gl.deleteProgram(program);
}
exports.createProgram = createProgram;
function createShader(gl, type, source) {
    var shader = throwIfFalsy(gl.createShader(type));
    gl.shaderSource(shader, source);
    gl.compileShader(shader);
    var success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
    if (success) {
        return shader;
    }
    console.error(gl.getShaderInfoLog(shader));
    gl.deleteShader(shader);
}
exports.createShader = createShader;
function expandFloat32Array(source, max) {
    var newLength = Math.min(source.length * 2, max);
    var newArray = new Float32Array(newLength);
    for (var i = 0; i < source.length; i++) {
        newArray[i] = source[i];
    }
    return newArray;
}
exports.expandFloat32Array = expandFloat32Array;
function throwIfFalsy(value) {
    if (!value) {
        throw new Error('value must not be falsy');
    }
    return value;
}
exports.throwIfFalsy = throwIfFalsy;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/atlas/CharAtlasCache.js":
/*!**************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/atlas/CharAtlasCache.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CharAtlasUtils_1 = __webpack_require__(/*! ./CharAtlasUtils */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js");
var WebglCharAtlas_1 = __webpack_require__(/*! ./WebglCharAtlas */ "./addons/xterm-addon-webgl/out/atlas/WebglCharAtlas.js");
var charAtlasCache = [];
function acquireCharAtlas(terminal, colors, scaledCharWidth, scaledCharHeight) {
    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors);
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        var ownedByIndex = entry.ownedBy.indexOf(terminal);
        if (ownedByIndex >= 0) {
            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
                return entry.atlas;
            }
            if (entry.ownedBy.length === 1) {
                entry.atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                entry.ownedBy.splice(ownedByIndex, 1);
            }
            break;
        }
    }
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
            entry.ownedBy.push(terminal);
            return entry.atlas;
        }
    }
    var newEntry = {
        atlas: new WebglCharAtlas_1.WebglCharAtlas(document, newConfig),
        config: newConfig,
        ownedBy: [terminal]
    };
    charAtlasCache.push(newEntry);
    return newEntry.atlas;
}
exports.acquireCharAtlas = acquireCharAtlas;
function removeTerminalFromCache(terminal) {
    for (var i = 0; i < charAtlasCache.length; i++) {
        var index = charAtlasCache[i].ownedBy.indexOf(terminal);
        if (index !== -1) {
            if (charAtlasCache[i].ownedBy.length === 1) {
                charAtlasCache[i].atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                charAtlasCache[i].ownedBy.splice(index, 1);
            }
            break;
        }
    }
}
exports.removeTerminalFromCache = removeTerminalFromCache;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js":
/*!**************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var NULL_COLOR = {
    css: '',
    rgba: 0
};
function generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors) {
    var clonedColors = {
        foreground: colors.foreground,
        background: colors.background,
        cursor: NULL_COLOR,
        cursorAccent: NULL_COLOR,
        selection: NULL_COLOR,
        selectionOpaque: NULL_COLOR,
        ansi: colors.ansi.slice(),
        contrastCache: colors.contrastCache
    };
    return {
        devicePixelRatio: window.devicePixelRatio,
        scaledCharWidth: scaledCharWidth,
        scaledCharHeight: scaledCharHeight,
        fontFamily: terminal.getOption('fontFamily'),
        fontSize: terminal.getOption('fontSize'),
        fontWeight: terminal.getOption('fontWeight'),
        fontWeightBold: terminal.getOption('fontWeightBold'),
        allowTransparency: terminal.getOption('allowTransparency'),
        drawBoldTextInBrightColors: terminal.getOption('drawBoldTextInBrightColors'),
        minimumContrastRatio: terminal.getOption('minimumContrastRatio'),
        colors: clonedColors
    };
}
exports.generateConfig = generateConfig;
function configEquals(a, b) {
    for (var i = 0; i < a.colors.ansi.length; i++) {
        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {
            return false;
        }
    }
    return a.devicePixelRatio === b.devicePixelRatio &&
        a.fontFamily === b.fontFamily &&
        a.fontSize === b.fontSize &&
        a.fontWeight === b.fontWeight &&
        a.fontWeightBold === b.fontWeightBold &&
        a.allowTransparency === b.allowTransparency &&
        a.scaledCharWidth === b.scaledCharWidth &&
        a.scaledCharHeight === b.scaledCharHeight &&
        a.drawBoldTextInBrightColors === b.drawBoldTextInBrightColors &&
        a.minimumContrastRatio === b.minimumContrastRatio &&
        a.colors.foreground === b.colors.foreground &&
        a.colors.background === b.colors.background;
}
exports.configEquals = configEquals;
function is256Color(colorCode) {
    return (colorCode & 50331648) === 16777216 || (colorCode & 50331648) === 33554432;
}
exports.is256Color = is256Color;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/atlas/WebglCharAtlas.js":
/*!**************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/atlas/WebglCharAtlas.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var Constants_2 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var WebglUtils_1 = __webpack_require__(/*! ../WebglUtils */ "./addons/xterm-addon-webgl/out/WebglUtils.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var Color_1 = __webpack_require__(/*! browser/Color */ "./out/browser/Color.js");
var TEXTURE_WIDTH = 1024;
var TEXTURE_HEIGHT = 1024;
var TEXTURE_CAPACITY = Math.floor(TEXTURE_HEIGHT * 0.8);
var TRANSPARENT_COLOR = {
    css: 'rgba(0, 0, 0, 0)',
    rgba: 0
};
var NULL_RASTERIZED_GLYPH = {
    offset: { x: 0, y: 0 },
    texturePosition: { x: 0, y: 0 },
    texturePositionClipSpace: { x: 0, y: 0 },
    size: { x: 0, y: 0 },
    sizeClipSpace: { x: 0, y: 0 }
};
var TMP_CANVAS_GLYPH_PADDING = 2;
var WebglCharAtlas = (function () {
    function WebglCharAtlas(document, _config) {
        this._config = _config;
        this._didWarmUp = false;
        this._cacheMap = {};
        this._cacheMapCombined = {};
        this._currentRowY = 0;
        this._currentRowX = 0;
        this._currentRowHeight = 0;
        this.hasCanvasChanged = false;
        this._workBoundingBox = { top: 0, left: 0, bottom: 0, right: 0 };
        this._workAttributeData = new AttributeData_1.AttributeData();
        this.cacheCanvas = document.createElement('canvas');
        this.cacheCanvas.width = TEXTURE_WIDTH;
        this.cacheCanvas.height = TEXTURE_HEIGHT;
        this._cacheCtx = WebglUtils_1.throwIfFalsy(this.cacheCanvas.getContext('2d', { alpha: true }));
        this._tmpCanvas = document.createElement('canvas');
        this._tmpCanvas.width = this._config.scaledCharWidth * 2 + TMP_CANVAS_GLYPH_PADDING * 2;
        this._tmpCanvas.height = this._config.scaledCharHeight + TMP_CANVAS_GLYPH_PADDING * 2;
        this._tmpCtx = WebglUtils_1.throwIfFalsy(this._tmpCanvas.getContext('2d', { alpha: this._config.allowTransparency }));
    }
    WebglCharAtlas.prototype.dispose = function () {
        if (this.cacheCanvas.parentElement) {
            this.cacheCanvas.parentElement.removeChild(this.cacheCanvas);
        }
    };
    WebglCharAtlas.prototype.warmUp = function () {
        if (!this._didWarmUp) {
            this._doWarmUp();
            this._didWarmUp = true;
        }
    };
    WebglCharAtlas.prototype._doWarmUp = function () {
        var _a, _b;
        for (var i = 33; i < 126; i++) {
            var rasterizedGlyph = this._drawToCache(i, Constants_2.DEFAULT_COLOR, Constants_2.DEFAULT_COLOR);
            this._cacheMap[i] = (_a = {},
                _a[Constants_2.DEFAULT_COLOR] = (_b = {},
                    _b[Constants_2.DEFAULT_COLOR] = rasterizedGlyph,
                    _b),
                _a);
        }
    };
    WebglCharAtlas.prototype.beginFrame = function () {
        if (this._currentRowY > TEXTURE_CAPACITY) {
            this._cacheCtx.clearRect(0, 0, TEXTURE_WIDTH, TEXTURE_HEIGHT);
            this._cacheMap = {};
            this._currentRowHeight = 0;
            this._currentRowX = 0;
            this._currentRowY = 0;
            this._doWarmUp();
            return true;
        }
        return false;
    };
    WebglCharAtlas.prototype.getRasterizedGlyphCombinedChar = function (chars, bg, fg) {
        var rasterizedGlyphSet = this._cacheMapCombined[chars];
        if (!rasterizedGlyphSet) {
            rasterizedGlyphSet = {};
            this._cacheMapCombined[chars] = rasterizedGlyphSet;
        }
        var rasterizedGlyph;
        var rasterizedGlyphSetBg = rasterizedGlyphSet[bg];
        if (rasterizedGlyphSetBg) {
            rasterizedGlyph = rasterizedGlyphSetBg[fg];
        }
        if (!rasterizedGlyph) {
            rasterizedGlyph = this._drawToCache(chars, bg, fg);
            if (!rasterizedGlyphSet[bg]) {
                rasterizedGlyphSet[bg] = {};
            }
            rasterizedGlyphSet[bg][fg] = rasterizedGlyph;
        }
        return rasterizedGlyph;
    };
    WebglCharAtlas.prototype.getRasterizedGlyph = function (code, bg, fg) {
        var rasterizedGlyphSet = this._cacheMap[code];
        if (!rasterizedGlyphSet) {
            rasterizedGlyphSet = {};
            this._cacheMap[code] = rasterizedGlyphSet;
        }
        var rasterizedGlyph;
        var rasterizedGlyphSetBg = rasterizedGlyphSet[bg];
        if (rasterizedGlyphSetBg) {
            rasterizedGlyph = rasterizedGlyphSetBg[fg];
        }
        if (!rasterizedGlyph) {
            rasterizedGlyph = this._drawToCache(code, bg, fg);
            if (!rasterizedGlyphSet[bg]) {
                rasterizedGlyphSet[bg] = {};
            }
            rasterizedGlyphSet[bg][fg] = rasterizedGlyph;
        }
        return rasterizedGlyph;
    };
    WebglCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {
        if (idx >= this._config.colors.ansi.length) {
            throw new Error('No color found for idx ' + idx);
        }
        return this._config.colors.ansi[idx];
    };
    WebglCharAtlas.prototype._getBackgroundColor = function (bgColorMode, bgColor, inverse) {
        if (this._config.allowTransparency) {
            return TRANSPARENT_COLOR;
        }
        switch (bgColorMode) {
            case 16777216:
            case 33554432:
                return this._getColorFromAnsiIndex(bgColor);
            case 50331648:
                var arr = AttributeData_1.AttributeData.toColorRGB(bgColor);
                return {
                    rgba: bgColor << 8,
                    css: "#" + toPaddedHex(arr[0]) + toPaddedHex(arr[1]) + toPaddedHex(arr[2])
                };
            case 0:
            default:
                if (inverse) {
                    return this._config.colors.foreground;
                }
                return this._config.colors.background;
        }
    };
    WebglCharAtlas.prototype._getForegroundCss = function (bg, bgColorMode, bgColor, fg, fgColorMode, fgColor, inverse, bold) {
        var minimumContrastCss = this._getMinimumContrastCss(bg, bgColorMode, bgColor, fg, fgColorMode, fgColor, inverse, bold);
        if (minimumContrastCss) {
            return minimumContrastCss;
        }
        switch (fgColorMode) {
            case 16777216:
            case 33554432:
                if (this._config.drawBoldTextInBrightColors && bold && fgColor < 8) {
                    fgColor += 8;
                }
                return this._getColorFromAnsiIndex(fgColor).css;
            case 50331648:
                var arr = AttributeData_1.AttributeData.toColorRGB(fgColor);
                return Color_1.channels.toCss(arr[0], arr[1], arr[2]);
            case 0:
            default:
                if (inverse) {
                    var bg_1 = this._config.colors.background.css;
                    if (bg_1.length === 9) {
                        return bg_1.substr(0, 7);
                    }
                    return bg_1;
                }
                return this._config.colors.foreground.css;
        }
    };
    WebglCharAtlas.prototype._resolveBackgroundRgba = function (bgColorMode, bgColor, inverse) {
        switch (bgColorMode) {
            case 16777216:
            case 33554432:
                return this._getColorFromAnsiIndex(bgColor).rgba;
            case 50331648:
                return bgColor << 8;
            case 0:
            default:
                if (inverse) {
                    return this._config.colors.foreground.rgba;
                }
                return this._config.colors.background.rgba;
        }
    };
    WebglCharAtlas.prototype._resolveForegroundRgba = function (fgColorMode, fgColor, inverse, bold) {
        switch (fgColorMode) {
            case 16777216:
            case 33554432:
                if (this._config.drawBoldTextInBrightColors && bold && fgColor < 8) {
                    fgColor += 8;
                }
                return this._getColorFromAnsiIndex(fgColor).rgba;
            case 50331648:
                return fgColor << 8;
            case 0:
            default:
                if (inverse) {
                    return this._config.colors.background.rgba;
                }
                return this._config.colors.foreground.rgba;
        }
    };
    WebglCharAtlas.prototype._getMinimumContrastCss = function (bg, bgColorMode, bgColor, fg, fgColorMode, fgColor, inverse, bold) {
        if (this._config.minimumContrastRatio === 1) {
            return undefined;
        }
        var adjustedColor = this._config.colors.contrastCache.getCss(bg, fg);
        if (adjustedColor !== undefined) {
            return adjustedColor || undefined;
        }
        var bgRgba = this._resolveBackgroundRgba(bgColorMode, bgColor, inverse);
        var fgRgba = this._resolveForegroundRgba(fgColorMode, fgColor, inverse, bold);
        var result = Color_1.rgba.ensureContrastRatio(bgRgba, fgRgba, this._config.minimumContrastRatio);
        if (!result) {
            this._config.colors.contrastCache.setCss(bg, fg, null);
            return undefined;
        }
        var css = Color_1.channels.toCss((result >> 24) & 0xFF, (result >> 16) & 0xFF, (result >> 8) & 0xFF);
        this._config.colors.contrastCache.setCss(bg, fg, css);
        return css;
    };
    WebglCharAtlas.prototype._drawToCache = function (codeOrChars, bg, fg) {
        var chars = typeof codeOrChars === 'number' ? String.fromCharCode(codeOrChars) : codeOrChars;
        this.hasCanvasChanged = true;
        this._tmpCtx.save();
        this._workAttributeData.fg = fg;
        this._workAttributeData.bg = bg;
        var invisible = !!this._workAttributeData.isInvisible();
        if (invisible) {
            return NULL_RASTERIZED_GLYPH;
        }
        var bold = !!this._workAttributeData.isBold();
        var inverse = !!this._workAttributeData.isInverse();
        var dim = !!this._workAttributeData.isDim();
        var italic = !!this._workAttributeData.isItalic();
        var fgColor = this._workAttributeData.getFgColor();
        var fgColorMode = this._workAttributeData.getFgColorMode();
        var bgColor = this._workAttributeData.getBgColor();
        var bgColorMode = this._workAttributeData.getBgColorMode();
        if (inverse) {
            var temp = fgColor;
            fgColor = bgColor;
            bgColor = temp;
            var temp2 = fgColorMode;
            fgColorMode = bgColorMode;
            bgColorMode = temp2;
        }
        var backgroundColor = this._getBackgroundColor(bgColorMode, bgColor, inverse);
        this._tmpCtx.globalCompositeOperation = 'copy';
        this._tmpCtx.fillStyle = backgroundColor.css;
        this._tmpCtx.fillRect(0, 0, this._tmpCanvas.width, this._tmpCanvas.height);
        this._tmpCtx.globalCompositeOperation = 'source-over';
        var fontWeight = bold ? this._config.fontWeightBold : this._config.fontWeight;
        var fontStyle = italic ? 'italic' : '';
        this._tmpCtx.font =
            fontStyle + " " + fontWeight + " " + this._config.fontSize * this._config.devicePixelRatio + "px " + this._config.fontFamily;
        this._tmpCtx.textBaseline = 'top';
        this._tmpCtx.fillStyle = this._getForegroundCss(bg, bgColorMode, bgColor, fg, fgColorMode, fgColor, inverse, bold);
        if (dim) {
            this._tmpCtx.globalAlpha = Constants_1.DIM_OPACITY;
        }
        this._tmpCtx.fillText(chars, TMP_CANVAS_GLYPH_PADDING, TMP_CANVAS_GLYPH_PADDING);
        this._tmpCtx.restore();
        var imageData = this._tmpCtx.getImageData(0, 0, this._tmpCanvas.width, this._tmpCanvas.height);
        var isEmpty = clearColor(imageData, backgroundColor);
        if (isEmpty) {
            return NULL_RASTERIZED_GLYPH;
        }
        var rasterizedGlyph = this._findGlyphBoundingBox(imageData, this._workBoundingBox);
        var clippedImageData = this._clipImageData(imageData, this._workBoundingBox);
        if (this._currentRowX + this._config.scaledCharWidth > TEXTURE_WIDTH) {
            this._currentRowX = 0;
            this._currentRowY += this._currentRowHeight;
            this._currentRowHeight = 0;
        }
        rasterizedGlyph.texturePosition.x = this._currentRowX;
        rasterizedGlyph.texturePosition.y = this._currentRowY;
        rasterizedGlyph.texturePositionClipSpace.x = this._currentRowX / TEXTURE_WIDTH;
        rasterizedGlyph.texturePositionClipSpace.y = this._currentRowY / TEXTURE_HEIGHT;
        this._currentRowHeight = Math.max(this._currentRowHeight, rasterizedGlyph.size.y);
        this._currentRowX += rasterizedGlyph.size.x;
        this._cacheCtx.putImageData(clippedImageData, rasterizedGlyph.texturePosition.x, rasterizedGlyph.texturePosition.y);
        return rasterizedGlyph;
    };
    WebglCharAtlas.prototype._findGlyphBoundingBox = function (imageData, boundingBox) {
        boundingBox.top = 0;
        var found = false;
        for (var y = 0; y < this._tmpCanvas.height; y++) {
            for (var x = 0; x < this._tmpCanvas.width; x++) {
                var alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;
                if (imageData.data[alphaOffset] !== 0) {
                    boundingBox.top = y;
                    found = true;
                    break;
                }
            }
            if (found) {
                break;
            }
        }
        boundingBox.left = 0;
        found = false;
        for (var x = 0; x < this._tmpCanvas.width; x++) {
            for (var y = 0; y < this._tmpCanvas.height; y++) {
                var alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;
                if (imageData.data[alphaOffset] !== 0) {
                    boundingBox.left = x;
                    found = true;
                    break;
                }
            }
            if (found) {
                break;
            }
        }
        boundingBox.right = this._tmpCanvas.width;
        found = false;
        for (var x = this._tmpCanvas.width - 1; x >= 0; x--) {
            for (var y = 0; y < this._tmpCanvas.height; y++) {
                var alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;
                if (imageData.data[alphaOffset] !== 0) {
                    boundingBox.right = x;
                    found = true;
                    break;
                }
            }
            if (found) {
                break;
            }
        }
        boundingBox.bottom = this._tmpCanvas.height;
        found = false;
        for (var y = this._tmpCanvas.height - 1; y >= 0; y--) {
            for (var x = 0; x < this._tmpCanvas.width; x++) {
                var alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;
                if (imageData.data[alphaOffset] !== 0) {
                    boundingBox.bottom = y;
                    found = true;
                    break;
                }
            }
            if (found) {
                break;
            }
        }
        return {
            texturePosition: { x: 0, y: 0 },
            texturePositionClipSpace: { x: 0, y: 0 },
            size: {
                x: boundingBox.right - boundingBox.left + 1,
                y: boundingBox.bottom - boundingBox.top + 1
            },
            sizeClipSpace: {
                x: (boundingBox.right - boundingBox.left + 1) / TEXTURE_WIDTH,
                y: (boundingBox.bottom - boundingBox.top + 1) / TEXTURE_HEIGHT
            },
            offset: {
                x: -boundingBox.left + TMP_CANVAS_GLYPH_PADDING,
                y: -boundingBox.top + TMP_CANVAS_GLYPH_PADDING
            }
        };
    };
    WebglCharAtlas.prototype._clipImageData = function (imageData, boundingBox) {
        var width = boundingBox.right - boundingBox.left + 1;
        var height = boundingBox.bottom - boundingBox.top + 1;
        var clippedData = new Uint8ClampedArray(width * height * 4);
        for (var y = boundingBox.top; y <= boundingBox.bottom; y++) {
            for (var x = boundingBox.left; x <= boundingBox.right; x++) {
                var oldOffset = y * this._tmpCanvas.width * 4 + x * 4;
                var newOffset = (y - boundingBox.top) * width * 4 + (x - boundingBox.left) * 4;
                clippedData[newOffset] = imageData.data[oldOffset];
                clippedData[newOffset + 1] = imageData.data[oldOffset + 1];
                clippedData[newOffset + 2] = imageData.data[oldOffset + 2];
                clippedData[newOffset + 3] = imageData.data[oldOffset + 3];
            }
        }
        return new ImageData(clippedData, width, height);
    };
    return WebglCharAtlas;
}());
exports.WebglCharAtlas = WebglCharAtlas;
function clearColor(imageData, color) {
    var isEmpty = true;
    var r = color.rgba >>> 24;
    var g = color.rgba >>> 16 & 0xFF;
    var b = color.rgba >>> 8 & 0xFF;
    for (var offset = 0; offset < imageData.data.length; offset += 4) {
        if (imageData.data[offset] === r &&
            imageData.data[offset + 1] === g &&
            imageData.data[offset + 2] === b) {
            imageData.data[offset + 3] = 0;
        }
        else {
            isEmpty = false;
        }
    }
    return isEmpty;
}
function toPaddedHex(c) {
    var s = c.toString(16);
    return s.length < 2 ? '0' + s : s;
}


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/renderLayer/BaseRenderLayer.js":
/*!*********************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/renderLayer/BaseRenderLayer.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CharAtlasCache_1 = __webpack_require__(/*! ../atlas/CharAtlasCache */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasCache.js");
var WebglUtils_1 = __webpack_require__(/*! ../WebglUtils */ "./addons/xterm-addon-webgl/out/WebglUtils.js");
var BaseRenderLayer = (function () {
    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors) {
        this._container = _container;
        this._alpha = _alpha;
        this._colors = _colors;
        this._scaledCharWidth = 0;
        this._scaledCharHeight = 0;
        this._scaledCellWidth = 0;
        this._scaledCellHeight = 0;
        this._scaledCharLeft = 0;
        this._scaledCharTop = 0;
        this._canvas = document.createElement('canvas');
        this._canvas.classList.add("xterm-" + id + "-layer");
        this._canvas.style.zIndex = zIndex.toString();
        this._initCanvas();
        this._container.appendChild(this._canvas);
    }
    BaseRenderLayer.prototype.dispose = function () {
        this._container.removeChild(this._canvas);
        if (this._charAtlas) {
            this._charAtlas.dispose();
        }
    };
    BaseRenderLayer.prototype._initCanvas = function () {
        this._ctx = WebglUtils_1.throwIfFalsy(this._canvas.getContext('2d', { alpha: this._alpha }));
        if (!this._alpha) {
            this._clearAll();
        }
    };
    BaseRenderLayer.prototype.onOptionsChanged = function (terminal) { };
    BaseRenderLayer.prototype.onBlur = function (terminal) { };
    BaseRenderLayer.prototype.onFocus = function (terminal) { };
    BaseRenderLayer.prototype.onCursorMove = function (terminal) { };
    BaseRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) { };
    BaseRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {
        if (columnSelectMode === void 0) { columnSelectMode = false; }
    };
    BaseRenderLayer.prototype.setColors = function (terminal, colorSet) {
        this._refreshCharAtlas(terminal, colorSet);
    };
    BaseRenderLayer.prototype._setTransparency = function (terminal, alpha) {
        if (alpha === this._alpha) {
            return;
        }
        var oldCanvas = this._canvas;
        this._alpha = alpha;
        this._canvas = this._canvas.cloneNode();
        this._initCanvas();
        this._container.replaceChild(this._canvas, oldCanvas);
        this._refreshCharAtlas(terminal, this._colors);
        this.onGridChanged(terminal, 0, terminal.rows - 1);
    };
    BaseRenderLayer.prototype._refreshCharAtlas = function (terminal, colorSet) {
        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {
            return;
        }
        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(terminal, colorSet, this._scaledCharWidth, this._scaledCharHeight);
        this._charAtlas.warmUp();
    };
    BaseRenderLayer.prototype.resize = function (terminal, dim) {
        this._scaledCellWidth = dim.scaledCellWidth;
        this._scaledCellHeight = dim.scaledCellHeight;
        this._scaledCharWidth = dim.scaledCharWidth;
        this._scaledCharHeight = dim.scaledCharHeight;
        this._scaledCharLeft = dim.scaledCharLeft;
        this._scaledCharTop = dim.scaledCharTop;
        this._canvas.width = dim.scaledCanvasWidth;
        this._canvas.height = dim.scaledCanvasHeight;
        this._canvas.style.width = dim.canvasWidth + "px";
        this._canvas.style.height = dim.canvasHeight + "px";
        if (!this._alpha) {
            this._clearAll();
        }
        this._refreshCharAtlas(terminal, this._colors);
    };
    BaseRenderLayer.prototype._fillCells = function (x, y, width, height) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
    };
    BaseRenderLayer.prototype._fillBottomLineAtCells = function (x, y, width) {
        if (width === void 0) { width = 1; }
        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);
    };
    BaseRenderLayer.prototype._fillLeftLineAtCell = function (x, y, width) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio * width, this._scaledCellHeight);
    };
    BaseRenderLayer.prototype._strokeRectAtCell = function (x, y, width, height) {
        this._ctx.lineWidth = window.devicePixelRatio;
        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);
    };
    BaseRenderLayer.prototype._clearAll = function () {
        if (this._alpha) {
            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);
        }
    };
    BaseRenderLayer.prototype._clearCells = function (x, y, width, height) {
        if (this._alpha) {
            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
    };
    BaseRenderLayer.prototype._fillCharTrueColor = function (terminal, cell, x, y) {
        this._ctx.font = this._getFont(terminal, false, false);
        this._ctx.textBaseline = 'middle';
        this._clipRow(terminal, y);
        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);
    };
    BaseRenderLayer.prototype._clipRow = function (terminal, y) {
        this._ctx.beginPath();
        this._ctx.rect(0, y * this._scaledCellHeight, terminal.cols * this._scaledCellWidth, this._scaledCellHeight);
        this._ctx.clip();
    };
    BaseRenderLayer.prototype._getFont = function (terminal, isBold, isItalic) {
        var fontWeight = isBold ? terminal.getOption('fontWeightBold') : terminal.getOption('fontWeight');
        var fontStyle = isItalic ? 'italic' : '';
        return fontStyle + " " + fontWeight + " " + terminal.getOption('fontSize') * window.devicePixelRatio + "px " + terminal.getOption('fontFamily');
    };
    return BaseRenderLayer;
}());
exports.BaseRenderLayer = BaseRenderLayer;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/renderLayer/CursorRenderLayer.js":
/*!***********************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/renderLayer/CursorRenderLayer.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseRenderLayer_1 = __webpack_require__(/*! ./BaseRenderLayer */ "./addons/xterm-addon-webgl/out/renderLayer/BaseRenderLayer.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var BLINK_INTERVAL = 600;
var CursorRenderLayer = (function (_super) {
    __extends(CursorRenderLayer, _super);
    function CursorRenderLayer(container, zIndex, colors, _onRequestRefreshRowsEvent) {
        var _this = _super.call(this, container, 'cursor', zIndex, true, colors) || this;
        _this._onRequestRefreshRowsEvent = _onRequestRefreshRowsEvent;
        _this._cell = new CellData_1.CellData();
        _this._state = {
            x: 0,
            y: 0,
            isFocused: false,
            style: '',
            width: 0
        };
        _this._cursorRenderers = {
            'bar': _this._renderBarCursor.bind(_this),
            'block': _this._renderBlockCursor.bind(_this),
            'underline': _this._renderUnderlineCursor.bind(_this)
        };
        return _this;
    }
    CursorRenderLayer.prototype.resize = function (terminal, dim) {
        _super.prototype.resize.call(this, terminal, dim);
        this._state = {
            x: 0,
            y: 0,
            isFocused: false,
            style: '',
            width: 0
        };
    };
    CursorRenderLayer.prototype.reset = function (terminal) {
        this._clearCursor();
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.dispose();
            this.onOptionsChanged(terminal);
        }
    };
    CursorRenderLayer.prototype.onBlur = function (terminal) {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.pause();
        }
        this._onRequestRefreshRowsEvent.fire({ start: terminal.buffer.cursorY, end: terminal.buffer.cursorY });
    };
    CursorRenderLayer.prototype.onFocus = function (terminal) {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.resume(terminal);
        }
        else {
            this._onRequestRefreshRowsEvent.fire({ start: terminal.buffer.cursorY, end: terminal.buffer.cursorY });
        }
    };
    CursorRenderLayer.prototype.onOptionsChanged = function (terminal) {
        var _this = this;
        var _a;
        if (terminal.getOption('cursorBlink')) {
            if (!this._cursorBlinkStateManager) {
                this._cursorBlinkStateManager = new CursorBlinkStateManager(terminal, function () {
                    _this._render(terminal, true);
                });
            }
        }
        else {
            (_a = this._cursorBlinkStateManager) === null || _a === void 0 ? void 0 : _a.dispose();
            this._cursorBlinkStateManager = undefined;
        }
        this._onRequestRefreshRowsEvent.fire({ start: terminal.buffer.cursorY, end: terminal.buffer.cursorY });
    };
    CursorRenderLayer.prototype.onCursorMove = function (terminal) {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);
        }
    };
    CursorRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) {
        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {
            this._render(terminal, false);
        }
        else {
            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);
        }
    };
    CursorRenderLayer.prototype._render = function (terminal, triggeredByAnimationFrame) {
        if (!terminal._core._coreService.isCursorInitialized || terminal._core._coreService.isCursorHidden) {
            this._clearCursor();
            return;
        }
        var cursorY = terminal.buffer.baseY + terminal.buffer.cursorY;
        var viewportRelativeCursorY = cursorY - terminal.buffer.viewportY;
        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= terminal.rows) {
            this._clearCursor();
            return;
        }
        terminal._core.buffer.lines.get(cursorY).loadCell(terminal.buffer.cursorX, this._cell);
        if (this._cell.content === undefined) {
            return;
        }
        if (!isTerminalFocused(terminal)) {
            this._clearCursor();
            this._ctx.save();
            this._ctx.fillStyle = this._colors.cursor.css;
            var cursorStyle = terminal.getOption('cursorStyle');
            if (cursorStyle && cursorStyle !== 'block') {
                this._cursorRenderers[cursorStyle](terminal, terminal.buffer.cursorX, viewportRelativeCursorY, this._cell);
            }
            else {
                this._renderBlurCursor(terminal, terminal.buffer.cursorX, viewportRelativeCursorY, this._cell);
            }
            this._ctx.restore();
            this._state.x = terminal.buffer.cursorX;
            this._state.y = viewportRelativeCursorY;
            this._state.isFocused = false;
            this._state.style = cursorStyle;
            this._state.width = this._cell.getWidth();
            return;
        }
        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {
            this._clearCursor();
            return;
        }
        if (this._state) {
            if (this._state.x === terminal.buffer.cursorX &&
                this._state.y === viewportRelativeCursorY &&
                this._state.isFocused === isTerminalFocused(terminal) &&
                this._state.style === terminal.getOption('cursorStyle') &&
                this._state.width === this._cell.getWidth()) {
                return;
            }
            this._clearCursor();
        }
        this._ctx.save();
        this._cursorRenderers[terminal.getOption('cursorStyle') || 'block'](terminal, terminal.buffer.cursorX, viewportRelativeCursorY, this._cell);
        this._ctx.restore();
        this._state.x = terminal.buffer.cursorX;
        this._state.y = viewportRelativeCursorY;
        this._state.isFocused = false;
        this._state.style = terminal.getOption('cursorStyle');
        this._state.width = this._cell.getWidth();
    };
    CursorRenderLayer.prototype._clearCursor = function () {
        if (this._state) {
            this._clearCells(this._state.x, this._state.y, this._state.width, 1);
            this._state = {
                x: 0,
                y: 0,
                isFocused: false,
                style: '',
                width: 0
            };
        }
    };
    CursorRenderLayer.prototype._renderBarCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillLeftLineAtCell(x, y, terminal.getOption('cursorWidth'));
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlockCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillCells(x, y, cell.getWidth(), 1);
        this._ctx.fillStyle = this._colors.cursorAccent.css;
        this._fillCharTrueColor(terminal, cell, x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderUnderlineCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillBottomLineAtCells(x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlurCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.strokeStyle = this._colors.cursor.css;
        this._strokeRectAtCell(x, y, cell.getWidth(), 1);
        this._ctx.restore();
    };
    return CursorRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.CursorRenderLayer = CursorRenderLayer;
var CursorBlinkStateManager = (function () {
    function CursorBlinkStateManager(terminal, _renderCallback) {
        this._renderCallback = _renderCallback;
        this.isCursorVisible = true;
        if (isTerminalFocused(terminal)) {
            this._restartInterval();
        }
    }
    Object.defineProperty(CursorBlinkStateManager.prototype, "isPaused", {
        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },
        enumerable: true,
        configurable: true
    });
    CursorBlinkStateManager.prototype.dispose = function () {
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = undefined;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = undefined;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    CursorBlinkStateManager.prototype.restartBlinkAnimation = function (terminal) {
        var _this = this;
        if (this.isPaused) {
            return;
        }
        this._animationTimeRestarted = Date.now();
        this.isCursorVisible = true;
        if (!this._animationFrame) {
            this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = undefined;
            });
        }
    };
    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {
        var _this = this;
        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
        }
        this._blinkStartTimeout = setTimeout(function () {
            if (_this._animationTimeRestarted) {
                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                _this._animationTimeRestarted = undefined;
                if (time > 0) {
                    _this._restartInterval(time);
                    return;
                }
            }
            _this.isCursorVisible = false;
            _this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = undefined;
            });
            _this._blinkInterval = setInterval(function () {
                if (_this._animationTimeRestarted) {
                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                    _this._animationTimeRestarted = undefined;
                    _this._restartInterval(time);
                    return;
                }
                _this.isCursorVisible = !_this.isCursorVisible;
                _this._animationFrame = window.requestAnimationFrame(function () {
                    _this._renderCallback();
                    _this._animationFrame = undefined;
                });
            }, BLINK_INTERVAL);
        }, timeToStart);
    };
    CursorBlinkStateManager.prototype.pause = function () {
        this.isCursorVisible = true;
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = undefined;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = undefined;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    CursorBlinkStateManager.prototype.resume = function (terminal) {
        this._animationTimeRestarted = undefined;
        this._restartInterval();
        this.restartBlinkAnimation(terminal);
    };
    return CursorBlinkStateManager;
}());
function isTerminalFocused(terminal) {
    return document.activeElement === terminal.textarea && document.hasFocus();
}


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/renderLayer/LinkRenderLayer.js":
/*!*********************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/renderLayer/LinkRenderLayer.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseRenderLayer_1 = __webpack_require__(/*! ./BaseRenderLayer */ "./addons/xterm-addon-webgl/out/renderLayer/BaseRenderLayer.js");
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var CharAtlasUtils_1 = __webpack_require__(/*! ../atlas/CharAtlasUtils */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js");
var LinkRenderLayer = (function (_super) {
    __extends(LinkRenderLayer, _super);
    function LinkRenderLayer(container, zIndex, colors, terminal) {
        var _this = _super.call(this, container, 'link', zIndex, true, colors) || this;
        terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });
        terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });
        return _this;
    }
    LinkRenderLayer.prototype.resize = function (terminal, dim) {
        _super.prototype.resize.call(this, terminal, dim);
        this._state = undefined;
    };
    LinkRenderLayer.prototype.reset = function (terminal) {
        this._clearCurrentLink();
    };
    LinkRenderLayer.prototype._clearCurrentLink = function () {
        if (this._state) {
            this._clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);
            var middleRowCount = this._state.y2 - this._state.y1 - 1;
            if (middleRowCount > 0) {
                this._clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);
            }
            this._clearCells(0, this._state.y2, this._state.x2, 1);
            this._state = undefined;
        }
    };
    LinkRenderLayer.prototype._onLinkHover = function (e) {
        if (e.fg === Constants_1.INVERTED_DEFAULT_COLOR) {
            this._ctx.fillStyle = this._colors.background.css;
        }
        else if (e.fg !== undefined && CharAtlasUtils_1.is256Color(e.fg)) {
            this._ctx.fillStyle = this._colors.ansi[e.fg].css;
        }
        else {
            this._ctx.fillStyle = this._colors.foreground.css;
        }
        if (e.y1 === e.y2) {
            this._fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);
        }
        else {
            this._fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);
            for (var y = e.y1 + 1; y < e.y2; y++) {
                this._fillBottomLineAtCells(0, y, e.cols);
            }
            this._fillBottomLineAtCells(0, e.y2, e.x2);
        }
        this._state = e;
    };
    LinkRenderLayer.prototype._onLinkLeave = function (e) {
        this._clearCurrentLink();
    };
    return LinkRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.LinkRenderLayer = LinkRenderLayer;


/***/ }),

/***/ "./demo/client.ts":
/*!************************!*\
  !*** ./demo/client.ts ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright (c) 2018 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * This file is the entry point for browserify.
 */
Object.defineProperty(exports, "__esModule", { value: true });
/// <reference path="../typings/xterm.d.ts"/>
// Use tsc version (yarn watch)
const Terminal_1 = __webpack_require__(/*! ../out/public/Terminal */ "./out/public/Terminal.js");
const AttachAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-attach/out/AttachAddon */ "./addons/xterm-addon-attach/out/AttachAddon.js");
const FitAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-fit/out/FitAddon */ "./addons/xterm-addon-fit/out/FitAddon.js");
const SearchAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-search/out/SearchAddon */ "./addons/xterm-addon-search/out/SearchAddon.js");
const WebLinksAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-web-links/out/WebLinksAddon */ "./addons/xterm-addon-web-links/out/WebLinksAddon.js");
const WebglAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-webgl/out/WebglAddon */ "./addons/xterm-addon-webgl/out/WebglAddon.js");
let term;
let protocol;
let socketURL;
let socket;
let pid;
const addons = {
    attach: { name: 'attach', ctor: AttachAddon_1.AttachAddon, canChange: false },
    fit: { name: 'fit', ctor: FitAddon_1.FitAddon, canChange: false },
    search: { name: 'search', ctor: SearchAddon_1.SearchAddon, canChange: true },
    'web-links': { name: 'web-links', ctor: WebLinksAddon_1.WebLinksAddon, canChange: true },
    webgl: { name: 'webgl', ctor: WebglAddon_1.WebglAddon, canChange: true }
};
const terminalContainer = document.getElementById('terminal-container');
const actionElements = {
    findNext: document.querySelector('#find-next'),
    findPrevious: document.querySelector('#find-previous')
};
const paddingElement = document.getElementById('padding');
function setPadding() {
    term.element.style.padding = parseInt(paddingElement.value, 10).toString() + 'px';
    term.fit();
}
function getSearchOptions(e) {
    return {
        regex: document.getElementById('regex').checked,
        wholeWord: document.getElementById('whole-word').checked,
        caseSensitive: document.getElementById('case-sensitive').checked,
        incremental: e.key !== `Enter`
    };
}
const disposeRecreateButtonHandler = () => {
    // If the terminal exists dispose of it, otherwise recreate it
    if (term) {
        term.dispose();
        term = null;
        window.term = null;
        socket = null;
        document.getElementById('dispose').innerHTML = 'Recreate Terminal';
    }
    else {
        createTerminal();
        document.getElementById('dispose').innerHTML = 'Dispose terminal';
    }
};
if (document.location.pathname === '/test') {
    window.Terminal = Terminal_1.Terminal;
    window.AttachAddon = AttachAddon_1.AttachAddon;
    window.FitAddon = FitAddon_1.FitAddon;
    window.SearchAddon = SearchAddon_1.SearchAddon;
    window.WebLinksAddon = WebLinksAddon_1.WebLinksAddon;
    window.WebglAddon = WebglAddon_1.WebglAddon;
}
else {
    createTerminal();
    document.getElementById('dispose').addEventListener('click', disposeRecreateButtonHandler);
}
function createTerminal() {
    // Clean terminal
    while (terminalContainer.children.length) {
        terminalContainer.removeChild(terminalContainer.children[0]);
    }
    const isWindows = ['Windows', 'Win16', 'Win32', 'WinCE'].indexOf(navigator.platform) >= 0;
    term = new Terminal_1.Terminal({
        windowsMode: isWindows
    });
    // Load addons
    const typedTerm = term;
    addons['web-links'].instance = new WebLinksAddon_1.WebLinksAddon();
    addons.search.instance = new SearchAddon_1.SearchAddon();
    addons.fit.instance = new FitAddon_1.FitAddon();
    typedTerm.loadAddon(addons['web-links'].instance);
    typedTerm.loadAddon(addons.search.instance);
    typedTerm.loadAddon(addons.fit.instance);
    window.term = term; // Expose `term` to window for debugging purposes
    term.onResize((size) => {
        if (!pid) {
            return;
        }
        const cols = size.cols;
        const rows = size.rows;
        const url = '/terminals/' + pid + '/size?cols=' + cols + '&rows=' + rows;
        fetch(url, { method: 'POST' });
    });
    protocol = (location.protocol === 'https:') ? 'wss://' : 'ws://';
    socketURL = protocol + location.hostname + ((location.port) ? (':' + location.port) : '') + '/terminals/';
    term.open(terminalContainer);
    addons.fit.instance.fit();
    term.focus();
    addDomListener(paddingElement, 'change', setPadding);
    addDomListener(actionElements.findNext, 'keyup', (e) => {
        addons.search.instance.findNext(actionElements.findNext.value, getSearchOptions(e));
    });
    addDomListener(actionElements.findPrevious, 'keyup', (e) => {
        addons.search.instance.findPrevious(actionElements.findPrevious.value, getSearchOptions(e));
    });
    // fit is called within a setTimeout, cols and rows need this.
    setTimeout(() => {
        initOptions(term);
        // TODO: Clean this up, opt-cols/rows doesn't exist anymore
        document.getElementById(`opt-cols`).value = term.cols;
        document.getElementById(`opt-rows`).value = term.rows;
        paddingElement.value = '0';
        // Set terminal size again to set the specific dimensions on the demo
        updateTerminalSize();
        fetch('/terminals?cols=' + term.cols + '&rows=' + term.rows, { method: 'POST' }).then((res) => {
            res.text().then((processId) => {
                pid = processId;
                socketURL += processId;
                socket = new WebSocket(socketURL);
                socket.onopen = runRealTerminal;
                socket.onclose = runFakeTerminal;
                socket.onerror = runFakeTerminal;
            });
        });
    }, 0);
}
function runRealTerminal() {
    addons.attach.instance = new AttachAddon_1.AttachAddon(socket);
    term.loadAddon(addons.attach.instance);
    term._initialized = true;
    initAddons(term);
}
function runFakeTerminal() {
    if (term._initialized) {
        return;
    }
    term._initialized = true;
    initAddons(term);
    term.prompt = () => {
        term.write('\r\n$ ');
    };
    term.writeln('Welcome to xterm.js');
    term.writeln('This is a local terminal emulation, without a real terminal in the back-end.');
    term.writeln('Type some keys and commands to play around.');
    term.writeln('');
    term.prompt();
    term.onKey((e) => {
        const ev = e.domEvent;
        const printable = !ev.altKey && !ev.ctrlKey && !ev.metaKey;
        if (ev.keyCode === 13) {
            term.prompt();
        }
        else if (ev.keyCode === 8) {
            // Do not delete the prompt
            if (term._core.buffer.x > 2) {
                term.write('\b \b');
            }
        }
        else if (printable) {
            term.write(e.key);
        }
    });
}
function initOptions(term) {
    const blacklistedOptions = [
        // Internal only options
        'cancelEvents',
        'convertEol',
        'handler',
        'screenKeys',
        'termName',
        'useFlowControl',
        // Complex option
        'theme'
    ];
    const stringOptions = {
        bellSound: null,
        bellStyle: ['none', 'sound'],
        cursorStyle: ['block', 'underline', 'bar'],
        fastScrollModifier: ['alt', 'ctrl', 'shift', undefined],
        fontFamily: null,
        fontWeight: ['normal', 'bold', '100', '200', '300', '400', '500', '600', '700', '800', '900'],
        fontWeightBold: ['normal', 'bold', '100', '200', '300', '400', '500', '600', '700', '800', '900'],
        logLevel: ['debug', 'info', 'warn', 'error', 'off'],
        rendererType: ['dom', 'canvas'],
        wordSeparator: null
    };
    const options = Object.keys(term._core.options);
    const booleanOptions = [];
    const numberOptions = [];
    options.filter(o => blacklistedOptions.indexOf(o) === -1).forEach(o => {
        switch (typeof term.getOption(o)) {
            case 'boolean':
                booleanOptions.push(o);
                break;
            case 'number':
                numberOptions.push(o);
                break;
            default:
                if (Object.keys(stringOptions).indexOf(o) === -1) {
                    console.warn(`Unrecognized option: "${o}"`);
                }
        }
    });
    let html = '';
    html += '<div class="option-group">';
    booleanOptions.forEach(o => {
        html += `<div class="option"><label><input id="opt-${o}" type="checkbox" ${term.getOption(o) ? 'checked' : ''}/> ${o}</label></div>`;
    });
    html += '</div><div class="option-group">';
    numberOptions.forEach(o => {
        html += `<div class="option"><label>${o} <input id="opt-${o}" type="number" value="${term.getOption(o)}" step="${o === 'lineHeight' || o === 'scrollSensitivity' ? '0.1' : '1'}"/></label></div>`;
    });
    html += '</div><div class="option-group">';
    Object.keys(stringOptions).forEach(o => {
        if (stringOptions[o]) {
            html += `<div class="option"><label>${o} <select id="opt-${o}">${stringOptions[o].map(v => `<option ${term.getOption(o) === v ? 'selected' : ''}>${v}</option>`).join('')}</select></label></div>`;
        }
        else {
            html += `<div class="option"><label>${o} <input id="opt-${o}" type="text" value="${term.getOption(o)}"/></label></div>`;
        }
    });
    html += '</div>';
    const container = document.getElementById('options-container');
    container.innerHTML = html;
    // Attach listeners
    booleanOptions.forEach(o => {
        const input = document.getElementById(`opt-${o}`);
        addDomListener(input, 'change', () => {
            console.log('change', o, input.checked);
            term.setOption(o, input.checked);
        });
    });
    numberOptions.forEach(o => {
        const input = document.getElementById(`opt-${o}`);
        addDomListener(input, 'change', () => {
            console.log('change', o, input.value);
            if (o === 'cols' || o === 'rows') {
                updateTerminalSize();
            }
            else if (o === 'lineHeight' || o === 'scrollSensitivity') {
                term.setOption(o, parseFloat(input.value));
                updateTerminalSize();
            }
            else {
                term.setOption(o, parseInt(input.value));
            }
        });
    });
    Object.keys(stringOptions).forEach(o => {
        const input = document.getElementById(`opt-${o}`);
        addDomListener(input, 'change', () => {
            console.log('change', o, input.value);
            term.setOption(o, input.value);
        });
    });
}
function initAddons(term) {
    const fragment = document.createDocumentFragment();
    Object.keys(addons).forEach((name) => {
        const addon = addons[name];
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = !!addon.instance;
        if (!addon.canChange) {
            checkbox.disabled = true;
        }
        checkbox.addEventListener('change', () => {
            if (checkbox.checked) {
                addon.instance = new addon.ctor();
                term.loadAddon(addon.instance);
                if (name === 'webgl') {
                    setTimeout(() => {
                        document.body.appendChild(addon.instance.textureAtlas);
                    }, 0);
                }
            }
            else {
                if (name === 'webgl') {
                    document.body.removeChild(addon.instance.textureAtlas);
                }
                addon.instance.dispose();
                addon.instance = undefined;
            }
        });
        const label = document.createElement('label');
        label.classList.add('addon');
        if (!addon.canChange) {
            label.title = 'This addon is needed for the demo to operate';
        }
        label.appendChild(checkbox);
        label.appendChild(document.createTextNode(name));
        const wrapper = document.createElement('div');
        wrapper.classList.add('addon');
        wrapper.appendChild(label);
        fragment.appendChild(wrapper);
    });
    document.getElementById('addons-container').appendChild(fragment);
}
function addDomListener(element, type, handler) {
    element.addEventListener(type, handler);
    term._core.register({ dispose: () => element.removeEventListener(type, handler) });
}
function updateTerminalSize() {
    const cols = parseInt(document.getElementById(`opt-cols`).value, 10);
    const rows = parseInt(document.getElementById(`opt-rows`).value, 10);
    const width = (cols * term._core._renderService.dimensions.actualCellWidth + term._core.viewport.scrollBarWidth).toString() + 'px';
    const height = (rows * term._core._renderService.dimensions.actualCellHeight).toString() + 'px';
    terminalContainer.style.width = width;
    terminalContainer.style.height = height;
    addons.fit.instance.fit();
}


/***/ }),

/***/ "./out/AccessibilityManager.js":
/*!*************************************!*\
  !*** ./out/AccessibilityManager.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Strings = __webpack_require__(/*! ./browser/LocalizableStrings */ "./out/browser/LocalizableStrings.js");
var Platform_1 = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var RenderDebouncer_1 = __webpack_require__(/*! browser/RenderDebouncer */ "./out/browser/RenderDebouncer.js");
var Lifecycle_1 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Lifecycle_2 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var ScreenDprMonitor_1 = __webpack_require__(/*! browser/ScreenDprMonitor */ "./out/browser/ScreenDprMonitor.js");
var MAX_ROWS_TO_READ = 20;
var AccessibilityManager = (function (_super) {
    __extends(AccessibilityManager, _super);
    function AccessibilityManager(_terminal, _renderService) {
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._renderService = _renderService;
        _this._liveRegionLineCount = 0;
        _this._charsToConsume = [];
        _this._charsToAnnounce = '';
        _this._accessibilityTreeRoot = document.createElement('div');
        _this._accessibilityTreeRoot.classList.add('xterm-accessibility');
        _this._rowContainer = document.createElement('div');
        _this._rowContainer.classList.add('xterm-accessibility-tree');
        _this._rowElements = [];
        for (var i = 0; i < _this._terminal.rows; i++) {
            _this._rowElements[i] = _this._createAccessibilityTreeNode();
            _this._rowContainer.appendChild(_this._rowElements[i]);
        }
        _this._topBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 0); };
        _this._bottomBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 1); };
        _this._rowElements[0].addEventListener('focus', _this._topBoundaryFocusListener);
        _this._rowElements[_this._rowElements.length - 1].addEventListener('focus', _this._bottomBoundaryFocusListener);
        _this._refreshRowsDimensions();
        _this._accessibilityTreeRoot.appendChild(_this._rowContainer);
        _this._renderRowsDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));
        _this._refreshRows();
        _this._liveRegion = document.createElement('div');
        _this._liveRegion.classList.add('live-region');
        _this._liveRegion.setAttribute('aria-live', 'assertive');
        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);
        _this._terminal.element.insertAdjacentElement('afterbegin', _this._accessibilityTreeRoot);
        _this.register(_this._renderRowsDebouncer);
        _this.register(_this._terminal.onResize(function (e) { return _this._onResize(e.rows); }));
        _this.register(_this._terminal.onRender(function (e) { return _this._refreshRows(e.start, e.end); }));
        _this.register(_this._terminal.onScroll(function () { return _this._refreshRows(); }));
        _this.register(_this._terminal.onA11yChar(function (char) { return _this._onChar(char); }));
        _this.register(_this._terminal.onLineFeed(function () { return _this._onChar('\n'); }));
        _this.register(_this._terminal.onA11yTab(function (spaceCount) { return _this._onTab(spaceCount); }));
        _this.register(_this._terminal.onKey(function (e) { return _this._onKey(e.key); }));
        _this.register(_this._terminal.onBlur(function () { return _this._clearLiveRegion(); }));
        _this.register(_this._renderService.onDimensionsChange(function () { return _this._refreshRowsDimensions(); }));
        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();
        _this.register(_this._screenDprMonitor);
        _this._screenDprMonitor.setListener(function () { return _this._refreshRowsDimensions(); });
        _this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this._refreshRowsDimensions(); }));
        return _this;
    }
    AccessibilityManager.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this._terminal.element.removeChild(this._accessibilityTreeRoot);
        this._rowElements.length = 0;
    };
    AccessibilityManager.prototype._onBoundaryFocus = function (e, position) {
        var boundaryElement = e.target;
        var beforeBoundaryElement = this._rowElements[position === 0 ? 1 : this._rowElements.length - 2];
        var posInSet = boundaryElement.getAttribute('aria-posinset');
        var lastRowPos = position === 0 ? '1' : "" + this._terminal.buffer.lines.length;
        if (posInSet === lastRowPos) {
            return;
        }
        if (e.relatedTarget !== beforeBoundaryElement) {
            return;
        }
        var topBoundaryElement;
        var bottomBoundaryElement;
        if (position === 0) {
            topBoundaryElement = boundaryElement;
            bottomBoundaryElement = this._rowElements.pop();
            this._rowContainer.removeChild(bottomBoundaryElement);
        }
        else {
            topBoundaryElement = this._rowElements.shift();
            bottomBoundaryElement = boundaryElement;
            this._rowContainer.removeChild(topBoundaryElement);
        }
        topBoundaryElement.removeEventListener('focus', this._topBoundaryFocusListener);
        bottomBoundaryElement.removeEventListener('focus', this._bottomBoundaryFocusListener);
        if (position === 0) {
            var newElement = this._createAccessibilityTreeNode();
            this._rowElements.unshift(newElement);
            this._rowContainer.insertAdjacentElement('afterbegin', newElement);
        }
        else {
            var newElement = this._createAccessibilityTreeNode();
            this._rowElements.push(newElement);
            this._rowContainer.appendChild(newElement);
        }
        this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);
        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);
        this._terminal.scrollLines(position === 0 ? -1 : 1);
        this._rowElements[position === 0 ? 1 : this._rowElements.length - 2].focus();
        e.preventDefault();
        e.stopImmediatePropagation();
    };
    AccessibilityManager.prototype._onResize = function (rows) {
        this._rowElements[this._rowElements.length - 1].removeEventListener('focus', this._bottomBoundaryFocusListener);
        for (var i = this._rowContainer.children.length; i < this._terminal.rows; i++) {
            this._rowElements[i] = this._createAccessibilityTreeNode();
            this._rowContainer.appendChild(this._rowElements[i]);
        }
        while (this._rowElements.length > rows) {
            this._rowContainer.removeChild(this._rowElements.pop());
        }
        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);
        this._refreshRowsDimensions();
    };
    AccessibilityManager.prototype._createAccessibilityTreeNode = function () {
        var element = document.createElement('div');
        element.setAttribute('role', 'listitem');
        element.tabIndex = -1;
        this._refreshRowDimensions(element);
        return element;
    };
    AccessibilityManager.prototype._onTab = function (spaceCount) {
        for (var i = 0; i < spaceCount; i++) {
            this._onChar(' ');
        }
    };
    AccessibilityManager.prototype._onChar = function (char) {
        var _this = this;
        if (this._liveRegionLineCount < MAX_ROWS_TO_READ + 1) {
            if (this._charsToConsume.length > 0) {
                var shiftedChar = this._charsToConsume.shift();
                if (shiftedChar !== char) {
                    this._charsToAnnounce += char;
                }
            }
            else {
                this._charsToAnnounce += char;
            }
            if (char === '\n') {
                this._liveRegionLineCount++;
                if (this._liveRegionLineCount === MAX_ROWS_TO_READ + 1) {
                    this._liveRegion.textContent += Strings.tooMuchOutput;
                }
            }
            if (Platform_1.isMac) {
                if (this._liveRegion.textContent && this._liveRegion.textContent.length > 0 && !this._liveRegion.parentNode) {
                    setTimeout(function () {
                        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);
                    }, 0);
                }
            }
        }
    };
    AccessibilityManager.prototype._clearLiveRegion = function () {
        this._liveRegion.textContent = '';
        this._liveRegionLineCount = 0;
        if (Platform_1.isMac) {
            if (this._liveRegion.parentNode) {
                this._accessibilityTreeRoot.removeChild(this._liveRegion);
            }
        }
    };
    AccessibilityManager.prototype._onKey = function (keyChar) {
        this._clearLiveRegion();
        this._charsToConsume.push(keyChar);
    };
    AccessibilityManager.prototype._refreshRows = function (start, end) {
        this._renderRowsDebouncer.refresh(start, end, this._terminal.rows);
    };
    AccessibilityManager.prototype._renderRows = function (start, end) {
        var buffer = this._terminal.buffer;
        var setSize = buffer.lines.length.toString();
        for (var i = start; i <= end; i++) {
            var lineData = buffer.translateBufferLineToString(buffer.ydisp + i, true);
            var posInSet = (buffer.ydisp + i + 1).toString();
            var element = this._rowElements[i];
            if (element) {
                if (lineData.length === 0) {
                    element.innerHTML = '&nbsp;';
                }
                else {
                    element.textContent = lineData;
                }
                element.setAttribute('aria-posinset', posInSet);
                element.setAttribute('aria-setsize', setSize);
            }
        }
        this._announceCharacters();
    };
    AccessibilityManager.prototype._refreshRowsDimensions = function () {
        if (!this._renderService.dimensions.actualCellHeight) {
            return;
        }
        if (this._rowElements.length !== this._terminal.rows) {
            this._onResize(this._terminal.rows);
        }
        for (var i = 0; i < this._terminal.rows; i++) {
            this._refreshRowDimensions(this._rowElements[i]);
        }
    };
    AccessibilityManager.prototype._refreshRowDimensions = function (element) {
        element.style.height = this._renderService.dimensions.actualCellHeight + "px";
    };
    AccessibilityManager.prototype._announceCharacters = function () {
        if (this._charsToAnnounce.length === 0) {
            return;
        }
        this._liveRegion.textContent += this._charsToAnnounce;
        this._charsToAnnounce = '';
    };
    return AccessibilityManager;
}(Lifecycle_2.Disposable));
exports.AccessibilityManager = AccessibilityManager;


/***/ }),

/***/ "./out/InputHandler.js":
/*!*****************************!*\
  !*** ./out/InputHandler.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var EscapeSequences_1 = __webpack_require__(/*! common/data/EscapeSequences */ "./out/common/data/EscapeSequences.js");
var Charsets_1 = __webpack_require__(/*! common/data/Charsets */ "./out/common/data/Charsets.js");
var CharWidth_1 = __webpack_require__(/*! common/CharWidth */ "./out/common/CharWidth.js");
var EscapeSequenceParser_1 = __webpack_require__(/*! common/parser/EscapeSequenceParser */ "./out/common/parser/EscapeSequenceParser.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var BufferLine_1 = __webpack_require__(/*! common/buffer/BufferLine */ "./out/common/buffer/BufferLine.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var OscParser_1 = __webpack_require__(/*! common/parser/OscParser */ "./out/common/parser/OscParser.js");
var DcsParser_1 = __webpack_require__(/*! common/parser/DcsParser */ "./out/common/parser/DcsParser.js");
var GLEVEL = { '(': 0, ')': 1, '*': 2, '+': 3, '-': 1, '.': 2 };
var MAX_PARSEBUFFER_LENGTH = 131072;
var DECRQSS = (function () {
    function DECRQSS(_bufferService, _coreService, _logService, _optionsService) {
        this._bufferService = _bufferService;
        this._coreService = _coreService;
        this._logService = _logService;
        this._optionsService = _optionsService;
        this._data = new Uint32Array(0);
    }
    DECRQSS.prototype.hook = function (params) {
        this._data = new Uint32Array(0);
    };
    DECRQSS.prototype.put = function (data, start, end) {
        this._data = TypedArrayUtils_1.concat(this._data, data.subarray(start, end));
    };
    DECRQSS.prototype.unhook = function (success) {
        if (!success) {
            this._data = new Uint32Array(0);
            return;
        }
        var data = TextDecoder_1.utf32ToString(this._data);
        this._data = new Uint32Array(0);
        switch (data) {
            case '"q':
                return this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r0\"q" + EscapeSequences_1.C0.ESC + "\\");
            case '"p':
                return this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r61\"p" + EscapeSequences_1.C0.ESC + "\\");
            case 'r':
                var pt = '' + (this._bufferService.buffer.scrollTop + 1) +
                    ';' + (this._bufferService.buffer.scrollBottom + 1) + 'r';
                return this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r" + pt + EscapeSequences_1.C0.ESC + "\\");
            case 'm':
                return this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r0m" + EscapeSequences_1.C0.ESC + "\\");
            case ' q':
                var STYLES = { 'block': 2, 'underline': 4, 'bar': 6 };
                var style = STYLES[this._optionsService.options.cursorStyle];
                style -= this._optionsService.options.cursorBlink ? 1 : 0;
                return this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r" + style + " q" + EscapeSequences_1.C0.ESC + "\\");
            default:
                this._logService.debug('Unknown DCS $q %s', data);
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P0$r" + EscapeSequences_1.C0.ESC + "\\");
        }
    };
    return DECRQSS;
}());
var InputHandler = (function (_super) {
    __extends(InputHandler, _super);
    function InputHandler(_terminal, _bufferService, _charsetService, _coreService, _dirtyRowService, _logService, _optionsService, _coreMouseService, _parser) {
        if (_parser === void 0) { _parser = new EscapeSequenceParser_1.EscapeSequenceParser(); }
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._bufferService = _bufferService;
        _this._charsetService = _charsetService;
        _this._coreService = _coreService;
        _this._dirtyRowService = _dirtyRowService;
        _this._logService = _logService;
        _this._optionsService = _optionsService;
        _this._coreMouseService = _coreMouseService;
        _this._parser = _parser;
        _this._parseBuffer = new Uint32Array(4096);
        _this._stringDecoder = new TextDecoder_1.StringToUtf32();
        _this._utf8Decoder = new TextDecoder_1.Utf8ToUtf32();
        _this._workCell = new CellData_1.CellData();
        _this._curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        _this._eraseAttrDataInternal = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        _this._onRequestRefreshRows = new EventEmitter_1.EventEmitter();
        _this._onRequestReset = new EventEmitter_1.EventEmitter();
        _this._onRequestBell = new EventEmitter_1.EventEmitter();
        _this._onCursorMove = new EventEmitter_1.EventEmitter();
        _this._onLineFeed = new EventEmitter_1.EventEmitter();
        _this._onScroll = new EventEmitter_1.EventEmitter();
        _this.register(_this._parser);
        _this._parser.setCsiHandlerFallback(function (ident, params) {
            _this._logService.debug('Unknown CSI code: ', { identifier: _this._parser.identToString(ident), params: params.toArray() });
        });
        _this._parser.setEscHandlerFallback(function (ident) {
            _this._logService.debug('Unknown ESC code: ', { identifier: _this._parser.identToString(ident) });
        });
        _this._parser.setExecuteHandlerFallback(function (code) {
            _this._logService.debug('Unknown EXECUTE code: ', { code: code });
        });
        _this._parser.setOscHandlerFallback(function (identifier, action, data) {
            _this._logService.debug('Unknown OSC code: ', { identifier: identifier, action: action, data: data });
        });
        _this._parser.setDcsHandlerFallback(function (ident, action, payload) {
            if (action === 'HOOK') {
                payload = payload.toArray();
            }
            _this._logService.debug('Unknown DCS code: ', { identifier: _this._parser.identToString(ident), action: action, payload: payload });
        });
        _this._parser.setPrintHandler(function (data, start, end) { return _this.print(data, start, end); });
        _this._parser.setCsiHandler({ final: '@' }, function (params) { return _this.insertChars(params); });
        _this._parser.setCsiHandler({ intermediates: ' ', final: '@' }, function (params) { return _this.scrollLeft(params); });
        _this._parser.setCsiHandler({ final: 'A' }, function (params) { return _this.cursorUp(params); });
        _this._parser.setCsiHandler({ intermediates: ' ', final: 'A' }, function (params) { return _this.scrollRight(params); });
        _this._parser.setCsiHandler({ final: 'B' }, function (params) { return _this.cursorDown(params); });
        _this._parser.setCsiHandler({ final: 'C' }, function (params) { return _this.cursorForward(params); });
        _this._parser.setCsiHandler({ final: 'D' }, function (params) { return _this.cursorBackward(params); });
        _this._parser.setCsiHandler({ final: 'E' }, function (params) { return _this.cursorNextLine(params); });
        _this._parser.setCsiHandler({ final: 'F' }, function (params) { return _this.cursorPrecedingLine(params); });
        _this._parser.setCsiHandler({ final: 'G' }, function (params) { return _this.cursorCharAbsolute(params); });
        _this._parser.setCsiHandler({ final: 'H' }, function (params) { return _this.cursorPosition(params); });
        _this._parser.setCsiHandler({ final: 'I' }, function (params) { return _this.cursorForwardTab(params); });
        _this._parser.setCsiHandler({ final: 'J' }, function (params) { return _this.eraseInDisplay(params); });
        _this._parser.setCsiHandler({ prefix: '?', final: 'J' }, function (params) { return _this.eraseInDisplay(params); });
        _this._parser.setCsiHandler({ final: 'K' }, function (params) { return _this.eraseInLine(params); });
        _this._parser.setCsiHandler({ prefix: '?', final: 'K' }, function (params) { return _this.eraseInLine(params); });
        _this._parser.setCsiHandler({ final: 'L' }, function (params) { return _this.insertLines(params); });
        _this._parser.setCsiHandler({ final: 'M' }, function (params) { return _this.deleteLines(params); });
        _this._parser.setCsiHandler({ final: 'P' }, function (params) { return _this.deleteChars(params); });
        _this._parser.setCsiHandler({ final: 'S' }, function (params) { return _this.scrollUp(params); });
        _this._parser.setCsiHandler({ final: 'T' }, function (params) { return _this.scrollDown(params); });
        _this._parser.setCsiHandler({ final: 'X' }, function (params) { return _this.eraseChars(params); });
        _this._parser.setCsiHandler({ final: 'Z' }, function (params) { return _this.cursorBackwardTab(params); });
        _this._parser.setCsiHandler({ final: '`' }, function (params) { return _this.charPosAbsolute(params); });
        _this._parser.setCsiHandler({ final: 'a' }, function (params) { return _this.hPositionRelative(params); });
        _this._parser.setCsiHandler({ final: 'b' }, function (params) { return _this.repeatPrecedingCharacter(params); });
        _this._parser.setCsiHandler({ final: 'c' }, function (params) { return _this.sendDeviceAttributesPrimary(params); });
        _this._parser.setCsiHandler({ prefix: '>', final: 'c' }, function (params) { return _this.sendDeviceAttributesSecondary(params); });
        _this._parser.setCsiHandler({ final: 'd' }, function (params) { return _this.linePosAbsolute(params); });
        _this._parser.setCsiHandler({ final: 'e' }, function (params) { return _this.vPositionRelative(params); });
        _this._parser.setCsiHandler({ final: 'f' }, function (params) { return _this.hVPosition(params); });
        _this._parser.setCsiHandler({ final: 'g' }, function (params) { return _this.tabClear(params); });
        _this._parser.setCsiHandler({ final: 'h' }, function (params) { return _this.setMode(params); });
        _this._parser.setCsiHandler({ prefix: '?', final: 'h' }, function (params) { return _this.setModePrivate(params); });
        _this._parser.setCsiHandler({ final: 'l' }, function (params) { return _this.resetMode(params); });
        _this._parser.setCsiHandler({ prefix: '?', final: 'l' }, function (params) { return _this.resetModePrivate(params); });
        _this._parser.setCsiHandler({ final: 'm' }, function (params) { return _this.charAttributes(params); });
        _this._parser.setCsiHandler({ final: 'n' }, function (params) { return _this.deviceStatus(params); });
        _this._parser.setCsiHandler({ prefix: '?', final: 'n' }, function (params) { return _this.deviceStatusPrivate(params); });
        _this._parser.setCsiHandler({ intermediates: '!', final: 'p' }, function (params) { return _this.softReset(params); });
        _this._parser.setCsiHandler({ intermediates: ' ', final: 'q' }, function (params) { return _this.setCursorStyle(params); });
        _this._parser.setCsiHandler({ final: 'r' }, function (params) { return _this.setScrollRegion(params); });
        _this._parser.setCsiHandler({ final: 's' }, function (params) { return _this.saveCursor(params); });
        _this._parser.setCsiHandler({ final: 'u' }, function (params) { return _this.restoreCursor(params); });
        _this._parser.setCsiHandler({ intermediates: '\'', final: '}' }, function (params) { return _this.insertColumns(params); });
        _this._parser.setCsiHandler({ intermediates: '\'', final: '~' }, function (params) { return _this.deleteColumns(params); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BEL, function () { return _this.bell(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.LF, function () { return _this.lineFeed(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.VT, function () { return _this.lineFeed(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.FF, function () { return _this.lineFeed(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.CR, function () { return _this.carriageReturn(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BS, function () { return _this.backspace(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.HT, function () { return _this.tab(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SO, function () { return _this.shiftOut(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SI, function () { return _this.shiftIn(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C1.IND, function () { return _this.index(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C1.NEL, function () { return _this.nextLine(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C1.HTS, function () { return _this.tabSet(); });
        _this._parser.setOscHandler(0, new OscParser_1.OscHandler(function (data) { return _this.setTitle(data); }));
        _this._parser.setOscHandler(2, new OscParser_1.OscHandler(function (data) { return _this.setTitle(data); }));
        _this._parser.setEscHandler({ final: '7' }, function () { return _this.saveCursor(); });
        _this._parser.setEscHandler({ final: '8' }, function () { return _this.restoreCursor(); });
        _this._parser.setEscHandler({ final: 'D' }, function () { return _this.index(); });
        _this._parser.setEscHandler({ final: 'E' }, function () { return _this.nextLine(); });
        _this._parser.setEscHandler({ final: 'H' }, function () { return _this.tabSet(); });
        _this._parser.setEscHandler({ final: 'M' }, function () { return _this.reverseIndex(); });
        _this._parser.setEscHandler({ final: '=' }, function () { return _this.keypadApplicationMode(); });
        _this._parser.setEscHandler({ final: '>' }, function () { return _this.keypadNumericMode(); });
        _this._parser.setEscHandler({ final: 'c' }, function () { return _this.fullReset(); });
        _this._parser.setEscHandler({ final: 'n' }, function () { return _this.setgLevel(2); });
        _this._parser.setEscHandler({ final: 'o' }, function () { return _this.setgLevel(3); });
        _this._parser.setEscHandler({ final: '|' }, function () { return _this.setgLevel(3); });
        _this._parser.setEscHandler({ final: '}' }, function () { return _this.setgLevel(2); });
        _this._parser.setEscHandler({ final: '~' }, function () { return _this.setgLevel(1); });
        _this._parser.setEscHandler({ intermediates: '%', final: '@' }, function () { return _this.selectDefaultCharset(); });
        _this._parser.setEscHandler({ intermediates: '%', final: 'G' }, function () { return _this.selectDefaultCharset(); });
        var _loop_1 = function (flag) {
            this_1._parser.setEscHandler({ intermediates: '(', final: flag }, function () { return _this.selectCharset('(' + flag); });
            this_1._parser.setEscHandler({ intermediates: ')', final: flag }, function () { return _this.selectCharset(')' + flag); });
            this_1._parser.setEscHandler({ intermediates: '*', final: flag }, function () { return _this.selectCharset('*' + flag); });
            this_1._parser.setEscHandler({ intermediates: '+', final: flag }, function () { return _this.selectCharset('+' + flag); });
            this_1._parser.setEscHandler({ intermediates: '-', final: flag }, function () { return _this.selectCharset('-' + flag); });
            this_1._parser.setEscHandler({ intermediates: '.', final: flag }, function () { return _this.selectCharset('.' + flag); });
            this_1._parser.setEscHandler({ intermediates: '/', final: flag }, function () { return _this.selectCharset('/' + flag); });
        };
        var this_1 = this;
        for (var flag in Charsets_1.CHARSETS) {
            _loop_1(flag);
        }
        _this._parser.setEscHandler({ intermediates: '#', final: '8' }, function () { return _this.screenAlignmentPattern(); });
        _this._parser.setErrorHandler(function (state) {
            _this._logService.error('Parsing error: ', state);
            return state;
        });
        _this._parser.setDcsHandler({ intermediates: '$', final: 'q' }, new DECRQSS(_this._bufferService, _this._coreService, _this._logService, _this._optionsService));
        return _this;
    }
    Object.defineProperty(InputHandler.prototype, "onRequestRefreshRows", {
        get: function () { return this._onRequestRefreshRows.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onRequestReset", {
        get: function () { return this._onRequestReset.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onRequestBell", {
        get: function () { return this._onRequestBell.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onCursorMove", {
        get: function () { return this._onCursorMove.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onLineFeed", {
        get: function () { return this._onLineFeed.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onScroll", {
        get: function () { return this._onScroll.event; },
        enumerable: true,
        configurable: true
    });
    InputHandler.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
    };
    InputHandler.prototype.parse = function (data) {
        var buffer = this._bufferService.buffer;
        var cursorStartX = buffer.x;
        var cursorStartY = buffer.y;
        this._logService.debug('parsing data', data);
        if (this._parseBuffer.length < data.length) {
            if (this._parseBuffer.length < MAX_PARSEBUFFER_LENGTH) {
                this._parseBuffer = new Uint32Array(Math.min(data.length, MAX_PARSEBUFFER_LENGTH));
            }
        }
        this._dirtyRowService.clearRange();
        if (data.length > MAX_PARSEBUFFER_LENGTH) {
            for (var i = 0; i < data.length; i += MAX_PARSEBUFFER_LENGTH) {
                var end = i + MAX_PARSEBUFFER_LENGTH < data.length ? i + MAX_PARSEBUFFER_LENGTH : data.length;
                var len = (typeof data === 'string')
                    ? this._stringDecoder.decode(data.substring(i, end), this._parseBuffer)
                    : this._utf8Decoder.decode(data.subarray(i, end), this._parseBuffer);
                this._parser.parse(this._parseBuffer, len);
            }
        }
        else {
            var len = (typeof data === 'string')
                ? this._stringDecoder.decode(data, this._parseBuffer)
                : this._utf8Decoder.decode(data, this._parseBuffer);
            this._parser.parse(this._parseBuffer, len);
        }
        buffer = this._bufferService.buffer;
        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {
            this._onCursorMove.fire();
        }
        this._onRequestRefreshRows.fire(this._dirtyRowService.start, this._dirtyRowService.end);
    };
    InputHandler.prototype.print = function (data, start, end) {
        var code;
        var chWidth;
        var buffer = this._bufferService.buffer;
        var charset = this._charsetService.charset;
        var screenReaderMode = this._optionsService.options.screenReaderMode;
        var cols = this._bufferService.cols;
        var wraparoundMode = this._coreService.decPrivateModes.wraparound;
        var insertMode = this._terminal.insertMode;
        var curAttr = this._curAttrData;
        var bufferRow = buffer.lines.get(buffer.y + buffer.ybase);
        this._dirtyRowService.markDirty(buffer.y);
        if (buffer.x && end - start > 0 && bufferRow.getWidth(buffer.x - 1) === 2) {
            bufferRow.setCellFromCodePoint(buffer.x - 1, 0, 1, curAttr.fg, curAttr.bg);
        }
        for (var pos = start; pos < end; ++pos) {
            code = data[pos];
            chWidth = CharWidth_1.wcwidth(code);
            if (code < 127 && charset) {
                var ch = charset[String.fromCharCode(code)];
                if (ch) {
                    code = ch.charCodeAt(0);
                }
            }
            if (screenReaderMode) {
                this._terminal.onA11yCharEmitter.fire(TextDecoder_1.stringFromCodePoint(code));
            }
            if (!chWidth && buffer.x) {
                if (!bufferRow.getWidth(buffer.x - 1)) {
                    bufferRow.addCodepointToCell(buffer.x - 2, code);
                }
                else {
                    bufferRow.addCodepointToCell(buffer.x - 1, code);
                }
                continue;
            }
            if (buffer.x + chWidth - 1 >= cols) {
                if (wraparoundMode) {
                    buffer.x = 0;
                    buffer.y++;
                    if (buffer.y === buffer.scrollBottom + 1) {
                        buffer.y--;
                        this._terminal.scroll(this._eraseAttrData(), true);
                    }
                    else {
                        if (buffer.y >= this._bufferService.rows) {
                            buffer.y = this._bufferService.rows - 1;
                        }
                        buffer.lines.get(buffer.y).isWrapped = true;
                    }
                    bufferRow = buffer.lines.get(buffer.y + buffer.ybase);
                }
                else {
                    buffer.x = cols - 1;
                    if (chWidth === 2) {
                        continue;
                    }
                }
            }
            if (insertMode) {
                bufferRow.insertCells(buffer.x, chWidth, buffer.getNullCell(curAttr), curAttr);
                if (bufferRow.getWidth(cols - 1) === 2) {
                    bufferRow.setCellFromCodePoint(cols - 1, Constants_1.NULL_CELL_CODE, Constants_1.NULL_CELL_WIDTH, curAttr.fg, curAttr.bg);
                }
            }
            bufferRow.setCellFromCodePoint(buffer.x++, code, chWidth, curAttr.fg, curAttr.bg);
            if (chWidth > 0) {
                while (--chWidth) {
                    bufferRow.setCellFromCodePoint(buffer.x++, 0, 0, curAttr.fg, curAttr.bg);
                }
            }
        }
        if (end - start > 0) {
            bufferRow.loadCell(buffer.x - 1, this._workCell);
            if (this._workCell.getWidth() === 2 || this._workCell.getCode() > 0xFFFF) {
                this._parser.precedingCodepoint = 0;
            }
            else if (this._workCell.isCombined()) {
                this._parser.precedingCodepoint = this._workCell.getChars().charCodeAt(0);
            }
            else {
                this._parser.precedingCodepoint = this._workCell.content;
            }
        }
        if (buffer.x < cols && end - start > 0 && bufferRow.getWidth(buffer.x) === 0 && !bufferRow.hasContent(buffer.x)) {
            bufferRow.setCellFromCodePoint(buffer.x, 0, 1, curAttr.fg, curAttr.bg);
        }
        this._dirtyRowService.markDirty(buffer.y);
    };
    InputHandler.prototype.addCsiHandler = function (id, callback) {
        return this._parser.addCsiHandler(id, callback);
    };
    InputHandler.prototype.addDcsHandler = function (id, callback) {
        return this._parser.addDcsHandler(id, new DcsParser_1.DcsHandler(callback));
    };
    InputHandler.prototype.addEscHandler = function (id, callback) {
        return this._parser.addEscHandler(id, callback);
    };
    InputHandler.prototype.addOscHandler = function (ident, callback) {
        return this._parser.addOscHandler(ident, new OscParser_1.OscHandler(callback));
    };
    InputHandler.prototype.bell = function () {
        this._onRequestBell.fire();
    };
    InputHandler.prototype.lineFeed = function () {
        var buffer = this._bufferService.buffer;
        this._dirtyRowService.markDirty(buffer.y);
        if (this._optionsService.options.convertEol) {
            buffer.x = 0;
        }
        buffer.y++;
        if (buffer.y === buffer.scrollBottom + 1) {
            buffer.y--;
            this._terminal.scroll(this._eraseAttrData());
        }
        else if (buffer.y >= this._bufferService.rows) {
            buffer.y = this._bufferService.rows - 1;
        }
        if (buffer.x >= this._bufferService.cols) {
            buffer.x--;
        }
        this._dirtyRowService.markDirty(buffer.y);
        this._onLineFeed.fire();
    };
    InputHandler.prototype.carriageReturn = function () {
        this._bufferService.buffer.x = 0;
    };
    InputHandler.prototype.backspace = function () {
        this._restrictCursor();
        if (this._bufferService.buffer.x > 0) {
            this._bufferService.buffer.x--;
        }
    };
    InputHandler.prototype.tab = function () {
        if (this._bufferService.buffer.x >= this._bufferService.cols) {
            return;
        }
        var originalX = this._bufferService.buffer.x;
        this._bufferService.buffer.x = this._bufferService.buffer.nextStop();
        if (this._optionsService.options.screenReaderMode) {
            this._terminal.onA11yTabEmitter.fire(this._bufferService.buffer.x - originalX);
        }
    };
    InputHandler.prototype.shiftOut = function () {
        this._charsetService.setgLevel(1);
    };
    InputHandler.prototype.shiftIn = function () {
        this._charsetService.setgLevel(0);
    };
    InputHandler.prototype._restrictCursor = function () {
        this._bufferService.buffer.x = Math.min(this._bufferService.cols - 1, Math.max(0, this._bufferService.buffer.x));
        this._bufferService.buffer.y = this._coreService.decPrivateModes.origin
            ? Math.min(this._bufferService.buffer.scrollBottom, Math.max(this._bufferService.buffer.scrollTop, this._bufferService.buffer.y))
            : Math.min(this._bufferService.rows - 1, Math.max(0, this._bufferService.buffer.y));
        this._dirtyRowService.markDirty(this._bufferService.buffer.y);
    };
    InputHandler.prototype._setCursor = function (x, y) {
        this._dirtyRowService.markDirty(this._bufferService.buffer.y);
        if (this._coreService.decPrivateModes.origin) {
            this._bufferService.buffer.x = x;
            this._bufferService.buffer.y = this._bufferService.buffer.scrollTop + y;
        }
        else {
            this._bufferService.buffer.x = x;
            this._bufferService.buffer.y = y;
        }
        this._restrictCursor();
        this._dirtyRowService.markDirty(this._bufferService.buffer.y);
    };
    InputHandler.prototype._moveCursor = function (x, y) {
        this._restrictCursor();
        this._setCursor(this._bufferService.buffer.x + x, this._bufferService.buffer.y + y);
    };
    InputHandler.prototype.cursorUp = function (params) {
        var diffToTop = this._bufferService.buffer.y - this._bufferService.buffer.scrollTop;
        if (diffToTop >= 0) {
            this._moveCursor(0, -Math.min(diffToTop, params.params[0] || 1));
        }
        else {
            this._moveCursor(0, -(params.params[0] || 1));
        }
    };
    InputHandler.prototype.cursorDown = function (params) {
        var diffToBottom = this._bufferService.buffer.scrollBottom - this._bufferService.buffer.y;
        if (diffToBottom >= 0) {
            this._moveCursor(0, Math.min(diffToBottom, params.params[0] || 1));
        }
        else {
            this._moveCursor(0, params.params[0] || 1);
        }
    };
    InputHandler.prototype.cursorForward = function (params) {
        this._moveCursor(params.params[0] || 1, 0);
    };
    InputHandler.prototype.cursorBackward = function (params) {
        this._moveCursor(-(params.params[0] || 1), 0);
    };
    InputHandler.prototype.cursorNextLine = function (params) {
        this.cursorDown(params);
        this._bufferService.buffer.x = 0;
    };
    InputHandler.prototype.cursorPrecedingLine = function (params) {
        this.cursorUp(params);
        this._bufferService.buffer.x = 0;
    };
    InputHandler.prototype.cursorCharAbsolute = function (params) {
        this._setCursor((params.params[0] || 1) - 1, this._bufferService.buffer.y);
    };
    InputHandler.prototype.cursorPosition = function (params) {
        this._setCursor((params.length >= 2) ? (params.params[1] || 1) - 1 : 0, (params.params[0] || 1) - 1);
    };
    InputHandler.prototype.charPosAbsolute = function (params) {
        this._setCursor((params.params[0] || 1) - 1, this._bufferService.buffer.y);
    };
    InputHandler.prototype.hPositionRelative = function (params) {
        this._moveCursor(params.params[0] || 1, 0);
    };
    InputHandler.prototype.linePosAbsolute = function (params) {
        this._setCursor(this._bufferService.buffer.x, (params.params[0] || 1) - 1);
    };
    InputHandler.prototype.vPositionRelative = function (params) {
        this._moveCursor(0, params.params[0] || 1);
    };
    InputHandler.prototype.hVPosition = function (params) {
        this.cursorPosition(params);
    };
    InputHandler.prototype.tabClear = function (params) {
        var param = params.params[0];
        if (param === 0) {
            delete this._bufferService.buffer.tabs[this._bufferService.buffer.x];
        }
        else if (param === 3) {
            this._bufferService.buffer.tabs = {};
        }
    };
    InputHandler.prototype.cursorForwardTab = function (params) {
        if (this._bufferService.buffer.x >= this._bufferService.cols) {
            return;
        }
        var param = params.params[0] || 1;
        while (param--) {
            this._bufferService.buffer.x = this._bufferService.buffer.nextStop();
        }
    };
    InputHandler.prototype.cursorBackwardTab = function (params) {
        if (this._bufferService.buffer.x >= this._bufferService.cols) {
            return;
        }
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        while (param--) {
            buffer.x = buffer.prevStop();
        }
    };
    InputHandler.prototype._eraseInBufferLine = function (y, start, end, clearWrap) {
        if (clearWrap === void 0) { clearWrap = false; }
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + y);
        line.replaceCells(start, end, this._bufferService.buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
        if (clearWrap) {
            line.isWrapped = false;
        }
    };
    InputHandler.prototype._resetBufferLine = function (y) {
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + y);
        line.fill(this._bufferService.buffer.getNullCell(this._eraseAttrData()));
        line.isWrapped = false;
    };
    InputHandler.prototype.eraseInDisplay = function (params) {
        this._restrictCursor();
        var j;
        switch (params.params[0]) {
            case 0:
                j = this._bufferService.buffer.y;
                this._dirtyRowService.markDirty(j);
                this._eraseInBufferLine(j++, this._bufferService.buffer.x, this._bufferService.cols, this._bufferService.buffer.x === 0);
                for (; j < this._bufferService.rows; j++) {
                    this._resetBufferLine(j);
                }
                this._dirtyRowService.markDirty(j);
                break;
            case 1:
                j = this._bufferService.buffer.y;
                this._dirtyRowService.markDirty(j);
                this._eraseInBufferLine(j, 0, this._bufferService.buffer.x + 1, true);
                if (this._bufferService.buffer.x + 1 >= this._bufferService.cols) {
                    this._bufferService.buffer.lines.get(j + 1).isWrapped = false;
                }
                while (j--) {
                    this._resetBufferLine(j);
                }
                this._dirtyRowService.markDirty(0);
                break;
            case 2:
                j = this._bufferService.rows;
                this._dirtyRowService.markDirty(j - 1);
                while (j--) {
                    this._resetBufferLine(j);
                }
                this._dirtyRowService.markDirty(0);
                break;
            case 3:
                var scrollBackSize = this._bufferService.buffer.lines.length - this._bufferService.rows;
                if (scrollBackSize > 0) {
                    this._bufferService.buffer.lines.trimStart(scrollBackSize);
                    this._bufferService.buffer.ybase = Math.max(this._bufferService.buffer.ybase - scrollBackSize, 0);
                    this._bufferService.buffer.ydisp = Math.max(this._bufferService.buffer.ydisp - scrollBackSize, 0);
                    this._onScroll.fire(0);
                }
                break;
        }
    };
    InputHandler.prototype.eraseInLine = function (params) {
        this._restrictCursor();
        switch (params.params[0]) {
            case 0:
                this._eraseInBufferLine(this._bufferService.buffer.y, this._bufferService.buffer.x, this._bufferService.cols);
                break;
            case 1:
                this._eraseInBufferLine(this._bufferService.buffer.y, 0, this._bufferService.buffer.x + 1);
                break;
            case 2:
                this._eraseInBufferLine(this._bufferService.buffer.y, 0, this._bufferService.cols);
                break;
        }
        this._dirtyRowService.markDirty(this._bufferService.buffer.y);
    };
    InputHandler.prototype.insertLines = function (params) {
        this._restrictCursor();
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return;
        }
        var row = buffer.y + buffer.ybase;
        var scrollBottomRowsOffset = this._bufferService.rows - 1 - buffer.scrollBottom;
        var scrollBottomAbsolute = this._bufferService.rows - 1 + buffer.ybase - scrollBottomRowsOffset + 1;
        while (param--) {
            buffer.lines.splice(scrollBottomAbsolute - 1, 1);
            buffer.lines.splice(row, 0, buffer.getBlankLine(this._eraseAttrData()));
        }
        this._dirtyRowService.markRangeDirty(buffer.y, buffer.scrollBottom);
        buffer.x = 0;
    };
    InputHandler.prototype.deleteLines = function (params) {
        this._restrictCursor();
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return;
        }
        var row = buffer.y + buffer.ybase;
        var j;
        j = this._bufferService.rows - 1 - buffer.scrollBottom;
        j = this._bufferService.rows - 1 + buffer.ybase - j;
        while (param--) {
            buffer.lines.splice(row, 1);
            buffer.lines.splice(j, 0, buffer.getBlankLine(this._eraseAttrData()));
        }
        this._dirtyRowService.markRangeDirty(buffer.y, buffer.scrollBottom);
        buffer.x = 0;
    };
    InputHandler.prototype.insertChars = function (params) {
        this._restrictCursor();
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.y + this._bufferService.buffer.ybase);
        if (line) {
            line.insertCells(this._bufferService.buffer.x, params.params[0] || 1, this._bufferService.buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            this._dirtyRowService.markDirty(this._bufferService.buffer.y);
        }
    };
    InputHandler.prototype.deleteChars = function (params) {
        this._restrictCursor();
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.y + this._bufferService.buffer.ybase);
        if (line) {
            line.deleteCells(this._bufferService.buffer.x, params.params[0] || 1, this._bufferService.buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            this._dirtyRowService.markDirty(this._bufferService.buffer.y);
        }
    };
    InputHandler.prototype.scrollUp = function (params) {
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        while (param--) {
            buffer.lines.splice(buffer.ybase + buffer.scrollTop, 1);
            buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 0, buffer.getBlankLine(this._eraseAttrData()));
        }
        this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
    };
    InputHandler.prototype.scrollDown = function (params) {
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        while (param--) {
            buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 1);
            buffer.lines.splice(buffer.ybase + buffer.scrollTop, 0, buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));
        }
        this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
    };
    InputHandler.prototype.scrollLeft = function (params) {
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return;
        }
        var param = params.params[0] || 1;
        for (var y = buffer.scrollTop; y <= buffer.scrollBottom; ++y) {
            var line = buffer.lines.get(buffer.ybase + y);
            line.deleteCells(0, param, buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            line.isWrapped = false;
        }
        this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
    };
    InputHandler.prototype.scrollRight = function (params) {
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return;
        }
        var param = params.params[0] || 1;
        for (var y = buffer.scrollTop; y <= buffer.scrollBottom; ++y) {
            var line = buffer.lines.get(buffer.ybase + y);
            line.insertCells(0, param, buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            line.isWrapped = false;
        }
        this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
    };
    InputHandler.prototype.insertColumns = function (params) {
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return;
        }
        var param = params.params[0] || 1;
        for (var y = buffer.scrollTop; y <= buffer.scrollBottom; ++y) {
            var line = this._bufferService.buffer.lines.get(buffer.ybase + y);
            line.insertCells(buffer.x, param, buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            line.isWrapped = false;
        }
        this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
    };
    InputHandler.prototype.deleteColumns = function (params) {
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return;
        }
        var param = params.params[0] || 1;
        for (var y = buffer.scrollTop; y <= buffer.scrollBottom; ++y) {
            var line = buffer.lines.get(buffer.ybase + y);
            line.deleteCells(buffer.x, param, buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            line.isWrapped = false;
        }
        this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
    };
    InputHandler.prototype.eraseChars = function (params) {
        this._restrictCursor();
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.y + this._bufferService.buffer.ybase);
        if (line) {
            line.replaceCells(this._bufferService.buffer.x, this._bufferService.buffer.x + (params.params[0] || 1), this._bufferService.buffer.getNullCell(this._eraseAttrData()), this._eraseAttrData());
            this._dirtyRowService.markDirty(this._bufferService.buffer.y);
        }
    };
    InputHandler.prototype.repeatPrecedingCharacter = function (params) {
        if (!this._parser.precedingCodepoint) {
            return;
        }
        var length = params.params[0] || 1;
        var data = new Uint32Array(length);
        for (var i = 0; i < length; ++i) {
            data[i] = this._parser.precedingCodepoint;
        }
        this.print(data, 0, data.length);
    };
    InputHandler.prototype.sendDeviceAttributesPrimary = function (params) {
        if (params.params[0] > 0) {
            return;
        }
        if (this._terminal.is('xterm') || this._terminal.is('rxvt-unicode') || this._terminal.is('screen')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[?1;2c');
        }
        else if (this._terminal.is('linux')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[?6c');
        }
    };
    InputHandler.prototype.sendDeviceAttributesSecondary = function (params) {
        if (params.params[0] > 0) {
            return;
        }
        if (this._terminal.is('xterm')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[>0;276;0c');
        }
        else if (this._terminal.is('rxvt-unicode')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[>85;95;0c');
        }
        else if (this._terminal.is('linux')) {
            this._coreService.triggerDataEvent(params.params[0] + 'c');
        }
        else if (this._terminal.is('screen')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[>83;40003;0c');
        }
    };
    InputHandler.prototype.setMode = function (params) {
        for (var i = 0; i < params.length; i++) {
            switch (params.params[i]) {
                case 4:
                    this._terminal.insertMode = true;
                    break;
                case 20:
                    break;
            }
        }
    };
    InputHandler.prototype.setModePrivate = function (params) {
        var _a, _b;
        for (var i = 0; i < params.length; i++) {
            switch (params.params[i]) {
                case 1:
                    this._coreService.decPrivateModes.applicationCursorKeys = true;
                    break;
                case 2:
                    this._charsetService.setgCharset(0, Charsets_1.DEFAULT_CHARSET);
                    this._charsetService.setgCharset(1, Charsets_1.DEFAULT_CHARSET);
                    this._charsetService.setgCharset(2, Charsets_1.DEFAULT_CHARSET);
                    this._charsetService.setgCharset(3, Charsets_1.DEFAULT_CHARSET);
                    break;
                case 3:
                    this._terminal.savedCols = this._bufferService.cols;
                    this._terminal.resize(132, this._bufferService.rows);
                    this._onRequestReset.fire();
                    break;
                case 6:
                    this._coreService.decPrivateModes.origin = true;
                    this._setCursor(0, 0);
                    break;
                case 7:
                    this._coreService.decPrivateModes.wraparound = true;
                    break;
                case 12:
                    break;
                case 66:
                    this._logService.debug('Serial port requested application keypad.');
                    this._coreService.decPrivateModes.applicationKeypad = true;
                    (_a = this._terminal.viewport) === null || _a === void 0 ? void 0 : _a.syncScrollArea();
                    break;
                case 9:
                    this._coreMouseService.activeProtocol = 'X10';
                    break;
                case 1000:
                    this._coreMouseService.activeProtocol = 'VT200';
                    break;
                case 1002:
                    this._coreMouseService.activeProtocol = 'DRAG';
                    break;
                case 1003:
                    this._coreMouseService.activeProtocol = 'ANY';
                    break;
                case 1004:
                    this._terminal.sendFocus = true;
                    break;
                case 1005:
                    this._logService.debug('DECSET 1005 not supported (see #2507)');
                    break;
                case 1006:
                    this._coreMouseService.activeEncoding = 'SGR';
                    break;
                case 1015:
                    this._logService.debug('DECSET 1015 not supported (see #2507)');
                    break;
                case 25:
                    this._coreService.isCursorHidden = false;
                    break;
                case 1048:
                    this.saveCursor();
                    break;
                case 1049:
                    this.saveCursor();
                case 47:
                case 1047:
                    this._bufferService.buffers.activateAltBuffer(this._eraseAttrData());
                    this._onRequestRefreshRows.fire(0, this._bufferService.rows - 1);
                    (_b = this._terminal.viewport) === null || _b === void 0 ? void 0 : _b.syncScrollArea();
                    this._terminal.showCursor();
                    break;
                case 2004:
                    this._terminal.bracketedPasteMode = true;
                    break;
            }
        }
    };
    InputHandler.prototype.resetMode = function (params) {
        for (var i = 0; i < params.length; i++) {
            switch (params.params[i]) {
                case 4:
                    this._terminal.insertMode = false;
                    break;
                case 20:
                    break;
            }
        }
    };
    InputHandler.prototype.resetModePrivate = function (params) {
        var _a, _b;
        for (var i = 0; i < params.length; i++) {
            switch (params.params[i]) {
                case 1:
                    this._coreService.decPrivateModes.applicationCursorKeys = false;
                    break;
                case 3:
                    if (this._bufferService.cols === 132 && this._terminal.savedCols) {
                        this._terminal.resize(this._terminal.savedCols, this._bufferService.rows);
                    }
                    delete this._terminal.savedCols;
                    this._onRequestReset.fire();
                    break;
                case 6:
                    this._coreService.decPrivateModes.origin = false;
                    this._setCursor(0, 0);
                    break;
                case 7:
                    this._coreService.decPrivateModes.wraparound = false;
                    break;
                case 12:
                    break;
                case 66:
                    this._logService.debug('Switching back to normal keypad.');
                    this._coreService.decPrivateModes.applicationKeypad = false;
                    (_a = this._terminal.viewport) === null || _a === void 0 ? void 0 : _a.syncScrollArea();
                    break;
                case 9:
                case 1000:
                case 1002:
                case 1003:
                    this._coreMouseService.activeProtocol = 'NONE';
                    break;
                case 1004:
                    this._terminal.sendFocus = false;
                    break;
                case 1005:
                    this._logService.debug('DECRST 1005 not supported (see #2507)');
                    break;
                case 1006:
                    this._coreMouseService.activeEncoding = 'DEFAULT';
                    break;
                case 1015:
                    this._logService.debug('DECRST 1015 not supported (see #2507)');
                    break;
                case 25:
                    this._coreService.isCursorHidden = true;
                    break;
                case 1048:
                    this.restoreCursor();
                    break;
                case 1049:
                case 47:
                case 1047:
                    this._bufferService.buffers.activateNormalBuffer();
                    if (params.params[i] === 1049) {
                        this.restoreCursor();
                    }
                    this._onRequestRefreshRows.fire(0, this._bufferService.rows - 1);
                    (_b = this._terminal.viewport) === null || _b === void 0 ? void 0 : _b.syncScrollArea();
                    this._terminal.showCursor();
                    break;
                case 2004:
                    this._terminal.bracketedPasteMode = false;
                    break;
            }
        }
    };
    InputHandler.prototype._extractColor = function (params, pos, attr) {
        var accu = [0, 0, -1, 0, 0, 0];
        var cSpace = 0;
        var advance = 0;
        do {
            accu[advance + cSpace] = params.params[pos + advance];
            if (params.hasSubParams(pos + advance)) {
                var subparams = params.getSubParams(pos + advance);
                var i = 0;
                do {
                    if (accu[1] === 5) {
                        cSpace = 1;
                    }
                    accu[advance + i + 1 + cSpace] = subparams[i];
                } while (++i < subparams.length && i + advance + 1 + cSpace < accu.length);
                break;
            }
            if ((accu[1] === 5 && advance + cSpace >= 2)
                || (accu[1] === 2 && advance + cSpace >= 5)) {
                break;
            }
            if (accu[1]) {
                cSpace = 1;
            }
        } while (++advance + pos < params.length && advance + cSpace < accu.length);
        for (var i = 2; i < accu.length; ++i) {
            if (accu[i] === -1) {
                accu[i] = 0;
            }
        }
        if (accu[0] === 38) {
            if (accu[1] === 2) {
                attr.fg |= 50331648;
                attr.fg &= ~16777215;
                attr.fg |= AttributeData_1.AttributeData.fromColorRGB([accu[3], accu[4], accu[5]]);
            }
            else if (accu[1] === 5) {
                attr.fg &= ~(50331648 | 255);
                attr.fg |= 33554432 | (accu[3] & 0xff);
            }
        }
        else if (accu[0] === 48) {
            if (accu[1] === 2) {
                attr.bg |= 50331648;
                attr.bg &= ~16777215;
                attr.bg |= AttributeData_1.AttributeData.fromColorRGB([accu[3], accu[4], accu[5]]);
            }
            else if (accu[1] === 5) {
                attr.bg &= ~(50331648 | 255);
                attr.bg |= 33554432 | (accu[3] & 0xff);
            }
        }
        return advance;
    };
    InputHandler.prototype.charAttributes = function (params) {
        if (params.length === 1 && params.params[0] === 0) {
            this._curAttrData.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;
            this._curAttrData.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;
            return;
        }
        var l = params.length;
        var p;
        var attr = this._curAttrData;
        for (var i = 0; i < l; i++) {
            p = params.params[i];
            if (p >= 30 && p <= 37) {
                attr.fg &= ~(50331648 | 255);
                attr.fg |= 16777216 | (p - 30);
            }
            else if (p >= 40 && p <= 47) {
                attr.bg &= ~(50331648 | 255);
                attr.bg |= 16777216 | (p - 40);
            }
            else if (p >= 90 && p <= 97) {
                attr.fg &= ~(50331648 | 255);
                attr.fg |= 16777216 | (p - 90) | 8;
            }
            else if (p >= 100 && p <= 107) {
                attr.bg &= ~(50331648 | 255);
                attr.bg |= 16777216 | (p - 100) | 8;
            }
            else if (p === 0) {
                attr.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;
                attr.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;
            }
            else if (p === 1) {
                attr.fg |= 134217728;
            }
            else if (p === 3) {
                attr.bg |= 67108864;
            }
            else if (p === 4) {
                attr.fg |= 268435456;
            }
            else if (p === 5) {
                attr.fg |= 536870912;
            }
            else if (p === 7) {
                attr.fg |= 67108864;
            }
            else if (p === 8) {
                attr.fg |= 1073741824;
            }
            else if (p === 2) {
                attr.bg |= 134217728;
            }
            else if (p === 22) {
                attr.fg &= ~134217728;
                attr.bg &= ~134217728;
            }
            else if (p === 23) {
                attr.bg &= ~67108864;
            }
            else if (p === 24) {
                attr.fg &= ~268435456;
            }
            else if (p === 25) {
                attr.fg &= ~536870912;
            }
            else if (p === 27) {
                attr.fg &= ~67108864;
            }
            else if (p === 28) {
                attr.fg &= ~1073741824;
            }
            else if (p === 39) {
                attr.fg &= ~(50331648 | 16777215);
                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);
            }
            else if (p === 49) {
                attr.bg &= ~(50331648 | 16777215);
                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);
            }
            else if (p === 38 || p === 48) {
                i += this._extractColor(params, i, attr);
            }
            else if (p === 100) {
                attr.fg &= ~(50331648 | 16777215);
                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);
                attr.bg &= ~(50331648 | 16777215);
                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);
            }
            else {
                this._logService.debug('Unknown SGR attribute: %d.', p);
            }
        }
    };
    InputHandler.prototype.deviceStatus = function (params) {
        switch (params.params[0]) {
            case 5:
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "[0n");
                break;
            case 6:
                var y = this._bufferService.buffer.y + 1;
                var x = this._bufferService.buffer.x + 1;
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "[" + y + ";" + x + "R");
                break;
        }
    };
    InputHandler.prototype.deviceStatusPrivate = function (params) {
        switch (params.params[0]) {
            case 6:
                var y = this._bufferService.buffer.y + 1;
                var x = this._bufferService.buffer.x + 1;
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "[?" + y + ";" + x + "R");
                break;
            case 15:
                break;
            case 25:
                break;
            case 26:
                break;
            case 53:
                break;
        }
    };
    InputHandler.prototype.softReset = function (params) {
        var _a;
        this._coreService.isCursorHidden = false;
        this._terminal.insertMode = false;
        (_a = this._terminal.viewport) === null || _a === void 0 ? void 0 : _a.syncScrollArea();
        this._bufferService.buffer.scrollTop = 0;
        this._bufferService.buffer.scrollBottom = this._bufferService.rows - 1;
        this._curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        this._bufferService.buffer.x = this._bufferService.buffer.y = 0;
        this._coreService.reset();
        this._charsetService.reset();
    };
    InputHandler.prototype.setCursorStyle = function (params) {
        var param = params.params[0] || 1;
        switch (param) {
            case 1:
            case 2:
                this._optionsService.options.cursorStyle = 'block';
                break;
            case 3:
            case 4:
                this._optionsService.options.cursorStyle = 'underline';
                break;
            case 5:
            case 6:
                this._optionsService.options.cursorStyle = 'bar';
                break;
        }
        var isBlinking = param % 2 === 1;
        this._optionsService.options.cursorBlink = isBlinking;
    };
    InputHandler.prototype.setScrollRegion = function (params) {
        var top = params.params[0] || 1;
        var bottom;
        if (params.length < 2 || (bottom = params.params[1]) > this._bufferService.rows || bottom === 0) {
            bottom = this._bufferService.rows;
        }
        if (bottom > top) {
            this._bufferService.buffer.scrollTop = top - 1;
            this._bufferService.buffer.scrollBottom = bottom - 1;
            this._setCursor(0, 0);
        }
    };
    InputHandler.prototype.saveCursor = function (params) {
        this._bufferService.buffer.savedX = this._bufferService.buffer.x;
        this._bufferService.buffer.savedY = this._bufferService.buffer.ybase + this._bufferService.buffer.y;
        this._bufferService.buffer.savedCurAttrData.fg = this._curAttrData.fg;
        this._bufferService.buffer.savedCurAttrData.bg = this._curAttrData.bg;
        this._bufferService.buffer.savedCharset = this._charsetService.charset;
    };
    InputHandler.prototype.restoreCursor = function (params) {
        this._bufferService.buffer.x = this._bufferService.buffer.savedX || 0;
        this._bufferService.buffer.y = Math.max(this._bufferService.buffer.savedY - this._bufferService.buffer.ybase, 0);
        this._curAttrData.fg = this._bufferService.buffer.savedCurAttrData.fg;
        this._curAttrData.bg = this._bufferService.buffer.savedCurAttrData.bg;
        this._charsetService.charset = this._savedCharset;
        if (this._bufferService.buffer.savedCharset) {
            this._charsetService.charset = this._bufferService.buffer.savedCharset;
        }
        this._restrictCursor();
    };
    InputHandler.prototype.setTitle = function (data) {
        this._terminal.handleTitle(data);
    };
    InputHandler.prototype.nextLine = function () {
        this._bufferService.buffer.x = 0;
        this.index();
    };
    InputHandler.prototype.keypadApplicationMode = function () {
        var _a;
        this._logService.debug('Serial port requested application keypad.');
        this._coreService.decPrivateModes.applicationKeypad = true;
        (_a = this._terminal.viewport) === null || _a === void 0 ? void 0 : _a.syncScrollArea();
    };
    InputHandler.prototype.keypadNumericMode = function () {
        var _a;
        this._logService.debug('Switching back to normal keypad.');
        this._coreService.decPrivateModes.applicationKeypad = false;
        (_a = this._terminal.viewport) === null || _a === void 0 ? void 0 : _a.syncScrollArea();
    };
    InputHandler.prototype.selectDefaultCharset = function () {
        this._charsetService.setgLevel(0);
        this._charsetService.setgCharset(0, Charsets_1.DEFAULT_CHARSET);
    };
    InputHandler.prototype.selectCharset = function (collectAndFlag) {
        if (collectAndFlag.length !== 2) {
            this.selectDefaultCharset();
            return;
        }
        if (collectAndFlag[0] === '/') {
            return;
        }
        this._charsetService.setgCharset(GLEVEL[collectAndFlag[0]], Charsets_1.CHARSETS[collectAndFlag[1]] || Charsets_1.DEFAULT_CHARSET);
        return;
    };
    InputHandler.prototype.index = function () {
        this._restrictCursor();
        var buffer = this._bufferService.buffer;
        this._bufferService.buffer.y++;
        if (buffer.y === buffer.scrollBottom + 1) {
            buffer.y--;
            this._terminal.scroll(this._eraseAttrData());
        }
        else if (buffer.y >= this._bufferService.rows) {
            buffer.y = this._bufferService.rows - 1;
        }
        this._restrictCursor();
    };
    InputHandler.prototype.tabSet = function () {
        this._bufferService.buffer.tabs[this._bufferService.buffer.x] = true;
    };
    InputHandler.prototype.reverseIndex = function () {
        this._restrictCursor();
        var buffer = this._bufferService.buffer;
        if (buffer.y === buffer.scrollTop) {
            var scrollRegionHeight = buffer.scrollBottom - buffer.scrollTop;
            buffer.lines.shiftElements(buffer.y + buffer.ybase, scrollRegionHeight, 1);
            buffer.lines.set(buffer.y + buffer.ybase, buffer.getBlankLine(this._eraseAttrData()));
            this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
        }
        else {
            buffer.y--;
            this._restrictCursor();
        }
    };
    InputHandler.prototype.fullReset = function () {
        this._parser.reset();
        this._onRequestReset.fire();
    };
    InputHandler.prototype.reset = function () {
        this._curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        this._eraseAttrDataInternal = BufferLine_1.DEFAULT_ATTR_DATA.clone();
    };
    InputHandler.prototype._eraseAttrData = function () {
        this._eraseAttrDataInternal.bg &= ~(50331648 | 0xFFFFFF);
        this._eraseAttrDataInternal.bg |= this._curAttrData.bg & ~0xFC000000;
        return this._eraseAttrDataInternal;
    };
    InputHandler.prototype.setgLevel = function (level) {
        this._charsetService.setgLevel(level);
    };
    InputHandler.prototype.screenAlignmentPattern = function () {
        var cell = new CellData_1.CellData();
        cell.content = 1 << 22 | 'E'.charCodeAt(0);
        cell.fg = this._curAttrData.fg;
        cell.bg = this._curAttrData.bg;
        var buffer = this._bufferService.buffer;
        this._setCursor(0, 0);
        for (var yOffset = 0; yOffset < this._bufferService.rows; ++yOffset) {
            var row = buffer.y + buffer.ybase + yOffset;
            buffer.lines.get(row).fill(cell);
            buffer.lines.get(row).isWrapped = false;
        }
        this._dirtyRowService.markAllDirty();
        this._setCursor(0, 0);
    };
    return InputHandler;
}(Lifecycle_1.Disposable));
exports.InputHandler = InputHandler;


/***/ }),

/***/ "./out/Terminal.js":
/*!*************************!*\
  !*** ./out/Terminal.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var CompositionHelper_1 = __webpack_require__(/*! browser/input/CompositionHelper */ "./out/browser/input/CompositionHelper.js");
var Viewport_1 = __webpack_require__(/*! browser/Viewport */ "./out/browser/Viewport.js");
var Clipboard_1 = __webpack_require__(/*! browser/Clipboard */ "./out/browser/Clipboard.js");
var EscapeSequences_1 = __webpack_require__(/*! common/data/EscapeSequences */ "./out/common/data/EscapeSequences.js");
var InputHandler_1 = __webpack_require__(/*! ./InputHandler */ "./out/InputHandler.js");
var Renderer_1 = __webpack_require__(/*! browser/renderer/Renderer */ "./out/browser/renderer/Renderer.js");
var Linkifier_1 = __webpack_require__(/*! browser/Linkifier */ "./out/browser/Linkifier.js");
var SelectionService_1 = __webpack_require__(/*! browser/services/SelectionService */ "./out/browser/services/SelectionService.js");
var Browser = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var Lifecycle_1 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Strings = __webpack_require__(/*! browser/LocalizableStrings */ "./out/browser/LocalizableStrings.js");
var SoundService_1 = __webpack_require__(/*! browser/services/SoundService */ "./out/browser/services/SoundService.js");
var MouseZoneManager_1 = __webpack_require__(/*! browser/MouseZoneManager */ "./out/browser/MouseZoneManager.js");
var AccessibilityManager_1 = __webpack_require__(/*! ./AccessibilityManager */ "./out/AccessibilityManager.js");
var DomRenderer_1 = __webpack_require__(/*! browser/renderer/dom/DomRenderer */ "./out/browser/renderer/dom/DomRenderer.js");
var Keyboard_1 = __webpack_require__(/*! common/input/Keyboard */ "./out/common/input/Keyboard.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var BufferLine_1 = __webpack_require__(/*! common/buffer/BufferLine */ "./out/common/buffer/BufferLine.js");
var WindowsMode_1 = __webpack_require__(/*! common/WindowsMode */ "./out/common/WindowsMode.js");
var ColorManager_1 = __webpack_require__(/*! browser/ColorManager */ "./out/browser/ColorManager.js");
var RenderService_1 = __webpack_require__(/*! browser/services/RenderService */ "./out/browser/services/RenderService.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var OptionsService_1 = __webpack_require__(/*! common/services/OptionsService */ "./out/common/services/OptionsService.js");
var Services_2 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var CharSizeService_1 = __webpack_require__(/*! browser/services/CharSizeService */ "./out/browser/services/CharSizeService.js");
var BufferService_1 = __webpack_require__(/*! common/services/BufferService */ "./out/common/services/BufferService.js");
var Lifecycle_2 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var MouseService_1 = __webpack_require__(/*! browser/services/MouseService */ "./out/browser/services/MouseService.js");
var CoreService_1 = __webpack_require__(/*! common/services/CoreService */ "./out/common/services/CoreService.js");
var LogService_1 = __webpack_require__(/*! common/services/LogService */ "./out/common/services/LogService.js");
var DirtyRowService_1 = __webpack_require__(/*! common/services/DirtyRowService */ "./out/common/services/DirtyRowService.js");
var InstantiationService_1 = __webpack_require__(/*! common/services/InstantiationService */ "./out/common/services/InstantiationService.js");
var CoreMouseService_1 = __webpack_require__(/*! common/services/CoreMouseService */ "./out/common/services/CoreMouseService.js");
var WriteBuffer_1 = __webpack_require__(/*! common/input/WriteBuffer */ "./out/common/input/WriteBuffer.js");
var CoreBrowserService_1 = __webpack_require__(/*! browser/services/CoreBrowserService */ "./out/browser/services/CoreBrowserService.js");
var CharsetService_1 = __webpack_require__(/*! common/services/CharsetService */ "./out/common/services/CharsetService.js");
var document = (typeof window !== 'undefined') ? window.document : null;
var Terminal = (function (_super) {
    __extends(Terminal, _super);
    function Terminal(options) {
        if (options === void 0) { options = {}; }
        var _this = _super.call(this) || this;
        _this.browser = Browser;
        _this.mouseEvents = 0;
        _this._keyDownHandled = false;
        _this._blankLine = null;
        _this._onCursorMove = new EventEmitter_1.EventEmitter();
        _this._onData = new EventEmitter_1.EventEmitter();
        _this._onBinary = new EventEmitter_1.EventEmitter();
        _this._onKey = new EventEmitter_1.EventEmitter();
        _this._onLineFeed = new EventEmitter_1.EventEmitter();
        _this._onRender = new EventEmitter_1.EventEmitter();
        _this._onResize = new EventEmitter_1.EventEmitter();
        _this._onScroll = new EventEmitter_1.EventEmitter();
        _this._onSelectionChange = new EventEmitter_1.EventEmitter();
        _this._onTitleChange = new EventEmitter_1.EventEmitter();
        _this._onFocus = new EventEmitter_1.EventEmitter();
        _this._onBlur = new EventEmitter_1.EventEmitter();
        _this.onA11yCharEmitter = new EventEmitter_1.EventEmitter();
        _this.onA11yTabEmitter = new EventEmitter_1.EventEmitter();
        _this._instantiationService = new InstantiationService_1.InstantiationService();
        _this.optionsService = new OptionsService_1.OptionsService(options);
        _this._instantiationService.setService(Services_1.IOptionsService, _this.optionsService);
        _this._bufferService = _this._instantiationService.createInstance(BufferService_1.BufferService);
        _this._instantiationService.setService(Services_1.IBufferService, _this._bufferService);
        _this._logService = _this._instantiationService.createInstance(LogService_1.LogService);
        _this._instantiationService.setService(Services_1.ILogService, _this._logService);
        _this._coreService = _this._instantiationService.createInstance(CoreService_1.CoreService, function () { return _this.scrollToBottom(); });
        _this._instantiationService.setService(Services_1.ICoreService, _this._coreService);
        _this._coreService.onData(function (e) { return _this._onData.fire(e); });
        _this._coreService.onBinary(function (e) { return _this._onBinary.fire(e); });
        _this._coreMouseService = _this._instantiationService.createInstance(CoreMouseService_1.CoreMouseService);
        _this._instantiationService.setService(Services_1.ICoreMouseService, _this._coreMouseService);
        _this._dirtyRowService = _this._instantiationService.createInstance(DirtyRowService_1.DirtyRowService);
        _this._instantiationService.setService(Services_1.IDirtyRowService, _this._dirtyRowService);
        _this._charsetService = _this._instantiationService.createInstance(CharsetService_1.CharsetService);
        _this._instantiationService.setService(Services_1.ICharsetService, _this._charsetService);
        _this._setupOptionsListeners();
        _this._setup();
        _this._writeBuffer = new WriteBuffer_1.WriteBuffer(function (data) { return _this._inputHandler.parse(data); });
        return _this;
    }
    Object.defineProperty(Terminal.prototype, "options", {
        get: function () { return this.optionsService.options; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "cols", {
        get: function () { return this._bufferService.cols; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "rows", {
        get: function () { return this._bufferService.rows; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onCursorMove", {
        get: function () { return this._onCursorMove.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onData", {
        get: function () { return this._onData.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onBinary", {
        get: function () { return this._onBinary.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onKey", {
        get: function () { return this._onKey.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onLineFeed", {
        get: function () { return this._onLineFeed.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onRender", {
        get: function () { return this._onRender.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onResize", {
        get: function () { return this._onResize.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onScroll", {
        get: function () { return this._onScroll.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onSelectionChange", {
        get: function () { return this._onSelectionChange.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onTitleChange", {
        get: function () { return this._onTitleChange.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onFocus", {
        get: function () { return this._onFocus.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onBlur", {
        get: function () { return this._onBlur.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onA11yChar", {
        get: function () { return this.onA11yCharEmitter.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onA11yTab", {
        get: function () { return this.onA11yTabEmitter.event; },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype.dispose = function () {
        var _a, _b, _c, _d;
        if (this._isDisposed) {
            return;
        }
        _super.prototype.dispose.call(this);
        (_a = this._windowsMode) === null || _a === void 0 ? void 0 : _a.dispose();
        this._windowsMode = undefined;
        (_b = this._renderService) === null || _b === void 0 ? void 0 : _b.dispose();
        this._customKeyEventHandler = null;
        this.write = function () { };
        (_d = (_c = this.element) === null || _c === void 0 ? void 0 : _c.parentNode) === null || _d === void 0 ? void 0 : _d.removeChild(this.element);
    };
    Terminal.prototype._setup = function () {
        var _this = this;
        this._customKeyEventHandler = null;
        this.insertMode = false;
        this.bracketedPasteMode = false;
        this._userScrolling = false;
        if (this._inputHandler) {
            this._inputHandler.reset();
        }
        else {
            this._inputHandler = new InputHandler_1.InputHandler(this, this._bufferService, this._charsetService, this._coreService, this._dirtyRowService, this._logService, this.optionsService, this._coreMouseService);
            this._inputHandler.onRequestBell(function () { return _this.bell(); });
            this._inputHandler.onRequestRefreshRows(function (start, end) { return _this.refresh(start, end); });
            this._inputHandler.onRequestReset(function () { return _this.reset(); });
            this._inputHandler.onCursorMove(function () { return _this._onCursorMove.fire(); });
            this._inputHandler.onLineFeed(function () { return _this._onLineFeed.fire(); });
            this.register(this._inputHandler);
        }
        if (!this.linkifier) {
            this.linkifier = new Linkifier_1.Linkifier(this._bufferService, this._logService);
        }
        if (this.options.windowsMode) {
            this._enableWindowsMode();
        }
    };
    Terminal.prototype._enableWindowsMode = function () {
        var _this = this;
        if (!this._windowsMode) {
            var disposables_1 = [];
            disposables_1.push(this.onLineFeed(WindowsMode_1.updateWindowsModeWrappedState.bind(null, this._bufferService)));
            disposables_1.push(this.addCsiHandler({ final: 'H' }, function () {
                WindowsMode_1.updateWindowsModeWrappedState(_this._bufferService);
                return false;
            }));
            this._windowsMode = {
                dispose: function () {
                    disposables_1.forEach(function (d) { return d.dispose(); });
                }
            };
        }
    };
    Object.defineProperty(Terminal.prototype, "buffer", {
        get: function () {
            return this.buffers.active;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "buffers", {
        get: function () {
            return this._bufferService.buffers;
        },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype.focus = function () {
        if (this.textarea) {
            this.textarea.focus({ preventScroll: true });
        }
    };
    Terminal.prototype._setupOptionsListeners = function () {
        var _this = this;
        this.optionsService.onOptionChange(function (key) {
            var _a, _b, _c, _d, _e;
            switch (key) {
                case 'fontFamily':
                case 'fontSize':
                    (_a = _this._renderService) === null || _a === void 0 ? void 0 : _a.clear();
                    (_b = _this._charSizeService) === null || _b === void 0 ? void 0 : _b.measure();
                    break;
                case 'drawBoldTextInBrightColors':
                case 'letterSpacing':
                case 'lineHeight':
                case 'fontWeight':
                case 'fontWeightBold':
                case 'minimumContrastRatio':
                    if (_this._renderService) {
                        _this._renderService.clear();
                        _this._renderService.onResize(_this.cols, _this.rows);
                        _this.refresh(0, _this.rows - 1);
                    }
                    break;
                case 'rendererType':
                    if (_this._renderService) {
                        _this._renderService.setRenderer(_this._createRenderer());
                        _this._renderService.onResize(_this.cols, _this.rows);
                    }
                    break;
                case 'scrollback':
                    _this.buffers.resize(_this.cols, _this.rows);
                    (_c = _this.viewport) === null || _c === void 0 ? void 0 : _c.syncScrollArea();
                    break;
                case 'screenReaderMode':
                    if (_this.optionsService.options.screenReaderMode) {
                        if (!_this._accessibilityManager && _this._renderService) {
                            _this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(_this, _this._renderService);
                        }
                    }
                    else {
                        (_d = _this._accessibilityManager) === null || _d === void 0 ? void 0 : _d.dispose();
                        _this._accessibilityManager = null;
                    }
                    break;
                case 'tabStopWidth':
                    _this.buffers.setupTabStops();
                    break;
                case 'theme':
                    _this._setTheme(_this.optionsService.options.theme);
                    break;
                case 'windowsMode':
                    if (_this.optionsService.options.windowsMode) {
                        _this._enableWindowsMode();
                    }
                    else {
                        (_e = _this._windowsMode) === null || _e === void 0 ? void 0 : _e.dispose();
                        _this._windowsMode = undefined;
                    }
                    break;
            }
        });
    };
    Terminal.prototype._onTextAreaFocus = function (ev) {
        if (this.sendFocus) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[I');
        }
        this.updateCursorStyle(ev);
        this.element.classList.add('focus');
        this.showCursor();
        this._onFocus.fire();
    };
    Terminal.prototype.blur = function () {
        return this.textarea.blur();
    };
    Terminal.prototype._onTextAreaBlur = function () {
        this.textarea.value = '';
        this.refresh(this.buffer.y, this.buffer.y);
        if (this.sendFocus) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[O');
        }
        this.element.classList.remove('focus');
        this._onBlur.fire();
    };
    Terminal.prototype._initGlobal = function () {
        var _this = this;
        this._bindKeys();
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'copy', function (event) {
            if (!_this.hasSelection()) {
                return;
            }
            Clipboard_1.copyHandler(event, _this._selectionService);
        }));
        var pasteHandlerWrapper = function (event) { return Clipboard_1.handlePasteEvent(event, _this.textarea, _this.bracketedPasteMode, _this._coreService); };
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'paste', pasteHandlerWrapper));
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'paste', pasteHandlerWrapper));
        if (Browser.isFirefox) {
            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (event) {
                if (event.button === 2) {
                    Clipboard_1.rightClickHandler(event, _this.textarea, _this.screenElement, _this._selectionService, _this.options.rightClickSelectsWord);
                }
            }));
        }
        else {
            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'contextmenu', function (event) {
                Clipboard_1.rightClickHandler(event, _this.textarea, _this.screenElement, _this._selectionService, _this.options.rightClickSelectsWord);
            }));
        }
        if (Browser.isLinux) {
            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'auxclick', function (event) {
                if (event.button === 1) {
                    Clipboard_1.moveTextAreaUnderMouseCursor(event, _this.textarea, _this.screenElement);
                }
            }));
        }
    };
    Terminal.prototype._bindKeys = function () {
        var _this = this;
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keyup', function (ev) { return _this._keyUp(ev); }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keydown', function (ev) { return _this._keyDown(ev); }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keypress', function (ev) { return _this._keyPress(ev); }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionstart', function () { return _this._compositionHelper.compositionstart(); }));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionupdate', function (e) { return _this._compositionHelper.compositionupdate(e); }));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionend', function () { return _this._compositionHelper.compositionend(); }));
        this.register(this.onRender(function () { return _this._compositionHelper.updateCompositionElements(); }));
        this.register(this.onRender(function (e) { return _this._queueLinkification(e.start, e.end); }));
    };
    Terminal.prototype.open = function (parent) {
        var _this = this;
        if (!parent) {
            throw new Error('Terminal requires a parent element.');
        }
        if (!document.body.contains(parent)) {
            this._logService.warn('Terminal.open was called on an element that was not attached to the DOM');
        }
        this._document = parent.ownerDocument;
        this.element = this._document.createElement('div');
        this.element.dir = 'ltr';
        this.element.classList.add('terminal');
        this.element.classList.add('xterm');
        this.element.setAttribute('tabindex', '0');
        parent.appendChild(this.element);
        var fragment = document.createDocumentFragment();
        this._viewportElement = document.createElement('div');
        this._viewportElement.classList.add('xterm-viewport');
        fragment.appendChild(this._viewportElement);
        this._viewportScrollArea = document.createElement('div');
        this._viewportScrollArea.classList.add('xterm-scroll-area');
        this._viewportElement.appendChild(this._viewportScrollArea);
        this.screenElement = document.createElement('div');
        this.screenElement.classList.add('xterm-screen');
        this._helperContainer = document.createElement('div');
        this._helperContainer.classList.add('xterm-helpers');
        this.screenElement.appendChild(this._helperContainer);
        fragment.appendChild(this.screenElement);
        this.textarea = document.createElement('textarea');
        this.textarea.classList.add('xterm-helper-textarea');
        this.textarea.setAttribute('aria-label', Strings.promptLabel);
        this.textarea.setAttribute('aria-multiline', 'false');
        this.textarea.setAttribute('autocorrect', 'off');
        this.textarea.setAttribute('autocapitalize', 'off');
        this.textarea.setAttribute('spellcheck', 'false');
        this.textarea.tabIndex = 0;
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'focus', function (ev) { return _this._onTextAreaFocus(ev); }));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'blur', function () { return _this._onTextAreaBlur(); }));
        this._helperContainer.appendChild(this.textarea);
        var coreBrowserService = this._instantiationService.createInstance(CoreBrowserService_1.CoreBrowserService, this.textarea);
        this._instantiationService.setService(Services_2.ICoreBrowserService, coreBrowserService);
        this._charSizeService = this._instantiationService.createInstance(CharSizeService_1.CharSizeService, this._document, this._helperContainer);
        this._instantiationService.setService(Services_2.ICharSizeService, this._charSizeService);
        this._compositionView = document.createElement('div');
        this._compositionView.classList.add('composition-view');
        this._compositionHelper = this._instantiationService.createInstance(CompositionHelper_1.CompositionHelper, this.textarea, this._compositionView);
        this._helperContainer.appendChild(this._compositionView);
        this.element.appendChild(fragment);
        this._theme = this.options.theme || this._theme;
        this.options.theme = undefined;
        this._colorManager = new ColorManager_1.ColorManager(document, this.options.allowTransparency);
        this.optionsService.onOptionChange(function (e) { return _this._colorManager.onOptionsChange(e); });
        this._colorManager.setTheme(this._theme);
        var renderer = this._createRenderer();
        this._renderService = this._instantiationService.createInstance(RenderService_1.RenderService, renderer, this.rows, this.screenElement);
        this._instantiationService.setService(Services_2.IRenderService, this._renderService);
        this._renderService.onRender(function (e) { return _this._onRender.fire(e); });
        this.onResize(function (e) { return _this._renderService.resize(e.cols, e.rows); });
        this._soundService = this._instantiationService.createInstance(SoundService_1.SoundService);
        this._instantiationService.setService(Services_2.ISoundService, this._soundService);
        this._mouseService = this._instantiationService.createInstance(MouseService_1.MouseService);
        this._instantiationService.setService(Services_2.IMouseService, this._mouseService);
        this.viewport = this._instantiationService.createInstance(Viewport_1.Viewport, function (amount, suppressEvent) { return _this.scrollLines(amount, suppressEvent); }, this._viewportElement, this._viewportScrollArea);
        this.viewport.onThemeChange(this._colorManager.colors);
        this.register(this.viewport);
        this.register(this.onCursorMove(function () { return _this._renderService.onCursorMove(); }));
        this.register(this.onResize(function () { return _this._renderService.onResize(_this.cols, _this.rows); }));
        this.register(this.onBlur(function () { return _this._renderService.onBlur(); }));
        this.register(this.onFocus(function () { return _this._renderService.onFocus(); }));
        this.register(this._renderService.onDimensionsChange(function () { return _this.viewport.syncScrollArea(); }));
        this._selectionService = this._instantiationService.createInstance(SelectionService_1.SelectionService, function (amount, suppressEvent) { return _this.scrollLines(amount, suppressEvent); }, this.element, this.screenElement);
        this._instantiationService.setService(Services_2.ISelectionService, this._selectionService);
        this.register(this._selectionService.onSelectionChange(function () { return _this._onSelectionChange.fire(); }));
        this.register(this._selectionService.onRedrawRequest(function (e) { return _this._renderService.onSelectionChanged(e.start, e.end, e.columnSelectMode); }));
        this.register(this._selectionService.onLinuxMouseSelection(function (text) {
            _this.textarea.value = text;
            _this.textarea.focus();
            _this.textarea.select();
        }));
        this.register(this.onScroll(function () {
            _this.viewport.syncScrollArea();
            _this._selectionService.refresh();
        }));
        this.register(Lifecycle_1.addDisposableDomListener(this._viewportElement, 'scroll', function () { return _this._selectionService.refresh(); }));
        this._mouseZoneManager = this._instantiationService.createInstance(MouseZoneManager_1.MouseZoneManager, this.element, this.screenElement);
        this.register(this._mouseZoneManager);
        this.register(this.onScroll(function () { return _this._mouseZoneManager.clearAll(); }));
        this.linkifier.attachToDom(this.element, this._mouseZoneManager);
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (e) { return _this._selectionService.onMouseDown(e); }));
        if (this.mouseEvents) {
            this._selectionService.disable();
            this.element.classList.add('enable-mouse-events');
        }
        else {
            this._selectionService.enable();
        }
        if (this.options.screenReaderMode) {
            this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderService);
        }
        this._charSizeService.measure();
        this.refresh(0, this.rows - 1);
        this._initGlobal();
        this.bindMouse();
    };
    Terminal.prototype._createRenderer = function () {
        switch (this.options.rendererType) {
            case 'canvas': return this._instantiationService.createInstance(Renderer_1.Renderer, this._colorManager.colors, this.screenElement, this.linkifier);
            case 'dom': return this._instantiationService.createInstance(DomRenderer_1.DomRenderer, this._colorManager.colors, this.element, this.screenElement, this._viewportElement, this.linkifier);
            default: throw new Error("Unrecognized rendererType \"" + this.options.rendererType + "\"");
        }
    };
    Terminal.prototype._setTheme = function (theme) {
        var _a, _b, _c;
        this._theme = theme;
        (_a = this._colorManager) === null || _a === void 0 ? void 0 : _a.setTheme(theme);
        (_b = this._renderService) === null || _b === void 0 ? void 0 : _b.setColors(this._colorManager.colors);
        (_c = this.viewport) === null || _c === void 0 ? void 0 : _c.onThemeChange(this._colorManager.colors);
    };
    Terminal.prototype.bindMouse = function () {
        var _this = this;
        var self = this;
        var el = this.element;
        function sendEvent(ev) {
            var pos;
            pos = self._mouseService.getRawByteCoords(ev, self.screenElement, self.cols, self.rows);
            if (!pos) {
                return false;
            }
            var but;
            var action;
            switch (ev.overrideType || ev.type) {
                case 'mousemove':
                    action = 32;
                    if (ev.buttons === undefined) {
                        but = 3;
                        if (ev.button !== undefined) {
                            but = ev.button < 3 ? ev.button : 3;
                        }
                    }
                    else {
                        but = ev.buttons & 1 ? 0 :
                            ev.buttons & 4 ? 1 :
                                ev.buttons & 2 ? 2 :
                                    3;
                    }
                    break;
                case 'mouseup':
                    action = 0;
                    but = ev.button < 3 ? ev.button : 3;
                    break;
                case 'mousedown':
                    action = 1;
                    but = ev.button < 3 ? ev.button : 3;
                    break;
                case 'wheel':
                    if (ev.deltaY !== 0) {
                        action = ev.deltaY < 0 ? 0 : 1;
                    }
                    but = 4;
                    break;
                default:
                    return false;
            }
            if (action === undefined || but === undefined || but > 4) {
                return false;
            }
            return self._coreMouseService.triggerMouseEvent({
                col: pos.x - 33,
                row: pos.y - 33,
                button: but,
                action: action,
                ctrl: ev.ctrlKey,
                alt: ev.altKey,
                shift: ev.shiftKey
            });
        }
        var requestedEvents = {
            mouseup: null,
            wheel: null,
            mousedrag: null,
            mousemove: null
        };
        var eventListeners = {
            mouseup: function (ev) {
                sendEvent(ev);
                if (!ev.buttons) {
                    _this._document.removeEventListener('mouseup', requestedEvents.mouseup);
                    if (requestedEvents.mousedrag) {
                        _this._document.removeEventListener('mousemove', requestedEvents.mousedrag);
                    }
                }
                return _this.cancel(ev);
            },
            wheel: function (ev) {
                sendEvent(ev);
                ev.preventDefault();
                return _this.cancel(ev);
            },
            mousedrag: function (ev) {
                if (ev.buttons) {
                    sendEvent(ev);
                }
            },
            mousemove: function (ev) {
                if (!ev.buttons) {
                    sendEvent(ev);
                }
            }
        };
        this._coreMouseService.onProtocolChange(function (events) {
            _this.mouseEvents = events;
            if (events) {
                if (_this.optionsService.options.logLevel === 'debug') {
                    _this._logService.debug('Binding to mouse events:', _this._coreMouseService.explainEvents(events));
                }
                _this.element.classList.add('enable-mouse-events');
                _this._selectionService.disable();
            }
            else {
                _this._logService.debug('Unbinding from mouse events.');
                _this.element.classList.remove('enable-mouse-events');
                _this._selectionService.enable();
            }
            if (!(events & 8)) {
                el.removeEventListener('mousemove', requestedEvents.mousemove);
                requestedEvents.mousemove = null;
            }
            else if (!requestedEvents.mousemove) {
                el.addEventListener('mousemove', eventListeners.mousemove);
                requestedEvents.mousemove = eventListeners.mousemove;
            }
            if (!(events & 16)) {
                el.removeEventListener('wheel', requestedEvents.wheel);
                requestedEvents.wheel = null;
            }
            else if (!requestedEvents.wheel) {
                el.addEventListener('wheel', eventListeners.wheel);
                requestedEvents.wheel = eventListeners.wheel;
            }
            if (!(events & 2)) {
                _this._document.removeEventListener('mouseup', requestedEvents.mouseup);
                requestedEvents.mouseup = null;
            }
            else if (!requestedEvents.mouseup) {
                requestedEvents.mouseup = eventListeners.mouseup;
            }
            if (!(events & 4)) {
                _this._document.removeEventListener('mousemove', requestedEvents.mousedrag);
                requestedEvents.mousedrag = null;
            }
            else if (!requestedEvents.mousedrag) {
                requestedEvents.mousedrag = eventListeners.mousedrag;
            }
        });
        this._coreMouseService.activeProtocol = this._coreMouseService.activeProtocol;
        this.register(Lifecycle_1.addDisposableDomListener(el, 'mousedown', function (ev) {
            ev.preventDefault();
            _this.focus();
            if (!_this.mouseEvents || _this._selectionService.shouldForceSelection(ev)) {
                return;
            }
            sendEvent(ev);
            if (requestedEvents.mouseup) {
                _this._document.addEventListener('mouseup', requestedEvents.mouseup);
            }
            if (requestedEvents.mousedrag) {
                _this._document.addEventListener('mousemove', requestedEvents.mousedrag);
            }
            return _this.cancel(ev);
        }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {
            if (!requestedEvents.wheel) {
                if (!_this.buffer.hasScrollback) {
                    var amount = _this.viewport.getLinesScrolled(ev);
                    if (amount === 0) {
                        return;
                    }
                    var sequence = EscapeSequences_1.C0.ESC + (_this._coreService.decPrivateModes.applicationCursorKeys ? 'O' : '[') + (ev.deltaY < 0 ? 'A' : 'B');
                    var data = '';
                    for (var i = 0; i < Math.abs(amount); i++) {
                        data += sequence;
                    }
                    _this._coreService.triggerDataEvent(data, true);
                }
                return;
            }
        }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {
            if (requestedEvents.wheel)
                return;
            if (!_this.viewport.onWheel(ev)) {
                return _this.cancel(ev);
            }
        }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchstart', function (ev) {
            if (_this.mouseEvents)
                return;
            _this.viewport.onTouchStart(ev);
            return _this.cancel(ev);
        }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchmove', function (ev) {
            if (_this.mouseEvents)
                return;
            if (!_this.viewport.onTouchMove(ev)) {
                return _this.cancel(ev);
            }
        }));
    };
    Terminal.prototype.refresh = function (start, end) {
        var _a;
        (_a = this._renderService) === null || _a === void 0 ? void 0 : _a.refreshRows(start, end);
    };
    Terminal.prototype._queueLinkification = function (start, end) {
        var _a;
        (_a = this.linkifier) === null || _a === void 0 ? void 0 : _a.linkifyRows(start, end);
    };
    Terminal.prototype.updateCursorStyle = function (ev) {
        if (this._selectionService && this._selectionService.shouldColumnSelect(ev)) {
            this.element.classList.add('column-select');
        }
        else {
            this.element.classList.remove('column-select');
        }
    };
    Terminal.prototype.showCursor = function () {
        if (!this._coreService.isCursorInitialized) {
            this._coreService.isCursorInitialized = true;
            this.refresh(this.buffer.y, this.buffer.y);
        }
    };
    Terminal.prototype.scroll = function (eraseAttr, isWrapped) {
        if (isWrapped === void 0) { isWrapped = false; }
        var newLine;
        newLine = this._blankLine;
        if (!newLine || newLine.length !== this.cols || newLine.getFg(0) !== eraseAttr.fg || newLine.getBg(0) !== eraseAttr.bg) {
            newLine = this.buffer.getBlankLine(eraseAttr, isWrapped);
            this._blankLine = newLine;
        }
        newLine.isWrapped = isWrapped;
        var topRow = this.buffer.ybase + this.buffer.scrollTop;
        var bottomRow = this.buffer.ybase + this.buffer.scrollBottom;
        if (this.buffer.scrollTop === 0) {
            var willBufferBeTrimmed = this.buffer.lines.isFull;
            if (bottomRow === this.buffer.lines.length - 1) {
                if (willBufferBeTrimmed) {
                    this.buffer.lines.recycle().copyFrom(newLine);
                }
                else {
                    this.buffer.lines.push(newLine.clone());
                }
            }
            else {
                this.buffer.lines.splice(bottomRow + 1, 0, newLine.clone());
            }
            if (!willBufferBeTrimmed) {
                this.buffer.ybase++;
                if (!this._userScrolling) {
                    this.buffer.ydisp++;
                }
            }
            else {
                if (this._userScrolling) {
                    this.buffer.ydisp = Math.max(this.buffer.ydisp - 1, 0);
                }
            }
        }
        else {
            var scrollRegionHeight = bottomRow - topRow + 1;
            this.buffer.lines.shiftElements(topRow + 1, scrollRegionHeight - 1, -1);
            this.buffer.lines.set(bottomRow, newLine.clone());
        }
        if (!this._userScrolling) {
            this.buffer.ydisp = this.buffer.ybase;
        }
        this._dirtyRowService.markRangeDirty(this.buffer.scrollTop, this.buffer.scrollBottom);
        this._onScroll.fire(this.buffer.ydisp);
    };
    Terminal.prototype.scrollLines = function (disp, suppressScrollEvent) {
        if (disp < 0) {
            if (this.buffer.ydisp === 0) {
                return;
            }
            this._userScrolling = true;
        }
        else if (disp + this.buffer.ydisp >= this.buffer.ybase) {
            this._userScrolling = false;
        }
        var oldYdisp = this.buffer.ydisp;
        this.buffer.ydisp = Math.max(Math.min(this.buffer.ydisp + disp, this.buffer.ybase), 0);
        if (oldYdisp === this.buffer.ydisp) {
            return;
        }
        if (!suppressScrollEvent) {
            this._onScroll.fire(this.buffer.ydisp);
        }
        this.refresh(0, this.rows - 1);
    };
    Terminal.prototype.scrollPages = function (pageCount) {
        this.scrollLines(pageCount * (this.rows - 1));
    };
    Terminal.prototype.scrollToTop = function () {
        this.scrollLines(-this.buffer.ydisp);
    };
    Terminal.prototype.scrollToBottom = function () {
        this.scrollLines(this.buffer.ybase - this.buffer.ydisp);
    };
    Terminal.prototype.scrollToLine = function (line) {
        var scrollAmount = line - this.buffer.ydisp;
        if (scrollAmount !== 0) {
            this.scrollLines(scrollAmount);
        }
    };
    Terminal.prototype.paste = function (data) {
        Clipboard_1.paste(data, this.textarea, this.bracketedPasteMode, this._coreService);
    };
    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {
        this._customKeyEventHandler = customKeyEventHandler;
    };
    Terminal.prototype.addEscHandler = function (id, callback) {
        return this._inputHandler.addEscHandler(id, callback);
    };
    Terminal.prototype.addDcsHandler = function (id, callback) {
        return this._inputHandler.addDcsHandler(id, callback);
    };
    Terminal.prototype.addCsiHandler = function (id, callback) {
        return this._inputHandler.addCsiHandler(id, callback);
    };
    Terminal.prototype.addOscHandler = function (ident, callback) {
        return this._inputHandler.addOscHandler(ident, callback);
    };
    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {
        var matcherId = this.linkifier.registerLinkMatcher(regex, handler, options);
        this.refresh(0, this.rows - 1);
        return matcherId;
    };
    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {
        if (this.linkifier.deregisterLinkMatcher(matcherId)) {
            this.refresh(0, this.rows - 1);
        }
    };
    Terminal.prototype.registerCharacterJoiner = function (handler) {
        var joinerId = this._renderService.registerCharacterJoiner(handler);
        this.refresh(0, this.rows - 1);
        return joinerId;
    };
    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {
        if (this._renderService.deregisterCharacterJoiner(joinerId)) {
            this.refresh(0, this.rows - 1);
        }
    };
    Object.defineProperty(Terminal.prototype, "markers", {
        get: function () {
            return this.buffer.markers;
        },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype.addMarker = function (cursorYOffset) {
        if (this.buffer !== this.buffers.normal) {
            return;
        }
        return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + cursorYOffset);
    };
    Terminal.prototype.hasSelection = function () {
        return this._selectionService ? this._selectionService.hasSelection : false;
    };
    Terminal.prototype.select = function (column, row, length) {
        this._selectionService.setSelection(column, row, length);
    };
    Terminal.prototype.getSelection = function () {
        return this._selectionService ? this._selectionService.selectionText : '';
    };
    Terminal.prototype.getSelectionPosition = function () {
        if (!this._selectionService.hasSelection) {
            return undefined;
        }
        return {
            startColumn: this._selectionService.selectionStart[0],
            startRow: this._selectionService.selectionStart[1],
            endColumn: this._selectionService.selectionEnd[0],
            endRow: this._selectionService.selectionEnd[1]
        };
    };
    Terminal.prototype.clearSelection = function () {
        var _a;
        (_a = this._selectionService) === null || _a === void 0 ? void 0 : _a.clearSelection();
    };
    Terminal.prototype.selectAll = function () {
        var _a;
        (_a = this._selectionService) === null || _a === void 0 ? void 0 : _a.selectAll();
    };
    Terminal.prototype.selectLines = function (start, end) {
        var _a;
        (_a = this._selectionService) === null || _a === void 0 ? void 0 : _a.selectLines(start, end);
    };
    Terminal.prototype._keyDown = function (event) {
        this._keyDownHandled = false;
        if (this._customKeyEventHandler && this._customKeyEventHandler(event) === false) {
            return false;
        }
        if (!this._compositionHelper.keydown(event)) {
            if (this.buffer.ybase !== this.buffer.ydisp) {
                this.scrollToBottom();
            }
            return false;
        }
        var result = Keyboard_1.evaluateKeyboardEvent(event, this._coreService.decPrivateModes.applicationCursorKeys, this.browser.isMac, this.options.macOptionIsMeta);
        this.updateCursorStyle(event);
        if (result.type === 3 || result.type === 2) {
            var scrollCount = this.rows - 1;
            this.scrollLines(result.type === 2 ? -scrollCount : scrollCount);
            return this.cancel(event, true);
        }
        if (result.type === 1) {
            this.selectAll();
        }
        if (this._isThirdLevelShift(this.browser, event)) {
            return true;
        }
        if (result.cancel) {
            this.cancel(event, true);
        }
        if (!result.key) {
            return true;
        }
        if (result.key === EscapeSequences_1.C0.ETX || result.key === EscapeSequences_1.C0.CR) {
            this.textarea.value = '';
        }
        this._onKey.fire({ key: result.key, domEvent: event });
        this.showCursor();
        this._coreService.triggerDataEvent(result.key, true);
        if (!this.optionsService.options.screenReaderMode) {
            return this.cancel(event, true);
        }
        this._keyDownHandled = true;
    };
    Terminal.prototype._isThirdLevelShift = function (browser, ev) {
        var thirdLevelKey = (browser.isMac && !this.options.macOptionIsMeta && ev.altKey && !ev.ctrlKey && !ev.metaKey) ||
            (browser.isWindows && ev.altKey && ev.ctrlKey && !ev.metaKey);
        if (ev.type === 'keypress') {
            return thirdLevelKey;
        }
        return thirdLevelKey && (!ev.keyCode || ev.keyCode > 47);
    };
    Terminal.prototype._keyUp = function (ev) {
        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {
            return;
        }
        if (!wasModifierKeyOnlyEvent(ev)) {
            this.focus();
        }
        this.updateCursorStyle(ev);
    };
    Terminal.prototype._keyPress = function (ev) {
        var key;
        if (this._keyDownHandled) {
            return false;
        }
        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {
            return false;
        }
        this.cancel(ev);
        if (ev.charCode) {
            key = ev.charCode;
        }
        else if (ev.which === null || ev.which === undefined) {
            key = ev.keyCode;
        }
        else if (ev.which !== 0 && ev.charCode !== 0) {
            key = ev.which;
        }
        else {
            return false;
        }
        if (!key || ((ev.altKey || ev.ctrlKey || ev.metaKey) && !this._isThirdLevelShift(this.browser, ev))) {
            return false;
        }
        key = String.fromCharCode(key);
        this._onKey.fire({ key: key, domEvent: ev });
        this.showCursor();
        this._coreService.triggerDataEvent(key, true);
        return true;
    };
    Terminal.prototype.bell = function () {
        var _this = this;
        if (this._soundBell()) {
            this._soundService.playBellSound();
        }
        if (this._visualBell()) {
            this.element.classList.add('visual-bell-active');
            clearTimeout(this._visualBellTimer);
            this._visualBellTimer = window.setTimeout(function () {
                _this.element.classList.remove('visual-bell-active');
            }, 200);
        }
    };
    Terminal.prototype.resize = function (x, y) {
        var _a;
        if (isNaN(x) || isNaN(y)) {
            return;
        }
        if (x === this.cols && y === this.rows) {
            if (this._charSizeService && !this._charSizeService.hasValidSize) {
                this._charSizeService.measure();
            }
            return;
        }
        if (x < BufferService_1.MINIMUM_COLS)
            x = BufferService_1.MINIMUM_COLS;
        if (y < BufferService_1.MINIMUM_ROWS)
            y = BufferService_1.MINIMUM_ROWS;
        this.buffers.resize(x, y);
        this._bufferService.resize(x, y);
        this.buffers.setupTabStops(this.cols);
        (_a = this._charSizeService) === null || _a === void 0 ? void 0 : _a.measure();
        this.viewport.syncScrollArea(true);
        this.refresh(0, this.rows - 1);
        this._onResize.fire({ cols: x, rows: y });
    };
    Terminal.prototype.clear = function () {
        if (this.buffer.ybase === 0 && this.buffer.y === 0) {
            return;
        }
        this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y));
        this.buffer.lines.length = 1;
        this.buffer.ydisp = 0;
        this.buffer.ybase = 0;
        this.buffer.y = 0;
        for (var i = 1; i < this.rows; i++) {
            this.buffer.lines.push(this.buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));
        }
        this.refresh(0, this.rows - 1);
        this._onScroll.fire(this.buffer.ydisp);
    };
    Terminal.prototype.is = function (term) {
        return (this.options.termName + '').indexOf(term) === 0;
    };
    Terminal.prototype.handleTitle = function (title) {
        this._onTitleChange.fire(title);
    };
    Terminal.prototype.reset = function () {
        var _a, _b;
        this.options.rows = this.rows;
        this.options.cols = this.cols;
        var customKeyEventHandler = this._customKeyEventHandler;
        var userScrolling = this._userScrolling;
        this._setup();
        this._bufferService.reset();
        this._charsetService.reset();
        this._coreService.reset();
        this._coreMouseService.reset();
        (_a = this._selectionService) === null || _a === void 0 ? void 0 : _a.reset();
        this._customKeyEventHandler = customKeyEventHandler;
        this._userScrolling = userScrolling;
        this.refresh(0, this.rows - 1);
        (_b = this.viewport) === null || _b === void 0 ? void 0 : _b.syncScrollArea();
    };
    Terminal.prototype.cancel = function (ev, force) {
        if (!this.options.cancelEvents && !force) {
            return;
        }
        ev.preventDefault();
        ev.stopPropagation();
        return false;
    };
    Terminal.prototype._visualBell = function () {
        return false;
    };
    Terminal.prototype._soundBell = function () {
        return this.options.bellStyle === 'sound';
    };
    Terminal.prototype.write = function (data, callback) {
        this._writeBuffer.write(data, callback);
    };
    Terminal.prototype.writeSync = function (data) {
        this._writeBuffer.writeSync(data);
    };
    return Terminal;
}(Lifecycle_2.Disposable));
exports.Terminal = Terminal;
function wasModifierKeyOnlyEvent(ev) {
    return ev.keyCode === 16 ||
        ev.keyCode === 17 ||
        ev.keyCode === 18;
}


/***/ }),

/***/ "./out/browser/Clipboard.js":
/*!**********************************!*\
  !*** ./out/browser/Clipboard.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function prepareTextForTerminal(text) {
    return text.replace(/\r?\n/g, '\r');
}
exports.prepareTextForTerminal = prepareTextForTerminal;
function bracketTextForPaste(text, bracketedPasteMode) {
    if (bracketedPasteMode) {
        return '\x1b[200~' + text + '\x1b[201~';
    }
    return text;
}
exports.bracketTextForPaste = bracketTextForPaste;
function copyHandler(ev, selectionService) {
    if (ev.clipboardData) {
        ev.clipboardData.setData('text/plain', selectionService.selectionText);
    }
    ev.preventDefault();
}
exports.copyHandler = copyHandler;
function handlePasteEvent(ev, textarea, bracketedPasteMode, coreService) {
    ev.stopPropagation();
    if (ev.clipboardData) {
        var text = ev.clipboardData.getData('text/plain');
        paste(text, textarea, bracketedPasteMode, coreService);
    }
}
exports.handlePasteEvent = handlePasteEvent;
function paste(text, textarea, bracketedPasteMode, coreService) {
    text = prepareTextForTerminal(text);
    text = bracketTextForPaste(text, bracketedPasteMode);
    coreService.triggerDataEvent(text, true);
    textarea.value = '';
}
exports.paste = paste;
function moveTextAreaUnderMouseCursor(ev, textarea, screenElement) {
    var pos = screenElement.getBoundingClientRect();
    var left = ev.clientX - pos.left - 10;
    var top = ev.clientY - pos.top - 10;
    textarea.style.position = 'absolute';
    textarea.style.width = '20px';
    textarea.style.height = '20px';
    textarea.style.left = left + "px";
    textarea.style.top = top + "px";
    textarea.style.zIndex = '1000';
    textarea.focus();
    setTimeout(function () {
        textarea.style.position = '';
        textarea.style.width = '';
        textarea.style.height = '';
        textarea.style.left = '';
        textarea.style.top = '';
        textarea.style.zIndex = '';
    }, 200);
}
exports.moveTextAreaUnderMouseCursor = moveTextAreaUnderMouseCursor;
function rightClickHandler(ev, textarea, screenElement, selectionService, shouldSelectWord) {
    moveTextAreaUnderMouseCursor(ev, textarea, screenElement);
    if (shouldSelectWord && !selectionService.isClickInSelection(ev)) {
        selectionService.selectWordAtCursor(ev);
    }
    textarea.value = selectionService.selectionText;
    textarea.select();
}
exports.rightClickHandler = rightClickHandler;


/***/ }),

/***/ "./out/browser/Color.js":
/*!******************************!*\
  !*** ./out/browser/Color.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var channels;
(function (channels) {
    function toCss(r, g, b, a) {
        if (a !== undefined) {
            return "#" + toPaddedHex(r) + toPaddedHex(g) + toPaddedHex(b) + toPaddedHex(a);
        }
        return "#" + toPaddedHex(r) + toPaddedHex(g) + toPaddedHex(b);
    }
    channels.toCss = toCss;
    function toRgba(r, g, b, a) {
        if (a === void 0) { a = 0xFF; }
        return (r << 24 | g << 16 | b << 8 | a) >>> 0;
    }
    channels.toRgba = toRgba;
})(channels = exports.channels || (exports.channels = {}));
var color;
(function (color_1) {
    function blend(bg, fg) {
        var a = (fg.rgba & 0xFF) / 255;
        if (a === 1) {
            return {
                css: fg.css,
                rgba: fg.rgba
            };
        }
        var fgR = (fg.rgba >> 24) & 0xFF;
        var fgG = (fg.rgba >> 16) & 0xFF;
        var fgB = (fg.rgba >> 8) & 0xFF;
        var bgR = (bg.rgba >> 24) & 0xFF;
        var bgG = (bg.rgba >> 16) & 0xFF;
        var bgB = (bg.rgba >> 8) & 0xFF;
        var r = bgR + Math.round((fgR - bgR) * a);
        var g = bgG + Math.round((fgG - bgG) * a);
        var b = bgB + Math.round((fgB - bgB) * a);
        var css = channels.toCss(r, g, b);
        var rgba = channels.toRgba(r, g, b);
        return { css: css, rgba: rgba };
    }
    color_1.blend = blend;
    function ensureContrastRatio(bg, fg, ratio) {
        var result = rgba.ensureContrastRatio(bg.rgba, fg.rgba, ratio);
        if (!result) {
            return undefined;
        }
        return rgba.toColor((result >> 24 & 0xFF), (result >> 16 & 0xFF), (result >> 8 & 0xFF));
    }
    color_1.ensureContrastRatio = ensureContrastRatio;
    function opaque(color) {
        var rgbaColor = (color.rgba | 0xFF) >>> 0;
        var _a = rgba.toChannels(rgbaColor), r = _a[0], g = _a[1], b = _a[2];
        return {
            css: channels.toCss(r, g, b),
            rgba: rgbaColor
        };
    }
    color_1.opaque = opaque;
})(color = exports.color || (exports.color = {}));
var css;
(function (css_1) {
    function toColor(css) {
        return {
            css: css,
            rgba: (parseInt(css.slice(1), 16) << 8 | 0xFF) >>> 0
        };
    }
    css_1.toColor = toColor;
})(css = exports.css || (exports.css = {}));
var rgb;
(function (rgb_1) {
    function relativeLuminance(rgb) {
        return relativeLuminance2((rgb >> 16) & 0xFF, (rgb >> 8) & 0xFF, (rgb) & 0xFF);
    }
    rgb_1.relativeLuminance = relativeLuminance;
    function relativeLuminance2(r, g, b) {
        var rs = r / 255;
        var gs = g / 255;
        var bs = b / 255;
        var rr = rs <= 0.03928 ? rs / 12.92 : Math.pow((rs + 0.055) / 1.055, 2.4);
        var rg = gs <= 0.03928 ? gs / 12.92 : Math.pow((gs + 0.055) / 1.055, 2.4);
        var rb = bs <= 0.03928 ? bs / 12.92 : Math.pow((bs + 0.055) / 1.055, 2.4);
        return rr * 0.2126 + rg * 0.7152 + rb * 0.0722;
    }
    rgb_1.relativeLuminance2 = relativeLuminance2;
})(rgb = exports.rgb || (exports.rgb = {}));
var rgba;
(function (rgba) {
    function ensureContrastRatio(bgRgba, fgRgba, ratio) {
        var bgL = rgb.relativeLuminance(bgRgba >> 8);
        var fgL = rgb.relativeLuminance(fgRgba >> 8);
        var cr = contrastRatio(bgL, fgL);
        if (cr < ratio) {
            if (fgL < bgL) {
                return reduceLuminance(bgRgba, fgRgba, ratio);
            }
            return increaseLuminance(bgRgba, fgRgba, ratio);
        }
        return undefined;
    }
    rgba.ensureContrastRatio = ensureContrastRatio;
    function reduceLuminance(bgRgba, fgRgba, ratio) {
        var bgR = (bgRgba >> 24) & 0xFF;
        var bgG = (bgRgba >> 16) & 0xFF;
        var bgB = (bgRgba >> 8) & 0xFF;
        var fgR = (fgRgba >> 24) & 0xFF;
        var fgG = (fgRgba >> 16) & 0xFF;
        var fgB = (fgRgba >> 8) & 0xFF;
        var cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));
        while (cr < ratio && (fgR > 0 || fgG > 0 || fgB > 0)) {
            fgR -= Math.max(0, Math.ceil(fgR * 0.1));
            fgG -= Math.max(0, Math.ceil(fgG * 0.1));
            fgB -= Math.max(0, Math.ceil(fgB * 0.1));
            cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));
        }
        return (fgR << 24 | fgG << 16 | fgB << 8 | 0xFF) >>> 0;
    }
    rgba.reduceLuminance = reduceLuminance;
    function increaseLuminance(bgRgba, fgRgba, ratio) {
        var bgR = (bgRgba >> 24) & 0xFF;
        var bgG = (bgRgba >> 16) & 0xFF;
        var bgB = (bgRgba >> 8) & 0xFF;
        var fgR = (fgRgba >> 24) & 0xFF;
        var fgG = (fgRgba >> 16) & 0xFF;
        var fgB = (fgRgba >> 8) & 0xFF;
        var cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));
        while (cr < ratio && (fgR < 0xFF || fgG < 0xFF || fgB < 0xFF)) {
            fgR = Math.min(0xFF, fgR + Math.ceil((255 - fgR) * 0.1));
            fgG = Math.min(0xFF, fgG + Math.ceil((255 - fgG) * 0.1));
            fgB = Math.min(0xFF, fgB + Math.ceil((255 - fgB) * 0.1));
            cr = contrastRatio(rgb.relativeLuminance2(fgR, fgB, fgG), rgb.relativeLuminance2(bgR, bgG, bgB));
        }
        return (fgR << 24 | fgG << 16 | fgB << 8 | 0xFF) >>> 0;
    }
    rgba.increaseLuminance = increaseLuminance;
    function toChannels(value) {
        return [(value >> 24) & 0xFF, (value >> 16) & 0xFF, (value >> 8) & 0xFF, value & 0xFF];
    }
    rgba.toChannels = toChannels;
    function toColor(r, g, b) {
        return {
            css: channels.toCss(r, g, b),
            rgba: channels.toRgba(r, g, b)
        };
    }
    rgba.toColor = toColor;
})(rgba = exports.rgba || (exports.rgba = {}));
function toPaddedHex(c) {
    var s = c.toString(16);
    return s.length < 2 ? '0' + s : s;
}
exports.toPaddedHex = toPaddedHex;
function contrastRatio(l1, l2) {
    if (l1 < l2) {
        return (l2 + 0.05) / (l1 + 0.05);
    }
    return (l1 + 0.05) / (l2 + 0.05);
}
exports.contrastRatio = contrastRatio;


/***/ }),

/***/ "./out/browser/ColorContrastCache.js":
/*!*******************************************!*\
  !*** ./out/browser/ColorContrastCache.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ColorContrastCache = (function () {
    function ColorContrastCache() {
        this._color = {};
        this._rgba = {};
    }
    ColorContrastCache.prototype.clear = function () {
        this._color = {};
        this._rgba = {};
    };
    ColorContrastCache.prototype.setCss = function (bg, fg, value) {
        if (!this._rgba[bg]) {
            this._rgba[bg] = {};
        }
        this._rgba[bg][fg] = value;
    };
    ColorContrastCache.prototype.getCss = function (bg, fg) {
        return this._rgba[bg] ? this._rgba[bg][fg] : undefined;
    };
    ColorContrastCache.prototype.setColor = function (bg, fg, value) {
        if (!this._color[bg]) {
            this._color[bg] = {};
        }
        this._color[bg][fg] = value;
    };
    ColorContrastCache.prototype.getColor = function (bg, fg) {
        return this._color[bg] ? this._color[bg][fg] : undefined;
    };
    return ColorContrastCache;
}());
exports.ColorContrastCache = ColorContrastCache;


/***/ }),

/***/ "./out/browser/ColorManager.js":
/*!*************************************!*\
  !*** ./out/browser/ColorManager.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Color_1 = __webpack_require__(/*! browser/Color */ "./out/browser/Color.js");
var ColorContrastCache_1 = __webpack_require__(/*! browser/ColorContrastCache */ "./out/browser/ColorContrastCache.js");
var DEFAULT_FOREGROUND = Color_1.css.toColor('#ffffff');
var DEFAULT_BACKGROUND = Color_1.css.toColor('#000000');
var DEFAULT_CURSOR = Color_1.css.toColor('#ffffff');
var DEFAULT_CURSOR_ACCENT = Color_1.css.toColor('#000000');
var DEFAULT_SELECTION = {
    css: 'rgba(255, 255, 255, 0.3)',
    rgba: 0xFFFFFF4D
};
exports.DEFAULT_ANSI_COLORS = (function () {
    var colors = [
        Color_1.css.toColor('#2e3436'),
        Color_1.css.toColor('#cc0000'),
        Color_1.css.toColor('#4e9a06'),
        Color_1.css.toColor('#c4a000'),
        Color_1.css.toColor('#3465a4'),
        Color_1.css.toColor('#75507b'),
        Color_1.css.toColor('#06989a'),
        Color_1.css.toColor('#d3d7cf'),
        Color_1.css.toColor('#555753'),
        Color_1.css.toColor('#ef2929'),
        Color_1.css.toColor('#8ae234'),
        Color_1.css.toColor('#fce94f'),
        Color_1.css.toColor('#729fcf'),
        Color_1.css.toColor('#ad7fa8'),
        Color_1.css.toColor('#34e2e2'),
        Color_1.css.toColor('#eeeeec')
    ];
    var v = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff];
    for (var i = 0; i < 216; i++) {
        var r = v[(i / 36) % 6 | 0];
        var g = v[(i / 6) % 6 | 0];
        var b = v[i % 6];
        colors.push({
            css: Color_1.channels.toCss(r, g, b),
            rgba: Color_1.channels.toRgba(r, g, b)
        });
    }
    for (var i = 0; i < 24; i++) {
        var c = 8 + i * 10;
        colors.push({
            css: Color_1.channels.toCss(c, c, c),
            rgba: Color_1.channels.toRgba(c, c, c)
        });
    }
    return colors;
})();
var ColorManager = (function () {
    function ColorManager(document, allowTransparency) {
        this.allowTransparency = allowTransparency;
        var canvas = document.createElement('canvas');
        canvas.width = 1;
        canvas.height = 1;
        var ctx = canvas.getContext('2d');
        if (!ctx) {
            throw new Error('Could not get rendering context');
        }
        this._ctx = ctx;
        this._ctx.globalCompositeOperation = 'copy';
        this._litmusColor = this._ctx.createLinearGradient(0, 0, 1, 1);
        this._contrastCache = new ColorContrastCache_1.ColorContrastCache();
        this.colors = {
            foreground: DEFAULT_FOREGROUND,
            background: DEFAULT_BACKGROUND,
            cursor: DEFAULT_CURSOR,
            cursorAccent: DEFAULT_CURSOR_ACCENT,
            selection: DEFAULT_SELECTION,
            selectionOpaque: Color_1.color.blend(DEFAULT_BACKGROUND, DEFAULT_SELECTION),
            ansi: exports.DEFAULT_ANSI_COLORS.slice(),
            contrastCache: this._contrastCache
        };
    }
    ColorManager.prototype.onOptionsChange = function (key) {
        if (key === 'minimumContrastRatio') {
            this._contrastCache.clear();
        }
    };
    ColorManager.prototype.setTheme = function (theme) {
        if (theme === void 0) { theme = {}; }
        this.colors.foreground = this._parseColor(theme.foreground, DEFAULT_FOREGROUND);
        this.colors.background = this._parseColor(theme.background, DEFAULT_BACKGROUND);
        this.colors.cursor = this._parseColor(theme.cursor, DEFAULT_CURSOR, true);
        this.colors.cursorAccent = this._parseColor(theme.cursorAccent, DEFAULT_CURSOR_ACCENT, true);
        this.colors.selection = this._parseColor(theme.selection, DEFAULT_SELECTION, true);
        this.colors.selectionOpaque = Color_1.color.blend(this.colors.background, this.colors.selection);
        this.colors.ansi[0] = this._parseColor(theme.black, exports.DEFAULT_ANSI_COLORS[0]);
        this.colors.ansi[1] = this._parseColor(theme.red, exports.DEFAULT_ANSI_COLORS[1]);
        this.colors.ansi[2] = this._parseColor(theme.green, exports.DEFAULT_ANSI_COLORS[2]);
        this.colors.ansi[3] = this._parseColor(theme.yellow, exports.DEFAULT_ANSI_COLORS[3]);
        this.colors.ansi[4] = this._parseColor(theme.blue, exports.DEFAULT_ANSI_COLORS[4]);
        this.colors.ansi[5] = this._parseColor(theme.magenta, exports.DEFAULT_ANSI_COLORS[5]);
        this.colors.ansi[6] = this._parseColor(theme.cyan, exports.DEFAULT_ANSI_COLORS[6]);
        this.colors.ansi[7] = this._parseColor(theme.white, exports.DEFAULT_ANSI_COLORS[7]);
        this.colors.ansi[8] = this._parseColor(theme.brightBlack, exports.DEFAULT_ANSI_COLORS[8]);
        this.colors.ansi[9] = this._parseColor(theme.brightRed, exports.DEFAULT_ANSI_COLORS[9]);
        this.colors.ansi[10] = this._parseColor(theme.brightGreen, exports.DEFAULT_ANSI_COLORS[10]);
        this.colors.ansi[11] = this._parseColor(theme.brightYellow, exports.DEFAULT_ANSI_COLORS[11]);
        this.colors.ansi[12] = this._parseColor(theme.brightBlue, exports.DEFAULT_ANSI_COLORS[12]);
        this.colors.ansi[13] = this._parseColor(theme.brightMagenta, exports.DEFAULT_ANSI_COLORS[13]);
        this.colors.ansi[14] = this._parseColor(theme.brightCyan, exports.DEFAULT_ANSI_COLORS[14]);
        this.colors.ansi[15] = this._parseColor(theme.brightWhite, exports.DEFAULT_ANSI_COLORS[15]);
        this._contrastCache.clear();
    };
    ColorManager.prototype._parseColor = function (css, fallback, allowTransparency) {
        if (allowTransparency === void 0) { allowTransparency = this.allowTransparency; }
        if (css === undefined) {
            return fallback;
        }
        this._ctx.fillStyle = this._litmusColor;
        this._ctx.fillStyle = css;
        if (typeof this._ctx.fillStyle !== 'string') {
            console.warn("Color: " + css + " is invalid using fallback " + fallback.css);
            return fallback;
        }
        this._ctx.fillRect(0, 0, 1, 1);
        var data = this._ctx.getImageData(0, 0, 1, 1).data;
        if (data[3] !== 0xFF) {
            if (!allowTransparency) {
                console.warn("Color: " + css + " is using transparency, but allowTransparency is false. " +
                    ("Using fallback " + fallback.css + "."));
                return fallback;
            }
            var _a = this._ctx.fillStyle.substring(5, this._ctx.fillStyle.length - 1).split(',').map(function (component) { return Number(component); }), r = _a[0], g = _a[1], b = _a[2], a = _a[3];
            var alpha = Math.round(a * 255);
            var rgba = Color_1.channels.toRgba(r, g, b, alpha);
            return {
                rgba: rgba,
                css: Color_1.channels.toCss(r, g, b, alpha)
            };
        }
        return {
            css: this._ctx.fillStyle,
            rgba: Color_1.channels.toRgba(data[0], data[1], data[2], data[3])
        };
    };
    return ColorManager;
}());
exports.ColorManager = ColorManager;


/***/ }),

/***/ "./out/browser/Lifecycle.js":
/*!**********************************!*\
  !*** ./out/browser/Lifecycle.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function addDisposableDomListener(node, type, handler, useCapture) {
    node.addEventListener(type, handler, useCapture);
    var disposed = false;
    return {
        dispose: function () {
            if (!disposed) {
                return;
            }
            disposed = true;
            node.removeEventListener(type, handler, useCapture);
        }
    };
}
exports.addDisposableDomListener = addDisposableDomListener;


/***/ }),

/***/ "./out/browser/Linkifier.js":
/*!**********************************!*\
  !*** ./out/browser/Linkifier.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CharWidth_1 = __webpack_require__(/*! common/CharWidth */ "./out/common/CharWidth.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var OVERSCAN_CHAR_LIMIT = 2000;
var Linkifier = (function () {
    function Linkifier(_bufferService, _logService) {
        this._bufferService = _bufferService;
        this._logService = _logService;
        this._linkMatchers = [];
        this._nextLinkMatcherId = 0;
        this._onLinkHover = new EventEmitter_1.EventEmitter();
        this._onLinkLeave = new EventEmitter_1.EventEmitter();
        this._onLinkTooltip = new EventEmitter_1.EventEmitter();
        this._rowsToLinkify = {
            start: undefined,
            end: undefined
        };
    }
    Object.defineProperty(Linkifier.prototype, "onLinkHover", {
        get: function () { return this._onLinkHover.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Linkifier.prototype, "onLinkLeave", {
        get: function () { return this._onLinkLeave.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Linkifier.prototype, "onLinkTooltip", {
        get: function () { return this._onLinkTooltip.event; },
        enumerable: true,
        configurable: true
    });
    Linkifier.prototype.attachToDom = function (element, mouseZoneManager) {
        this._element = element;
        this._mouseZoneManager = mouseZoneManager;
    };
    Linkifier.prototype.linkifyRows = function (start, end) {
        var _this = this;
        if (!this._mouseZoneManager) {
            return;
        }
        if (this._rowsToLinkify.start === undefined || this._rowsToLinkify.end === undefined) {
            this._rowsToLinkify.start = start;
            this._rowsToLinkify.end = end;
        }
        else {
            this._rowsToLinkify.start = Math.min(this._rowsToLinkify.start, start);
            this._rowsToLinkify.end = Math.max(this._rowsToLinkify.end, end);
        }
        this._mouseZoneManager.clearAll(start, end);
        if (this._rowsTimeoutId) {
            clearTimeout(this._rowsTimeoutId);
        }
        this._rowsTimeoutId = setTimeout(function () { return _this._linkifyRows(); }, Linkifier._timeBeforeLatency);
    };
    Linkifier.prototype._linkifyRows = function () {
        this._rowsTimeoutId = undefined;
        var buffer = this._bufferService.buffer;
        if (this._rowsToLinkify.start === undefined || this._rowsToLinkify.end === undefined) {
            this._logService.debug('_rowToLinkify was unset before _linkifyRows was called');
            return;
        }
        var absoluteRowIndexStart = buffer.ydisp + this._rowsToLinkify.start;
        if (absoluteRowIndexStart >= buffer.lines.length) {
            return;
        }
        var absoluteRowIndexEnd = buffer.ydisp + Math.min(this._rowsToLinkify.end, this._bufferService.rows) + 1;
        var overscanLineLimit = Math.ceil(OVERSCAN_CHAR_LIMIT / this._bufferService.cols);
        var iterator = this._bufferService.buffer.iterator(false, absoluteRowIndexStart, absoluteRowIndexEnd, overscanLineLimit, overscanLineLimit);
        while (iterator.hasNext()) {
            var lineData = iterator.next();
            for (var i = 0; i < this._linkMatchers.length; i++) {
                this._doLinkifyRow(lineData.range.first, lineData.content, this._linkMatchers[i]);
            }
        }
        this._rowsToLinkify.start = undefined;
        this._rowsToLinkify.end = undefined;
    };
    Linkifier.prototype.registerLinkMatcher = function (regex, handler, options) {
        if (options === void 0) { options = {}; }
        if (!handler) {
            throw new Error('handler must be defined');
        }
        var matcher = {
            id: this._nextLinkMatcherId++,
            regex: regex,
            handler: handler,
            matchIndex: options.matchIndex,
            validationCallback: options.validationCallback,
            hoverTooltipCallback: options.tooltipCallback,
            hoverLeaveCallback: options.leaveCallback,
            willLinkActivate: options.willLinkActivate,
            priority: options.priority || 0
        };
        this._addLinkMatcherToList(matcher);
        return matcher.id;
    };
    Linkifier.prototype._addLinkMatcherToList = function (matcher) {
        if (this._linkMatchers.length === 0) {
            this._linkMatchers.push(matcher);
            return;
        }
        for (var i = this._linkMatchers.length - 1; i >= 0; i--) {
            if (matcher.priority <= this._linkMatchers[i].priority) {
                this._linkMatchers.splice(i + 1, 0, matcher);
                return;
            }
        }
        this._linkMatchers.splice(0, 0, matcher);
    };
    Linkifier.prototype.deregisterLinkMatcher = function (matcherId) {
        for (var i = 0; i < this._linkMatchers.length; i++) {
            if (this._linkMatchers[i].id === matcherId) {
                this._linkMatchers.splice(i, 1);
                return true;
            }
        }
        return false;
    };
    Linkifier.prototype._doLinkifyRow = function (rowIndex, text, matcher) {
        var _this = this;
        var rex = new RegExp(matcher.regex.source, (matcher.regex.flags || '') + 'g');
        var match;
        var stringIndex = -1;
        var _loop_1 = function () {
            var uri = match[typeof matcher.matchIndex !== 'number' ? 0 : matcher.matchIndex];
            if (!uri) {
                this_1._logService.debug('match found without corresponding matchIndex', match, matcher);
                return "break";
            }
            stringIndex = text.indexOf(uri, stringIndex + 1);
            rex.lastIndex = stringIndex + uri.length;
            if (stringIndex < 0) {
                return "break";
            }
            var bufferIndex = this_1._bufferService.buffer.stringIndexToBufferIndex(rowIndex, stringIndex);
            if (bufferIndex[0] < 0) {
                return "break";
            }
            var line = this_1._bufferService.buffer.lines.get(bufferIndex[0]);
            if (!line) {
                return "break";
            }
            var attr = line.getFg(bufferIndex[1]);
            var fg = attr ? (attr >> 9) & 0x1ff : undefined;
            if (matcher.validationCallback) {
                matcher.validationCallback(uri, function (isValid) {
                    if (_this._rowsTimeoutId) {
                        return;
                    }
                    if (isValid) {
                        _this._addLink(bufferIndex[1], bufferIndex[0] - _this._bufferService.buffer.ydisp, uri, matcher, fg);
                    }
                });
            }
            else {
                this_1._addLink(bufferIndex[1], bufferIndex[0] - this_1._bufferService.buffer.ydisp, uri, matcher, fg);
            }
        };
        var this_1 = this;
        while ((match = rex.exec(text)) !== null) {
            var state_1 = _loop_1();
            if (state_1 === "break")
                break;
        }
    };
    Linkifier.prototype._addLink = function (x, y, uri, matcher, fg) {
        var _this = this;
        if (!this._mouseZoneManager || !this._element) {
            return;
        }
        var width = CharWidth_1.getStringCellWidth(uri);
        var x1 = x % this._bufferService.cols;
        var y1 = y + Math.floor(x / this._bufferService.cols);
        var x2 = (x1 + width) % this._bufferService.cols;
        var y2 = y1 + Math.floor((x1 + width) / this._bufferService.cols);
        if (x2 === 0) {
            x2 = this._bufferService.cols;
            y2--;
        }
        this._mouseZoneManager.add(new MouseZone(x1 + 1, y1 + 1, x2 + 1, y2 + 1, function (e) {
            if (matcher.handler) {
                return matcher.handler(e, uri);
            }
            window.open(uri, '_blank');
        }, function () {
            _this._onLinkHover.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));
            _this._element.classList.add('xterm-cursor-pointer');
        }, function (e) {
            _this._onLinkTooltip.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));
            if (matcher.hoverTooltipCallback) {
                matcher.hoverTooltipCallback(e, uri, { start: { x: x1, y: y1 }, end: { x: x2, y: y2 } });
            }
        }, function () {
            _this._onLinkLeave.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));
            _this._element.classList.remove('xterm-cursor-pointer');
            if (matcher.hoverLeaveCallback) {
                matcher.hoverLeaveCallback();
            }
        }, function (e) {
            if (matcher.willLinkActivate) {
                return matcher.willLinkActivate(e, uri);
            }
            return true;
        }));
    };
    Linkifier.prototype._createLinkHoverEvent = function (x1, y1, x2, y2, fg) {
        return { x1: x1, y1: y1, x2: x2, y2: y2, cols: this._bufferService.cols, fg: fg };
    };
    Linkifier._timeBeforeLatency = 200;
    return Linkifier;
}());
exports.Linkifier = Linkifier;
var MouseZone = (function () {
    function MouseZone(x1, y1, x2, y2, clickCallback, hoverCallback, tooltipCallback, leaveCallback, willLinkActivate) {
        this.x1 = x1;
        this.y1 = y1;
        this.x2 = x2;
        this.y2 = y2;
        this.clickCallback = clickCallback;
        this.hoverCallback = hoverCallback;
        this.tooltipCallback = tooltipCallback;
        this.leaveCallback = leaveCallback;
        this.willLinkActivate = willLinkActivate;
    }
    return MouseZone;
}());
exports.MouseZone = MouseZone;


/***/ }),

/***/ "./out/browser/LocalizableStrings.js":
/*!*******************************************!*\
  !*** ./out/browser/LocalizableStrings.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.promptLabel = 'Terminal input';
exports.tooMuchOutput = 'Too much output to announce, navigate to rows manually to read';


/***/ }),

/***/ "./out/browser/MouseZoneManager.js":
/*!*****************************************!*\
  !*** ./out/browser/MouseZoneManager.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Lifecycle_2 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var HOVER_DURATION = 500;
var MouseZoneManager = (function (_super) {
    __extends(MouseZoneManager, _super);
    function MouseZoneManager(_element, _screenElement, _bufferService, _mouseService, _selectionService) {
        var _this = _super.call(this) || this;
        _this._element = _element;
        _this._screenElement = _screenElement;
        _this._bufferService = _bufferService;
        _this._mouseService = _mouseService;
        _this._selectionService = _selectionService;
        _this._zones = [];
        _this._areZonesActive = false;
        _this._lastHoverCoords = [undefined, undefined];
        _this._initialSelectionLength = 0;
        _this.register(Lifecycle_2.addDisposableDomListener(_this._element, 'mousedown', function (e) { return _this._onMouseDown(e); }));
        _this._mouseMoveListener = function (e) { return _this._onMouseMove(e); };
        _this._mouseLeaveListener = function (e) { return _this._onMouseLeave(e); };
        _this._clickListener = function (e) { return _this._onClick(e); };
        return _this;
    }
    MouseZoneManager.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this._deactivate();
    };
    MouseZoneManager.prototype.add = function (zone) {
        this._zones.push(zone);
        if (this._zones.length === 1) {
            this._activate();
        }
    };
    MouseZoneManager.prototype.clearAll = function (start, end) {
        if (this._zones.length === 0) {
            return;
        }
        if (!start || !end) {
            start = 0;
            end = this._bufferService.rows - 1;
        }
        for (var i = 0; i < this._zones.length; i++) {
            var zone = this._zones[i];
            if ((zone.y1 > start && zone.y1 <= end + 1) ||
                (zone.y2 > start && zone.y2 <= end + 1) ||
                (zone.y1 < start && zone.y2 > end + 1)) {
                if (this._currentZone && this._currentZone === zone) {
                    this._currentZone.leaveCallback();
                    this._currentZone = undefined;
                }
                this._zones.splice(i--, 1);
            }
        }
        if (this._zones.length === 0) {
            this._deactivate();
        }
    };
    MouseZoneManager.prototype._activate = function () {
        if (!this._areZonesActive) {
            this._areZonesActive = true;
            this._element.addEventListener('mousemove', this._mouseMoveListener);
            this._element.addEventListener('mouseleave', this._mouseLeaveListener);
            this._element.addEventListener('click', this._clickListener);
        }
    };
    MouseZoneManager.prototype._deactivate = function () {
        if (this._areZonesActive) {
            this._areZonesActive = false;
            this._element.removeEventListener('mousemove', this._mouseMoveListener);
            this._element.removeEventListener('mouseleave', this._mouseLeaveListener);
            this._element.removeEventListener('click', this._clickListener);
        }
    };
    MouseZoneManager.prototype._onMouseMove = function (e) {
        if (this._lastHoverCoords[0] !== e.pageX || this._lastHoverCoords[1] !== e.pageY) {
            this._onHover(e);
            this._lastHoverCoords = [e.pageX, e.pageY];
        }
    };
    MouseZoneManager.prototype._onHover = function (e) {
        var _this = this;
        var zone = this._findZoneEventAt(e);
        if (zone === this._currentZone) {
            return;
        }
        if (this._currentZone) {
            this._currentZone.leaveCallback();
            this._currentZone = undefined;
            if (this._tooltipTimeout) {
                clearTimeout(this._tooltipTimeout);
            }
        }
        if (!zone) {
            return;
        }
        this._currentZone = zone;
        if (zone.hoverCallback) {
            zone.hoverCallback(e);
        }
        this._tooltipTimeout = setTimeout(function () { return _this._onTooltip(e); }, HOVER_DURATION);
    };
    MouseZoneManager.prototype._onTooltip = function (e) {
        this._tooltipTimeout = undefined;
        var zone = this._findZoneEventAt(e);
        if (zone && zone.tooltipCallback) {
            zone.tooltipCallback(e);
        }
    };
    MouseZoneManager.prototype._onMouseDown = function (e) {
        var _a;
        this._initialSelectionLength = this._getSelectionLength();
        if (!this._areZonesActive) {
            return;
        }
        var zone = this._findZoneEventAt(e);
        if ((_a = zone) === null || _a === void 0 ? void 0 : _a.willLinkActivate(e)) {
            e.preventDefault();
            e.stopImmediatePropagation();
        }
    };
    MouseZoneManager.prototype._onMouseLeave = function (e) {
        if (this._currentZone) {
            this._currentZone.leaveCallback();
            this._currentZone = undefined;
            if (this._tooltipTimeout) {
                clearTimeout(this._tooltipTimeout);
            }
        }
    };
    MouseZoneManager.prototype._onClick = function (e) {
        var zone = this._findZoneEventAt(e);
        var currentSelectionLength = this._getSelectionLength();
        if (zone && currentSelectionLength === this._initialSelectionLength) {
            zone.clickCallback(e);
            e.preventDefault();
            e.stopImmediatePropagation();
        }
    };
    MouseZoneManager.prototype._getSelectionLength = function () {
        var selectionText = this._selectionService.selectionText;
        return selectionText ? selectionText.length : 0;
    };
    MouseZoneManager.prototype._findZoneEventAt = function (e) {
        var coords = this._mouseService.getCoords(e, this._screenElement, this._bufferService.cols, this._bufferService.rows);
        if (!coords) {
            return undefined;
        }
        var x = coords[0];
        var y = coords[1];
        for (var i = 0; i < this._zones.length; i++) {
            var zone = this._zones[i];
            if (zone.y1 === zone.y2) {
                if (y === zone.y1 && x >= zone.x1 && x < zone.x2) {
                    return zone;
                }
            }
            else {
                if ((y === zone.y1 && x >= zone.x1) ||
                    (y === zone.y2 && x < zone.x2) ||
                    (y > zone.y1 && y < zone.y2)) {
                    return zone;
                }
            }
        }
        return undefined;
    };
    MouseZoneManager = __decorate([
        __param(2, Services_2.IBufferService),
        __param(3, Services_1.IMouseService),
        __param(4, Services_1.ISelectionService)
    ], MouseZoneManager);
    return MouseZoneManager;
}(Lifecycle_1.Disposable));
exports.MouseZoneManager = MouseZoneManager;


/***/ }),

/***/ "./out/browser/RenderDebouncer.js":
/*!****************************************!*\
  !*** ./out/browser/RenderDebouncer.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var RenderDebouncer = (function () {
    function RenderDebouncer(_renderCallback) {
        this._renderCallback = _renderCallback;
    }
    RenderDebouncer.prototype.dispose = function () {
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    RenderDebouncer.prototype.refresh = function (rowStart, rowEnd, rowCount) {
        var _this = this;
        this._rowCount = rowCount;
        rowStart = rowStart !== undefined ? rowStart : 0;
        rowEnd = rowEnd !== undefined ? rowEnd : this._rowCount - 1;
        this._rowStart = this._rowStart !== undefined ? Math.min(this._rowStart, rowStart) : rowStart;
        this._rowEnd = this._rowEnd !== undefined ? Math.max(this._rowEnd, rowEnd) : rowEnd;
        if (this._animationFrame) {
            return;
        }
        this._animationFrame = window.requestAnimationFrame(function () { return _this._innerRefresh(); });
    };
    RenderDebouncer.prototype._innerRefresh = function () {
        if (this._rowStart === undefined || this._rowEnd === undefined || this._rowCount === undefined) {
            return;
        }
        this._rowStart = Math.max(this._rowStart, 0);
        this._rowEnd = Math.min(this._rowEnd, this._rowCount - 1);
        this._renderCallback(this._rowStart, this._rowEnd);
        this._rowStart = undefined;
        this._rowEnd = undefined;
        this._animationFrame = undefined;
    };
    return RenderDebouncer;
}());
exports.RenderDebouncer = RenderDebouncer;


/***/ }),

/***/ "./out/browser/ScreenDprMonitor.js":
/*!*****************************************!*\
  !*** ./out/browser/ScreenDprMonitor.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var ScreenDprMonitor = (function (_super) {
    __extends(ScreenDprMonitor, _super);
    function ScreenDprMonitor() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._currentDevicePixelRatio = window.devicePixelRatio;
        return _this;
    }
    ScreenDprMonitor.prototype.setListener = function (listener) {
        var _this = this;
        if (this._listener) {
            this.clearListener();
        }
        this._listener = listener;
        this._outerListener = function () {
            if (!_this._listener) {
                return;
            }
            _this._listener(window.devicePixelRatio, _this._currentDevicePixelRatio);
            _this._updateDpr();
        };
        this._updateDpr();
    };
    ScreenDprMonitor.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this.clearListener();
    };
    ScreenDprMonitor.prototype._updateDpr = function () {
        if (!this._resolutionMediaMatchList || !this._outerListener) {
            return;
        }
        this._resolutionMediaMatchList.removeListener(this._outerListener);
        this._currentDevicePixelRatio = window.devicePixelRatio;
        this._resolutionMediaMatchList = window.matchMedia("screen and (resolution: " + window.devicePixelRatio + "dppx)");
        this._resolutionMediaMatchList.addListener(this._outerListener);
    };
    ScreenDprMonitor.prototype.clearListener = function () {
        if (!this._resolutionMediaMatchList || !this._listener || !this._outerListener) {
            return;
        }
        this._resolutionMediaMatchList.removeListener(this._outerListener);
        this._resolutionMediaMatchList = undefined;
        this._listener = undefined;
        this._outerListener = undefined;
    };
    return ScreenDprMonitor;
}(Lifecycle_1.Disposable));
exports.ScreenDprMonitor = ScreenDprMonitor;


/***/ }),

/***/ "./out/browser/Viewport.js":
/*!*********************************!*\
  !*** ./out/browser/Viewport.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Lifecycle_2 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var FALLBACK_SCROLL_BAR_WIDTH = 15;
var Viewport = (function (_super) {
    __extends(Viewport, _super);
    function Viewport(_scrollLines, _viewportElement, _scrollArea, _bufferService, _optionsService, _charSizeService, _renderService) {
        var _this = _super.call(this) || this;
        _this._scrollLines = _scrollLines;
        _this._viewportElement = _viewportElement;
        _this._scrollArea = _scrollArea;
        _this._bufferService = _bufferService;
        _this._optionsService = _optionsService;
        _this._charSizeService = _charSizeService;
        _this._renderService = _renderService;
        _this.scrollBarWidth = 0;
        _this._currentRowHeight = 0;
        _this._lastRecordedBufferLength = 0;
        _this._lastRecordedViewportHeight = 0;
        _this._lastRecordedBufferHeight = 0;
        _this._lastTouchY = 0;
        _this._lastScrollTop = 0;
        _this._wheelPartialScroll = 0;
        _this._refreshAnimationFrame = null;
        _this._ignoreNextScrollEvent = false;
        _this.scrollBarWidth = (_this._viewportElement.offsetWidth - _this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;
        _this.register(Lifecycle_2.addDisposableDomListener(_this._viewportElement, 'scroll', _this._onScroll.bind(_this)));
        setTimeout(function () { return _this.syncScrollArea(); }, 0);
        return _this;
    }
    Viewport.prototype.onThemeChange = function (colors) {
        this._viewportElement.style.backgroundColor = colors.background.css;
    };
    Viewport.prototype._refresh = function (immediate) {
        var _this = this;
        if (immediate) {
            this._innerRefresh();
            if (this._refreshAnimationFrame !== null) {
                cancelAnimationFrame(this._refreshAnimationFrame);
            }
            return;
        }
        if (this._refreshAnimationFrame === null) {
            this._refreshAnimationFrame = requestAnimationFrame(function () { return _this._innerRefresh(); });
        }
    };
    Viewport.prototype._innerRefresh = function () {
        if (this._charSizeService.height > 0) {
            this._currentRowHeight = this._renderService.dimensions.scaledCellHeight / window.devicePixelRatio;
            this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;
            var newBufferHeight = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._renderService.dimensions.canvasHeight);
            if (this._lastRecordedBufferHeight !== newBufferHeight) {
                this._lastRecordedBufferHeight = newBufferHeight;
                this._scrollArea.style.height = this._lastRecordedBufferHeight + 'px';
            }
        }
        var scrollTop = this._bufferService.buffer.ydisp * this._currentRowHeight;
        if (this._viewportElement.scrollTop !== scrollTop) {
            this._ignoreNextScrollEvent = true;
            this._viewportElement.scrollTop = scrollTop;
        }
        this._refreshAnimationFrame = null;
    };
    Viewport.prototype.syncScrollArea = function (immediate) {
        if (immediate === void 0) { immediate = false; }
        if (this._lastRecordedBufferLength !== this._bufferService.buffer.lines.length) {
            this._lastRecordedBufferLength = this._bufferService.buffer.lines.length;
            this._refresh(immediate);
            return;
        }
        if (this._lastRecordedViewportHeight !== this._renderService.dimensions.canvasHeight) {
            this._refresh(immediate);
            return;
        }
        var newScrollTop = this._bufferService.buffer.ydisp * this._currentRowHeight;
        if (this._lastScrollTop !== newScrollTop) {
            this._refresh(immediate);
            return;
        }
        if (this._lastScrollTop !== this._viewportElement.scrollTop) {
            this._refresh(immediate);
            return;
        }
        if (this._renderService.dimensions.scaledCellHeight / window.devicePixelRatio !== this._currentRowHeight) {
            this._refresh(immediate);
            return;
        }
    };
    Viewport.prototype._onScroll = function (ev) {
        this._lastScrollTop = this._viewportElement.scrollTop;
        if (!this._viewportElement.offsetParent) {
            return;
        }
        if (this._ignoreNextScrollEvent) {
            this._ignoreNextScrollEvent = false;
            return;
        }
        var newRow = Math.round(this._lastScrollTop / this._currentRowHeight);
        var diff = newRow - this._bufferService.buffer.ydisp;
        this._scrollLines(diff, true);
    };
    Viewport.prototype._bubbleScroll = function (ev, amount) {
        var scrollPosFromTop = this._viewportElement.scrollTop + this._lastRecordedViewportHeight;
        if ((amount < 0 && this._viewportElement.scrollTop !== 0) ||
            (amount > 0 && scrollPosFromTop < this._lastRecordedBufferHeight)) {
            if (ev.cancelable) {
                ev.preventDefault();
            }
            return false;
        }
        return true;
    };
    Viewport.prototype.onWheel = function (ev) {
        var amount = this._getPixelsScrolled(ev);
        if (amount === 0) {
            return false;
        }
        this._viewportElement.scrollTop += amount;
        return this._bubbleScroll(ev, amount);
    };
    Viewport.prototype._getPixelsScrolled = function (ev) {
        if (ev.deltaY === 0) {
            return 0;
        }
        var amount = this._applyScrollModifier(ev.deltaY, ev);
        if (ev.deltaMode === WheelEvent.DOM_DELTA_LINE) {
            amount *= this._currentRowHeight;
        }
        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {
            amount *= this._currentRowHeight * this._bufferService.rows;
        }
        return amount;
    };
    Viewport.prototype.getLinesScrolled = function (ev) {
        if (ev.deltaY === 0) {
            return 0;
        }
        var amount = this._applyScrollModifier(ev.deltaY, ev);
        if (ev.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {
            amount /= this._currentRowHeight + 0.0;
            this._wheelPartialScroll += amount;
            amount = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1);
            this._wheelPartialScroll %= 1;
        }
        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {
            amount *= this._bufferService.rows;
        }
        return amount;
    };
    Viewport.prototype._applyScrollModifier = function (amount, ev) {
        var modifier = this._optionsService.options.fastScrollModifier;
        if ((modifier === 'alt' && ev.altKey) ||
            (modifier === 'ctrl' && ev.ctrlKey) ||
            (modifier === 'shift' && ev.shiftKey)) {
            return amount * this._optionsService.options.fastScrollSensitivity * this._optionsService.options.scrollSensitivity;
        }
        return amount * this._optionsService.options.scrollSensitivity;
    };
    Viewport.prototype.onTouchStart = function (ev) {
        this._lastTouchY = ev.touches[0].pageY;
    };
    Viewport.prototype.onTouchMove = function (ev) {
        var deltaY = this._lastTouchY - ev.touches[0].pageY;
        this._lastTouchY = ev.touches[0].pageY;
        if (deltaY === 0) {
            return false;
        }
        this._viewportElement.scrollTop += deltaY;
        return this._bubbleScroll(ev, deltaY);
    };
    Viewport = __decorate([
        __param(3, Services_2.IBufferService),
        __param(4, Services_2.IOptionsService),
        __param(5, Services_1.ICharSizeService),
        __param(6, Services_1.IRenderService)
    ], Viewport);
    return Viewport;
}(Lifecycle_1.Disposable));
exports.Viewport = Viewport;


/***/ }),

/***/ "./out/browser/input/CompositionHelper.js":
/*!************************************************!*\
  !*** ./out/browser/input/CompositionHelper.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var CompositionHelper = (function () {
    function CompositionHelper(_textarea, _compositionView, _bufferService, _optionsService, _charSizeService, _coreService) {
        this._textarea = _textarea;
        this._compositionView = _compositionView;
        this._bufferService = _bufferService;
        this._optionsService = _optionsService;
        this._charSizeService = _charSizeService;
        this._coreService = _coreService;
        this._isComposing = false;
        this._isSendingComposition = false;
        this._compositionPosition = { start: 0, end: 0 };
    }
    CompositionHelper.prototype.compositionstart = function () {
        this._isComposing = true;
        this._compositionPosition.start = this._textarea.value.length;
        this._compositionView.textContent = '';
        this._compositionView.classList.add('active');
    };
    CompositionHelper.prototype.compositionupdate = function (ev) {
        var _this = this;
        this._compositionView.textContent = ev.data;
        this.updateCompositionElements();
        setTimeout(function () {
            _this._compositionPosition.end = _this._textarea.value.length;
        }, 0);
    };
    CompositionHelper.prototype.compositionend = function () {
        this._finalizeComposition(true);
    };
    CompositionHelper.prototype.keydown = function (ev) {
        if (this._isComposing || this._isSendingComposition) {
            if (ev.keyCode === 229) {
                return false;
            }
            else if (ev.keyCode === 16 || ev.keyCode === 17 || ev.keyCode === 18) {
                return false;
            }
            this._finalizeComposition(false);
        }
        if (ev.keyCode === 229) {
            this._handleAnyTextareaChanges();
            return false;
        }
        return true;
    };
    CompositionHelper.prototype._finalizeComposition = function (waitForPropagation) {
        var _this = this;
        this._compositionView.classList.remove('active');
        this._isComposing = false;
        this._clearTextareaPosition();
        if (!waitForPropagation) {
            this._isSendingComposition = false;
            var input = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);
            this._coreService.triggerDataEvent(input, true);
        }
        else {
            var currentCompositionPosition_1 = {
                start: this._compositionPosition.start,
                end: this._compositionPosition.end
            };
            this._isSendingComposition = true;
            setTimeout(function () {
                if (_this._isSendingComposition) {
                    _this._isSendingComposition = false;
                    var input = void 0;
                    if (_this._isComposing) {
                        input = _this._textarea.value.substring(currentCompositionPosition_1.start, currentCompositionPosition_1.end);
                    }
                    else {
                        input = _this._textarea.value.substring(currentCompositionPosition_1.start);
                    }
                    _this._coreService.triggerDataEvent(input, true);
                }
            }, 0);
        }
    };
    CompositionHelper.prototype._handleAnyTextareaChanges = function () {
        var _this = this;
        var oldValue = this._textarea.value;
        setTimeout(function () {
            if (!_this._isComposing) {
                var newValue = _this._textarea.value;
                var diff = newValue.replace(oldValue, '');
                if (diff.length > 0) {
                    _this._coreService.triggerDataEvent(diff, true);
                }
            }
        }, 0);
    };
    CompositionHelper.prototype.updateCompositionElements = function (dontRecurse) {
        var _this = this;
        if (!this._isComposing) {
            return;
        }
        if (this._bufferService.buffer.isCursorInViewport) {
            var cellHeight = Math.ceil(this._charSizeService.height * this._optionsService.options.lineHeight);
            var cursorTop = this._bufferService.buffer.y * cellHeight;
            var cursorLeft = this._bufferService.buffer.x * this._charSizeService.width;
            this._compositionView.style.left = cursorLeft + 'px';
            this._compositionView.style.top = cursorTop + 'px';
            this._compositionView.style.height = cellHeight + 'px';
            this._compositionView.style.lineHeight = cellHeight + 'px';
            this._compositionView.style.fontFamily = this._optionsService.options.fontFamily;
            this._compositionView.style.fontSize = this._optionsService.options.fontSize + 'px';
            var compositionViewBounds = this._compositionView.getBoundingClientRect();
            this._textarea.style.left = cursorLeft + 'px';
            this._textarea.style.top = cursorTop + 'px';
            this._textarea.style.width = compositionViewBounds.width + 'px';
            this._textarea.style.height = compositionViewBounds.height + 'px';
            this._textarea.style.lineHeight = compositionViewBounds.height + 'px';
        }
        if (!dontRecurse) {
            setTimeout(function () { return _this.updateCompositionElements(true); }, 0);
        }
    };
    CompositionHelper.prototype._clearTextareaPosition = function () {
        this._textarea.style.left = '';
        this._textarea.style.top = '';
    };
    CompositionHelper = __decorate([
        __param(2, Services_2.IBufferService),
        __param(3, Services_2.IOptionsService),
        __param(4, Services_1.ICharSizeService),
        __param(5, Services_2.ICoreService)
    ], CompositionHelper);
    return CompositionHelper;
}());
exports.CompositionHelper = CompositionHelper;


/***/ }),

/***/ "./out/browser/input/Mouse.js":
/*!************************************!*\
  !*** ./out/browser/input/Mouse.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function getCoordsRelativeToElement(event, element) {
    var rect = element.getBoundingClientRect();
    return [event.clientX - rect.left, event.clientY - rect.top];
}
exports.getCoordsRelativeToElement = getCoordsRelativeToElement;
function getCoords(event, element, colCount, rowCount, hasValidCharSize, actualCellWidth, actualCellHeight, isSelection) {
    if (!hasValidCharSize) {
        return undefined;
    }
    var coords = getCoordsRelativeToElement(event, element);
    if (!coords) {
        return undefined;
    }
    coords[0] = Math.ceil((coords[0] + (isSelection ? actualCellWidth / 2 : 0)) / actualCellWidth);
    coords[1] = Math.ceil(coords[1] / actualCellHeight);
    coords[0] = Math.min(Math.max(coords[0], 1), colCount + (isSelection ? 1 : 0));
    coords[1] = Math.min(Math.max(coords[1], 1), rowCount);
    return coords;
}
exports.getCoords = getCoords;
function getRawByteCoords(coords) {
    if (!coords) {
        return undefined;
    }
    return { x: coords[0] + 32, y: coords[1] + 32 };
}
exports.getRawByteCoords = getRawByteCoords;


/***/ }),

/***/ "./out/browser/input/MoveToCell.js":
/*!*****************************************!*\
  !*** ./out/browser/input/MoveToCell.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EscapeSequences_1 = __webpack_require__(/*! common/data/EscapeSequences */ "./out/common/data/EscapeSequences.js");
function moveToCellSequence(targetX, targetY, bufferService, applicationCursor) {
    var startX = bufferService.buffer.x;
    var startY = bufferService.buffer.y;
    if (!bufferService.buffer.hasScrollback) {
        return resetStartingRow(startX, startY, targetX, targetY, bufferService, applicationCursor) +
            moveToRequestedRow(startY, targetY, bufferService, applicationCursor) +
            moveToRequestedCol(startX, startY, targetX, targetY, bufferService, applicationCursor);
    }
    return moveHorizontallyOnly(startX, startY, targetX, targetY, bufferService, applicationCursor);
}
exports.moveToCellSequence = moveToCellSequence;
function resetStartingRow(startX, startY, targetX, targetY, bufferService, applicationCursor) {
    if (moveToRequestedRow(startY, targetY, bufferService, applicationCursor).length === 0) {
        return '';
    }
    return repeat(bufferLine(startX, startY, startX, startY - wrappedRowsForRow(bufferService, startY), false, bufferService).length, sequence("D", applicationCursor));
}
function moveToRequestedRow(startY, targetY, bufferService, applicationCursor) {
    var startRow = startY - wrappedRowsForRow(bufferService, startY);
    var endRow = targetY - wrappedRowsForRow(bufferService, targetY);
    var rowsToMove = Math.abs(startRow - endRow) - wrappedRowsCount(startY, targetY, bufferService);
    return repeat(rowsToMove, sequence(verticalDirection(startY, targetY), applicationCursor));
}
function moveToRequestedCol(startX, startY, targetX, targetY, bufferService, applicationCursor) {
    var startRow;
    if (moveToRequestedRow(startY, targetY, bufferService, applicationCursor).length > 0) {
        startRow = targetY - wrappedRowsForRow(bufferService, targetY);
    }
    else {
        startRow = startY;
    }
    var endRow = targetY;
    var direction = horizontalDirection(startX, startY, targetX, targetY, bufferService, applicationCursor);
    return repeat(bufferLine(startX, startRow, targetX, endRow, direction === "C", bufferService).length, sequence(direction, applicationCursor));
}
function moveHorizontallyOnly(startX, startY, targetX, targetY, bufferService, applicationCursor) {
    var direction = horizontalDirection(startX, startY, targetX, targetY, bufferService, applicationCursor);
    return repeat(Math.abs(startX - targetX), sequence(direction, applicationCursor));
}
function wrappedRowsCount(startY, targetY, bufferService) {
    var wrappedRows = 0;
    var startRow = startY - wrappedRowsForRow(bufferService, startY);
    var endRow = targetY - wrappedRowsForRow(bufferService, targetY);
    for (var i = 0; i < Math.abs(startRow - endRow); i++) {
        var direction = verticalDirection(startY, targetY) === "A" ? -1 : 1;
        var line = bufferService.buffer.lines.get(startRow + (direction * i));
        if (line && line.isWrapped) {
            wrappedRows++;
        }
    }
    return wrappedRows;
}
function wrappedRowsForRow(bufferService, currentRow) {
    var rowCount = 0;
    var line = bufferService.buffer.lines.get(currentRow);
    var lineWraps = line && line.isWrapped;
    while (lineWraps && currentRow >= 0 && currentRow < bufferService.rows) {
        rowCount++;
        line = bufferService.buffer.lines.get(--currentRow);
        lineWraps = line && line.isWrapped;
    }
    return rowCount;
}
function horizontalDirection(startX, startY, targetX, targetY, bufferService, applicationCursor) {
    var startRow;
    if (moveToRequestedRow(targetX, targetY, bufferService, applicationCursor).length > 0) {
        startRow = targetY - wrappedRowsForRow(bufferService, targetY);
    }
    else {
        startRow = startY;
    }
    if ((startX < targetX &&
        startRow <= targetY) ||
        (startX >= targetX &&
            startRow < targetY)) {
        return "C";
    }
    return "D";
}
function verticalDirection(startY, targetY) {
    return startY > targetY ? "A" : "B";
}
function bufferLine(startCol, startRow, endCol, endRow, forward, bufferService) {
    var currentCol = startCol;
    var currentRow = startRow;
    var bufferStr = '';
    while (currentCol !== endCol || currentRow !== endRow) {
        currentCol += forward ? 1 : -1;
        if (forward && currentCol > bufferService.cols - 1) {
            bufferStr += bufferService.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);
            currentCol = 0;
            startCol = 0;
            currentRow++;
        }
        else if (!forward && currentCol < 0) {
            bufferStr += bufferService.buffer.translateBufferLineToString(currentRow, false, 0, startCol + 1);
            currentCol = bufferService.cols - 1;
            startCol = currentCol;
            currentRow--;
        }
    }
    return bufferStr + bufferService.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);
}
function sequence(direction, applicationCursor) {
    var mod = applicationCursor ? 'O' : '[';
    return EscapeSequences_1.C0.ESC + mod + direction;
}
function repeat(count, str) {
    count = Math.floor(count);
    var rpt = '';
    for (var i = 0; i < count; i++) {
        rpt += str;
    }
    return rpt;
}


/***/ }),

/***/ "./out/browser/renderer/BaseRenderLayer.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/BaseRenderLayer.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var Constants_2 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var CharAtlasCache_1 = __webpack_require__(/*! browser/renderer/atlas/CharAtlasCache */ "./out/browser/renderer/atlas/CharAtlasCache.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var RendererUtils_1 = __webpack_require__(/*! browser/renderer/RendererUtils */ "./out/browser/renderer/RendererUtils.js");
var Color_1 = __webpack_require__(/*! browser/Color */ "./out/browser/Color.js");
var BaseRenderLayer = (function () {
    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors, _rendererId, _bufferService, _optionsService) {
        this._container = _container;
        this._alpha = _alpha;
        this._colors = _colors;
        this._rendererId = _rendererId;
        this._bufferService = _bufferService;
        this._optionsService = _optionsService;
        this._scaledCharWidth = 0;
        this._scaledCharHeight = 0;
        this._scaledCellWidth = 0;
        this._scaledCellHeight = 0;
        this._scaledCharLeft = 0;
        this._scaledCharTop = 0;
        this._currentGlyphIdentifier = {
            chars: '',
            code: 0,
            bg: 0,
            fg: 0,
            bold: false,
            dim: false,
            italic: false
        };
        this._canvas = document.createElement('canvas');
        this._canvas.classList.add("xterm-" + id + "-layer");
        this._canvas.style.zIndex = zIndex.toString();
        this._initCanvas();
        this._container.appendChild(this._canvas);
    }
    BaseRenderLayer.prototype.dispose = function () {
        var _a;
        this._container.removeChild(this._canvas);
        (_a = this._charAtlas) === null || _a === void 0 ? void 0 : _a.dispose();
    };
    BaseRenderLayer.prototype._initCanvas = function () {
        this._ctx = RendererUtils_1.throwIfFalsy(this._canvas.getContext('2d', { alpha: this._alpha }));
        if (!this._alpha) {
            this._clearAll();
        }
    };
    BaseRenderLayer.prototype.onOptionsChanged = function () { };
    BaseRenderLayer.prototype.onBlur = function () { };
    BaseRenderLayer.prototype.onFocus = function () { };
    BaseRenderLayer.prototype.onCursorMove = function () { };
    BaseRenderLayer.prototype.onGridChanged = function (startRow, endRow) { };
    BaseRenderLayer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        if (columnSelectMode === void 0) { columnSelectMode = false; }
    };
    BaseRenderLayer.prototype.setColors = function (colorSet) {
        this._refreshCharAtlas(colorSet);
    };
    BaseRenderLayer.prototype._setTransparency = function (alpha) {
        if (alpha === this._alpha) {
            return;
        }
        var oldCanvas = this._canvas;
        this._alpha = alpha;
        this._canvas = this._canvas.cloneNode();
        this._initCanvas();
        this._container.replaceChild(this._canvas, oldCanvas);
        this._refreshCharAtlas(this._colors);
        this.onGridChanged(0, this._bufferService.rows - 1);
    };
    BaseRenderLayer.prototype._refreshCharAtlas = function (colorSet) {
        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {
            return;
        }
        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(this._optionsService.options, this._rendererId, colorSet, this._scaledCharWidth, this._scaledCharHeight);
        this._charAtlas.warmUp();
    };
    BaseRenderLayer.prototype.resize = function (dim) {
        this._scaledCellWidth = dim.scaledCellWidth;
        this._scaledCellHeight = dim.scaledCellHeight;
        this._scaledCharWidth = dim.scaledCharWidth;
        this._scaledCharHeight = dim.scaledCharHeight;
        this._scaledCharLeft = dim.scaledCharLeft;
        this._scaledCharTop = dim.scaledCharTop;
        this._canvas.width = dim.scaledCanvasWidth;
        this._canvas.height = dim.scaledCanvasHeight;
        this._canvas.style.width = dim.canvasWidth + "px";
        this._canvas.style.height = dim.canvasHeight + "px";
        if (!this._alpha) {
            this._clearAll();
        }
        this._refreshCharAtlas(this._colors);
    };
    BaseRenderLayer.prototype._fillCells = function (x, y, width, height) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
    };
    BaseRenderLayer.prototype._fillBottomLineAtCells = function (x, y, width) {
        if (width === void 0) { width = 1; }
        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);
    };
    BaseRenderLayer.prototype._fillLeftLineAtCell = function (x, y, width) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio * width, this._scaledCellHeight);
    };
    BaseRenderLayer.prototype._strokeRectAtCell = function (x, y, width, height) {
        this._ctx.lineWidth = window.devicePixelRatio;
        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);
    };
    BaseRenderLayer.prototype._clearAll = function () {
        if (this._alpha) {
            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);
        }
    };
    BaseRenderLayer.prototype._clearCells = function (x, y, width, height) {
        if (this._alpha) {
            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
    };
    BaseRenderLayer.prototype._fillCharTrueColor = function (cell, x, y) {
        this._ctx.font = this._getFont(false, false);
        this._ctx.textBaseline = 'middle';
        this._clipRow(y);
        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);
    };
    BaseRenderLayer.prototype._drawChars = function (cell, x, y) {
        var contrastColor = this._getContrastColor(cell);
        if (contrastColor || cell.isFgRGB() || cell.isBgRGB()) {
            this._drawUncachedChars(cell, x, y, contrastColor);
            return;
        }
        var fg;
        var bg;
        if (cell.isInverse()) {
            fg = (cell.isBgDefault()) ? Constants_2.INVERTED_DEFAULT_COLOR : cell.getBgColor();
            bg = (cell.isFgDefault()) ? Constants_2.INVERTED_DEFAULT_COLOR : cell.getFgColor();
        }
        else {
            bg = (cell.isBgDefault()) ? Constants_1.DEFAULT_COLOR : cell.getBgColor();
            fg = (cell.isFgDefault()) ? Constants_1.DEFAULT_COLOR : cell.getFgColor();
        }
        var drawInBrightColor = this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8;
        fg += drawInBrightColor ? 8 : 0;
        this._currentGlyphIdentifier.chars = cell.getChars() || Constants_1.WHITESPACE_CELL_CHAR;
        this._currentGlyphIdentifier.code = cell.getCode() || Constants_1.WHITESPACE_CELL_CODE;
        this._currentGlyphIdentifier.bg = bg;
        this._currentGlyphIdentifier.fg = fg;
        this._currentGlyphIdentifier.bold = !!cell.isBold();
        this._currentGlyphIdentifier.dim = !!cell.isDim();
        this._currentGlyphIdentifier.italic = !!cell.isItalic();
        var atlasDidDraw = this._charAtlas && this._charAtlas.draw(this._ctx, this._currentGlyphIdentifier, x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);
        if (!atlasDidDraw) {
            this._drawUncachedChars(cell, x, y);
        }
    };
    BaseRenderLayer.prototype._drawUncachedChars = function (cell, x, y, fgOverride) {
        this._ctx.save();
        this._ctx.font = this._getFont(!!cell.isBold(), !!cell.isItalic());
        this._ctx.textBaseline = 'middle';
        if (cell.isInverse()) {
            if (fgOverride) {
                this._ctx.fillStyle = fgOverride.css;
            }
            else if (cell.isBgDefault()) {
                this._ctx.fillStyle = Color_1.color.opaque(this._colors.background).css;
            }
            else if (cell.isBgRGB()) {
                this._ctx.fillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + ")";
            }
            else {
                var bg = cell.getBgColor();
                if (this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && bg < 8) {
                    bg += 8;
                }
                this._ctx.fillStyle = this._colors.ansi[bg].css;
            }
        }
        else {
            if (fgOverride) {
                this._ctx.fillStyle = fgOverride.css;
            }
            else if (cell.isFgDefault()) {
                this._ctx.fillStyle = this._colors.foreground.css;
            }
            else if (cell.isFgRGB()) {
                this._ctx.fillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + ")";
            }
            else {
                var fg = cell.getFgColor();
                if (this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {
                    fg += 8;
                }
                this._ctx.fillStyle = this._colors.ansi[fg].css;
            }
        }
        this._clipRow(y);
        if (cell.isDim()) {
            this._ctx.globalAlpha = Constants_2.DIM_OPACITY;
        }
        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);
        this._ctx.restore();
    };
    BaseRenderLayer.prototype._clipRow = function (y) {
        this._ctx.beginPath();
        this._ctx.rect(0, y * this._scaledCellHeight, this._bufferService.cols * this._scaledCellWidth, this._scaledCellHeight);
        this._ctx.clip();
    };
    BaseRenderLayer.prototype._getFont = function (isBold, isItalic) {
        var fontWeight = isBold ? this._optionsService.options.fontWeightBold : this._optionsService.options.fontWeight;
        var fontStyle = isItalic ? 'italic' : '';
        return fontStyle + " " + fontWeight + " " + this._optionsService.options.fontSize * window.devicePixelRatio + "px " + this._optionsService.options.fontFamily;
    };
    BaseRenderLayer.prototype._getContrastColor = function (cell) {
        if (this._optionsService.options.minimumContrastRatio === 1) {
            return undefined;
        }
        var adjustedColor = this._colors.contrastCache.getColor(cell.bg, cell.fg);
        if (adjustedColor !== undefined) {
            return adjustedColor || undefined;
        }
        var fgColor = cell.getFgColor();
        var fgColorMode = cell.getFgColorMode();
        var bgColor = cell.getBgColor();
        var bgColorMode = cell.getBgColorMode();
        var isInverse = !!cell.isInverse();
        var isBold = !!cell.isInverse();
        if (isInverse) {
            var temp = fgColor;
            fgColor = bgColor;
            bgColor = temp;
            var temp2 = fgColorMode;
            fgColorMode = bgColorMode;
            bgColorMode = temp2;
        }
        var bgRgba = this._resolveBackgroundRgba(bgColorMode, bgColor, isInverse);
        var fgRgba = this._resolveForegroundRgba(fgColorMode, fgColor, isInverse, isBold);
        var result = Color_1.rgba.ensureContrastRatio(bgRgba, fgRgba, this._optionsService.options.minimumContrastRatio);
        if (!result) {
            this._colors.contrastCache.setColor(cell.bg, cell.fg, null);
            return undefined;
        }
        var color = {
            css: Color_1.channels.toCss((result >> 24) & 0xFF, (result >> 16) & 0xFF, (result >> 8) & 0xFF),
            rgba: result
        };
        this._colors.contrastCache.setColor(cell.bg, cell.fg, color);
        return color;
    };
    BaseRenderLayer.prototype._resolveBackgroundRgba = function (bgColorMode, bgColor, inverse) {
        switch (bgColorMode) {
            case 16777216:
            case 33554432:
                return this._colors.ansi[bgColor].rgba;
            case 50331648:
                return bgColor << 8;
            case 0:
            default:
                if (inverse) {
                    return this._colors.foreground.rgba;
                }
                return this._colors.background.rgba;
        }
    };
    BaseRenderLayer.prototype._resolveForegroundRgba = function (fgColorMode, fgColor, inverse, bold) {
        switch (fgColorMode) {
            case 16777216:
            case 33554432:
                if (this._optionsService.options.drawBoldTextInBrightColors && bold && fgColor < 8) {
                    fgColor += 8;
                }
                return this._colors.ansi[fgColor].rgba;
            case 50331648:
                return fgColor << 8;
            case 0:
            default:
                if (inverse) {
                    return this._colors.background.rgba;
                }
                return this._colors.foreground.rgba;
        }
    };
    return BaseRenderLayer;
}());
exports.BaseRenderLayer = BaseRenderLayer;


/***/ }),

/***/ "./out/browser/renderer/CharacterJoinerRegistry.js":
/*!*********************************************************!*\
  !*** ./out/browser/renderer/CharacterJoinerRegistry.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var JoinedCellData = (function (_super) {
    __extends(JoinedCellData, _super);
    function JoinedCellData(firstCell, chars, width) {
        var _this = _super.call(this) || this;
        _this.content = 0;
        _this.combinedData = '';
        _this.fg = firstCell.fg;
        _this.bg = firstCell.bg;
        _this.combinedData = chars;
        _this._width = width;
        return _this;
    }
    JoinedCellData.prototype.isCombined = function () {
        return 2097152;
    };
    JoinedCellData.prototype.getWidth = function () {
        return this._width;
    };
    JoinedCellData.prototype.getChars = function () {
        return this.combinedData;
    };
    JoinedCellData.prototype.getCode = function () {
        return 0x1FFFFF;
    };
    JoinedCellData.prototype.setFromCharData = function (value) {
        throw new Error('not implemented');
    };
    JoinedCellData.prototype.getAsCharData = function () {
        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];
    };
    return JoinedCellData;
}(AttributeData_1.AttributeData));
exports.JoinedCellData = JoinedCellData;
var CharacterJoinerRegistry = (function () {
    function CharacterJoinerRegistry(_bufferService) {
        this._bufferService = _bufferService;
        this._characterJoiners = [];
        this._nextCharacterJoinerId = 0;
        this._workCell = new CellData_1.CellData();
    }
    CharacterJoinerRegistry.prototype.registerCharacterJoiner = function (handler) {
        var joiner = {
            id: this._nextCharacterJoinerId++,
            handler: handler
        };
        this._characterJoiners.push(joiner);
        return joiner.id;
    };
    CharacterJoinerRegistry.prototype.deregisterCharacterJoiner = function (joinerId) {
        for (var i = 0; i < this._characterJoiners.length; i++) {
            if (this._characterJoiners[i].id === joinerId) {
                this._characterJoiners.splice(i, 1);
                return true;
            }
        }
        return false;
    };
    CharacterJoinerRegistry.prototype.getJoinedCharacters = function (row) {
        if (this._characterJoiners.length === 0) {
            return [];
        }
        var line = this._bufferService.buffer.lines.get(row);
        if (!line || line.length === 0) {
            return [];
        }
        var ranges = [];
        var lineStr = line.translateToString(true);
        var rangeStartColumn = 0;
        var currentStringIndex = 0;
        var rangeStartStringIndex = 0;
        var rangeAttrFG = line.getFg(0);
        var rangeAttrBG = line.getBg(0);
        for (var x = 0; x < line.getTrimmedLength(); x++) {
            line.loadCell(x, this._workCell);
            if (this._workCell.getWidth() === 0) {
                continue;
            }
            if (this._workCell.fg !== rangeAttrFG || this._workCell.bg !== rangeAttrBG) {
                if (x - rangeStartColumn > 1) {
                    var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);
                    for (var i = 0; i < joinedRanges.length; i++) {
                        ranges.push(joinedRanges[i]);
                    }
                }
                rangeStartColumn = x;
                rangeStartStringIndex = currentStringIndex;
                rangeAttrFG = this._workCell.fg;
                rangeAttrBG = this._workCell.bg;
            }
            currentStringIndex += this._workCell.getChars().length || Constants_1.WHITESPACE_CELL_CHAR.length;
        }
        if (this._bufferService.cols - rangeStartColumn > 1) {
            var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);
            for (var i = 0; i < joinedRanges.length; i++) {
                ranges.push(joinedRanges[i]);
            }
        }
        return ranges;
    };
    CharacterJoinerRegistry.prototype._getJoinedRanges = function (line, startIndex, endIndex, lineData, startCol) {
        var text = line.substring(startIndex, endIndex);
        var joinedRanges = this._characterJoiners[0].handler(text);
        for (var i = 1; i < this._characterJoiners.length; i++) {
            var joinerRanges = this._characterJoiners[i].handler(text);
            for (var j = 0; j < joinerRanges.length; j++) {
                CharacterJoinerRegistry._mergeRanges(joinedRanges, joinerRanges[j]);
            }
        }
        this._stringRangesToCellRanges(joinedRanges, lineData, startCol);
        return joinedRanges;
    };
    CharacterJoinerRegistry.prototype._stringRangesToCellRanges = function (ranges, line, startCol) {
        var currentRangeIndex = 0;
        var currentRangeStarted = false;
        var currentStringIndex = 0;
        var currentRange = ranges[currentRangeIndex];
        if (!currentRange) {
            return;
        }
        for (var x = startCol; x < this._bufferService.cols; x++) {
            var width = line.getWidth(x);
            var length_1 = line.getString(x).length || Constants_1.WHITESPACE_CELL_CHAR.length;
            if (width === 0) {
                continue;
            }
            if (!currentRangeStarted && currentRange[0] <= currentStringIndex) {
                currentRange[0] = x;
                currentRangeStarted = true;
            }
            if (currentRange[1] <= currentStringIndex) {
                currentRange[1] = x;
                currentRange = ranges[++currentRangeIndex];
                if (!currentRange) {
                    break;
                }
                if (currentRange[0] <= currentStringIndex) {
                    currentRange[0] = x;
                    currentRangeStarted = true;
                }
                else {
                    currentRangeStarted = false;
                }
            }
            currentStringIndex += length_1;
        }
        if (currentRange) {
            currentRange[1] = this._bufferService.cols;
        }
    };
    CharacterJoinerRegistry._mergeRanges = function (ranges, newRange) {
        var inRange = false;
        for (var i = 0; i < ranges.length; i++) {
            var range = ranges[i];
            if (!inRange) {
                if (newRange[1] <= range[0]) {
                    ranges.splice(i, 0, newRange);
                    return ranges;
                }
                if (newRange[1] <= range[1]) {
                    range[0] = Math.min(newRange[0], range[0]);
                    return ranges;
                }
                if (newRange[0] < range[1]) {
                    range[0] = Math.min(newRange[0], range[0]);
                    inRange = true;
                }
                continue;
            }
            else {
                if (newRange[1] <= range[0]) {
                    ranges[i - 1][1] = newRange[1];
                    return ranges;
                }
                if (newRange[1] <= range[1]) {
                    ranges[i - 1][1] = Math.max(newRange[1], range[1]);
                    ranges.splice(i, 1);
                    return ranges;
                }
                ranges.splice(i, 1);
                i--;
            }
        }
        if (inRange) {
            ranges[ranges.length - 1][1] = newRange[1];
        }
        else {
            ranges.push(newRange);
        }
        return ranges;
    };
    return CharacterJoinerRegistry;
}());
exports.CharacterJoinerRegistry = CharacterJoinerRegistry;


/***/ }),

/***/ "./out/browser/renderer/CursorRenderLayer.js":
/*!***************************************************!*\
  !*** ./out/browser/renderer/CursorRenderLayer.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseRenderLayer_1 = __webpack_require__(/*! browser/renderer/BaseRenderLayer */ "./out/browser/renderer/BaseRenderLayer.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var BLINK_INTERVAL = 600;
var CursorRenderLayer = (function (_super) {
    __extends(CursorRenderLayer, _super);
    function CursorRenderLayer(container, zIndex, colors, rendererId, _onRequestRefreshRowsEvent, bufferService, optionsService, _coreService, _coreBrowserService) {
        var _this = _super.call(this, container, 'cursor', zIndex, true, colors, rendererId, bufferService, optionsService) || this;
        _this._onRequestRefreshRowsEvent = _onRequestRefreshRowsEvent;
        _this.bufferService = bufferService;
        _this.optionsService = optionsService;
        _this._coreService = _coreService;
        _this._coreBrowserService = _coreBrowserService;
        _this._cell = new CellData_1.CellData();
        _this._state = {
            x: 0,
            y: 0,
            isFocused: false,
            style: '',
            width: 0
        };
        _this._cursorRenderers = {
            'bar': _this._renderBarCursor.bind(_this),
            'block': _this._renderBlockCursor.bind(_this),
            'underline': _this._renderUnderlineCursor.bind(_this)
        };
        return _this;
    }
    CursorRenderLayer.prototype.resize = function (dim) {
        _super.prototype.resize.call(this, dim);
        this._state = {
            x: 0,
            y: 0,
            isFocused: false,
            style: '',
            width: 0
        };
    };
    CursorRenderLayer.prototype.reset = function () {
        this._clearCursor();
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.dispose();
            this._cursorBlinkStateManager = undefined;
            this.onOptionsChanged();
        }
    };
    CursorRenderLayer.prototype.onBlur = function () {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.pause();
        }
        this._onRequestRefreshRowsEvent.fire({ start: this._bufferService.buffer.y, end: this._bufferService.buffer.y });
    };
    CursorRenderLayer.prototype.onFocus = function () {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.resume();
        }
        else {
            this._onRequestRefreshRowsEvent.fire({ start: this._bufferService.buffer.y, end: this._bufferService.buffer.y });
        }
    };
    CursorRenderLayer.prototype.onOptionsChanged = function () {
        var _this = this;
        var _a;
        if (this._optionsService.options.cursorBlink) {
            if (!this._cursorBlinkStateManager) {
                this._cursorBlinkStateManager = new CursorBlinkStateManager(this._coreBrowserService.isFocused, function () {
                    _this._render(true);
                });
            }
        }
        else {
            (_a = this._cursorBlinkStateManager) === null || _a === void 0 ? void 0 : _a.dispose();
            this._cursorBlinkStateManager = undefined;
        }
        this._onRequestRefreshRowsEvent.fire({ start: this._bufferService.buffer.y, end: this._bufferService.buffer.y });
    };
    CursorRenderLayer.prototype.onCursorMove = function () {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.restartBlinkAnimation();
        }
    };
    CursorRenderLayer.prototype.onGridChanged = function (startRow, endRow) {
        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {
            this._render(false);
        }
        else {
            this._cursorBlinkStateManager.restartBlinkAnimation();
        }
    };
    CursorRenderLayer.prototype._render = function (triggeredByAnimationFrame) {
        if (!this._coreService.isCursorInitialized || this._coreService.isCursorHidden) {
            this._clearCursor();
            return;
        }
        var cursorY = this._bufferService.buffer.ybase + this._bufferService.buffer.y;
        var viewportRelativeCursorY = cursorY - this._bufferService.buffer.ydisp;
        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= this._bufferService.rows) {
            this._clearCursor();
            return;
        }
        this._bufferService.buffer.lines.get(cursorY).loadCell(this._bufferService.buffer.x, this._cell);
        if (this._cell.content === undefined) {
            return;
        }
        if (!this._coreBrowserService.isFocused) {
            this._clearCursor();
            this._ctx.save();
            this._ctx.fillStyle = this._colors.cursor.css;
            var cursorStyle = this._optionsService.options.cursorStyle;
            if (cursorStyle && cursorStyle !== 'block') {
                this._cursorRenderers[cursorStyle](this._bufferService.buffer.x, viewportRelativeCursorY, this._cell);
            }
            else {
                this._renderBlurCursor(this._bufferService.buffer.x, viewportRelativeCursorY, this._cell);
            }
            this._ctx.restore();
            this._state.x = this._bufferService.buffer.x;
            this._state.y = viewportRelativeCursorY;
            this._state.isFocused = false;
            this._state.style = cursorStyle;
            this._state.width = this._cell.getWidth();
            return;
        }
        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {
            this._clearCursor();
            return;
        }
        if (this._state) {
            if (this._state.x === this._bufferService.buffer.x &&
                this._state.y === viewportRelativeCursorY &&
                this._state.isFocused === this._coreBrowserService.isFocused &&
                this._state.style === this._optionsService.options.cursorStyle &&
                this._state.width === this._cell.getWidth()) {
                return;
            }
            this._clearCursor();
        }
        this._ctx.save();
        this._cursorRenderers[this._optionsService.options.cursorStyle || 'block'](this._bufferService.buffer.x, viewportRelativeCursorY, this._cell);
        this._ctx.restore();
        this._state.x = this._bufferService.buffer.x;
        this._state.y = viewportRelativeCursorY;
        this._state.isFocused = false;
        this._state.style = this._optionsService.options.cursorStyle;
        this._state.width = this._cell.getWidth();
    };
    CursorRenderLayer.prototype._clearCursor = function () {
        if (this._state) {
            this._clearCells(this._state.x, this._state.y, this._state.width, 1);
            this._state = {
                x: 0,
                y: 0,
                isFocused: false,
                style: '',
                width: 0
            };
        }
    };
    CursorRenderLayer.prototype._renderBarCursor = function (x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillLeftLineAtCell(x, y, this._optionsService.options.cursorWidth);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlockCursor = function (x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillCells(x, y, cell.getWidth(), 1);
        this._ctx.fillStyle = this._colors.cursorAccent.css;
        this._fillCharTrueColor(cell, x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderUnderlineCursor = function (x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillBottomLineAtCells(x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlurCursor = function (x, y, cell) {
        this._ctx.save();
        this._ctx.strokeStyle = this._colors.cursor.css;
        this._strokeRectAtCell(x, y, cell.getWidth(), 1);
        this._ctx.restore();
    };
    return CursorRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.CursorRenderLayer = CursorRenderLayer;
var CursorBlinkStateManager = (function () {
    function CursorBlinkStateManager(isFocused, _renderCallback) {
        this._renderCallback = _renderCallback;
        this.isCursorVisible = true;
        if (isFocused) {
            this._restartInterval();
        }
    }
    Object.defineProperty(CursorBlinkStateManager.prototype, "isPaused", {
        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },
        enumerable: true,
        configurable: true
    });
    CursorBlinkStateManager.prototype.dispose = function () {
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = undefined;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = undefined;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    CursorBlinkStateManager.prototype.restartBlinkAnimation = function () {
        var _this = this;
        if (this.isPaused) {
            return;
        }
        this._animationTimeRestarted = Date.now();
        this.isCursorVisible = true;
        if (!this._animationFrame) {
            this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = undefined;
            });
        }
    };
    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {
        var _this = this;
        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
        }
        this._blinkStartTimeout = setTimeout(function () {
            if (_this._animationTimeRestarted) {
                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                _this._animationTimeRestarted = undefined;
                if (time > 0) {
                    _this._restartInterval(time);
                    return;
                }
            }
            _this.isCursorVisible = false;
            _this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = undefined;
            });
            _this._blinkInterval = setInterval(function () {
                if (_this._animationTimeRestarted) {
                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                    _this._animationTimeRestarted = undefined;
                    _this._restartInterval(time);
                    return;
                }
                _this.isCursorVisible = !_this.isCursorVisible;
                _this._animationFrame = window.requestAnimationFrame(function () {
                    _this._renderCallback();
                    _this._animationFrame = undefined;
                });
            }, BLINK_INTERVAL);
        }, timeToStart);
    };
    CursorBlinkStateManager.prototype.pause = function () {
        this.isCursorVisible = true;
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = undefined;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = undefined;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    CursorBlinkStateManager.prototype.resume = function () {
        this._animationTimeRestarted = undefined;
        this._restartInterval();
        this.restartBlinkAnimation();
    };
    return CursorBlinkStateManager;
}());


/***/ }),

/***/ "./out/browser/renderer/GridCache.js":
/*!*******************************************!*\
  !*** ./out/browser/renderer/GridCache.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var GridCache = (function () {
    function GridCache() {
        this.cache = [];
    }
    GridCache.prototype.resize = function (width, height) {
        for (var x = 0; x < width; x++) {
            if (this.cache.length <= x) {
                this.cache.push([]);
            }
            for (var y = this.cache[x].length; y < height; y++) {
                this.cache[x].push(undefined);
            }
            this.cache[x].length = height;
        }
        this.cache.length = width;
    };
    GridCache.prototype.clear = function () {
        for (var x = 0; x < this.cache.length; x++) {
            for (var y = 0; y < this.cache[x].length; y++) {
                this.cache[x][y] = undefined;
            }
        }
    };
    return GridCache;
}());
exports.GridCache = GridCache;


/***/ }),

/***/ "./out/browser/renderer/LinkRenderLayer.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/LinkRenderLayer.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseRenderLayer_1 = __webpack_require__(/*! ./BaseRenderLayer */ "./out/browser/renderer/BaseRenderLayer.js");
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var CharAtlasUtils_1 = __webpack_require__(/*! browser/renderer/atlas/CharAtlasUtils */ "./out/browser/renderer/atlas/CharAtlasUtils.js");
var LinkRenderLayer = (function (_super) {
    __extends(LinkRenderLayer, _super);
    function LinkRenderLayer(container, zIndex, colors, rendererId, linkifier, bufferService, optionsService) {
        var _this = _super.call(this, container, 'link', zIndex, true, colors, rendererId, bufferService, optionsService) || this;
        _this.bufferService = bufferService;
        _this.optionsService = optionsService;
        linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });
        linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });
        return _this;
    }
    LinkRenderLayer.prototype.resize = function (dim) {
        _super.prototype.resize.call(this, dim);
        this._state = undefined;
    };
    LinkRenderLayer.prototype.reset = function () {
        this._clearCurrentLink();
    };
    LinkRenderLayer.prototype._clearCurrentLink = function () {
        if (this._state) {
            this._clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);
            var middleRowCount = this._state.y2 - this._state.y1 - 1;
            if (middleRowCount > 0) {
                this._clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);
            }
            this._clearCells(0, this._state.y2, this._state.x2, 1);
            this._state = undefined;
        }
    };
    LinkRenderLayer.prototype._onLinkHover = function (e) {
        if (e.fg === Constants_1.INVERTED_DEFAULT_COLOR) {
            this._ctx.fillStyle = this._colors.background.css;
        }
        else if (e.fg && CharAtlasUtils_1.is256Color(e.fg)) {
            this._ctx.fillStyle = this._colors.ansi[e.fg].css;
        }
        else {
            this._ctx.fillStyle = this._colors.foreground.css;
        }
        if (e.y1 === e.y2) {
            this._fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);
        }
        else {
            this._fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);
            for (var y = e.y1 + 1; y < e.y2; y++) {
                this._fillBottomLineAtCells(0, y, e.cols);
            }
            this._fillBottomLineAtCells(0, e.y2, e.x2);
        }
        this._state = e;
    };
    LinkRenderLayer.prototype._onLinkLeave = function (e) {
        this._clearCurrentLink();
    };
    return LinkRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.LinkRenderLayer = LinkRenderLayer;


/***/ }),

/***/ "./out/browser/renderer/Renderer.js":
/*!******************************************!*\
  !*** ./out/browser/renderer/Renderer.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var TextRenderLayer_1 = __webpack_require__(/*! browser/renderer/TextRenderLayer */ "./out/browser/renderer/TextRenderLayer.js");
var SelectionRenderLayer_1 = __webpack_require__(/*! browser/renderer/SelectionRenderLayer */ "./out/browser/renderer/SelectionRenderLayer.js");
var CursorRenderLayer_1 = __webpack_require__(/*! browser/renderer/CursorRenderLayer */ "./out/browser/renderer/CursorRenderLayer.js");
var LinkRenderLayer_1 = __webpack_require__(/*! browser/renderer/LinkRenderLayer */ "./out/browser/renderer/LinkRenderLayer.js");
var CharacterJoinerRegistry_1 = __webpack_require__(/*! browser/renderer/CharacterJoinerRegistry */ "./out/browser/renderer/CharacterJoinerRegistry.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var CharAtlasCache_1 = __webpack_require__(/*! browser/renderer/atlas/CharAtlasCache */ "./out/browser/renderer/atlas/CharAtlasCache.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var nextRendererId = 1;
var Renderer = (function (_super) {
    __extends(Renderer, _super);
    function Renderer(_colors, _screenElement, _linkifier, _bufferService, _charSizeService, _optionsService, coreService, coreBrowserService) {
        var _this = _super.call(this) || this;
        _this._colors = _colors;
        _this._screenElement = _screenElement;
        _this._linkifier = _linkifier;
        _this._bufferService = _bufferService;
        _this._charSizeService = _charSizeService;
        _this._optionsService = _optionsService;
        _this.coreService = coreService;
        _this.coreBrowserService = coreBrowserService;
        _this._id = nextRendererId++;
        _this._onRequestRefreshRows = new EventEmitter_1.EventEmitter();
        var allowTransparency = _this._optionsService.options.allowTransparency;
        _this._characterJoinerRegistry = new CharacterJoinerRegistry_1.CharacterJoinerRegistry(_this._bufferService);
        _this._renderLayers = [
            new TextRenderLayer_1.TextRenderLayer(_this._screenElement, 0, _this._colors, _this._characterJoinerRegistry, allowTransparency, _this._id, _this._bufferService, _optionsService),
            new SelectionRenderLayer_1.SelectionRenderLayer(_this._screenElement, 1, _this._colors, _this._id, _this._bufferService, _optionsService),
            new LinkRenderLayer_1.LinkRenderLayer(_this._screenElement, 2, _this._colors, _this._id, _this._linkifier, _this._bufferService, _optionsService),
            new CursorRenderLayer_1.CursorRenderLayer(_this._screenElement, 3, _this._colors, _this._id, _this._onRequestRefreshRows, _this._bufferService, _optionsService, coreService, coreBrowserService)
        ];
        _this.dimensions = {
            scaledCharWidth: 0,
            scaledCharHeight: 0,
            scaledCellWidth: 0,
            scaledCellHeight: 0,
            scaledCharLeft: 0,
            scaledCharTop: 0,
            scaledCanvasWidth: 0,
            scaledCanvasHeight: 0,
            canvasWidth: 0,
            canvasHeight: 0,
            actualCellWidth: 0,
            actualCellHeight: 0
        };
        _this._devicePixelRatio = window.devicePixelRatio;
        _this._updateDimensions();
        _this.onOptionsChanged();
        return _this;
    }
    Object.defineProperty(Renderer.prototype, "onRequestRefreshRows", {
        get: function () { return this._onRequestRefreshRows.event; },
        enumerable: true,
        configurable: true
    });
    Renderer.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this._renderLayers.forEach(function (l) { return l.dispose(); });
        CharAtlasCache_1.removeTerminalFromCache(this._id);
    };
    Renderer.prototype.onDevicePixelRatioChange = function () {
        if (this._devicePixelRatio !== window.devicePixelRatio) {
            this._devicePixelRatio = window.devicePixelRatio;
            this.onResize(this._bufferService.cols, this._bufferService.rows);
        }
    };
    Renderer.prototype.setColors = function (colors) {
        var _this = this;
        this._colors = colors;
        this._renderLayers.forEach(function (l) {
            l.setColors(_this._colors);
            l.reset();
        });
    };
    Renderer.prototype.onResize = function (cols, rows) {
        var _this = this;
        this._updateDimensions();
        this._renderLayers.forEach(function (l) { return l.resize(_this.dimensions); });
        this._screenElement.style.width = this.dimensions.canvasWidth + "px";
        this._screenElement.style.height = this.dimensions.canvasHeight + "px";
    };
    Renderer.prototype.onCharSizeChanged = function () {
        this.onResize(this._bufferService.cols, this._bufferService.rows);
    };
    Renderer.prototype.onBlur = function () {
        this._runOperation(function (l) { return l.onBlur(); });
    };
    Renderer.prototype.onFocus = function () {
        this._runOperation(function (l) { return l.onFocus(); });
    };
    Renderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        if (columnSelectMode === void 0) { columnSelectMode = false; }
        this._runOperation(function (l) { return l.onSelectionChanged(start, end, columnSelectMode); });
    };
    Renderer.prototype.onCursorMove = function () {
        this._runOperation(function (l) { return l.onCursorMove(); });
    };
    Renderer.prototype.onOptionsChanged = function () {
        this._runOperation(function (l) { return l.onOptionsChanged(); });
    };
    Renderer.prototype.clear = function () {
        this._runOperation(function (l) { return l.reset(); });
    };
    Renderer.prototype._runOperation = function (operation) {
        this._renderLayers.forEach(function (l) { return operation(l); });
    };
    Renderer.prototype.renderRows = function (start, end) {
        this._renderLayers.forEach(function (l) { return l.onGridChanged(start, end); });
    };
    Renderer.prototype._updateDimensions = function () {
        if (!this._charSizeService.hasValidSize) {
            return;
        }
        this.dimensions.scaledCharWidth = Math.floor(this._charSizeService.width * window.devicePixelRatio);
        this.dimensions.scaledCharHeight = Math.ceil(this._charSizeService.height * window.devicePixelRatio);
        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._optionsService.options.lineHeight);
        this.dimensions.scaledCharTop = this._optionsService.options.lineHeight === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);
        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._optionsService.options.letterSpacing);
        this.dimensions.scaledCharLeft = Math.floor(this._optionsService.options.letterSpacing / 2);
        this.dimensions.scaledCanvasHeight = this._bufferService.rows * this.dimensions.scaledCellHeight;
        this.dimensions.scaledCanvasWidth = this._bufferService.cols * this.dimensions.scaledCellWidth;
        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);
        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);
        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._bufferService.rows;
        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._bufferService.cols;
    };
    Renderer.prototype.registerCharacterJoiner = function (handler) {
        return this._characterJoinerRegistry.registerCharacterJoiner(handler);
    };
    Renderer.prototype.deregisterCharacterJoiner = function (joinerId) {
        return this._characterJoinerRegistry.deregisterCharacterJoiner(joinerId);
    };
    Renderer = __decorate([
        __param(3, Services_2.IBufferService),
        __param(4, Services_1.ICharSizeService),
        __param(5, Services_2.IOptionsService),
        __param(6, Services_2.ICoreService),
        __param(7, Services_1.ICoreBrowserService)
    ], Renderer);
    return Renderer;
}(Lifecycle_1.Disposable));
exports.Renderer = Renderer;


/***/ }),

/***/ "./out/browser/renderer/RendererUtils.js":
/*!***********************************************!*\
  !*** ./out/browser/renderer/RendererUtils.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function throwIfFalsy(value) {
    if (!value) {
        throw new Error('value must not be falsy');
    }
    return value;
}
exports.throwIfFalsy = throwIfFalsy;


/***/ }),

/***/ "./out/browser/renderer/SelectionRenderLayer.js":
/*!******************************************************!*\
  !*** ./out/browser/renderer/SelectionRenderLayer.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseRenderLayer_1 = __webpack_require__(/*! browser/renderer/BaseRenderLayer */ "./out/browser/renderer/BaseRenderLayer.js");
var SelectionRenderLayer = (function (_super) {
    __extends(SelectionRenderLayer, _super);
    function SelectionRenderLayer(container, zIndex, colors, rendererId, bufferService, optionsService) {
        var _this = _super.call(this, container, 'selection', zIndex, true, colors, rendererId, bufferService, optionsService) || this;
        _this.bufferService = bufferService;
        _this.optionsService = optionsService;
        _this._clearState();
        return _this;
    }
    SelectionRenderLayer.prototype._clearState = function () {
        this._state = {
            start: undefined,
            end: undefined,
            columnSelectMode: undefined,
            ydisp: undefined
        };
    };
    SelectionRenderLayer.prototype.resize = function (dim) {
        _super.prototype.resize.call(this, dim);
        this._clearState();
    };
    SelectionRenderLayer.prototype.reset = function () {
        if (this._state.start && this._state.end) {
            this._clearState();
            this._clearAll();
        }
    };
    SelectionRenderLayer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        if (!this._didStateChange(start, end, columnSelectMode, this._bufferService.buffer.ydisp)) {
            return;
        }
        this._clearAll();
        if (!start || !end) {
            this._clearState();
            return;
        }
        var viewportStartRow = start[1] - this._bufferService.buffer.ydisp;
        var viewportEndRow = end[1] - this._bufferService.buffer.ydisp;
        var viewportCappedStartRow = Math.max(viewportStartRow, 0);
        var viewportCappedEndRow = Math.min(viewportEndRow, this._bufferService.rows - 1);
        if (viewportCappedStartRow >= this._bufferService.rows || viewportCappedEndRow < 0) {
            return;
        }
        this._ctx.fillStyle = this._colors.selection.css;
        if (columnSelectMode) {
            var startCol = start[0];
            var width = end[0] - startCol;
            var height = viewportCappedEndRow - viewportCappedStartRow + 1;
            this._fillCells(startCol, viewportCappedStartRow, width, height);
        }
        else {
            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;
            var startRowEndCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : this._bufferService.cols;
            this._fillCells(startCol, viewportCappedStartRow, startRowEndCol - startCol, 1);
            var middleRowsCount = Math.max(viewportCappedEndRow - viewportCappedStartRow - 1, 0);
            this._fillCells(0, viewportCappedStartRow + 1, this._bufferService.cols, middleRowsCount);
            if (viewportCappedStartRow !== viewportCappedEndRow) {
                var endCol = viewportEndRow === viewportCappedEndRow ? end[0] : this._bufferService.cols;
                this._fillCells(0, viewportCappedEndRow, endCol, 1);
            }
        }
        this._state.start = [start[0], start[1]];
        this._state.end = [end[0], end[1]];
        this._state.columnSelectMode = columnSelectMode;
        this._state.ydisp = this._bufferService.buffer.ydisp;
    };
    SelectionRenderLayer.prototype._didStateChange = function (start, end, columnSelectMode, ydisp) {
        return !this._areCoordinatesEqual(start, this._state.start) ||
            !this._areCoordinatesEqual(end, this._state.end) ||
            columnSelectMode !== this._state.columnSelectMode ||
            ydisp !== this._state.ydisp;
    };
    SelectionRenderLayer.prototype._areCoordinatesEqual = function (coord1, coord2) {
        if (!coord1 || !coord2) {
            return false;
        }
        return coord1[0] === coord2[0] && coord1[1] === coord2[1];
    };
    return SelectionRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.SelectionRenderLayer = SelectionRenderLayer;


/***/ }),

/***/ "./out/browser/renderer/TextRenderLayer.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/TextRenderLayer.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var GridCache_1 = __webpack_require__(/*! browser/renderer/GridCache */ "./out/browser/renderer/GridCache.js");
var BaseRenderLayer_1 = __webpack_require__(/*! browser/renderer/BaseRenderLayer */ "./out/browser/renderer/BaseRenderLayer.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CharacterJoinerRegistry_1 = __webpack_require__(/*! browser/renderer/CharacterJoinerRegistry */ "./out/browser/renderer/CharacterJoinerRegistry.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var TextRenderLayer = (function (_super) {
    __extends(TextRenderLayer, _super);
    function TextRenderLayer(container, zIndex, colors, characterJoinerRegistry, alpha, rendererId, bufferService, optionsService) {
        var _this = _super.call(this, container, 'text', zIndex, alpha, colors, rendererId, bufferService, optionsService) || this;
        _this.bufferService = bufferService;
        _this.optionsService = optionsService;
        _this._characterWidth = 0;
        _this._characterFont = '';
        _this._characterOverlapCache = {};
        _this._workCell = new CellData_1.CellData();
        _this._state = new GridCache_1.GridCache();
        _this._characterJoinerRegistry = characterJoinerRegistry;
        return _this;
    }
    TextRenderLayer.prototype.resize = function (dim) {
        _super.prototype.resize.call(this, dim);
        var terminalFont = this._getFont(false, false);
        if (this._characterWidth !== dim.scaledCharWidth || this._characterFont !== terminalFont) {
            this._characterWidth = dim.scaledCharWidth;
            this._characterFont = terminalFont;
            this._characterOverlapCache = {};
        }
        this._state.clear();
        this._state.resize(this._bufferService.cols, this._bufferService.rows);
    };
    TextRenderLayer.prototype.reset = function () {
        this._state.clear();
        this._clearAll();
    };
    TextRenderLayer.prototype._forEachCell = function (firstRow, lastRow, joinerRegistry, callback) {
        for (var y = firstRow; y <= lastRow; y++) {
            var row = y + this._bufferService.buffer.ydisp;
            var line = this._bufferService.buffer.lines.get(row);
            var joinedRanges = joinerRegistry ? joinerRegistry.getJoinedCharacters(row) : [];
            for (var x = 0; x < this._bufferService.cols; x++) {
                line.loadCell(x, this._workCell);
                var cell = this._workCell;
                var isJoined = false;
                var lastCharX = x;
                if (cell.getWidth() === 0) {
                    continue;
                }
                if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {
                    isJoined = true;
                    var range = joinedRanges.shift();
                    cell = new CharacterJoinerRegistry_1.JoinedCellData(this._workCell, line.translateToString(true, range[0], range[1]), range[1] - range[0]);
                    lastCharX = range[1] - 1;
                }
                if (!isJoined && this._isOverlapping(cell)) {
                    if (lastCharX < line.length - 1 && line.getCodePoint(lastCharX + 1) === Constants_1.NULL_CELL_CODE) {
                        cell.content &= ~12582912;
                        cell.content |= 2 << 22;
                    }
                }
                callback(cell, x, y);
                x = lastCharX;
            }
        }
    };
    TextRenderLayer.prototype._drawBackground = function (firstRow, lastRow) {
        var _this = this;
        var ctx = this._ctx;
        var cols = this._bufferService.cols;
        var startX = 0;
        var startY = 0;
        var prevFillStyle = null;
        ctx.save();
        this._forEachCell(firstRow, lastRow, null, function (cell, x, y) {
            var nextFillStyle = null;
            if (cell.isInverse()) {
                if (cell.isFgDefault()) {
                    nextFillStyle = _this._colors.foreground.css;
                }
                else if (cell.isFgRGB()) {
                    nextFillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + ")";
                }
                else {
                    nextFillStyle = _this._colors.ansi[cell.getFgColor()].css;
                }
            }
            else if (cell.isBgRGB()) {
                nextFillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + ")";
            }
            else if (cell.isBgPalette()) {
                nextFillStyle = _this._colors.ansi[cell.getBgColor()].css;
            }
            if (prevFillStyle === null) {
                startX = x;
                startY = y;
            }
            if (y !== startY) {
                ctx.fillStyle = prevFillStyle ? prevFillStyle : '';
                _this._fillCells(startX, startY, cols - startX, 1);
                startX = x;
                startY = y;
            }
            else if (prevFillStyle !== nextFillStyle) {
                ctx.fillStyle = prevFillStyle ? prevFillStyle : '';
                _this._fillCells(startX, startY, x - startX, 1);
                startX = x;
                startY = y;
            }
            prevFillStyle = nextFillStyle;
        });
        if (prevFillStyle !== null) {
            ctx.fillStyle = prevFillStyle;
            this._fillCells(startX, startY, cols - startX, 1);
        }
        ctx.restore();
    };
    TextRenderLayer.prototype._drawForeground = function (firstRow, lastRow) {
        var _this = this;
        this._forEachCell(firstRow, lastRow, this._characterJoinerRegistry, function (cell, x, y) {
            if (cell.isInvisible()) {
                return;
            }
            _this._drawChars(cell, x, y);
            if (cell.isUnderline()) {
                _this._ctx.save();
                if (cell.isInverse()) {
                    if (cell.isBgDefault()) {
                        _this._ctx.fillStyle = _this._colors.background.css;
                    }
                    else if (cell.isBgRGB()) {
                        _this._ctx.fillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + ")";
                    }
                    else {
                        var bg = cell.getBgColor();
                        if (_this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && bg < 8) {
                            bg += 8;
                        }
                        _this._ctx.fillStyle = _this._colors.ansi[bg].css;
                    }
                }
                else {
                    if (cell.isFgDefault()) {
                        _this._ctx.fillStyle = _this._colors.foreground.css;
                    }
                    else if (cell.isFgRGB()) {
                        _this._ctx.fillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + ")";
                    }
                    else {
                        var fg = cell.getFgColor();
                        if (_this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {
                            fg += 8;
                        }
                        _this._ctx.fillStyle = _this._colors.ansi[fg].css;
                    }
                }
                _this._fillBottomLineAtCells(x, y, cell.getWidth());
                _this._ctx.restore();
            }
        });
    };
    TextRenderLayer.prototype.onGridChanged = function (firstRow, lastRow) {
        if (this._state.cache.length === 0) {
            return;
        }
        if (this._charAtlas) {
            this._charAtlas.beginFrame();
        }
        this._clearCells(0, firstRow, this._bufferService.cols, lastRow - firstRow + 1);
        this._drawBackground(firstRow, lastRow);
        this._drawForeground(firstRow, lastRow);
    };
    TextRenderLayer.prototype.onOptionsChanged = function () {
        this._setTransparency(this._optionsService.options.allowTransparency);
    };
    TextRenderLayer.prototype._isOverlapping = function (cell) {
        if (cell.getWidth() !== 1) {
            return false;
        }
        if (cell.getCode() < 256) {
            return false;
        }
        var chars = cell.getChars();
        if (this._characterOverlapCache.hasOwnProperty(chars)) {
            return this._characterOverlapCache[chars];
        }
        this._ctx.save();
        this._ctx.font = this._characterFont;
        var overlaps = Math.floor(this._ctx.measureText(chars).width) > this._characterWidth;
        this._ctx.restore();
        this._characterOverlapCache[chars] = overlaps;
        return overlaps;
    };
    return TextRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.TextRenderLayer = TextRenderLayer;


/***/ }),

/***/ "./out/browser/renderer/atlas/BaseCharAtlas.js":
/*!*****************************************************!*\
  !*** ./out/browser/renderer/atlas/BaseCharAtlas.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var BaseCharAtlas = (function () {
    function BaseCharAtlas() {
        this._didWarmUp = false;
    }
    BaseCharAtlas.prototype.dispose = function () { };
    BaseCharAtlas.prototype.warmUp = function () {
        if (!this._didWarmUp) {
            this._doWarmUp();
            this._didWarmUp = true;
        }
    };
    BaseCharAtlas.prototype._doWarmUp = function () { };
    BaseCharAtlas.prototype.beginFrame = function () { };
    return BaseCharAtlas;
}());
exports.BaseCharAtlas = BaseCharAtlas;


/***/ }),

/***/ "./out/browser/renderer/atlas/CharAtlasCache.js":
/*!******************************************************!*\
  !*** ./out/browser/renderer/atlas/CharAtlasCache.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CharAtlasUtils_1 = __webpack_require__(/*! browser/renderer/atlas/CharAtlasUtils */ "./out/browser/renderer/atlas/CharAtlasUtils.js");
var DynamicCharAtlas_1 = __webpack_require__(/*! browser/renderer/atlas/DynamicCharAtlas */ "./out/browser/renderer/atlas/DynamicCharAtlas.js");
var charAtlasCache = [];
function acquireCharAtlas(options, rendererId, colors, scaledCharWidth, scaledCharHeight) {
    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, options, colors);
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        var ownedByIndex = entry.ownedBy.indexOf(rendererId);
        if (ownedByIndex >= 0) {
            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
                return entry.atlas;
            }
            if (entry.ownedBy.length === 1) {
                entry.atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                entry.ownedBy.splice(ownedByIndex, 1);
            }
            break;
        }
    }
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
            entry.ownedBy.push(rendererId);
            return entry.atlas;
        }
    }
    var newEntry = {
        atlas: new DynamicCharAtlas_1.DynamicCharAtlas(document, newConfig),
        config: newConfig,
        ownedBy: [rendererId]
    };
    charAtlasCache.push(newEntry);
    return newEntry.atlas;
}
exports.acquireCharAtlas = acquireCharAtlas;
function removeTerminalFromCache(rendererId) {
    for (var i = 0; i < charAtlasCache.length; i++) {
        var index = charAtlasCache[i].ownedBy.indexOf(rendererId);
        if (index !== -1) {
            if (charAtlasCache[i].ownedBy.length === 1) {
                charAtlasCache[i].atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                charAtlasCache[i].ownedBy.splice(index, 1);
            }
            break;
        }
    }
}
exports.removeTerminalFromCache = removeTerminalFromCache;


/***/ }),

/***/ "./out/browser/renderer/atlas/CharAtlasUtils.js":
/*!******************************************************!*\
  !*** ./out/browser/renderer/atlas/CharAtlasUtils.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
function generateConfig(scaledCharWidth, scaledCharHeight, options, colors) {
    var clonedColors = {
        foreground: colors.foreground,
        background: colors.background,
        cursor: undefined,
        cursorAccent: undefined,
        selection: undefined,
        ansi: colors.ansi.slice(0, 16)
    };
    return {
        devicePixelRatio: window.devicePixelRatio,
        scaledCharWidth: scaledCharWidth,
        scaledCharHeight: scaledCharHeight,
        fontFamily: options.fontFamily,
        fontSize: options.fontSize,
        fontWeight: options.fontWeight,
        fontWeightBold: options.fontWeightBold,
        allowTransparency: options.allowTransparency,
        colors: clonedColors
    };
}
exports.generateConfig = generateConfig;
function configEquals(a, b) {
    for (var i = 0; i < a.colors.ansi.length; i++) {
        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {
            return false;
        }
    }
    return a.devicePixelRatio === b.devicePixelRatio &&
        a.fontFamily === b.fontFamily &&
        a.fontSize === b.fontSize &&
        a.fontWeight === b.fontWeight &&
        a.fontWeightBold === b.fontWeightBold &&
        a.allowTransparency === b.allowTransparency &&
        a.scaledCharWidth === b.scaledCharWidth &&
        a.scaledCharHeight === b.scaledCharHeight &&
        a.colors.foreground === b.colors.foreground &&
        a.colors.background === b.colors.background;
}
exports.configEquals = configEquals;
function is256Color(colorCode) {
    return colorCode < Constants_1.DEFAULT_COLOR;
}
exports.is256Color = is256Color;


/***/ }),

/***/ "./out/browser/renderer/atlas/Constants.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/atlas/Constants.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.INVERTED_DEFAULT_COLOR = 257;
exports.DIM_OPACITY = 0.5;
exports.CHAR_ATLAS_CELL_SPACING = 1;


/***/ }),

/***/ "./out/browser/renderer/atlas/DynamicCharAtlas.js":
/*!********************************************************!*\
  !*** ./out/browser/renderer/atlas/DynamicCharAtlas.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var BaseCharAtlas_1 = __webpack_require__(/*! browser/renderer/atlas/BaseCharAtlas */ "./out/browser/renderer/atlas/BaseCharAtlas.js");
var ColorManager_1 = __webpack_require__(/*! browser/ColorManager */ "./out/browser/ColorManager.js");
var LRUMap_1 = __webpack_require__(/*! browser/renderer/atlas/LRUMap */ "./out/browser/renderer/atlas/LRUMap.js");
var Platform_1 = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var RendererUtils_1 = __webpack_require__(/*! browser/renderer/RendererUtils */ "./out/browser/renderer/RendererUtils.js");
var Color_1 = __webpack_require__(/*! browser/Color */ "./out/browser/Color.js");
var TEXTURE_WIDTH = 1024;
var TEXTURE_HEIGHT = 1024;
var TRANSPARENT_COLOR = {
    css: 'rgba(0, 0, 0, 0)',
    rgba: 0
};
var FRAME_CACHE_DRAW_LIMIT = 100;
var GLYPH_BITMAP_COMMIT_DELAY = 100;
function getGlyphCacheKey(glyph) {
    return glyph.code << 21 | glyph.bg << 12 | glyph.fg << 3 | (glyph.bold ? 0 : 4) + (glyph.dim ? 0 : 2) + (glyph.italic ? 0 : 1);
}
exports.getGlyphCacheKey = getGlyphCacheKey;
var DynamicCharAtlas = (function (_super) {
    __extends(DynamicCharAtlas, _super);
    function DynamicCharAtlas(document, _config) {
        var _this = _super.call(this) || this;
        _this._config = _config;
        _this._drawToCacheCount = 0;
        _this._glyphsWaitingOnBitmap = [];
        _this._bitmapCommitTimeout = null;
        _this._bitmap = null;
        _this._cacheCanvas = document.createElement('canvas');
        _this._cacheCanvas.width = TEXTURE_WIDTH;
        _this._cacheCanvas.height = TEXTURE_HEIGHT;
        _this._cacheCtx = RendererUtils_1.throwIfFalsy(_this._cacheCanvas.getContext('2d', { alpha: true }));
        var tmpCanvas = document.createElement('canvas');
        tmpCanvas.width = _this._config.scaledCharWidth;
        tmpCanvas.height = _this._config.scaledCharHeight;
        _this._tmpCtx = RendererUtils_1.throwIfFalsy(tmpCanvas.getContext('2d', { alpha: _this._config.allowTransparency }));
        _this._width = Math.floor(TEXTURE_WIDTH / _this._config.scaledCharWidth);
        _this._height = Math.floor(TEXTURE_HEIGHT / _this._config.scaledCharHeight);
        var capacity = _this._width * _this._height;
        _this._cacheMap = new LRUMap_1.LRUMap(capacity);
        _this._cacheMap.prealloc(capacity);
        return _this;
    }
    DynamicCharAtlas.prototype.dispose = function () {
        if (this._bitmapCommitTimeout !== null) {
            window.clearTimeout(this._bitmapCommitTimeout);
            this._bitmapCommitTimeout = null;
        }
    };
    DynamicCharAtlas.prototype.beginFrame = function () {
        this._drawToCacheCount = 0;
    };
    DynamicCharAtlas.prototype.draw = function (ctx, glyph, x, y) {
        if (glyph.code === 32) {
            return true;
        }
        if (!this._canCache(glyph)) {
            return false;
        }
        var glyphKey = getGlyphCacheKey(glyph);
        var cacheValue = this._cacheMap.get(glyphKey);
        if (cacheValue !== null && cacheValue !== undefined) {
            this._drawFromCache(ctx, cacheValue, x, y);
            return true;
        }
        else if (this._drawToCacheCount < FRAME_CACHE_DRAW_LIMIT) {
            var index = void 0;
            if (this._cacheMap.size < this._cacheMap.capacity) {
                index = this._cacheMap.size;
            }
            else {
                index = this._cacheMap.peek().index;
            }
            var cacheValue_1 = this._drawToCache(glyph, index);
            this._cacheMap.set(glyphKey, cacheValue_1);
            this._drawFromCache(ctx, cacheValue_1, x, y);
            return true;
        }
        return false;
    };
    DynamicCharAtlas.prototype._canCache = function (glyph) {
        return glyph.code < 256;
    };
    DynamicCharAtlas.prototype._toCoordinateX = function (index) {
        return (index % this._width) * this._config.scaledCharWidth;
    };
    DynamicCharAtlas.prototype._toCoordinateY = function (index) {
        return Math.floor(index / this._width) * this._config.scaledCharHeight;
    };
    DynamicCharAtlas.prototype._drawFromCache = function (ctx, cacheValue, x, y) {
        if (cacheValue.isEmpty) {
            return;
        }
        var cacheX = this._toCoordinateX(cacheValue.index);
        var cacheY = this._toCoordinateY(cacheValue.index);
        ctx.drawImage(cacheValue.inBitmap ? this._bitmap : this._cacheCanvas, cacheX, cacheY, this._config.scaledCharWidth, this._config.scaledCharHeight, x, y, this._config.scaledCharWidth, this._config.scaledCharHeight);
    };
    DynamicCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {
        if (idx < this._config.colors.ansi.length) {
            return this._config.colors.ansi[idx];
        }
        return ColorManager_1.DEFAULT_ANSI_COLORS[idx];
    };
    DynamicCharAtlas.prototype._getBackgroundColor = function (glyph) {
        if (this._config.allowTransparency) {
            return TRANSPARENT_COLOR;
        }
        else if (glyph.bg === Constants_1.INVERTED_DEFAULT_COLOR) {
            return this._config.colors.foreground;
        }
        else if (glyph.bg < 256) {
            return this._getColorFromAnsiIndex(glyph.bg);
        }
        return this._config.colors.background;
    };
    DynamicCharAtlas.prototype._getForegroundColor = function (glyph) {
        if (glyph.fg === Constants_1.INVERTED_DEFAULT_COLOR) {
            return Color_1.color.opaque(this._config.colors.background);
        }
        else if (glyph.fg < 256) {
            return this._getColorFromAnsiIndex(glyph.fg);
        }
        return this._config.colors.foreground;
    };
    DynamicCharAtlas.prototype._drawToCache = function (glyph, index) {
        this._drawToCacheCount++;
        this._tmpCtx.save();
        var backgroundColor = this._getBackgroundColor(glyph);
        this._tmpCtx.globalCompositeOperation = 'copy';
        this._tmpCtx.fillStyle = backgroundColor.css;
        this._tmpCtx.fillRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);
        this._tmpCtx.globalCompositeOperation = 'source-over';
        var fontWeight = glyph.bold ? this._config.fontWeightBold : this._config.fontWeight;
        var fontStyle = glyph.italic ? 'italic' : '';
        this._tmpCtx.font =
            fontStyle + " " + fontWeight + " " + this._config.fontSize * this._config.devicePixelRatio + "px " + this._config.fontFamily;
        this._tmpCtx.textBaseline = 'middle';
        this._tmpCtx.fillStyle = this._getForegroundColor(glyph).css;
        if (glyph.dim) {
            this._tmpCtx.globalAlpha = Constants_1.DIM_OPACITY;
        }
        this._tmpCtx.fillText(glyph.chars, 0, this._config.scaledCharHeight / 2);
        this._tmpCtx.restore();
        var imageData = this._tmpCtx.getImageData(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);
        var isEmpty = false;
        if (!this._config.allowTransparency) {
            isEmpty = clearColor(imageData, backgroundColor);
        }
        var x = this._toCoordinateX(index);
        var y = this._toCoordinateY(index);
        this._cacheCtx.putImageData(imageData, x, y);
        var cacheValue = {
            index: index,
            isEmpty: isEmpty,
            inBitmap: false
        };
        this._addGlyphToBitmap(cacheValue);
        return cacheValue;
    };
    DynamicCharAtlas.prototype._addGlyphToBitmap = function (cacheValue) {
        var _this = this;
        if (!('createImageBitmap' in window) || Platform_1.isFirefox || Platform_1.isSafari) {
            return;
        }
        this._glyphsWaitingOnBitmap.push(cacheValue);
        if (this._bitmapCommitTimeout !== null) {
            return;
        }
        this._bitmapCommitTimeout = window.setTimeout(function () { return _this._generateBitmap(); }, GLYPH_BITMAP_COMMIT_DELAY);
    };
    DynamicCharAtlas.prototype._generateBitmap = function () {
        var _this = this;
        var glyphsMovingToBitmap = this._glyphsWaitingOnBitmap;
        this._glyphsWaitingOnBitmap = [];
        window.createImageBitmap(this._cacheCanvas).then(function (bitmap) {
            _this._bitmap = bitmap;
            for (var i = 0; i < glyphsMovingToBitmap.length; i++) {
                var value = glyphsMovingToBitmap[i];
                value.inBitmap = true;
            }
        });
        this._bitmapCommitTimeout = null;
    };
    return DynamicCharAtlas;
}(BaseCharAtlas_1.BaseCharAtlas));
exports.DynamicCharAtlas = DynamicCharAtlas;
var NoneCharAtlas = (function (_super) {
    __extends(NoneCharAtlas, _super);
    function NoneCharAtlas(document, config) {
        return _super.call(this) || this;
    }
    NoneCharAtlas.prototype.draw = function (ctx, glyph, x, y) {
        return false;
    };
    return NoneCharAtlas;
}(BaseCharAtlas_1.BaseCharAtlas));
exports.NoneCharAtlas = NoneCharAtlas;
function clearColor(imageData, color) {
    var isEmpty = true;
    var r = color.rgba >>> 24;
    var g = color.rgba >>> 16 & 0xFF;
    var b = color.rgba >>> 8 & 0xFF;
    for (var offset = 0; offset < imageData.data.length; offset += 4) {
        if (imageData.data[offset] === r &&
            imageData.data[offset + 1] === g &&
            imageData.data[offset + 2] === b) {
            imageData.data[offset + 3] = 0;
        }
        else {
            isEmpty = false;
        }
    }
    return isEmpty;
}


/***/ }),

/***/ "./out/browser/renderer/atlas/LRUMap.js":
/*!**********************************************!*\
  !*** ./out/browser/renderer/atlas/LRUMap.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var LRUMap = (function () {
    function LRUMap(capacity) {
        this.capacity = capacity;
        this._map = {};
        this._head = null;
        this._tail = null;
        this._nodePool = [];
        this.size = 0;
    }
    LRUMap.prototype._unlinkNode = function (node) {
        var prev = node.prev;
        var next = node.next;
        if (node === this._head) {
            this._head = next;
        }
        if (node === this._tail) {
            this._tail = prev;
        }
        if (prev !== null) {
            prev.next = next;
        }
        if (next !== null) {
            next.prev = prev;
        }
    };
    LRUMap.prototype._appendNode = function (node) {
        var tail = this._tail;
        if (tail !== null) {
            tail.next = node;
        }
        node.prev = tail;
        node.next = null;
        this._tail = node;
        if (this._head === null) {
            this._head = node;
        }
    };
    LRUMap.prototype.prealloc = function (count) {
        var nodePool = this._nodePool;
        for (var i = 0; i < count; i++) {
            nodePool.push({
                prev: null,
                next: null,
                key: null,
                value: null
            });
        }
    };
    LRUMap.prototype.get = function (key) {
        var node = this._map[key];
        if (node !== undefined) {
            this._unlinkNode(node);
            this._appendNode(node);
            return node.value;
        }
        return null;
    };
    LRUMap.prototype.peekValue = function (key) {
        var node = this._map[key];
        if (node !== undefined) {
            return node.value;
        }
        return null;
    };
    LRUMap.prototype.peek = function () {
        var head = this._head;
        return head === null ? null : head.value;
    };
    LRUMap.prototype.set = function (key, value) {
        var node = this._map[key];
        if (node !== undefined) {
            node = this._map[key];
            this._unlinkNode(node);
            node.value = value;
        }
        else if (this.size >= this.capacity) {
            node = this._head;
            this._unlinkNode(node);
            delete this._map[node.key];
            node.key = key;
            node.value = value;
            this._map[key] = node;
        }
        else {
            var nodePool = this._nodePool;
            if (nodePool.length > 0) {
                node = nodePool.pop();
                node.key = key;
                node.value = value;
            }
            else {
                node = {
                    prev: null,
                    next: null,
                    key: key,
                    value: value
                };
            }
            this._map[key] = node;
            this.size++;
        }
        this._appendNode(node);
    };
    return LRUMap;
}());
exports.LRUMap = LRUMap;


/***/ }),

/***/ "./out/browser/renderer/dom/DomRenderer.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/dom/DomRenderer.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var DomRendererRowFactory_1 = __webpack_require__(/*! browser/renderer/dom/DomRendererRowFactory */ "./out/browser/renderer/dom/DomRendererRowFactory.js");
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Color_1 = __webpack_require__(/*! browser/Color */ "./out/browser/Color.js");
var TERMINAL_CLASS_PREFIX = 'xterm-dom-renderer-owner-';
var ROW_CONTAINER_CLASS = 'xterm-rows';
var FG_CLASS_PREFIX = 'xterm-fg-';
var BG_CLASS_PREFIX = 'xterm-bg-';
var FOCUS_CLASS = 'xterm-focus';
var SELECTION_CLASS = 'xterm-selection';
var nextTerminalId = 1;
var DomRenderer = (function (_super) {
    __extends(DomRenderer, _super);
    function DomRenderer(_colors, _element, _screenElement, _viewportElement, _linkifier, _charSizeService, _optionsService, _bufferService) {
        var _this = _super.call(this) || this;
        _this._colors = _colors;
        _this._element = _element;
        _this._screenElement = _screenElement;
        _this._viewportElement = _viewportElement;
        _this._linkifier = _linkifier;
        _this._charSizeService = _charSizeService;
        _this._optionsService = _optionsService;
        _this._bufferService = _bufferService;
        _this._terminalClass = nextTerminalId++;
        _this._rowElements = [];
        _this._onRequestRefreshRows = new EventEmitter_1.EventEmitter();
        _this._rowContainer = document.createElement('div');
        _this._rowContainer.classList.add(ROW_CONTAINER_CLASS);
        _this._rowContainer.style.lineHeight = 'normal';
        _this._rowContainer.setAttribute('aria-hidden', 'true');
        _this._refreshRowElements(_this._bufferService.cols, _this._bufferService.rows);
        _this._selectionContainer = document.createElement('div');
        _this._selectionContainer.classList.add(SELECTION_CLASS);
        _this._selectionContainer.setAttribute('aria-hidden', 'true');
        _this.dimensions = {
            scaledCharWidth: 0,
            scaledCharHeight: 0,
            scaledCellWidth: 0,
            scaledCellHeight: 0,
            scaledCharLeft: 0,
            scaledCharTop: 0,
            scaledCanvasWidth: 0,
            scaledCanvasHeight: 0,
            canvasWidth: 0,
            canvasHeight: 0,
            actualCellWidth: 0,
            actualCellHeight: 0
        };
        _this._updateDimensions();
        _this._injectCss();
        _this._rowFactory = new DomRendererRowFactory_1.DomRendererRowFactory(document, _this._optionsService, _this._colors);
        _this._element.classList.add(TERMINAL_CLASS_PREFIX + _this._terminalClass);
        _this._screenElement.appendChild(_this._rowContainer);
        _this._screenElement.appendChild(_this._selectionContainer);
        _this._linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });
        _this._linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });
        return _this;
    }
    Object.defineProperty(DomRenderer.prototype, "onRequestRefreshRows", {
        get: function () { return this._onRequestRefreshRows.event; },
        enumerable: true,
        configurable: true
    });
    DomRenderer.prototype.dispose = function () {
        this._element.classList.remove(TERMINAL_CLASS_PREFIX + this._terminalClass);
        this._screenElement.removeChild(this._rowContainer);
        this._screenElement.removeChild(this._selectionContainer);
        this._screenElement.removeChild(this._themeStyleElement);
        this._screenElement.removeChild(this._dimensionsStyleElement);
        _super.prototype.dispose.call(this);
    };
    DomRenderer.prototype._updateDimensions = function () {
        var _this = this;
        this.dimensions.scaledCharWidth = this._charSizeService.width * window.devicePixelRatio;
        this.dimensions.scaledCharHeight = Math.ceil(this._charSizeService.height * window.devicePixelRatio);
        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._optionsService.options.letterSpacing);
        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._optionsService.options.lineHeight);
        this.dimensions.scaledCharLeft = 0;
        this.dimensions.scaledCharTop = 0;
        this.dimensions.scaledCanvasWidth = this.dimensions.scaledCellWidth * this._bufferService.cols;
        this.dimensions.scaledCanvasHeight = this.dimensions.scaledCellHeight * this._bufferService.rows;
        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);
        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);
        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._bufferService.cols;
        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._bufferService.rows;
        this._rowElements.forEach(function (element) {
            element.style.width = _this.dimensions.canvasWidth + "px";
            element.style.height = _this.dimensions.actualCellHeight + "px";
            element.style.lineHeight = _this.dimensions.actualCellHeight + "px";
            element.style.overflow = 'hidden';
        });
        if (!this._dimensionsStyleElement) {
            this._dimensionsStyleElement = document.createElement('style');
            this._screenElement.appendChild(this._dimensionsStyleElement);
        }
        var styles = this._terminalSelector + " ." + ROW_CONTAINER_CLASS + " span {" +
            " display: inline-block;" +
            " height: 100%;" +
            " vertical-align: top;" +
            (" width: " + this.dimensions.actualCellWidth + "px") +
            "}";
        this._dimensionsStyleElement.innerHTML = styles;
        this._selectionContainer.style.height = this._viewportElement.style.height;
        this._screenElement.style.width = this.dimensions.canvasWidth + "px";
        this._screenElement.style.height = this.dimensions.canvasHeight + "px";
    };
    DomRenderer.prototype.setColors = function (colors) {
        this._colors = colors;
        this._injectCss();
    };
    DomRenderer.prototype._injectCss = function () {
        var _this = this;
        if (!this._themeStyleElement) {
            this._themeStyleElement = document.createElement('style');
            this._screenElement.appendChild(this._themeStyleElement);
        }
        var styles = this._terminalSelector + " ." + ROW_CONTAINER_CLASS + " {" +
            (" color: " + this._colors.foreground.css + ";") +
            (" background-color: " + this._colors.background.css + ";") +
            (" font-family: " + this._optionsService.options.fontFamily + ";") +
            (" font-size: " + this._optionsService.options.fontSize + "px;") +
            "}";
        styles +=
            this._terminalSelector + " span:not(." + DomRendererRowFactory_1.BOLD_CLASS + ") {" +
                (" font-weight: " + this._optionsService.options.fontWeight + ";") +
                "}" +
                (this._terminalSelector + " span." + DomRendererRowFactory_1.BOLD_CLASS + " {") +
                (" font-weight: " + this._optionsService.options.fontWeightBold + ";") +
                "}" +
                (this._terminalSelector + " span." + DomRendererRowFactory_1.ITALIC_CLASS + " {") +
                " font-style: italic;" +
                "}";
        styles +=
            "@keyframes blink_box_shadow {" +
                " 50% {" +
                "  box-shadow: none;" +
                " }" +
                "}";
        styles +=
            "@keyframes blink_block {" +
                " 0% {" +
                ("  background-color: " + this._colors.cursor.css + ";") +
                ("  color: " + this._colors.cursorAccent.css + ";") +
                " }" +
                " 50% {" +
                ("  background-color: " + this._colors.cursorAccent.css + ";") +
                ("  color: " + this._colors.cursor.css + ";") +
                " }" +
                "}";
        styles +=
            this._terminalSelector + " ." + ROW_CONTAINER_CLASS + ":not(." + FOCUS_CLASS + ") ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + " {" +
                (" outline: 1px solid " + this._colors.cursor.css + ";") +
                " outline-offset: -1px;" +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_BLINK_CLASS + ":not(." + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + ") {") +
                " animation: blink_box_shadow 1s step-end infinite;" +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_BLINK_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + " {") +
                " animation: blink_block 1s step-end infinite;" +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + " {") +
                (" background-color: " + this._colors.cursor.css + ";") +
                (" color: " + this._colors.cursorAccent.css + ";") +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_BAR_CLASS + " {") +
                (" box-shadow: " + this._optionsService.options.cursorWidth + "px 0 0 " + this._colors.cursor.css + " inset;") +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_UNDERLINE_CLASS + " {") +
                (" box-shadow: 0 -1px 0 " + this._colors.cursor.css + " inset;") +
                "}";
        styles +=
            this._terminalSelector + " ." + SELECTION_CLASS + " {" +
                " position: absolute;" +
                " top: 0;" +
                " left: 0;" +
                " z-index: 1;" +
                " pointer-events: none;" +
                "}" +
                (this._terminalSelector + " ." + SELECTION_CLASS + " div {") +
                " position: absolute;" +
                (" background-color: " + this._colors.selection.css + ";") +
                "}";
        this._colors.ansi.forEach(function (c, i) {
            styles +=
                _this._terminalSelector + " ." + FG_CLASS_PREFIX + i + " { color: " + c.css + "; }" +
                    (_this._terminalSelector + " ." + BG_CLASS_PREFIX + i + " { background-color: " + c.css + "; }");
        });
        styles +=
            this._terminalSelector + " ." + FG_CLASS_PREFIX + Constants_1.INVERTED_DEFAULT_COLOR + " { color: " + Color_1.color.opaque(this._colors.background).css + "; }" +
                (this._terminalSelector + " ." + BG_CLASS_PREFIX + Constants_1.INVERTED_DEFAULT_COLOR + " { background-color: " + this._colors.foreground.css + "; }");
        this._themeStyleElement.innerHTML = styles;
    };
    DomRenderer.prototype.onDevicePixelRatioChange = function () {
        this._updateDimensions();
    };
    DomRenderer.prototype._refreshRowElements = function (cols, rows) {
        for (var i = this._rowElements.length; i <= rows; i++) {
            var row = document.createElement('div');
            this._rowContainer.appendChild(row);
            this._rowElements.push(row);
        }
        while (this._rowElements.length > rows) {
            this._rowContainer.removeChild(this._rowElements.pop());
        }
    };
    DomRenderer.prototype.onResize = function (cols, rows) {
        this._refreshRowElements(cols, rows);
        this._updateDimensions();
    };
    DomRenderer.prototype.onCharSizeChanged = function () {
        this._updateDimensions();
    };
    DomRenderer.prototype.onBlur = function () {
        this._rowContainer.classList.remove(FOCUS_CLASS);
    };
    DomRenderer.prototype.onFocus = function () {
        this._rowContainer.classList.add(FOCUS_CLASS);
    };
    DomRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        while (this._selectionContainer.children.length) {
            this._selectionContainer.removeChild(this._selectionContainer.children[0]);
        }
        if (!start || !end) {
            return;
        }
        var viewportStartRow = start[1] - this._bufferService.buffer.ydisp;
        var viewportEndRow = end[1] - this._bufferService.buffer.ydisp;
        var viewportCappedStartRow = Math.max(viewportStartRow, 0);
        var viewportCappedEndRow = Math.min(viewportEndRow, this._bufferService.rows - 1);
        if (viewportCappedStartRow >= this._bufferService.rows || viewportCappedEndRow < 0) {
            return;
        }
        var documentFragment = document.createDocumentFragment();
        if (columnSelectMode) {
            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, start[0], end[0], viewportCappedEndRow - viewportCappedStartRow + 1));
        }
        else {
            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;
            var endCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : this._bufferService.cols;
            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, startCol, endCol));
            var middleRowsCount = viewportCappedEndRow - viewportCappedStartRow - 1;
            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow + 1, 0, this._bufferService.cols, middleRowsCount));
            if (viewportCappedStartRow !== viewportCappedEndRow) {
                var endCol_1 = viewportEndRow === viewportCappedEndRow ? end[0] : this._bufferService.cols;
                documentFragment.appendChild(this._createSelectionElement(viewportCappedEndRow, 0, endCol_1));
            }
        }
        this._selectionContainer.appendChild(documentFragment);
    };
    DomRenderer.prototype._createSelectionElement = function (row, colStart, colEnd, rowCount) {
        if (rowCount === void 0) { rowCount = 1; }
        var element = document.createElement('div');
        element.style.height = rowCount * this.dimensions.actualCellHeight + "px";
        element.style.top = row * this.dimensions.actualCellHeight + "px";
        element.style.left = colStart * this.dimensions.actualCellWidth + "px";
        element.style.width = this.dimensions.actualCellWidth * (colEnd - colStart) + "px";
        return element;
    };
    DomRenderer.prototype.onCursorMove = function () {
    };
    DomRenderer.prototype.onOptionsChanged = function () {
        this._updateDimensions();
        this._injectCss();
    };
    DomRenderer.prototype.clear = function () {
        this._rowElements.forEach(function (e) { return e.innerHTML = ''; });
    };
    DomRenderer.prototype.renderRows = function (start, end) {
        var cursorAbsoluteY = this._bufferService.buffer.ybase + this._bufferService.buffer.y;
        var cursorX = this._bufferService.buffer.x;
        var cursorBlink = this._optionsService.options.cursorBlink;
        for (var y = start; y <= end; y++) {
            var rowElement = this._rowElements[y];
            rowElement.innerHTML = '';
            var row = y + this._bufferService.buffer.ydisp;
            var lineData = this._bufferService.buffer.lines.get(row);
            var cursorStyle = this._optionsService.options.cursorStyle;
            rowElement.appendChild(this._rowFactory.createRow(lineData, row === cursorAbsoluteY, cursorStyle, cursorX, cursorBlink, this.dimensions.actualCellWidth, this._bufferService.cols));
        }
    };
    Object.defineProperty(DomRenderer.prototype, "_terminalSelector", {
        get: function () {
            return "." + TERMINAL_CLASS_PREFIX + this._terminalClass;
        },
        enumerable: true,
        configurable: true
    });
    DomRenderer.prototype.registerCharacterJoiner = function (handler) { return -1; };
    DomRenderer.prototype.deregisterCharacterJoiner = function (joinerId) { return false; };
    DomRenderer.prototype._onLinkHover = function (e) {
        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);
    };
    DomRenderer.prototype._onLinkLeave = function (e) {
        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);
    };
    DomRenderer.prototype._setCellUnderline = function (x, x2, y, y2, cols, enabled) {
        while (x !== x2 || y !== y2) {
            var row = this._rowElements[y];
            if (!row) {
                return;
            }
            var span = row.children[x];
            if (span) {
                span.style.textDecoration = enabled ? 'underline' : 'none';
            }
            if (++x >= cols) {
                x = 0;
                y++;
            }
        }
    };
    DomRenderer = __decorate([
        __param(5, Services_1.ICharSizeService),
        __param(6, Services_2.IOptionsService),
        __param(7, Services_2.IBufferService)
    ], DomRenderer);
    return DomRenderer;
}(Lifecycle_1.Disposable));
exports.DomRenderer = DomRenderer;


/***/ }),

/***/ "./out/browser/renderer/dom/DomRendererRowFactory.js":
/*!***********************************************************!*\
  !*** ./out/browser/renderer/dom/DomRendererRowFactory.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var Constants_2 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var Color_1 = __webpack_require__(/*! browser/Color */ "./out/browser/Color.js");
exports.BOLD_CLASS = 'xterm-bold';
exports.DIM_CLASS = 'xterm-dim';
exports.ITALIC_CLASS = 'xterm-italic';
exports.UNDERLINE_CLASS = 'xterm-underline';
exports.CURSOR_CLASS = 'xterm-cursor';
exports.CURSOR_BLINK_CLASS = 'xterm-cursor-blink';
exports.CURSOR_STYLE_BLOCK_CLASS = 'xterm-cursor-block';
exports.CURSOR_STYLE_BAR_CLASS = 'xterm-cursor-bar';
exports.CURSOR_STYLE_UNDERLINE_CLASS = 'xterm-cursor-underline';
var DomRendererRowFactory = (function () {
    function DomRendererRowFactory(_document, _optionsService, _colors) {
        this._document = _document;
        this._optionsService = _optionsService;
        this._colors = _colors;
        this._workCell = new CellData_1.CellData();
    }
    DomRendererRowFactory.prototype.setColors = function (colors) {
        this._colors = colors;
    };
    DomRendererRowFactory.prototype.createRow = function (lineData, isCursorRow, cursorStyle, cursorX, cursorBlink, cellWidth, cols) {
        var fragment = this._document.createDocumentFragment();
        var lineLength = 0;
        for (var x = Math.min(lineData.length, cols) - 1; x >= 0; x--) {
            if (lineData.loadCell(x, this._workCell).getCode() !== Constants_2.NULL_CELL_CODE || (isCursorRow && x === cursorX)) {
                lineLength = x + 1;
                break;
            }
        }
        for (var x = 0; x < lineLength; x++) {
            lineData.loadCell(x, this._workCell);
            var width = this._workCell.getWidth();
            if (width === 0) {
                continue;
            }
            var charElement = this._document.createElement('span');
            if (width > 1) {
                charElement.style.width = cellWidth * width + "px";
            }
            if (isCursorRow && x === cursorX) {
                charElement.classList.add(exports.CURSOR_CLASS);
                if (cursorBlink) {
                    charElement.classList.add(exports.CURSOR_BLINK_CLASS);
                }
                switch (cursorStyle) {
                    case 'bar':
                        charElement.classList.add(exports.CURSOR_STYLE_BAR_CLASS);
                        break;
                    case 'underline':
                        charElement.classList.add(exports.CURSOR_STYLE_UNDERLINE_CLASS);
                        break;
                    default:
                        charElement.classList.add(exports.CURSOR_STYLE_BLOCK_CLASS);
                        break;
                }
            }
            if (this._workCell.isBold()) {
                charElement.classList.add(exports.BOLD_CLASS);
            }
            if (this._workCell.isItalic()) {
                charElement.classList.add(exports.ITALIC_CLASS);
            }
            if (this._workCell.isDim()) {
                charElement.classList.add(exports.DIM_CLASS);
            }
            if (this._workCell.isUnderline()) {
                charElement.classList.add(exports.UNDERLINE_CLASS);
            }
            if (this._workCell.isInvisible()) {
                charElement.textContent = Constants_2.WHITESPACE_CELL_CHAR;
            }
            else {
                charElement.textContent = this._workCell.getChars() || Constants_2.WHITESPACE_CELL_CHAR;
            }
            var fg = this._workCell.getFgColor();
            var fgColorMode = this._workCell.getFgColorMode();
            var bg = this._workCell.getBgColor();
            var bgColorMode = this._workCell.getBgColorMode();
            var isInverse = !!this._workCell.isInverse();
            if (isInverse) {
                var temp = fg;
                fg = bg;
                bg = temp;
                var temp2 = fgColorMode;
                fgColorMode = bgColorMode;
                bgColorMode = temp2;
            }
            switch (fgColorMode) {
                case 16777216:
                case 33554432:
                    if (this._workCell.isBold() && fg < 8 && this._optionsService.options.drawBoldTextInBrightColors) {
                        fg += 8;
                    }
                    if (!this._applyMinimumContrast(charElement, this._colors.background, this._colors.ansi[fg])) {
                        charElement.classList.add("xterm-fg-" + fg);
                    }
                    break;
                case 50331648:
                    var color_1 = Color_1.rgba.toColor((fg >> 16) & 0xFF, (fg >> 8) & 0xFF, (fg) & 0xFF);
                    if (!this._applyMinimumContrast(charElement, this._colors.background, color_1)) {
                        this._addStyle(charElement, "color:#" + padStart(fg.toString(16), '0', 6));
                    }
                    break;
                case 0:
                default:
                    if (!this._applyMinimumContrast(charElement, this._colors.background, this._colors.foreground)) {
                        if (isInverse) {
                            charElement.classList.add("xterm-fg-" + Constants_1.INVERTED_DEFAULT_COLOR);
                        }
                    }
            }
            switch (bgColorMode) {
                case 16777216:
                case 33554432:
                    charElement.classList.add("xterm-bg-" + bg);
                    break;
                case 50331648:
                    this._addStyle(charElement, "background-color:#" + padStart(bg.toString(16), '0', 6));
                    break;
                case 0:
                default:
                    if (isInverse) {
                        charElement.classList.add("xterm-bg-" + Constants_1.INVERTED_DEFAULT_COLOR);
                    }
            }
            fragment.appendChild(charElement);
        }
        return fragment;
    };
    DomRendererRowFactory.prototype._applyMinimumContrast = function (element, bg, fg) {
        if (this._optionsService.options.minimumContrastRatio === 1) {
            return false;
        }
        var adjustedColor = this._colors.contrastCache.getColor(this._workCell.bg, this._workCell.fg);
        if (adjustedColor === undefined) {
            adjustedColor = Color_1.color.ensureContrastRatio(bg, fg, this._optionsService.options.minimumContrastRatio);
            this._colors.contrastCache.setColor(this._workCell.bg, this._workCell.fg, (adjustedColor !== null && adjustedColor !== void 0 ? adjustedColor : null));
        }
        if (adjustedColor) {
            this._addStyle(element, "color:" + adjustedColor.css);
            return true;
        }
        return false;
    };
    DomRendererRowFactory.prototype._addStyle = function (element, style) {
        element.setAttribute('style', "" + (element.getAttribute('style') || '') + style + ";");
    };
    return DomRendererRowFactory;
}());
exports.DomRendererRowFactory = DomRendererRowFactory;
function padStart(text, padChar, length) {
    while (text.length < length) {
        text = padChar + text;
    }
    return text;
}


/***/ }),

/***/ "./out/browser/selection/SelectionModel.js":
/*!*************************************************!*\
  !*** ./out/browser/selection/SelectionModel.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SelectionModel = (function () {
    function SelectionModel(_bufferService) {
        this._bufferService = _bufferService;
        this.isSelectAllActive = false;
        this.selectionStartLength = 0;
    }
    SelectionModel.prototype.clearSelection = function () {
        this.selectionStart = undefined;
        this.selectionEnd = undefined;
        this.isSelectAllActive = false;
        this.selectionStartLength = 0;
    };
    Object.defineProperty(SelectionModel.prototype, "finalSelectionStart", {
        get: function () {
            if (this.isSelectAllActive) {
                return [0, 0];
            }
            if (!this.selectionEnd || !this.selectionStart) {
                return this.selectionStart;
            }
            return this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionModel.prototype, "finalSelectionEnd", {
        get: function () {
            if (this.isSelectAllActive) {
                return [this._bufferService.cols, this._bufferService.buffer.ybase + this._bufferService.rows - 1];
            }
            if (!this.selectionStart) {
                return undefined;
            }
            if (!this.selectionEnd || this.areSelectionValuesReversed()) {
                var startPlusLength = this.selectionStart[0] + this.selectionStartLength;
                if (startPlusLength > this._bufferService.cols) {
                    return [startPlusLength % this._bufferService.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._bufferService.cols)];
                }
                return [startPlusLength, this.selectionStart[1]];
            }
            if (this.selectionStartLength) {
                if (this.selectionEnd[1] === this.selectionStart[1]) {
                    return [Math.max(this.selectionStart[0] + this.selectionStartLength, this.selectionEnd[0]), this.selectionEnd[1]];
                }
            }
            return this.selectionEnd;
        },
        enumerable: true,
        configurable: true
    });
    SelectionModel.prototype.areSelectionValuesReversed = function () {
        var start = this.selectionStart;
        var end = this.selectionEnd;
        if (!start || !end) {
            return false;
        }
        return start[1] > end[1] || (start[1] === end[1] && start[0] > end[0]);
    };
    SelectionModel.prototype.onTrim = function (amount) {
        if (this.selectionStart) {
            this.selectionStart[1] -= amount;
        }
        if (this.selectionEnd) {
            this.selectionEnd[1] -= amount;
        }
        if (this.selectionEnd && this.selectionEnd[1] < 0) {
            this.clearSelection();
            return true;
        }
        if (this.selectionStart && this.selectionStart[1] < 0) {
            this.selectionStart[1] = 0;
        }
        return false;
    };
    return SelectionModel;
}());
exports.SelectionModel = SelectionModel;


/***/ }),

/***/ "./out/browser/services/CharSizeService.js":
/*!*************************************************!*\
  !*** ./out/browser/services/CharSizeService.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var CharSizeService = (function () {
    function CharSizeService(document, parentElement, _optionsService) {
        this.document = document;
        this.parentElement = parentElement;
        this._optionsService = _optionsService;
        this.width = 0;
        this.height = 0;
        this._onCharSizeChange = new EventEmitter_1.EventEmitter();
        this._measureStrategy = new DomMeasureStrategy(document, parentElement, this._optionsService);
    }
    Object.defineProperty(CharSizeService.prototype, "hasValidSize", {
        get: function () { return this.width > 0 && this.height > 0; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CharSizeService.prototype, "onCharSizeChange", {
        get: function () { return this._onCharSizeChange.event; },
        enumerable: true,
        configurable: true
    });
    CharSizeService.prototype.measure = function () {
        var result = this._measureStrategy.measure();
        if (result.width !== this.width || result.height !== this.height) {
            this.width = result.width;
            this.height = result.height;
            this._onCharSizeChange.fire();
        }
    };
    CharSizeService = __decorate([
        __param(2, Services_1.IOptionsService)
    ], CharSizeService);
    return CharSizeService;
}());
exports.CharSizeService = CharSizeService;
var DomMeasureStrategy = (function () {
    function DomMeasureStrategy(_document, _parentElement, _optionsService) {
        this._document = _document;
        this._parentElement = _parentElement;
        this._optionsService = _optionsService;
        this._result = { width: 0, height: 0 };
        this._measureElement = this._document.createElement('span');
        this._measureElement.classList.add('xterm-char-measure-element');
        this._measureElement.textContent = 'W';
        this._measureElement.setAttribute('aria-hidden', 'true');
        this._parentElement.appendChild(this._measureElement);
    }
    DomMeasureStrategy.prototype.measure = function () {
        this._measureElement.style.fontFamily = this._optionsService.options.fontFamily;
        this._measureElement.style.fontSize = this._optionsService.options.fontSize + "px";
        var geometry = this._measureElement.getBoundingClientRect();
        if (geometry.width !== 0 && geometry.height !== 0) {
            this._result.width = geometry.width;
            this._result.height = Math.ceil(geometry.height);
        }
        return this._result;
    };
    return DomMeasureStrategy;
}());


/***/ }),

/***/ "./out/browser/services/CoreBrowserService.js":
/*!****************************************************!*\
  !*** ./out/browser/services/CoreBrowserService.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CoreBrowserService = (function () {
    function CoreBrowserService(_textarea) {
        this._textarea = _textarea;
    }
    Object.defineProperty(CoreBrowserService.prototype, "isFocused", {
        get: function () {
            return document.activeElement === this._textarea && document.hasFocus();
        },
        enumerable: true,
        configurable: true
    });
    return CoreBrowserService;
}());
exports.CoreBrowserService = CoreBrowserService;


/***/ }),

/***/ "./out/browser/services/MouseService.js":
/*!**********************************************!*\
  !*** ./out/browser/services/MouseService.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! ./Services */ "./out/browser/services/Services.js");
var Mouse_1 = __webpack_require__(/*! browser/input/Mouse */ "./out/browser/input/Mouse.js");
var MouseService = (function () {
    function MouseService(_renderService, _charSizeService) {
        this._renderService = _renderService;
        this._charSizeService = _charSizeService;
    }
    MouseService.prototype.getCoords = function (event, element, colCount, rowCount, isSelection) {
        return Mouse_1.getCoords(event, element, colCount, rowCount, this._charSizeService.hasValidSize, this._renderService.dimensions.actualCellWidth, this._renderService.dimensions.actualCellHeight, isSelection);
    };
    MouseService.prototype.getRawByteCoords = function (event, element, colCount, rowCount) {
        var coords = this.getCoords(event, element, colCount, rowCount);
        return Mouse_1.getRawByteCoords(coords);
    };
    MouseService = __decorate([
        __param(0, Services_1.IRenderService),
        __param(1, Services_1.ICharSizeService)
    ], MouseService);
    return MouseService;
}());
exports.MouseService = MouseService;


/***/ }),

/***/ "./out/browser/services/RenderService.js":
/*!***********************************************!*\
  !*** ./out/browser/services/RenderService.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var RenderDebouncer_1 = __webpack_require__(/*! browser/RenderDebouncer */ "./out/browser/RenderDebouncer.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var ScreenDprMonitor_1 = __webpack_require__(/*! browser/ScreenDprMonitor */ "./out/browser/ScreenDprMonitor.js");
var Lifecycle_2 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var Services_2 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var RenderService = (function (_super) {
    __extends(RenderService, _super);
    function RenderService(_renderer, _rowCount, screenElement, optionsService, charSizeService) {
        var _this = _super.call(this) || this;
        _this._renderer = _renderer;
        _this._rowCount = _rowCount;
        _this.screenElement = screenElement;
        _this.optionsService = optionsService;
        _this.charSizeService = charSizeService;
        _this._isPaused = false;
        _this._needsFullRefresh = false;
        _this._canvasWidth = 0;
        _this._canvasHeight = 0;
        _this._onDimensionsChange = new EventEmitter_1.EventEmitter();
        _this._onRender = new EventEmitter_1.EventEmitter();
        _this._onRefreshRequest = new EventEmitter_1.EventEmitter();
        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(function (start, end) { return _this._renderRows(start, end); });
        _this.register(_this._renderDebouncer);
        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();
        _this._screenDprMonitor.setListener(function () { return _this.onDevicePixelRatioChange(); });
        _this.register(_this._screenDprMonitor);
        _this.register(optionsService.onOptionChange(function () { return _this._renderer.onOptionsChanged(); }));
        _this.register(charSizeService.onCharSizeChange(function () { return _this.onCharSizeChanged(); }));
        _this._renderer.onRequestRefreshRows(function (e) { return _this.refreshRows(e.start, e.end); });
        _this.register(Lifecycle_2.addDisposableDomListener(window, 'resize', function () { return _this.onDevicePixelRatioChange(); }));
        if ('IntersectionObserver' in window) {
            var observer_1 = new IntersectionObserver(function (e) { return _this._onIntersectionChange(e[e.length - 1]); }, { threshold: 0 });
            observer_1.observe(screenElement);
            _this.register({ dispose: function () { return observer_1.disconnect(); } });
        }
        return _this;
    }
    Object.defineProperty(RenderService.prototype, "onDimensionsChange", {
        get: function () { return this._onDimensionsChange.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RenderService.prototype, "onRender", {
        get: function () { return this._onRender.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RenderService.prototype, "onRefreshRequest", {
        get: function () { return this._onRefreshRequest.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RenderService.prototype, "dimensions", {
        get: function () { return this._renderer.dimensions; },
        enumerable: true,
        configurable: true
    });
    RenderService.prototype._onIntersectionChange = function (entry) {
        this._isPaused = entry.intersectionRatio === 0;
        if (!this._isPaused && this._needsFullRefresh) {
            this.refreshRows(0, this._rowCount - 1);
            this._needsFullRefresh = false;
        }
    };
    RenderService.prototype.refreshRows = function (start, end) {
        if (this._isPaused) {
            this._needsFullRefresh = true;
            return;
        }
        this._renderDebouncer.refresh(start, end, this._rowCount);
    };
    RenderService.prototype._renderRows = function (start, end) {
        this._renderer.renderRows(start, end);
        this._onRender.fire({ start: start, end: end });
    };
    RenderService.prototype.resize = function (cols, rows) {
        this._rowCount = rows;
        this._fireOnCanvasResize();
    };
    RenderService.prototype.changeOptions = function () {
        this._renderer.onOptionsChanged();
        this.refreshRows(0, this._rowCount - 1);
        this._fireOnCanvasResize();
    };
    RenderService.prototype._fireOnCanvasResize = function () {
        if (this._renderer.dimensions.canvasWidth === this._canvasWidth && this._renderer.dimensions.canvasHeight === this._canvasHeight) {
            return;
        }
        this._onDimensionsChange.fire(this._renderer.dimensions);
    };
    RenderService.prototype.dispose = function () {
        this._renderer.dispose();
        _super.prototype.dispose.call(this);
    };
    RenderService.prototype.setRenderer = function (renderer) {
        var _this = this;
        this._renderer.dispose();
        this._renderer = renderer;
        this._renderer.onRequestRefreshRows(function (e) { return _this.refreshRows(e.start, e.end); });
        this.refreshRows(0, this._rowCount - 1);
    };
    RenderService.prototype._fullRefresh = function () {
        if (this._isPaused) {
            this._needsFullRefresh = true;
        }
        else {
            this.refreshRows(0, this._rowCount - 1);
        }
    };
    RenderService.prototype.setColors = function (colors) {
        this._renderer.setColors(colors);
        this._fullRefresh();
    };
    RenderService.prototype.onDevicePixelRatioChange = function () {
        this._renderer.onDevicePixelRatioChange();
        this.refreshRows(0, this._rowCount - 1);
    };
    RenderService.prototype.onResize = function (cols, rows) {
        this._renderer.onResize(cols, rows);
        this._fullRefresh();
    };
    RenderService.prototype.onCharSizeChanged = function () {
        this._renderer.onCharSizeChanged();
    };
    RenderService.prototype.onBlur = function () {
        this._renderer.onBlur();
    };
    RenderService.prototype.onFocus = function () {
        this._renderer.onFocus();
    };
    RenderService.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        this._renderer.onSelectionChanged(start, end, columnSelectMode);
    };
    RenderService.prototype.onCursorMove = function () {
        this._renderer.onCursorMove();
    };
    RenderService.prototype.clear = function () {
        this._renderer.clear();
    };
    RenderService.prototype.registerCharacterJoiner = function (handler) {
        return this._renderer.registerCharacterJoiner(handler);
    };
    RenderService.prototype.deregisterCharacterJoiner = function (joinerId) {
        return this._renderer.deregisterCharacterJoiner(joinerId);
    };
    RenderService = __decorate([
        __param(3, Services_1.IOptionsService),
        __param(4, Services_2.ICharSizeService)
    ], RenderService);
    return RenderService;
}(Lifecycle_1.Disposable));
exports.RenderService = RenderService;


/***/ }),

/***/ "./out/browser/services/SelectionService.js":
/*!**************************************************!*\
  !*** ./out/browser/services/SelectionService.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Browser = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var SelectionModel_1 = __webpack_require__(/*! browser/selection/SelectionModel */ "./out/browser/selection/SelectionModel.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var Mouse_1 = __webpack_require__(/*! browser/input/Mouse */ "./out/browser/input/Mouse.js");
var MoveToCell_1 = __webpack_require__(/*! browser/input/MoveToCell */ "./out/browser/input/MoveToCell.js");
var DRAG_SCROLL_MAX_THRESHOLD = 50;
var DRAG_SCROLL_MAX_SPEED = 15;
var DRAG_SCROLL_INTERVAL = 50;
var ALT_CLICK_MOVE_CURSOR_TIME = 500;
var NON_BREAKING_SPACE_CHAR = String.fromCharCode(160);
var ALL_NON_BREAKING_SPACE_REGEX = new RegExp(NON_BREAKING_SPACE_CHAR, 'g');
var SelectionService = (function () {
    function SelectionService(_scrollLines, _element, _screenElement, _charSizeService, _bufferService, _coreService, _mouseService, _optionsService) {
        var _this = this;
        this._scrollLines = _scrollLines;
        this._element = _element;
        this._screenElement = _screenElement;
        this._charSizeService = _charSizeService;
        this._bufferService = _bufferService;
        this._coreService = _coreService;
        this._mouseService = _mouseService;
        this._optionsService = _optionsService;
        this._dragScrollAmount = 0;
        this._enabled = true;
        this._workCell = new CellData_1.CellData();
        this._mouseDownTimeStamp = 0;
        this._onLinuxMouseSelection = new EventEmitter_1.EventEmitter();
        this._onRedrawRequest = new EventEmitter_1.EventEmitter();
        this._onSelectionChange = new EventEmitter_1.EventEmitter();
        this._mouseMoveListener = function (event) { return _this._onMouseMove(event); };
        this._mouseUpListener = function (event) { return _this._onMouseUp(event); };
        this._coreService.onUserInput(function () {
            if (_this.hasSelection) {
                _this.clearSelection();
            }
        });
        this._trimListener = this._bufferService.buffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });
        this._bufferService.buffers.onBufferActivate(function (e) { return _this._onBufferActivate(e); });
        this.enable();
        this._model = new SelectionModel_1.SelectionModel(this._bufferService);
        this._activeSelectionMode = 0;
    }
    Object.defineProperty(SelectionService.prototype, "onLinuxMouseSelection", {
        get: function () { return this._onLinuxMouseSelection.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "onRedrawRequest", {
        get: function () { return this._onRedrawRequest.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "onSelectionChange", {
        get: function () { return this._onSelectionChange.event; },
        enumerable: true,
        configurable: true
    });
    SelectionService.prototype.dispose = function () {
        this._removeMouseDownListeners();
    };
    SelectionService.prototype.reset = function () {
        this.clearSelection();
    };
    SelectionService.prototype.disable = function () {
        this.clearSelection();
        this._enabled = false;
    };
    SelectionService.prototype.enable = function () {
        this._enabled = true;
    };
    Object.defineProperty(SelectionService.prototype, "selectionStart", {
        get: function () { return this._model.finalSelectionStart; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "selectionEnd", {
        get: function () { return this._model.finalSelectionEnd; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "hasSelection", {
        get: function () {
            var start = this._model.finalSelectionStart;
            var end = this._model.finalSelectionEnd;
            if (!start || !end) {
                return false;
            }
            return start[0] !== end[0] || start[1] !== end[1];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "selectionText", {
        get: function () {
            var start = this._model.finalSelectionStart;
            var end = this._model.finalSelectionEnd;
            if (!start || !end) {
                return '';
            }
            var buffer = this._bufferService.buffer;
            var result = [];
            if (this._activeSelectionMode === 3) {
                if (start[0] === end[0]) {
                    return '';
                }
                for (var i = start[1]; i <= end[1]; i++) {
                    var lineText = buffer.translateBufferLineToString(i, true, start[0], end[0]);
                    result.push(lineText);
                }
            }
            else {
                var startRowEndCol = start[1] === end[1] ? end[0] : undefined;
                result.push(buffer.translateBufferLineToString(start[1], true, start[0], startRowEndCol));
                for (var i = start[1] + 1; i <= end[1] - 1; i++) {
                    var bufferLine = buffer.lines.get(i);
                    var lineText = buffer.translateBufferLineToString(i, true);
                    if (bufferLine && bufferLine.isWrapped) {
                        result[result.length - 1] += lineText;
                    }
                    else {
                        result.push(lineText);
                    }
                }
                if (start[1] !== end[1]) {
                    var bufferLine = buffer.lines.get(end[1]);
                    var lineText = buffer.translateBufferLineToString(end[1], true, 0, end[0]);
                    if (bufferLine && bufferLine.isWrapped) {
                        result[result.length - 1] += lineText;
                    }
                    else {
                        result.push(lineText);
                    }
                }
            }
            var formattedResult = result.map(function (line) {
                return line.replace(ALL_NON_BREAKING_SPACE_REGEX, ' ');
            }).join(Browser.isWindows ? '\r\n' : '\n');
            return formattedResult;
        },
        enumerable: true,
        configurable: true
    });
    SelectionService.prototype.clearSelection = function () {
        this._model.clearSelection();
        this._removeMouseDownListeners();
        this.refresh();
        this._onSelectionChange.fire();
    };
    SelectionService.prototype.refresh = function (isLinuxMouseSelection) {
        var _this = this;
        if (!this._refreshAnimationFrame) {
            this._refreshAnimationFrame = window.requestAnimationFrame(function () { return _this._refresh(); });
        }
        if (Browser.isLinux && isLinuxMouseSelection) {
            var selectionText = this.selectionText;
            if (selectionText.length) {
                this._onLinuxMouseSelection.fire(this.selectionText);
            }
        }
    };
    SelectionService.prototype._refresh = function () {
        this._refreshAnimationFrame = undefined;
        this._onRedrawRequest.fire({
            start: this._model.finalSelectionStart,
            end: this._model.finalSelectionEnd,
            columnSelectMode: this._activeSelectionMode === 3
        });
    };
    SelectionService.prototype.isClickInSelection = function (event) {
        var coords = this._getMouseBufferCoords(event);
        var start = this._model.finalSelectionStart;
        var end = this._model.finalSelectionEnd;
        if (!start || !end || !coords) {
            return false;
        }
        return this._areCoordsInSelection(coords, start, end);
    };
    SelectionService.prototype._areCoordsInSelection = function (coords, start, end) {
        return (coords[1] > start[1] && coords[1] < end[1]) ||
            (start[1] === end[1] && coords[1] === start[1] && coords[0] >= start[0] && coords[0] < end[0]) ||
            (start[1] < end[1] && coords[1] === end[1] && coords[0] < end[0]) ||
            (start[1] < end[1] && coords[1] === start[1] && coords[0] >= start[0]);
    };
    SelectionService.prototype.selectWordAtCursor = function (event) {
        var coords = this._getMouseBufferCoords(event);
        if (coords) {
            this._selectWordAt(coords, false);
            this._model.selectionEnd = undefined;
            this.refresh(true);
        }
    };
    SelectionService.prototype.selectAll = function () {
        this._model.isSelectAllActive = true;
        this.refresh();
        this._onSelectionChange.fire();
    };
    SelectionService.prototype.selectLines = function (start, end) {
        this._model.clearSelection();
        start = Math.max(start, 0);
        end = Math.min(end, this._bufferService.buffer.lines.length - 1);
        this._model.selectionStart = [0, start];
        this._model.selectionEnd = [this._bufferService.cols, end];
        this.refresh();
        this._onSelectionChange.fire();
    };
    SelectionService.prototype._onTrim = function (amount) {
        var needsRefresh = this._model.onTrim(amount);
        if (needsRefresh) {
            this.refresh();
        }
    };
    SelectionService.prototype._getMouseBufferCoords = function (event) {
        var coords = this._mouseService.getCoords(event, this._screenElement, this._bufferService.cols, this._bufferService.rows, true);
        if (!coords) {
            return undefined;
        }
        coords[0]--;
        coords[1]--;
        coords[1] += this._bufferService.buffer.ydisp;
        return coords;
    };
    SelectionService.prototype._getMouseEventScrollAmount = function (event) {
        var offset = Mouse_1.getCoordsRelativeToElement(event, this._screenElement)[1];
        var terminalHeight = this._bufferService.rows * Math.ceil(this._charSizeService.height * this._optionsService.options.lineHeight);
        if (offset >= 0 && offset <= terminalHeight) {
            return 0;
        }
        if (offset > terminalHeight) {
            offset -= terminalHeight;
        }
        offset = Math.min(Math.max(offset, -DRAG_SCROLL_MAX_THRESHOLD), DRAG_SCROLL_MAX_THRESHOLD);
        offset /= DRAG_SCROLL_MAX_THRESHOLD;
        return (offset / Math.abs(offset)) + Math.round(offset * (DRAG_SCROLL_MAX_SPEED - 1));
    };
    SelectionService.prototype.shouldForceSelection = function (event) {
        if (Browser.isMac) {
            return event.altKey && this._optionsService.options.macOptionClickForcesSelection;
        }
        return event.shiftKey;
    };
    SelectionService.prototype.onMouseDown = function (event) {
        this._mouseDownTimeStamp = event.timeStamp;
        if (event.button === 2 && this.hasSelection) {
            return;
        }
        if (event.button !== 0) {
            return;
        }
        if (!this._enabled) {
            if (!this.shouldForceSelection(event)) {
                return;
            }
            event.stopPropagation();
        }
        event.preventDefault();
        this._dragScrollAmount = 0;
        if (this._enabled && event.shiftKey) {
            this._onIncrementalClick(event);
        }
        else {
            if (event.detail === 1) {
                this._onSingleClick(event);
            }
            else if (event.detail === 2) {
                this._onDoubleClick(event);
            }
            else if (event.detail === 3) {
                this._onTripleClick(event);
            }
        }
        this._addMouseDownListeners();
        this.refresh(true);
    };
    SelectionService.prototype._addMouseDownListeners = function () {
        var _this = this;
        if (this._screenElement.ownerDocument) {
            this._screenElement.ownerDocument.addEventListener('mousemove', this._mouseMoveListener);
            this._screenElement.ownerDocument.addEventListener('mouseup', this._mouseUpListener);
        }
        this._dragScrollIntervalTimer = window.setInterval(function () { return _this._dragScroll(); }, DRAG_SCROLL_INTERVAL);
    };
    SelectionService.prototype._removeMouseDownListeners = function () {
        if (this._screenElement.ownerDocument) {
            this._screenElement.ownerDocument.removeEventListener('mousemove', this._mouseMoveListener);
            this._screenElement.ownerDocument.removeEventListener('mouseup', this._mouseUpListener);
        }
        clearInterval(this._dragScrollIntervalTimer);
        this._dragScrollIntervalTimer = undefined;
    };
    SelectionService.prototype._onIncrementalClick = function (event) {
        if (this._model.selectionStart) {
            this._model.selectionEnd = this._getMouseBufferCoords(event);
        }
    };
    SelectionService.prototype._onSingleClick = function (event) {
        this._model.selectionStartLength = 0;
        this._model.isSelectAllActive = false;
        this._activeSelectionMode = this.shouldColumnSelect(event) ? 3 : 0;
        this._model.selectionStart = this._getMouseBufferCoords(event);
        if (!this._model.selectionStart) {
            return;
        }
        this._model.selectionEnd = undefined;
        var line = this._bufferService.buffer.lines.get(this._model.selectionStart[1]);
        if (!line) {
            return;
        }
        if (line.length === this._model.selectionStart[0]) {
            return;
        }
        if (line.hasWidth(this._model.selectionStart[0]) === 0) {
            this._model.selectionStart[0]++;
        }
    };
    SelectionService.prototype._onDoubleClick = function (event) {
        var coords = this._getMouseBufferCoords(event);
        if (coords) {
            this._activeSelectionMode = 1;
            this._selectWordAt(coords, true);
        }
    };
    SelectionService.prototype._onTripleClick = function (event) {
        var coords = this._getMouseBufferCoords(event);
        if (coords) {
            this._activeSelectionMode = 2;
            this._selectLineAt(coords[1]);
        }
    };
    SelectionService.prototype.shouldColumnSelect = function (event) {
        return event.altKey && !(Browser.isMac && this._optionsService.options.macOptionClickForcesSelection);
    };
    SelectionService.prototype._onMouseMove = function (event) {
        event.stopImmediatePropagation();
        if (!this._model.selectionStart) {
            return;
        }
        var previousSelectionEnd = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;
        this._model.selectionEnd = this._getMouseBufferCoords(event);
        if (!this._model.selectionEnd) {
            this.refresh(true);
            return;
        }
        if (this._activeSelectionMode === 2) {
            if (this._model.selectionEnd[1] < this._model.selectionStart[1]) {
                this._model.selectionEnd[0] = 0;
            }
            else {
                this._model.selectionEnd[0] = this._bufferService.cols;
            }
        }
        else if (this._activeSelectionMode === 1) {
            this._selectToWordAt(this._model.selectionEnd);
        }
        this._dragScrollAmount = this._getMouseEventScrollAmount(event);
        if (this._activeSelectionMode !== 3) {
            if (this._dragScrollAmount > 0) {
                this._model.selectionEnd[0] = this._bufferService.cols;
            }
            else if (this._dragScrollAmount < 0) {
                this._model.selectionEnd[0] = 0;
            }
        }
        var buffer = this._bufferService.buffer;
        if (this._model.selectionEnd[1] < buffer.lines.length) {
            var line = buffer.lines.get(this._model.selectionEnd[1]);
            if (line && line.hasWidth(this._model.selectionEnd[0]) === 0) {
                this._model.selectionEnd[0]++;
            }
        }
        if (!previousSelectionEnd ||
            previousSelectionEnd[0] !== this._model.selectionEnd[0] ||
            previousSelectionEnd[1] !== this._model.selectionEnd[1]) {
            this.refresh(true);
        }
    };
    SelectionService.prototype._dragScroll = function () {
        if (!this._model.selectionEnd || !this._model.selectionStart) {
            return;
        }
        if (this._dragScrollAmount) {
            this._scrollLines(this._dragScrollAmount, false);
            var buffer = this._bufferService.buffer;
            if (this._dragScrollAmount > 0) {
                if (this._activeSelectionMode !== 3) {
                    this._model.selectionEnd[0] = this._bufferService.cols;
                }
                this._model.selectionEnd[1] = Math.min(buffer.ydisp + this._bufferService.rows, buffer.lines.length - 1);
            }
            else {
                if (this._activeSelectionMode !== 3) {
                    this._model.selectionEnd[0] = 0;
                }
                this._model.selectionEnd[1] = buffer.ydisp;
            }
            this.refresh();
        }
    };
    SelectionService.prototype._onMouseUp = function (event) {
        var timeElapsed = event.timeStamp - this._mouseDownTimeStamp;
        this._removeMouseDownListeners();
        if (this.selectionText.length <= 1 && timeElapsed < ALT_CLICK_MOVE_CURSOR_TIME) {
            if (event.altKey && this._bufferService.buffer.ybase === this._bufferService.buffer.ydisp) {
                var coordinates = this._mouseService.getCoords(event, this._element, this._bufferService.cols, this._bufferService.rows, false);
                if (coordinates && coordinates[0] !== undefined && coordinates[1] !== undefined) {
                    var sequence = MoveToCell_1.moveToCellSequence(coordinates[0] - 1, coordinates[1] - 1, this._bufferService, this._coreService.decPrivateModes.applicationCursorKeys);
                    this._coreService.triggerDataEvent(sequence, true);
                }
            }
        }
        else if (this.hasSelection) {
            this._onSelectionChange.fire();
        }
    };
    SelectionService.prototype._onBufferActivate = function (e) {
        var _this = this;
        this.clearSelection();
        this._trimListener.dispose();
        this._trimListener = e.activeBuffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });
    };
    SelectionService.prototype._convertViewportColToCharacterIndex = function (bufferLine, coords) {
        var charIndex = coords[0];
        for (var i = 0; coords[0] >= i; i++) {
            var length_1 = bufferLine.loadCell(i, this._workCell).getChars().length;
            if (this._workCell.getWidth() === 0) {
                charIndex--;
            }
            else if (length_1 > 1 && coords[0] !== i) {
                charIndex += length_1 - 1;
            }
        }
        return charIndex;
    };
    SelectionService.prototype.setSelection = function (col, row, length) {
        this._model.clearSelection();
        this._removeMouseDownListeners();
        this._model.selectionStart = [col, row];
        this._model.selectionStartLength = length;
        this.refresh();
    };
    SelectionService.prototype._getWordAt = function (coords, allowWhitespaceOnlySelection, followWrappedLinesAbove, followWrappedLinesBelow) {
        if (followWrappedLinesAbove === void 0) { followWrappedLinesAbove = true; }
        if (followWrappedLinesBelow === void 0) { followWrappedLinesBelow = true; }
        if (coords[0] >= this._bufferService.cols) {
            return undefined;
        }
        var buffer = this._bufferService.buffer;
        var bufferLine = buffer.lines.get(coords[1]);
        if (!bufferLine) {
            return undefined;
        }
        var line = buffer.translateBufferLineToString(coords[1], false);
        var startIndex = this._convertViewportColToCharacterIndex(bufferLine, coords);
        var endIndex = startIndex;
        var charOffset = coords[0] - startIndex;
        var leftWideCharCount = 0;
        var rightWideCharCount = 0;
        var leftLongCharOffset = 0;
        var rightLongCharOffset = 0;
        if (line.charAt(startIndex) === ' ') {
            while (startIndex > 0 && line.charAt(startIndex - 1) === ' ') {
                startIndex--;
            }
            while (endIndex < line.length && line.charAt(endIndex + 1) === ' ') {
                endIndex++;
            }
        }
        else {
            var startCol = coords[0];
            var endCol = coords[0];
            if (bufferLine.getWidth(startCol) === 0) {
                leftWideCharCount++;
                startCol--;
            }
            if (bufferLine.getWidth(endCol) === 2) {
                rightWideCharCount++;
                endCol++;
            }
            var length_2 = bufferLine.getString(endCol).length;
            if (length_2 > 1) {
                rightLongCharOffset += length_2 - 1;
                endIndex += length_2 - 1;
            }
            while (startCol > 0 && startIndex > 0 && !this._isCharWordSeparator(bufferLine.loadCell(startCol - 1, this._workCell))) {
                bufferLine.loadCell(startCol - 1, this._workCell);
                var length_3 = this._workCell.getChars().length;
                if (this._workCell.getWidth() === 0) {
                    leftWideCharCount++;
                    startCol--;
                }
                else if (length_3 > 1) {
                    leftLongCharOffset += length_3 - 1;
                    startIndex -= length_3 - 1;
                }
                startIndex--;
                startCol--;
            }
            while (endCol < bufferLine.length && endIndex + 1 < line.length && !this._isCharWordSeparator(bufferLine.loadCell(endCol + 1, this._workCell))) {
                bufferLine.loadCell(endCol + 1, this._workCell);
                var length_4 = this._workCell.getChars().length;
                if (this._workCell.getWidth() === 2) {
                    rightWideCharCount++;
                    endCol++;
                }
                else if (length_4 > 1) {
                    rightLongCharOffset += length_4 - 1;
                    endIndex += length_4 - 1;
                }
                endIndex++;
                endCol++;
            }
        }
        endIndex++;
        var start = startIndex
            + charOffset
            - leftWideCharCount
            + leftLongCharOffset;
        var length = Math.min(this._bufferService.cols, endIndex
            - startIndex
            + leftWideCharCount
            + rightWideCharCount
            - leftLongCharOffset
            - rightLongCharOffset);
        if (!allowWhitespaceOnlySelection && line.slice(startIndex, endIndex).trim() === '') {
            return undefined;
        }
        if (followWrappedLinesAbove) {
            if (start === 0 && bufferLine.getCodePoint(0) !== 32) {
                var previousBufferLine = buffer.lines.get(coords[1] - 1);
                if (previousBufferLine && bufferLine.isWrapped && previousBufferLine.getCodePoint(this._bufferService.cols - 1) !== 32) {
                    var previousLineWordPosition = this._getWordAt([this._bufferService.cols - 1, coords[1] - 1], false, true, false);
                    if (previousLineWordPosition) {
                        var offset = this._bufferService.cols - previousLineWordPosition.start;
                        start -= offset;
                        length += offset;
                    }
                }
            }
        }
        if (followWrappedLinesBelow) {
            if (start + length === this._bufferService.cols && bufferLine.getCodePoint(this._bufferService.cols - 1) !== 32) {
                var nextBufferLine = buffer.lines.get(coords[1] + 1);
                if (nextBufferLine && nextBufferLine.isWrapped && nextBufferLine.getCodePoint(0) !== 32) {
                    var nextLineWordPosition = this._getWordAt([0, coords[1] + 1], false, false, true);
                    if (nextLineWordPosition) {
                        length += nextLineWordPosition.length;
                    }
                }
            }
        }
        return { start: start, length: length };
    };
    SelectionService.prototype._selectWordAt = function (coords, allowWhitespaceOnlySelection) {
        var wordPosition = this._getWordAt(coords, allowWhitespaceOnlySelection);
        if (wordPosition) {
            while (wordPosition.start < 0) {
                wordPosition.start += this._bufferService.cols;
                coords[1]--;
            }
            this._model.selectionStart = [wordPosition.start, coords[1]];
            this._model.selectionStartLength = wordPosition.length;
        }
    };
    SelectionService.prototype._selectToWordAt = function (coords) {
        var wordPosition = this._getWordAt(coords, true);
        if (wordPosition) {
            var endRow = coords[1];
            while (wordPosition.start < 0) {
                wordPosition.start += this._bufferService.cols;
                endRow--;
            }
            if (!this._model.areSelectionValuesReversed()) {
                while (wordPosition.start + wordPosition.length > this._bufferService.cols) {
                    wordPosition.length -= this._bufferService.cols;
                    endRow++;
                }
            }
            this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? wordPosition.start : wordPosition.start + wordPosition.length, endRow];
        }
    };
    SelectionService.prototype._isCharWordSeparator = function (cell) {
        if (cell.getWidth() === 0) {
            return false;
        }
        return this._optionsService.options.wordSeparator.indexOf(cell.getChars()) >= 0;
    };
    SelectionService.prototype._selectLineAt = function (line) {
        var wrappedRange = this._bufferService.buffer.getWrappedRangeForLine(line);
        this._model.selectionStart = [0, wrappedRange.first];
        this._model.selectionEnd = [this._bufferService.cols, wrappedRange.last];
        this._model.selectionStartLength = 0;
    };
    SelectionService = __decorate([
        __param(3, Services_1.ICharSizeService),
        __param(4, Services_2.IBufferService),
        __param(5, Services_2.ICoreService),
        __param(6, Services_1.IMouseService),
        __param(7, Services_2.IOptionsService)
    ], SelectionService);
    return SelectionService;
}());
exports.SelectionService = SelectionService;


/***/ }),

/***/ "./out/browser/services/Services.js":
/*!******************************************!*\
  !*** ./out/browser/services/Services.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ServiceRegistry_1 = __webpack_require__(/*! common/services/ServiceRegistry */ "./out/common/services/ServiceRegistry.js");
exports.ICharSizeService = ServiceRegistry_1.createDecorator('CharSizeService');
exports.ICoreBrowserService = ServiceRegistry_1.createDecorator('CoreBrowserService');
exports.IMouseService = ServiceRegistry_1.createDecorator('MouseService');
exports.IRenderService = ServiceRegistry_1.createDecorator('RenderService');
exports.ISelectionService = ServiceRegistry_1.createDecorator('SelectionService');
exports.ISoundService = ServiceRegistry_1.createDecorator('SoundService');


/***/ }),

/***/ "./out/browser/services/SoundService.js":
/*!**********************************************!*\
  !*** ./out/browser/services/SoundService.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var SoundService = (function () {
    function SoundService(_optionsService) {
        this._optionsService = _optionsService;
    }
    Object.defineProperty(SoundService, "audioContext", {
        get: function () {
            if (!SoundService._audioContext) {
                var audioContextCtor = window.AudioContext || window.webkitAudioContext;
                if (!audioContextCtor) {
                    console.warn('Web Audio API is not supported by this browser. Consider upgrading to the latest version');
                    return null;
                }
                SoundService._audioContext = new audioContextCtor();
            }
            return SoundService._audioContext;
        },
        enumerable: true,
        configurable: true
    });
    SoundService.prototype.playBellSound = function () {
        var ctx = SoundService.audioContext;
        if (!ctx) {
            return;
        }
        var bellAudioSource = ctx.createBufferSource();
        ctx.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)), function (buffer) {
            bellAudioSource.buffer = buffer;
            bellAudioSource.connect(ctx.destination);
            bellAudioSource.start(0);
        });
    };
    SoundService.prototype._base64ToArrayBuffer = function (base64) {
        var binaryString = window.atob(base64);
        var len = binaryString.length;
        var bytes = new Uint8Array(len);
        for (var i = 0; i < len; i++) {
            bytes[i] = binaryString.charCodeAt(i);
        }
        return bytes.buffer;
    };
    SoundService.prototype._removeMimeType = function (dataURI) {
        var splitUri = dataURI.split(',');
        return splitUri[1];
    };
    SoundService = __decorate([
        __param(0, Services_1.IOptionsService)
    ], SoundService);
    return SoundService;
}());
exports.SoundService = SoundService;


/***/ }),

/***/ "./out/common/CharWidth.js":
/*!*********************************!*\
  !*** ./out/common/CharWidth.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
exports.wcwidth = (function (opts) {
    var COMBINING_BMP = [
        [0x0300, 0x036F], [0x0483, 0x0486], [0x0488, 0x0489],
        [0x0591, 0x05BD], [0x05BF, 0x05BF], [0x05C1, 0x05C2],
        [0x05C4, 0x05C5], [0x05C7, 0x05C7], [0x0600, 0x0603],
        [0x0610, 0x0615], [0x064B, 0x065E], [0x0670, 0x0670],
        [0x06D6, 0x06E4], [0x06E7, 0x06E8], [0x06EA, 0x06ED],
        [0x070F, 0x070F], [0x0711, 0x0711], [0x0730, 0x074A],
        [0x07A6, 0x07B0], [0x07EB, 0x07F3], [0x0901, 0x0902],
        [0x093C, 0x093C], [0x0941, 0x0948], [0x094D, 0x094D],
        [0x0951, 0x0954], [0x0962, 0x0963], [0x0981, 0x0981],
        [0x09BC, 0x09BC], [0x09C1, 0x09C4], [0x09CD, 0x09CD],
        [0x09E2, 0x09E3], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],
        [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],
        [0x0A70, 0x0A71], [0x0A81, 0x0A82], [0x0ABC, 0x0ABC],
        [0x0AC1, 0x0AC5], [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD],
        [0x0AE2, 0x0AE3], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],
        [0x0B3F, 0x0B3F], [0x0B41, 0x0B43], [0x0B4D, 0x0B4D],
        [0x0B56, 0x0B56], [0x0B82, 0x0B82], [0x0BC0, 0x0BC0],
        [0x0BCD, 0x0BCD], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],
        [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0CBC, 0x0CBC],
        [0x0CBF, 0x0CBF], [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD],
        [0x0CE2, 0x0CE3], [0x0D41, 0x0D43], [0x0D4D, 0x0D4D],
        [0x0DCA, 0x0DCA], [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6],
        [0x0E31, 0x0E31], [0x0E34, 0x0E3A], [0x0E47, 0x0E4E],
        [0x0EB1, 0x0EB1], [0x0EB4, 0x0EB9], [0x0EBB, 0x0EBC],
        [0x0EC8, 0x0ECD], [0x0F18, 0x0F19], [0x0F35, 0x0F35],
        [0x0F37, 0x0F37], [0x0F39, 0x0F39], [0x0F71, 0x0F7E],
        [0x0F80, 0x0F84], [0x0F86, 0x0F87], [0x0F90, 0x0F97],
        [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6], [0x102D, 0x1030],
        [0x1032, 0x1032], [0x1036, 0x1037], [0x1039, 0x1039],
        [0x1058, 0x1059], [0x1160, 0x11FF], [0x135F, 0x135F],
        [0x1712, 0x1714], [0x1732, 0x1734], [0x1752, 0x1753],
        [0x1772, 0x1773], [0x17B4, 0x17B5], [0x17B7, 0x17BD],
        [0x17C6, 0x17C6], [0x17C9, 0x17D3], [0x17DD, 0x17DD],
        [0x180B, 0x180D], [0x18A9, 0x18A9], [0x1920, 0x1922],
        [0x1927, 0x1928], [0x1932, 0x1932], [0x1939, 0x193B],
        [0x1A17, 0x1A18], [0x1B00, 0x1B03], [0x1B34, 0x1B34],
        [0x1B36, 0x1B3A], [0x1B3C, 0x1B3C], [0x1B42, 0x1B42],
        [0x1B6B, 0x1B73], [0x1DC0, 0x1DCA], [0x1DFE, 0x1DFF],
        [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2063],
        [0x206A, 0x206F], [0x20D0, 0x20EF], [0x302A, 0x302F],
        [0x3099, 0x309A], [0xA806, 0xA806], [0xA80B, 0xA80B],
        [0xA825, 0xA826], [0xFB1E, 0xFB1E], [0xFE00, 0xFE0F],
        [0xFE20, 0xFE23], [0xFEFF, 0xFEFF], [0xFFF9, 0xFFFB]
    ];
    var COMBINING_HIGH = [
        [0x10A01, 0x10A03], [0x10A05, 0x10A06], [0x10A0C, 0x10A0F],
        [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F], [0x1D167, 0x1D169],
        [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],
        [0x1D242, 0x1D244], [0xE0001, 0xE0001], [0xE0020, 0xE007F],
        [0xE0100, 0xE01EF]
    ];
    function bisearch(ucs, data) {
        var min = 0;
        var max = data.length - 1;
        var mid;
        if (ucs < data[0][0] || ucs > data[max][1]) {
            return false;
        }
        while (max >= min) {
            mid = (min + max) >> 1;
            if (ucs > data[mid][1]) {
                min = mid + 1;
            }
            else if (ucs < data[mid][0]) {
                max = mid - 1;
            }
            else {
                return true;
            }
        }
        return false;
    }
    function wcwidthHigh(ucs) {
        if (bisearch(ucs, COMBINING_HIGH)) {
            return 0;
        }
        if ((ucs >= 0x20000 && ucs <= 0x2fffd) || (ucs >= 0x30000 && ucs <= 0x3fffd)) {
            return 2;
        }
        return 1;
    }
    var control = opts.control | 0;
    var table = new Uint8Array(65536);
    TypedArrayUtils_1.fill(table, 1);
    table[0] = opts.nul;
    TypedArrayUtils_1.fill(table, opts.control, 1, 32);
    TypedArrayUtils_1.fill(table, opts.control, 0x7f, 0xa0);
    TypedArrayUtils_1.fill(table, 2, 0x1100, 0x1160);
    table[0x2329] = 2;
    table[0x232a] = 2;
    TypedArrayUtils_1.fill(table, 2, 0x2e80, 0xa4d0);
    table[0x303f] = 1;
    TypedArrayUtils_1.fill(table, 2, 0xac00, 0xd7a4);
    TypedArrayUtils_1.fill(table, 2, 0xf900, 0xfb00);
    TypedArrayUtils_1.fill(table, 2, 0xfe10, 0xfe1a);
    TypedArrayUtils_1.fill(table, 2, 0xfe30, 0xfe70);
    TypedArrayUtils_1.fill(table, 2, 0xff00, 0xff61);
    TypedArrayUtils_1.fill(table, 2, 0xffe0, 0xffe7);
    for (var r = 0; r < COMBINING_BMP.length; ++r) {
        TypedArrayUtils_1.fill(table, 0, COMBINING_BMP[r][0], COMBINING_BMP[r][1] + 1);
    }
    return function (num) {
        if (num < 32) {
            return control | 0;
        }
        if (num < 127) {
            return 1;
        }
        if (num < 65536) {
            return table[num];
        }
        return wcwidthHigh(num);
    };
})({ nul: 0, control: 0 });
function getStringCellWidth(s) {
    var result = 0;
    var length = s.length;
    for (var i = 0; i < length; ++i) {
        var code = s.charCodeAt(i);
        if (0xD800 <= code && code <= 0xDBFF) {
            if (++i >= length) {
                return result + exports.wcwidth(code);
            }
            var second = s.charCodeAt(i);
            if (0xDC00 <= second && second <= 0xDFFF) {
                code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;
            }
            else {
                result += exports.wcwidth(second);
            }
        }
        result += exports.wcwidth(code);
    }
    return result;
}
exports.getStringCellWidth = getStringCellWidth;


/***/ }),

/***/ "./out/common/CircularList.js":
/*!************************************!*\
  !*** ./out/common/CircularList.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var CircularList = (function () {
    function CircularList(_maxLength) {
        this._maxLength = _maxLength;
        this.onDeleteEmitter = new EventEmitter_1.EventEmitter();
        this.onInsertEmitter = new EventEmitter_1.EventEmitter();
        this.onTrimEmitter = new EventEmitter_1.EventEmitter();
        this._array = new Array(this._maxLength);
        this._startIndex = 0;
        this._length = 0;
    }
    Object.defineProperty(CircularList.prototype, "onDelete", {
        get: function () { return this.onDeleteEmitter.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "onInsert", {
        get: function () { return this.onInsertEmitter.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "onTrim", {
        get: function () { return this.onTrimEmitter.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "maxLength", {
        get: function () {
            return this._maxLength;
        },
        set: function (newMaxLength) {
            if (this._maxLength === newMaxLength) {
                return;
            }
            var newArray = new Array(newMaxLength);
            for (var i = 0; i < Math.min(newMaxLength, this.length); i++) {
                newArray[i] = this._array[this._getCyclicIndex(i)];
            }
            this._array = newArray;
            this._maxLength = newMaxLength;
            this._startIndex = 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "length", {
        get: function () {
            return this._length;
        },
        set: function (newLength) {
            if (newLength > this._length) {
                for (var i = this._length; i < newLength; i++) {
                    this._array[i] = undefined;
                }
            }
            this._length = newLength;
        },
        enumerable: true,
        configurable: true
    });
    CircularList.prototype.get = function (index) {
        return this._array[this._getCyclicIndex(index)];
    };
    CircularList.prototype.set = function (index, value) {
        this._array[this._getCyclicIndex(index)] = value;
    };
    CircularList.prototype.push = function (value) {
        this._array[this._getCyclicIndex(this._length)] = value;
        if (this._length === this._maxLength) {
            this._startIndex = ++this._startIndex % this._maxLength;
            this.onTrimEmitter.fire(1);
        }
        else {
            this._length++;
        }
    };
    CircularList.prototype.recycle = function () {
        if (this._length !== this._maxLength) {
            throw new Error('Can only recycle when the buffer is full');
        }
        this._startIndex = ++this._startIndex % this._maxLength;
        this.onTrimEmitter.fire(1);
        return this._array[this._getCyclicIndex(this._length - 1)];
    };
    Object.defineProperty(CircularList.prototype, "isFull", {
        get: function () {
            return this._length === this._maxLength;
        },
        enumerable: true,
        configurable: true
    });
    CircularList.prototype.pop = function () {
        return this._array[this._getCyclicIndex(this._length-- - 1)];
    };
    CircularList.prototype.splice = function (start, deleteCount) {
        var items = [];
        for (var _i = 2; _i < arguments.length; _i++) {
            items[_i - 2] = arguments[_i];
        }
        if (deleteCount) {
            for (var i = start; i < this._length - deleteCount; i++) {
                this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + deleteCount)];
            }
            this._length -= deleteCount;
        }
        for (var i = this._length - 1; i >= start; i--) {
            this._array[this._getCyclicIndex(i + items.length)] = this._array[this._getCyclicIndex(i)];
        }
        for (var i = 0; i < items.length; i++) {
            this._array[this._getCyclicIndex(start + i)] = items[i];
        }
        if (this._length + items.length > this._maxLength) {
            var countToTrim = (this._length + items.length) - this._maxLength;
            this._startIndex += countToTrim;
            this._length = this._maxLength;
            this.onTrimEmitter.fire(countToTrim);
        }
        else {
            this._length += items.length;
        }
    };
    CircularList.prototype.trimStart = function (count) {
        if (count > this._length) {
            count = this._length;
        }
        this._startIndex += count;
        this._length -= count;
        this.onTrimEmitter.fire(count);
    };
    CircularList.prototype.shiftElements = function (start, count, offset) {
        if (count <= 0) {
            return;
        }
        if (start < 0 || start >= this._length) {
            throw new Error('start argument out of range');
        }
        if (start + offset < 0) {
            throw new Error('Cannot shift elements in list beyond index 0');
        }
        if (offset > 0) {
            for (var i = count - 1; i >= 0; i--) {
                this.set(start + i + offset, this.get(start + i));
            }
            var expandListBy = (start + count + offset) - this._length;
            if (expandListBy > 0) {
                this._length += expandListBy;
                while (this._length > this._maxLength) {
                    this._length--;
                    this._startIndex++;
                    this.onTrimEmitter.fire(1);
                }
            }
        }
        else {
            for (var i = 0; i < count; i++) {
                this.set(start + i + offset, this.get(start + i));
            }
        }
    };
    CircularList.prototype._getCyclicIndex = function (index) {
        return (this._startIndex + index) % this._maxLength;
    };
    return CircularList;
}());
exports.CircularList = CircularList;


/***/ }),

/***/ "./out/common/Clone.js":
/*!*****************************!*\
  !*** ./out/common/Clone.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function clone(val, depth) {
    if (depth === void 0) { depth = 5; }
    if (typeof val !== 'object') {
        return val;
    }
    var clonedObject = Array.isArray(val) ? [] : {};
    for (var key in val) {
        clonedObject[key] = depth <= 1 ? val[key] : (val[key] ? clone(val[key], depth - 1) : val[key]);
    }
    return clonedObject;
}
exports.clone = clone;


/***/ }),

/***/ "./out/common/EventEmitter.js":
/*!************************************!*\
  !*** ./out/common/EventEmitter.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EventEmitter = (function () {
    function EventEmitter() {
        this._listeners = [];
        this._disposed = false;
    }
    Object.defineProperty(EventEmitter.prototype, "event", {
        get: function () {
            var _this = this;
            if (!this._event) {
                this._event = function (listener) {
                    _this._listeners.push(listener);
                    var disposable = {
                        dispose: function () {
                            if (!_this._disposed) {
                                for (var i = 0; i < _this._listeners.length; i++) {
                                    if (_this._listeners[i] === listener) {
                                        _this._listeners.splice(i, 1);
                                        return;
                                    }
                                }
                            }
                        }
                    };
                    return disposable;
                };
            }
            return this._event;
        },
        enumerable: true,
        configurable: true
    });
    EventEmitter.prototype.fire = function (arg1, arg2) {
        var queue = [];
        for (var i = 0; i < this._listeners.length; i++) {
            queue.push(this._listeners[i]);
        }
        for (var i = 0; i < queue.length; i++) {
            queue[i].call(undefined, arg1, arg2);
        }
    };
    EventEmitter.prototype.dispose = function () {
        if (this._listeners) {
            this._listeners.length = 0;
        }
        this._disposed = true;
    };
    return EventEmitter;
}());
exports.EventEmitter = EventEmitter;


/***/ }),

/***/ "./out/common/Lifecycle.js":
/*!*********************************!*\
  !*** ./out/common/Lifecycle.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Disposable = (function () {
    function Disposable() {
        this._disposables = [];
        this._isDisposed = false;
    }
    Disposable.prototype.dispose = function () {
        this._isDisposed = true;
        this._disposables.forEach(function (d) { return d.dispose(); });
        this._disposables.length = 0;
    };
    Disposable.prototype.register = function (d) {
        this._disposables.push(d);
    };
    Disposable.prototype.unregister = function (d) {
        var index = this._disposables.indexOf(d);
        if (index !== -1) {
            this._disposables.splice(index, 1);
        }
    };
    return Disposable;
}());
exports.Disposable = Disposable;


/***/ }),

/***/ "./out/common/Platform.js":
/*!********************************!*\
  !*** ./out/common/Platform.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var isNode = (typeof navigator === 'undefined') ? true : false;
var userAgent = (isNode) ? 'node' : navigator.userAgent;
var platform = (isNode) ? 'node' : navigator.platform;
exports.isFirefox = !!~userAgent.indexOf('Firefox');
exports.isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);
exports.isMac = contains(['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'], platform);
exports.isIpad = platform === 'iPad';
exports.isIphone = platform === 'iPhone';
exports.isWindows = contains(['Windows', 'Win16', 'Win32', 'WinCE'], platform);
exports.isLinux = platform.indexOf('Linux') >= 0;
function contains(arr, el) {
    return arr.indexOf(el) >= 0;
}


/***/ }),

/***/ "./out/common/TypedArrayUtils.js":
/*!***************************************!*\
  !*** ./out/common/TypedArrayUtils.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function fill(array, value, start, end) {
    if (array.fill) {
        return array.fill(value, start, end);
    }
    return fillFallback(array, value, start, end);
}
exports.fill = fill;
function fillFallback(array, value, start, end) {
    if (start === void 0) { start = 0; }
    if (end === void 0) { end = array.length; }
    if (start >= array.length) {
        return array;
    }
    start = (array.length + start) % array.length;
    if (end >= array.length) {
        end = array.length;
    }
    else {
        end = (array.length + end) % array.length;
    }
    for (var i = start; i < end; ++i) {
        array[i] = value;
    }
    return array;
}
exports.fillFallback = fillFallback;
function concat(a, b) {
    var result = new a.constructor(a.length + b.length);
    result.set(a);
    result.set(b, a.length);
    return result;
}
exports.concat = concat;


/***/ }),

/***/ "./out/common/WindowsMode.js":
/*!***********************************!*\
  !*** ./out/common/WindowsMode.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
function updateWindowsModeWrappedState(bufferService) {
    var _a;
    var line = bufferService.buffer.lines.get(bufferService.buffer.ybase + bufferService.buffer.y - 1);
    var lastChar = (_a = line) === null || _a === void 0 ? void 0 : _a.get(bufferService.cols - 1);
    var nextLine = bufferService.buffer.lines.get(bufferService.buffer.ybase + bufferService.buffer.y);
    if (nextLine && lastChar) {
        nextLine.isWrapped = (lastChar[Constants_1.CHAR_DATA_CODE_INDEX] !== Constants_1.NULL_CELL_CODE && lastChar[Constants_1.CHAR_DATA_CODE_INDEX] !== Constants_1.WHITESPACE_CELL_CODE);
    }
}
exports.updateWindowsModeWrappedState = updateWindowsModeWrappedState;


/***/ }),

/***/ "./out/common/buffer/AttributeData.js":
/*!********************************************!*\
  !*** ./out/common/buffer/AttributeData.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var AttributeData = (function () {
    function AttributeData() {
        this.fg = 0;
        this.bg = 0;
    }
    AttributeData.toColorRGB = function (value) {
        return [
            value >>> 16 & 255,
            value >>> 8 & 255,
            value & 255
        ];
    };
    AttributeData.fromColorRGB = function (value) {
        return (value[0] & 255) << 16 | (value[1] & 255) << 8 | value[2] & 255;
    };
    AttributeData.prototype.clone = function () {
        var newObj = new AttributeData();
        newObj.fg = this.fg;
        newObj.bg = this.bg;
        return newObj;
    };
    AttributeData.prototype.isInverse = function () { return this.fg & 67108864; };
    AttributeData.prototype.isBold = function () { return this.fg & 134217728; };
    AttributeData.prototype.isUnderline = function () { return this.fg & 268435456; };
    AttributeData.prototype.isBlink = function () { return this.fg & 536870912; };
    AttributeData.prototype.isInvisible = function () { return this.fg & 1073741824; };
    AttributeData.prototype.isItalic = function () { return this.bg & 67108864; };
    AttributeData.prototype.isDim = function () { return this.bg & 134217728; };
    AttributeData.prototype.getFgColorMode = function () { return this.fg & 50331648; };
    AttributeData.prototype.getBgColorMode = function () { return this.bg & 50331648; };
    AttributeData.prototype.isFgRGB = function () { return (this.fg & 50331648) === 50331648; };
    AttributeData.prototype.isBgRGB = function () { return (this.bg & 50331648) === 50331648; };
    AttributeData.prototype.isFgPalette = function () { return (this.fg & 50331648) === 16777216 || (this.fg & 50331648) === 33554432; };
    AttributeData.prototype.isBgPalette = function () { return (this.bg & 50331648) === 16777216 || (this.bg & 50331648) === 33554432; };
    AttributeData.prototype.isFgDefault = function () { return (this.fg & 50331648) === 0; };
    AttributeData.prototype.isBgDefault = function () { return (this.bg & 50331648) === 0; };
    AttributeData.prototype.getFgColor = function () {
        switch (this.fg & 50331648) {
            case 16777216:
            case 33554432: return this.fg & 255;
            case 50331648: return this.fg & 16777215;
            default: return -1;
        }
    };
    AttributeData.prototype.getBgColor = function () {
        switch (this.bg & 50331648) {
            case 16777216:
            case 33554432: return this.bg & 255;
            case 50331648: return this.bg & 16777215;
            default: return -1;
        }
    };
    return AttributeData;
}());
exports.AttributeData = AttributeData;


/***/ }),

/***/ "./out/common/buffer/Buffer.js":
/*!*************************************!*\
  !*** ./out/common/buffer/Buffer.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CircularList_1 = __webpack_require__(/*! common/CircularList */ "./out/common/CircularList.js");
var BufferLine_1 = __webpack_require__(/*! common/buffer/BufferLine */ "./out/common/buffer/BufferLine.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var BufferReflow_1 = __webpack_require__(/*! common/buffer/BufferReflow */ "./out/common/buffer/BufferReflow.js");
var Marker_1 = __webpack_require__(/*! common/buffer/Marker */ "./out/common/buffer/Marker.js");
var Charsets_1 = __webpack_require__(/*! common/data/Charsets */ "./out/common/data/Charsets.js");
exports.MAX_BUFFER_SIZE = 4294967295;
var Buffer = (function () {
    function Buffer(_hasScrollback, _optionsService, _bufferService) {
        this._hasScrollback = _hasScrollback;
        this._optionsService = _optionsService;
        this._bufferService = _bufferService;
        this.ydisp = 0;
        this.ybase = 0;
        this.y = 0;
        this.x = 0;
        this.savedY = 0;
        this.savedX = 0;
        this.savedCurAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        this.savedCharset = Charsets_1.DEFAULT_CHARSET;
        this.markers = [];
        this._nullCell = CellData_1.CellData.fromCharData([0, Constants_1.NULL_CELL_CHAR, Constants_1.NULL_CELL_WIDTH, Constants_1.NULL_CELL_CODE]);
        this._whitespaceCell = CellData_1.CellData.fromCharData([0, Constants_1.WHITESPACE_CELL_CHAR, Constants_1.WHITESPACE_CELL_WIDTH, Constants_1.WHITESPACE_CELL_CODE]);
        this._cols = this._bufferService.cols;
        this._rows = this._bufferService.rows;
        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._rows));
        this.scrollTop = 0;
        this.scrollBottom = this._rows - 1;
        this.setupTabStops();
    }
    Buffer.prototype.getNullCell = function (attr) {
        if (attr) {
            this._nullCell.fg = attr.fg;
            this._nullCell.bg = attr.bg;
        }
        else {
            this._nullCell.fg = 0;
            this._nullCell.bg = 0;
        }
        return this._nullCell;
    };
    Buffer.prototype.getWhitespaceCell = function (attr) {
        if (attr) {
            this._whitespaceCell.fg = attr.fg;
            this._whitespaceCell.bg = attr.bg;
        }
        else {
            this._whitespaceCell.fg = 0;
            this._whitespaceCell.bg = 0;
        }
        return this._whitespaceCell;
    };
    Buffer.prototype.getBlankLine = function (attr, isWrapped) {
        return new BufferLine_1.BufferLine(this._bufferService.cols, this.getNullCell(attr), isWrapped);
    };
    Object.defineProperty(Buffer.prototype, "hasScrollback", {
        get: function () {
            return this._hasScrollback && this.lines.maxLength > this._rows;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Buffer.prototype, "isCursorInViewport", {
        get: function () {
            var absoluteY = this.ybase + this.y;
            var relativeY = absoluteY - this.ydisp;
            return (relativeY >= 0 && relativeY < this._rows);
        },
        enumerable: true,
        configurable: true
    });
    Buffer.prototype._getCorrectBufferLength = function (rows) {
        if (!this._hasScrollback) {
            return rows;
        }
        var correctBufferLength = rows + this._optionsService.options.scrollback;
        return correctBufferLength > exports.MAX_BUFFER_SIZE ? exports.MAX_BUFFER_SIZE : correctBufferLength;
    };
    Buffer.prototype.fillViewportRows = function (fillAttr) {
        if (this.lines.length === 0) {
            if (fillAttr === undefined) {
                fillAttr = BufferLine_1.DEFAULT_ATTR_DATA;
            }
            var i = this._rows;
            while (i--) {
                this.lines.push(this.getBlankLine(fillAttr));
            }
        }
    };
    Buffer.prototype.clear = function () {
        this.ydisp = 0;
        this.ybase = 0;
        this.y = 0;
        this.x = 0;
        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._rows));
        this.scrollTop = 0;
        this.scrollBottom = this._rows - 1;
        this.setupTabStops();
    };
    Buffer.prototype.resize = function (newCols, newRows) {
        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);
        var newMaxLength = this._getCorrectBufferLength(newRows);
        if (newMaxLength > this.lines.maxLength) {
            this.lines.maxLength = newMaxLength;
        }
        if (this.lines.length > 0) {
            if (this._cols < newCols) {
                for (var i = 0; i < this.lines.length; i++) {
                    this.lines.get(i).resize(newCols, nullCell);
                }
            }
            var addToY = 0;
            if (this._rows < newRows) {
                for (var y = this._rows; y < newRows; y++) {
                    if (this.lines.length < newRows + this.ybase) {
                        if (this._optionsService.options.windowsMode) {
                            this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));
                        }
                        else {
                            if (this.ybase > 0 && this.lines.length <= this.ybase + this.y + addToY + 1) {
                                this.ybase--;
                                addToY++;
                                if (this.ydisp > 0) {
                                    this.ydisp--;
                                }
                            }
                            else {
                                this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));
                            }
                        }
                    }
                }
            }
            else {
                for (var y = this._rows; y > newRows; y--) {
                    if (this.lines.length > newRows + this.ybase) {
                        if (this.lines.length > this.ybase + this.y + 1) {
                            this.lines.pop();
                        }
                        else {
                            this.ybase++;
                            this.ydisp++;
                        }
                    }
                }
            }
            if (newMaxLength < this.lines.maxLength) {
                var amountToTrim = this.lines.length - newMaxLength;
                if (amountToTrim > 0) {
                    this.lines.trimStart(amountToTrim);
                    this.ybase = Math.max(this.ybase - amountToTrim, 0);
                    this.ydisp = Math.max(this.ydisp - amountToTrim, 0);
                    this.savedY = Math.max(this.savedY - amountToTrim, 0);
                }
                this.lines.maxLength = newMaxLength;
            }
            this.x = Math.min(this.x, newCols - 1);
            this.y = Math.min(this.y, newRows - 1);
            if (addToY) {
                this.y += addToY;
            }
            this.savedX = Math.min(this.savedX, newCols - 1);
            this.scrollTop = 0;
        }
        this.scrollBottom = newRows - 1;
        if (this._isReflowEnabled) {
            this._reflow(newCols, newRows);
            if (this._cols > newCols) {
                for (var i = 0; i < this.lines.length; i++) {
                    this.lines.get(i).resize(newCols, nullCell);
                }
            }
        }
        this._cols = newCols;
        this._rows = newRows;
    };
    Object.defineProperty(Buffer.prototype, "_isReflowEnabled", {
        get: function () {
            return this._hasScrollback && !this._optionsService.options.windowsMode;
        },
        enumerable: true,
        configurable: true
    });
    Buffer.prototype._reflow = function (newCols, newRows) {
        if (this._cols === newCols) {
            return;
        }
        if (newCols > this._cols) {
            this._reflowLarger(newCols, newRows);
        }
        else {
            this._reflowSmaller(newCols, newRows);
        }
    };
    Buffer.prototype._reflowLarger = function (newCols, newRows) {
        var toRemove = BufferReflow_1.reflowLargerGetLinesToRemove(this.lines, this._cols, newCols, this.ybase + this.y, this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA));
        if (toRemove.length > 0) {
            var newLayoutResult = BufferReflow_1.reflowLargerCreateNewLayout(this.lines, toRemove);
            BufferReflow_1.reflowLargerApplyNewLayout(this.lines, newLayoutResult.layout);
            this._reflowLargerAdjustViewport(newCols, newRows, newLayoutResult.countRemoved);
        }
    };
    Buffer.prototype._reflowLargerAdjustViewport = function (newCols, newRows, countRemoved) {
        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);
        var viewportAdjustments = countRemoved;
        while (viewportAdjustments-- > 0) {
            if (this.ybase === 0) {
                if (this.y > 0) {
                    this.y--;
                }
                if (this.lines.length < newRows) {
                    this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));
                }
            }
            else {
                if (this.ydisp === this.ybase) {
                    this.ydisp--;
                }
                this.ybase--;
            }
        }
        this.savedY = Math.max(this.savedY - countRemoved, 0);
    };
    Buffer.prototype._reflowSmaller = function (newCols, newRows) {
        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);
        var toInsert = [];
        var countToInsert = 0;
        for (var y = this.lines.length - 1; y >= 0; y--) {
            var nextLine = this.lines.get(y);
            if (!nextLine || !nextLine.isWrapped && nextLine.getTrimmedLength() <= newCols) {
                continue;
            }
            var wrappedLines = [nextLine];
            while (nextLine.isWrapped && y > 0) {
                nextLine = this.lines.get(--y);
                wrappedLines.unshift(nextLine);
            }
            var absoluteY = this.ybase + this.y;
            if (absoluteY >= y && absoluteY < y + wrappedLines.length) {
                continue;
            }
            var lastLineLength = wrappedLines[wrappedLines.length - 1].getTrimmedLength();
            var destLineLengths = BufferReflow_1.reflowSmallerGetNewLineLengths(wrappedLines, this._cols, newCols);
            var linesToAdd = destLineLengths.length - wrappedLines.length;
            var trimmedLines = void 0;
            if (this.ybase === 0 && this.y !== this.lines.length - 1) {
                trimmedLines = Math.max(0, this.y - this.lines.maxLength + linesToAdd);
            }
            else {
                trimmedLines = Math.max(0, this.lines.length - this.lines.maxLength + linesToAdd);
            }
            var newLines = [];
            for (var i = 0; i < linesToAdd; i++) {
                var newLine = this.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA, true);
                newLines.push(newLine);
            }
            if (newLines.length > 0) {
                toInsert.push({
                    start: y + wrappedLines.length + countToInsert,
                    newLines: newLines
                });
                countToInsert += newLines.length;
            }
            wrappedLines.push.apply(wrappedLines, newLines);
            var destLineIndex = destLineLengths.length - 1;
            var destCol = destLineLengths[destLineIndex];
            if (destCol === 0) {
                destLineIndex--;
                destCol = destLineLengths[destLineIndex];
            }
            var srcLineIndex = wrappedLines.length - linesToAdd - 1;
            var srcCol = lastLineLength;
            while (srcLineIndex >= 0) {
                var cellsToCopy = Math.min(srcCol, destCol);
                wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol - cellsToCopy, destCol - cellsToCopy, cellsToCopy, true);
                destCol -= cellsToCopy;
                if (destCol === 0) {
                    destLineIndex--;
                    destCol = destLineLengths[destLineIndex];
                }
                srcCol -= cellsToCopy;
                if (srcCol === 0) {
                    srcLineIndex--;
                    var wrappedLinesIndex = Math.max(srcLineIndex, 0);
                    srcCol = BufferReflow_1.getWrappedLineTrimmedLength(wrappedLines, wrappedLinesIndex, this._cols);
                }
            }
            for (var i = 0; i < wrappedLines.length; i++) {
                if (destLineLengths[i] < newCols) {
                    wrappedLines[i].setCell(destLineLengths[i], nullCell);
                }
            }
            var viewportAdjustments = linesToAdd - trimmedLines;
            while (viewportAdjustments-- > 0) {
                if (this.ybase === 0) {
                    if (this.y < newRows - 1) {
                        this.y++;
                        this.lines.pop();
                    }
                    else {
                        this.ybase++;
                        this.ydisp++;
                    }
                }
                else {
                    if (this.ybase < Math.min(this.lines.maxLength, this.lines.length + countToInsert) - newRows) {
                        if (this.ybase === this.ydisp) {
                            this.ydisp++;
                        }
                        this.ybase++;
                    }
                }
            }
            this.savedY = Math.min(this.savedY + linesToAdd, this.ybase + newRows - 1);
        }
        if (toInsert.length > 0) {
            var insertEvents = [];
            var originalLines = [];
            for (var i = 0; i < this.lines.length; i++) {
                originalLines.push(this.lines.get(i));
            }
            var originalLinesLength = this.lines.length;
            var originalLineIndex = originalLinesLength - 1;
            var nextToInsertIndex = 0;
            var nextToInsert = toInsert[nextToInsertIndex];
            this.lines.length = Math.min(this.lines.maxLength, this.lines.length + countToInsert);
            var countInsertedSoFar = 0;
            for (var i = Math.min(this.lines.maxLength - 1, originalLinesLength + countToInsert - 1); i >= 0; i--) {
                if (nextToInsert && nextToInsert.start > originalLineIndex + countInsertedSoFar) {
                    for (var nextI = nextToInsert.newLines.length - 1; nextI >= 0; nextI--) {
                        this.lines.set(i--, nextToInsert.newLines[nextI]);
                    }
                    i++;
                    insertEvents.push({
                        index: originalLineIndex + 1,
                        amount: nextToInsert.newLines.length
                    });
                    countInsertedSoFar += nextToInsert.newLines.length;
                    nextToInsert = toInsert[++nextToInsertIndex];
                }
                else {
                    this.lines.set(i, originalLines[originalLineIndex--]);
                }
            }
            var insertCountEmitted = 0;
            for (var i = insertEvents.length - 1; i >= 0; i--) {
                insertEvents[i].index += insertCountEmitted;
                this.lines.onInsertEmitter.fire(insertEvents[i]);
                insertCountEmitted += insertEvents[i].amount;
            }
            var amountToTrim = Math.max(0, originalLinesLength + countToInsert - this.lines.maxLength);
            if (amountToTrim > 0) {
                this.lines.onTrimEmitter.fire(amountToTrim);
            }
        }
    };
    Buffer.prototype.stringIndexToBufferIndex = function (lineIndex, stringIndex, trimRight) {
        if (trimRight === void 0) { trimRight = false; }
        while (stringIndex) {
            var line = this.lines.get(lineIndex);
            if (!line) {
                return [-1, -1];
            }
            var length = (trimRight) ? line.getTrimmedLength() : line.length;
            for (var i = 0; i < length; ++i) {
                if (line.get(i)[Constants_1.CHAR_DATA_WIDTH_INDEX]) {
                    stringIndex -= line.get(i)[Constants_1.CHAR_DATA_CHAR_INDEX].length || 1;
                }
                if (stringIndex < 0) {
                    return [lineIndex, i];
                }
            }
            lineIndex++;
        }
        return [lineIndex, 0];
    };
    Buffer.prototype.translateBufferLineToString = function (lineIndex, trimRight, startCol, endCol) {
        if (startCol === void 0) { startCol = 0; }
        var line = this.lines.get(lineIndex);
        if (!line) {
            return '';
        }
        return line.translateToString(trimRight, startCol, endCol);
    };
    Buffer.prototype.getWrappedRangeForLine = function (y) {
        var first = y;
        var last = y;
        while (first > 0 && this.lines.get(first).isWrapped) {
            first--;
        }
        while (last + 1 < this.lines.length && this.lines.get(last + 1).isWrapped) {
            last++;
        }
        return { first: first, last: last };
    };
    Buffer.prototype.setupTabStops = function (i) {
        if (i !== null && i !== undefined) {
            if (!this.tabs[i]) {
                i = this.prevStop(i);
            }
        }
        else {
            this.tabs = {};
            i = 0;
        }
        for (; i < this._cols; i += this._optionsService.options.tabStopWidth) {
            this.tabs[i] = true;
        }
    };
    Buffer.prototype.prevStop = function (x) {
        if (x === null || x === undefined) {
            x = this.x;
        }
        while (!this.tabs[--x] && x > 0)
            ;
        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;
    };
    Buffer.prototype.nextStop = function (x) {
        if (x === null || x === undefined) {
            x = this.x;
        }
        while (!this.tabs[++x] && x < this._cols)
            ;
        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;
    };
    Buffer.prototype.addMarker = function (y) {
        var _this = this;
        var marker = new Marker_1.Marker(y);
        this.markers.push(marker);
        marker.register(this.lines.onTrim(function (amount) {
            marker.line -= amount;
            if (marker.line < 0) {
                marker.dispose();
            }
        }));
        marker.register(this.lines.onInsert(function (event) {
            if (marker.line >= event.index) {
                marker.line += event.amount;
            }
        }));
        marker.register(this.lines.onDelete(function (event) {
            if (marker.line >= event.index && marker.line < event.index + event.amount) {
                marker.dispose();
            }
            if (marker.line > event.index) {
                marker.line -= event.amount;
            }
        }));
        marker.register(marker.onDispose(function () { return _this._removeMarker(marker); }));
        return marker;
    };
    Buffer.prototype._removeMarker = function (marker) {
        this.markers.splice(this.markers.indexOf(marker), 1);
    };
    Buffer.prototype.iterator = function (trimRight, startIndex, endIndex, startOverscan, endOverscan) {
        return new BufferStringIterator(this, trimRight, startIndex, endIndex, startOverscan, endOverscan);
    };
    return Buffer;
}());
exports.Buffer = Buffer;
var BufferStringIterator = (function () {
    function BufferStringIterator(_buffer, _trimRight, _startIndex, _endIndex, _startOverscan, _endOverscan) {
        if (_startIndex === void 0) { _startIndex = 0; }
        if (_endIndex === void 0) { _endIndex = _buffer.lines.length; }
        if (_startOverscan === void 0) { _startOverscan = 0; }
        if (_endOverscan === void 0) { _endOverscan = 0; }
        this._buffer = _buffer;
        this._trimRight = _trimRight;
        this._startIndex = _startIndex;
        this._endIndex = _endIndex;
        this._startOverscan = _startOverscan;
        this._endOverscan = _endOverscan;
        if (this._startIndex < 0) {
            this._startIndex = 0;
        }
        if (this._endIndex > this._buffer.lines.length) {
            this._endIndex = this._buffer.lines.length;
        }
        this._current = this._startIndex;
    }
    BufferStringIterator.prototype.hasNext = function () {
        return this._current < this._endIndex;
    };
    BufferStringIterator.prototype.next = function () {
        var range = this._buffer.getWrappedRangeForLine(this._current);
        if (range.first < this._startIndex - this._startOverscan) {
            range.first = this._startIndex - this._startOverscan;
        }
        if (range.last > this._endIndex + this._endOverscan) {
            range.last = this._endIndex + this._endOverscan;
        }
        range.first = Math.max(range.first, 0);
        range.last = Math.min(range.last, this._buffer.lines.length);
        var result = '';
        for (var i = range.first; i <= range.last; ++i) {
            result += this._buffer.translateBufferLineToString(i, this._trimRight);
        }
        this._current = range.last + 1;
        return { range: range, content: result };
    };
    return BufferStringIterator;
}());
exports.BufferStringIterator = BufferStringIterator;


/***/ }),

/***/ "./out/common/buffer/BufferLine.js":
/*!*****************************************!*\
  !*** ./out/common/buffer/BufferLine.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var CELL_SIZE = 3;
exports.DEFAULT_ATTR_DATA = Object.freeze(new AttributeData_1.AttributeData());
var BufferLine = (function () {
    function BufferLine(cols, fillCellData, isWrapped) {
        if (isWrapped === void 0) { isWrapped = false; }
        this.isWrapped = isWrapped;
        this._combined = {};
        this._data = new Uint32Array(cols * CELL_SIZE);
        var cell = fillCellData || CellData_1.CellData.fromCharData([0, Constants_1.NULL_CELL_CHAR, Constants_1.NULL_CELL_WIDTH, Constants_1.NULL_CELL_CODE]);
        for (var i = 0; i < cols; ++i) {
            this.setCell(i, cell);
        }
        this.length = cols;
    }
    BufferLine.prototype.get = function (index) {
        var content = this._data[index * CELL_SIZE + 0];
        var cp = content & 2097151;
        return [
            this._data[index * CELL_SIZE + 1],
            (content & 2097152)
                ? this._combined[index]
                : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : '',
            content >> 22,
            (content & 2097152)
                ? this._combined[index].charCodeAt(this._combined[index].length - 1)
                : cp
        ];
    };
    BufferLine.prototype.set = function (index, value) {
        this._data[index * CELL_SIZE + 1] = value[Constants_1.CHAR_DATA_ATTR_INDEX];
        if (value[Constants_1.CHAR_DATA_CHAR_INDEX].length > 1) {
            this._combined[index] = value[1];
            this._data[index * CELL_SIZE + 0] = index | 2097152 | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
        else {
            this._data[index * CELL_SIZE + 0] = value[Constants_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
    };
    BufferLine.prototype.getWidth = function (index) {
        return this._data[index * CELL_SIZE + 0] >> 22;
    };
    BufferLine.prototype.hasWidth = function (index) {
        return this._data[index * CELL_SIZE + 0] & 12582912;
    };
    BufferLine.prototype.getFg = function (index) {
        return this._data[index * CELL_SIZE + 1];
    };
    BufferLine.prototype.getBg = function (index) {
        return this._data[index * CELL_SIZE + 2];
    };
    BufferLine.prototype.hasContent = function (index) {
        return this._data[index * CELL_SIZE + 0] & 4194303;
    };
    BufferLine.prototype.getCodePoint = function (index) {
        var content = this._data[index * CELL_SIZE + 0];
        if (content & 2097152) {
            return this._combined[index].charCodeAt(this._combined[index].length - 1);
        }
        return content & 2097151;
    };
    BufferLine.prototype.isCombined = function (index) {
        return this._data[index * CELL_SIZE + 0] & 2097152;
    };
    BufferLine.prototype.getString = function (index) {
        var content = this._data[index * CELL_SIZE + 0];
        if (content & 2097152) {
            return this._combined[index];
        }
        if (content & 2097151) {
            return TextDecoder_1.stringFromCodePoint(content & 2097151);
        }
        return '';
    };
    BufferLine.prototype.loadCell = function (index, cell) {
        var startIndex = index * CELL_SIZE;
        cell.content = this._data[startIndex + 0];
        cell.fg = this._data[startIndex + 1];
        cell.bg = this._data[startIndex + 2];
        if (cell.content & 2097152) {
            cell.combinedData = this._combined[index];
        }
        return cell;
    };
    BufferLine.prototype.setCell = function (index, cell) {
        if (cell.content & 2097152) {
            this._combined[index] = cell.combinedData;
        }
        this._data[index * CELL_SIZE + 0] = cell.content;
        this._data[index * CELL_SIZE + 1] = cell.fg;
        this._data[index * CELL_SIZE + 2] = cell.bg;
    };
    BufferLine.prototype.setCellFromCodePoint = function (index, codePoint, width, fg, bg) {
        this._data[index * CELL_SIZE + 0] = codePoint | (width << 22);
        this._data[index * CELL_SIZE + 1] = fg;
        this._data[index * CELL_SIZE + 2] = bg;
    };
    BufferLine.prototype.addCodepointToCell = function (index, codePoint) {
        var content = this._data[index * CELL_SIZE + 0];
        if (content & 2097152) {
            this._combined[index] += TextDecoder_1.stringFromCodePoint(codePoint);
        }
        else {
            if (content & 2097151) {
                this._combined[index] = TextDecoder_1.stringFromCodePoint(content & 2097151) + TextDecoder_1.stringFromCodePoint(codePoint);
                content &= ~2097151;
                content |= 2097152;
            }
            else {
                content = codePoint | (1 << 22);
            }
            this._data[index * CELL_SIZE + 0] = content;
        }
    };
    BufferLine.prototype.insertCells = function (pos, n, fillCellData, eraseAttr) {
        var _a, _b, _c, _d;
        pos %= this.length;
        if (pos && this.getWidth(pos - 1) === 2) {
            this.setCellFromCodePoint(pos - 1, 0, 1, ((_a = eraseAttr) === null || _a === void 0 ? void 0 : _a.fg) || 0, ((_b = eraseAttr) === null || _b === void 0 ? void 0 : _b.bg) || 0);
        }
        if (n < this.length - pos) {
            var cell = new CellData_1.CellData();
            for (var i = this.length - pos - n - 1; i >= 0; --i) {
                this.setCell(pos + n + i, this.loadCell(pos + i, cell));
            }
            for (var i = 0; i < n; ++i) {
                this.setCell(pos + i, fillCellData);
            }
        }
        else {
            for (var i = pos; i < this.length; ++i) {
                this.setCell(i, fillCellData);
            }
        }
        if (this.getWidth(this.length - 1) === 2) {
            this.setCellFromCodePoint(this.length - 1, 0, 1, ((_c = eraseAttr) === null || _c === void 0 ? void 0 : _c.fg) || 0, ((_d = eraseAttr) === null || _d === void 0 ? void 0 : _d.bg) || 0);
        }
    };
    BufferLine.prototype.deleteCells = function (pos, n, fillCellData, eraseAttr) {
        var _a, _b, _c, _d;
        pos %= this.length;
        if (n < this.length - pos) {
            var cell = new CellData_1.CellData();
            for (var i = 0; i < this.length - pos - n; ++i) {
                this.setCell(pos + i, this.loadCell(pos + n + i, cell));
            }
            for (var i = this.length - n; i < this.length; ++i) {
                this.setCell(i, fillCellData);
            }
        }
        else {
            for (var i = pos; i < this.length; ++i) {
                this.setCell(i, fillCellData);
            }
        }
        if (pos && this.getWidth(pos - 1) === 2) {
            this.setCellFromCodePoint(pos - 1, 0, 1, ((_a = eraseAttr) === null || _a === void 0 ? void 0 : _a.fg) || 0, ((_b = eraseAttr) === null || _b === void 0 ? void 0 : _b.bg) || 0);
        }
        if (this.getWidth(pos) === 0 && !this.hasContent(pos)) {
            this.setCellFromCodePoint(pos, 0, 1, ((_c = eraseAttr) === null || _c === void 0 ? void 0 : _c.fg) || 0, ((_d = eraseAttr) === null || _d === void 0 ? void 0 : _d.bg) || 0);
        }
    };
    BufferLine.prototype.replaceCells = function (start, end, fillCellData, eraseAttr) {
        var _a, _b, _c, _d;
        if (start && this.getWidth(start - 1) === 2) {
            this.setCellFromCodePoint(start - 1, 0, 1, ((_a = eraseAttr) === null || _a === void 0 ? void 0 : _a.fg) || 0, ((_b = eraseAttr) === null || _b === void 0 ? void 0 : _b.bg) || 0);
        }
        if (end < this.length && this.getWidth(end - 1) === 2) {
            this.setCellFromCodePoint(end, 0, 1, ((_c = eraseAttr) === null || _c === void 0 ? void 0 : _c.fg) || 0, ((_d = eraseAttr) === null || _d === void 0 ? void 0 : _d.bg) || 0);
        }
        while (start < end && start < this.length) {
            this.setCell(start++, fillCellData);
        }
    };
    BufferLine.prototype.resize = function (cols, fillCellData) {
        if (cols === this.length) {
            return;
        }
        if (cols > this.length) {
            var data = new Uint32Array(cols * CELL_SIZE);
            if (this.length) {
                if (cols * CELL_SIZE < this._data.length) {
                    data.set(this._data.subarray(0, cols * CELL_SIZE));
                }
                else {
                    data.set(this._data);
                }
            }
            this._data = data;
            for (var i = this.length; i < cols; ++i) {
                this.setCell(i, fillCellData);
            }
        }
        else {
            if (cols) {
                var data = new Uint32Array(cols * CELL_SIZE);
                data.set(this._data.subarray(0, cols * CELL_SIZE));
                this._data = data;
                var keys = Object.keys(this._combined);
                for (var i = 0; i < keys.length; i++) {
                    var key = parseInt(keys[i], 10);
                    if (key >= cols) {
                        delete this._combined[key];
                    }
                }
            }
            else {
                this._data = new Uint32Array(0);
                this._combined = {};
            }
        }
        this.length = cols;
    };
    BufferLine.prototype.fill = function (fillCellData) {
        this._combined = {};
        for (var i = 0; i < this.length; ++i) {
            this.setCell(i, fillCellData);
        }
    };
    BufferLine.prototype.copyFrom = function (line) {
        if (this.length !== line.length) {
            this._data = new Uint32Array(line._data);
        }
        else {
            this._data.set(line._data);
        }
        this.length = line.length;
        this._combined = {};
        for (var el in line._combined) {
            this._combined[el] = line._combined[el];
        }
        this.isWrapped = line.isWrapped;
    };
    BufferLine.prototype.clone = function () {
        var newLine = new BufferLine(0);
        newLine._data = new Uint32Array(this._data);
        newLine.length = this.length;
        for (var el in this._combined) {
            newLine._combined[el] = this._combined[el];
        }
        newLine.isWrapped = this.isWrapped;
        return newLine;
    };
    BufferLine.prototype.getTrimmedLength = function () {
        for (var i = this.length - 1; i >= 0; --i) {
            if ((this._data[i * CELL_SIZE + 0] & 4194303)) {
                return i + (this._data[i * CELL_SIZE + 0] >> 22);
            }
        }
        return 0;
    };
    BufferLine.prototype.copyCellsFrom = function (src, srcCol, destCol, length, applyInReverse) {
        var srcData = src._data;
        if (applyInReverse) {
            for (var cell = length - 1; cell >= 0; cell--) {
                for (var i = 0; i < CELL_SIZE; i++) {
                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];
                }
            }
        }
        else {
            for (var cell = 0; cell < length; cell++) {
                for (var i = 0; i < CELL_SIZE; i++) {
                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];
                }
            }
        }
        var srcCombinedKeys = Object.keys(src._combined);
        for (var i = 0; i < srcCombinedKeys.length; i++) {
            var key = parseInt(srcCombinedKeys[i], 10);
            if (key >= srcCol) {
                this._combined[key - srcCol + destCol] = src._combined[key];
            }
        }
    };
    BufferLine.prototype.translateToString = function (trimRight, startCol, endCol) {
        if (trimRight === void 0) { trimRight = false; }
        if (startCol === void 0) { startCol = 0; }
        if (endCol === void 0) { endCol = this.length; }
        if (trimRight) {
            endCol = Math.min(endCol, this.getTrimmedLength());
        }
        var result = '';
        while (startCol < endCol) {
            var content = this._data[startCol * CELL_SIZE + 0];
            var cp = content & 2097151;
            result += (content & 2097152) ? this._combined[startCol] : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : Constants_1.WHITESPACE_CELL_CHAR;
            startCol += (content >> 22) || 1;
        }
        return result;
    };
    return BufferLine;
}());
exports.BufferLine = BufferLine;


/***/ }),

/***/ "./out/common/buffer/BufferReflow.js":
/*!*******************************************!*\
  !*** ./out/common/buffer/BufferReflow.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function reflowLargerGetLinesToRemove(lines, oldCols, newCols, bufferAbsoluteY, nullCell) {
    var toRemove = [];
    for (var y = 0; y < lines.length - 1; y++) {
        var i = y;
        var nextLine = lines.get(++i);
        if (!nextLine.isWrapped) {
            continue;
        }
        var wrappedLines = [lines.get(y)];
        while (i < lines.length && nextLine.isWrapped) {
            wrappedLines.push(nextLine);
            nextLine = lines.get(++i);
        }
        if (bufferAbsoluteY >= y && bufferAbsoluteY < i) {
            y += wrappedLines.length - 1;
            continue;
        }
        var destLineIndex = 0;
        var destCol = getWrappedLineTrimmedLength(wrappedLines, destLineIndex, oldCols);
        var srcLineIndex = 1;
        var srcCol = 0;
        while (srcLineIndex < wrappedLines.length) {
            var srcTrimmedTineLength = getWrappedLineTrimmedLength(wrappedLines, srcLineIndex, oldCols);
            var srcRemainingCells = srcTrimmedTineLength - srcCol;
            var destRemainingCells = newCols - destCol;
            var cellsToCopy = Math.min(srcRemainingCells, destRemainingCells);
            wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol, destCol, cellsToCopy, false);
            destCol += cellsToCopy;
            if (destCol === newCols) {
                destLineIndex++;
                destCol = 0;
            }
            srcCol += cellsToCopy;
            if (srcCol === srcTrimmedTineLength) {
                srcLineIndex++;
                srcCol = 0;
            }
            if (destCol === 0 && destLineIndex !== 0) {
                if (wrappedLines[destLineIndex - 1].getWidth(newCols - 1) === 2) {
                    wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[destLineIndex - 1], newCols - 1, destCol++, 1, false);
                    wrappedLines[destLineIndex - 1].setCell(newCols - 1, nullCell);
                }
            }
        }
        wrappedLines[destLineIndex].replaceCells(destCol, newCols, nullCell);
        var countToRemove = 0;
        for (var i_1 = wrappedLines.length - 1; i_1 > 0; i_1--) {
            if (i_1 > destLineIndex || wrappedLines[i_1].getTrimmedLength() === 0) {
                countToRemove++;
            }
            else {
                break;
            }
        }
        if (countToRemove > 0) {
            toRemove.push(y + wrappedLines.length - countToRemove);
            toRemove.push(countToRemove);
        }
        y += wrappedLines.length - 1;
    }
    return toRemove;
}
exports.reflowLargerGetLinesToRemove = reflowLargerGetLinesToRemove;
function reflowLargerCreateNewLayout(lines, toRemove) {
    var layout = [];
    var nextToRemoveIndex = 0;
    var nextToRemoveStart = toRemove[nextToRemoveIndex];
    var countRemovedSoFar = 0;
    for (var i = 0; i < lines.length; i++) {
        if (nextToRemoveStart === i) {
            var countToRemove = toRemove[++nextToRemoveIndex];
            lines.onDeleteEmitter.fire({
                index: i - countRemovedSoFar,
                amount: countToRemove
            });
            i += countToRemove - 1;
            countRemovedSoFar += countToRemove;
            nextToRemoveStart = toRemove[++nextToRemoveIndex];
        }
        else {
            layout.push(i);
        }
    }
    return {
        layout: layout,
        countRemoved: countRemovedSoFar
    };
}
exports.reflowLargerCreateNewLayout = reflowLargerCreateNewLayout;
function reflowLargerApplyNewLayout(lines, newLayout) {
    var newLayoutLines = [];
    for (var i = 0; i < newLayout.length; i++) {
        newLayoutLines.push(lines.get(newLayout[i]));
    }
    for (var i = 0; i < newLayoutLines.length; i++) {
        lines.set(i, newLayoutLines[i]);
    }
    lines.length = newLayout.length;
}
exports.reflowLargerApplyNewLayout = reflowLargerApplyNewLayout;
function reflowSmallerGetNewLineLengths(wrappedLines, oldCols, newCols) {
    var newLineLengths = [];
    var cellsNeeded = wrappedLines.map(function (l, i) { return getWrappedLineTrimmedLength(wrappedLines, i, oldCols); }).reduce(function (p, c) { return p + c; });
    var srcCol = 0;
    var srcLine = 0;
    var cellsAvailable = 0;
    while (cellsAvailable < cellsNeeded) {
        if (cellsNeeded - cellsAvailable < newCols) {
            newLineLengths.push(cellsNeeded - cellsAvailable);
            break;
        }
        srcCol += newCols;
        var oldTrimmedLength = getWrappedLineTrimmedLength(wrappedLines, srcLine, oldCols);
        if (srcCol > oldTrimmedLength) {
            srcCol -= oldTrimmedLength;
            srcLine++;
        }
        var endsWithWide = wrappedLines[srcLine].getWidth(srcCol - 1) === 2;
        if (endsWithWide) {
            srcCol--;
        }
        var lineLength = endsWithWide ? newCols - 1 : newCols;
        newLineLengths.push(lineLength);
        cellsAvailable += lineLength;
    }
    return newLineLengths;
}
exports.reflowSmallerGetNewLineLengths = reflowSmallerGetNewLineLengths;
function getWrappedLineTrimmedLength(lines, i, cols) {
    if (i === lines.length - 1) {
        return lines[i].getTrimmedLength();
    }
    var endsInNull = !(lines[i].hasContent(cols - 1)) && lines[i].getWidth(cols - 1) === 1;
    var followingLineStartsWithWide = lines[i + 1].getWidth(0) === 2;
    if (endsInNull && followingLineStartsWithWide) {
        return cols - 1;
    }
    return cols;
}
exports.getWrappedLineTrimmedLength = getWrappedLineTrimmedLength;


/***/ }),

/***/ "./out/common/buffer/BufferSet.js":
/*!****************************************!*\
  !*** ./out/common/buffer/BufferSet.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Buffer_1 = __webpack_require__(/*! common/buffer/Buffer */ "./out/common/buffer/Buffer.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var BufferSet = (function () {
    function BufferSet(optionsService, bufferService) {
        this.optionsService = optionsService;
        this.bufferService = bufferService;
        this._onBufferActivate = new EventEmitter_1.EventEmitter();
        this._normal = new Buffer_1.Buffer(true, optionsService, bufferService);
        this._normal.fillViewportRows();
        this._alt = new Buffer_1.Buffer(false, optionsService, bufferService);
        this._activeBuffer = this._normal;
        this.setupTabStops();
    }
    Object.defineProperty(BufferSet.prototype, "onBufferActivate", {
        get: function () { return this._onBufferActivate.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferSet.prototype, "alt", {
        get: function () {
            return this._alt;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferSet.prototype, "active", {
        get: function () {
            return this._activeBuffer;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferSet.prototype, "normal", {
        get: function () {
            return this._normal;
        },
        enumerable: true,
        configurable: true
    });
    BufferSet.prototype.activateNormalBuffer = function () {
        if (this._activeBuffer === this._normal) {
            return;
        }
        this._normal.x = this._alt.x;
        this._normal.y = this._alt.y;
        this._alt.clear();
        this._activeBuffer = this._normal;
        this._onBufferActivate.fire({
            activeBuffer: this._normal,
            inactiveBuffer: this._alt
        });
    };
    BufferSet.prototype.activateAltBuffer = function (fillAttr) {
        if (this._activeBuffer === this._alt) {
            return;
        }
        this._alt.fillViewportRows(fillAttr);
        this._alt.x = this._normal.x;
        this._alt.y = this._normal.y;
        this._activeBuffer = this._alt;
        this._onBufferActivate.fire({
            activeBuffer: this._alt,
            inactiveBuffer: this._normal
        });
    };
    BufferSet.prototype.resize = function (newCols, newRows) {
        this._normal.resize(newCols, newRows);
        this._alt.resize(newCols, newRows);
    };
    BufferSet.prototype.setupTabStops = function (i) {
        this._normal.setupTabStops(i);
        this._alt.setupTabStops(i);
    };
    return BufferSet;
}());
exports.BufferSet = BufferSet;


/***/ }),

/***/ "./out/common/buffer/CellData.js":
/*!***************************************!*\
  !*** ./out/common/buffer/CellData.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var CellData = (function (_super) {
    __extends(CellData, _super);
    function CellData() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.content = 0;
        _this.fg = 0;
        _this.bg = 0;
        _this.combinedData = '';
        return _this;
    }
    CellData.fromCharData = function (value) {
        var obj = new CellData();
        obj.setFromCharData(value);
        return obj;
    };
    CellData.prototype.isCombined = function () {
        return this.content & 2097152;
    };
    CellData.prototype.getWidth = function () {
        return this.content >> 22;
    };
    CellData.prototype.getChars = function () {
        if (this.content & 2097152) {
            return this.combinedData;
        }
        if (this.content & 2097151) {
            return TextDecoder_1.stringFromCodePoint(this.content & 2097151);
        }
        return '';
    };
    CellData.prototype.getCode = function () {
        return (this.isCombined())
            ? this.combinedData.charCodeAt(this.combinedData.length - 1)
            : this.content & 2097151;
    };
    CellData.prototype.setFromCharData = function (value) {
        this.fg = value[Constants_1.CHAR_DATA_ATTR_INDEX];
        this.bg = 0;
        var combined = false;
        if (value[Constants_1.CHAR_DATA_CHAR_INDEX].length > 2) {
            combined = true;
        }
        else if (value[Constants_1.CHAR_DATA_CHAR_INDEX].length === 2) {
            var code = value[Constants_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0);
            if (0xD800 <= code && code <= 0xDBFF) {
                var second = value[Constants_1.CHAR_DATA_CHAR_INDEX].charCodeAt(1);
                if (0xDC00 <= second && second <= 0xDFFF) {
                    this.content = ((code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000) | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
                }
                else {
                    combined = true;
                }
            }
            else {
                combined = true;
            }
        }
        else {
            this.content = value[Constants_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
        if (combined) {
            this.combinedData = value[Constants_1.CHAR_DATA_CHAR_INDEX];
            this.content = 2097152 | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
    };
    CellData.prototype.getAsCharData = function () {
        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];
    };
    return CellData;
}(AttributeData_1.AttributeData));
exports.CellData = CellData;


/***/ }),

/***/ "./out/common/buffer/Constants.js":
/*!****************************************!*\
  !*** ./out/common/buffer/Constants.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.DEFAULT_COLOR = 256;
exports.DEFAULT_ATTR = (0 << 18) | (exports.DEFAULT_COLOR << 9) | (256 << 0);
exports.CHAR_DATA_ATTR_INDEX = 0;
exports.CHAR_DATA_CHAR_INDEX = 1;
exports.CHAR_DATA_WIDTH_INDEX = 2;
exports.CHAR_DATA_CODE_INDEX = 3;
exports.NULL_CELL_CHAR = '';
exports.NULL_CELL_WIDTH = 1;
exports.NULL_CELL_CODE = 0;
exports.WHITESPACE_CELL_CHAR = ' ';
exports.WHITESPACE_CELL_WIDTH = 1;
exports.WHITESPACE_CELL_CODE = 32;


/***/ }),

/***/ "./out/common/buffer/Marker.js":
/*!*************************************!*\
  !*** ./out/common/buffer/Marker.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Marker = (function (_super) {
    __extends(Marker, _super);
    function Marker(line) {
        var _this = _super.call(this) || this;
        _this.line = line;
        _this._id = Marker._nextId++;
        _this.isDisposed = false;
        _this._onDispose = new EventEmitter_1.EventEmitter();
        return _this;
    }
    Object.defineProperty(Marker.prototype, "id", {
        get: function () { return this._id; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Marker.prototype, "onDispose", {
        get: function () { return this._onDispose.event; },
        enumerable: true,
        configurable: true
    });
    Marker.prototype.dispose = function () {
        if (this.isDisposed) {
            return;
        }
        this.isDisposed = true;
        this.line = -1;
        this._onDispose.fire();
    };
    Marker._nextId = 1;
    return Marker;
}(Lifecycle_1.Disposable));
exports.Marker = Marker;


/***/ }),

/***/ "./out/common/data/Charsets.js":
/*!*************************************!*\
  !*** ./out/common/data/Charsets.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.CHARSETS = {};
exports.DEFAULT_CHARSET = exports.CHARSETS['B'];
exports.CHARSETS['0'] = {
    '`': '\u25c6',
    'a': '\u2592',
    'b': '\u0009',
    'c': '\u000c',
    'd': '\u000d',
    'e': '\u000a',
    'f': '\u00b0',
    'g': '\u00b1',
    'h': '\u2424',
    'i': '\u000b',
    'j': '\u2518',
    'k': '\u2510',
    'l': '\u250c',
    'm': '\u2514',
    'n': '\u253c',
    'o': '\u23ba',
    'p': '\u23bb',
    'q': '\u2500',
    'r': '\u23bc',
    's': '\u23bd',
    't': '\u251c',
    'u': '\u2524',
    'v': '\u2534',
    'w': '\u252c',
    'x': '\u2502',
    'y': '\u2264',
    'z': '\u2265',
    '{': '\u03c0',
    '|': '\u2260',
    '}': '\u00a3',
    '~': '\u00b7'
};
exports.CHARSETS['A'] = {
    '#': ''
};
exports.CHARSETS['B'] = null;
exports.CHARSETS['4'] = {
    '#': '',
    '@': '',
    '[': 'ij',
    '\\': '',
    ']': '|',
    '{': '',
    '|': 'f',
    '}': '',
    '~': ''
};
exports.CHARSETS['C'] =
    exports.CHARSETS['5'] = {
        '[': '',
        '\\': '',
        ']': '',
        '^': '',
        '`': '',
        '{': '',
        '|': '',
        '}': '',
        '~': ''
    };
exports.CHARSETS['R'] = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS['Q'] = {
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '^': '',
    '`': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS['K'] = {
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS['Y'] = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '`': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS['E'] =
    exports.CHARSETS['6'] = {
        '@': '',
        '[': '',
        '\\': '',
        ']': '',
        '^': '',
        '`': '',
        '{': '',
        '|': '',
        '}': '',
        '~': ''
    };
exports.CHARSETS['Z'] = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '{': '',
    '|': '',
    '}': ''
};
exports.CHARSETS['H'] =
    exports.CHARSETS['7'] = {
        '@': '',
        '[': '',
        '\\': '',
        ']': '',
        '^': '',
        '`': '',
        '{': '',
        '|': '',
        '}': '',
        '~': ''
    };
exports.CHARSETS['='] = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '^': '',
    '_': '',
    '`': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};


/***/ }),

/***/ "./out/common/data/EscapeSequences.js":
/*!********************************************!*\
  !*** ./out/common/data/EscapeSequences.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var C0;
(function (C0) {
    C0.NUL = '\x00';
    C0.SOH = '\x01';
    C0.STX = '\x02';
    C0.ETX = '\x03';
    C0.EOT = '\x04';
    C0.ENQ = '\x05';
    C0.ACK = '\x06';
    C0.BEL = '\x07';
    C0.BS = '\x08';
    C0.HT = '\x09';
    C0.LF = '\x0a';
    C0.VT = '\x0b';
    C0.FF = '\x0c';
    C0.CR = '\x0d';
    C0.SO = '\x0e';
    C0.SI = '\x0f';
    C0.DLE = '\x10';
    C0.DC1 = '\x11';
    C0.DC2 = '\x12';
    C0.DC3 = '\x13';
    C0.DC4 = '\x14';
    C0.NAK = '\x15';
    C0.SYN = '\x16';
    C0.ETB = '\x17';
    C0.CAN = '\x18';
    C0.EM = '\x19';
    C0.SUB = '\x1a';
    C0.ESC = '\x1b';
    C0.FS = '\x1c';
    C0.GS = '\x1d';
    C0.RS = '\x1e';
    C0.US = '\x1f';
    C0.SP = '\x20';
    C0.DEL = '\x7f';
})(C0 = exports.C0 || (exports.C0 = {}));
var C1;
(function (C1) {
    C1.PAD = '\x80';
    C1.HOP = '\x81';
    C1.BPH = '\x82';
    C1.NBH = '\x83';
    C1.IND = '\x84';
    C1.NEL = '\x85';
    C1.SSA = '\x86';
    C1.ESA = '\x87';
    C1.HTS = '\x88';
    C1.HTJ = '\x89';
    C1.VTS = '\x8a';
    C1.PLD = '\x8b';
    C1.PLU = '\x8c';
    C1.RI = '\x8d';
    C1.SS2 = '\x8e';
    C1.SS3 = '\x8f';
    C1.DCS = '\x90';
    C1.PU1 = '\x91';
    C1.PU2 = '\x92';
    C1.STS = '\x93';
    C1.CCH = '\x94';
    C1.MW = '\x95';
    C1.SPA = '\x96';
    C1.EPA = '\x97';
    C1.SOS = '\x98';
    C1.SGCI = '\x99';
    C1.SCI = '\x9a';
    C1.CSI = '\x9b';
    C1.ST = '\x9c';
    C1.OSC = '\x9d';
    C1.PM = '\x9e';
    C1.APC = '\x9f';
})(C1 = exports.C1 || (exports.C1 = {}));


/***/ }),

/***/ "./out/common/input/Keyboard.js":
/*!**************************************!*\
  !*** ./out/common/input/Keyboard.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EscapeSequences_1 = __webpack_require__(/*! common/data/EscapeSequences */ "./out/common/data/EscapeSequences.js");
var KEYCODE_KEY_MAPPINGS = {
    48: ['0', ')'],
    49: ['1', '!'],
    50: ['2', '@'],
    51: ['3', '#'],
    52: ['4', '$'],
    53: ['5', '%'],
    54: ['6', '^'],
    55: ['7', '&'],
    56: ['8', '*'],
    57: ['9', '('],
    186: [';', ':'],
    187: ['=', '+'],
    188: [',', '<'],
    189: ['-', '_'],
    190: ['.', '>'],
    191: ['/', '?'],
    192: ['`', '~'],
    219: ['[', '{'],
    220: ['\\', '|'],
    221: [']', '}'],
    222: ['\'', '"']
};
function evaluateKeyboardEvent(ev, applicationCursorMode, isMac, macOptionIsMeta) {
    var result = {
        type: 0,
        cancel: false,
        key: undefined
    };
    var modifiers = (ev.shiftKey ? 1 : 0) | (ev.altKey ? 2 : 0) | (ev.ctrlKey ? 4 : 0) | (ev.metaKey ? 8 : 0);
    switch (ev.keyCode) {
        case 0:
            if (ev.key === 'UIKeyInputUpArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OA';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[A';
                }
            }
            else if (ev.key === 'UIKeyInputLeftArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OD';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[D';
                }
            }
            else if (ev.key === 'UIKeyInputRightArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OC';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[C';
                }
            }
            else if (ev.key === 'UIKeyInputDownArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OB';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[B';
                }
            }
            break;
        case 8:
            if (ev.shiftKey) {
                result.key = EscapeSequences_1.C0.BS;
                break;
            }
            else if (ev.altKey) {
                result.key = EscapeSequences_1.C0.ESC + EscapeSequences_1.C0.DEL;
                break;
            }
            result.key = EscapeSequences_1.C0.DEL;
            break;
        case 9:
            if (ev.shiftKey) {
                result.key = EscapeSequences_1.C0.ESC + '[Z';
                break;
            }
            result.key = EscapeSequences_1.C0.HT;
            result.cancel = true;
            break;
        case 13:
            result.key = EscapeSequences_1.C0.CR;
            result.cancel = true;
            break;
        case 27:
            result.key = EscapeSequences_1.C0.ESC;
            result.cancel = true;
            break;
        case 37:
            if (ev.metaKey) {
                break;
            }
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'D';
                if (result.key === EscapeSequences_1.C0.ESC + '[1;3D') {
                    result.key = EscapeSequences_1.C0.ESC + (isMac ? 'b' : '[1;5D');
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OD';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[D';
            }
            break;
        case 39:
            if (ev.metaKey) {
                break;
            }
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'C';
                if (result.key === EscapeSequences_1.C0.ESC + '[1;3C') {
                    result.key = EscapeSequences_1.C0.ESC + (isMac ? 'f' : '[1;5C');
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OC';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[C';
            }
            break;
        case 38:
            if (ev.metaKey) {
                break;
            }
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'A';
                if (!isMac && result.key === EscapeSequences_1.C0.ESC + '[1;3A') {
                    result.key = EscapeSequences_1.C0.ESC + '[1;5A';
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OA';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[A';
            }
            break;
        case 40:
            if (ev.metaKey) {
                break;
            }
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'B';
                if (!isMac && result.key === EscapeSequences_1.C0.ESC + '[1;3B') {
                    result.key = EscapeSequences_1.C0.ESC + '[1;5B';
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OB';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[B';
            }
            break;
        case 45:
            if (!ev.shiftKey && !ev.ctrlKey) {
                result.key = EscapeSequences_1.C0.ESC + '[2~';
            }
            break;
        case 46:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[3;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[3~';
            }
            break;
        case 36:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'H';
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OH';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[H';
            }
            break;
        case 35:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'F';
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OF';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[F';
            }
            break;
        case 33:
            if (ev.shiftKey) {
                result.type = 2;
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[5~';
            }
            break;
        case 34:
            if (ev.shiftKey) {
                result.type = 3;
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[6~';
            }
            break;
        case 112:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'P';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OP';
            }
            break;
        case 113:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'Q';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OQ';
            }
            break;
        case 114:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'R';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OR';
            }
            break;
        case 115:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'S';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OS';
            }
            break;
        case 116:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[15;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[15~';
            }
            break;
        case 117:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[17;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[17~';
            }
            break;
        case 118:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[18;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[18~';
            }
            break;
        case 119:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[19;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[19~';
            }
            break;
        case 120:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[20;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[20~';
            }
            break;
        case 121:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[21;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[21~';
            }
            break;
        case 122:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[23;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[23~';
            }
            break;
        case 123:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[24;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[24~';
            }
            break;
        default:
            if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey) {
                if (ev.keyCode >= 65 && ev.keyCode <= 90) {
                    result.key = String.fromCharCode(ev.keyCode - 64);
                }
                else if (ev.keyCode === 32) {
                    result.key = EscapeSequences_1.C0.NUL;
                }
                else if (ev.keyCode >= 51 && ev.keyCode <= 55) {
                    result.key = String.fromCharCode(ev.keyCode - 51 + 27);
                }
                else if (ev.keyCode === 56) {
                    result.key = EscapeSequences_1.C0.DEL;
                }
                else if (ev.keyCode === 219) {
                    result.key = EscapeSequences_1.C0.ESC;
                }
                else if (ev.keyCode === 220) {
                    result.key = EscapeSequences_1.C0.FS;
                }
                else if (ev.keyCode === 221) {
                    result.key = EscapeSequences_1.C0.GS;
                }
            }
            else if ((!isMac || macOptionIsMeta) && ev.altKey && !ev.metaKey) {
                var keyMapping = KEYCODE_KEY_MAPPINGS[ev.keyCode];
                var key = keyMapping && keyMapping[!ev.shiftKey ? 0 : 1];
                if (key) {
                    result.key = EscapeSequences_1.C0.ESC + key;
                }
                else if (ev.keyCode >= 65 && ev.keyCode <= 90) {
                    var keyCode = ev.ctrlKey ? ev.keyCode - 64 : ev.keyCode + 32;
                    result.key = EscapeSequences_1.C0.ESC + String.fromCharCode(keyCode);
                }
            }
            else if (isMac && !ev.altKey && !ev.ctrlKey && ev.metaKey) {
                if (ev.keyCode === 65) {
                    result.type = 1;
                }
            }
            else if (ev.key && !ev.ctrlKey && !ev.altKey && !ev.metaKey && ev.keyCode >= 48 && ev.key.length === 1) {
                result.key = ev.key;
            }
            else if (ev.key && ev.ctrlKey) {
                if (ev.key === '_') {
                    result.key = EscapeSequences_1.C0.US;
                }
            }
            break;
    }
    return result;
}
exports.evaluateKeyboardEvent = evaluateKeyboardEvent;


/***/ }),

/***/ "./out/common/input/TextDecoder.js":
/*!*****************************************!*\
  !*** ./out/common/input/TextDecoder.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function stringFromCodePoint(codePoint) {
    if (codePoint > 0xFFFF) {
        codePoint -= 0x10000;
        return String.fromCharCode((codePoint >> 10) + 0xD800) + String.fromCharCode((codePoint % 0x400) + 0xDC00);
    }
    return String.fromCharCode(codePoint);
}
exports.stringFromCodePoint = stringFromCodePoint;
function utf32ToString(data, start, end) {
    if (start === void 0) { start = 0; }
    if (end === void 0) { end = data.length; }
    var result = '';
    for (var i = start; i < end; ++i) {
        var codepoint = data[i];
        if (codepoint > 0xFFFF) {
            codepoint -= 0x10000;
            result += String.fromCharCode((codepoint >> 10) + 0xD800) + String.fromCharCode((codepoint % 0x400) + 0xDC00);
        }
        else {
            result += String.fromCharCode(codepoint);
        }
    }
    return result;
}
exports.utf32ToString = utf32ToString;
var StringToUtf32 = (function () {
    function StringToUtf32() {
        this._interim = 0;
    }
    StringToUtf32.prototype.clear = function () {
        this._interim = 0;
    };
    StringToUtf32.prototype.decode = function (input, target) {
        var length = input.length;
        if (!length) {
            return 0;
        }
        var size = 0;
        var startPos = 0;
        if (this._interim) {
            var second = input.charCodeAt(startPos++);
            if (0xDC00 <= second && second <= 0xDFFF) {
                target[size++] = (this._interim - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;
            }
            else {
                target[size++] = this._interim;
                target[size++] = second;
            }
            this._interim = 0;
        }
        for (var i = startPos; i < length; ++i) {
            var code = input.charCodeAt(i);
            if (0xD800 <= code && code <= 0xDBFF) {
                if (++i >= length) {
                    this._interim = code;
                    return size;
                }
                var second = input.charCodeAt(i);
                if (0xDC00 <= second && second <= 0xDFFF) {
                    target[size++] = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;
                }
                else {
                    target[size++] = code;
                    target[size++] = second;
                }
                continue;
            }
            target[size++] = code;
        }
        return size;
    };
    return StringToUtf32;
}());
exports.StringToUtf32 = StringToUtf32;
var Utf8ToUtf32 = (function () {
    function Utf8ToUtf32() {
        this.interim = new Uint8Array(3);
    }
    Utf8ToUtf32.prototype.clear = function () {
        this.interim.fill(0);
    };
    Utf8ToUtf32.prototype.decode = function (input, target) {
        var length = input.length;
        if (!length) {
            return 0;
        }
        var size = 0;
        var byte1;
        var byte2;
        var byte3;
        var byte4;
        var codepoint = 0;
        var startPos = 0;
        if (this.interim[0]) {
            var discardInterim = false;
            var cp = this.interim[0];
            cp &= ((((cp & 0xE0) === 0xC0)) ? 0x1F : (((cp & 0xF0) === 0xE0)) ? 0x0F : 0x07);
            var pos = 0;
            var tmp = void 0;
            while ((tmp = this.interim[++pos] & 0x3F) && pos < 4) {
                cp <<= 6;
                cp |= tmp;
            }
            var type = (((this.interim[0] & 0xE0) === 0xC0)) ? 2 : (((this.interim[0] & 0xF0) === 0xE0)) ? 3 : 4;
            var missing = type - pos;
            while (startPos < missing) {
                if (startPos >= length) {
                    return 0;
                }
                tmp = input[startPos++];
                if ((tmp & 0xC0) !== 0x80) {
                    startPos--;
                    discardInterim = true;
                    break;
                }
                else {
                    this.interim[pos++] = tmp;
                    cp <<= 6;
                    cp |= tmp & 0x3F;
                }
            }
            if (!discardInterim) {
                if (type === 2) {
                    if (cp < 0x80) {
                        startPos--;
                    }
                    else {
                        target[size++] = cp;
                    }
                }
                else if (type === 3) {
                    if (cp < 0x0800 || (cp >= 0xD800 && cp <= 0xDFFF)) {
                    }
                    else {
                        target[size++] = cp;
                    }
                }
                else {
                    if (cp < 0x010000 || cp > 0x10FFFF) {
                    }
                    else {
                        target[size++] = cp;
                    }
                }
            }
            this.interim.fill(0);
        }
        var fourStop = length - 4;
        var i = startPos;
        while (i < length) {
            while (i < fourStop
                && !((byte1 = input[i]) & 0x80)
                && !((byte2 = input[i + 1]) & 0x80)
                && !((byte3 = input[i + 2]) & 0x80)
                && !((byte4 = input[i + 3]) & 0x80)) {
                target[size++] = byte1;
                target[size++] = byte2;
                target[size++] = byte3;
                target[size++] = byte4;
                i += 4;
            }
            byte1 = input[i++];
            if (byte1 < 0x80) {
                target[size++] = byte1;
            }
            else if ((byte1 & 0xE0) === 0xC0) {
                if (i >= length) {
                    this.interim[0] = byte1;
                    return size;
                }
                byte2 = input[i++];
                if ((byte2 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                codepoint = (byte1 & 0x1F) << 6 | (byte2 & 0x3F);
                if (codepoint < 0x80) {
                    i--;
                    continue;
                }
                target[size++] = codepoint;
            }
            else if ((byte1 & 0xF0) === 0xE0) {
                if (i >= length) {
                    this.interim[0] = byte1;
                    return size;
                }
                byte2 = input[i++];
                if ((byte2 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                if (i >= length) {
                    this.interim[0] = byte1;
                    this.interim[1] = byte2;
                    return size;
                }
                byte3 = input[i++];
                if ((byte3 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                codepoint = (byte1 & 0x0F) << 12 | (byte2 & 0x3F) << 6 | (byte3 & 0x3F);
                if (codepoint < 0x0800 || (codepoint >= 0xD800 && codepoint <= 0xDFFF)) {
                    continue;
                }
                target[size++] = codepoint;
            }
            else if ((byte1 & 0xF8) === 0xF0) {
                if (i >= length) {
                    this.interim[0] = byte1;
                    return size;
                }
                byte2 = input[i++];
                if ((byte2 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                if (i >= length) {
                    this.interim[0] = byte1;
                    this.interim[1] = byte2;
                    return size;
                }
                byte3 = input[i++];
                if ((byte3 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                if (i >= length) {
                    this.interim[0] = byte1;
                    this.interim[1] = byte2;
                    this.interim[2] = byte3;
                    return size;
                }
                byte4 = input[i++];
                if ((byte4 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                codepoint = (byte1 & 0x07) << 18 | (byte2 & 0x3F) << 12 | (byte3 & 0x3F) << 6 | (byte4 & 0x3F);
                if (codepoint < 0x010000 || codepoint > 0x10FFFF) {
                    continue;
                }
                target[size++] = codepoint;
            }
            else {
            }
        }
        return size;
    };
    return Utf8ToUtf32;
}());
exports.Utf8ToUtf32 = Utf8ToUtf32;


/***/ }),

/***/ "./out/common/input/WriteBuffer.js":
/*!*****************************************!*\
  !*** ./out/common/input/WriteBuffer.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var DISCARD_WATERMARK = 50000000;
var WRITE_TIMEOUT_MS = 12;
var WRITE_BUFFER_LENGTH_THRESHOLD = 50;
var WriteBuffer = (function () {
    function WriteBuffer(_action) {
        this._action = _action;
        this._writeBuffer = [];
        this._callbacks = [];
        this._pendingData = 0;
        this._bufferOffset = 0;
    }
    WriteBuffer.prototype.writeSync = function (data) {
        if (this._writeBuffer.length) {
            for (var i = this._bufferOffset; i < this._writeBuffer.length; ++i) {
                var data_1 = this._writeBuffer[i];
                var cb = this._callbacks[i];
                this._action(data_1);
                if (cb)
                    cb();
            }
            this._writeBuffer = [];
            this._callbacks = [];
            this._pendingData = 0;
            this._bufferOffset = 0x7FFFFFFF;
        }
        this._action(data);
    };
    WriteBuffer.prototype.write = function (data, callback) {
        var _this = this;
        if (this._pendingData > DISCARD_WATERMARK) {
            throw new Error('write data discarded, use flow control to avoid losing data');
        }
        if (!this._writeBuffer.length) {
            this._bufferOffset = 0;
            setTimeout(function () { return _this._innerWrite(); });
        }
        this._pendingData += data.length;
        this._writeBuffer.push(data);
        this._callbacks.push(callback);
    };
    WriteBuffer.prototype._innerWrite = function () {
        var _this = this;
        var startTime = Date.now();
        while (this._writeBuffer.length > this._bufferOffset) {
            var data = this._writeBuffer[this._bufferOffset];
            var cb = this._callbacks[this._bufferOffset];
            this._bufferOffset++;
            this._action(data);
            this._pendingData -= data.length;
            if (cb)
                cb();
            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {
                break;
            }
        }
        if (this._writeBuffer.length > this._bufferOffset) {
            if (this._bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {
                this._writeBuffer = this._writeBuffer.slice(this._bufferOffset);
                this._callbacks = this._callbacks.slice(this._bufferOffset);
                this._bufferOffset = 0;
            }
            setTimeout(function () { return _this._innerWrite(); }, 0);
        }
        else {
            this._writeBuffer = [];
            this._callbacks = [];
            this._pendingData = 0;
            this._bufferOffset = 0;
        }
    };
    return WriteBuffer;
}());
exports.WriteBuffer = WriteBuffer;


/***/ }),

/***/ "./out/common/parser/Constants.js":
/*!****************************************!*\
  !*** ./out/common/parser/Constants.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.PAYLOAD_LIMIT = 10000000;


/***/ }),

/***/ "./out/common/parser/DcsParser.js":
/*!****************************************!*\
  !*** ./out/common/parser/DcsParser.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var Params_1 = __webpack_require__(/*! common/parser/Params */ "./out/common/parser/Params.js");
var Constants_1 = __webpack_require__(/*! common/parser/Constants */ "./out/common/parser/Constants.js");
var EMPTY_HANDLERS = [];
var DcsParser = (function () {
    function DcsParser() {
        this._handlers = Object.create(null);
        this._active = EMPTY_HANDLERS;
        this._ident = 0;
        this._handlerFb = function () { };
    }
    DcsParser.prototype.dispose = function () {
        this._handlers = Object.create(null);
        this._handlerFb = function () { };
    };
    DcsParser.prototype.addHandler = function (ident, handler) {
        if (this._handlers[ident] === undefined) {
            this._handlers[ident] = [];
        }
        var handlerList = this._handlers[ident];
        handlerList.push(handler);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(handler);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    DcsParser.prototype.setHandler = function (ident, handler) {
        this._handlers[ident] = [handler];
    };
    DcsParser.prototype.clearHandler = function (ident) {
        if (this._handlers[ident])
            delete this._handlers[ident];
    };
    DcsParser.prototype.setHandlerFallback = function (handler) {
        this._handlerFb = handler;
    };
    DcsParser.prototype.reset = function () {
        if (this._active.length) {
            this.unhook(false);
        }
        this._active = EMPTY_HANDLERS;
        this._ident = 0;
    };
    DcsParser.prototype.hook = function (ident, params) {
        this.reset();
        this._ident = ident;
        this._active = this._handlers[ident] || EMPTY_HANDLERS;
        if (!this._active.length) {
            this._handlerFb(this._ident, 'HOOK', params);
        }
        else {
            for (var j = this._active.length - 1; j >= 0; j--) {
                this._active[j].hook(params);
            }
        }
    };
    DcsParser.prototype.put = function (data, start, end) {
        if (!this._active.length) {
            this._handlerFb(this._ident, 'PUT', TextDecoder_1.utf32ToString(data, start, end));
        }
        else {
            for (var j = this._active.length - 1; j >= 0; j--) {
                this._active[j].put(data, start, end);
            }
        }
    };
    DcsParser.prototype.unhook = function (success) {
        if (!this._active.length) {
            this._handlerFb(this._ident, 'UNHOOK', success);
        }
        else {
            var j = this._active.length - 1;
            for (; j >= 0; j--) {
                if (this._active[j].unhook(success) !== false) {
                    break;
                }
            }
            j--;
            for (; j >= 0; j--) {
                this._active[j].unhook(false);
            }
        }
        this._active = EMPTY_HANDLERS;
        this._ident = 0;
    };
    return DcsParser;
}());
exports.DcsParser = DcsParser;
var DcsHandler = (function () {
    function DcsHandler(_handler) {
        this._handler = _handler;
        this._data = '';
        this._hitLimit = false;
    }
    DcsHandler.prototype.hook = function (params) {
        this._params = params.clone();
        this._data = '';
        this._hitLimit = false;
    };
    DcsHandler.prototype.put = function (data, start, end) {
        if (this._hitLimit) {
            return;
        }
        this._data += TextDecoder_1.utf32ToString(data, start, end);
        if (this._data.length > Constants_1.PAYLOAD_LIMIT) {
            this._data = '';
            this._hitLimit = true;
        }
    };
    DcsHandler.prototype.unhook = function (success) {
        var ret;
        if (this._hitLimit) {
            ret = false;
        }
        else if (success) {
            ret = this._handler(this._data, this._params ? this._params : new Params_1.Params());
        }
        this._params = undefined;
        this._data = '';
        this._hitLimit = false;
        return ret;
    };
    return DcsHandler;
}());
exports.DcsHandler = DcsHandler;


/***/ }),

/***/ "./out/common/parser/EscapeSequenceParser.js":
/*!***************************************************!*\
  !*** ./out/common/parser/EscapeSequenceParser.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
var Params_1 = __webpack_require__(/*! common/parser/Params */ "./out/common/parser/Params.js");
var OscParser_1 = __webpack_require__(/*! common/parser/OscParser */ "./out/common/parser/OscParser.js");
var DcsParser_1 = __webpack_require__(/*! common/parser/DcsParser */ "./out/common/parser/DcsParser.js");
var TransitionTable = (function () {
    function TransitionTable(length) {
        this.table = new Uint8Array(length);
    }
    TransitionTable.prototype.setDefault = function (action, next) {
        TypedArrayUtils_1.fill(this.table, action << 4 | next);
    };
    TransitionTable.prototype.add = function (code, state, action, next) {
        this.table[state << 8 | code] = action << 4 | next;
    };
    TransitionTable.prototype.addMany = function (codes, state, action, next) {
        for (var i = 0; i < codes.length; i++) {
            this.table[state << 8 | codes[i]] = action << 4 | next;
        }
    };
    return TransitionTable;
}());
exports.TransitionTable = TransitionTable;
var NON_ASCII_PRINTABLE = 0xA0;
exports.VT500_TRANSITION_TABLE = (function () {
    var table = new TransitionTable(4095);
    var BYTE_VALUES = 256;
    var blueprint = Array.apply(null, Array(BYTE_VALUES)).map(function (unused, i) { return i; });
    var r = function (start, end) { return blueprint.slice(start, end); };
    var PRINTABLES = r(0x20, 0x7f);
    var EXECUTABLES = r(0x00, 0x18);
    EXECUTABLES.push(0x19);
    EXECUTABLES.push.apply(EXECUTABLES, r(0x1c, 0x20));
    var states = r(0, 13 + 1);
    var state;
    table.setDefault(1, 0);
    table.addMany(PRINTABLES, 0, 2, 0);
    for (state in states) {
        table.addMany([0x18, 0x1a, 0x99, 0x9a], state, 3, 0);
        table.addMany(r(0x80, 0x90), state, 3, 0);
        table.addMany(r(0x90, 0x98), state, 3, 0);
        table.add(0x9c, state, 0, 0);
        table.add(0x1b, state, 11, 1);
        table.add(0x9d, state, 4, 8);
        table.addMany([0x98, 0x9e, 0x9f], state, 0, 7);
        table.add(0x9b, state, 11, 3);
        table.add(0x90, state, 11, 9);
    }
    table.addMany(EXECUTABLES, 0, 3, 0);
    table.addMany(EXECUTABLES, 1, 3, 1);
    table.add(0x7f, 1, 0, 1);
    table.addMany(EXECUTABLES, 8, 0, 8);
    table.addMany(EXECUTABLES, 3, 3, 3);
    table.add(0x7f, 3, 0, 3);
    table.addMany(EXECUTABLES, 4, 3, 4);
    table.add(0x7f, 4, 0, 4);
    table.addMany(EXECUTABLES, 6, 3, 6);
    table.addMany(EXECUTABLES, 5, 3, 5);
    table.add(0x7f, 5, 0, 5);
    table.addMany(EXECUTABLES, 2, 3, 2);
    table.add(0x7f, 2, 0, 2);
    table.add(0x5d, 1, 4, 8);
    table.addMany(PRINTABLES, 8, 5, 8);
    table.add(0x7f, 8, 5, 8);
    table.addMany([0x9c, 0x1b, 0x18, 0x1a, 0x07], 8, 6, 0);
    table.addMany(r(0x1c, 0x20), 8, 0, 8);
    table.addMany([0x58, 0x5e, 0x5f], 1, 0, 7);
    table.addMany(PRINTABLES, 7, 0, 7);
    table.addMany(EXECUTABLES, 7, 0, 7);
    table.add(0x9c, 7, 0, 0);
    table.add(0x7f, 7, 0, 7);
    table.add(0x5b, 1, 11, 3);
    table.addMany(r(0x40, 0x7f), 3, 7, 0);
    table.addMany(r(0x30, 0x3c), 3, 8, 4);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 3, 9, 4);
    table.addMany(r(0x30, 0x3c), 4, 8, 4);
    table.addMany(r(0x40, 0x7f), 4, 7, 0);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 4, 0, 6);
    table.addMany(r(0x20, 0x40), 6, 0, 6);
    table.add(0x7f, 6, 0, 6);
    table.addMany(r(0x40, 0x7f), 6, 0, 0);
    table.addMany(r(0x20, 0x30), 3, 9, 5);
    table.addMany(r(0x20, 0x30), 5, 9, 5);
    table.addMany(r(0x30, 0x40), 5, 0, 6);
    table.addMany(r(0x40, 0x7f), 5, 7, 0);
    table.addMany(r(0x20, 0x30), 4, 9, 5);
    table.addMany(r(0x20, 0x30), 1, 9, 2);
    table.addMany(r(0x20, 0x30), 2, 9, 2);
    table.addMany(r(0x30, 0x7f), 2, 10, 0);
    table.addMany(r(0x30, 0x50), 1, 10, 0);
    table.addMany(r(0x51, 0x58), 1, 10, 0);
    table.addMany([0x59, 0x5a, 0x5c], 1, 10, 0);
    table.addMany(r(0x60, 0x7f), 1, 10, 0);
    table.add(0x50, 1, 11, 9);
    table.addMany(EXECUTABLES, 9, 0, 9);
    table.add(0x7f, 9, 0, 9);
    table.addMany(r(0x1c, 0x20), 9, 0, 9);
    table.addMany(r(0x20, 0x30), 9, 9, 12);
    table.addMany(r(0x30, 0x3c), 9, 8, 10);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 9, 9, 10);
    table.addMany(EXECUTABLES, 11, 0, 11);
    table.addMany(r(0x20, 0x80), 11, 0, 11);
    table.addMany(r(0x1c, 0x20), 11, 0, 11);
    table.addMany(EXECUTABLES, 10, 0, 10);
    table.add(0x7f, 10, 0, 10);
    table.addMany(r(0x1c, 0x20), 10, 0, 10);
    table.addMany(r(0x30, 0x3c), 10, 8, 10);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 10, 0, 11);
    table.addMany(r(0x20, 0x30), 10, 9, 12);
    table.addMany(EXECUTABLES, 12, 0, 12);
    table.add(0x7f, 12, 0, 12);
    table.addMany(r(0x1c, 0x20), 12, 0, 12);
    table.addMany(r(0x20, 0x30), 12, 9, 12);
    table.addMany(r(0x30, 0x40), 12, 0, 11);
    table.addMany(r(0x40, 0x7f), 12, 12, 13);
    table.addMany(r(0x40, 0x7f), 10, 12, 13);
    table.addMany(r(0x40, 0x7f), 9, 12, 13);
    table.addMany(EXECUTABLES, 13, 13, 13);
    table.addMany(PRINTABLES, 13, 13, 13);
    table.add(0x7f, 13, 0, 13);
    table.addMany([0x1b, 0x9c, 0x18, 0x1a], 13, 14, 0);
    table.add(NON_ASCII_PRINTABLE, 0, 2, 0);
    table.add(NON_ASCII_PRINTABLE, 8, 5, 8);
    table.add(NON_ASCII_PRINTABLE, 6, 0, 6);
    table.add(NON_ASCII_PRINTABLE, 11, 0, 11);
    table.add(NON_ASCII_PRINTABLE, 13, 13, 13);
    return table;
})();
var EscapeSequenceParser = (function (_super) {
    __extends(EscapeSequenceParser, _super);
    function EscapeSequenceParser(TRANSITIONS) {
        if (TRANSITIONS === void 0) { TRANSITIONS = exports.VT500_TRANSITION_TABLE; }
        var _this = _super.call(this) || this;
        _this.TRANSITIONS = TRANSITIONS;
        _this.initialState = 0;
        _this.currentState = _this.initialState;
        _this._params = new Params_1.Params();
        _this._params.addParam(0);
        _this._collect = 0;
        _this.precedingCodepoint = 0;
        _this._printHandlerFb = function (data, start, end) { };
        _this._executeHandlerFb = function (code) { };
        _this._csiHandlerFb = function (ident, params) { };
        _this._escHandlerFb = function (ident) { };
        _this._errorHandlerFb = function (state) { return state; };
        _this._printHandler = _this._printHandlerFb;
        _this._executeHandlers = Object.create(null);
        _this._csiHandlers = Object.create(null);
        _this._escHandlers = Object.create(null);
        _this._oscParser = new OscParser_1.OscParser();
        _this._dcsParser = new DcsParser_1.DcsParser();
        _this._errorHandler = _this._errorHandlerFb;
        _this.setEscHandler({ final: '\\' }, function () { });
        return _this;
    }
    EscapeSequenceParser.prototype._identifier = function (id, finalRange) {
        if (finalRange === void 0) { finalRange = [0x40, 0x7e]; }
        var res = 0;
        if (id.prefix) {
            if (id.prefix.length > 1) {
                throw new Error('only one byte as prefix supported');
            }
            res = id.prefix.charCodeAt(0);
            if (res && 0x3c > res || res > 0x3f) {
                throw new Error('prefix must be in range 0x3c .. 0x3f');
            }
        }
        if (id.intermediates) {
            if (id.intermediates.length > 2) {
                throw new Error('only two bytes as intermediates are supported');
            }
            for (var i = 0; i < id.intermediates.length; ++i) {
                var intermediate = id.intermediates.charCodeAt(i);
                if (0x20 > intermediate || intermediate > 0x2f) {
                    throw new Error('intermediate must be in range 0x20 .. 0x2f');
                }
                res <<= 8;
                res |= intermediate;
            }
        }
        if (id.final.length !== 1) {
            throw new Error('final must be a single byte');
        }
        var finalCode = id.final.charCodeAt(0);
        if (finalRange[0] > finalCode || finalCode > finalRange[1]) {
            throw new Error("final must be in range " + finalRange[0] + " .. " + finalRange[1]);
        }
        res <<= 8;
        res |= finalCode;
        return res;
    };
    EscapeSequenceParser.prototype.identToString = function (ident) {
        var res = [];
        while (ident) {
            res.push(String.fromCharCode(ident & 0xFF));
            ident >>= 8;
        }
        return res.reverse().join('');
    };
    EscapeSequenceParser.prototype.dispose = function () {
        this._csiHandlers = Object.create(null);
        this._executeHandlers = Object.create(null);
        this._escHandlers = Object.create(null);
        this._oscParser.dispose();
        this._dcsParser.dispose();
    };
    EscapeSequenceParser.prototype.setPrintHandler = function (handler) {
        this._printHandler = handler;
    };
    EscapeSequenceParser.prototype.clearPrintHandler = function () {
        this._printHandler = this._printHandlerFb;
    };
    EscapeSequenceParser.prototype.addEscHandler = function (id, handler) {
        var ident = this._identifier(id, [0x30, 0x7e]);
        if (this._escHandlers[ident] === undefined) {
            this._escHandlers[ident] = [];
        }
        var handlerList = this._escHandlers[ident];
        handlerList.push(handler);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(handler);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    EscapeSequenceParser.prototype.setEscHandler = function (id, handler) {
        this._escHandlers[this._identifier(id, [0x30, 0x7e])] = [handler];
    };
    EscapeSequenceParser.prototype.clearEscHandler = function (id) {
        if (this._escHandlers[this._identifier(id, [0x30, 0x7e])])
            delete this._escHandlers[this._identifier(id, [0x30, 0x7e])];
    };
    EscapeSequenceParser.prototype.setEscHandlerFallback = function (handler) {
        this._escHandlerFb = handler;
    };
    EscapeSequenceParser.prototype.setExecuteHandler = function (flag, handler) {
        this._executeHandlers[flag.charCodeAt(0)] = handler;
    };
    EscapeSequenceParser.prototype.clearExecuteHandler = function (flag) {
        if (this._executeHandlers[flag.charCodeAt(0)])
            delete this._executeHandlers[flag.charCodeAt(0)];
    };
    EscapeSequenceParser.prototype.setExecuteHandlerFallback = function (handler) {
        this._executeHandlerFb = handler;
    };
    EscapeSequenceParser.prototype.addCsiHandler = function (id, handler) {
        var ident = this._identifier(id);
        if (this._csiHandlers[ident] === undefined) {
            this._csiHandlers[ident] = [];
        }
        var handlerList = this._csiHandlers[ident];
        handlerList.push(handler);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(handler);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    EscapeSequenceParser.prototype.setCsiHandler = function (id, handler) {
        this._csiHandlers[this._identifier(id)] = [handler];
    };
    EscapeSequenceParser.prototype.clearCsiHandler = function (id) {
        if (this._csiHandlers[this._identifier(id)])
            delete this._csiHandlers[this._identifier(id)];
    };
    EscapeSequenceParser.prototype.setCsiHandlerFallback = function (callback) {
        this._csiHandlerFb = callback;
    };
    EscapeSequenceParser.prototype.addDcsHandler = function (id, handler) {
        return this._dcsParser.addHandler(this._identifier(id), handler);
    };
    EscapeSequenceParser.prototype.setDcsHandler = function (id, handler) {
        this._dcsParser.setHandler(this._identifier(id), handler);
    };
    EscapeSequenceParser.prototype.clearDcsHandler = function (id) {
        this._dcsParser.clearHandler(this._identifier(id));
    };
    EscapeSequenceParser.prototype.setDcsHandlerFallback = function (handler) {
        this._dcsParser.setHandlerFallback(handler);
    };
    EscapeSequenceParser.prototype.addOscHandler = function (ident, handler) {
        return this._oscParser.addHandler(ident, handler);
    };
    EscapeSequenceParser.prototype.setOscHandler = function (ident, handler) {
        this._oscParser.setHandler(ident, handler);
    };
    EscapeSequenceParser.prototype.clearOscHandler = function (ident) {
        this._oscParser.clearHandler(ident);
    };
    EscapeSequenceParser.prototype.setOscHandlerFallback = function (handler) {
        this._oscParser.setHandlerFallback(handler);
    };
    EscapeSequenceParser.prototype.setErrorHandler = function (callback) {
        this._errorHandler = callback;
    };
    EscapeSequenceParser.prototype.clearErrorHandler = function () {
        this._errorHandler = this._errorHandlerFb;
    };
    EscapeSequenceParser.prototype.reset = function () {
        this.currentState = this.initialState;
        this._oscParser.reset();
        this._dcsParser.reset();
        this._params.reset();
        this._params.addParam(0);
        this._collect = 0;
        this.precedingCodepoint = 0;
    };
    EscapeSequenceParser.prototype.parse = function (data, length) {
        var code = 0;
        var transition = 0;
        var currentState = this.currentState;
        var osc = this._oscParser;
        var dcs = this._dcsParser;
        var collect = this._collect;
        var params = this._params;
        var table = this.TRANSITIONS.table;
        for (var i = 0; i < length; ++i) {
            code = data[i];
            transition = table[currentState << 8 | (code < 0xa0 ? code : NON_ASCII_PRINTABLE)];
            switch (transition >> 4) {
                case 2:
                    for (var j_1 = i + 1;; ++j_1) {
                        if (j_1 >= length || (code = data[j_1]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {
                            this._printHandler(data, i, j_1);
                            i = j_1 - 1;
                            break;
                        }
                        if (++j_1 >= length || (code = data[j_1]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {
                            this._printHandler(data, i, j_1);
                            i = j_1 - 1;
                            break;
                        }
                        if (++j_1 >= length || (code = data[j_1]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {
                            this._printHandler(data, i, j_1);
                            i = j_1 - 1;
                            break;
                        }
                        if (++j_1 >= length || (code = data[j_1]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {
                            this._printHandler(data, i, j_1);
                            i = j_1 - 1;
                            break;
                        }
                    }
                    break;
                case 3:
                    if (this._executeHandlers[code])
                        this._executeHandlers[code]();
                    else
                        this._executeHandlerFb(code);
                    this.precedingCodepoint = 0;
                    break;
                case 0:
                    break;
                case 1:
                    var inject = this._errorHandler({
                        position: i,
                        code: code,
                        currentState: currentState,
                        collect: collect,
                        params: params,
                        abort: false
                    });
                    if (inject.abort)
                        return;
                    break;
                case 7:
                    var handlers = this._csiHandlers[collect << 8 | code];
                    var j = handlers ? handlers.length - 1 : -1;
                    for (; j >= 0; j--) {
                        if (handlers[j](params) !== false) {
                            break;
                        }
                    }
                    if (j < 0) {
                        this._csiHandlerFb(collect << 8 | code, params);
                    }
                    this.precedingCodepoint = 0;
                    break;
                case 8:
                    do {
                        switch (code) {
                            case 0x3b:
                                params.addParam(0);
                                break;
                            case 0x3a:
                                params.addSubParam(-1);
                                break;
                            default:
                                params.addDigit(code - 48);
                        }
                    } while (++i < length && (code = data[i]) > 0x2f && code < 0x3c);
                    i--;
                    break;
                case 9:
                    collect <<= 8;
                    collect |= code;
                    break;
                case 10:
                    var handlersEsc = this._escHandlers[collect << 8 | code];
                    var jj = handlersEsc ? handlersEsc.length - 1 : -1;
                    for (; jj >= 0; jj--) {
                        if (handlersEsc[jj]() !== false) {
                            break;
                        }
                    }
                    if (jj < 0) {
                        this._escHandlerFb(collect << 8 | code);
                    }
                    this.precedingCodepoint = 0;
                    break;
                case 11:
                    params.reset();
                    params.addParam(0);
                    collect = 0;
                    break;
                case 12:
                    dcs.hook(collect << 8 | code, params);
                    break;
                case 13:
                    for (var j_2 = i + 1;; ++j_2) {
                        if (j_2 >= length || (code = data[j_2]) === 0x18 || code === 0x1a || code === 0x1b || (code > 0x7f && code < NON_ASCII_PRINTABLE)) {
                            dcs.put(data, i, j_2);
                            i = j_2 - 1;
                            break;
                        }
                    }
                    break;
                case 14:
                    dcs.unhook(code !== 0x18 && code !== 0x1a);
                    if (code === 0x1b)
                        transition |= 1;
                    params.reset();
                    params.addParam(0);
                    collect = 0;
                    this.precedingCodepoint = 0;
                    break;
                case 4:
                    osc.start();
                    break;
                case 5:
                    for (var j_3 = i + 1;; j_3++) {
                        if (j_3 >= length || (code = data[j_3]) < 0x20 || (code > 0x7f && code <= 0x9f)) {
                            osc.put(data, i, j_3);
                            i = j_3 - 1;
                            break;
                        }
                    }
                    break;
                case 6:
                    osc.end(code !== 0x18 && code !== 0x1a);
                    if (code === 0x1b)
                        transition |= 1;
                    params.reset();
                    params.addParam(0);
                    collect = 0;
                    this.precedingCodepoint = 0;
                    break;
            }
            currentState = transition & 15;
        }
        this._collect = collect;
        this.currentState = currentState;
    };
    return EscapeSequenceParser;
}(Lifecycle_1.Disposable));
exports.EscapeSequenceParser = EscapeSequenceParser;


/***/ }),

/***/ "./out/common/parser/OscParser.js":
/*!****************************************!*\
  !*** ./out/common/parser/OscParser.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! common/parser/Constants */ "./out/common/parser/Constants.js");
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var OscParser = (function () {
    function OscParser() {
        this._state = 0;
        this._id = -1;
        this._handlers = Object.create(null);
        this._handlerFb = function () { };
    }
    OscParser.prototype.addHandler = function (ident, handler) {
        if (this._handlers[ident] === undefined) {
            this._handlers[ident] = [];
        }
        var handlerList = this._handlers[ident];
        handlerList.push(handler);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(handler);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    OscParser.prototype.setHandler = function (ident, handler) {
        this._handlers[ident] = [handler];
    };
    OscParser.prototype.clearHandler = function (ident) {
        if (this._handlers[ident])
            delete this._handlers[ident];
    };
    OscParser.prototype.setHandlerFallback = function (handler) {
        this._handlerFb = handler;
    };
    OscParser.prototype.dispose = function () {
        this._handlers = Object.create(null);
        this._handlerFb = function () { };
    };
    OscParser.prototype.reset = function () {
        if (this._state === 2) {
            this.end(false);
        }
        this._id = -1;
        this._state = 0;
    };
    OscParser.prototype._start = function () {
        var handlers = this._handlers[this._id];
        if (!handlers) {
            this._handlerFb(this._id, 'START');
        }
        else {
            for (var j = handlers.length - 1; j >= 0; j--) {
                handlers[j].start();
            }
        }
    };
    OscParser.prototype._put = function (data, start, end) {
        var handlers = this._handlers[this._id];
        if (!handlers) {
            this._handlerFb(this._id, 'PUT', TextDecoder_1.utf32ToString(data, start, end));
        }
        else {
            for (var j = handlers.length - 1; j >= 0; j--) {
                handlers[j].put(data, start, end);
            }
        }
    };
    OscParser.prototype._end = function (success) {
        var handlers = this._handlers[this._id];
        if (!handlers) {
            this._handlerFb(this._id, 'END', success);
        }
        else {
            var j = handlers.length - 1;
            for (; j >= 0; j--) {
                if (handlers[j].end(success) !== false) {
                    break;
                }
            }
            j--;
            for (; j >= 0; j--) {
                handlers[j].end(false);
            }
        }
    };
    OscParser.prototype.start = function () {
        this.reset();
        this._id = -1;
        this._state = 1;
    };
    OscParser.prototype.put = function (data, start, end) {
        if (this._state === 3) {
            return;
        }
        if (this._state === 1) {
            while (start < end) {
                var code = data[start++];
                if (code === 0x3b) {
                    this._state = 2;
                    this._start();
                    break;
                }
                if (code < 0x30 || 0x39 < code) {
                    this._state = 3;
                    return;
                }
                if (this._id === -1) {
                    this._id = 0;
                }
                this._id = this._id * 10 + code - 48;
            }
        }
        if (this._state === 2 && end - start > 0) {
            this._put(data, start, end);
        }
    };
    OscParser.prototype.end = function (success) {
        if (this._state === 0) {
            return;
        }
        if (this._state !== 3) {
            if (this._state === 1) {
                this._start();
            }
            this._end(success);
        }
        this._id = -1;
        this._state = 0;
    };
    return OscParser;
}());
exports.OscParser = OscParser;
var OscHandler = (function () {
    function OscHandler(_handler) {
        this._handler = _handler;
        this._data = '';
        this._hitLimit = false;
    }
    OscHandler.prototype.start = function () {
        this._data = '';
        this._hitLimit = false;
    };
    OscHandler.prototype.put = function (data, start, end) {
        if (this._hitLimit) {
            return;
        }
        this._data += TextDecoder_1.utf32ToString(data, start, end);
        if (this._data.length > Constants_1.PAYLOAD_LIMIT) {
            this._data = '';
            this._hitLimit = true;
        }
    };
    OscHandler.prototype.end = function (success) {
        var ret;
        if (this._hitLimit) {
            ret = false;
        }
        else if (success) {
            ret = this._handler(this._data);
        }
        this._data = '';
        this._hitLimit = false;
        return ret;
    };
    return OscHandler;
}());
exports.OscHandler = OscHandler;


/***/ }),

/***/ "./out/common/parser/Params.js":
/*!*************************************!*\
  !*** ./out/common/parser/Params.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var MAX_VALUE = 0x7FFFFFFF;
var MAX_SUBPARAMS = 256;
var Params = (function () {
    function Params(maxLength, maxSubParamsLength) {
        if (maxLength === void 0) { maxLength = 32; }
        if (maxSubParamsLength === void 0) { maxSubParamsLength = 32; }
        this.maxLength = maxLength;
        this.maxSubParamsLength = maxSubParamsLength;
        if (maxSubParamsLength > MAX_SUBPARAMS) {
            throw new Error('maxSubParamsLength must not be greater than 256');
        }
        this.params = new Int32Array(maxLength);
        this.length = 0;
        this._subParams = new Int32Array(maxSubParamsLength);
        this._subParamsLength = 0;
        this._subParamsIdx = new Uint16Array(maxLength);
        this._rejectDigits = false;
        this._rejectSubDigits = false;
        this._digitIsSub = false;
    }
    Params.fromArray = function (values) {
        var params = new Params();
        if (!values.length) {
            return params;
        }
        for (var i = (values[0] instanceof Array) ? 1 : 0; i < values.length; ++i) {
            var value = values[i];
            if (value instanceof Array) {
                for (var k = 0; k < value.length; ++k) {
                    params.addSubParam(value[k]);
                }
            }
            else {
                params.addParam(value);
            }
        }
        return params;
    };
    Params.prototype.clone = function () {
        var newParams = new Params(this.maxLength, this.maxSubParamsLength);
        newParams.params.set(this.params);
        newParams.length = this.length;
        newParams._subParams.set(this._subParams);
        newParams._subParamsLength = this._subParamsLength;
        newParams._subParamsIdx.set(this._subParamsIdx);
        newParams._rejectDigits = this._rejectDigits;
        newParams._rejectSubDigits = this._rejectSubDigits;
        newParams._digitIsSub = this._digitIsSub;
        return newParams;
    };
    Params.prototype.toArray = function () {
        var res = [];
        for (var i = 0; i < this.length; ++i) {
            res.push(this.params[i]);
            var start = this._subParamsIdx[i] >> 8;
            var end = this._subParamsIdx[i] & 0xFF;
            if (end - start > 0) {
                res.push(Array.prototype.slice.call(this._subParams, start, end));
            }
        }
        return res;
    };
    Params.prototype.reset = function () {
        this.length = 0;
        this._subParamsLength = 0;
        this._rejectDigits = false;
        this._rejectSubDigits = false;
        this._digitIsSub = false;
    };
    Params.prototype.addParam = function (value) {
        this._digitIsSub = false;
        if (this.length >= this.maxLength) {
            this._rejectDigits = true;
            return;
        }
        if (value < -1) {
            throw new Error('values lesser than -1 are not allowed');
        }
        this._subParamsIdx[this.length] = this._subParamsLength << 8 | this._subParamsLength;
        this.params[this.length++] = value > MAX_VALUE ? MAX_VALUE : value;
    };
    Params.prototype.addSubParam = function (value) {
        this._digitIsSub = true;
        if (!this.length) {
            return;
        }
        if (this._rejectDigits || this._subParamsLength >= this.maxSubParamsLength) {
            this._rejectSubDigits = true;
            return;
        }
        if (value < -1) {
            throw new Error('values lesser than -1 are not allowed');
        }
        this._subParams[this._subParamsLength++] = value > MAX_VALUE ? MAX_VALUE : value;
        this._subParamsIdx[this.length - 1]++;
    };
    Params.prototype.hasSubParams = function (idx) {
        return ((this._subParamsIdx[idx] & 0xFF) - (this._subParamsIdx[idx] >> 8) > 0);
    };
    Params.prototype.getSubParams = function (idx) {
        var start = this._subParamsIdx[idx] >> 8;
        var end = this._subParamsIdx[idx] & 0xFF;
        if (end - start > 0) {
            return this._subParams.subarray(start, end);
        }
        return null;
    };
    Params.prototype.getSubParamsAll = function () {
        var result = {};
        for (var i = 0; i < this.length; ++i) {
            var start = this._subParamsIdx[i] >> 8;
            var end = this._subParamsIdx[i] & 0xFF;
            if (end - start > 0) {
                result[i] = this._subParams.slice(start, end);
            }
        }
        return result;
    };
    Params.prototype.addDigit = function (value) {
        var length;
        if (this._rejectDigits
            || !(length = this._digitIsSub ? this._subParamsLength : this.length)
            || (this._digitIsSub && this._rejectSubDigits)) {
            return;
        }
        var store = this._digitIsSub ? this._subParams : this.params;
        var cur = store[length - 1];
        store[length - 1] = ~cur ? Math.min(cur * 10 + value, MAX_VALUE) : value;
    };
    return Params;
}());
exports.Params = Params;


/***/ }),

/***/ "./out/common/services/BufferService.js":
/*!**********************************************!*\
  !*** ./out/common/services/BufferService.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var BufferSet_1 = __webpack_require__(/*! common/buffer/BufferSet */ "./out/common/buffer/BufferSet.js");
exports.MINIMUM_COLS = 2;
exports.MINIMUM_ROWS = 1;
var BufferService = (function () {
    function BufferService(_optionsService) {
        this._optionsService = _optionsService;
        this.cols = Math.max(_optionsService.options.cols, exports.MINIMUM_COLS);
        this.rows = Math.max(_optionsService.options.rows, exports.MINIMUM_ROWS);
        this.buffers = new BufferSet_1.BufferSet(_optionsService, this);
    }
    Object.defineProperty(BufferService.prototype, "buffer", {
        get: function () { return this.buffers.active; },
        enumerable: true,
        configurable: true
    });
    BufferService.prototype.resize = function (cols, rows) {
        this.cols = cols;
        this.rows = rows;
    };
    BufferService.prototype.reset = function () {
        this.buffers = new BufferSet_1.BufferSet(this._optionsService, this);
    };
    BufferService = __decorate([
        __param(0, Services_1.IOptionsService)
    ], BufferService);
    return BufferService;
}());
exports.BufferService = BufferService;


/***/ }),

/***/ "./out/common/services/CharsetService.js":
/*!***********************************************!*\
  !*** ./out/common/services/CharsetService.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CharsetService = (function () {
    function CharsetService() {
        this.charsets = [];
        this.glevel = 0;
    }
    CharsetService.prototype.reset = function () {
        this.charset = undefined;
        this.charsets = [];
        this.glevel = 0;
    };
    CharsetService.prototype.setgLevel = function (g) {
        this.glevel = g;
        this.charset = this.charsets[g];
    };
    CharsetService.prototype.setgCharset = function (g, charset) {
        this.charsets[g] = charset;
        if (this.glevel === g) {
            this.charset = charset;
        }
    };
    return CharsetService;
}());
exports.CharsetService = CharsetService;


/***/ }),

/***/ "./out/common/services/CoreMouseService.js":
/*!*************************************************!*\
  !*** ./out/common/services/CoreMouseService.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var DEFAULT_PROTOCOLS = {
    NONE: {
        events: 0,
        restrict: function () { return false; }
    },
    X10: {
        events: 1,
        restrict: function (e) {
            if (e.button === 4 || e.action !== 1) {
                return false;
            }
            e.ctrl = false;
            e.alt = false;
            e.shift = false;
            return true;
        }
    },
    VT200: {
        events: 1 | 2 | 16,
        restrict: function (e) {
            if (e.action === 32) {
                return false;
            }
            return true;
        }
    },
    DRAG: {
        events: 1 | 2 | 16 | 4,
        restrict: function (e) {
            if (e.action === 32 && e.button === 3) {
                return false;
            }
            return true;
        }
    },
    ANY: {
        events: 1 | 2 | 16
            | 4 | 8,
        restrict: function (e) { return true; }
    }
};
function eventCode(e, isSGR) {
    var code = (e.ctrl ? 16 : 0) | (e.shift ? 4 : 0) | (e.alt ? 8 : 0);
    if (e.button === 4) {
        code |= 64;
        code |= e.action;
    }
    else {
        code |= e.button & 3;
        if (e.button & 4) {
            code |= 64;
        }
        if (e.button & 8) {
            code |= 128;
        }
        if (e.action === 32) {
            code |= 32;
        }
        else if (e.action === 0 && !isSGR) {
            code |= 3;
        }
    }
    return code;
}
var S = String.fromCharCode;
var DEFAULT_ENCODINGS = {
    DEFAULT: function (e) {
        var params = [eventCode(e, false) + 32, e.col + 32, e.row + 32];
        if (params[0] > 255 || params[1] > 255 || params[2] > 255) {
            return '';
        }
        return "\u001B[M" + S(params[0]) + S(params[1]) + S(params[2]);
    },
    SGR: function (e) {
        var final = (e.action === 0 && e.button !== 4) ? 'm' : 'M';
        return "\u001B[<" + eventCode(e, true) + ";" + e.col + ";" + e.row + final;
    }
};
var CoreMouseService = (function () {
    function CoreMouseService(_bufferService, _coreService) {
        var _this = this;
        this._bufferService = _bufferService;
        this._coreService = _coreService;
        this._protocols = {};
        this._encodings = {};
        this._activeProtocol = '';
        this._activeEncoding = '';
        this._onProtocolChange = new EventEmitter_1.EventEmitter();
        this._lastEvent = null;
        Object.keys(DEFAULT_PROTOCOLS).forEach(function (name) { return _this.addProtocol(name, DEFAULT_PROTOCOLS[name]); });
        Object.keys(DEFAULT_ENCODINGS).forEach(function (name) { return _this.addEncoding(name, DEFAULT_ENCODINGS[name]); });
        this.reset();
    }
    CoreMouseService.prototype.addProtocol = function (name, protocol) {
        this._protocols[name] = protocol;
    };
    CoreMouseService.prototype.addEncoding = function (name, encoding) {
        this._encodings[name] = encoding;
    };
    Object.defineProperty(CoreMouseService.prototype, "activeProtocol", {
        get: function () {
            return this._activeProtocol;
        },
        set: function (name) {
            if (!this._protocols[name]) {
                throw new Error("unknown protocol \"" + name + "\"");
            }
            this._activeProtocol = name;
            this._onProtocolChange.fire(this._protocols[name].events);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CoreMouseService.prototype, "activeEncoding", {
        get: function () {
            return this._activeEncoding;
        },
        set: function (name) {
            if (!this._encodings[name]) {
                throw new Error("unknown encoding \"" + name + "\"");
            }
            this._activeEncoding = name;
        },
        enumerable: true,
        configurable: true
    });
    CoreMouseService.prototype.reset = function () {
        this.activeProtocol = 'NONE';
        this.activeEncoding = 'DEFAULT';
        this._lastEvent = null;
    };
    Object.defineProperty(CoreMouseService.prototype, "onProtocolChange", {
        get: function () {
            return this._onProtocolChange.event;
        },
        enumerable: true,
        configurable: true
    });
    CoreMouseService.prototype.triggerMouseEvent = function (e) {
        if (e.col < 0 || e.col >= this._bufferService.cols
            || e.row < 0 || e.row >= this._bufferService.rows) {
            return false;
        }
        if (e.button === 4 && e.action === 32) {
            return false;
        }
        if (e.button === 3 && e.action !== 32) {
            return false;
        }
        if (e.button !== 4 && (e.action === 2 || e.action === 3)) {
            return false;
        }
        e.col++;
        e.row++;
        if (e.action === 32 && this._lastEvent && this._compareEvents(this._lastEvent, e)) {
            return false;
        }
        if (!this._protocols[this._activeProtocol].restrict(e)) {
            return false;
        }
        var report = this._encodings[this._activeEncoding](e);
        if (report) {
            if (this._activeEncoding === 'DEFAULT') {
                this._coreService.triggerBinaryEvent(report);
            }
            else {
                this._coreService.triggerDataEvent(report, true);
            }
        }
        this._lastEvent = e;
        return true;
    };
    CoreMouseService.prototype.explainEvents = function (events) {
        return {
            DOWN: !!(events & 1),
            UP: !!(events & 2),
            DRAG: !!(events & 4),
            MOVE: !!(events & 8),
            WHEEL: !!(events & 16)
        };
    };
    CoreMouseService.prototype._compareEvents = function (e1, e2) {
        if (e1.col !== e2.col)
            return false;
        if (e1.row !== e2.row)
            return false;
        if (e1.button !== e2.button)
            return false;
        if (e1.action !== e2.action)
            return false;
        if (e1.ctrl !== e2.ctrl)
            return false;
        if (e1.alt !== e2.alt)
            return false;
        if (e1.shift !== e2.shift)
            return false;
        return true;
    };
    CoreMouseService = __decorate([
        __param(0, Services_1.IBufferService),
        __param(1, Services_1.ICoreService)
    ], CoreMouseService);
    return CoreMouseService;
}());
exports.CoreMouseService = CoreMouseService;


/***/ }),

/***/ "./out/common/services/CoreService.js":
/*!********************************************!*\
  !*** ./out/common/services/CoreService.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Clone_1 = __webpack_require__(/*! common/Clone */ "./out/common/Clone.js");
var DEFAULT_DEC_PRIVATE_MODES = Object.freeze({
    applicationCursorKeys: false,
    applicationKeypad: false,
    origin: false,
    wraparound: true
});
var CoreService = (function () {
    function CoreService(_scrollToBottom, _bufferService, _logService, _optionsService) {
        this._scrollToBottom = _scrollToBottom;
        this._bufferService = _bufferService;
        this._logService = _logService;
        this._optionsService = _optionsService;
        this.isCursorInitialized = false;
        this.isCursorHidden = false;
        this._onData = new EventEmitter_1.EventEmitter();
        this._onUserInput = new EventEmitter_1.EventEmitter();
        this._onBinary = new EventEmitter_1.EventEmitter();
        this.decPrivateModes = Clone_1.clone(DEFAULT_DEC_PRIVATE_MODES);
    }
    Object.defineProperty(CoreService.prototype, "onData", {
        get: function () { return this._onData.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CoreService.prototype, "onUserInput", {
        get: function () { return this._onUserInput.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CoreService.prototype, "onBinary", {
        get: function () { return this._onBinary.event; },
        enumerable: true,
        configurable: true
    });
    CoreService.prototype.reset = function () {
        this.decPrivateModes = Clone_1.clone(DEFAULT_DEC_PRIVATE_MODES);
    };
    CoreService.prototype.triggerDataEvent = function (data, wasUserInput) {
        if (wasUserInput === void 0) { wasUserInput = false; }
        if (this._optionsService.options.disableStdin) {
            return;
        }
        var buffer = this._bufferService.buffer;
        if (buffer.ybase !== buffer.ydisp) {
            this._scrollToBottom();
        }
        if (wasUserInput) {
            this._onUserInput.fire();
        }
        this._logService.debug("sending data \"" + data + "\"", function () { return data.split('').map(function (e) { return e.charCodeAt(0); }); });
        this._onData.fire(data);
    };
    CoreService.prototype.triggerBinaryEvent = function (data) {
        if (this._optionsService.options.disableStdin) {
            return;
        }
        this._logService.debug("sending binary \"" + data + "\"", function () { return data.split('').map(function (e) { return e.charCodeAt(0); }); });
        this._onBinary.fire(data);
    };
    CoreService = __decorate([
        __param(1, Services_1.IBufferService),
        __param(2, Services_1.ILogService),
        __param(3, Services_1.IOptionsService)
    ], CoreService);
    return CoreService;
}());
exports.CoreService = CoreService;


/***/ }),

/***/ "./out/common/services/DirtyRowService.js":
/*!************************************************!*\
  !*** ./out/common/services/DirtyRowService.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var DirtyRowService = (function () {
    function DirtyRowService(_bufferService) {
        this._bufferService = _bufferService;
        this.clearRange();
    }
    Object.defineProperty(DirtyRowService.prototype, "start", {
        get: function () { return this._start; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DirtyRowService.prototype, "end", {
        get: function () { return this._end; },
        enumerable: true,
        configurable: true
    });
    DirtyRowService.prototype.clearRange = function () {
        this._start = this._bufferService.buffer.y;
        this._end = this._bufferService.buffer.y;
    };
    DirtyRowService.prototype.markDirty = function (y) {
        if (y < this._start) {
            this._start = y;
        }
        else if (y > this._end) {
            this._end = y;
        }
    };
    DirtyRowService.prototype.markRangeDirty = function (y1, y2) {
        if (y1 > y2) {
            var temp = y1;
            y1 = y2;
            y2 = temp;
        }
        if (y1 < this._start) {
            this._start = y1;
        }
        if (y2 > this._end) {
            this._end = y2;
        }
    };
    DirtyRowService.prototype.markAllDirty = function () {
        this.markRangeDirty(0, this._bufferService.rows - 1);
    };
    DirtyRowService = __decorate([
        __param(0, Services_1.IBufferService)
    ], DirtyRowService);
    return DirtyRowService;
}());
exports.DirtyRowService = DirtyRowService;


/***/ }),

/***/ "./out/common/services/InstantiationService.js":
/*!*****************************************************!*\
  !*** ./out/common/services/InstantiationService.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __spreadArrays = (this && this.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var ServiceRegistry_1 = __webpack_require__(/*! common/services/ServiceRegistry */ "./out/common/services/ServiceRegistry.js");
var ServiceCollection = (function () {
    function ServiceCollection() {
        var entries = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            entries[_i] = arguments[_i];
        }
        this._entries = new Map();
        for (var _a = 0, entries_1 = entries; _a < entries_1.length; _a++) {
            var _b = entries_1[_a], id = _b[0], service = _b[1];
            this.set(id, service);
        }
    }
    ServiceCollection.prototype.set = function (id, instance) {
        var result = this._entries.get(id);
        this._entries.set(id, instance);
        return result;
    };
    ServiceCollection.prototype.forEach = function (callback) {
        this._entries.forEach(function (value, key) { return callback(key, value); });
    };
    ServiceCollection.prototype.has = function (id) {
        return this._entries.has(id);
    };
    ServiceCollection.prototype.get = function (id) {
        return this._entries.get(id);
    };
    return ServiceCollection;
}());
exports.ServiceCollection = ServiceCollection;
var InstantiationService = (function () {
    function InstantiationService() {
        this._services = new ServiceCollection();
        this._services.set(Services_1.IInstantiationService, this);
    }
    InstantiationService.prototype.setService = function (id, instance) {
        this._services.set(id, instance);
    };
    InstantiationService.prototype.createInstance = function (ctor) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        var serviceDependencies = ServiceRegistry_1.getServiceDependencies(ctor).sort(function (a, b) { return a.index - b.index; });
        var serviceArgs = [];
        for (var _a = 0, serviceDependencies_1 = serviceDependencies; _a < serviceDependencies_1.length; _a++) {
            var dependency = serviceDependencies_1[_a];
            var service = this._services.get(dependency.id);
            if (!service) {
                throw new Error("[createInstance] " + ctor.name + " depends on UNKNOWN service " + dependency.id + ".");
            }
            serviceArgs.push(service);
        }
        var firstServiceArgPos = serviceDependencies.length > 0 ? serviceDependencies[0].index : args.length;
        if (args.length !== firstServiceArgPos) {
            throw new Error("[createInstance] First service dependency of " + ctor.name + " at position " + (firstServiceArgPos + 1) + " conflicts with " + args.length + " static arguments");
        }
        return new (ctor.bind.apply(ctor, __spreadArrays([void 0], __spreadArrays(args, serviceArgs))))();
    };
    return InstantiationService;
}());
exports.InstantiationService = InstantiationService;


/***/ }),

/***/ "./out/common/services/LogService.js":
/*!*******************************************!*\
  !*** ./out/common/services/LogService.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var __spreadArrays = (this && this.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var LogLevel;
(function (LogLevel) {
    LogLevel[LogLevel["DEBUG"] = 0] = "DEBUG";
    LogLevel[LogLevel["INFO"] = 1] = "INFO";
    LogLevel[LogLevel["WARN"] = 2] = "WARN";
    LogLevel[LogLevel["ERROR"] = 3] = "ERROR";
    LogLevel[LogLevel["OFF"] = 4] = "OFF";
})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));
var optionsKeyToLogLevel = {
    debug: LogLevel.DEBUG,
    info: LogLevel.INFO,
    warn: LogLevel.WARN,
    error: LogLevel.ERROR,
    off: LogLevel.OFF
};
var LOG_PREFIX = 'xterm.js: ';
var LogService = (function () {
    function LogService(_optionsService) {
        var _this = this;
        this._optionsService = _optionsService;
        this._updateLogLevel();
        this._optionsService.onOptionChange(function (key) {
            if (key === 'logLevel') {
                _this._updateLogLevel();
            }
        });
    }
    LogService.prototype._updateLogLevel = function () {
        this._logLevel = optionsKeyToLogLevel[this._optionsService.options.logLevel];
    };
    LogService.prototype._evalLazyOptionalParams = function (optionalParams) {
        for (var i = 0; i < optionalParams.length; i++) {
            if (typeof optionalParams[i] === 'function') {
                optionalParams[i] = optionalParams[i]();
            }
        }
    };
    LogService.prototype._log = function (type, message, optionalParams) {
        this._evalLazyOptionalParams(optionalParams);
        type.call.apply(type, __spreadArrays([console, LOG_PREFIX + message], optionalParams));
    };
    LogService.prototype.debug = function (message) {
        var optionalParams = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            optionalParams[_i - 1] = arguments[_i];
        }
        if (this._logLevel <= LogLevel.DEBUG) {
            this._log(console.log, message, optionalParams);
        }
    };
    LogService.prototype.info = function (message) {
        var optionalParams = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            optionalParams[_i - 1] = arguments[_i];
        }
        if (this._logLevel <= LogLevel.INFO) {
            this._log(console.info, message, optionalParams);
        }
    };
    LogService.prototype.warn = function (message) {
        var optionalParams = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            optionalParams[_i - 1] = arguments[_i];
        }
        if (this._logLevel <= LogLevel.WARN) {
            this._log(console.warn, message, optionalParams);
        }
    };
    LogService.prototype.error = function (message) {
        var optionalParams = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            optionalParams[_i - 1] = arguments[_i];
        }
        if (this._logLevel <= LogLevel.ERROR) {
            this._log(console.error, message, optionalParams);
        }
    };
    LogService = __decorate([
        __param(0, Services_1.IOptionsService)
    ], LogService);
    return LogService;
}());
exports.LogService = LogService;


/***/ }),

/***/ "./out/common/services/OptionsService.js":
/*!***********************************************!*\
  !*** ./out/common/services/OptionsService.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Platform_1 = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var Clone_1 = __webpack_require__(/*! common/Clone */ "./out/common/Clone.js");
exports.DEFAULT_BELL_SOUND = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq';
exports.DEFAULT_OPTIONS = Object.freeze({
    cols: 80,
    rows: 24,
    cursorBlink: false,
    cursorStyle: 'block',
    cursorWidth: 1,
    bellSound: exports.DEFAULT_BELL_SOUND,
    bellStyle: 'none',
    drawBoldTextInBrightColors: true,
    fastScrollModifier: 'alt',
    fastScrollSensitivity: 5,
    fontFamily: 'courier-new, courier, monospace',
    fontSize: 15,
    fontWeight: 'normal',
    fontWeightBold: 'bold',
    lineHeight: 1.0,
    letterSpacing: 0,
    logLevel: 'info',
    scrollback: 1000,
    scrollSensitivity: 1,
    screenReaderMode: false,
    macOptionIsMeta: false,
    macOptionClickForcesSelection: false,
    minimumContrastRatio: 1,
    disableStdin: false,
    allowTransparency: false,
    tabStopWidth: 8,
    theme: {},
    rightClickSelectsWord: Platform_1.isMac,
    rendererType: 'canvas',
    windowsMode: false,
    convertEol: false,
    termName: 'xterm',
    screenKeys: false,
    cancelEvents: false,
    useFlowControl: false,
    wordSeparator: ' ()[]{}\',:;"`'
});
var CONSTRUCTOR_ONLY_OPTIONS = ['cols', 'rows'];
var OptionsService = (function () {
    function OptionsService(options) {
        var _this = this;
        this._onOptionChange = new EventEmitter_1.EventEmitter();
        this.options = Clone_1.clone(exports.DEFAULT_OPTIONS);
        Object.keys(options).forEach(function (k) {
            if (k in _this.options) {
                var newValue = options[k];
                _this.options[k] = newValue;
            }
        });
    }
    Object.defineProperty(OptionsService.prototype, "onOptionChange", {
        get: function () { return this._onOptionChange.event; },
        enumerable: true,
        configurable: true
    });
    OptionsService.prototype.setOption = function (key, value) {
        if (!(key in exports.DEFAULT_OPTIONS)) {
            throw new Error('No option with key "' + key + '"');
        }
        if (CONSTRUCTOR_ONLY_OPTIONS.indexOf(key) !== -1) {
            throw new Error("Option \"" + key + "\" can only be set in the constructor");
        }
        if (this.options[key] === value) {
            return;
        }
        value = this._sanitizeAndValidateOption(key, value);
        if (this.options[key] === value) {
            return;
        }
        this.options[key] = value;
        this._onOptionChange.fire(key);
    };
    OptionsService.prototype._sanitizeAndValidateOption = function (key, value) {
        switch (key) {
            case 'bellStyle':
            case 'cursorStyle':
            case 'fontWeight':
            case 'fontWeightBold':
            case 'rendererType':
            case 'wordSeparator':
                if (!value) {
                    value = exports.DEFAULT_OPTIONS[key];
                }
                break;
            case 'cursorWidth':
                value = Math.floor(value);
            case 'lineHeight':
            case 'tabStopWidth':
                if (value < 1) {
                    throw new Error(key + " cannot be less than 1, value: " + value);
                }
                break;
            case 'minimumContrastRatio':
                value = Math.max(1, Math.min(21, Math.round(value * 10) / 10));
                break;
            case 'scrollback':
                value = Math.min(value, 4294967295);
                if (value < 0) {
                    throw new Error(key + " cannot be less than 0, value: " + value);
                }
                break;
            case 'fastScrollSensitivity':
            case 'scrollSensitivity':
                if (value <= 0) {
                    throw new Error(key + " cannot be less than or equal to 0, value: " + value);
                }
                break;
        }
        return value;
    };
    OptionsService.prototype.getOption = function (key) {
        if (!(key in exports.DEFAULT_OPTIONS)) {
            throw new Error("No option with key \"" + key + "\"");
        }
        return this.options[key];
    };
    return OptionsService;
}());
exports.OptionsService = OptionsService;


/***/ }),

/***/ "./out/common/services/ServiceRegistry.js":
/*!************************************************!*\
  !*** ./out/common/services/ServiceRegistry.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var DI_TARGET = 'di$target';
var DI_DEPENDENCIES = 'di$dependencies';
exports.serviceRegistry = new Map();
function getServiceDependencies(ctor) {
    return ctor[DI_DEPENDENCIES] || [];
}
exports.getServiceDependencies = getServiceDependencies;
function createDecorator(id) {
    if (exports.serviceRegistry.has(id)) {
        return exports.serviceRegistry.get(id);
    }
    var decorator = function (target, key, index) {
        if (arguments.length !== 3) {
            throw new Error('@IServiceName-decorator can only be used to decorate a parameter');
        }
        storeServiceDependency(decorator, target, index);
    };
    decorator.toString = function () { return id; };
    exports.serviceRegistry.set(id, decorator);
    return decorator;
}
exports.createDecorator = createDecorator;
function storeServiceDependency(id, target, index) {
    if (target[DI_TARGET] === target) {
        target[DI_DEPENDENCIES].push({ id: id, index: index });
    }
    else {
        target[DI_DEPENDENCIES] = [{ id: id, index: index }];
        target[DI_TARGET] = target;
    }
}


/***/ }),

/***/ "./out/common/services/Services.js":
/*!*****************************************!*\
  !*** ./out/common/services/Services.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ServiceRegistry_1 = __webpack_require__(/*! common/services/ServiceRegistry */ "./out/common/services/ServiceRegistry.js");
exports.IBufferService = ServiceRegistry_1.createDecorator('BufferService');
exports.ICoreMouseService = ServiceRegistry_1.createDecorator('CoreMouseService');
exports.ICoreService = ServiceRegistry_1.createDecorator('CoreService');
exports.ICharsetService = ServiceRegistry_1.createDecorator('CharsetService');
exports.IDirtyRowService = ServiceRegistry_1.createDecorator('DirtyRowService');
exports.IInstantiationService = ServiceRegistry_1.createDecorator('InstantiationService');
exports.ILogService = ServiceRegistry_1.createDecorator('LogService');
exports.IOptionsService = ServiceRegistry_1.createDecorator('OptionsService');


/***/ }),

/***/ "./out/public/AddonManager.js":
/*!************************************!*\
  !*** ./out/public/AddonManager.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var AddonManager = (function () {
    function AddonManager() {
        this._addons = [];
    }
    AddonManager.prototype.dispose = function () {
        for (var i = this._addons.length - 1; i >= 0; i--) {
            this._addons[i].instance.dispose();
        }
    };
    AddonManager.prototype.loadAddon = function (terminal, instance) {
        var _this = this;
        var loadedAddon = {
            instance: instance,
            dispose: instance.dispose,
            isDisposed: false
        };
        this._addons.push(loadedAddon);
        instance.dispose = function () { return _this._wrappedAddonDispose(loadedAddon); };
        instance.activate(terminal);
    };
    AddonManager.prototype._wrappedAddonDispose = function (loadedAddon) {
        if (loadedAddon.isDisposed) {
            return;
        }
        var index = -1;
        for (var i = 0; i < this._addons.length; i++) {
            if (this._addons[i] === loadedAddon) {
                index = i;
                break;
            }
        }
        if (index === -1) {
            throw new Error('Could not dispose an addon that has not been loaded');
        }
        loadedAddon.isDisposed = true;
        loadedAddon.dispose.apply(loadedAddon.instance);
        this._addons.splice(index, 1);
    };
    return AddonManager;
}());
exports.AddonManager = AddonManager;


/***/ }),

/***/ "./out/public/Terminal.js":
/*!********************************!*\
  !*** ./out/public/Terminal.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Terminal_1 = __webpack_require__(/*! ../Terminal */ "./out/Terminal.js");
var Strings = __webpack_require__(/*! ../browser/LocalizableStrings */ "./out/browser/LocalizableStrings.js");
var AddonManager_1 = __webpack_require__(/*! ./AddonManager */ "./out/public/AddonManager.js");
var Terminal = (function () {
    function Terminal(options) {
        this._core = new Terminal_1.Terminal(options);
        this._addonManager = new AddonManager_1.AddonManager();
    }
    Object.defineProperty(Terminal.prototype, "onCursorMove", {
        get: function () { return this._core.onCursorMove; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onLineFeed", {
        get: function () { return this._core.onLineFeed; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onSelectionChange", {
        get: function () { return this._core.onSelectionChange; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onData", {
        get: function () { return this._core.onData; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onBinary", {
        get: function () { return this._core.onBinary; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onTitleChange", {
        get: function () { return this._core.onTitleChange; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onScroll", {
        get: function () { return this._core.onScroll; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onKey", {
        get: function () { return this._core.onKey; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onRender", {
        get: function () { return this._core.onRender; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onResize", {
        get: function () { return this._core.onResize; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "element", {
        get: function () { return this._core.element; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "parser", {
        get: function () {
            if (!this._parser) {
                this._parser = new ParserApi(this._core);
            }
            return this._parser;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "textarea", {
        get: function () { return this._core.textarea; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "rows", {
        get: function () { return this._core.rows; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "cols", {
        get: function () { return this._core.cols; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "buffer", {
        get: function () { return new BufferApiView(this._core.buffer); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "markers", {
        get: function () { return this._core.markers; },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype.blur = function () {
        this._core.blur();
    };
    Terminal.prototype.focus = function () {
        this._core.focus();
    };
    Terminal.prototype.resize = function (columns, rows) {
        this._verifyIntegers(columns, rows);
        this._core.resize(columns, rows);
    };
    Terminal.prototype.open = function (parent) {
        this._core.open(parent);
    };
    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {
        this._core.attachCustomKeyEventHandler(customKeyEventHandler);
    };
    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {
        return this._core.registerLinkMatcher(regex, handler, options);
    };
    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {
        this._core.deregisterLinkMatcher(matcherId);
    };
    Terminal.prototype.registerCharacterJoiner = function (handler) {
        return this._core.registerCharacterJoiner(handler);
    };
    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {
        this._core.deregisterCharacterJoiner(joinerId);
    };
    Terminal.prototype.registerMarker = function (cursorYOffset) {
        this._verifyIntegers(cursorYOffset);
        return this._core.addMarker(cursorYOffset);
    };
    Terminal.prototype.addMarker = function (cursorYOffset) {
        return this.registerMarker(cursorYOffset);
    };
    Terminal.prototype.hasSelection = function () {
        return this._core.hasSelection();
    };
    Terminal.prototype.select = function (column, row, length) {
        this._verifyIntegers(column, row, length);
        this._core.select(column, row, length);
    };
    Terminal.prototype.getSelection = function () {
        return this._core.getSelection();
    };
    Terminal.prototype.getSelectionPosition = function () {
        return this._core.getSelectionPosition();
    };
    Terminal.prototype.clearSelection = function () {
        this._core.clearSelection();
    };
    Terminal.prototype.selectAll = function () {
        this._core.selectAll();
    };
    Terminal.prototype.selectLines = function (start, end) {
        this._verifyIntegers(start, end);
        this._core.selectLines(start, end);
    };
    Terminal.prototype.dispose = function () {
        this._addonManager.dispose();
        this._core.dispose();
    };
    Terminal.prototype.scrollLines = function (amount) {
        this._verifyIntegers(amount);
        this._core.scrollLines(amount);
    };
    Terminal.prototype.scrollPages = function (pageCount) {
        this._verifyIntegers(pageCount);
        this._core.scrollPages(pageCount);
    };
    Terminal.prototype.scrollToTop = function () {
        this._core.scrollToTop();
    };
    Terminal.prototype.scrollToBottom = function () {
        this._core.scrollToBottom();
    };
    Terminal.prototype.scrollToLine = function (line) {
        this._verifyIntegers(line);
        this._core.scrollToLine(line);
    };
    Terminal.prototype.clear = function () {
        this._core.clear();
    };
    Terminal.prototype.write = function (data, callback) {
        this._core.write(data, callback);
    };
    Terminal.prototype.writeUtf8 = function (data, callback) {
        this._core.write(data, callback);
    };
    Terminal.prototype.writeln = function (data, callback) {
        this._core.write(data);
        this._core.write('\r\n', callback);
    };
    Terminal.prototype.paste = function (data) {
        this._core.paste(data);
    };
    Terminal.prototype.getOption = function (key) {
        return this._core.optionsService.getOption(key);
    };
    Terminal.prototype.setOption = function (key, value) {
        this._core.optionsService.setOption(key, value);
    };
    Terminal.prototype.refresh = function (start, end) {
        this._verifyIntegers(start, end);
        this._core.refresh(start, end);
    };
    Terminal.prototype.reset = function () {
        this._core.reset();
    };
    Terminal.prototype.loadAddon = function (addon) {
        return this._addonManager.loadAddon(this, addon);
    };
    Object.defineProperty(Terminal, "strings", {
        get: function () {
            return Strings;
        },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype._verifyIntegers = function () {
        var values = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            values[_i] = arguments[_i];
        }
        values.forEach(function (value) {
            if (value === Infinity || isNaN(value) || value % 1 !== 0) {
                throw new Error('This API only accepts integers');
            }
        });
    };
    return Terminal;
}());
exports.Terminal = Terminal;
var BufferApiView = (function () {
    function BufferApiView(_buffer) {
        this._buffer = _buffer;
    }
    Object.defineProperty(BufferApiView.prototype, "cursorY", {
        get: function () { return this._buffer.y; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferApiView.prototype, "cursorX", {
        get: function () { return this._buffer.x; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferApiView.prototype, "viewportY", {
        get: function () { return this._buffer.ydisp; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferApiView.prototype, "baseY", {
        get: function () { return this._buffer.ybase; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferApiView.prototype, "length", {
        get: function () { return this._buffer.lines.length; },
        enumerable: true,
        configurable: true
    });
    BufferApiView.prototype.getLine = function (y) {
        var line = this._buffer.lines.get(y);
        if (!line) {
            return undefined;
        }
        return new BufferLineApiView(line);
    };
    return BufferApiView;
}());
var BufferLineApiView = (function () {
    function BufferLineApiView(_line) {
        this._line = _line;
    }
    Object.defineProperty(BufferLineApiView.prototype, "isWrapped", {
        get: function () { return this._line.isWrapped; },
        enumerable: true,
        configurable: true
    });
    BufferLineApiView.prototype.getCell = function (x) {
        if (x < 0 || x >= this._line.length) {
            return undefined;
        }
        return new BufferCellApiView(this._line, x);
    };
    BufferLineApiView.prototype.translateToString = function (trimRight, startColumn, endColumn) {
        return this._line.translateToString(trimRight, startColumn, endColumn);
    };
    return BufferLineApiView;
}());
var BufferCellApiView = (function () {
    function BufferCellApiView(_line, _x) {
        this._line = _line;
        this._x = _x;
    }
    Object.defineProperty(BufferCellApiView.prototype, "char", {
        get: function () { return this._line.getString(this._x); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferCellApiView.prototype, "width", {
        get: function () { return this._line.getWidth(this._x); },
        enumerable: true,
        configurable: true
    });
    return BufferCellApiView;
}());
var ParserApi = (function () {
    function ParserApi(_core) {
        this._core = _core;
    }
    ParserApi.prototype.registerCsiHandler = function (id, callback) {
        return this._core.addCsiHandler(id, function (params) { return callback(params.toArray()); });
    };
    ParserApi.prototype.addCsiHandler = function (id, callback) {
        return this.registerCsiHandler(id, callback);
    };
    ParserApi.prototype.registerDcsHandler = function (id, callback) {
        return this._core.addDcsHandler(id, function (data, params) { return callback(data, params.toArray()); });
    };
    ParserApi.prototype.addDcsHandler = function (id, callback) {
        return this.registerDcsHandler(id, callback);
    };
    ParserApi.prototype.registerEscHandler = function (id, handler) {
        return this._core.addEscHandler(id, handler);
    };
    ParserApi.prototype.addEscHandler = function (id, handler) {
        return this.registerEscHandler(id, handler);
    };
    ParserApi.prototype.registerOscHandler = function (ident, callback) {
        return this._core.addOscHandler(ident, callback);
    };
    ParserApi.prototype.addOscHandler = function (ident, callback) {
        return this.registerOscHandler(ident, callback);
    };
    return ParserApi;
}());


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLWF0dGFjaC9zcmMvQXR0YWNoQWRkb24udHMiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLWZpdC9zcmMvRml0QWRkb24udHMiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXNlYXJjaC9zcmMvU2VhcmNoQWRkb24udHMiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYi1saW5rcy9zcmMvV2ViTGlua3NBZGRvbi50cyIsIndlYnBhY2s6Ly8vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL0dseXBoUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYmdsL3NyYy9SZWN0YW5nbGVSZW5kZXJlci50cyIsIndlYnBhY2s6Ly8vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL1JlbmRlck1vZGVsLnRzIiwid2VicGFjazovLy8uL2FkZG9ucy94dGVybS1hZGRvbi13ZWJnbC9zcmMvVHlwZWRBcnJheS50cyIsIndlYnBhY2s6Ly8vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL1dlYmdsQWRkb24udHMiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYmdsL3NyYy9XZWJnbFJlbmRlcmVyLnRzIiwid2VicGFjazovLy8uL2FkZG9ucy94dGVybS1hZGRvbi13ZWJnbC9zcmMvV2ViZ2xVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL2F0bGFzL0NoYXJBdGxhc0NhY2hlLnRzIiwid2VicGFjazovLy8uL2FkZG9ucy94dGVybS1hZGRvbi13ZWJnbC9zcmMvYXRsYXMvQ2hhckF0bGFzVXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYmdsL3NyYy9hdGxhcy9XZWJnbENoYXJBdGxhcy50cyIsIndlYnBhY2s6Ly8vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL3JlbmRlckxheWVyL0Jhc2VSZW5kZXJMYXllci50cyIsIndlYnBhY2s6Ly8vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL3JlbmRlckxheWVyL0N1cnNvclJlbmRlckxheWVyLnRzIiwid2VicGFjazovLy8uL2FkZG9ucy94dGVybS1hZGRvbi13ZWJnbC9zcmMvcmVuZGVyTGF5ZXIvTGlua1JlbmRlckxheWVyLnRzIiwid2VicGFjazovLy8uL2RlbW8vY2xpZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9BY2Nlc3NpYmlsaXR5TWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvSW5wdXRIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXJtaW5hbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9DbGlwYm9hcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvQ29sb3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvQ29sb3JDb250cmFzdENhY2hlLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL0NvbG9yTWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9MaWZlY3ljbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvTGlua2lmaWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL0xvY2FsaXphYmxlU3RyaW5ncy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9Nb3VzZVpvbmVNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL1JlbmRlckRlYm91bmNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9TY3JlZW5EcHJNb25pdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL1ZpZXdwb3J0LnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL2lucHV0L0NvbXBvc2l0aW9uSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL2lucHV0L01vdXNlLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL2lucHV0L01vdmVUb0NlbGwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvQmFzZVJlbmRlckxheWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL3JlbmRlcmVyL0NoYXJhY3RlckpvaW5lclJlZ2lzdHJ5LnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL3JlbmRlcmVyL0N1cnNvclJlbmRlckxheWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL3JlbmRlcmVyL0dyaWRDYWNoZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9MaW5rUmVuZGVyTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvUmVuZGVyZXJVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9TZWxlY3Rpb25SZW5kZXJMYXllci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9UZXh0UmVuZGVyTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQmFzZUNoYXJBdGxhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9DaGFyQXRsYXNDYWNoZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9DaGFyQXRsYXNVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9Db25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvRHluYW1pY0NoYXJBdGxhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9MUlVNYXAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvZG9tL0RvbVJlbmRlcmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL3JlbmRlcmVyL2RvbS9Eb21SZW5kZXJlclJvd0ZhY3RvcnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvc2VsZWN0aW9uL1NlbGVjdGlvbk1vZGVsLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL3NlcnZpY2VzL0NoYXJTaXplU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9zZXJ2aWNlcy9Db3JlQnJvd3NlclNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvc2VydmljZXMvTW91c2VTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL3NlcnZpY2VzL1JlbmRlclNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvc2VydmljZXMvU2VsZWN0aW9uU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9zZXJ2aWNlcy9Tb3VuZFNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9DaGFyV2lkdGgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9DaXJjdWxhckxpc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9DbG9uZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL0V2ZW50RW1pdHRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL0xpZmVjeWNsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL1BsYXRmb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vVHlwZWRBcnJheVV0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vV2luZG93c01vZGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2J1ZmZlci9CdWZmZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9idWZmZXIvQnVmZmVyTGluZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2J1ZmZlci9CdWZmZXJSZWZsb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9idWZmZXIvQnVmZmVyU2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vYnVmZmVyL0NlbGxEYXRhLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vYnVmZmVyL0NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2J1ZmZlci9NYXJrZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9kYXRhL0NoYXJzZXRzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vZGF0YS9Fc2NhcGVTZXF1ZW5jZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9pbnB1dC9LZXlib2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2lucHV0L1RleHREZWNvZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vaW5wdXQvV3JpdGVCdWZmZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9wYXJzZXIvQ29uc3RhbnRzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vcGFyc2VyL0Rjc1BhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3BhcnNlci9Fc2NhcGVTZXF1ZW5jZVBhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3BhcnNlci9Pc2NQYXJzZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9wYXJzZXIvUGFyYW1zLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvQnVmZmVyU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL0NoYXJzZXRTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvQ29yZU1vdXNlU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL0NvcmVTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvRGlydHlSb3dTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvSW5zdGFudGlhdGlvblNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9Mb2dTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvT3B0aW9uc1NlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlUmVnaXN0cnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcHVibGljL0FkZG9uTWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcHVibGljL1Rlcm1pbmFsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7UUFBQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTs7O1FBR0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDBDQUEwQyxnQ0FBZ0M7UUFDMUU7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSx3REFBd0Qsa0JBQWtCO1FBQzFFO1FBQ0EsaURBQWlELGNBQWM7UUFDL0Q7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBLHlDQUF5QyxpQ0FB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QUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3pGLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xGLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hGLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSwyQkFBbUIsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3BGLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSwyQkFBbUIsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JGLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSwyQkFBbUIsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ25GLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBRSwyQkFBbUIsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFD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QyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztLQUNyRCxDQUFDO0lBQ0YsSUFBTSxjQUFjLEdBQUc7UUFDckIsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO1FBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztRQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7UUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO1FBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztLQUNuQixDQUFDO0lBRUYsU0FBUyxRQUFRLENBQUMsR0FBVyxFQUFFLElBQWdCO1FBQzdDLElBQUks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QkFBTTs7Ozs7Ozs7Ozs7Ozs7O0FDR04sZ0JBQVEsR0FBdUMsRUFBRSxDQUFDO0FBS2xELHVCQUFlLEdBQW9CLGdCQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7QUFZOUQsZ0JBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRztJQUNkLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0NBQ2QsQ0FBQztBQU9GLGdCQUFRLENBQUMsR0FBRyxDQUFDLEdBQUc7SUFDZCxHQUFHLEVBQUUsR0FBRztDQUNULENBQUM7QUFNRixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQztBQU9yQixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO0lBQ2QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxJQUFJO0lBQ1QsSUFBSSxFQUFFLEdBQUc7SUFDVCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0NBQ1QsQ0FBQztBQU9GLGdCQUFRLENBQUMsR0FBRyxDQUFDO0lBQ2IsZ0JBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRztRQUNkLEdBQUcsRUFBRSxHQUFHO1FBQ1IsSUFBSSxFQUFFLEdBQUc7UUFDVCxHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztLQUNULENBQUM7QUFPRixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO0lBQ2QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsSUFBSSxFQUFFLEdBQUc7SUFDVCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0NBQ1QsQ0FBQztBQU9GLGdCQUFRLENBQUMsR0FBRyxDQUFDLEdBQUc7SUFDZCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsSUFBSSxFQUFFLEdBQUc7SUFDVCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztDQUNULENBQUM7QUFPRixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO0lBQ2QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLElBQUksRUFBRSxHQUFHO0lBQ1QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztDQUNULENBQUM7QUFPRixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO0lBQ2QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsSUFBSSxFQUFFLEdBQUc7SUFDVCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7Q0FDVCxDQUFDO0FBT0YsZ0JBQVEsQ0FBQyxHQUFHLENBQUM7SUFDYixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO1FBQ2QsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLElBQUksRUFBRSxHQUFHO1FBQ1QsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7S0FDVCxDQUFDO0FBT0YsZ0JBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRztJQUNkLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLElBQUksRUFBRSxHQUFHO0lBQ1QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7Q0FDVCxDQUFDO0FBT0YsZ0JBQVEsQ0FBQyxHQUFHLENBQUM7SUFDYixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO1FBQ2QsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLElBQUksRUFBRSxHQUFHO1FBQ1QsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7S0FDVCxDQUFDO0FBT0YsZ0JBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRztJQUNkLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLElBQUksRUFBRSxHQUFHO0lBQ1QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztDQUNULENBQUM7Ozs7Ozs7Ozs7Ozs7OztBQ3JQRixJQUFpQixFQUFFLENBcUVsQjtBQXJFRCxXQUFpQixFQUFFO0lBRUosTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUksTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFJLE1BQU0sQ0FBQztJQUViLEtBQUUsR0FBSSxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUksTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFJLE1BQU0sQ0FBQztJQUViLEtBQUUsR0FBSSxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUksTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFJLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLEtBQUUsR0FBSSxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLEtBQUUsR0FBSSxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUksTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFJLE1BQU0sQ0FBQztJQUViLEtBQUUsR0FBSSxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUksTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztBQUM1QixDQUFDLEVBckVnQixFQUFFLEdBQUYsVUFBRSxLQUFGLFVBQUUsUUFxRWxCO0FBTUQsSUFBaUIsRUFBRSxDQWlFbEI7QUFqRUQsV0FBaUIsRUFBRTtJQUVKLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdB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QUNNLHNDQUFrQixHQUF6QixVQUEwQixFQUF1QixFQUFFLE9BQXNCO1FBQ3ZFLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFDTSxpQ0FBYSxHQUFwQixVQUFxQixFQUF1QixFQUFFLE9BQXNCO1FBQ2xFLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBQ00sc0NBQWtCLEdBQXpCLFVBQTBCLEtBQWEsRUFBRSxRQUFtQztRQUMxRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNuRCxDQUFDO0lBQ00saUNBQWEsR0FBcEIsVUFBcUIsS0FBYSxFQUFFLFFBQW1DO1FBQ3JFLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBQ0gsZ0JBQUM7QUFBRCxDQUFDIiwiZmlsZSI6ImNsaWVudC1idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL2RlbW8vY2xpZW50LnRzXCIpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQsIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqXG4gKiBJbXBsZW1lbnRzIHRoZSBhdHRhY2ggbWV0aG9kLCB0aGF0IGF0dGFjaGVzIHRoZSB0ZXJtaW5hbCB0byBhIFdlYlNvY2tldCBzdHJlYW0uXG4gKi9cblxuaW1wb3J0IHsgVGVybWluYWwsIElEaXNwb3NhYmxlLCBJVGVybWluYWxBZGRvbiB9IGZyb20gJ3h0ZXJtJztcblxuaW50ZXJmYWNlIElBdHRhY2hPcHRpb25zIHtcbiAgYmlkaXJlY3Rpb25hbD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBBdHRhY2hBZGRvbiBpbXBsZW1lbnRzIElUZXJtaW5hbEFkZG9uIHtcbiAgcHJpdmF0ZSBfc29ja2V0OiBXZWJTb2NrZXQ7XG4gIHByaXZhdGUgX2JpZGlyZWN0aW9uYWw6IGJvb2xlYW47XG4gIHByaXZhdGUgX2Rpc3Bvc2FibGVzOiBJRGlzcG9zYWJsZVtdID0gW107XG5cbiAgY29uc3RydWN0b3Ioc29ja2V0OiBXZWJTb2NrZXQsIG9wdGlvbnM/OiBJQXR0YWNoT3B0aW9ucykge1xuICAgIHRoaXMuX3NvY2tldCA9IHNvY2tldDtcbiAgICAvLyBhbHdheXMgc2V0IGJpbmFyeSB0eXBlIHRvIGFycmF5YnVmZmVyLCB3ZSBkbyBub3QgaGFuZGxlIGJsb2JzXG4gICAgdGhpcy5fc29ja2V0LmJpbmFyeVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgIHRoaXMuX2JpZGlyZWN0aW9uYWwgPSAob3B0aW9ucyAmJiBvcHRpb25zLmJpZGlyZWN0aW9uYWwgPT09IGZhbHNlKSA/IGZhbHNlIDogdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBhY3RpdmF0ZSh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKFxuICAgICAgYWRkU29ja2V0TGlzdGVuZXIodGhpcy5fc29ja2V0LCAnbWVzc2FnZScsIGV2ID0+IHtcbiAgICAgICAgY29uc3QgZGF0YTogQXJyYXlCdWZmZXIgfCBzdHJpbmcgPSBldi5kYXRhO1xuICAgICAgICB0ZXJtaW5hbC53cml0ZSh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgPyBkYXRhIDogbmV3IFVpbnQ4QXJyYXkoZGF0YSkpO1xuICAgICAgfSlcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuX2JpZGlyZWN0aW9uYWwpIHtcbiAgICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2godGVybWluYWwub25EYXRhKGRhdGEgPT4gdGhpcy5fc2VuZERhdGEoZGF0YSkpKTtcbiAgICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2godGVybWluYWwub25CaW5hcnkoZGF0YSA9PiB0aGlzLl9zZW5kQmluYXJ5KGRhdGEpKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChhZGRTb2NrZXRMaXN0ZW5lcih0aGlzLl9zb2NrZXQsICdjbG9zZScsICgpID0+IHRoaXMuZGlzcG9zZSgpKSk7XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChhZGRTb2NrZXRMaXN0ZW5lcih0aGlzLl9zb2NrZXQsICdlcnJvcicsICgpID0+IHRoaXMuZGlzcG9zZSgpKSk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5mb3JFYWNoKGQgPT4gZC5kaXNwb3NlKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2VuZERhdGEoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gVE9ETzogZG8gc29tZXRoaW5nIGJldHRlciB0aGFuIGp1c3Qgc3dhbGxvd2luZ1xuICAgIC8vIHRoZSBkYXRhIGlmIHRoZSBzb2NrZXQgaXMgbm90IGluIGEgd29ya2luZyBjb25kaXRpb25cbiAgICBpZiAodGhpcy5fc29ja2V0LnJlYWR5U3RhdGUgIT09IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fc29ja2V0LnNlbmQoZGF0YSk7XG4gIH1cblxuICBwcml2YXRlIF9zZW5kQmluYXJ5KGRhdGE6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zb2NrZXQucmVhZHlTdGF0ZSAhPT0gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBidWZmZXIgPSBuZXcgVWludDhBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgKytpKSB7XG4gICAgICBidWZmZXJbaV0gPSBkYXRhLmNoYXJDb2RlQXQoaSkgJiAyNTU7XG4gICAgfVxuICAgIHRoaXMuX3NvY2tldC5zZW5kKGJ1ZmZlcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkU29ja2V0TGlzdGVuZXI8SyBleHRlbmRzIGtleW9mIFdlYlNvY2tldEV2ZW50TWFwPihzb2NrZXQ6IFdlYlNvY2tldCwgdHlwZTogSywgaGFuZGxlcjogKHRoaXM6IFdlYlNvY2tldCwgZXY6IFdlYlNvY2tldEV2ZW50TWFwW0tdKSA9PiBhbnkpOiBJRGlzcG9zYWJsZSB7XG4gIHNvY2tldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpO1xuICByZXR1cm4ge1xuICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICAvLyBBbHJlYWR5IGRpc3Bvc2VkXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpO1xuICAgIH1cbiAgfTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgVGVybWluYWwsIElUZXJtaW5hbEFkZG9uIH0gZnJvbSAneHRlcm0nO1xuXG5pbnRlcmZhY2UgSVRlcm1pbmFsRGltZW5zaW9ucyB7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIHRlcm1pbmFsLlxuICAgKi9cbiAgcm93czogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIHRlcm1pbmFsLlxuICAgKi9cbiAgY29sczogbnVtYmVyO1xufVxuXG5jb25zdCBNSU5JTVVNX0NPTFMgPSAyO1xuY29uc3QgTUlOSU1VTV9ST1dTID0gMTtcblxuZXhwb3J0IGNsYXNzIEZpdEFkZG9uIGltcGxlbWVudHMgSVRlcm1pbmFsQWRkb24ge1xuICBwcml2YXRlIF90ZXJtaW5hbDogVGVybWluYWwgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIHB1YmxpYyBhY3RpdmF0ZSh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXJtaW5hbCA9IHRlcm1pbmFsO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7fVxuXG4gIHB1YmxpYyBmaXQoKTogdm9pZCB7XG4gICAgY29uc3QgZGltcyA9IHRoaXMucHJvcG9zZURpbWVuc2lvbnMoKTtcbiAgICBpZiAoIWRpbXMgfHwgIXRoaXMuX3Rlcm1pbmFsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVE9ETzogUmVtb3ZlIHJlbGlhbmNlIG9uIHByaXZhdGUgQVBJXG4gICAgY29uc3QgY29yZSA9ICg8YW55PnRoaXMuX3Rlcm1pbmFsKS5fY29yZTtcblxuICAgIC8vIEZvcmNlIGEgZnVsbCByZW5kZXJcbiAgICBpZiAodGhpcy5fdGVybWluYWwucm93cyAhPT0gZGltcy5yb3dzIHx8IHRoaXMuX3Rlcm1pbmFsLmNvbHMgIT09IGRpbXMuY29scykge1xuICAgICAgY29yZS5fcmVuZGVyU2VydmljZS5jbGVhcigpO1xuICAgICAgdGhpcy5fdGVybWluYWwucmVzaXplKGRpbXMuY29scywgZGltcy5yb3dzKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcHJvcG9zZURpbWVuc2lvbnMoKTogSVRlcm1pbmFsRGltZW5zaW9ucyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKCF0aGlzLl90ZXJtaW5hbCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQgfHwgIXRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQucGFyZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBSZW1vdmUgcmVsaWFuY2Ugb24gcHJpdmF0ZSBBUElcbiAgICBjb25zdCBjb3JlID0gKDxhbnk+dGhpcy5fdGVybWluYWwpLl9jb3JlO1xuXG4gICAgY29uc3QgcGFyZW50RWxlbWVudFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5fdGVybWluYWwuZWxlbWVudC5wYXJlbnRFbGVtZW50KTtcbiAgICBjb25zdCBwYXJlbnRFbGVtZW50SGVpZ2h0ID0gcGFyc2VJbnQocGFyZW50RWxlbWVudFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2hlaWdodCcpKTtcbiAgICBjb25zdCBwYXJlbnRFbGVtZW50V2lkdGggPSBNYXRoLm1heCgwLCBwYXJzZUludChwYXJlbnRFbGVtZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnd2lkdGgnKSkpO1xuICAgIGNvbnN0IGVsZW1lbnRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQpO1xuICAgIGNvbnN0IGVsZW1lbnRQYWRkaW5nID0ge1xuICAgICAgdG9wOiBwYXJzZUludChlbGVtZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy10b3AnKSksXG4gICAgICBib3R0b206IHBhcnNlSW50KGVsZW1lbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLWJvdHRvbScpKSxcbiAgICAgIHJpZ2h0OiBwYXJzZUludChlbGVtZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy1yaWdodCcpKSxcbiAgICAgIGxlZnQ6IHBhcnNlSW50KGVsZW1lbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLWxlZnQnKSlcbiAgICB9O1xuICAgIGNvbnN0IGVsZW1lbnRQYWRkaW5nVmVyID0gZWxlbWVudFBhZGRpbmcudG9wICsgZWxlbWVudFBhZGRpbmcuYm90dG9tO1xuICAgIGNvbnN0IGVsZW1lbnRQYWRkaW5nSG9yID0gZWxlbWVudFBhZGRpbmcucmlnaHQgKyBlbGVtZW50UGFkZGluZy5sZWZ0O1xuICAgIGNvbnN0IGF2YWlsYWJsZUhlaWdodCA9IHBhcmVudEVsZW1lbnRIZWlnaHQgLSBlbGVtZW50UGFkZGluZ1ZlcjtcbiAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IHBhcmVudEVsZW1lbnRXaWR0aCAtIGVsZW1lbnRQYWRkaW5nSG9yIC0gY29yZS52aWV3cG9ydC5zY3JvbGxCYXJXaWR0aDtcbiAgICBjb25zdCBnZW9tZXRyeSA9IHtcbiAgICAgIGNvbHM6IE1hdGgubWF4KE1JTklNVU1fQ09MUywgTWF0aC5mbG9vcihhdmFpbGFibGVXaWR0aCAvIGNvcmUuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgpKSxcbiAgICAgIHJvd3M6IE1hdGgubWF4KE1JTklNVU1fUk9XUywgTWF0aC5mbG9vcihhdmFpbGFibGVIZWlnaHQgLyBjb3JlLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCkpXG4gICAgfTtcbiAgICByZXR1cm4gZ2VvbWV0cnk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgVGVybWluYWwsIElEaXNwb3NhYmxlLCBJVGVybWluYWxBZGRvbiwgSVNlbGVjdGlvblBvc2l0aW9uIH0gZnJvbSAneHRlcm0nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElTZWFyY2hPcHRpb25zIHtcbiAgcmVnZXg/OiBib29sZWFuO1xuICB3aG9sZVdvcmQ/OiBib29sZWFuO1xuICBjYXNlU2Vuc2l0aXZlPzogYm9vbGVhbjtcbiAgaW5jcmVtZW50YWw/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTZWFyY2hQb3NpdGlvbiB7XG4gIHN0YXJ0Q29sOiBudW1iZXI7XG4gIHN0YXJ0Um93OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNlYXJjaFJlc3VsdCB7XG4gIHRlcm06IHN0cmluZztcbiAgY29sOiBudW1iZXI7XG4gIHJvdzogbnVtYmVyO1xufVxuXG5jb25zdCBOT05fV09SRF9DSEFSQUNURVJTID0gJyB+IUAjJCVeJiooKStgLT1bXXt9fFxcOzpcIlxcJywuLzw+Pyc7XG5jb25zdCBMSU5FU19DQUNIRV9USU1FX1RPX0xJVkUgPSAxNSAqIDEwMDA7IC8vIDE1IHNlY3NcblxuZXhwb3J0IGNsYXNzIFNlYXJjaEFkZG9uIGltcGxlbWVudHMgSVRlcm1pbmFsQWRkb24ge1xuICBwcml2YXRlIF90ZXJtaW5hbDogVGVybWluYWwgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIHRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZ1dpdGhXcmFwIGlzIGEgZmFpcmx5IGV4cGVuc2l2ZSBjYWxsLlxuICAgKiBXZSBtZW1vaXplIHRoZSBjYWxscyBpbnRvIGFuIGFycmF5IHRoYXQgaGFzIGEgdGltZSBiYXNlZCB0dGwuXG4gICAqIF9saW5lc0NhY2hlIGlzIGFsc28gaW52YWxpZGF0ZWQgd2hlbiB0aGUgdGVybWluYWwgY3Vyc29yIG1vdmVzLlxuICAgKi9cbiAgcHJpdmF0ZSBfbGluZXNDYWNoZTogc3RyaW5nW10gfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2xpbmVzQ2FjaGVUaW1lb3V0SWQgPSAwO1xuICBwcml2YXRlIF9jdXJzb3JNb3ZlTGlzdGVuZXI6IElEaXNwb3NhYmxlIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9yZXNpemVMaXN0ZW5lcjogSURpc3Bvc2FibGUgfCB1bmRlZmluZWQ7XG5cbiAgcHVibGljIGFjdGl2YXRlKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIHRoaXMuX3Rlcm1pbmFsID0gdGVybWluYWw7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHsgfVxuXG4gIC8qKlxuICAgKiBGaW5kIHRoZSBuZXh0IGluc3RhbmNlIG9mIHRoZSB0ZXJtLCB0aGVuIHNjcm9sbCB0byBhbmQgc2VsZWN0IGl0LiBJZiBpdFxuICAgKiBkb2Vzbid0IGV4aXN0LCBkbyBub3RoaW5nLlxuICAgKiBAcGFyYW0gdGVybSBUaGUgc2VhcmNoIHRlcm0uXG4gICAqIEBwYXJhbSBzZWFyY2hPcHRpb25zIFNlYXJjaCBvcHRpb25zLlxuICAgKiBAcmV0dXJuIFdoZXRoZXIgYSByZXN1bHQgd2FzIGZvdW5kLlxuICAgKi9cbiAgcHVibGljIGZpbmROZXh0KHRlcm06IHN0cmluZywgc2VhcmNoT3B0aW9ucz86IElTZWFyY2hPcHRpb25zKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLl90ZXJtaW5hbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgdXNlIGFkZG9uIHVudGlsIGl0IGhhcyBiZWVuIGxvYWRlZCcpO1xuICAgIH1cblxuICAgIGlmICghdGVybSB8fCB0ZXJtLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5fdGVybWluYWwuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgc3RhcnRDb2wgPSAwO1xuICAgIGxldCBzdGFydFJvdyA9IDA7XG4gICAgbGV0IGN1cnJlbnRTZWxlY3Rpb246IElTZWxlY3Rpb25Qb3NpdGlvbiB8IHVuZGVmaW5lZDtcbiAgICBpZiAodGhpcy5fdGVybWluYWwuaGFzU2VsZWN0aW9uKCkpIHtcbiAgICAgIGNvbnN0IGluY3JlbWVudGFsID0gc2VhcmNoT3B0aW9ucyA/IHNlYXJjaE9wdGlvbnMuaW5jcmVtZW50YWwgOiBmYWxzZTtcbiAgICAgIC8vIFN0YXJ0IGZyb20gdGhlIHNlbGVjdGlvbiBlbmQgaWYgdGhlcmUgaXMgYSBzZWxlY3Rpb25cbiAgICAgIC8vIEZvciBpbmNyZW1lbnRhbCBzZWFyY2gsIHVzZSBleGlzdGluZyByb3dcbiAgICAgIGN1cnJlbnRTZWxlY3Rpb24gPSB0aGlzLl90ZXJtaW5hbC5nZXRTZWxlY3Rpb25Qb3NpdGlvbigpITtcbiAgICAgIHN0YXJ0Um93ID0gaW5jcmVtZW50YWwgPyBjdXJyZW50U2VsZWN0aW9uLnN0YXJ0Um93IDogY3VycmVudFNlbGVjdGlvbi5lbmRSb3c7XG4gICAgICBzdGFydENvbCA9IGluY3JlbWVudGFsID8gY3VycmVudFNlbGVjdGlvbi5zdGFydENvbHVtbiA6IGN1cnJlbnRTZWxlY3Rpb24uZW5kQ29sdW1uO1xuICAgIH1cblxuICAgIHRoaXMuX2luaXRMaW5lc0NhY2hlKCk7XG5cbiAgICBjb25zdCBzZWFyY2hQb3NpdGlvbjogSVNlYXJjaFBvc2l0aW9uID0ge1xuICAgICAgc3RhcnRSb3csXG4gICAgICBzdGFydENvbFxuICAgIH07XG5cbiAgICAvLyBTZWFyY2ggc3RhcnRSb3dcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5fZmluZEluTGluZSh0ZXJtLCBzZWFyY2hQb3NpdGlvbiwgc2VhcmNoT3B0aW9ucyk7XG5cbiAgICAvLyBTZWFyY2ggZnJvbSBzdGFydFJvdyArIDEgdG8gZW5kXG4gICAgaWYgKCFyZXN1bHQpIHtcblxuICAgICAgZm9yIChsZXQgeSA9IHN0YXJ0Um93ICsgMTsgeSA8IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5iYXNlWSArIHRoaXMuX3Rlcm1pbmFsLnJvd3M7IHkrKykge1xuICAgICAgICBzZWFyY2hQb3NpdGlvbi5zdGFydFJvdyA9IHk7XG4gICAgICAgIHNlYXJjaFBvc2l0aW9uLnN0YXJ0Q29sID0gMDtcbiAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgbGluZSBpcyB3cmFwcGVkIGxpbmUsIGluY3JlYXNlIGluZGV4IG9mIGNvbHVtbiB0byBpZ25vcmUgdGhlIHByZXZpb3VzIHNjYW5cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCByZXNldCBiZWdpbm5pbmcgY29sdW1uIGluZGV4IHRvIHplcm8gd2l0aCBzZXQgbmV3IHVud3JhcHBlZCBsaW5lIGluZGV4XG4gICAgICAgIHJlc3VsdCA9IHRoaXMuX2ZpbmRJbkxpbmUodGVybSwgc2VhcmNoUG9zaXRpb24sIHNlYXJjaE9wdGlvbnMpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSWYgd2UgaGl0IHRoZSBib3R0b20gYW5kIGRpZG4ndCBzZWFyY2ggZnJvbSB0aGUgdmVyeSB0b3Agd3JhcCBiYWNrIHVwXG4gICAgaWYgKCFyZXN1bHQgJiYgc3RhcnRSb3cgIT09IDApIHtcbiAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgc3RhcnRSb3c7IHkrKykge1xuICAgICAgICBzZWFyY2hQb3NpdGlvbi5zdGFydFJvdyA9IHk7XG4gICAgICAgIHNlYXJjaFBvc2l0aW9uLnN0YXJ0Q29sID0gMDtcbiAgICAgICAgcmVzdWx0ID0gdGhpcy5fZmluZEluTGluZSh0ZXJtLCBzZWFyY2hQb3NpdGlvbiwgc2VhcmNoT3B0aW9ucyk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIGlzIG9ubHkgb25lIHJlc3VsdCwgcmV0dXJuIHRydWUuXG4gICAgaWYgKCFyZXN1bHQgJiYgY3VycmVudFNlbGVjdGlvbikgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBTZXQgc2VsZWN0aW9uIGFuZCBzY3JvbGwgaWYgYSByZXN1bHQgd2FzIGZvdW5kXG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdFJlc3VsdChyZXN1bHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIHByZXZpb3VzIGluc3RhbmNlIG9mIHRoZSB0ZXJtLCB0aGVuIHNjcm9sbCB0byBhbmQgc2VsZWN0IGl0LiBJZiBpdFxuICAgKiBkb2Vzbid0IGV4aXN0LCBkbyBub3RoaW5nLlxuICAgKiBAcGFyYW0gdGVybSBUaGUgc2VhcmNoIHRlcm0uXG4gICAqIEBwYXJhbSBzZWFyY2hPcHRpb25zIFNlYXJjaCBvcHRpb25zLlxuICAgKiBAcmV0dXJuIFdoZXRoZXIgYSByZXN1bHQgd2FzIGZvdW5kLlxuICAgKi9cbiAgcHVibGljIGZpbmRQcmV2aW91cyh0ZXJtOiBzdHJpbmcsIHNlYXJjaE9wdGlvbnM/OiBJU2VhcmNoT3B0aW9ucyk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5fdGVybWluYWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHVzZSBhZGRvbiB1bnRpbCBpdCBoYXMgYmVlbiBsb2FkZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRlcm0gfHwgdGVybS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgaXNSZXZlcnNlU2VhcmNoID0gdHJ1ZTtcbiAgICBsZXQgc3RhcnRSb3cgPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIuYmFzZVkgKyB0aGlzLl90ZXJtaW5hbC5yb3dzO1xuICAgIGxldCBzdGFydENvbCA9IHRoaXMuX3Rlcm1pbmFsLmNvbHM7XG4gICAgbGV0IHJlc3VsdDogSVNlYXJjaFJlc3VsdCB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBpbmNyZW1lbnRhbCA9IHNlYXJjaE9wdGlvbnMgPyBzZWFyY2hPcHRpb25zLmluY3JlbWVudGFsIDogZmFsc2U7XG4gICAgbGV0IGN1cnJlbnRTZWxlY3Rpb246IElTZWxlY3Rpb25Qb3NpdGlvbiB8IHVuZGVmaW5lZDtcbiAgICBpZiAodGhpcy5fdGVybWluYWwuaGFzU2VsZWN0aW9uKCkpIHtcbiAgICAgIGN1cnJlbnRTZWxlY3Rpb24gPSB0aGlzLl90ZXJtaW5hbC5nZXRTZWxlY3Rpb25Qb3NpdGlvbigpITtcbiAgICAgIC8vIFN0YXJ0IGZyb20gc2VsZWN0aW9uIHN0YXJ0IGlmIHRoZXJlIGlzIGEgc2VsZWN0aW9uXG4gICAgICBzdGFydFJvdyA9IGN1cnJlbnRTZWxlY3Rpb24uc3RhcnRSb3c7XG4gICAgICBzdGFydENvbCA9IGN1cnJlbnRTZWxlY3Rpb24uc3RhcnRDb2x1bW47XG4gICAgfVxuXG4gICAgdGhpcy5faW5pdExpbmVzQ2FjaGUoKTtcbiAgICBjb25zdCBzZWFyY2hQb3NpdGlvbjogSVNlYXJjaFBvc2l0aW9uID0ge1xuICAgICAgc3RhcnRSb3csXG4gICAgICBzdGFydENvbFxuICAgIH07XG5cbiAgICBpZiAoaW5jcmVtZW50YWwpIHtcbiAgICAgIHJlc3VsdCA9IHRoaXMuX2ZpbmRJbkxpbmUodGVybSwgc2VhcmNoUG9zaXRpb24sIHNlYXJjaE9wdGlvbnMsIGZhbHNlKTtcbiAgICAgIGlmICghKHJlc3VsdCAmJiByZXN1bHQucm93ID09PSBzdGFydFJvdyAmJiByZXN1bHQuY29sID09PSBzdGFydENvbCkpIHtcbiAgICAgICAgcmVzdWx0ID0gdGhpcy5fZmluZEluTGluZSh0ZXJtLCBzZWFyY2hQb3NpdGlvbiwgc2VhcmNoT3B0aW9ucywgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCA9IHRoaXMuX2ZpbmRJbkxpbmUodGVybSwgc2VhcmNoUG9zaXRpb24sIHNlYXJjaE9wdGlvbnMsIGlzUmV2ZXJzZVNlYXJjaCk7XG4gICAgfVxuXG4gICAgLy8gU2VhcmNoIGZyb20gc3RhcnRSb3cgLSAxIHRvIHRvcFxuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICBzZWFyY2hQb3NpdGlvbi5zdGFydENvbCA9IE1hdGgubWF4KHNlYXJjaFBvc2l0aW9uLnN0YXJ0Q29sLCB0aGlzLl90ZXJtaW5hbC5jb2xzKTtcbiAgICAgIGZvciAobGV0IHkgPSBzdGFydFJvdyAtIDE7IHkgPj0gMDsgeS0tKSB7XG4gICAgICAgIHNlYXJjaFBvc2l0aW9uLnN0YXJ0Um93ID0geTtcbiAgICAgICAgcmVzdWx0ID0gdGhpcy5fZmluZEluTGluZSh0ZXJtLCBzZWFyY2hQb3NpdGlvbiwgc2VhcmNoT3B0aW9ucywgaXNSZXZlcnNlU2VhcmNoKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIElmIHdlIGhpdCB0aGUgdG9wIGFuZCBkaWRuJ3Qgc2VhcmNoIGZyb20gdGhlIHZlcnkgYm90dG9tIHdyYXAgYmFjayBkb3duXG4gICAgaWYgKCFyZXN1bHQgJiYgc3RhcnRSb3cgIT09ICh0aGlzLl90ZXJtaW5hbC5idWZmZXIuYmFzZVkgKyB0aGlzLl90ZXJtaW5hbC5yb3dzKSkge1xuICAgICAgZm9yIChsZXQgeSA9ICh0aGlzLl90ZXJtaW5hbC5idWZmZXIuYmFzZVkgKyB0aGlzLl90ZXJtaW5hbC5yb3dzKTsgeSA+IHN0YXJ0Um93OyB5LS0pIHtcbiAgICAgICAgc2VhcmNoUG9zaXRpb24uc3RhcnRSb3cgPSB5O1xuICAgICAgICByZXN1bHQgPSB0aGlzLl9maW5kSW5MaW5lKHRlcm0sIHNlYXJjaFBvc2l0aW9uLCBzZWFyY2hPcHRpb25zLCBpc1JldmVyc2VTZWFyY2gpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSBpcyBvbmx5IG9uZSByZXN1bHQsIHJldHVybiB0cnVlLlxuICAgIGlmICghcmVzdWx0ICYmIGN1cnJlbnRTZWxlY3Rpb24pIHJldHVybiB0cnVlO1xuXG4gICAgLy8gU2V0IHNlbGVjdGlvbiBhbmQgc2Nyb2xsIGlmIGEgcmVzdWx0IHdhcyBmb3VuZFxuICAgIHJldHVybiB0aGlzLl9zZWxlY3RSZXN1bHQocmVzdWx0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIGEgbGluZSBjYWNoZSB3aXRoIGEgdHRsXG4gICAqL1xuICBwcml2YXRlIF9pbml0TGluZXNDYWNoZSgpOiB2b2lkIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMuX3Rlcm1pbmFsITtcbiAgICBpZiAoIXRoaXMuX2xpbmVzQ2FjaGUpIHtcbiAgICAgIHRoaXMuX2xpbmVzQ2FjaGUgPSBuZXcgQXJyYXkodGVybWluYWwuYnVmZmVyLmxlbmd0aCk7XG4gICAgICB0aGlzLl9jdXJzb3JNb3ZlTGlzdGVuZXIgPSB0ZXJtaW5hbC5vbkN1cnNvck1vdmUoKCkgPT4gdGhpcy5fZGVzdHJveUxpbmVzQ2FjaGUoKSk7XG4gICAgICB0aGlzLl9yZXNpemVMaXN0ZW5lciA9IHRlcm1pbmFsLm9uUmVzaXplKCgpID0+IHRoaXMuX2Rlc3Ryb3lMaW5lc0NhY2hlKCkpO1xuICAgIH1cblxuICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fbGluZXNDYWNoZVRpbWVvdXRJZCk7XG4gICAgdGhpcy5fbGluZXNDYWNoZVRpbWVvdXRJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuX2Rlc3Ryb3lMaW5lc0NhY2hlKCksIExJTkVTX0NBQ0hFX1RJTUVfVE9fTElWRSk7XG4gIH1cblxuICBwcml2YXRlIF9kZXN0cm95TGluZXNDYWNoZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9saW5lc0NhY2hlID0gdW5kZWZpbmVkO1xuICAgIGlmICh0aGlzLl9jdXJzb3JNb3ZlTGlzdGVuZXIpIHtcbiAgICAgIHRoaXMuX2N1cnNvck1vdmVMaXN0ZW5lci5kaXNwb3NlKCk7XG4gICAgICB0aGlzLl9jdXJzb3JNb3ZlTGlzdGVuZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9yZXNpemVMaXN0ZW5lcikge1xuICAgICAgdGhpcy5fcmVzaXplTGlzdGVuZXIuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5fcmVzaXplTGlzdGVuZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9saW5lc0NhY2hlVGltZW91dElkKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2xpbmVzQ2FjaGVUaW1lb3V0SWQpO1xuICAgICAgdGhpcy5fbGluZXNDYWNoZVRpbWVvdXRJZCA9IDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEEgZm91bmQgc3Vic3RyaW5nIGlzIGEgd2hvbGUgd29yZCBpZiBpdCBkb2Vzbid0IGhhdmUgYW4gYWxwaGFudW1lcmljIGNoYXJhY3RlciBkaXJlY3RseSBhZGphY2VudCB0byBpdC5cbiAgICogQHBhcmFtIHNlYXJjaEluZGV4IHN0YXJ0aW5nIGluZGV4dCBvZiB0aGUgcG90ZW50aWFsIHdob2xlIHdvcmQgc3Vic3RyaW5nXG4gICAqIEBwYXJhbSBsaW5lIGVudGlyZSBzdHJpbmcgaW4gd2hpY2ggdGhlIHBvdGVudGlhbCB3aG9sZSB3b3JkIHdhcyBmb3VuZFxuICAgKiBAcGFyYW0gdGVybSB0aGUgc3Vic3RyaW5nIHRoYXQgc3RhcnRzIGF0IHNlYXJjaEluZGV4XG4gICAqL1xuICBwcml2YXRlIF9pc1dob2xlV29yZChzZWFyY2hJbmRleDogbnVtYmVyLCBsaW5lOiBzdHJpbmcsIHRlcm06IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoKChzZWFyY2hJbmRleCA9PT0gMCkgfHwgKE5PTl9XT1JEX0NIQVJBQ1RFUlMuaW5kZXhPZihsaW5lW3NlYXJjaEluZGV4IC0gMV0pICE9PSAtMSkpICYmXG4gICAgICAoKChzZWFyY2hJbmRleCArIHRlcm0ubGVuZ3RoKSA9PT0gbGluZS5sZW5ndGgpIHx8IChOT05fV09SRF9DSEFSQUNURVJTLmluZGV4T2YobGluZVtzZWFyY2hJbmRleCArIHRlcm0ubGVuZ3RoXSkgIT09IC0xKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaGVzIGEgbGluZSBmb3IgYSBzZWFyY2ggdGVybS4gVGFrZXMgdGhlIHByb3ZpZGVkIHRlcm1pbmFsIGxpbmUgYW5kIHNlYXJjaGVzIHRoZSB0ZXh0IGxpbmUsIHdoaWNoIG1heSBjb250YWluXG4gICAqIHN1YnNlcXVlbnQgdGVybWluYWwgbGluZXMgaWYgdGhlIHRleHQgaXMgd3JhcHBlZC4gSWYgdGhlIHByb3ZpZGVkIGxpbmUgbnVtYmVyIGlzIHBhcnQgb2YgYSB3cmFwcGVkIHRleHQgbGluZSB0aGF0XG4gICAqIHN0YXJ0ZWQgb24gYW4gZWFybGllciBsaW5lIHRoZW4gaXQgaXMgc2tpcHBlZCBzaW5jZSBpdCB3aWxsIGJlIHByb3Blcmx5IHNlYXJjaGVkIHdoZW4gdGhlIHRlcm1pbmFsIGxpbmUgdGhhdCB0aGVcbiAgICogdGV4dCBzdGFydHMgb24gaXMgc2VhcmNoZWQuXG4gICAqIEBwYXJhbSB0ZXJtIFRoZSBzZWFyY2ggdGVybS5cbiAgICogQHBhcmFtIHBvc2l0aW9uIFRoZSBwb3NpdGlvbiB0byBzdGFydCB0aGUgc2VhcmNoLlxuICAgKiBAcGFyYW0gc2VhcmNoT3B0aW9ucyBTZWFyY2ggb3B0aW9ucy5cbiAgICogQHJldHVybiBUaGUgc2VhcmNoIHJlc3VsdCBpZiBpdCB3YXMgZm91bmQuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2ZpbmRJbkxpbmUodGVybTogc3RyaW5nLCBzZWFyY2hQb3NpdGlvbjogSVNlYXJjaFBvc2l0aW9uLCBzZWFyY2hPcHRpb25zOiBJU2VhcmNoT3B0aW9ucyA9IHt9LCBpc1JldmVyc2VTZWFyY2g6IGJvb2xlYW4gPSBmYWxzZSk6IElTZWFyY2hSZXN1bHQgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fdGVybWluYWwhO1xuICAgIGxldCByb3cgPSBzZWFyY2hQb3NpdGlvbi5zdGFydFJvdztcbiAgICBjb25zdCBjb2wgPSBzZWFyY2hQb3NpdGlvbi5zdGFydENvbDtcblxuICAgIC8vIElnbm9yZSB3cmFwcGVkIGxpbmVzLCBvbmx5IGNvbnNpZGVyIG9uIHVud3JhcHBlZCBsaW5lIChmaXJzdCByb3cgb2YgY29tbWFuZCBzdHJpbmcpLlxuICAgIGNvbnN0IGZpcnN0TGluZSA9IHRlcm1pbmFsLmJ1ZmZlci5nZXRMaW5lKHJvdyk7XG4gICAgaWYgKGZpcnN0TGluZSAmJiBmaXJzdExpbmUuaXNXcmFwcGVkKSB7XG4gICAgICBpZiAoaXNSZXZlcnNlU2VhcmNoKSB7XG4gICAgICAgIHNlYXJjaFBvc2l0aW9uLnN0YXJ0Q29sICs9IHRlcm1pbmFsLmNvbHM7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gVGhpcyB3aWxsIGl0ZXJhdGUgdW50aWwgd2UgZmluZCB0aGUgbGluZSBzdGFydC5cbiAgICAgIC8vIFdoZW4gd2UgZmluZCBpdCwgd2Ugd2lsbCBzZWFyY2ggdXNpbmcgdGhlIGNhbGN1bGF0ZWQgc3RhcnQgY29sdW1uLlxuICAgICAgc2VhcmNoUG9zaXRpb24uc3RhcnRSb3ctLTtcbiAgICAgIHNlYXJjaFBvc2l0aW9uLnN0YXJ0Q29sICs9IHRlcm1pbmFsLmNvbHM7XG4gICAgICByZXR1cm4gdGhpcy5fZmluZEluTGluZSh0ZXJtLCBzZWFyY2hQb3NpdGlvbiwgc2VhcmNoT3B0aW9ucyk7XG4gICAgfVxuICAgIGxldCBzdHJpbmdMaW5lID0gdGhpcy5fbGluZXNDYWNoZSA/IHRoaXMuX2xpbmVzQ2FjaGVbcm93XSA6IHZvaWQgMDtcbiAgICBpZiAoc3RyaW5nTGluZSA9PT0gdm9pZCAwKSB7XG4gICAgICBzdHJpbmdMaW5lID0gdGhpcy5fdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nV2l0aFdyYXAocm93LCB0cnVlKTtcbiAgICAgIGlmICh0aGlzLl9saW5lc0NhY2hlKSB7XG4gICAgICAgIHRoaXMuX2xpbmVzQ2FjaGVbcm93XSA9IHN0cmluZ0xpbmU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2VhcmNoVGVybSA9IHNlYXJjaE9wdGlvbnMuY2FzZVNlbnNpdGl2ZSA/IHRlcm0gOiB0ZXJtLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3Qgc2VhcmNoU3RyaW5nTGluZSA9IHNlYXJjaE9wdGlvbnMuY2FzZVNlbnNpdGl2ZSA/IHN0cmluZ0xpbmUgOiBzdHJpbmdMaW5lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBsZXQgcmVzdWx0SW5kZXggPSAtMTtcbiAgICBpZiAoc2VhcmNoT3B0aW9ucy5yZWdleCkge1xuICAgICAgY29uc3Qgc2VhcmNoUmVnZXggPSBSZWdFeHAoc2VhcmNoVGVybSwgJ2cnKTtcbiAgICAgIGxldCBmb3VuZFRlcm06IFJlZ0V4cEV4ZWNBcnJheSB8IG51bGw7XG4gICAgICBpZiAoaXNSZXZlcnNlU2VhcmNoKSB7XG4gICAgICAgIC8vIFRoaXMgbG9vcCB3aWxsIGdldCB0aGUgcmVzdWx0SW5kZXggb2YgdGhlIF9sYXN0XyByZWdleCBtYXRjaCBpbiB0aGUgcmFuZ2UgMC4uY29sXG4gICAgICAgIHdoaWxlIChmb3VuZFRlcm0gPSBzZWFyY2hSZWdleC5leGVjKHNlYXJjaFN0cmluZ0xpbmUuc2xpY2UoMCwgY29sKSkpIHtcbiAgICAgICAgICByZXN1bHRJbmRleCA9IHNlYXJjaFJlZ2V4Lmxhc3RJbmRleCAtIGZvdW5kVGVybVswXS5sZW5ndGg7XG4gICAgICAgICAgdGVybSA9IGZvdW5kVGVybVswXTtcbiAgICAgICAgICBzZWFyY2hSZWdleC5sYXN0SW5kZXggLT0gKHRlcm0ubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvdW5kVGVybSA9IHNlYXJjaFJlZ2V4LmV4ZWMoc2VhcmNoU3RyaW5nTGluZS5zbGljZShjb2wpKTtcbiAgICAgICAgaWYgKGZvdW5kVGVybSAmJiBmb3VuZFRlcm1bMF0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJlc3VsdEluZGV4ID0gY29sICsgKHNlYXJjaFJlZ2V4Lmxhc3RJbmRleCAtIGZvdW5kVGVybVswXS5sZW5ndGgpO1xuICAgICAgICAgIHRlcm0gPSBmb3VuZFRlcm1bMF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzUmV2ZXJzZVNlYXJjaCkge1xuICAgICAgICBpZiAoY29sIC0gc2VhcmNoVGVybS5sZW5ndGggPj0gMCkge1xuICAgICAgICAgIHJlc3VsdEluZGV4ID0gc2VhcmNoU3RyaW5nTGluZS5sYXN0SW5kZXhPZihzZWFyY2hUZXJtLCBjb2wgLSBzZWFyY2hUZXJtLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdEluZGV4ID0gc2VhcmNoU3RyaW5nTGluZS5pbmRleE9mKHNlYXJjaFRlcm0sIGNvbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdEluZGV4ID49IDApIHtcbiAgICAgIC8vIEFkanVzdCB0aGUgcm93IG51bWJlciBhbmQgc2VhcmNoIGluZGV4IGlmIG5lZWRlZCBzaW5jZSBhIFwibGluZVwiIG9mIHRleHQgY2FuIHNwYW4gbXVsdGlwbGUgcm93c1xuICAgICAgaWYgKHJlc3VsdEluZGV4ID49IHRlcm1pbmFsLmNvbHMpIHtcbiAgICAgICAgcm93ICs9IE1hdGguZmxvb3IocmVzdWx0SW5kZXggLyB0ZXJtaW5hbC5jb2xzKTtcbiAgICAgICAgcmVzdWx0SW5kZXggPSByZXN1bHRJbmRleCAlIHRlcm1pbmFsLmNvbHM7XG4gICAgICB9XG4gICAgICBpZiAoc2VhcmNoT3B0aW9ucy53aG9sZVdvcmQgJiYgIXRoaXMuX2lzV2hvbGVXb3JkKHJlc3VsdEluZGV4LCBzZWFyY2hTdHJpbmdMaW5lLCB0ZXJtKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxpbmUgPSB0ZXJtaW5hbC5idWZmZXIuZ2V0TGluZShyb3cpO1xuXG4gICAgICBpZiAobGluZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdEluZGV4OyBpKyspIHtcbiAgICAgICAgICBjb25zdCBjZWxsID0gbGluZS5nZXRDZWxsKGkpO1xuICAgICAgICAgIGlmICghY2VsbCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEFkanVzdCB0aGUgc2VhcmNoSW5kZXggdG8gbm9ybWFsaXplIGVtb2ppIGludG8gc2luZ2xlIGNoYXJzXG4gICAgICAgICAgY29uc3QgY2hhciA9IGNlbGwuY2hhcjtcbiAgICAgICAgICBpZiAoY2hhci5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICByZXN1bHRJbmRleCAtPSBjaGFyLmxlbmd0aCAtIDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEFkanVzdCB0aGUgc2VhcmNoSW5kZXggZm9yIGVtcHR5IGNoYXJhY3RlcnMgZm9sbG93aW5nIHdpZGUgdW5pY29kZVxuICAgICAgICAgIC8vIGNoYXJzIChlZy4gQ0pLKVxuICAgICAgICAgIGNvbnN0IGNoYXJXaWR0aCA9IGNlbGwud2lkdGg7XG4gICAgICAgICAgaWYgKGNoYXJXaWR0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmVzdWx0SW5kZXgrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRlcm0sXG4gICAgICAgIGNvbDogcmVzdWx0SW5kZXgsXG4gICAgICAgIHJvd1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlcyBhIGJ1ZmZlciBsaW5lIHRvIGEgc3RyaW5nLCBpbmNsdWRpbmcgc3Vic2VxdWVudCBsaW5lcyBpZiB0aGV5IGFyZSB3cmFwcy5cbiAgICogV2lkZSBjaGFyYWN0ZXJzIHdpbGwgY291bnQgYXMgdHdvIGNvbHVtbnMgaW4gdGhlIHJlc3VsdGluZyBzdHJpbmcuIFRoaXNcbiAgICogZnVuY3Rpb24gaXMgdXNlZnVsIGZvciBnZXR0aW5nIHRoZSBhY3R1YWwgdGV4dCB1bmRlcm5lYXRoIHRoZSByYXcgc2VsZWN0aW9uXG4gICAqIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gbGluZSBUaGUgbGluZSBiZWluZyB0cmFuc2xhdGVkLlxuICAgKiBAcGFyYW0gdHJpbVJpZ2h0IFdoZXRoZXIgdG8gdHJpbSB3aGl0ZXNwYWNlIHRvIHRoZSByaWdodC5cbiAgICovXG4gIHByaXZhdGUgX3RyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZ1dpdGhXcmFwKGxpbmVJbmRleDogbnVtYmVyLCB0cmltUmlnaHQ6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fdGVybWluYWwhO1xuICAgIGxldCBsaW5lU3RyaW5nID0gJyc7XG4gICAgbGV0IGxpbmVXcmFwc1RvTmV4dDogYm9vbGVhbjtcblxuICAgIGRvIHtcbiAgICAgIGNvbnN0IG5leHRMaW5lID0gdGVybWluYWwuYnVmZmVyLmdldExpbmUobGluZUluZGV4ICsgMSk7XG4gICAgICBsaW5lV3JhcHNUb05leHQgPSBuZXh0TGluZSA/IG5leHRMaW5lLmlzV3JhcHBlZCA6IGZhbHNlO1xuICAgICAgY29uc3QgbGluZSA9IHRlcm1pbmFsLmJ1ZmZlci5nZXRMaW5lKGxpbmVJbmRleCk7XG4gICAgICBpZiAoIWxpbmUpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBsaW5lU3RyaW5nICs9IGxpbmUudHJhbnNsYXRlVG9TdHJpbmcoIWxpbmVXcmFwc1RvTmV4dCAmJiB0cmltUmlnaHQpLnN1YnN0cmluZygwLCB0ZXJtaW5hbC5jb2xzKTtcbiAgICAgIGxpbmVJbmRleCsrO1xuICAgIH0gd2hpbGUgKGxpbmVXcmFwc1RvTmV4dCk7XG5cbiAgICByZXR1cm4gbGluZVN0cmluZztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIGFuZCBzY3JvbGxzIHRvIGEgcmVzdWx0LlxuICAgKiBAcGFyYW0gcmVzdWx0IFRoZSByZXN1bHQgdG8gc2VsZWN0LlxuICAgKiBAcmV0dXJuIFdoZXRoZXJhIHJlc3VsdCB3YXMgc2VsZWN0ZWQuXG4gICAqL1xuICBwcml2YXRlIF9zZWxlY3RSZXN1bHQocmVzdWx0OiBJU2VhcmNoUmVzdWx0IHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdGVybWluYWwgPSB0aGlzLl90ZXJtaW5hbCE7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHRlcm1pbmFsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRlcm1pbmFsLnNlbGVjdChyZXN1bHQuY29sLCByZXN1bHQucm93LCByZXN1bHQudGVybS5sZW5ndGgpO1xuICAgIC8vIElmIGl0IGlzIG5vdCBpbiB0aGUgdmlld3BvcnQgdGhlbiB3ZSBzY3JvbGwgZWxzZSBpdCBqdXN0IGdldHMgc2VsZWN0ZWRcbiAgICBpZiAocmVzdWx0LnJvdyA+PSAodGVybWluYWwuYnVmZmVyLnZpZXdwb3J0WSArIHRlcm1pbmFsLnJvd3MpIHx8IHJlc3VsdC5yb3cgPCB0ZXJtaW5hbC5idWZmZXIudmlld3BvcnRZKSB7XG4gICAgICBsZXQgc2Nyb2xsID0gcmVzdWx0LnJvdyAtIHRlcm1pbmFsLmJ1ZmZlci52aWV3cG9ydFk7XG4gICAgICBzY3JvbGwgPSBzY3JvbGwgLSBNYXRoLmZsb29yKHRlcm1pbmFsLnJvd3MgLyAyKTtcbiAgICAgIHRlcm1pbmFsLnNjcm9sbExpbmVzKHNjcm9sbCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IFRlcm1pbmFsLCBJTGlua01hdGNoZXJPcHRpb25zLCBJVGVybWluYWxBZGRvbiB9IGZyb20gJ3h0ZXJtJztcblxuY29uc3QgcHJvdG9jb2xDbGF1c2UgPSAnKGh0dHBzPzpcXFxcL1xcXFwvKSc7XG5jb25zdCBkb21haW5DaGFyYWN0ZXJTZXQgPSAnW1xcXFxkYS16XFxcXC4tXSsnO1xuY29uc3QgbmVnYXRlZERvbWFpbkNoYXJhY3RlclNldCA9ICdbXlxcXFxkYS16XFxcXC4tXSsnO1xuY29uc3QgZG9tYWluQm9keUNsYXVzZSA9ICcoJyArIGRvbWFpbkNoYXJhY3RlclNldCArICcpJztcbmNvbnN0IHRsZENsYXVzZSA9ICcoW2EtelxcXFwuXXsyLDZ9KSc7XG5jb25zdCBpcENsYXVzZSA9ICcoKFxcXFxkezEsM31cXFxcLil7M31cXFxcZHsxLDN9KSc7XG5jb25zdCBsb2NhbEhvc3RDbGF1c2UgPSAnKGxvY2FsaG9zdCknO1xuY29uc3QgcG9ydENsYXVzZSA9ICcoOlxcXFxkezEsNX0pJztcbmNvbnN0IGhvc3RDbGF1c2UgPSAnKCgnICsgZG9tYWluQm9keUNsYXVzZSArICdcXFxcLicgKyB0bGRDbGF1c2UgKyAnKXwnICsgaXBDbGF1c2UgKyAnfCcgKyBsb2NhbEhvc3RDbGF1c2UgKyAnKScgKyBwb3J0Q2xhdXNlICsgJz8nO1xuY29uc3QgcGF0aENoYXJhY3RlclNldCA9ICcoXFxcXC9bXFxcXC9cXFxcd1xcXFwuXFxcXC0lfjorXSopKihbXjpcIlxcJ1xcXFxzXSknO1xuY29uc3QgcGF0aENsYXVzZSA9ICcoJyArIHBhdGhDaGFyYWN0ZXJTZXQgKyAnKT8nO1xuY29uc3QgcXVlcnlTdHJpbmdIYXNoRnJhZ21lbnRDaGFyYWN0ZXJTZXQgPSAnWzAtOVxcXFx3XFxcXFtcXFxcXVxcXFwoXFxcXClcXFxcL1xcXFw/XFxcXCEjQCQlJlxcJyorLDo7flxcXFw9XFxcXC5cXFxcLV0qJztcbmNvbnN0IHF1ZXJ5U3RyaW5nQ2xhdXNlID0gJyhcXFxcPycgKyBxdWVyeVN0cmluZ0hhc2hGcmFnbWVudENoYXJhY3RlclNldCArICcpPyc7XG5jb25zdCBoYXNoRnJhZ21lbnRDbGF1c2UgPSAnKCMnICsgcXVlcnlTdHJpbmdIYXNoRnJhZ21lbnRDaGFyYWN0ZXJTZXQgKyAnKT8nO1xuY29uc3QgbmVnYXRlZFBhdGhDaGFyYWN0ZXJTZXQgPSAnW15cXFxcL1xcXFx3XFxcXC5cXFxcLSVdKyc7XG5jb25zdCBib2R5Q2xhdXNlID0gaG9zdENsYXVzZSArIHBhdGhDbGF1c2UgKyBxdWVyeVN0cmluZ0NsYXVzZSArIGhhc2hGcmFnbWVudENsYXVzZTtcbmNvbnN0IHN0YXJ0ID0gJyg/Ol58JyArIG5lZ2F0ZWREb21haW5DaGFyYWN0ZXJTZXQgKyAnKSgnO1xuY29uc3QgZW5kID0gJykoJHwnICsgbmVnYXRlZFBhdGhDaGFyYWN0ZXJTZXQgKyAnKSc7XG5jb25zdCBzdHJpY3RVcmxSZWdleCA9IG5ldyBSZWdFeHAoc3RhcnQgKyBwcm90b2NvbENsYXVzZSArIGJvZHlDbGF1c2UgKyBlbmQpO1xuXG5mdW5jdGlvbiBoYW5kbGVMaW5rKGV2ZW50OiBNb3VzZUV2ZW50LCB1cmk6IHN0cmluZyk6IHZvaWQge1xuICB3aW5kb3cub3Blbih1cmksICdfYmxhbmsnKTtcbn1cblxuZXhwb3J0IGNsYXNzIFdlYkxpbmtzQWRkb24gaW1wbGVtZW50cyBJVGVybWluYWxBZGRvbiB7XG4gIHByaXZhdGUgX2xpbmtNYXRjaGVySWQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfdGVybWluYWw6IFRlcm1pbmFsIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2hhbmRsZXI6IChldmVudDogTW91c2VFdmVudCwgdXJpOiBzdHJpbmcpID0+IHZvaWQgPSBoYW5kbGVMaW5rLFxuICAgIHByaXZhdGUgX29wdGlvbnM6IElMaW5rTWF0Y2hlck9wdGlvbnMgPSB7fVxuICApIHtcbiAgICB0aGlzLl9vcHRpb25zLm1hdGNoSW5kZXggPSAxO1xuICB9XG5cbiAgcHVibGljIGFjdGl2YXRlKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIHRoaXMuX3Rlcm1pbmFsID0gdGVybWluYWw7XG4gICAgdGhpcy5fbGlua01hdGNoZXJJZCA9IHRoaXMuX3Rlcm1pbmFsLnJlZ2lzdGVyTGlua01hdGNoZXIoc3RyaWN0VXJsUmVnZXgsIHRoaXMuX2hhbmRsZXIsIHRoaXMuX29wdGlvbnMpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2xpbmtNYXRjaGVySWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLl90ZXJtaW5hbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5kZXJlZ2lzdGVyTGlua01hdGNoZXIodGhpcy5fbGlua01hdGNoZXJJZCk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IGNyZWF0ZVByb2dyYW0sIFBST0pFQ1RJT05fTUFUUklYLCB0aHJvd0lmRmFsc3kgfSBmcm9tICcuL1dlYmdsVXRpbHMnO1xuaW1wb3J0IHsgV2ViZ2xDaGFyQXRsYXMgfSBmcm9tICcuL2F0bGFzL1dlYmdsQ2hhckF0bGFzJztcbmltcG9ydCB7IElXZWJHTDJSZW5kZXJpbmdDb250ZXh0LCBJV2ViR0xWZXJ0ZXhBcnJheU9iamVjdCwgSVJlbmRlck1vZGVsLCBJUmFzdGVyaXplZEdseXBoIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBDT01CSU5FRF9DSEFSX0JJVF9NQVNLLCBSRU5ERVJfTU9ERUxfSU5ESUNJRVNfUEVSX0NFTEwsIFJFTkRFUl9NT0RFTF9GR19PRkZTRVQsIFJFTkRFUl9NT0RFTF9CR19PRkZTRVQgfSBmcm9tICcuL1JlbmRlck1vZGVsJztcbmltcG9ydCB7IGZpbGwgfSBmcm9tICdjb21tb24vVHlwZWRBcnJheVV0aWxzJztcbmltcG9ydCB7IHNsaWNlIH0gZnJvbSAnLi9UeXBlZEFycmF5JztcbmltcG9ydCB7IE5VTExfQ0VMTF9DT0RFLCBXSElURVNQQUNFX0NFTExfQ09ERSwgQXR0cmlidXRlcywgRmdGbGFncyB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IFRlcm1pbmFsLCBJQnVmZmVyTGluZSB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IElDb2xvclNldCwgSUNvbG9yIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJUmVuZGVyRGltZW5zaW9ucyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5cbmludGVyZmFjZSBJVmVydGljZXMge1xuICBhdHRyaWJ1dGVzOiBGbG9hdDMyQXJyYXk7XG4gIC8qKlxuICAgKiBUaGVzZSBidWZmZXJzIGFyZSB0aGUgb25lcyB1c2VkIHRvIGJpbmQgdG8gV2ViR0wsIHRoZSByZWFzb24gdGhlcmUgYXJlXG4gICAqIG11bHRpcGxlIGlzIHRvIGFsbG93IGRvdWJsZSBidWZmZXJpbmcgdG8gd29yayBhcyB5b3UgY2Fubm90IG1vZGlmeSB0aGVcbiAgICogYnVmZmVyIHdoaWxlIGl0J3MgYmVpbmcgdXNlZCBieSB0aGUgR1BVLiBIYXZpbmcgbXVsdGlwbGUgbGV0cyB1cyBzdGFydFxuICAgKiB3b3JraW5nIG9uIHRoZSBuZXh0IGZyYW1lLlxuICAgKi9cbiAgYXR0cmlidXRlc0J1ZmZlcnM6IEZsb2F0MzJBcnJheVtdO1xuICBzZWxlY3Rpb25BdHRyaWJ1dGVzOiBGbG9hdDMyQXJyYXk7XG4gIGNvdW50OiBudW1iZXI7XG59XG5cbmNvbnN0IGVudW0gVmVydGV4QXR0cmliTG9jYXRpb25zIHtcbiAgVU5JVF9RVUFEID0gMCxcbiAgQ0VMTF9QT1NJVElPTiA9IDEsXG4gIE9GRlNFVCA9IDIsXG4gIFNJWkUgPSAzLFxuICBURVhDT09SRCA9IDQsXG4gIFRFWFNJWkUgPSA1XG59XG5cbmNvbnN0IHZlcnRleFNoYWRlclNvdXJjZSA9IGAjdmVyc2lvbiAzMDAgZXNcbmxheW91dCAobG9jYXRpb24gPSAke1ZlcnRleEF0dHJpYkxvY2F0aW9ucy5VTklUX1FVQUR9KSBpbiB2ZWMyIGFfdW5pdHF1YWQ7XG5sYXlvdXQgKGxvY2F0aW9uID0gJHtWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuQ0VMTF9QT1NJVElPTn0pIGluIHZlYzIgYV9jZWxscG9zO1xubGF5b3V0IChsb2NhdGlvbiA9ICR7VmVydGV4QXR0cmliTG9jYXRpb25zLk9GRlNFVH0pIGluIHZlYzIgYV9vZmZzZXQ7XG5sYXlvdXQgKGxvY2F0aW9uID0gJHtWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuU0laRX0pIGluIHZlYzIgYV9zaXplO1xubGF5b3V0IChsb2NhdGlvbiA9ICR7VmVydGV4QXR0cmliTG9jYXRpb25zLlRFWENPT1JEfSkgaW4gdmVjMiBhX3RleGNvb3JkO1xubGF5b3V0IChsb2NhdGlvbiA9ICR7VmVydGV4QXR0cmliTG9jYXRpb25zLlRFWFNJWkV9KSBpbiB2ZWMyIGFfdGV4c2l6ZTtcblxudW5pZm9ybSBtYXQ0IHVfcHJvamVjdGlvbjtcbnVuaWZvcm0gdmVjMiB1X3Jlc29sdXRpb247XG5cbm91dCB2ZWMyIHZfdGV4Y29vcmQ7XG5cbnZvaWQgbWFpbigpIHtcbiAgdmVjMiB6ZXJvVG9PbmUgPSAoYV9vZmZzZXQgLyB1X3Jlc29sdXRpb24pICsgYV9jZWxscG9zICsgKGFfdW5pdHF1YWQgKiBhX3NpemUpO1xuICBnbF9Qb3NpdGlvbiA9IHVfcHJvamVjdGlvbiAqIHZlYzQoemVyb1RvT25lLCAwLjAsIDEuMCk7XG4gIHZfdGV4Y29vcmQgPSBhX3RleGNvb3JkICsgYV91bml0cXVhZCAqIGFfdGV4c2l6ZTtcbn1gO1xuXG5jb25zdCBmcmFnbWVudFNoYWRlclNvdXJjZSA9IGAjdmVyc2lvbiAzMDAgZXNcbnByZWNpc2lvbiBsb3dwIGZsb2F0O1xuXG5pbiB2ZWMyIHZfdGV4Y29vcmQ7XG5cbnVuaWZvcm0gc2FtcGxlcjJEIHVfdGV4dHVyZTtcblxub3V0IHZlYzQgb3V0Q29sb3I7XG5cbnZvaWQgbWFpbigpIHtcbiAgb3V0Q29sb3IgPSB0ZXh0dXJlKHVfdGV4dHVyZSwgdl90ZXhjb29yZCk7XG59YDtcblxuY29uc3QgSU5ESUNFU19QRVJfQ0VMTCA9IDEwO1xuY29uc3QgQllURVNfUEVSX0NFTEwgPSBJTkRJQ0VTX1BFUl9DRUxMICogRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UO1xuY29uc3QgQ0VMTF9QT1NJVElPTl9JTkRJQ0VTID0gMjtcblxuZXhwb3J0IGNsYXNzIEdseXBoUmVuZGVyZXIge1xuICBwcml2YXRlIF9hdGxhczogV2ViZ2xDaGFyQXRsYXMgfCB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBfcHJvZ3JhbTogV2ViR0xQcm9ncmFtO1xuICBwcml2YXRlIF92ZXJ0ZXhBcnJheU9iamVjdDogSVdlYkdMVmVydGV4QXJyYXlPYmplY3Q7XG4gIHByaXZhdGUgX3Byb2plY3Rpb25Mb2NhdGlvbjogV2ViR0xVbmlmb3JtTG9jYXRpb247XG4gIHByaXZhdGUgX3Jlc29sdXRpb25Mb2NhdGlvbjogV2ViR0xVbmlmb3JtTG9jYXRpb247XG4gIHByaXZhdGUgX3RleHR1cmVMb2NhdGlvbjogV2ViR0xVbmlmb3JtTG9jYXRpb247XG4gIHByaXZhdGUgX2F0bGFzVGV4dHVyZTogV2ViR0xUZXh0dXJlO1xuICBwcml2YXRlIF9hdHRyaWJ1dGVzQnVmZmVyOiBXZWJHTEJ1ZmZlcjtcbiAgcHJpdmF0ZSBfYWN0aXZlQnVmZmVyOiBudW1iZXIgPSAwO1xuXG4gIHByaXZhdGUgX3ZlcnRpY2VzOiBJVmVydGljZXMgPSB7XG4gICAgY291bnQ6IDAsXG4gICAgYXR0cmlidXRlczogbmV3IEZsb2F0MzJBcnJheSgwKSxcbiAgICBhdHRyaWJ1dGVzQnVmZmVyczogW1xuICAgICAgbmV3IEZsb2F0MzJBcnJheSgwKSxcbiAgICAgIG5ldyBGbG9hdDMyQXJyYXkoMClcbiAgICBdLFxuICAgIHNlbGVjdGlvbkF0dHJpYnV0ZXM6IG5ldyBGbG9hdDMyQXJyYXkoMClcbiAgfTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF90ZXJtaW5hbDogVGVybWluYWwsXG4gICAgcHJpdmF0ZSBfY29sb3JzOiBJQ29sb3JTZXQsXG4gICAgcHJpdmF0ZSBfZ2w6IElXZWJHTDJSZW5kZXJpbmdDb250ZXh0LFxuICAgIHByaXZhdGUgX2RpbWVuc2lvbnM6IElSZW5kZXJEaW1lbnNpb25zXG4gICkge1xuICAgIGNvbnN0IGdsID0gdGhpcy5fZ2w7XG4gICAgY29uc3QgcHJvZ3JhbSA9IHRocm93SWZGYWxzeShjcmVhdGVQcm9ncmFtKGdsLCB2ZXJ0ZXhTaGFkZXJTb3VyY2UsIGZyYWdtZW50U2hhZGVyU291cmNlKSk7XG4gICAgdGhpcy5fcHJvZ3JhbSA9IHByb2dyYW07XG5cbiAgICAvLyBVbmlmb3JtIGxvY2F0aW9uc1xuICAgIHRoaXMuX3Byb2plY3Rpb25Mb2NhdGlvbiA9IHRocm93SWZGYWxzeShnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5fcHJvZ3JhbSwgJ3VfcHJvamVjdGlvbicpKTtcbiAgICB0aGlzLl9yZXNvbHV0aW9uTG9jYXRpb24gPSB0aHJvd0lmRmFsc3koZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuX3Byb2dyYW0sICd1X3Jlc29sdXRpb24nKSk7XG4gICAgdGhpcy5fdGV4dHVyZUxvY2F0aW9uID0gdGhyb3dJZkZhbHN5KGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLl9wcm9ncmFtLCAndV90ZXh0dXJlJykpO1xuXG4gICAgLy8gQ3JlYXRlIGFuZCBzZXQgdGhlIHZlcnRleCBhcnJheSBvYmplY3RcbiAgICB0aGlzLl92ZXJ0ZXhBcnJheU9iamVjdCA9IGdsLmNyZWF0ZVZlcnRleEFycmF5KCk7XG4gICAgZ2wuYmluZFZlcnRleEFycmF5KHRoaXMuX3ZlcnRleEFycmF5T2JqZWN0KTtcblxuICAgIC8vIFNldHVwIGFfdW5pdHF1YWQsIHRoaXMgZGVmaW5lcyB0aGUgNCB2ZXJ0aWNlcyBvZiBhIHJlY3RhbmdsZVxuICAgIGNvbnN0IHVuaXRRdWFkVmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KFswLCAwLCAxLCAwLCAwLCAxLCAxLCAxXSk7XG4gICAgY29uc3QgdW5pdFF1YWRWZXJ0aWNlc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB1bml0UXVhZFZlcnRpY2VzQnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdW5pdFF1YWRWZXJ0aWNlcywgZ2wuU1RBVElDX0RSQVcpO1xuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KFZlcnRleEF0dHJpYkxvY2F0aW9ucy5VTklUX1FVQUQpO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoVmVydGV4QXR0cmliTG9jYXRpb25zLlVOSVRfUVVBRCwgMiwgdGhpcy5fZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblxuICAgIC8vIFNldHVwIHRoZSB1bml0IHF1YWQgZWxlbWVudCBhcnJheSBidWZmZXIsIHRoaXMgcG9pbnRzIHRvIGluZGljZXMgaW5cbiAgICAvLyB1bml0UXVhZFZlcnR1Y2VzIHRvIGFsbG93IGlzIHRvIGRyYXcgMiB0cmlhbmdsZXMgZnJvbSB0aGUgdmVydGljZXNcbiAgICBjb25zdCB1bml0UXVhZEVsZW1lbnRJbmRpY2VzID0gbmV3IFVpbnQ4QXJyYXkoWzAsIDEsIDMsIDAsIDIsIDNdKTtcbiAgICBjb25zdCBlbGVtZW50SW5kaWNlc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGVsZW1lbnRJbmRpY2VzQnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB1bml0UXVhZEVsZW1lbnRJbmRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7XG5cbiAgICAvLyBTZXR1cCBhdHRyaWJ1dGVzXG4gICAgdGhpcy5fYXR0cmlidXRlc0J1ZmZlciA9IHRocm93SWZGYWxzeShnbC5jcmVhdGVCdWZmZXIoKSk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuX2F0dHJpYnV0ZXNCdWZmZXIpO1xuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KFZlcnRleEF0dHJpYkxvY2F0aW9ucy5PRkZTRVQpO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoVmVydGV4QXR0cmliTG9jYXRpb25zLk9GRlNFVCwgMiwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfQ0VMTCwgMCk7XG4gICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuT0ZGU0VULCAxKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuU0laRSk7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuU0laRSwgMiwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfQ0VMTCwgMiAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XG4gICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuU0laRSwgMSk7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoVmVydGV4QXR0cmliTG9jYXRpb25zLlRFWENPT1JEKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5URVhDT09SRCwgMiwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfQ0VMTCwgNCAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XG4gICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVEVYQ09PUkQsIDEpO1xuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KFZlcnRleEF0dHJpYkxvY2F0aW9ucy5URVhTSVpFKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5URVhTSVpFLCAyLCBnbC5GTE9BVCwgZmFsc2UsIEJZVEVTX1BFUl9DRUxMLCA2ICogRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5URVhTSVpFLCAxKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuQ0VMTF9QT1NJVElPTik7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuQ0VMTF9QT1NJVElPTiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfQ0VMTCwgOCAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XG4gICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuQ0VMTF9QT1NJVElPTiwgMSk7XG5cbiAgICAvLyBTZXR1cCBlbXB0eSB0ZXh0dXJlIGF0bGFzXG4gICAgdGhpcy5fYXRsYXNUZXh0dXJlID0gdGhyb3dJZkZhbHN5KGdsLmNyZWF0ZVRleHR1cmUoKSk7XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fYXRsYXNUZXh0dXJlKTtcbiAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIDEsIDEsIDAsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIG5ldyBVaW50OEFycmF5KFswLCAwLCAyNTUsIDI1NV0pKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcblxuICAgIC8vIEFsbG93IGRyYXdpbmcgb2YgdHJhbnNwYXJlbnQgdGV4dHVyZVxuICAgIGdsLmVuYWJsZShnbC5CTEVORCk7XG4gICAgZ2wuYmxlbmRGdW5jKGdsLlNSQ19BTFBIQSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7XG5cbiAgICAvLyBTZXQgdmlld3BvcnRcbiAgICB0aGlzLm9uUmVzaXplKCk7XG4gIH1cblxuICBwdWJsaWMgYmVnaW5GcmFtZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fYXRsYXMgPyB0aGlzLl9hdGxhcy5iZWdpbkZyYW1lKCkgOiB0cnVlO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZUNlbGwoeDogbnVtYmVyLCB5OiBudW1iZXIsIGNvZGU6IG51bWJlciwgYmc6IG51bWJlciwgZmc6IG51bWJlciwgY2hhcnM6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuX3VwZGF0ZUNlbGwodGhpcy5fdmVydGljZXMuYXR0cmlidXRlcywgeCwgeSwgY29kZSwgYmcsIGZnLCBjaGFycyk7XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVDZWxsKGFycmF5OiBGbG9hdDMyQXJyYXksIHg6IG51bWJlciwgeTogbnVtYmVyLCBjb2RlOiBudW1iZXIgfCB1bmRlZmluZWQsIGJnOiBudW1iZXIsIGZnOiBudW1iZXIsIGNoYXJzPzogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgdGVybWluYWwgPSB0aGlzLl90ZXJtaW5hbDtcblxuICAgIGNvbnN0IGkgPSAoeSAqIHRlcm1pbmFsLmNvbHMgKyB4KSAqIElORElDRVNfUEVSX0NFTEw7XG5cbiAgICAvLyBFeGl0IGVhcmx5IGlmIHRoaXMgaXMgYSBudWxsL3NwYWNlIGNoYXJhY3RlclxuICAgIGlmIChjb2RlID09PSBOVUxMX0NFTExfQ09ERSB8fCBjb2RlID09PSBXSElURVNQQUNFX0NFTExfQ09ERSB8fCBjb2RlID09PSB1bmRlZmluZWQvKiBUaGlzIGlzIHVzZWQgZm9yIHRoZSByaWdodCBzaWRlIG9mIHdpZGUgY2hhcnMgKi8pIHtcbiAgICAgIGZpbGwoYXJyYXksIDAsIGksIGkgKyBJTkRJQ0VTX1BFUl9DRUxMIC0gMSAtIENFTExfUE9TSVRJT05fSU5ESUNFUyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHJhc3Rlcml6ZWRHbHlwaDogSVJhc3Rlcml6ZWRHbHlwaDtcbiAgICBpZiAoIXRoaXMuX2F0bGFzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjaGFycyAmJiBjaGFycy5sZW5ndGggPiAxKSB7XG4gICAgICByYXN0ZXJpemVkR2x5cGggPSB0aGlzLl9hdGxhcy5nZXRSYXN0ZXJpemVkR2x5cGhDb21iaW5lZENoYXIoY2hhcnMsIGJnLCBmZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJhc3Rlcml6ZWRHbHlwaCA9IHRoaXMuX2F0bGFzLmdldFJhc3Rlcml6ZWRHbHlwaChjb2RlLCBiZywgZmcpO1xuICAgIH1cblxuICAgIC8vIEZpbGwgZW1wdHkgaWYgbm8gZ2x5cGggd2FzIGZvdW5kXG4gICAgaWYgKCFyYXN0ZXJpemVkR2x5cGgpIHtcbiAgICAgIGZpbGwoYXJyYXksIDAsIGksIGkgKyBJTkRJQ0VTX1BFUl9DRUxMIC0gMSAtIENFTExfUE9TSVRJT05fSU5ESUNFUyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYV9vcmlnaW5cbiAgICBhcnJheVtpICAgIF0gPSAtcmFzdGVyaXplZEdseXBoLm9mZnNldC54ICsgdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDaGFyTGVmdDtcbiAgICBhcnJheVtpICsgMV0gPSAtcmFzdGVyaXplZEdseXBoLm9mZnNldC55ICsgdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDaGFyVG9wO1xuICAgIC8vIGFfc2l6ZVxuICAgIGFycmF5W2kgKyAyXSA9IHJhc3Rlcml6ZWRHbHlwaC5zaXplLnggLyB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoO1xuICAgIGFycmF5W2kgKyAzXSA9IHJhc3Rlcml6ZWRHbHlwaC5zaXplLnkgLyB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodDtcbiAgICAvLyBhX3RleGNvb3JkXG4gICAgYXJyYXlbaSArIDRdID0gcmFzdGVyaXplZEdseXBoLnRleHR1cmVQb3NpdGlvbkNsaXBTcGFjZS54O1xuICAgIGFycmF5W2kgKyA1XSA9IHJhc3Rlcml6ZWRHbHlwaC50ZXh0dXJlUG9zaXRpb25DbGlwU3BhY2UueTtcbiAgICAvLyBhX3RleHNpemVcbiAgICBhcnJheVtpICsgNl0gPSByYXN0ZXJpemVkR2x5cGguc2l6ZUNsaXBTcGFjZS54O1xuICAgIGFycmF5W2kgKyA3XSA9IHJhc3Rlcml6ZWRHbHlwaC5zaXplQ2xpcFNwYWNlLnk7XG4gICAgLy8gYV9jZWxscG9zIG9ubHkgY2hhbmdlcyBvbiByZXNpemVcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVTZWxlY3Rpb24obW9kZWw6IElSZW5kZXJNb2RlbCwgY29sdW1uU2VsZWN0TW9kZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fdGVybWluYWw7XG5cbiAgICB0aGlzLl92ZXJ0aWNlcy5zZWxlY3Rpb25BdHRyaWJ1dGVzID0gc2xpY2UodGhpcy5fdmVydGljZXMuYXR0cmlidXRlcywgMCk7XG5cbiAgICBjb25zdCBiZyA9ICh0aGlzLl9jb2xvcnMuc2VsZWN0aW9uT3BhcXVlLnJnYmEgPj4+IDgpIHwgQXR0cmlidXRlcy5DTV9SR0I7XG5cbiAgICBpZiAoY29sdW1uU2VsZWN0TW9kZSkge1xuICAgICAgY29uc3Qgc3RhcnRDb2wgPSBtb2RlbC5zZWxlY3Rpb24uc3RhcnRDb2w7XG4gICAgICBjb25zdCB3aWR0aCA9IG1vZGVsLnNlbGVjdGlvbi5lbmRDb2wgLSBzdGFydENvbDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZEVuZFJvdyAtIG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZFN0YXJ0Um93ICsgMTtcbiAgICAgIGZvciAobGV0IHkgPSBtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRTdGFydFJvdzsgeSA8IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZFN0YXJ0Um93ICsgaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlU2VsZWN0aW9uUmFuZ2Uoc3RhcnRDb2wsIHN0YXJ0Q29sICsgd2lkdGgsIHksIG1vZGVsLCBiZyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERyYXcgZmlyc3Qgcm93XG4gICAgICBjb25zdCBzdGFydENvbCA9IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydFN0YXJ0Um93ID09PSBtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRTdGFydFJvdyA/IG1vZGVsLnNlbGVjdGlvbi5zdGFydENvbCA6IDA7XG4gICAgICBjb25zdCBzdGFydFJvd0VuZENvbCA9IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZFN0YXJ0Um93ID09PSBtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRFbmRSb3cgPyBtb2RlbC5zZWxlY3Rpb24uZW5kQ29sIDogdGVybWluYWwuY29scztcbiAgICAgIHRoaXMuX3VwZGF0ZVNlbGVjdGlvblJhbmdlKHN0YXJ0Q29sLCBzdGFydFJvd0VuZENvbCwgbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3csIG1vZGVsLCBiZyk7XG5cbiAgICAgIC8vIERyYXcgbWlkZGxlIHJvd3NcbiAgICAgIGNvbnN0IG1pZGRsZVJvd3NDb3VudCA9IE1hdGgubWF4KG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZEVuZFJvdyAtIG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZFN0YXJ0Um93IC0gMSwgMCk7XG4gICAgICBmb3IgKGxldCB5ID0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyAxOyB5IDw9IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZFN0YXJ0Um93ICsgbWlkZGxlUm93c0NvdW50OyB5KyspIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlU2VsZWN0aW9uUmFuZ2UoMCwgc3RhcnRSb3dFbmRDb2wsIHksIG1vZGVsLCBiZyk7XG4gICAgICB9XG5cbiAgICAgIC8vIERyYXcgZmluYWwgcm93XG4gICAgICBpZiAobW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgIT09IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZEVuZFJvdykge1xuICAgICAgICAvLyBPbmx5IGRyYXcgdmlld3BvcnRFbmRSb3cgaWYgaXQncyBub3QgdGhlIHNhbWUgYXMgdmlld3BvcnRTdGFydFJvd1xuICAgICAgICBjb25zdCBlbmRDb2wgPSBtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRFbmRSb3cgPT09IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZEVuZFJvdyA/IG1vZGVsLnNlbGVjdGlvbi5lbmRDb2wgOiB0ZXJtaW5hbC5jb2xzO1xuICAgICAgICB0aGlzLl91cGRhdGVTZWxlY3Rpb25SYW5nZSgwLCBlbmRDb2wsIG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZEVuZFJvdywgbW9kZWwsIGJnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVTZWxlY3Rpb25SYW5nZShzdGFydENvbDogbnVtYmVyLCBlbmRDb2w6IG51bWJlciwgeTogbnVtYmVyLCBtb2RlbDogSVJlbmRlck1vZGVsLCBiZzogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgdGVybWluYWwgPSB0aGlzLl90ZXJtaW5hbDtcbiAgICBjb25zdCByb3cgPSB5ICsgdGVybWluYWwuYnVmZmVyLnZpZXdwb3J0WTtcbiAgICBsZXQgbGluZTogSUJ1ZmZlckxpbmUgfCB1bmRlZmluZWQ7XG4gICAgZm9yIChsZXQgeCA9IHN0YXJ0Q29sOyB4IDwgZW5kQ29sOyB4KyspIHtcbiAgICAgIGNvbnN0IG9mZnNldCA9ICh5ICogdGhpcy5fdGVybWluYWwuY29scyArIHgpICogUkVOREVSX01PREVMX0lORElDSUVTX1BFUl9DRUxMO1xuICAgICAgY29uc3QgY29kZSA9IG1vZGVsLmNlbGxzW29mZnNldF07XG4gICAgICBsZXQgZmcgPSBtb2RlbC5jZWxsc1tvZmZzZXQgKyBSRU5ERVJfTU9ERUxfRkdfT0ZGU0VUXTtcbiAgICAgIGlmIChmZyAmIEZnRmxhZ3MuSU5WRVJTRSkge1xuICAgICAgICBjb25zdCB3b3JrQ2VsbCA9IG5ldyBBdHRyaWJ1dGVEYXRhKCk7XG4gICAgICAgIHdvcmtDZWxsLmZnID0gZmc7XG4gICAgICAgIHdvcmtDZWxsLmJnID0gbW9kZWwuY2VsbHNbb2Zmc2V0ICsgUkVOREVSX01PREVMX0JHX09GRlNFVF07XG4gICAgICAgIC8vIEdldCBhdHRyaWJ1dGVzIGZyb20gZmcgKGV4Y2x1ZGluZyBpbnZlcnNlKSBhbmQgcmVzb2x2ZSBpbnZlcnNlIGJ5IHB1bGxpYm5nIHJnYiBjb2xvcnNcbiAgICAgICAgLy8gZnJvbSBiZy4gVGhpcyBpcyBuZWVkZWQgc2luY2UgdGhlIGludmVyc2UgZmcgY29sb3Igc2hvdWxkIGJlIGJhc2VkIG9uIHRoZSBvcmlnaW5hbCBiZ1xuICAgICAgICAvLyBjb2xvciwgbm90IG9uIHRoZSBzZWxlY3Rpb24gY29sb3JcbiAgICAgICAgZmcgPSAoZmcgJiB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0sgfCBGZ0ZsYWdzLklOVkVSU0UpKTtcbiAgICAgICAgc3dpdGNoICh3b3JrQ2VsbC5nZXRCZ0NvbG9yTW9kZSgpKSB7XG4gICAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgICAgIGNvbnN0IGMgPSB0aGlzLl9nZXRDb2xvckZyb21BbnNpSW5kZXgod29ya0NlbGwuZ2V0QmdDb2xvcigpKS5yZ2JhO1xuICAgICAgICAgICAgZmcgfD0gKGMgPj4gOCkgJiBBdHRyaWJ1dGVzLlJFRF9NQVNLIHwgKGMgPj4gOCkgJiBBdHRyaWJ1dGVzLkdSRUVOX01BU0sgfCAoYyA+PiA4KSAmIEF0dHJpYnV0ZXMuQkxVRV9NQVNLO1xuICAgICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6XG4gICAgICAgICAgICBjb25zdCBhcnIgPSBBdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0Iod29ya0NlbGwuZ2V0QmdDb2xvcigpKTtcbiAgICAgICAgICAgIGZnIHw9IGFyclswXSA8PCBBdHRyaWJ1dGVzLlJFRF9TSElGVCB8IGFyclsxXSA8PCBBdHRyaWJ1dGVzLkdSRUVOX1NISUZUIHwgYXJyWzJdIDw8IEF0dHJpYnV0ZXMuQkxVRV9TSElGVDtcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fREVGQVVMVDpcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29uc3QgYzIgPSB0aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5yZ2JhO1xuICAgICAgICAgICAgZmcgfD0gKGMyID4+IDgpICYgQXR0cmlidXRlcy5SRURfTUFTSyB8IChjMiA+PiA4KSAmIEF0dHJpYnV0ZXMuR1JFRU5fTUFTSyB8IChjMiA+PiA4KSAmIEF0dHJpYnV0ZXMuQkxVRV9NQVNLO1xuICAgICAgICB9XG4gICAgICAgIGZnIHw9IEF0dHJpYnV0ZXMuQ01fUkdCO1xuICAgICAgfVxuICAgICAgaWYgKGNvZGUgJiBDT01CSU5FRF9DSEFSX0JJVF9NQVNLKSB7XG4gICAgICAgIGlmICghbGluZSkge1xuICAgICAgICAgIGxpbmUgPSB0ZXJtaW5hbC5idWZmZXIuZ2V0TGluZShyb3cpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoYXJzID0gbGluZSEuZ2V0Q2VsbCh4KSEuY2hhcjtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2VsbCh0aGlzLl92ZXJ0aWNlcy5zZWxlY3Rpb25BdHRyaWJ1dGVzLCB4LCB5LCBtb2RlbC5jZWxsc1tvZmZzZXRdLCBiZywgZmcsIGNoYXJzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNlbGwodGhpcy5fdmVydGljZXMuc2VsZWN0aW9uQXR0cmlidXRlcywgeCwgeSwgbW9kZWwuY2VsbHNbb2Zmc2V0XSwgYmcsIGZnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9nZXRDb2xvckZyb21BbnNpSW5kZXgoaWR4OiBudW1iZXIpOiBJQ29sb3Ige1xuICAgIGlmIChpZHggPj0gdGhpcy5fY29sb3JzLmFuc2kubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvbG9yIGZvdW5kIGZvciBpZHggJyArIGlkeCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jb2xvcnMuYW5zaVtpZHhdO1xuICB9XG5cbiAgcHVibGljIG9uUmVzaXplKCk6IHZvaWQge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fdGVybWluYWw7XG4gICAgY29uc3QgZ2wgPSB0aGlzLl9nbDtcblxuICAgIGdsLnZpZXdwb3J0KDAsIDAsIGdsLmNhbnZhcy53aWR0aCwgZ2wuY2FudmFzLmhlaWdodCk7XG5cbiAgICAvLyBVcGRhdGUgdmVydGljZXNcbiAgICBjb25zdCBuZXdDb3VudCA9IHRlcm1pbmFsLmNvbHMgKiB0ZXJtaW5hbC5yb3dzICogSU5ESUNFU19QRVJfQ0VMTDtcbiAgICBpZiAodGhpcy5fdmVydGljZXMuY291bnQgIT09IG5ld0NvdW50KSB7XG4gICAgICB0aGlzLl92ZXJ0aWNlcy5jb3VudCA9IG5ld0NvdW50O1xuICAgICAgdGhpcy5fdmVydGljZXMuYXR0cmlidXRlcyA9IG5ldyBGbG9hdDMyQXJyYXkobmV3Q291bnQpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl92ZXJ0aWNlcy5hdHRyaWJ1dGVzQnVmZmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLl92ZXJ0aWNlcy5hdHRyaWJ1dGVzQnVmZmVyc1tpXSA9IG5ldyBGbG9hdDMyQXJyYXkobmV3Q291bnQpO1xuICAgICAgfVxuXG4gICAgICBsZXQgaSA9IDA7XG4gICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRlcm1pbmFsLnJvd3M7IHkrKykge1xuICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRlcm1pbmFsLmNvbHM7IHgrKykge1xuICAgICAgICAgIHRoaXMuX3ZlcnRpY2VzLmF0dHJpYnV0ZXNbaSArIDhdID0geCAvIHRlcm1pbmFsLmNvbHM7XG4gICAgICAgICAgdGhpcy5fdmVydGljZXMuYXR0cmlidXRlc1tpICsgOV0gPSB5IC8gdGVybWluYWwucm93cztcbiAgICAgICAgICBpICs9IElORElDRVNfUEVSX0NFTEw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0Q29sb3JzKCk6IHZvaWQge1xuICB9XG5cbiAgcHVibGljIHJlbmRlcihyZW5kZXJNb2RlbDogSVJlbmRlck1vZGVsLCBpc1NlbGVjdGlvblZpc2libGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2F0bGFzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZ2wgPSB0aGlzLl9nbDtcblxuICAgIGdsLnVzZVByb2dyYW0odGhpcy5fcHJvZ3JhbSk7XG4gICAgZ2wuYmluZFZlcnRleEFycmF5KHRoaXMuX3ZlcnRleEFycmF5T2JqZWN0KTtcblxuICAgIC8vIEFsdGVybmF0ZSBidWZmZXJzIGVhY2ggZnJhbWUgYXMgdGhlIGFjdGl2ZSBidWZmZXIgZ2V0cyBsb2NrZWQgd2hpbGUgaXQncyBpbiB1c2UgYnkgdGhlIEdQVVxuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlciA9ICh0aGlzLl9hY3RpdmVCdWZmZXIgKyAxKSAlIDI7XG4gICAgY29uc3QgYWN0aXZlQnVmZmVyID0gdGhpcy5fdmVydGljZXMuYXR0cmlidXRlc0J1ZmZlcnNbdGhpcy5fYWN0aXZlQnVmZmVyXTtcblxuICAgIC8vIENvcHkgZGF0YSBmb3IgZWFjaCBjZWxsIG9mIGVhY2ggbGluZSB1cCB0byBpdHMgbGluZSBsZW5ndGggKHRoZSBsYXN0IG5vbi13aGl0ZXNwYWNlIGNlbGwpXG4gICAgLy8gZnJvbSB0aGUgYXR0cmlidXRlcyBidWZmZXIgaW50byBhY3RpdmVCdWZmZXIsIHdoaWNoIGlzIHRoZSBvbmUgdGhhdCBnZXRzIGJvdW5kIHRvIHRoZSBHUFUuXG4gICAgLy8gVGhlIHJlYXNvbnMgZm9yIHRoaXMgYXJlIGFzIGZvbGxvd3M6XG4gICAgLy8gLSBTbyB0aGUgYWN0aXZlIGJ1ZmZlciBjYW4gYmUgYWx0ZXJuYXRlZCBzbyB3ZSBkb24ndCBnZXQgYmxvY2tlZCBvbiByZW5kZXJpbmcgZmluaXNoaW5nXG4gICAgLy8gLSBUbyBjb3B5IGVpdGhlciB0aGUgbm9ybWFsIGF0dHJpYnV0ZXMgYnVmZmVyIG9yIHRoZSBzZWxlY3Rpb24gYXR0cmlidXRlcyBidWZmZXIgd2hlbiB0aGVyZVxuICAgIC8vICAgaXMgYSBzZWxlY3Rpb25cbiAgICAvLyAtIFNvIHdlIGRvbid0IHNlbmQgdmVydGljZXMgZm9yIGFsbCB0aGUgbGluZS1lbmRpbmcgd2hpdGVzcGFjZSB0byB0aGUgR1BVXG4gICAgbGV0IGJ1ZmZlckxlbmd0aCA9IDA7XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCByZW5kZXJNb2RlbC5saW5lTGVuZ3Rocy5sZW5ndGg7IHkrKykge1xuICAgICAgY29uc3Qgc2kgPSB5ICogdGhpcy5fdGVybWluYWwuY29scyAqIElORElDRVNfUEVSX0NFTEw7XG4gICAgICBjb25zdCBzdWIgPSAoaXNTZWxlY3Rpb25WaXNpYmxlID8gdGhpcy5fdmVydGljZXMuc2VsZWN0aW9uQXR0cmlidXRlcyA6IHRoaXMuX3ZlcnRpY2VzLmF0dHJpYnV0ZXMpLnN1YmFycmF5KHNpLCBzaSArIHJlbmRlck1vZGVsLmxpbmVMZW5ndGhzW3ldICogSU5ESUNFU19QRVJfQ0VMTCk7XG4gICAgICBhY3RpdmVCdWZmZXIuc2V0KHN1YiwgYnVmZmVyTGVuZ3RoKTtcbiAgICAgIGJ1ZmZlckxlbmd0aCArPSBzdWIubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIEJpbmQgdGhlIGF0dHJpYnV0ZXMgYnVmZmVyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuX2F0dHJpYnV0ZXNCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBhY3RpdmVCdWZmZXIuc3ViYXJyYXkoMCwgYnVmZmVyTGVuZ3RoKSwgZ2wuU1RSRUFNX0RSQVcpO1xuXG4gICAgLy8gQmluZCB0aGUgdGV4dHVyZSBhdGxhcyBpZiBpdCdzIGNoYW5nZWRcbiAgICBpZiAodGhpcy5fYXRsYXMuaGFzQ2FudmFzQ2hhbmdlZCkge1xuICAgICAgdGhpcy5fYXRsYXMuaGFzQ2FudmFzQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgZ2wudW5pZm9ybTFpKHRoaXMuX3RleHR1cmVMb2NhdGlvbiwgMCk7XG4gICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwICsgMCk7XG4gICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLl9hdGxhc1RleHR1cmUpO1xuICAgICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCB0aGlzLl9hdGxhcy5jYWNoZUNhbnZhcyk7XG4gICAgICBnbC5nZW5lcmF0ZU1pcG1hcChnbC5URVhUVVJFXzJEKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdW5pZm9ybXNcbiAgICBnbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuX3Byb2plY3Rpb25Mb2NhdGlvbiwgZmFsc2UsIFBST0pFQ1RJT05fTUFUUklYKTtcbiAgICBnbC51bmlmb3JtMmYodGhpcy5fcmVzb2x1dGlvbkxvY2F0aW9uLCBnbC5jYW52YXMud2lkdGgsIGdsLmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgLy8gRHJhdyB0aGUgdmlld3BvcnRcbiAgICBnbC5kcmF3RWxlbWVudHNJbnN0YW5jZWQoZ2wuVFJJQU5HTEVTLCA2LCBnbC5VTlNJR05FRF9CWVRFLCAwLCBidWZmZXJMZW5ndGggLyBJTkRJQ0VTX1BFUl9DRUxMKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRBdGxhcyhhdGxhczogV2ViZ2xDaGFyQXRsYXMpOiB2b2lkIHtcbiAgICBjb25zdCBnbCA9IHRoaXMuX2dsO1xuICAgIHRoaXMuX2F0bGFzID0gYXRsYXM7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLl9hdGxhc1RleHR1cmUpO1xuICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgYXRsYXMuY2FjaGVDYW52YXMpO1xuICAgIGdsLmdlbmVyYXRlTWlwbWFwKGdsLlRFWFRVUkVfMkQpO1xuICB9XG5cbiAgcHVibGljIHNldERpbWVuc2lvbnMoZGltZW5zaW9uczogSVJlbmRlckRpbWVuc2lvbnMpOiB2b2lkIHtcbiAgICB0aGlzLl9kaW1lbnNpb25zID0gZGltZW5zaW9ucztcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGVQcm9ncmFtLCBleHBhbmRGbG9hdDMyQXJyYXksIFBST0pFQ1RJT05fTUFUUklYLCB0aHJvd0lmRmFsc3kgfSBmcm9tICcuL1dlYmdsVXRpbHMnO1xuaW1wb3J0IHsgSVJlbmRlck1vZGVsLCBJV2ViR0xWZXJ0ZXhBcnJheU9iamVjdCwgSVdlYkdMMlJlbmRlcmluZ0NvbnRleHQsIElTZWxlY3Rpb25SZW5kZXJNb2RlbCB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgZmlsbCB9IGZyb20gJ2NvbW1vbi9UeXBlZEFycmF5VXRpbHMnO1xuaW1wb3J0IHsgQXR0cmlidXRlcywgRmdGbGFncyB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IFRlcm1pbmFsIH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgSUNvbG9yU2V0LCBJQ29sb3IgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElSZW5kZXJEaW1lbnNpb25zIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBSRU5ERVJfTU9ERUxfQkdfT0ZGU0VULCBSRU5ERVJfTU9ERUxfRkdfT0ZGU0VULCBSRU5ERVJfTU9ERUxfSU5ESUNJRVNfUEVSX0NFTEwgfSBmcm9tICcuL1JlbmRlck1vZGVsJztcblxuY29uc3QgZW51bSBWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMge1xuICBQT1NJVElPTiA9IDAsXG4gIFNJWkUgPSAxLFxuICBDT0xPUiA9IDIsXG4gIFVOSVRfUVVBRCA9IDNcbn1cblxuY29uc3QgdmVydGV4U2hhZGVyU291cmNlID0gYCN2ZXJzaW9uIDMwMCBlc1xubGF5b3V0IChsb2NhdGlvbiA9ICR7VmVydGV4QXR0cmliTG9jYXRpb25zLlBPU0lUSU9OfSkgaW4gdmVjMiBhX3Bvc2l0aW9uO1xubGF5b3V0IChsb2NhdGlvbiA9ICR7VmVydGV4QXR0cmliTG9jYXRpb25zLlNJWkV9KSBpbiB2ZWMyIGFfc2l6ZTtcbmxheW91dCAobG9jYXRpb24gPSAke1ZlcnRleEF0dHJpYkxvY2F0aW9ucy5DT0xPUn0pIGluIHZlYzQgYV9jb2xvcjtcbmxheW91dCAobG9jYXRpb24gPSAke1ZlcnRleEF0dHJpYkxvY2F0aW9ucy5VTklUX1FVQUR9KSBpbiB2ZWMyIGFfdW5pdHF1YWQ7XG5cbnVuaWZvcm0gbWF0NCB1X3Byb2plY3Rpb247XG51bmlmb3JtIHZlYzIgdV9yZXNvbHV0aW9uO1xuXG5vdXQgdmVjNCB2X2NvbG9yO1xuXG52b2lkIG1haW4oKSB7XG4gIHZlYzIgemVyb1RvT25lID0gKGFfcG9zaXRpb24gKyAoYV91bml0cXVhZCAqIGFfc2l6ZSkpIC8gdV9yZXNvbHV0aW9uO1xuICBnbF9Qb3NpdGlvbiA9IHVfcHJvamVjdGlvbiAqIHZlYzQoemVyb1RvT25lLCAwLjAsIDEuMCk7XG4gIHZfY29sb3IgPSBhX2NvbG9yO1xufWA7XG5cbmNvbnN0IGZyYWdtZW50U2hhZGVyU291cmNlID0gYCN2ZXJzaW9uIDMwMCBlc1xucHJlY2lzaW9uIGxvd3AgZmxvYXQ7XG5cbmluIHZlYzQgdl9jb2xvcjtcblxub3V0IHZlYzQgb3V0Q29sb3I7XG5cbnZvaWQgbWFpbigpIHtcbiAgb3V0Q29sb3IgPSB2X2NvbG9yO1xufWA7XG5cbmludGVyZmFjZSBJVmVydGljZXMge1xuICBhdHRyaWJ1dGVzOiBGbG9hdDMyQXJyYXk7XG4gIHNlbGVjdGlvbjogRmxvYXQzMkFycmF5O1xuICBjb3VudDogbnVtYmVyO1xufVxuXG5jb25zdCBJTkRJQ0VTX1BFUl9SRUNUQU5HTEUgPSA4O1xuY29uc3QgQllURVNfUEVSX1JFQ1RBTkdMRSA9IElORElDRVNfUEVSX1JFQ1RBTkdMRSAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVDtcblxuY29uc3QgSU5JVElBTF9CVUZGRVJfUkVDVEFOR0xFX0NBUEFDSVRZID0gMjAgKiBJTkRJQ0VTX1BFUl9SRUNUQU5HTEU7XG5cbmV4cG9ydCBjbGFzcyBSZWN0YW5nbGVSZW5kZXJlciB7XG5cbiAgcHJpdmF0ZSBfcHJvZ3JhbTogV2ViR0xQcm9ncmFtO1xuICBwcml2YXRlIF92ZXJ0ZXhBcnJheU9iamVjdDogSVdlYkdMVmVydGV4QXJyYXlPYmplY3Q7XG4gIHByaXZhdGUgX3Jlc29sdXRpb25Mb2NhdGlvbjogV2ViR0xVbmlmb3JtTG9jYXRpb247XG4gIHByaXZhdGUgX2F0dHJpYnV0ZXNCdWZmZXI6IFdlYkdMQnVmZmVyO1xuICBwcml2YXRlIF9wcm9qZWN0aW9uTG9jYXRpb246IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xuICBwcml2YXRlIF9iZ0Zsb2F0ITogRmxvYXQzMkFycmF5O1xuICBwcml2YXRlIF9zZWxlY3Rpb25GbG9hdCE6IEZsb2F0MzJBcnJheTtcblxuICBwcml2YXRlIF92ZXJ0aWNlczogSVZlcnRpY2VzID0ge1xuICAgIGNvdW50OiAwLFxuICAgIGF0dHJpYnV0ZXM6IG5ldyBGbG9hdDMyQXJyYXkoSU5JVElBTF9CVUZGRVJfUkVDVEFOR0xFX0NBUEFDSVRZKSxcbiAgICBzZWxlY3Rpb246IG5ldyBGbG9hdDMyQXJyYXkoMyAqIElORElDRVNfUEVSX1JFQ1RBTkdMRSlcbiAgfTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF90ZXJtaW5hbDogVGVybWluYWwsXG4gICAgcHJpdmF0ZSBfY29sb3JzOiBJQ29sb3JTZXQsXG4gICAgcHJpdmF0ZSBfZ2w6IElXZWJHTDJSZW5kZXJpbmdDb250ZXh0LFxuICAgIHByaXZhdGUgX2RpbWVuc2lvbnM6IElSZW5kZXJEaW1lbnNpb25zXG4gICkge1xuICAgIGNvbnN0IGdsID0gdGhpcy5fZ2w7XG5cbiAgICB0aGlzLl9wcm9ncmFtID0gdGhyb3dJZkZhbHN5KGNyZWF0ZVByb2dyYW0oZ2wsIHZlcnRleFNoYWRlclNvdXJjZSwgZnJhZ21lbnRTaGFkZXJTb3VyY2UpKTtcblxuICAgIC8vIFVuaWZvcm0gbG9jYXRpb25zXG4gICAgdGhpcy5fcmVzb2x1dGlvbkxvY2F0aW9uID0gdGhyb3dJZkZhbHN5KGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLl9wcm9ncmFtLCAndV9yZXNvbHV0aW9uJykpO1xuICAgIHRoaXMuX3Byb2plY3Rpb25Mb2NhdGlvbiA9IHRocm93SWZGYWxzeShnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5fcHJvZ3JhbSwgJ3VfcHJvamVjdGlvbicpKTtcblxuICAgIC8vIENyZWF0ZSBhbmQgc2V0IHRoZSB2ZXJ0ZXggYXJyYXkgb2JqZWN0XG4gICAgdGhpcy5fdmVydGV4QXJyYXlPYmplY3QgPSBnbC5jcmVhdGVWZXJ0ZXhBcnJheSgpO1xuICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSh0aGlzLl92ZXJ0ZXhBcnJheU9iamVjdCk7XG5cbiAgICAvLyBTZXR1cCBhX3VuaXRxdWFkLCB0aGlzIGRlZmluZXMgdGhlIDQgdmVydGljZXMgb2YgYSByZWN0YW5nbGVcbiAgICBjb25zdCB1bml0UXVhZFZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheShbMCwgMCwgMSwgMCwgMCwgMSwgMSwgMV0pO1xuICAgIGNvbnN0IHVuaXRRdWFkVmVydGljZXNCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdW5pdFF1YWRWZXJ0aWNlc0J1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHVuaXRRdWFkVmVydGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVU5JVF9RVUFEKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5VTklUX1FVQUQsIDIsIHRoaXMuX2dsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG5cbiAgICAvLyBTZXR1cCB0aGUgdW5pdCBxdWFkIGVsZW1lbnQgYXJyYXkgYnVmZmVyLCB0aGlzIHBvaW50cyB0byBpbmRpY2VzIGluXG4gICAgLy8gdW5pdFF1YWRWZXJ0dWNlcyB0byBhbGxvdyBpcyB0byBkcmF3IDIgdHJpYW5nbGVzIGZyb20gdGhlIHZlcnRpY2VzXG4gICAgY29uc3QgdW5pdFF1YWRFbGVtZW50SW5kaWNlcyA9IG5ldyBVaW50OEFycmF5KFswLCAxLCAzLCAwLCAyLCAzXSk7XG4gICAgY29uc3QgZWxlbWVudEluZGljZXNCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBlbGVtZW50SW5kaWNlc0J1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdW5pdFF1YWRFbGVtZW50SW5kaWNlcywgZ2wuU1RBVElDX0RSQVcpO1xuXG4gICAgLy8gU2V0dXAgYXR0cmlidXRlc1xuICAgIHRoaXMuX2F0dHJpYnV0ZXNCdWZmZXIgPSB0aHJvd0lmRmFsc3koZ2wuY3JlYXRlQnVmZmVyKCkpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLl9hdHRyaWJ1dGVzQnVmZmVyKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuUE9TSVRJT04pO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoVmVydGV4QXR0cmliTG9jYXRpb25zLlBPU0lUSU9OLCAyLCBnbC5GTE9BVCwgZmFsc2UsIEJZVEVTX1BFUl9SRUNUQU5HTEUsIDApO1xuICAgIGdsLnZlcnRleEF0dHJpYkRpdmlzb3IoVmVydGV4QXR0cmliTG9jYXRpb25zLlBPU0lUSU9OLCAxKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuU0laRSk7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuU0laRSwgMiwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfUkVDVEFOR0xFLCAyICogRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5TSVpFLCAxKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuQ09MT1IpO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoVmVydGV4QXR0cmliTG9jYXRpb25zLkNPTE9SLCA0LCBnbC5GTE9BVCwgZmFsc2UsIEJZVEVTX1BFUl9SRUNUQU5HTEUsIDQgKiBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQpO1xuICAgIGdsLnZlcnRleEF0dHJpYkRpdmlzb3IoVmVydGV4QXR0cmliTG9jYXRpb25zLkNPTE9SLCAxKTtcblxuICAgIHRoaXMuX3VwZGF0ZUNhY2hlZENvbG9ycygpO1xuICB9XG5cbiAgcHVibGljIHJlbmRlcigpOiB2b2lkIHtcbiAgICBjb25zdCBnbCA9IHRoaXMuX2dsO1xuXG4gICAgZ2wudXNlUHJvZ3JhbSh0aGlzLl9wcm9ncmFtKTtcblxuICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSh0aGlzLl92ZXJ0ZXhBcnJheU9iamVjdCk7XG5cbiAgICBnbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuX3Byb2plY3Rpb25Mb2NhdGlvbiwgZmFsc2UsIFBST0pFQ1RJT05fTUFUUklYKTtcbiAgICBnbC51bmlmb3JtMmYodGhpcy5fcmVzb2x1dGlvbkxvY2F0aW9uLCBnbC5jYW52YXMud2lkdGgsIGdsLmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgLy8gQmluZCBhdHRyaWJ1dGVzIGJ1ZmZlciBhbmQgZHJhd1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLl9hdHRyaWJ1dGVzQnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5fdmVydGljZXMuYXR0cmlidXRlcywgZ2wuRFlOQU1JQ19EUkFXKTtcbiAgICBnbC5kcmF3RWxlbWVudHNJbnN0YW5jZWQodGhpcy5fZ2wuVFJJQU5HTEVTLCA2LCBnbC5VTlNJR05FRF9CWVRFLCAwLCB0aGlzLl92ZXJ0aWNlcy5jb3VudCk7XG5cbiAgICAvLyBCaW5kIHNlbGVjdGlvbiBidWZmZXIgYW5kIGRyYXdcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5fYXR0cmlidXRlc0J1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHRoaXMuX3ZlcnRpY2VzLnNlbGVjdGlvbiwgZ2wuRFlOQU1JQ19EUkFXKTtcbiAgICBnbC5kcmF3RWxlbWVudHNJbnN0YW5jZWQodGhpcy5fZ2wuVFJJQU5HTEVTLCA2LCBnbC5VTlNJR05FRF9CWVRFLCAwLCAzKTtcbiAgfVxuXG4gIHB1YmxpYyBvblJlc2l6ZSgpOiB2b2lkIHtcbiAgICB0aGlzLl91cGRhdGVWaWV3cG9ydFJlY3RhbmdsZSgpO1xuICB9XG5cbiAgcHVibGljIHNldENvbG9ycygpOiB2b2lkIHtcbiAgICB0aGlzLl91cGRhdGVDYWNoZWRDb2xvcnMoKTtcbiAgICB0aGlzLl91cGRhdGVWaWV3cG9ydFJlY3RhbmdsZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlQ2FjaGVkQ29sb3JzKCk6IHZvaWQge1xuICAgIHRoaXMuX2JnRmxvYXQgPSB0aGlzLl9jb2xvclRvRmxvYXQzMkFycmF5KHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kKTtcbiAgICB0aGlzLl9zZWxlY3Rpb25GbG9hdCA9IHRoaXMuX2NvbG9yVG9GbG9hdDMyQXJyYXkodGhpcy5fY29sb3JzLnNlbGVjdGlvbk9wYXF1ZSk7XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVWaWV3cG9ydFJlY3RhbmdsZSgpOiB2b2lkIHtcbiAgICAvLyBTZXQgZmlyc3QgcmVjdGFuZ2xlIHRoYXQgY2xlYXJzIHRoZSBzY3JlZW5cbiAgICB0aGlzLl9hZGRSZWN0YW5nbGVGbG9hdChcbiAgICAgIHRoaXMuX3ZlcnRpY2VzLmF0dHJpYnV0ZXMsXG4gICAgICAwLFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICB0aGlzLl90ZXJtaW5hbC5jb2xzICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGgsXG4gICAgICB0aGlzLl90ZXJtaW5hbC5yb3dzICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgdGhpcy5fYmdGbG9hdFxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlU2VsZWN0aW9uKG1vZGVsOiBJU2VsZWN0aW9uUmVuZGVyTW9kZWwsIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMuX3Rlcm1pbmFsO1xuXG4gICAgaWYgKCFtb2RlbC5oYXNTZWxlY3Rpb24pIHtcbiAgICAgIGZpbGwodGhpcy5fdmVydGljZXMuc2VsZWN0aW9uLCAwLCAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoY29sdW1uU2VsZWN0TW9kZSkge1xuICAgICAgY29uc3Qgc3RhcnRDb2wgPSBtb2RlbC5zdGFydENvbDtcbiAgICAgIGNvbnN0IHdpZHRoID0gbW9kZWwuZW5kQ29sIC0gc3RhcnRDb2w7XG4gICAgICBjb25zdCBoZWlnaHQgPSBtb2RlbC52aWV3cG9ydENhcHBlZEVuZFJvdyAtIG1vZGVsLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyAxO1xuICAgICAgdGhpcy5fYWRkUmVjdGFuZ2xlRmxvYXQoXG4gICAgICAgIHRoaXMuX3ZlcnRpY2VzLnNlbGVjdGlvbixcbiAgICAgICAgMCxcbiAgICAgICAgc3RhcnRDb2wgKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgbW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgd2lkdGggKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgaGVpZ2h0ICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICB0aGlzLl9zZWxlY3Rpb25GbG9hdFxuICAgICAgKTtcbiAgICAgIGZpbGwodGhpcy5fdmVydGljZXMuc2VsZWN0aW9uLCAwLCBJTkRJQ0VTX1BFUl9SRUNUQU5HTEUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEcmF3IGZpcnN0IHJvd1xuICAgICAgY29uc3Qgc3RhcnRDb2wgPSBtb2RlbC52aWV3cG9ydFN0YXJ0Um93ID09PSBtb2RlbC52aWV3cG9ydENhcHBlZFN0YXJ0Um93ID8gbW9kZWwuc3RhcnRDb2wgOiAwO1xuICAgICAgY29uc3Qgc3RhcnRSb3dFbmRDb2wgPSBtb2RlbC52aWV3cG9ydENhcHBlZFN0YXJ0Um93ID09PSBtb2RlbC52aWV3cG9ydENhcHBlZEVuZFJvdyA/IG1vZGVsLmVuZENvbCA6IHRlcm1pbmFsLmNvbHM7XG4gICAgICB0aGlzLl9hZGRSZWN0YW5nbGVGbG9hdChcbiAgICAgICAgdGhpcy5fdmVydGljZXMuc2VsZWN0aW9uLFxuICAgICAgICAwLFxuICAgICAgICBzdGFydENvbCAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICBtb2RlbC52aWV3cG9ydENhcHBlZFN0YXJ0Um93ICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICAoc3RhcnRSb3dFbmRDb2wgLSBzdGFydENvbCkgKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICB0aGlzLl9zZWxlY3Rpb25GbG9hdFxuICAgICAgKTtcblxuICAgICAgLy8gRHJhdyBtaWRkbGUgcm93c1xuICAgICAgY29uc3QgbWlkZGxlUm93c0NvdW50ID0gTWF0aC5tYXgobW9kZWwudmlld3BvcnRDYXBwZWRFbmRSb3cgLSBtb2RlbC52aWV3cG9ydENhcHBlZFN0YXJ0Um93IC0gMSwgMCk7XG4gICAgICB0aGlzLl9hZGRSZWN0YW5nbGVGbG9hdChcbiAgICAgICAgdGhpcy5fdmVydGljZXMuc2VsZWN0aW9uLFxuICAgICAgICBJTkRJQ0VTX1BFUl9SRUNUQU5HTEUsXG4gICAgICAgIDAsXG4gICAgICAgIChtb2RlbC52aWV3cG9ydENhcHBlZFN0YXJ0Um93ICsgMSkgKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgIHRlcm1pbmFsLmNvbHMgKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgbWlkZGxlUm93c0NvdW50ICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICB0aGlzLl9zZWxlY3Rpb25GbG9hdFxuICAgICAgKTtcblxuICAgICAgLy8gRHJhdyBmaW5hbCByb3dcbiAgICAgIGlmIChtb2RlbC52aWV3cG9ydENhcHBlZFN0YXJ0Um93ICE9PSBtb2RlbC52aWV3cG9ydENhcHBlZEVuZFJvdykge1xuICAgICAgICAvLyBPbmx5IGRyYXcgdmlld3BvcnRFbmRSb3cgaWYgaXQncyBub3QgdGhlIHNhbWUgYXMgdmlld3BvcnRTdGFydFJvd1xuICAgICAgICBjb25zdCBlbmRDb2wgPSBtb2RlbC52aWV3cG9ydEVuZFJvdyA9PT0gbW9kZWwudmlld3BvcnRDYXBwZWRFbmRSb3cgPyBtb2RlbC5lbmRDb2wgOiB0ZXJtaW5hbC5jb2xzO1xuICAgICAgICB0aGlzLl9hZGRSZWN0YW5nbGVGbG9hdChcbiAgICAgICAgICB0aGlzLl92ZXJ0aWNlcy5zZWxlY3Rpb24sXG4gICAgICAgICAgSU5ESUNFU19QRVJfUkVDVEFOR0xFICogMixcbiAgICAgICAgICAwLFxuICAgICAgICAgIG1vZGVsLnZpZXdwb3J0Q2FwcGVkRW5kUm93ICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICAgIGVuZENvbCAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICAgIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgICB0aGlzLl9zZWxlY3Rpb25GbG9hdFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmlsbCh0aGlzLl92ZXJ0aWNlcy5zZWxlY3Rpb24sIDAsIElORElDRVNfUEVSX1JFQ1RBTkdMRSAqIDIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVCYWNrZ3JvdW5kcyhtb2RlbDogSVJlbmRlck1vZGVsKTogdm9pZCB7XG4gICAgY29uc3QgdGVybWluYWwgPSB0aGlzLl90ZXJtaW5hbDtcbiAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMuX3ZlcnRpY2VzO1xuXG4gICAgbGV0IHJlY3RhbmdsZUNvdW50ID0gMTtcblxuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGVybWluYWwucm93czsgeSsrKSB7XG4gICAgICBsZXQgY3VycmVudFN0YXJ0WCA9IC0xO1xuICAgICAgbGV0IGN1cnJlbnRCZyA9IDA7XG4gICAgICBsZXQgY3VycmVudEZnID0gMDtcbiAgICAgIGxldCBjdXJyZW50SW52ZXJzZSA9IGZhbHNlO1xuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0ZXJtaW5hbC5jb2xzOyB4KyspIHtcbiAgICAgICAgY29uc3QgbW9kZWxJbmRleCA9ICgoeSAqIHRlcm1pbmFsLmNvbHMpICsgeCkgKiBSRU5ERVJfTU9ERUxfSU5ESUNJRVNfUEVSX0NFTEw7XG4gICAgICAgIGNvbnN0IGJnID0gbW9kZWwuY2VsbHNbbW9kZWxJbmRleCArIFJFTkRFUl9NT0RFTF9CR19PRkZTRVRdO1xuICAgICAgICBjb25zdCBmZyA9IG1vZGVsLmNlbGxzW21vZGVsSW5kZXggKyBSRU5ERVJfTU9ERUxfRkdfT0ZGU0VUXTtcbiAgICAgICAgY29uc3QgaW52ZXJzZSA9ICEhKGZnICYgRmdGbGFncy5JTlZFUlNFKTtcbiAgICAgICAgaWYgKGJnICE9PSBjdXJyZW50QmcgfHwgKGZnICE9PSBjdXJyZW50RmcgJiYgKGN1cnJlbnRJbnZlcnNlIHx8IGludmVyc2UpKSkge1xuICAgICAgICAgIC8vIEEgcmVjdGFuZ2xlIG5lZWRzIHRvIGJlIGRyYXduIGlmIGdvaW5nIGZyb20gbm9uLWRlZmF1bHQgdG8gYW5vdGhlciBjb2xvclxuICAgICAgICAgIGlmIChjdXJyZW50QmcgIT09IDAgfHwgKGN1cnJlbnRJbnZlcnNlICYmIGN1cnJlbnRGZyAhPT0gMCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IHJlY3RhbmdsZUNvdW50KysgKiBJTkRJQ0VTX1BFUl9SRUNUQU5HTEU7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVSZWN0YW5nbGUodmVydGljZXMsIG9mZnNldCwgY3VycmVudEZnLCBjdXJyZW50QmcsIGN1cnJlbnRTdGFydFgsIHgsIHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50U3RhcnRYID0geDtcbiAgICAgICAgICBjdXJyZW50QmcgPSBiZztcbiAgICAgICAgICBjdXJyZW50RmcgPSBmZztcbiAgICAgICAgICBjdXJyZW50SW52ZXJzZSA9IGludmVyc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIEZpbmlzaCByZWN0YW5nbGUgaWYgaXQncyBzdGlsbCBnb2luZ1xuICAgICAgaWYgKGN1cnJlbnRCZyAhPT0gMCB8fCAoY3VycmVudEludmVyc2UgJiYgY3VycmVudEZnICE9PSAwKSkge1xuICAgICAgICBjb25zdCBvZmZzZXQgPSByZWN0YW5nbGVDb3VudCsrICogSU5ESUNFU19QRVJfUkVDVEFOR0xFO1xuICAgICAgICB0aGlzLl91cGRhdGVSZWN0YW5nbGUodmVydGljZXMsIG9mZnNldCwgY3VycmVudEZnLCBjdXJyZW50QmcsIGN1cnJlbnRTdGFydFgsIHRlcm1pbmFsLmNvbHMsIHkpO1xuICAgICAgfVxuICAgIH1cbiAgICB2ZXJ0aWNlcy5jb3VudCA9IHJlY3RhbmdsZUNvdW50O1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlUmVjdGFuZ2xlKHZlcnRpY2VzOiBJVmVydGljZXMsIG9mZnNldDogbnVtYmVyLCBmZzogbnVtYmVyLCBiZzogbnVtYmVyLCBzdGFydFg6IG51bWJlciwgZW5kWDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgcmdiYTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIGlmIChmZyAmIEZnRmxhZ3MuSU5WRVJTRSkge1xuICAgICAgc3dpdGNoIChmZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykge1xuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDE2OlxuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgICByZ2JhID0gdGhpcy5fY29sb3JzLmFuc2lbZmcgJiBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLXS5yZ2JhO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOlxuICAgICAgICAgIHJnYmEgPSAoZmcgJiBBdHRyaWJ1dGVzLlJHQl9NQVNLKSA8PCA4O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fREVGQVVMVDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZ2JhID0gdGhpcy5fY29sb3JzLmZvcmVncm91bmQucmdiYTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChiZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykge1xuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDE2OlxuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgICByZ2JhID0gdGhpcy5fY29sb3JzLmFuc2lbYmcgJiBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLXS5yZ2JhO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOlxuICAgICAgICAgIHJnYmEgPSAoYmcgJiBBdHRyaWJ1dGVzLlJHQl9NQVNLKSA8PCA4O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fREVGQVVMVDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZ2JhID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQucmdiYTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodmVydGljZXMuYXR0cmlidXRlcy5sZW5ndGggPCBvZmZzZXQgKyA0KSB7XG4gICAgICB2ZXJ0aWNlcy5hdHRyaWJ1dGVzID0gZXhwYW5kRmxvYXQzMkFycmF5KHZlcnRpY2VzLmF0dHJpYnV0ZXMsIHRoaXMuX3Rlcm1pbmFsLnJvd3MgKiB0aGlzLl90ZXJtaW5hbC5jb2xzICogSU5ESUNFU19QRVJfUkVDVEFOR0xFKTtcbiAgICB9XG4gICAgY29uc3QgeDEgPSBzdGFydFggKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aDtcbiAgICBjb25zdCB5MSA9IHkgKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQ7XG4gICAgY29uc3QgciA9ICgocmdiYSA+PiAyNCkgJiAweEZGKSAvIDI1NTtcbiAgICBjb25zdCBnID0gKChyZ2JhID4+IDE2KSAmIDB4RkYpIC8gMjU1O1xuICAgIGNvbnN0IGIgPSAoKHJnYmEgPj4gOCApICYgMHhGRikgLyAyNTU7XG5cbiAgICB0aGlzLl9hZGRSZWN0YW5nbGUodmVydGljZXMuYXR0cmlidXRlcywgb2Zmc2V0LCB4MSwgeTEsIChlbmRYIC0gc3RhcnRYKSAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoLCB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQsIHIsIGcsIGIsIDEpO1xuICB9XG5cbiAgcHJpdmF0ZSBfYWRkUmVjdGFuZ2xlKGFycmF5OiBGbG9hdDMyQXJyYXksIG9mZnNldDogbnVtYmVyLCB4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgcjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyKTogdm9pZCB7XG4gICAgYXJyYXlbb2Zmc2V0ICAgIF0gPSB4MTtcbiAgICBhcnJheVtvZmZzZXQgKyAxXSA9IHkxO1xuICAgIGFycmF5W29mZnNldCArIDJdID0gd2lkdGg7XG4gICAgYXJyYXlbb2Zmc2V0ICsgM10gPSBoZWlnaHQ7XG4gICAgYXJyYXlbb2Zmc2V0ICsgNF0gPSByO1xuICAgIGFycmF5W29mZnNldCArIDVdID0gZztcbiAgICBhcnJheVtvZmZzZXQgKyA2XSA9IGI7XG4gICAgYXJyYXlbb2Zmc2V0ICsgN10gPSBhO1xuICB9XG5cbiAgcHJpdmF0ZSBfYWRkUmVjdGFuZ2xlRmxvYXQoYXJyYXk6IEZsb2F0MzJBcnJheSwgb2Zmc2V0OiBudW1iZXIsIHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBjb2xvcjogRmxvYXQzMkFycmF5KTogdm9pZCB7XG4gICAgYXJyYXlbb2Zmc2V0ICAgIF0gPSB4MTtcbiAgICBhcnJheVtvZmZzZXQgKyAxXSA9IHkxO1xuICAgIGFycmF5W29mZnNldCArIDJdID0gd2lkdGg7XG4gICAgYXJyYXlbb2Zmc2V0ICsgM10gPSBoZWlnaHQ7XG4gICAgYXJyYXlbb2Zmc2V0ICsgNF0gPSBjb2xvclswXTtcbiAgICBhcnJheVtvZmZzZXQgKyA1XSA9IGNvbG9yWzFdO1xuICAgIGFycmF5W29mZnNldCArIDZdID0gY29sb3JbMl07XG4gICAgYXJyYXlbb2Zmc2V0ICsgN10gPSBjb2xvclszXTtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbG9yVG9GbG9hdDMyQXJyYXkoY29sb3I6IElDb2xvcik6IEZsb2F0MzJBcnJheSB7XG4gICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgKChjb2xvci5yZ2JhID4+IDI0KSAmIDB4RkYpIC8gMjU1LFxuICAgICAgKChjb2xvci5yZ2JhID4+IDE2KSAmIDB4RkYpIC8gMjU1LFxuICAgICAgKChjb2xvci5yZ2JhID4+IDggKSAmIDB4RkYpIC8gMjU1LFxuICAgICAgKChjb2xvci5yZ2JhICAgICAgKSAmIDB4RkYpIC8gMjU1XG4gICAgXSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVJlbmRlck1vZGVsLCBJU2VsZWN0aW9uUmVuZGVyTW9kZWwgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IGZpbGwgfSBmcm9tICdjb21tb24vVHlwZWRBcnJheVV0aWxzJztcblxuZXhwb3J0IGNvbnN0IFJFTkRFUl9NT0RFTF9JTkRJQ0lFU19QRVJfQ0VMTCA9IDM7XG5leHBvcnQgY29uc3QgUkVOREVSX01PREVMX0JHX09GRlNFVCA9IDE7XG5leHBvcnQgY29uc3QgUkVOREVSX01PREVMX0ZHX09GRlNFVCA9IDI7XG5cbmV4cG9ydCBjb25zdCBDT01CSU5FRF9DSEFSX0JJVF9NQVNLID0gMHg4MDAwMDAwMDtcblxuZXhwb3J0IGNsYXNzIFJlbmRlck1vZGVsIGltcGxlbWVudHMgSVJlbmRlck1vZGVsIHtcbiAgcHVibGljIGNlbGxzOiBVaW50MzJBcnJheTtcbiAgcHVibGljIGxpbmVMZW5ndGhzOiBVaW50MzJBcnJheTtcbiAgcHVibGljIHNlbGVjdGlvbjogSVNlbGVjdGlvblJlbmRlck1vZGVsO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2VsbHMgPSBuZXcgVWludDMyQXJyYXkoMCk7XG4gICAgdGhpcy5saW5lTGVuZ3RocyA9IG5ldyBVaW50MzJBcnJheSgwKTtcbiAgICB0aGlzLnNlbGVjdGlvbiA9IHtcbiAgICAgIGhhc1NlbGVjdGlvbjogZmFsc2UsXG4gICAgICB2aWV3cG9ydFN0YXJ0Um93OiAwLFxuICAgICAgdmlld3BvcnRFbmRSb3c6IDAsXG4gICAgICB2aWV3cG9ydENhcHBlZFN0YXJ0Um93OiAwLFxuICAgICAgdmlld3BvcnRDYXBwZWRFbmRSb3c6IDAsXG4gICAgICBzdGFydENvbDogMCxcbiAgICAgIGVuZENvbDogMFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgaW5kZXhDb3VudCA9IGNvbHMgKiByb3dzICogUkVOREVSX01PREVMX0lORElDSUVTX1BFUl9DRUxMO1xuICAgIGlmIChpbmRleENvdW50ICE9PSB0aGlzLmNlbGxzLmxlbmd0aCkge1xuICAgICAgdGhpcy5jZWxscyA9IG5ldyBVaW50MzJBcnJheShpbmRleENvdW50KTtcbiAgICAgIHRoaXMubGluZUxlbmd0aHMgPSBuZXcgVWludDMyQXJyYXkocm93cyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIGZpbGwodGhpcy5jZWxscywgMCwgMCk7XG4gICAgZmlsbCh0aGlzLmxpbmVMZW5ndGhzLCAwLCAwKTtcbiAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gIH1cblxuICBwdWJsaWMgY2xlYXJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3Rpb24uaGFzU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgdGhpcy5zZWxlY3Rpb24udmlld3BvcnRTdGFydFJvdyA9IDA7XG4gICAgdGhpcy5zZWxlY3Rpb24udmlld3BvcnRFbmRSb3cgPSAwO1xuICAgIHRoaXMuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPSAwO1xuICAgIHRoaXMuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkRW5kUm93ID0gMDtcbiAgICB0aGlzLnNlbGVjdGlvbi5zdGFydENvbCA9IDA7XG4gICAgdGhpcy5zZWxlY3Rpb24uZW5kQ29sID0gMDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5leHBvcnQgdHlwZSBUeXBlZEFycmF5ID0gVWludDhBcnJheSB8IFVpbnQxNkFycmF5IHwgVWludDMyQXJyYXkgfCBVaW50OENsYW1wZWRBcnJheVxuICB8IEludDhBcnJheSB8IEludDE2QXJyYXkgfCBJbnQzMkFycmF5XG4gIHwgRmxvYXQzMkFycmF5IHwgRmxvYXQ2NEFycmF5O1xuXG5leHBvcnQgZnVuY3Rpb24gc2xpY2U8VCBleHRlbmRzIFR5cGVkQXJyYXk+KGFycmF5OiBULCBzdGFydD86IG51bWJlciwgZW5kPzogbnVtYmVyKTogVCB7XG4gIC8vIGFsbCBtb2Rlcm4gZW5naW5lcyB0aGF0IHN1cHBvcnQgLnNsaWNlXG4gIGlmIChhcnJheS5zbGljZSkge1xuICAgIHJldHVybiBhcnJheS5zbGljZShzdGFydCwgZW5kKSBhcyBUO1xuICB9XG4gIHJldHVybiBzbGljZUZhbGxiYWNrKGFycmF5LCBzdGFydCwgZW5kKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNsaWNlRmFsbGJhY2s8VCBleHRlbmRzIFR5cGVkQXJyYXk+KGFycmF5OiBULCBzdGFydDogbnVtYmVyID0gMCwgZW5kOiBudW1iZXIgPSBhcnJheS5sZW5ndGgpOiBUIHtcbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ID0gKGFycmF5Lmxlbmd0aCArIHN0YXJ0KSAlIGFycmF5Lmxlbmd0aDtcbiAgfVxuICBpZiAoZW5kID49IGFycmF5Lmxlbmd0aCkge1xuICAgIGVuZCA9IGFycmF5Lmxlbmd0aDtcbiAgfSBlbHNlIHtcbiAgICBlbmQgPSAoYXJyYXkubGVuZ3RoICsgZW5kKSAlIGFycmF5Lmxlbmd0aDtcbiAgfVxuICBzdGFydCA9IE1hdGgubWluKHN0YXJ0LCBlbmQpO1xuXG4gIGNvbnN0IHJlc3VsdDogVCA9IG5ldyAoYXJyYXkuY29uc3RydWN0b3IgYXMgYW55KShlbmQgLSBzdGFydCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZW5kIC0gc3RhcnQ7ICsraSkge1xuICAgIHJlc3VsdFtpXSA9IGFycmF5W2kgKyBzdGFydF07XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgVGVybWluYWwsIElUZXJtaW5hbEFkZG9uIH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgV2ViZ2xSZW5kZXJlciB9IGZyb20gJy4vV2ViZ2xSZW5kZXJlcic7XG5pbXBvcnQgeyBJUmVuZGVyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBXZWJnbEFkZG9uIGltcGxlbWVudHMgSVRlcm1pbmFsQWRkb24ge1xuICBwcml2YXRlIF90ZXJtaW5hbD86IFRlcm1pbmFsO1xuICBwcml2YXRlIF9yZW5kZXJlcj86IFdlYmdsUmVuZGVyZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfcHJlc2VydmVEcmF3aW5nQnVmZmVyPzogYm9vbGVhblxuICApIHt9XG5cbiAgcHVibGljIGFjdGl2YXRlKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIGlmICghdGVybWluYWwuZWxlbWVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgYWN0aXZhdGUgV2ViZ2xBZGRvbiBiZWZvcmUgVGVybWluYWwub3BlbicpO1xuICAgIH1cbiAgICB0aGlzLl90ZXJtaW5hbCA9IHRlcm1pbmFsO1xuICAgIGNvbnN0IHJlbmRlclNlcnZpY2U6IElSZW5kZXJTZXJ2aWNlID0gICg8YW55PnRlcm1pbmFsKS5fY29yZS5fcmVuZGVyU2VydmljZTtcbiAgICBjb25zdCBjb2xvcnM6IElDb2xvclNldCA9ICg8YW55PnRlcm1pbmFsKS5fY29yZS5fY29sb3JNYW5hZ2VyLmNvbG9ycztcbiAgICB0aGlzLl9yZW5kZXJlciA9IG5ldyBXZWJnbFJlbmRlcmVyKHRlcm1pbmFsLCBjb2xvcnMsIHRoaXMuX3ByZXNlcnZlRHJhd2luZ0J1ZmZlcik7XG4gICAgcmVuZGVyU2VydmljZS5zZXRSZW5kZXJlcih0aGlzLl9yZW5kZXJlcik7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3Rlcm1pbmFsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBkaXNwb3NlIFdlYmdsQWRkb24gYmVjYXVzZSBpdCBpcyBhY3RpdmF0ZWQnKTtcbiAgICB9XG4gICAgY29uc3QgcmVuZGVyU2VydmljZTogSVJlbmRlclNlcnZpY2UgPSAoPGFueT50aGlzLl90ZXJtaW5hbCkuX2NvcmUuX3JlbmRlclNlcnZpY2U7XG4gICAgcmVuZGVyU2VydmljZS5zZXRSZW5kZXJlcigoPGFueT50aGlzLl90ZXJtaW5hbCkuX2NvcmUuX2NyZWF0ZVJlbmRlcmVyKCkpO1xuICAgIHJlbmRlclNlcnZpY2Uub25SZXNpemUodGhpcy5fdGVybWluYWwuY29scywgdGhpcy5fdGVybWluYWwucm93cyk7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHRleHR1cmVBdGxhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVyPy50ZXh0dXJlQXRsYXM7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVRlcm1pbmFsIH0gZnJvbSAnLi4vLi4vLi4vc3JjL1R5cGVzJztcbmltcG9ydCB7IEdseXBoUmVuZGVyZXIgfSBmcm9tICcuL0dseXBoUmVuZGVyZXInO1xuaW1wb3J0IHsgTGlua1JlbmRlckxheWVyIH0gZnJvbSAnLi9yZW5kZXJMYXllci9MaW5rUmVuZGVyTGF5ZXInO1xuaW1wb3J0IHsgQ3Vyc29yUmVuZGVyTGF5ZXIgfSBmcm9tICcuL3JlbmRlckxheWVyL0N1cnNvclJlbmRlckxheWVyJztcbmltcG9ydCB7IGFjcXVpcmVDaGFyQXRsYXMgfSBmcm9tICcuL2F0bGFzL0NoYXJBdGxhc0NhY2hlJztcbmltcG9ydCB7IFdlYmdsQ2hhckF0bGFzIH0gZnJvbSAnLi9hdGxhcy9XZWJnbENoYXJBdGxhcyc7XG5pbXBvcnQgeyBSZWN0YW5nbGVSZW5kZXJlciB9IGZyb20gJy4vUmVjdGFuZ2xlUmVuZGVyZXInO1xuaW1wb3J0IHsgSVdlYkdMMlJlbmRlcmluZ0NvbnRleHQgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IFJlbmRlck1vZGVsLCBDT01CSU5FRF9DSEFSX0JJVF9NQVNLLCBSRU5ERVJfTU9ERUxfQkdfT0ZGU0VULCBSRU5ERVJfTU9ERUxfRkdfT0ZGU0VULCBSRU5ERVJfTU9ERUxfSU5ESUNJRVNfUEVSX0NFTEwgfSBmcm9tICcuL1JlbmRlck1vZGVsJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IE5VTExfQ0VMTF9DT0RFIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgVGVybWluYWwsIElFdmVudCB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IElSZW5kZXJMYXllciB9IGZyb20gJy4vcmVuZGVyTGF5ZXIvVHlwZXMnO1xuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMsIElSZW5kZXJlciwgSVJlcXVlc3RSZWZyZXNoUm93c0V2ZW50IH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBJQ29sb3JTZXQgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcblxuZXhwb3J0IGNsYXNzIFdlYmdsUmVuZGVyZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSVJlbmRlcmVyIHtcbiAgcHJpdmF0ZSBfcmVuZGVyTGF5ZXJzOiBJUmVuZGVyTGF5ZXJbXTtcbiAgcHJpdmF0ZSBfY2hhckF0bGFzOiBXZWJnbENoYXJBdGxhcyB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfZGV2aWNlUGl4ZWxSYXRpbzogbnVtYmVyO1xuXG4gIHByaXZhdGUgX21vZGVsOiBSZW5kZXJNb2RlbCA9IG5ldyBSZW5kZXJNb2RlbCgpO1xuICBwcml2YXRlIF93b3JrQ2VsbDogQ2VsbERhdGEgPSBuZXcgQ2VsbERhdGEoKTtcblxuICBwcml2YXRlIF9jYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIF9nbDogSVdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XG4gIHByaXZhdGUgX3JlY3RhbmdsZVJlbmRlcmVyOiBSZWN0YW5nbGVSZW5kZXJlcjtcbiAgcHJpdmF0ZSBfZ2x5cGhSZW5kZXJlcjogR2x5cGhSZW5kZXJlcjtcblxuICBwdWJsaWMgZGltZW5zaW9uczogSVJlbmRlckRpbWVuc2lvbnM7XG5cbiAgcHJpdmF0ZSBfY29yZTogSVRlcm1pbmFsO1xuICBwcml2YXRlIF9pc0F0dGFjaGVkOiBib29sZWFuO1xuXG4gIHByaXZhdGUgX29uUmVxdWVzdFJlZnJlc2hSb3dzID0gbmV3IEV2ZW50RW1pdHRlcjxJUmVxdWVzdFJlZnJlc2hSb3dzRXZlbnQ+KCk7XG4gIHB1YmxpYyBnZXQgb25SZXF1ZXN0UmVmcmVzaFJvd3MoKTogSUV2ZW50PElSZXF1ZXN0UmVmcmVzaFJvd3NFdmVudD4geyByZXR1cm4gdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF90ZXJtaW5hbDogVGVybWluYWwsXG4gICAgcHJpdmF0ZSBfY29sb3JzOiBJQ29sb3JTZXQsXG4gICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyPzogYm9vbGVhblxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fY29yZSA9ICg8YW55PnRoaXMuX3Rlcm1pbmFsKS5fY29yZTtcblxuICAgIHRoaXMuX3JlbmRlckxheWVycyA9IFtcbiAgICAgIG5ldyBMaW5rUmVuZGVyTGF5ZXIodGhpcy5fY29yZS5zY3JlZW5FbGVtZW50LCAyLCB0aGlzLl9jb2xvcnMsIHRoaXMuX2NvcmUpLFxuICAgICAgbmV3IEN1cnNvclJlbmRlckxheWVyKHRoaXMuX2NvcmUuc2NyZWVuRWxlbWVudCwgMywgdGhpcy5fY29sb3JzLCB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cylcbiAgICBdO1xuICAgIHRoaXMuZGltZW5zaW9ucyA9IHtcbiAgICAgIHNjYWxlZENoYXJXaWR0aDogMCxcbiAgICAgIHNjYWxlZENoYXJIZWlnaHQ6IDAsXG4gICAgICBzY2FsZWRDZWxsV2lkdGg6IDAsXG4gICAgICBzY2FsZWRDZWxsSGVpZ2h0OiAwLFxuICAgICAgc2NhbGVkQ2hhckxlZnQ6IDAsXG4gICAgICBzY2FsZWRDaGFyVG9wOiAwLFxuICAgICAgc2NhbGVkQ2FudmFzV2lkdGg6IDAsXG4gICAgICBzY2FsZWRDYW52YXNIZWlnaHQ6IDAsXG4gICAgICBjYW52YXNXaWR0aDogMCxcbiAgICAgIGNhbnZhc0hlaWdodDogMCxcbiAgICAgIGFjdHVhbENlbGxXaWR0aDogMCxcbiAgICAgIGFjdHVhbENlbGxIZWlnaHQ6IDBcbiAgICB9O1xuICAgIHRoaXMuX2RldmljZVBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7XG5cbiAgICB0aGlzLl9jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcblxuICAgIGNvbnN0IGNvbnRleHRBdHRyaWJ1dGVzID0ge1xuICAgICAgYW50aWFsaWFzOiBmYWxzZSxcbiAgICAgIGRlcHRoOiBmYWxzZSxcbiAgICAgIHByZXNlcnZlRHJhd2luZ0J1ZmZlclxuICAgIH07XG4gICAgdGhpcy5fZ2wgPSB0aGlzLl9jYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wyJywgY29udGV4dEF0dHJpYnV0ZXMpIGFzIElXZWJHTDJSZW5kZXJpbmdDb250ZXh0O1xuICAgIGlmICghdGhpcy5fZ2wpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJHTDIgbm90IHN1cHBvcnRlZCcpO1xuICAgIH1cbiAgICB0aGlzLl9jb3JlLnNjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fY2FudmFzKTtcblxuICAgIHRoaXMuX3JlY3RhbmdsZVJlbmRlcmVyID0gbmV3IFJlY3RhbmdsZVJlbmRlcmVyKHRoaXMuX3Rlcm1pbmFsLCB0aGlzLl9jb2xvcnMsIHRoaXMuX2dsLCB0aGlzLmRpbWVuc2lvbnMpO1xuICAgIHRoaXMuX2dseXBoUmVuZGVyZXIgPSBuZXcgR2x5cGhSZW5kZXJlcih0aGlzLl90ZXJtaW5hbCwgdGhpcy5fY29sb3JzLCB0aGlzLl9nbCwgdGhpcy5kaW1lbnNpb25zKTtcblxuICAgIC8vIFVwZGF0ZSBkaW1lbnNpb25zIGFuZCBhY3F1aXJlIGNoYXIgYXRsYXNcbiAgICB0aGlzLm9uQ2hhclNpemVDaGFuZ2VkKCk7XG5cbiAgICB0aGlzLl9pc0F0dGFjaGVkID0gZG9jdW1lbnQuYm9keS5jb250YWlucyh0aGlzLl9jb3JlLnNjcmVlbkVsZW1lbnQpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyTGF5ZXJzLmZvckVhY2gobCA9PiBsLmRpc3Bvc2UoKSk7XG4gICAgdGhpcy5fY29yZS5zY3JlZW5FbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuX2NhbnZhcyk7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG5cbiAgcHVibGljIGdldCB0ZXh0dXJlQXRsYXMoKTogSFRNTENhbnZhc0VsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9jaGFyQXRsYXM/LmNhY2hlQ2FudmFzO1xuICB9XG5cbiAgcHVibGljIHNldENvbG9ycyhjb2xvcnM6IElDb2xvclNldCk6IHZvaWQge1xuICAgIHRoaXMuX2NvbG9ycyA9IGNvbG9ycztcbiAgICAvLyBDbGVhciBsYXllcnMgYW5kIGZvcmNlIGEgZnVsbCByZW5kZXJcbiAgICB0aGlzLl9yZW5kZXJMYXllcnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGwuc2V0Q29sb3JzKHRoaXMuX3Rlcm1pbmFsLCB0aGlzLl9jb2xvcnMpO1xuICAgICAgbC5yZXNldCh0aGlzLl90ZXJtaW5hbCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9yZWN0YW5nbGVSZW5kZXJlci5zZXRDb2xvcnMoKTtcbiAgICB0aGlzLl9nbHlwaFJlbmRlcmVyLnNldENvbG9ycygpO1xuXG4gICAgdGhpcy5fcmVmcmVzaENoYXJBdGxhcygpO1xuXG4gICAgLy8gRm9yY2UgYSBmdWxsIHJlZnJlc2hcbiAgICB0aGlzLl9tb2RlbC5jbGVhcigpO1xuICB9XG5cbiAgcHVibGljIG9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpOiB2b2lkIHtcbiAgICAvLyBJZiB0aGUgZGV2aWNlIHBpeGVsIHJhdGlvIGNoYW5nZWQsIHRoZSBjaGFyIGF0bGFzIG5lZWRzIHRvIGJlIHJlZ2VuZXJhdGVkXG4gICAgLy8gYW5kIHRoZSB0ZXJtaW5hbCBuZWVkcyB0byByZWZyZXNoZWRcbiAgICBpZiAodGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyAhPT0gd2luZG93LmRldmljZVBpeGVsUmF0aW8pIHtcbiAgICAgIHRoaXMuX2RldmljZVBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgIHRoaXMub25SZXNpemUodGhpcy5fdGVybWluYWwuY29scywgdGhpcy5fdGVybWluYWwucm93cyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uUmVzaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIGNoYXJhY3RlciBhbmQgY2FudmFzIGRpbWVuc2lvbnNcbiAgICB0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7XG5cbiAgICB0aGlzLl9tb2RlbC5yZXNpemUodGhpcy5fdGVybWluYWwuY29scywgdGhpcy5fdGVybWluYWwucm93cyk7XG4gICAgdGhpcy5fcmVjdGFuZ2xlUmVuZGVyZXIub25SZXNpemUoKTtcblxuICAgIC8vIFJlc2l6ZSBhbGwgcmVuZGVyIGxheWVyc1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5yZXNpemUodGhpcy5fdGVybWluYWwsIHRoaXMuZGltZW5zaW9ucykpO1xuXG4gICAgLy8gUmVzaXplIHRoZSBjYW52YXNcbiAgICB0aGlzLl9jYW52YXMud2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGg7XG4gICAgdGhpcy5fY2FudmFzLmhlaWdodCA9IHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQ7XG4gICAgdGhpcy5fY2FudmFzLnN0eWxlLndpZHRoID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRofXB4YDtcbiAgICB0aGlzLl9jYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodH1weGA7XG5cbiAgICAvLyBSZXNpemUgdGhlIHNjcmVlblxuICAgIHRoaXMuX2NvcmUuc2NyZWVuRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke3RoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aH1weGA7XG4gICAgdGhpcy5fY29yZS5zY3JlZW5FbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3RoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHR9cHhgO1xuICAgIHRoaXMuX2dseXBoUmVuZGVyZXIuc2V0RGltZW5zaW9ucyh0aGlzLmRpbWVuc2lvbnMpO1xuICAgIHRoaXMuX2dseXBoUmVuZGVyZXIub25SZXNpemUoKTtcblxuICAgIHRoaXMuX3JlZnJlc2hDaGFyQXRsYXMoKTtcblxuICAgIC8vIEZvcmNlIGEgZnVsbCByZWZyZXNoXG4gICAgdGhpcy5fbW9kZWwuY2xlYXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkNoYXJTaXplQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICB0aGlzLm9uUmVzaXplKHRoaXMuX3Rlcm1pbmFsLmNvbHMsIHRoaXMuX3Rlcm1pbmFsLnJvd3MpO1xuICB9XG5cbiAgcHVibGljIG9uQmx1cigpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJMYXllcnMuZm9yRWFjaChsID0+IGwub25CbHVyKHRoaXMuX3Rlcm1pbmFsKSk7XG4gIH1cblxuICBwdWJsaWMgb25Gb2N1cygpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJMYXllcnMuZm9yRWFjaChsID0+IGwub25Gb2N1cyh0aGlzLl90ZXJtaW5hbCkpO1xuICB9XG5cbiAgcHVibGljIG9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydDogW251bWJlciwgbnVtYmVyXSwgZW5kOiBbbnVtYmVyLCBudW1iZXJdLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyTGF5ZXJzLmZvckVhY2gobCA9PiBsLm9uU2VsZWN0aW9uQ2hhbmdlZCh0aGlzLl90ZXJtaW5hbCwgc3RhcnQsIGVuZCwgY29sdW1uU2VsZWN0TW9kZSkpO1xuXG4gICAgdGhpcy5fdXBkYXRlU2VsZWN0aW9uTW9kZWwoc3RhcnQsIGVuZCk7XG5cbiAgICB0aGlzLl9yZWN0YW5nbGVSZW5kZXJlci51cGRhdGVTZWxlY3Rpb24odGhpcy5fbW9kZWwuc2VsZWN0aW9uLCBjb2x1bW5TZWxlY3RNb2RlKTtcbiAgICB0aGlzLl9nbHlwaFJlbmRlcmVyLnVwZGF0ZVNlbGVjdGlvbih0aGlzLl9tb2RlbCwgY29sdW1uU2VsZWN0TW9kZSk7XG5cbiAgICB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5maXJlKHsgc3RhcnQ6IDAsIGVuZDogdGhpcy5fdGVybWluYWwucm93cyAtIDEgfSk7XG4gIH1cblxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5vbkN1cnNvck1vdmUodGhpcy5fdGVybWluYWwpKTtcbiAgfVxuXG4gIHB1YmxpYyBvbk9wdGlvbnNDaGFuZ2VkKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5vbk9wdGlvbnNDaGFuZ2VkKHRoaXMuX3Rlcm1pbmFsKSk7XG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICAgIHRoaXMuX3JlZnJlc2hDaGFyQXRsYXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZyZXNoZXMgdGhlIGNoYXIgYXRsYXMsIGFxdWlyaW5nIGEgbmV3IG9uZSBpZiBuZWNlc3NhcnkuXG4gICAqIEBwYXJhbSB0ZXJtaW5hbCBUaGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSBjb2xvclNldCBUaGUgY29sb3Igc2V0IHRvIHVzZSBmb3IgdGhlIGNoYXIgYXRsYXMuXG4gICAqL1xuICBwcml2YXRlIF9yZWZyZXNoQ2hhckF0bGFzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoIDw9IDAgJiYgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQgPD0gMCkge1xuICAgICAgLy8gTWFyayBhcyBub3QgYXR0YWNoZWQgc28gY2hhciBhdGxhcyBnZXRzIHJlZnJlc2hlZCBvbiBuZXh0IHJlbmRlclxuICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGF0bGFzID0gYWNxdWlyZUNoYXJBdGxhcyh0aGlzLl90ZXJtaW5hbCwgdGhpcy5fY29sb3JzLCB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoLCB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCk7XG4gICAgaWYgKCEoJ2dldFJhc3Rlcml6ZWRHbHlwaCcgaW4gYXRsYXMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB3ZWJnbCByZW5kZXJlciBvbmx5IHdvcmtzIHdpdGggdGhlIHdlYmdsIGNoYXIgYXRsYXMnKTtcbiAgICB9XG4gICAgdGhpcy5fY2hhckF0bGFzID0gYXRsYXMgYXMgV2ViZ2xDaGFyQXRsYXM7XG4gICAgdGhpcy5fY2hhckF0bGFzLndhcm1VcCgpO1xuICAgIHRoaXMuX2dseXBoUmVuZGVyZXIuc2V0QXRsYXModGhpcy5fY2hhckF0bGFzKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJMYXllcnMuZm9yRWFjaChsID0+IGwucmVzZXQodGhpcy5fdGVybWluYWwpKTtcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyOiAodGV4dDogc3RyaW5nKSA9PiBbbnVtYmVyLCBudW1iZXJdW10pOiBudW1iZXIge1xuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIHB1YmxpYyBkZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGpvaW5lcklkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgcmVuZGVyUm93cyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5faXNBdHRhY2hlZCkge1xuICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5fY29yZS5zY3JlZW5FbGVtZW50KSAmJiAoPGFueT50aGlzLl9jb3JlKS5fY2hhclNpemVTZXJ2aWNlLndpZHRoICYmICg8YW55PnRoaXMuX2NvcmUpLl9jaGFyU2l6ZVNlcnZpY2UuaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcbiAgICAgICAgdGhpcy5fcmVmcmVzaENoYXJBdGxhcygpO1xuICAgICAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgcmVuZGVyIGxheWVyc1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5vbkdyaWRDaGFuZ2VkKHRoaXMuX3Rlcm1pbmFsLCBzdGFydCwgZW5kKSk7XG5cbiAgICAvLyBUZWxsIHJlbmRlcmVyIHRoZSBmcmFtZSBpcyBiZWdpbm5pbmdcbiAgICBpZiAodGhpcy5fZ2x5cGhSZW5kZXJlci5iZWdpbkZyYW1lKCkpIHtcbiAgICAgIHRoaXMuX21vZGVsLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIG1vZGVsIHRvIHJlZmxlY3Qgd2hhdCdzIGRyYXduXG4gICAgdGhpcy5fdXBkYXRlTW9kZWwoc3RhcnQsIGVuZCk7XG5cbiAgICAvLyBSZW5kZXJcbiAgICB0aGlzLl9yZWN0YW5nbGVSZW5kZXJlci5yZW5kZXIoKTtcbiAgICB0aGlzLl9nbHlwaFJlbmRlcmVyLnJlbmRlcih0aGlzLl9tb2RlbCwgdGhpcy5fbW9kZWwuc2VsZWN0aW9uLmhhc1NlbGVjdGlvbik7XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVNb2RlbChzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fY29yZTtcblxuICAgIGZvciAobGV0IHkgPSBzdGFydDsgeSA8PSBlbmQ7IHkrKykge1xuICAgICAgY29uc3Qgcm93ID0geSArIHRlcm1pbmFsLmJ1ZmZlci55ZGlzcDtcbiAgICAgIGNvbnN0IGxpbmUgPSB0ZXJtaW5hbC5idWZmZXIubGluZXMuZ2V0KHJvdykhO1xuICAgICAgdGhpcy5fbW9kZWwubGluZUxlbmd0aHNbeV0gPSAwO1xuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0ZXJtaW5hbC5jb2xzOyB4KyspIHtcbiAgICAgICAgbGluZS5sb2FkQ2VsbCh4LCB0aGlzLl93b3JrQ2VsbCk7XG5cbiAgICAgICAgY29uc3QgY2hhcnMgPSB0aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpO1xuICAgICAgICBsZXQgY29kZSA9IHRoaXMuX3dvcmtDZWxsLmdldENvZGUoKTtcbiAgICAgICAgY29uc3QgaSA9ICgoeSAqIHRlcm1pbmFsLmNvbHMpICsgeCkgKiBSRU5ERVJfTU9ERUxfSU5ESUNJRVNfUEVSX0NFTEw7XG5cbiAgICAgICAgaWYgKGNvZGUgIT09IE5VTExfQ0VMTF9DT0RFKSB7XG4gICAgICAgICAgdGhpcy5fbW9kZWwubGluZUxlbmd0aHNbeV0gPSB4ICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5vdGhpbmcgaGFzIGNoYW5nZWQsIG5vIHVwZGF0ZXMgbmVlZGVkXG4gICAgICAgIGlmICh0aGlzLl9tb2RlbC5jZWxsc1tpXSA9PT0gY29kZSAmJlxuICAgICAgICAgICAgdGhpcy5fbW9kZWwuY2VsbHNbaSArIFJFTkRFUl9NT0RFTF9CR19PRkZTRVRdID09PSB0aGlzLl93b3JrQ2VsbC5iZyAmJlxuICAgICAgICAgICAgdGhpcy5fbW9kZWwuY2VsbHNbaSArIFJFTkRFUl9NT0RFTF9GR19PRkZTRVRdID09PSB0aGlzLl93b3JrQ2VsbC5mZykge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmxhZyBjb21iaW5lZCBjaGFycyB3aXRoIGEgYml0IG1hc2sgc28gdGhleSdyZSBlYXNpbHkgaWRlbnRpZmlhYmxlXG4gICAgICAgIGlmIChjaGFycy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgY29kZSA9IGNvZGUgfCBDT01CSU5FRF9DSEFSX0JJVF9NQVNLO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FjaGUgdGhlIHJlc3VsdHMgaW4gdGhlIG1vZGVsXG4gICAgICAgIHRoaXMuX21vZGVsLmNlbGxzW2ldID0gY29kZTtcbiAgICAgICAgdGhpcy5fbW9kZWwuY2VsbHNbaSArIFJFTkRFUl9NT0RFTF9CR19PRkZTRVRdID0gdGhpcy5fd29ya0NlbGwuYmc7XG4gICAgICAgIHRoaXMuX21vZGVsLmNlbGxzW2kgKyBSRU5ERVJfTU9ERUxfRkdfT0ZGU0VUXSA9IHRoaXMuX3dvcmtDZWxsLmZnO1xuXG4gICAgICAgIHRoaXMuX2dseXBoUmVuZGVyZXIudXBkYXRlQ2VsbCh4LCB5LCBjb2RlLCB0aGlzLl93b3JrQ2VsbC5iZywgdGhpcy5fd29ya0NlbGwuZmcsIGNoYXJzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fcmVjdGFuZ2xlUmVuZGVyZXIudXBkYXRlQmFja2dyb3VuZHModGhpcy5fbW9kZWwpO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlU2VsZWN0aW9uTW9kZWwoc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0sIGVuZDogW251bWJlciwgbnVtYmVyXSk6IHZvaWQge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fdGVybWluYWw7XG5cbiAgICAvLyBTZWxlY3Rpb24gZG9lcyBub3QgZXhpc3RcbiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQgfHwgKHN0YXJ0WzBdID09PSBlbmRbMF0gJiYgc3RhcnRbMV0gPT09IGVuZFsxXSkpIHtcbiAgICAgIHRoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVHJhbnNsYXRlIGZyb20gYnVmZmVyIHBvc2l0aW9uIHRvIHZpZXdwb3J0IHBvc2l0aW9uXG4gICAgY29uc3Qgdmlld3BvcnRTdGFydFJvdyA9IHN0YXJ0WzFdIC0gdGVybWluYWwuYnVmZmVyLnZpZXdwb3J0WTtcbiAgICBjb25zdCB2aWV3cG9ydEVuZFJvdyA9IGVuZFsxXSAtIHRlcm1pbmFsLmJ1ZmZlci52aWV3cG9ydFk7XG4gICAgY29uc3Qgdmlld3BvcnRDYXBwZWRTdGFydFJvdyA9IE1hdGgubWF4KHZpZXdwb3J0U3RhcnRSb3csIDApO1xuICAgIGNvbnN0IHZpZXdwb3J0Q2FwcGVkRW5kUm93ID0gTWF0aC5taW4odmlld3BvcnRFbmRSb3csIHRlcm1pbmFsLnJvd3MgLSAxKTtcblxuICAgIC8vIE5vIG5lZWQgdG8gZHJhdyB0aGUgc2VsZWN0aW9uXG4gICAgaWYgKHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPj0gdGVybWluYWwucm93cyB8fCB2aWV3cG9ydENhcHBlZEVuZFJvdyA8IDApIHtcbiAgICAgIHRoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uLmhhc1NlbGVjdGlvbiA9IHRydWU7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0U3RhcnRSb3cgPSB2aWV3cG9ydFN0YXJ0Um93O1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbi52aWV3cG9ydEVuZFJvdyA9IHZpZXdwb3J0RW5kUm93O1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZFN0YXJ0Um93ID0gdmlld3BvcnRDYXBwZWRTdGFydFJvdztcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRFbmRSb3cgPSB2aWV3cG9ydENhcHBlZEVuZFJvdztcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb24uc3RhcnRDb2wgPSBzdGFydFswXTtcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb24uZW5kQ29sID0gZW5kWzBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlY2FsY3VsYXRlcyB0aGUgY2hhcmFjdGVyIGFuZCBjYW52YXMgZGltZW5zaW9ucy5cbiAgICovXG4gIHByaXZhdGUgX3VwZGF0ZURpbWVuc2lvbnMoKTogdm9pZCB7XG4gICAgLy8gVE9ETzogQWNxdWlyZSBDaGFyU2l6ZVNlcnZpY2UgcHJvcGVybHlcblxuICAgIC8vIFBlcmZvcm0gYSBuZXcgbWVhc3VyZSBpZiB0aGUgQ2hhck1lYXN1cmUgZGltZW5zaW9ucyBhcmUgbm90IHlldCBhdmFpbGFibGVcbiAgICBpZiAoISg8YW55PnRoaXMuX2NvcmUpLl9jaGFyU2l6ZVNlcnZpY2Uud2lkdGggfHwgISg8YW55PnRoaXMuX2NvcmUpLl9jaGFyU2l6ZVNlcnZpY2UuaGVpZ2h0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBzY2FsZWQgY2hhcmFjdGVyIHdpZHRoLiBXaWR0aCBpcyBmbG9vcmVkIGFzIGl0IG11c3QgYmVcbiAgICAvLyBkcmF3biB0byBhbiBpbnRlZ2VyIGdyaWQgaW4gb3JkZXIgZm9yIHRoZSBDaGFyQXRsYXMgXCJzdGFtcHNcIiB0byBub3QgYmVcbiAgICAvLyBibHVycnkuIFdoZW4gdGV4dCBpcyBkcmF3biB0byB0aGUgZ3JpZCBub3QgdXNpbmcgdGhlIENoYXJBdGxhcywgaXQgaXNcbiAgICAvLyBjbGlwcGVkIHRvIGVuc3VyZSB0aGVyZSBpcyBubyBvdmVybGFwIHdpdGggdGhlIG5leHQgY2VsbC5cblxuICAgIC8vIE5PVEU6IGNlaWwgZml4ZXMgc29tZXRpbWUsIGZsb29yIGRvZXMgb3RoZXJzIDpzXG5cbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoID0gTWF0aC5mbG9vcigoPGFueT50aGlzLl9jb3JlKS5fY2hhclNpemVTZXJ2aWNlLndpZHRoICogdGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHNjYWxlZCBjaGFyYWN0ZXIgaGVpZ2h0LiBIZWlnaHQgaXMgY2VpbGVkIGluIGNhc2VcbiAgICAvLyBkZXZpY2VQaXhlbFJhdGlvIGlzIGEgZmxvYXRpbmcgcG9pbnQgbnVtYmVyIGluIG9yZGVyIHRvIGVuc3VyZSB0aGVyZSBpc1xuICAgIC8vIGVub3VnaCBzcGFjZSB0byBkcmF3IHRoZSBjaGFyYWN0ZXIgdG8gdGhlIGNlbGwuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQgPSBNYXRoLmNlaWwoKDxhbnk+dGhpcy5fY29yZSkuX2NoYXJTaXplU2VydmljZS5oZWlnaHQgKiB0aGlzLl9kZXZpY2VQaXhlbFJhdGlvKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGVkIGNlbGwgaGVpZ2h0LCBpZiBsaW5lSGVpZ2h0IGlzIG5vdCAxIHRoZW4gdGhlIHZhbHVlXG4gICAgLy8gd2lsbCBiZSBmbG9vcmVkIGJlY2F1c2Ugc2luY2UgbGluZUhlaWdodCBjYW4gbmV2ZXIgYmUgbG93ZXIgdGhlbiAxLCB0aGVyZVxuICAgIC8vIGlzIGEgZ3VhcmVudGVlIHRoYXQgdGhlIHNjYWxlZCBsaW5lIGhlaWdodCB3aWxsIGFsd2F5cyBiZSBsYXJnZXIgdGhhblxuICAgIC8vIHNjYWxlZCBjaGFyIGhlaWdodC5cbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCA9IE1hdGguZmxvb3IodGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQgKiB0aGlzLl90ZXJtaW5hbC5nZXRPcHRpb24oJ2xpbmVIZWlnaHQnKSk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHkgY29vcmRpbmF0ZSB3aXRoaW4gYSBjZWxsIHRoYXQgdGV4dCBzaG91bGQgZHJhdyBmcm9tIGluXG4gICAgLy8gb3JkZXIgdG8gZHJhdyBpbiB0aGUgY2VudGVyIG9mIGEgY2VsbC5cbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhclRvcCA9IHRoaXMuX3Rlcm1pbmFsLmdldE9wdGlvbignbGluZUhlaWdodCcpID09PSAxID8gMCA6IE1hdGgucm91bmQoKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0IC0gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQpIC8gMik7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHNjYWxlZCBjZWxsIHdpZHRoLCB0YWtpbmcgdGhlIGxldHRlclNwYWNpbmcgaW50byBhY2NvdW50LlxuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoICsgTWF0aC5yb3VuZCh0aGlzLl90ZXJtaW5hbC5nZXRPcHRpb24oJ2xldHRlclNwYWNpbmcnKSk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHggY29vcmRpbmF0ZSB3aXRoIGEgY2VsbCB0aGF0IHRleHQgc2hvdWxkIGRyYXcgZnJvbSBpblxuICAgIC8vIG9yZGVyIHRvIGRyYXcgaW4gdGhlIGNlbnRlciBvZiBhIGNlbGwuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJMZWZ0ID0gTWF0aC5mbG9vcih0aGlzLl90ZXJtaW5hbC5nZXRPcHRpb24oJ2xldHRlclNwYWNpbmcnKSAvIDIpO1xuXG4gICAgLy8gUmVjYWxjdWxhdGUgdGhlIGNhbnZhcyBkaW1lbnNpb25zOyBzY2FsZWQqIGRlZmluZSB0aGUgYWN0dWFsIG51bWJlciBvZlxuICAgIC8vIHBpeGVsIGluIHRoZSBjYW52YXNcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0ID0gdGhpcy5fdGVybWluYWwucm93cyAqIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0O1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aCA9IHRoaXMuX3Rlcm1pbmFsLmNvbHMgKiB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoO1xuXG4gICAgLy8gVGhlIHRoZSBzaXplIG9mIHRoZSBjYW52YXMgb24gdGhlIHBhZ2UuIEl0J3MgdmVyeSBpbXBvcnRhbnQgdGhhdCB0aGlzXG4gICAgLy8gcm91bmRzIHRvIG5lYXJlc3QgaW50ZWdlciBhbmQgbm90IGNlaWxzIGFzIGJyb3dzZXJzIG9mdGVuIHNldFxuICAgIC8vIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIGFzIHNvbWV0aGluZyBsaWtlIDEuMTAwMDAwMDIzODQxODU4LCB3aGVuIGl0J3NcbiAgICAvLyBhY3R1YWxseSAxLjEuIENlaWxpbmcgY2F1c2VzIGJsdXJyaW5lc3MgYXMgdGhlIGJhY2tpbmcgY2FudmFzIGltYWdlIGlzIDFcbiAgICAvLyBwaXhlbCB0b28gbGFyZ2UgZm9yIHRoZSBjYW52YXMgZWxlbWVudCBzaXplLlxuICAgIHRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQgPSBNYXRoLnJvdW5kKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQgLyB0aGlzLl9kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGggPSBNYXRoLnJvdW5kKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aCAvIHRoaXMuX2RldmljZVBpeGVsUmF0aW8pO1xuXG4gICAgLy8gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodCA9IHRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQgKiBkZXZpY2VQaXhlbFJhdGlvO1xuICAgIC8vIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aCA9IHRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aCAqIGRldmljZVBpeGVsUmF0aW87XG5cbiAgICAvLyBHZXQgdGhlIF9hY3R1YWxfIGRpbWVuc2lvbnMgb2YgYW4gaW5kaXZpZHVhbCBjZWxsLiBUaGlzIG5lZWRzIHRvIGJlXG4gICAgLy8gZGVyaXZlZCBmcm9tIHRoZSBjYW52YXNXaWR0aC9IZWlnaHQgY2FsY3VsYXRlZCBhYm92ZSB3aGljaCB0YWtlcyBpbnRvXG4gICAgLy8gYWNjb3VudCB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpby4gQ2hhck1lYXN1cmUud2lkdGgvaGVpZ2h0IGJ5IGl0c2VsZiBpc1xuICAgIC8vIGluc3VmZmljaWVudCB3aGVuIHRoZSBwYWdlIGlzIG5vdCBhdCAxMDAlIHpvb20gbGV2ZWwgYXMgQ2hhck1lYXN1cmUgaXNcbiAgICAvLyBtZWFzdXJlZCBpbiBDU1MgcGl4ZWxzLCBidXQgdGhlIGFjdHVhbCBjaGFyIHNpemUgb24gdGhlIGNhbnZhcyBjYW5cbiAgICAvLyBkaWZmZXIuXG4gICAgLy8gdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQgPSB0aGlzLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0IC8gdGhpcy5fdGVybWluYWwucm93cztcbiAgICAvLyB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoID0gdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoIC8gdGhpcy5fdGVybWluYWwuY29scztcblxuICAgIC8vIFRoaXMgZml4ZXMgMTEwJSBhbmQgMTI1JSwgbm90IDE1MCUgb3IgMTc1JSB0aG91Z2hcbiAgICB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCA9IHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0IC8gdGhpcy5fZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoID0gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCAvIHRoaXMuX2RldmljZVBpeGVsUmF0aW87XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuLyoqXG4gKiBBIG1hdHJpeCB0aGF0IHdoZW4gbXVsdGlwbGllcyB3aWxsIHRyYW5zbGF0ZSAwLTEgY29vcmRpbmF0ZXMgKGxlZnQgdG8gcmlnaHQsXG4gKiB0b3AgdG8gYm90dG9tKSB0byBjbGlwIHNwYWNlLlxuICovXG5leHBvcnQgY29uc3QgUFJPSkVDVElPTl9NQVRSSVggPSBuZXcgRmxvYXQzMkFycmF5KFtcbiAgMiwgMCwgMCwgMCxcbiAgMCwgLTIsIDAsIDAsXG4gIDAsIDAsIDEsIDAsXG4gIC0xLCAxLCAwLCAxXG5dKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2dyYW0oZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdmVydGV4U291cmNlOiBzdHJpbmcsIGZyYWdtZW50U291cmNlOiBzdHJpbmcpOiBXZWJHTFByb2dyYW0gfCB1bmRlZmluZWQge1xuICBjb25zdCBwcm9ncmFtID0gdGhyb3dJZkZhbHN5KGdsLmNyZWF0ZVByb2dyYW0oKSk7XG4gIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB0aHJvd0lmRmFsc3koY3JlYXRlU2hhZGVyKGdsLCBnbC5WRVJURVhfU0hBREVSLCB2ZXJ0ZXhTb3VyY2UpKSk7XG4gIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB0aHJvd0lmRmFsc3koY3JlYXRlU2hhZGVyKGdsLCBnbC5GUkFHTUVOVF9TSEFERVIsIGZyYWdtZW50U291cmNlKSkpO1xuICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcbiAgY29uc3Qgc3VjY2VzcyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpO1xuICBpZiAoc3VjY2Vzcykge1xuICAgIHJldHVybiBwcm9ncmFtO1xuICB9XG5cbiAgY29uc29sZS5lcnJvcihnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKSk7XG4gIGdsLmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTaGFkZXIoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdHlwZTogbnVtYmVyLCBzb3VyY2U6IHN0cmluZyk6IFdlYkdMU2hhZGVyIHwgdW5kZWZpbmVkIHtcbiAgY29uc3Qgc2hhZGVyID0gdGhyb3dJZkZhbHN5KGdsLmNyZWF0ZVNoYWRlcih0eXBlKSk7XG4gIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNvdXJjZSk7XG4gIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcbiAgY29uc3Qgc3VjY2VzcyA9IGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKTtcbiAgaWYgKHN1Y2Nlc3MpIHtcbiAgICByZXR1cm4gc2hhZGVyO1xuICB9XG5cbiAgY29uc29sZS5lcnJvcihnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikpO1xuICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZEZsb2F0MzJBcnJheShzb3VyY2U6IEZsb2F0MzJBcnJheSwgbWF4OiBudW1iZXIpOiBGbG9hdDMyQXJyYXkge1xuICBjb25zdCBuZXdMZW5ndGggPSBNYXRoLm1pbihzb3VyY2UubGVuZ3RoICogMiwgbWF4KTtcbiAgY29uc3QgbmV3QXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KG5ld0xlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc291cmNlLmxlbmd0aDsgaSsrKSB7XG4gICAgbmV3QXJyYXlbaV0gPSBzb3VyY2VbaV07XG4gIH1cbiAgcmV0dXJuIG5ld0FycmF5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGhyb3dJZkZhbHN5PFQ+KHZhbHVlOiBUIHwgdW5kZWZpbmVkIHwgbnVsbCk6IFQge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd2YWx1ZSBtdXN0IG5vdCBiZSBmYWxzeScpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgZ2VuZXJhdGVDb25maWcsIGNvbmZpZ0VxdWFscyB9IGZyb20gJy4vQ2hhckF0bGFzVXRpbHMnO1xuaW1wb3J0IHsgV2ViZ2xDaGFyQXRsYXMgfSBmcm9tICcuL1dlYmdsQ2hhckF0bGFzJztcbmltcG9ydCB7IElDaGFyQXRsYXNDb25maWcgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IFRlcm1pbmFsIH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5cbmludGVyZmFjZSBJQ2hhckF0bGFzQ2FjaGVFbnRyeSB7XG4gIGF0bGFzOiBXZWJnbENoYXJBdGxhcztcbiAgY29uZmlnOiBJQ2hhckF0bGFzQ29uZmlnO1xuICAvLyBOLkIuIFRoaXMgaW1wbGVtZW50YXRpb24gcG90ZW50aWFsbHkgaG9sZHMgb250byBjb3BpZXMgb2YgdGhlIHRlcm1pbmFsIGZvcmV2ZXIsIHNvXG4gIC8vIHRoaXMgbWF5IGNhdXNlIG1lbW9yeSBsZWFrcy5cbiAgb3duZWRCeTogVGVybWluYWxbXTtcbn1cblxuY29uc3QgY2hhckF0bGFzQ2FjaGU6IElDaGFyQXRsYXNDYWNoZUVudHJ5W10gPSBbXTtcblxuLyoqXG4gKiBBY3F1aXJlcyBhIGNoYXIgYXRsYXMsIGVpdGhlciBnZW5lcmF0aW5nIGEgbmV3IG9uZSBvciByZXR1cm5pbmcgYW4gZXhpc3RpbmdcbiAqIG9uZSB0aGF0IGlzIGluIHVzZSBieSBhbm90aGVyIHRlcm1pbmFsLlxuICogQHBhcmFtIHRlcm1pbmFsIFRoZSB0ZXJtaW5hbC5cbiAqIEBwYXJhbSBjb2xvcnMgVGhlIGNvbG9ycyB0byB1c2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhY3F1aXJlQ2hhckF0bGFzKFxuICB0ZXJtaW5hbDogVGVybWluYWwsXG4gIGNvbG9yczogSUNvbG9yU2V0LFxuICBzY2FsZWRDaGFyV2lkdGg6IG51bWJlcixcbiAgc2NhbGVkQ2hhckhlaWdodDogbnVtYmVyXG4pOiBXZWJnbENoYXJBdGxhcyB7XG4gIGNvbnN0IG5ld0NvbmZpZyA9IGdlbmVyYXRlQ29uZmlnKHNjYWxlZENoYXJXaWR0aCwgc2NhbGVkQ2hhckhlaWdodCwgdGVybWluYWwsIGNvbG9ycyk7XG5cbiAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSB0ZXJtaW5hbCBhbHJlYWR5IG93bnMgdGhpcyBjb25maWdcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyQXRsYXNDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGVudHJ5ID0gY2hhckF0bGFzQ2FjaGVbaV07XG4gICAgY29uc3Qgb3duZWRCeUluZGV4ID0gZW50cnkub3duZWRCeS5pbmRleE9mKHRlcm1pbmFsKTtcbiAgICBpZiAob3duZWRCeUluZGV4ID49IDApIHtcbiAgICAgIGlmIChjb25maWdFcXVhbHMoZW50cnkuY29uZmlnLCBuZXdDb25maWcpKSB7XG4gICAgICAgIHJldHVybiBlbnRyeS5hdGxhcztcbiAgICAgIH1cbiAgICAgIC8vIFRoZSBjb25maWdzIGRpZmZlciwgcmVsZWFzZSB0aGUgdGVybWluYWwgZnJvbSB0aGUgZW50cnlcbiAgICAgIGlmIChlbnRyeS5vd25lZEJ5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBlbnRyeS5hdGxhcy5kaXNwb3NlKCk7XG4gICAgICAgIGNoYXJBdGxhc0NhY2hlLnNwbGljZShpLCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVudHJ5Lm93bmVkQnkuc3BsaWNlKG93bmVkQnlJbmRleCwgMSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBUcnkgbWF0Y2ggYSBjaGFyIGF0bGFzIGZyb20gdGhlIGNhY2hlXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckF0bGFzQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBlbnRyeSA9IGNoYXJBdGxhc0NhY2hlW2ldO1xuICAgIGlmIChjb25maWdFcXVhbHMoZW50cnkuY29uZmlnLCBuZXdDb25maWcpKSB7XG4gICAgICAvLyBBZGQgdGhlIHRlcm1pbmFsIHRvIHRoZSBjYWNoZSBlbnRyeSBhbmQgcmV0dXJuXG4gICAgICBlbnRyeS5vd25lZEJ5LnB1c2godGVybWluYWwpO1xuICAgICAgcmV0dXJuIGVudHJ5LmF0bGFzO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG5ld0VudHJ5OiBJQ2hhckF0bGFzQ2FjaGVFbnRyeSA9IHtcbiAgICBhdGxhczogbmV3IFdlYmdsQ2hhckF0bGFzKGRvY3VtZW50LCBuZXdDb25maWcpLFxuICAgIGNvbmZpZzogbmV3Q29uZmlnLFxuICAgIG93bmVkQnk6IFt0ZXJtaW5hbF1cbiAgfTtcbiAgY2hhckF0bGFzQ2FjaGUucHVzaChuZXdFbnRyeSk7XG4gIHJldHVybiBuZXdFbnRyeS5hdGxhcztcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGEgdGVybWluYWwgcmVmZXJlbmNlIGZyb20gdGhlIGNhY2hlLCBhbGxvd2luZyBpdHMgbWVtb3J5IHRvIGJlIGZyZWVkLlxuICogQHBhcmFtIHRlcm1pbmFsIFRoZSB0ZXJtaW5hbCB0byByZW1vdmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVUZXJtaW5hbEZyb21DYWNoZSh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyQXRsYXNDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGluZGV4ID0gY2hhckF0bGFzQ2FjaGVbaV0ub3duZWRCeS5pbmRleE9mKHRlcm1pbmFsKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBpZiAoY2hhckF0bGFzQ2FjaGVbaV0ub3duZWRCeS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBjYWNoZSBlbnRyeSBpZiBpdCdzIHRoZSBvbmx5IHRlcm1pbmFsXG4gICAgICAgIGNoYXJBdGxhc0NhY2hlW2ldLmF0bGFzLmRpc3Bvc2UoKTtcbiAgICAgICAgY2hhckF0bGFzQ2FjaGUuc3BsaWNlKGksIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSByZWZlcmVuY2UgZnJvbSB0aGUgY2FjaGUgZW50cnlcbiAgICAgICAgY2hhckF0bGFzQ2FjaGVbaV0ub3duZWRCeS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaGFyQXRsYXNDb25maWcgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IEF0dHJpYnV0ZXMgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBUZXJtaW5hbCwgRm9udFdlaWdodCB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IElDb2xvclNldCwgSUNvbG9yIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5cbmNvbnN0IE5VTExfQ09MT1I6IElDb2xvciA9IHtcbiAgY3NzOiAnJyxcbiAgcmdiYTogMFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQ29uZmlnKHNjYWxlZENoYXJXaWR0aDogbnVtYmVyLCBzY2FsZWRDaGFySGVpZ2h0OiBudW1iZXIsIHRlcm1pbmFsOiBUZXJtaW5hbCwgY29sb3JzOiBJQ29sb3JTZXQpOiBJQ2hhckF0bGFzQ29uZmlnIHtcbiAgLy8gbnVsbCBvdXQgc29tZSBmaWVsZHMgdGhhdCBkb24ndCBtYXR0ZXJcbiAgY29uc3QgY2xvbmVkQ29sb3JzOiBJQ29sb3JTZXQgPSB7XG4gICAgZm9yZWdyb3VuZDogY29sb3JzLmZvcmVncm91bmQsXG4gICAgYmFja2dyb3VuZDogY29sb3JzLmJhY2tncm91bmQsXG4gICAgY3Vyc29yOiBOVUxMX0NPTE9SLFxuICAgIGN1cnNvckFjY2VudDogTlVMTF9DT0xPUixcbiAgICBzZWxlY3Rpb246IE5VTExfQ09MT1IsXG4gICAgc2VsZWN0aW9uT3BhcXVlOiBOVUxMX0NPTE9SLFxuICAgIC8vIEZvciB0aGUgc3RhdGljIGNoYXIgYXRsYXMsIHdlIG9ubHkgdXNlIHRoZSBmaXJzdCAxNiBjb2xvcnMsIGJ1dCB3ZSBuZWVkIGFsbCAyNTYgZm9yIHRoZVxuICAgIC8vIGR5bmFtaWMgY2hhcmFjdGVyIGF0bGFzLlxuICAgIGFuc2k6IGNvbG9ycy5hbnNpLnNsaWNlKCksXG4gICAgY29udHJhc3RDYWNoZTogY29sb3JzLmNvbnRyYXN0Q2FjaGVcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBkZXZpY2VQaXhlbFJhdGlvOiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxcbiAgICBzY2FsZWRDaGFyV2lkdGgsXG4gICAgc2NhbGVkQ2hhckhlaWdodCxcbiAgICBmb250RmFtaWx5OiB0ZXJtaW5hbC5nZXRPcHRpb24oJ2ZvbnRGYW1pbHknKSxcbiAgICBmb250U2l6ZTogdGVybWluYWwuZ2V0T3B0aW9uKCdmb250U2l6ZScpLFxuICAgIGZvbnRXZWlnaHQ6IHRlcm1pbmFsLmdldE9wdGlvbignZm9udFdlaWdodCcpIGFzIEZvbnRXZWlnaHQsXG4gICAgZm9udFdlaWdodEJvbGQ6IHRlcm1pbmFsLmdldE9wdGlvbignZm9udFdlaWdodEJvbGQnKSBhcyBGb250V2VpZ2h0LFxuICAgIGFsbG93VHJhbnNwYXJlbmN5OiB0ZXJtaW5hbC5nZXRPcHRpb24oJ2FsbG93VHJhbnNwYXJlbmN5JyksXG4gICAgZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnM6IHRlcm1pbmFsLmdldE9wdGlvbignZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMnKSxcbiAgICBtaW5pbXVtQ29udHJhc3RSYXRpbzogdGVybWluYWwuZ2V0T3B0aW9uKCdtaW5pbXVtQ29udHJhc3RSYXRpbycpLFxuICAgIGNvbG9yczogY2xvbmVkQ29sb3JzXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWdFcXVhbHMoYTogSUNoYXJBdGxhc0NvbmZpZywgYjogSUNoYXJBdGxhc0NvbmZpZyk6IGJvb2xlYW4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGEuY29sb3JzLmFuc2kubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoYS5jb2xvcnMuYW5zaVtpXS5yZ2JhICE9PSBiLmNvbG9ycy5hbnNpW2ldLnJnYmEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGEuZGV2aWNlUGl4ZWxSYXRpbyA9PT0gYi5kZXZpY2VQaXhlbFJhdGlvICYmXG4gICAgICBhLmZvbnRGYW1pbHkgPT09IGIuZm9udEZhbWlseSAmJlxuICAgICAgYS5mb250U2l6ZSA9PT0gYi5mb250U2l6ZSAmJlxuICAgICAgYS5mb250V2VpZ2h0ID09PSBiLmZvbnRXZWlnaHQgJiZcbiAgICAgIGEuZm9udFdlaWdodEJvbGQgPT09IGIuZm9udFdlaWdodEJvbGQgJiZcbiAgICAgIGEuYWxsb3dUcmFuc3BhcmVuY3kgPT09IGIuYWxsb3dUcmFuc3BhcmVuY3kgJiZcbiAgICAgIGEuc2NhbGVkQ2hhcldpZHRoID09PSBiLnNjYWxlZENoYXJXaWR0aCAmJlxuICAgICAgYS5zY2FsZWRDaGFySGVpZ2h0ID09PSBiLnNjYWxlZENoYXJIZWlnaHQgJiZcbiAgICAgIGEuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMgPT09IGIuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMgJiZcbiAgICAgIGEubWluaW11bUNvbnRyYXN0UmF0aW8gPT09IGIubWluaW11bUNvbnRyYXN0UmF0aW8gJiZcbiAgICAgIGEuY29sb3JzLmZvcmVncm91bmQgPT09IGIuY29sb3JzLmZvcmVncm91bmQgJiZcbiAgICAgIGEuY29sb3JzLmJhY2tncm91bmQgPT09IGIuY29sb3JzLmJhY2tncm91bmQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpczI1NkNvbG9yKGNvbG9yQ29kZTogbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiAoY29sb3JDb2RlICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9QMTYgfHwgKGNvbG9yQ29kZSAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUDI1Njtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNoYXJBdGxhc0NvbmZpZyB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgRElNX09QQUNJVFkgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBJUmFzdGVyaXplZEdseXBoLCBJQm91bmRpbmdCb3gsIElSYXN0ZXJpemVkR2x5cGhTZXQgfSBmcm9tICcuLi9UeXBlcyc7XG5pbXBvcnQgeyBERUZBVUxUX0NPTE9SLCBBdHRyaWJ1dGVzIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgdGhyb3dJZkZhbHN5IH0gZnJvbSAnLi4vV2ViZ2xVdGlscyc7XG5pbXBvcnQgeyBJQ29sb3IgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5pbXBvcnQgeyBjaGFubmVscywgcmdiYSB9IGZyb20gJ2Jyb3dzZXIvQ29sb3InO1xuXG4vLyBJbiBwcmFjdGljZSB3ZSdyZSBwcm9iYWJseSBuZXZlciBnb2luZyB0byBleGhhdXN0IGEgdGV4dHVyZSB0aGlzIGxhcmdlLiBGb3IgZGVidWdnaW5nIHB1cnBvc2VzLFxuLy8gaG93ZXZlciwgaXQgY2FuIGJlIHVzZWZ1bCB0byBzZXQgdGhpcyB0byBhIHJlYWxseSB0aW55IHZhbHVlLCB0byB2ZXJpZnkgdGhhdCBMUlUgZXZpY3Rpb24gd29ya3MuXG5jb25zdCBURVhUVVJFX1dJRFRIID0gMTAyNDtcbmNvbnN0IFRFWFRVUkVfSEVJR0hUID0gMTAyNDtcblxuLyoqXG4gKiBUaGUgYW1vdW50IG9mIHRoZSB0ZXh0dXJlIHRvIGJlIGZpbGxlZCBiZWZvcmUgdGhyb3dpbmcgaXQgYXdheSBhbmQgc3RhcnRpbmdcbiAqIGFnYWluLiBTaW5jZSB0aGUgdGhyb3cgYXdheSBhbmQgaW5kaXZpZHVhbCBnbHlwaCBkcmF3cyBkb24ndCBjb3N0IHRvbyBtdWNoLFxuICogdGhpcyBwcmV2ZW50IGp1Z2dsaW5nIG11bHRpcGxlIHRleHR1cmVzIGluIHRoZSBHTCBjb250ZXh0LlxuICovXG5jb25zdCBURVhUVVJFX0NBUEFDSVRZID0gTWF0aC5mbG9vcihURVhUVVJFX0hFSUdIVCAqIDAuOCk7XG5cbmNvbnN0IFRSQU5TUEFSRU5UX0NPTE9SID0ge1xuICBjc3M6ICdyZ2JhKDAsIDAsIDAsIDApJyxcbiAgcmdiYTogMFxufTtcblxuLyoqXG4gKiBBIHNoYXJlZCBvYmplY3Qgd2hpY2ggaXMgdXNlZCB0byBkcmF3IG5vdGhpbmcgZm9yIGEgcGFydGljdWxhciBjZWxsLlxuICovXG5jb25zdCBOVUxMX1JBU1RFUklaRURfR0xZUEg6IElSYXN0ZXJpemVkR2x5cGggPSB7XG4gIG9mZnNldDogeyB4OiAwLCB5OiAwIH0sXG4gIHRleHR1cmVQb3NpdGlvbjogeyB4OiAwLCB5OiAwIH0sXG4gIHRleHR1cmVQb3NpdGlvbkNsaXBTcGFjZTogeyB4OiAwLCB5OiAwIH0sXG4gIHNpemU6IHsgeDogMCwgeTogMCB9LFxuICBzaXplQ2xpcFNwYWNlOiB7IHg6IDAsIHk6IDAgfVxufTtcblxuY29uc3QgVE1QX0NBTlZBU19HTFlQSF9QQURESU5HID0gMjtcblxuZXhwb3J0IGNsYXNzIFdlYmdsQ2hhckF0bGFzIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuICBwcml2YXRlIF9kaWRXYXJtVXA6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcml2YXRlIF9jYWNoZU1hcDogeyBbY29kZTogbnVtYmVyXTogSVJhc3Rlcml6ZWRHbHlwaFNldCB9ID0ge307XG4gIHByaXZhdGUgX2NhY2hlTWFwQ29tYmluZWQ6IHsgW2NoYXJzOiBzdHJpbmddOiBJUmFzdGVyaXplZEdseXBoU2V0IH0gPSB7fTtcblxuICAvLyBUaGUgdGV4dHVyZSB0aGF0IHRoZSBhdGxhcyBpcyBkcmF3biB0b1xuICBwdWJsaWMgY2FjaGVDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIF9jYWNoZUN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gIHByaXZhdGUgX3RtcENhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIC8vIEEgdGVtcG9yYXJ5IGNvbnRleHQgdGhhdCBnbHlwaHMgYXJlIGRyYXduIHRvIGJlZm9yZSBiZWluZyB0cmFuc2ZlcmVkIHRvIHRoZSBhdGxhcy5cbiAgcHJpdmF0ZSBfdG1wQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgLy8gU2luY2UgZ2x5cGhzIGFyZSBleHBlY3RlZCB0byBiZSBhcm91bmQgdGhlIHNhbWUgaGVpZ2h0LCB0aGUgcGFja2luZ1xuICAvLyBzdHJhdGVneSB1c2VkIGl0IHRvIGZpbGwgYSByb3cgd2l0aCBnbHlwaHMgd2hpbGUga2VlcGluZyB0cmFjayBvZiB0aGVcbiAgLy8gdGFsbGVzdCBnbHlwaCBpbiB0aGUgcm93LiBPbmNlIHRoZSByb3cgaXMgZnVsbCBhIG5ldyByb3cgaXMgc3RhcnRlZCBhdFxuICAvLyAoMCxsYXN0Um93K2xhc3RSb3dUYWxsZXN0R2x5cGgpLlxuICBwcml2YXRlIF9jdXJyZW50Um93WTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfY3VycmVudFJvd1g6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2N1cnJlbnRSb3dIZWlnaHQ6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIGhhc0NhbnZhc0NoYW5nZWQgPSBmYWxzZTtcblxuICBwcml2YXRlIF93b3JrQm91bmRpbmdCb3g6IElCb3VuZGluZ0JveCA9IHsgdG9wOiAwLCBsZWZ0OiAwLCBib3R0b206IDAsIHJpZ2h0OiAwIH07XG4gIHByaXZhdGUgX3dvcmtBdHRyaWJ1dGVEYXRhOiBBdHRyaWJ1dGVEYXRhID0gbmV3IEF0dHJpYnV0ZURhdGEoKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBkb2N1bWVudDogRG9jdW1lbnQsXG4gICAgcHJpdmF0ZSBfY29uZmlnOiBJQ2hhckF0bGFzQ29uZmlnXG4gICkge1xuICAgIHRoaXMuY2FjaGVDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB0aGlzLmNhY2hlQ2FudmFzLndpZHRoID0gVEVYVFVSRV9XSURUSDtcbiAgICB0aGlzLmNhY2hlQ2FudmFzLmhlaWdodCA9IFRFWFRVUkVfSEVJR0hUO1xuICAgIC8vIFRoZSBjYW52YXMgbmVlZHMgYWxwaGEgYmVjYXVzZSB3ZSB1c2UgY2xlYXJDb2xvciB0byBjb252ZXJ0IHRoZSBiYWNrZ3JvdW5kIGNvbG9yIHRvIGFscGhhLlxuICAgIC8vIEl0IG1pZ2h0IGFsc28gY29udGFpbiBzb21lIGNoYXJhY3RlcnMgd2l0aCB0cmFuc3BhcmVudCBiYWNrZ3JvdW5kcyBpZiBhbGxvd1RyYW5zcGFyZW5jeSBpc1xuICAgIC8vIHNldC5cbiAgICB0aGlzLl9jYWNoZUN0eCA9IHRocm93SWZGYWxzeSh0aGlzLmNhY2hlQ2FudmFzLmdldENvbnRleHQoJzJkJywge2FscGhhOiB0cnVlfSkpO1xuXG4gICAgdGhpcy5fdG1wQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdGhpcy5fdG1wQ2FudmFzLndpZHRoID0gdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCAqIDIgKyBUTVBfQ0FOVkFTX0dMWVBIX1BBRERJTkcgKiAyO1xuICAgIHRoaXMuX3RtcENhbnZhcy5oZWlnaHQgPSB0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCArIFRNUF9DQU5WQVNfR0xZUEhfUEFERElORyAqIDI7XG4gICAgdGhpcy5fdG1wQ3R4ID0gdGhyb3dJZkZhbHN5KHRoaXMuX3RtcENhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHthbHBoYTogdGhpcy5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5fSkpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2FjaGVDYW52YXMucGFyZW50RWxlbWVudCkge1xuICAgICAgdGhpcy5jYWNoZUNhbnZhcy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuY2FjaGVDYW52YXMpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB3YXJtVXAoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9kaWRXYXJtVXApIHtcbiAgICAgIHRoaXMuX2RvV2FybVVwKCk7XG4gICAgICB0aGlzLl9kaWRXYXJtVXAgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfZG9XYXJtVXAoKTogdm9pZCB7XG4gICAgLy8gUHJlLWZpbGwgd2l0aCBBU0NJSSAzMy0xMjZcbiAgICBmb3IgKGxldCBpID0gMzM7IGkgPCAxMjY7IGkrKykge1xuICAgICAgY29uc3QgcmFzdGVyaXplZEdseXBoID0gdGhpcy5fZHJhd1RvQ2FjaGUoaSwgREVGQVVMVF9DT0xPUiwgREVGQVVMVF9DT0xPUik7XG4gICAgICB0aGlzLl9jYWNoZU1hcFtpXSA9IHtcbiAgICAgICAgW0RFRkFVTFRfQ09MT1JdOiB7XG4gICAgICAgICAgW0RFRkFVTFRfQ09MT1JdOiByYXN0ZXJpemVkR2x5cGhcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYmVnaW5GcmFtZSgpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5fY3VycmVudFJvd1kgPiBURVhUVVJFX0NBUEFDSVRZKSB7XG4gICAgICB0aGlzLl9jYWNoZUN0eC5jbGVhclJlY3QoMCwgMCwgVEVYVFVSRV9XSURUSCwgVEVYVFVSRV9IRUlHSFQpO1xuICAgICAgdGhpcy5fY2FjaGVNYXAgPSB7fTtcbiAgICAgIHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQgPSAwO1xuICAgICAgdGhpcy5fY3VycmVudFJvd1ggPSAwO1xuICAgICAgdGhpcy5fY3VycmVudFJvd1kgPSAwO1xuICAgICAgdGhpcy5fZG9XYXJtVXAoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgZ2V0UmFzdGVyaXplZEdseXBoQ29tYmluZWRDaGFyKGNoYXJzOiBzdHJpbmcsIGJnOiBudW1iZXIsIGZnOiBudW1iZXIpOiBJUmFzdGVyaXplZEdseXBoIHtcbiAgICBsZXQgcmFzdGVyaXplZEdseXBoU2V0ID0gdGhpcy5fY2FjaGVNYXBDb21iaW5lZFtjaGFyc107XG4gICAgaWYgKCFyYXN0ZXJpemVkR2x5cGhTZXQpIHtcbiAgICAgIHJhc3Rlcml6ZWRHbHlwaFNldCA9IHt9O1xuICAgICAgdGhpcy5fY2FjaGVNYXBDb21iaW5lZFtjaGFyc10gPSByYXN0ZXJpemVkR2x5cGhTZXQ7XG4gICAgfVxuICAgIGxldCByYXN0ZXJpemVkR2x5cGg6IElSYXN0ZXJpemVkR2x5cGggfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgcmFzdGVyaXplZEdseXBoU2V0QmcgPSByYXN0ZXJpemVkR2x5cGhTZXRbYmddO1xuICAgIGlmIChyYXN0ZXJpemVkR2x5cGhTZXRCZykge1xuICAgICAgcmFzdGVyaXplZEdseXBoID0gcmFzdGVyaXplZEdseXBoU2V0QmdbZmddO1xuICAgIH1cbiAgICBpZiAoIXJhc3Rlcml6ZWRHbHlwaCkge1xuICAgICAgcmFzdGVyaXplZEdseXBoID0gdGhpcy5fZHJhd1RvQ2FjaGUoY2hhcnMsIGJnLCBmZyk7XG4gICAgICBpZiAoIXJhc3Rlcml6ZWRHbHlwaFNldFtiZ10pIHtcbiAgICAgICAgcmFzdGVyaXplZEdseXBoU2V0W2JnXSA9IHt9O1xuICAgICAgfVxuICAgICAgcmFzdGVyaXplZEdseXBoU2V0W2JnXSFbZmddID0gcmFzdGVyaXplZEdseXBoO1xuICAgIH1cbiAgICByZXR1cm4gcmFzdGVyaXplZEdseXBoO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGdseXBocyB0ZXh0dXJlIGNvb3JkcywgZHJhd2luZyB0aGUgdGV4dHVyZSBpZiBpdCdzIG5vdCBhbHJlYWR5XG4gICAqL1xuICBwdWJsaWMgZ2V0UmFzdGVyaXplZEdseXBoKGNvZGU6IG51bWJlciwgYmc6IG51bWJlciwgZmc6IG51bWJlcik6IElSYXN0ZXJpemVkR2x5cGgge1xuICAgIGxldCByYXN0ZXJpemVkR2x5cGhTZXQgPSB0aGlzLl9jYWNoZU1hcFtjb2RlXTtcbiAgICBpZiAoIXJhc3Rlcml6ZWRHbHlwaFNldCkge1xuICAgICAgcmFzdGVyaXplZEdseXBoU2V0ID0ge307XG4gICAgICB0aGlzLl9jYWNoZU1hcFtjb2RlXSA9IHJhc3Rlcml6ZWRHbHlwaFNldDtcbiAgICB9XG4gICAgbGV0IHJhc3Rlcml6ZWRHbHlwaDogSVJhc3Rlcml6ZWRHbHlwaCB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCByYXN0ZXJpemVkR2x5cGhTZXRCZyA9IHJhc3Rlcml6ZWRHbHlwaFNldFtiZ107XG4gICAgaWYgKHJhc3Rlcml6ZWRHbHlwaFNldEJnKSB7XG4gICAgICByYXN0ZXJpemVkR2x5cGggPSByYXN0ZXJpemVkR2x5cGhTZXRCZ1tmZ107XG4gICAgfVxuICAgIGlmICghcmFzdGVyaXplZEdseXBoKSB7XG4gICAgICByYXN0ZXJpemVkR2x5cGggPSB0aGlzLl9kcmF3VG9DYWNoZShjb2RlLCBiZywgZmcpO1xuICAgICAgaWYgKCFyYXN0ZXJpemVkR2x5cGhTZXRbYmddKSB7XG4gICAgICAgIHJhc3Rlcml6ZWRHbHlwaFNldFtiZ10gPSB7fTtcbiAgICAgIH1cbiAgICAgIHJhc3Rlcml6ZWRHbHlwaFNldFtiZ10hW2ZnXSA9IHJhc3Rlcml6ZWRHbHlwaDtcbiAgICB9XG4gICAgcmV0dXJuIHJhc3Rlcml6ZWRHbHlwaDtcbiAgfVxuXG4gIHByaXZhdGUgX2dldENvbG9yRnJvbUFuc2lJbmRleChpZHg6IG51bWJlcik6IElDb2xvciB7XG4gICAgaWYgKGlkeCA+PSB0aGlzLl9jb25maWcuY29sb3JzLmFuc2kubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvbG9yIGZvdW5kIGZvciBpZHggJyArIGlkeCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmFuc2lbaWR4XTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldEJhY2tncm91bmRDb2xvcihiZ0NvbG9yTW9kZTogbnVtYmVyLCBiZ0NvbG9yOiBudW1iZXIsIGludmVyc2U6IGJvb2xlYW4pOiBJQ29sb3Ige1xuICAgIGlmICh0aGlzLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3kpIHtcbiAgICAgIC8vIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIG1pZ2h0IGhhdmUgc29tZSB0cmFuc3BhcmVuY3ksIHNvIHdlIG5lZWQgdG8gcmVuZGVyIGl0IGFzIGZ1bGx5XG4gICAgICAvLyB0cmFuc3BhcmVudCBpbiB0aGUgYXRsYXMuIE90aGVyd2lzZSB3ZSdkIGVuZCB1cCBkcmF3aW5nIHRoZSB0cmFuc3BhcmVudCBiYWNrZ3JvdW5kIHR3aWNlXG4gICAgICAvLyBhcm91bmQgdGhlIGFudGktYWxpYXNlZCBlZGdlcyBvZiB0aGUgZ2x5cGgsIGFuZCBpdCB3b3VsZCBsb29rIHRvbyBkYXJrLlxuICAgICAgcmV0dXJuIFRSQU5TUEFSRU5UX0NPTE9SO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYmdDb2xvck1vZGUpIHtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChiZ0NvbG9yKTtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6XG4gICAgICAgIGNvbnN0IGFyciA9IEF0dHJpYnV0ZURhdGEudG9Db2xvclJHQihiZ0NvbG9yKTtcbiAgICAgICAgLy8gVE9ETzogVGhpcyBvYmplY3QgY3JlYXRpb24gaXMgc2xvd1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJnYmE6IGJnQ29sb3IgPDwgOCxcbiAgICAgICAgICBjc3M6IGAjJHt0b1BhZGRlZEhleChhcnJbMF0pfSR7dG9QYWRkZWRIZXgoYXJyWzFdKX0ke3RvUGFkZGVkSGV4KGFyclsyXSl9YFxuICAgICAgICB9O1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX0RFRkFVTFQ6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaW52ZXJzZSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5jb2xvcnMuYmFja2dyb3VuZDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9nZXRGb3JlZ3JvdW5kQ3NzKGJnOiBudW1iZXIsIGJnQ29sb3JNb2RlOiBudW1iZXIsIGJnQ29sb3I6IG51bWJlciwgZmc6IG51bWJlciwgZmdDb2xvck1vZGU6IG51bWJlciwgZmdDb2xvcjogbnVtYmVyLCBpbnZlcnNlOiBib29sZWFuLCBib2xkOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICBjb25zdCBtaW5pbXVtQ29udHJhc3RDc3MgPSB0aGlzLl9nZXRNaW5pbXVtQ29udHJhc3RDc3MoYmcsIGJnQ29sb3JNb2RlLCBiZ0NvbG9yLCBmZywgZmdDb2xvck1vZGUsIGZnQ29sb3IsIGludmVyc2UsIGJvbGQpO1xuICAgIGlmIChtaW5pbXVtQ29udHJhc3RDc3MpIHtcbiAgICAgIHJldHVybiBtaW5pbXVtQ29udHJhc3RDc3M7XG4gICAgfVxuXG4gICAgc3dpdGNoIChmZ0NvbG9yTW9kZSkge1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMjU2OlxuICAgICAgICBpZiAodGhpcy5fY29uZmlnLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzICYmIGJvbGQgJiYgZmdDb2xvciA8IDgpIHtcbiAgICAgICAgICBmZ0NvbG9yICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChmZ0NvbG9yKS5jc3M7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOlxuICAgICAgICBjb25zdCBhcnIgPSBBdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoZmdDb2xvcik7XG4gICAgICAgIHJldHVybiBjaGFubmVscy50b0NzcyhhcnJbMF0sIGFyclsxXSwgYXJyWzJdKTtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9ERUZBVUxUOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGludmVyc2UpIHtcbiAgICAgICAgICBjb25zdCBiZyA9IHRoaXMuX2NvbmZpZy5jb2xvcnMuYmFja2dyb3VuZC5jc3M7XG4gICAgICAgICAgaWYgKGJnLmxlbmd0aCA9PT0gOSkge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGJnIGFscGhhIGNoYW5uZWwgaWYgcHJlc2VudFxuICAgICAgICAgICAgcmV0dXJuIGJnLnN1YnN0cigwLCA3KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGJnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmQuY3NzO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3Jlc29sdmVCYWNrZ3JvdW5kUmdiYShiZ0NvbG9yTW9kZTogbnVtYmVyLCBiZ0NvbG9yOiBudW1iZXIsIGludmVyc2U6IGJvb2xlYW4pOiBudW1iZXIge1xuICAgIHN3aXRjaCAoYmdDb2xvck1vZGUpIHtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChiZ0NvbG9yKS5yZ2JhO1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1JHQjpcbiAgICAgICAgcmV0dXJuIGJnQ29sb3IgPDwgODtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9ERUZBVUxUOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGludmVyc2UpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnLmNvbG9ycy5mb3JlZ3JvdW5kLnJnYmE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5jb2xvcnMuYmFja2dyb3VuZC5yZ2JhO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3Jlc29sdmVGb3JlZ3JvdW5kUmdiYShmZ0NvbG9yTW9kZTogbnVtYmVyLCBmZ0NvbG9yOiBudW1iZXIsIGludmVyc2U6IGJvb2xlYW4sIGJvbGQ6IGJvb2xlYW4pOiBudW1iZXIge1xuICAgIHN3aXRjaCAoZmdDb2xvck1vZGUpIHtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyAmJiBib2xkICYmIGZnQ29sb3IgPCA4KSB7XG4gICAgICAgICAgZmdDb2xvciArPSA4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRDb2xvckZyb21BbnNpSW5kZXgoZmdDb2xvcikucmdiYTtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6XG4gICAgICAgIHJldHVybiBmZ0NvbG9yIDw8IDg7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fREVGQVVMVDpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChpbnZlcnNlKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5jb2xvcnMuYmFja2dyb3VuZC5yZ2JhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmQucmdiYTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9nZXRNaW5pbXVtQ29udHJhc3RDc3MoYmc6IG51bWJlciwgYmdDb2xvck1vZGU6IG51bWJlciwgYmdDb2xvcjogbnVtYmVyLCBmZzogbnVtYmVyLCBmZ0NvbG9yTW9kZTogbnVtYmVyLCBmZ0NvbG9yOiBudW1iZXIsIGludmVyc2U6IGJvb2xlYW4sIGJvbGQ6IGJvb2xlYW4pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLl9jb25maWcubWluaW11bUNvbnRyYXN0UmF0aW8gPT09IDEpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gVHJ5IGdldCBmcm9tIGNhY2hlIGZpcnN0XG4gICAgY29uc3QgYWRqdXN0ZWRDb2xvciA9IHRoaXMuX2NvbmZpZy5jb2xvcnMuY29udHJhc3RDYWNoZS5nZXRDc3MoYmcsIGZnKTtcbiAgICBpZiAoYWRqdXN0ZWRDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gYWRqdXN0ZWRDb2xvciB8fCB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgYmdSZ2JhID0gdGhpcy5fcmVzb2x2ZUJhY2tncm91bmRSZ2JhKGJnQ29sb3JNb2RlLCBiZ0NvbG9yLCBpbnZlcnNlKTtcbiAgICBjb25zdCBmZ1JnYmEgPSB0aGlzLl9yZXNvbHZlRm9yZWdyb3VuZFJnYmEoZmdDb2xvck1vZGUsIGZnQ29sb3IsIGludmVyc2UsIGJvbGQpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHJnYmEuZW5zdXJlQ29udHJhc3RSYXRpbyhiZ1JnYmEsIGZnUmdiYSwgdGhpcy5fY29uZmlnLm1pbmltdW1Db250cmFzdFJhdGlvKTtcblxuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICB0aGlzLl9jb25maWcuY29sb3JzLmNvbnRyYXN0Q2FjaGUuc2V0Q3NzKGJnLCBmZywgbnVsbCk7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGNzcyA9IGNoYW5uZWxzLnRvQ3NzKFxuICAgICAgKHJlc3VsdCA+PiAyNCkgJiAweEZGLFxuICAgICAgKHJlc3VsdCA+PiAxNikgJiAweEZGLFxuICAgICAgKHJlc3VsdCA+PiA4KSAmIDB4RkZcbiAgICApO1xuICAgIHRoaXMuX2NvbmZpZy5jb2xvcnMuY29udHJhc3RDYWNoZS5zZXRDc3MoYmcsIGZnLCBjc3MpO1xuXG4gICAgcmV0dXJuIGNzcztcbiAgfVxuXG4gIHByaXZhdGUgX2RyYXdUb0NhY2hlKGNvZGU6IG51bWJlciwgYmc6IG51bWJlciwgZmc6IG51bWJlcik6IElSYXN0ZXJpemVkR2x5cGg7XG4gIHByaXZhdGUgX2RyYXdUb0NhY2hlKGNoYXJzOiBzdHJpbmcsIGJnOiBudW1iZXIsIGZnOiBudW1iZXIpOiBJUmFzdGVyaXplZEdseXBoO1xuICBwcml2YXRlIF9kcmF3VG9DYWNoZShjb2RlT3JDaGFyczogbnVtYmVyIHwgc3RyaW5nLCBiZzogbnVtYmVyLCBmZzogbnVtYmVyKTogSVJhc3Rlcml6ZWRHbHlwaCB7XG4gICAgY29uc3QgY2hhcnMgPSB0eXBlb2YgY29kZU9yQ2hhcnMgPT09ICdudW1iZXInID8gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlT3JDaGFycykgOiBjb2RlT3JDaGFycztcblxuICAgIHRoaXMuaGFzQ2FudmFzQ2hhbmdlZCA9IHRydWU7XG5cbiAgICB0aGlzLl90bXBDdHguc2F2ZSgpO1xuXG4gICAgdGhpcy5fd29ya0F0dHJpYnV0ZURhdGEuZmcgPSBmZztcbiAgICB0aGlzLl93b3JrQXR0cmlidXRlRGF0YS5iZyA9IGJnO1xuXG4gICAgY29uc3QgaW52aXNpYmxlID0gISF0aGlzLl93b3JrQXR0cmlidXRlRGF0YS5pc0ludmlzaWJsZSgpO1xuICAgIGlmIChpbnZpc2libGUpIHtcbiAgICAgIHJldHVybiBOVUxMX1JBU1RFUklaRURfR0xZUEg7XG4gICAgfVxuXG4gICAgY29uc3QgYm9sZCA9ICEhdGhpcy5fd29ya0F0dHJpYnV0ZURhdGEuaXNCb2xkKCk7XG4gICAgY29uc3QgaW52ZXJzZSA9ICEhdGhpcy5fd29ya0F0dHJpYnV0ZURhdGEuaXNJbnZlcnNlKCk7XG4gICAgY29uc3QgZGltID0gISF0aGlzLl93b3JrQXR0cmlidXRlRGF0YS5pc0RpbSgpO1xuICAgIGNvbnN0IGl0YWxpYyA9ICEhdGhpcy5fd29ya0F0dHJpYnV0ZURhdGEuaXNJdGFsaWMoKTtcbiAgICBsZXQgZmdDb2xvciA9IHRoaXMuX3dvcmtBdHRyaWJ1dGVEYXRhLmdldEZnQ29sb3IoKTtcbiAgICBsZXQgZmdDb2xvck1vZGUgPSB0aGlzLl93b3JrQXR0cmlidXRlRGF0YS5nZXRGZ0NvbG9yTW9kZSgpO1xuICAgIGxldCBiZ0NvbG9yID0gdGhpcy5fd29ya0F0dHJpYnV0ZURhdGEuZ2V0QmdDb2xvcigpO1xuICAgIGxldCBiZ0NvbG9yTW9kZSA9IHRoaXMuX3dvcmtBdHRyaWJ1dGVEYXRhLmdldEJnQ29sb3JNb2RlKCk7XG4gICAgaWYgKGludmVyc2UpIHtcbiAgICAgIGNvbnN0IHRlbXAgPSBmZ0NvbG9yO1xuICAgICAgZmdDb2xvciA9IGJnQ29sb3I7XG4gICAgICBiZ0NvbG9yID0gdGVtcDtcbiAgICAgIGNvbnN0IHRlbXAyID0gZmdDb2xvck1vZGU7XG4gICAgICBmZ0NvbG9yTW9kZSA9IGJnQ29sb3JNb2RlO1xuICAgICAgYmdDb2xvck1vZGUgPSB0ZW1wMjtcbiAgICB9XG5cbiAgICAvLyBkcmF3IHRoZSBiYWNrZ3JvdW5kXG4gICAgY29uc3QgYmFja2dyb3VuZENvbG9yID0gdGhpcy5fZ2V0QmFja2dyb3VuZENvbG9yKGJnQ29sb3JNb2RlLCBiZ0NvbG9yLCBpbnZlcnNlKTtcbiAgICAvLyBVc2UgYSAnY29weScgY29tcG9zaXRlIG9wZXJhdGlvbiB0byBjbGVhciBhbnkgZXhpc3RpbmcgZ2x5cGggb3V0IG9mIF90bXBDdHhXaXRoQWxwaGEsIHJlZ2FyZGxlc3Mgb2ZcbiAgICAvLyB0cmFuc3BhcmVuY3kgaW4gYmFja2dyb3VuZENvbG9yXG4gICAgdGhpcy5fdG1wQ3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdjb3B5JztcbiAgICB0aGlzLl90bXBDdHguZmlsbFN0eWxlID0gYmFja2dyb3VuZENvbG9yLmNzcztcbiAgICB0aGlzLl90bXBDdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5fdG1wQ2FudmFzLndpZHRoLCB0aGlzLl90bXBDYW52YXMuaGVpZ2h0KTtcbiAgICB0aGlzLl90bXBDdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcblxuICAgIC8vIGRyYXcgdGhlIGZvcmVncm91bmQvZ2x5cGhcbiAgICBjb25zdCBmb250V2VpZ2h0ID0gYm9sZCA/IHRoaXMuX2NvbmZpZy5mb250V2VpZ2h0Qm9sZCA6IHRoaXMuX2NvbmZpZy5mb250V2VpZ2h0O1xuICAgIGNvbnN0IGZvbnRTdHlsZSA9IGl0YWxpYyA/ICdpdGFsaWMnIDogJyc7XG4gICAgdGhpcy5fdG1wQ3R4LmZvbnQgPVxuICAgICAgYCR7Zm9udFN0eWxlfSAke2ZvbnRXZWlnaHR9ICR7dGhpcy5fY29uZmlnLmZvbnRTaXplICogdGhpcy5fY29uZmlnLmRldmljZVBpeGVsUmF0aW99cHggJHt0aGlzLl9jb25maWcuZm9udEZhbWlseX1gO1xuICAgIHRoaXMuX3RtcEN0eC50ZXh0QmFzZWxpbmUgPSAndG9wJztcblxuICAgIHRoaXMuX3RtcEN0eC5maWxsU3R5bGUgPSB0aGlzLl9nZXRGb3JlZ3JvdW5kQ3NzKGJnLCBiZ0NvbG9yTW9kZSwgYmdDb2xvciwgZmcsIGZnQ29sb3JNb2RlLCBmZ0NvbG9yLCBpbnZlcnNlLCBib2xkKTtcblxuICAgIC8vIEFwcGx5IGFscGhhIHRvIGRpbSB0aGUgY2hhcmFjdGVyXG4gICAgaWYgKGRpbSkge1xuICAgICAgdGhpcy5fdG1wQ3R4Lmdsb2JhbEFscGhhID0gRElNX09QQUNJVFk7XG4gICAgfVxuXG4gICAgLy8gRHJhdyB0aGUgY2hhcmFjdGVyXG4gICAgdGhpcy5fdG1wQ3R4LmZpbGxUZXh0KGNoYXJzLCBUTVBfQ0FOVkFTX0dMWVBIX1BBRERJTkcsIFRNUF9DQU5WQVNfR0xZUEhfUEFERElORyk7XG4gICAgdGhpcy5fdG1wQ3R4LnJlc3RvcmUoKTtcblxuICAgIC8vIGNsZWFyIHRoZSBiYWNrZ3JvdW5kIGZyb20gdGhlIGNoYXJhY3RlciB0byBhdm9pZCBpc3N1ZXMgd2l0aCBkcmF3aW5nIG92ZXIgdGhlIHByZXZpb3VzXG4gICAgLy8gY2hhcmFjdGVyIGlmIGl0IGV4dGVuZHMgcGFzdCBpdCdzIGJvdW5kc1xuICAgIGNvbnN0IGltYWdlRGF0YSA9IHRoaXMuX3RtcEN0eC5nZXRJbWFnZURhdGEoXG4gICAgICAwLCAwLCB0aGlzLl90bXBDYW52YXMud2lkdGgsIHRoaXMuX3RtcENhbnZhcy5oZWlnaHRcbiAgICApO1xuXG4gICAgLy8gVE9ETzogU3VwcG9ydCB0cmFuc3BhcmVuY3lcbiAgICAvLyBsZXQgaXNFbXB0eSA9IGZhbHNlO1xuICAgIC8vIGlmICghdGhpcy5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5KSB7XG4gICAgLy8gICBpc0VtcHR5ID0gY2xlYXJDb2xvcihpbWFnZURhdGEsIGJhY2tncm91bmRDb2xvcik7XG4gICAgLy8gfVxuXG4gICAgLy8gQ2xlYXIgb3V0IHRoZSBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBkZXRlcm1pbmUgaWYgdGhlIGdseXBoIGlzIGVtcHR5LlxuICAgIGNvbnN0IGlzRW1wdHkgPSBjbGVhckNvbG9yKGltYWdlRGF0YSwgYmFja2dyb3VuZENvbG9yKTtcblxuICAgIC8vIEhhbmRsZSBlbXB0eSBnbHlwaHNcbiAgICBpZiAoaXNFbXB0eSkge1xuICAgICAgcmV0dXJuIE5VTExfUkFTVEVSSVpFRF9HTFlQSDtcbiAgICB9XG5cbiAgICBjb25zdCByYXN0ZXJpemVkR2x5cGggPSB0aGlzLl9maW5kR2x5cGhCb3VuZGluZ0JveChpbWFnZURhdGEsIHRoaXMuX3dvcmtCb3VuZGluZ0JveCk7XG4gICAgY29uc3QgY2xpcHBlZEltYWdlRGF0YSA9IHRoaXMuX2NsaXBJbWFnZURhdGEoaW1hZ2VEYXRhLCB0aGlzLl93b3JrQm91bmRpbmdCb3gpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgZW5vdWdoIHJvb20gaW4gdGhlIGN1cnJlbnQgcm93IGFuZCBnbyB0byBuZXh0IGlmIG5lZWRlZFxuICAgIGlmICh0aGlzLl9jdXJyZW50Um93WCArIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGggPiBURVhUVVJFX1dJRFRIKSB7XG4gICAgICB0aGlzLl9jdXJyZW50Um93WCA9IDA7XG4gICAgICB0aGlzLl9jdXJyZW50Um93WSArPSB0aGlzLl9jdXJyZW50Um93SGVpZ2h0O1xuICAgICAgdGhpcy5fY3VycmVudFJvd0hlaWdodCA9IDA7XG4gICAgfVxuXG4gICAgLy8gUmVjb3JkIHRleHR1cmUgcG9zaXRpb25cbiAgICByYXN0ZXJpemVkR2x5cGgudGV4dHVyZVBvc2l0aW9uLnggPSB0aGlzLl9jdXJyZW50Um93WDtcbiAgICByYXN0ZXJpemVkR2x5cGgudGV4dHVyZVBvc2l0aW9uLnkgPSB0aGlzLl9jdXJyZW50Um93WTtcbiAgICByYXN0ZXJpemVkR2x5cGgudGV4dHVyZVBvc2l0aW9uQ2xpcFNwYWNlLnggPSB0aGlzLl9jdXJyZW50Um93WCAvIFRFWFRVUkVfV0lEVEg7XG4gICAgcmFzdGVyaXplZEdseXBoLnRleHR1cmVQb3NpdGlvbkNsaXBTcGFjZS55ID0gdGhpcy5fY3VycmVudFJvd1kgLyBURVhUVVJFX0hFSUdIVDtcblxuICAgIC8vIFVwZGF0ZSBhdGxhcyBjdXJyZW50IHJvd1xuICAgIHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQgPSBNYXRoLm1heCh0aGlzLl9jdXJyZW50Um93SGVpZ2h0LCByYXN0ZXJpemVkR2x5cGguc2l6ZS55KTtcbiAgICB0aGlzLl9jdXJyZW50Um93WCArPSByYXN0ZXJpemVkR2x5cGguc2l6ZS54O1xuXG4gICAgLy8gcHV0SW1hZ2VEYXRhIGRvZXNuJ3QgZG8gYW55IGJsZW5kaW5nLCBzbyBpdCB3aWxsIG92ZXJ3cml0ZSBhbnkgZXhpc3RpbmcgY2FjaGUgZW50cnkgZm9yIHVzXG4gICAgdGhpcy5fY2FjaGVDdHgucHV0SW1hZ2VEYXRhKGNsaXBwZWRJbWFnZURhdGEsIHJhc3Rlcml6ZWRHbHlwaC50ZXh0dXJlUG9zaXRpb24ueCwgcmFzdGVyaXplZEdseXBoLnRleHR1cmVQb3NpdGlvbi55KTtcblxuICAgIHJldHVybiByYXN0ZXJpemVkR2x5cGg7XG4gIH1cblxuICAvKipcbiAgICogR2l2ZW4gYW4gSW1hZ2VEYXRhIG9iamVjdCwgZmluZCB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSBub24tdHJhbnNwYXJlbnRcbiAgICogcG9ydGlvbiBvZiB0aGUgdGV4dHVyZSBhbmQgcmV0dXJuIGFuIElSYXN0ZXJpemVkR2x5cGggd2l0aCB0aGVzZVxuICAgKiBkaW1lbnNpb25zLlxuICAgKiBAcGFyYW0gaW1hZ2VEYXRhIFRoZSBpbWFnZSBkYXRhIHRvIHJlYWQuXG4gICAqIEBwYXJhbSBib3VuZGluZ0JveCBBbiBJQm91bmRpbmdCb3ggdG8gcHV0IHRoZSBjbGlwcGVkIGJvdW5kaW5nIGJveCB2YWx1ZXMuXG4gICAqL1xuICBwcml2YXRlIF9maW5kR2x5cGhCb3VuZGluZ0JveChpbWFnZURhdGE6IEltYWdlRGF0YSwgYm91bmRpbmdCb3g6IElCb3VuZGluZ0JveCk6IElSYXN0ZXJpemVkR2x5cGgge1xuICAgIGJvdW5kaW5nQm94LnRvcCA9IDA7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLl90bXBDYW52YXMuaGVpZ2h0OyB5KyspIHtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5fdG1wQ2FudmFzLndpZHRoOyB4KyspIHtcbiAgICAgICAgY29uc3QgYWxwaGFPZmZzZXQgPSB5ICogdGhpcy5fdG1wQ2FudmFzLndpZHRoICogNCArIHggKiA0ICsgMztcbiAgICAgICAgaWYgKGltYWdlRGF0YS5kYXRhW2FscGhhT2Zmc2V0XSAhPT0gMCkge1xuICAgICAgICAgIGJvdW5kaW5nQm94LnRvcCA9IHk7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGJvdW5kaW5nQm94LmxlZnQgPSAwO1xuICAgIGZvdW5kID0gZmFsc2U7XG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLl90bXBDYW52YXMud2lkdGg7IHgrKykge1xuICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLl90bXBDYW52YXMuaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgY29uc3QgYWxwaGFPZmZzZXQgPSB5ICogdGhpcy5fdG1wQ2FudmFzLndpZHRoICogNCArIHggKiA0ICsgMztcbiAgICAgICAgaWYgKGltYWdlRGF0YS5kYXRhW2FscGhhT2Zmc2V0XSAhPT0gMCkge1xuICAgICAgICAgIGJvdW5kaW5nQm94LmxlZnQgPSB4O1xuICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBib3VuZGluZ0JveC5yaWdodCA9IHRoaXMuX3RtcENhbnZhcy53aWR0aDtcbiAgICBmb3VuZCA9IGZhbHNlO1xuICAgIGZvciAobGV0IHggPSB0aGlzLl90bXBDYW52YXMud2lkdGggLSAxOyB4ID49IDA7IHgtLSkge1xuICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLl90bXBDYW52YXMuaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgY29uc3QgYWxwaGFPZmZzZXQgPSB5ICogdGhpcy5fdG1wQ2FudmFzLndpZHRoICogNCArIHggKiA0ICsgMztcbiAgICAgICAgaWYgKGltYWdlRGF0YS5kYXRhW2FscGhhT2Zmc2V0XSAhPT0gMCkge1xuICAgICAgICAgIGJvdW5kaW5nQm94LnJpZ2h0ID0geDtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgYm91bmRpbmdCb3guYm90dG9tID0gdGhpcy5fdG1wQ2FudmFzLmhlaWdodDtcbiAgICBmb3VuZCA9IGZhbHNlO1xuICAgIGZvciAobGV0IHkgPSB0aGlzLl90bXBDYW52YXMuaGVpZ2h0IC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5fdG1wQ2FudmFzLndpZHRoOyB4KyspIHtcbiAgICAgICAgY29uc3QgYWxwaGFPZmZzZXQgPSB5ICogdGhpcy5fdG1wQ2FudmFzLndpZHRoICogNCArIHggKiA0ICsgMztcbiAgICAgICAgaWYgKGltYWdlRGF0YS5kYXRhW2FscGhhT2Zmc2V0XSAhPT0gMCkge1xuICAgICAgICAgIGJvdW5kaW5nQm94LmJvdHRvbSA9IHk7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0ZXh0dXJlUG9zaXRpb246IHsgeDogMCwgeTogMCB9LFxuICAgICAgdGV4dHVyZVBvc2l0aW9uQ2xpcFNwYWNlOiB7IHg6IDAsIHk6IDAgfSxcbiAgICAgIHNpemU6IHtcbiAgICAgICAgeDogYm91bmRpbmdCb3gucmlnaHQgLSBib3VuZGluZ0JveC5sZWZ0ICsgMSxcbiAgICAgICAgeTogYm91bmRpbmdCb3guYm90dG9tIC0gYm91bmRpbmdCb3gudG9wICsgMVxuICAgICAgfSxcbiAgICAgIHNpemVDbGlwU3BhY2U6IHtcbiAgICAgICAgeDogKGJvdW5kaW5nQm94LnJpZ2h0IC0gYm91bmRpbmdCb3gubGVmdCArIDEpIC8gVEVYVFVSRV9XSURUSCxcbiAgICAgICAgeTogKGJvdW5kaW5nQm94LmJvdHRvbSAtIGJvdW5kaW5nQm94LnRvcCArIDEpIC8gVEVYVFVSRV9IRUlHSFRcbiAgICAgIH0sXG4gICAgICBvZmZzZXQ6IHtcbiAgICAgICAgeDogLWJvdW5kaW5nQm94LmxlZnQgKyBUTVBfQ0FOVkFTX0dMWVBIX1BBRERJTkcsXG4gICAgICAgIHk6IC1ib3VuZGluZ0JveC50b3AgKyBUTVBfQ0FOVkFTX0dMWVBIX1BBRERJTkdcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xpcEltYWdlRGF0YShpbWFnZURhdGE6IEltYWdlRGF0YSwgYm91bmRpbmdCb3g6IElCb3VuZGluZ0JveCk6IEltYWdlRGF0YSB7XG4gICAgY29uc3Qgd2lkdGggPSBib3VuZGluZ0JveC5yaWdodCAtIGJvdW5kaW5nQm94LmxlZnQgKyAxO1xuICAgIGNvbnN0IGhlaWdodCA9IGJvdW5kaW5nQm94LmJvdHRvbSAtIGJvdW5kaW5nQm94LnRvcCArIDE7XG4gICAgY29uc3QgY2xpcHBlZERhdGEgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQgKiA0KTtcbiAgICBmb3IgKGxldCB5ID0gYm91bmRpbmdCb3gudG9wOyB5IDw9IGJvdW5kaW5nQm94LmJvdHRvbTsgeSsrKSB7XG4gICAgICBmb3IgKGxldCB4ID0gYm91bmRpbmdCb3gubGVmdDsgeCA8PSBib3VuZGluZ0JveC5yaWdodDsgeCsrKSB7XG4gICAgICAgIGNvbnN0IG9sZE9mZnNldCA9IHkgKiB0aGlzLl90bXBDYW52YXMud2lkdGggKiA0ICsgeCAqIDQ7XG4gICAgICAgIGNvbnN0IG5ld09mZnNldCA9ICh5IC0gYm91bmRpbmdCb3gudG9wKSAqIHdpZHRoICogNCArICh4IC0gYm91bmRpbmdCb3gubGVmdCkgKiA0O1xuICAgICAgICBjbGlwcGVkRGF0YVtuZXdPZmZzZXRdID0gaW1hZ2VEYXRhLmRhdGFbb2xkT2Zmc2V0XTtcbiAgICAgICAgY2xpcHBlZERhdGFbbmV3T2Zmc2V0ICsgMV0gPSBpbWFnZURhdGEuZGF0YVtvbGRPZmZzZXQgKyAxXTtcbiAgICAgICAgY2xpcHBlZERhdGFbbmV3T2Zmc2V0ICsgMl0gPSBpbWFnZURhdGEuZGF0YVtvbGRPZmZzZXQgKyAyXTtcbiAgICAgICAgY2xpcHBlZERhdGFbbmV3T2Zmc2V0ICsgM10gPSBpbWFnZURhdGEuZGF0YVtvbGRPZmZzZXQgKyAzXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBJbWFnZURhdGEoY2xpcHBlZERhdGEsIHdpZHRoLCBoZWlnaHQpO1xuICB9XG59XG5cbi8qKlxuICogTWFrZXMgYSBwYXJ0aWljdWxhciByZ2IgY29sb3IgaW4gYW4gSW1hZ2VEYXRhIGNvbXBsZXRlbHkgdHJhbnNwYXJlbnQuXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSByZXN1bHQgaXMgXCJlbXB0eVwiLCBtZWFuaW5nIGFsbCBwaXhlbHMgYXJlIGZ1bGx5IHRyYW5zcGFyZW50LlxuICovXG5mdW5jdGlvbiBjbGVhckNvbG9yKGltYWdlRGF0YTogSW1hZ2VEYXRhLCBjb2xvcjogSUNvbG9yKTogYm9vbGVhbiB7XG4gIGxldCBpc0VtcHR5ID0gdHJ1ZTtcbiAgY29uc3QgciA9IGNvbG9yLnJnYmEgPj4+IDI0O1xuICBjb25zdCBnID0gY29sb3IucmdiYSA+Pj4gMTYgJiAweEZGO1xuICBjb25zdCBiID0gY29sb3IucmdiYSA+Pj4gOCAmIDB4RkY7XG4gIGZvciAobGV0IG9mZnNldCA9IDA7IG9mZnNldCA8IGltYWdlRGF0YS5kYXRhLmxlbmd0aDsgb2Zmc2V0ICs9IDQpIHtcbiAgICBpZiAoaW1hZ2VEYXRhLmRhdGFbb2Zmc2V0XSA9PT0gciAmJlxuICAgICAgICBpbWFnZURhdGEuZGF0YVtvZmZzZXQgKyAxXSA9PT0gZyAmJlxuICAgICAgICBpbWFnZURhdGEuZGF0YVtvZmZzZXQgKyAyXSA9PT0gYikge1xuICAgICAgaW1hZ2VEYXRhLmRhdGFbb2Zmc2V0ICsgM10gPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICBpc0VtcHR5ID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiBpc0VtcHR5O1xufVxuXG5mdW5jdGlvbiB0b1BhZGRlZEhleChjOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBzID0gYy50b1N0cmluZygxNik7XG4gIHJldHVybiBzLmxlbmd0aCA8IDIgPyAnMCcgKyBzIDogcztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVJlbmRlckxheWVyIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBhY3F1aXJlQ2hhckF0bGFzIH0gZnJvbSAnLi4vYXRsYXMvQ2hhckF0bGFzQ2FjaGUnO1xuaW1wb3J0IHsgVGVybWluYWwgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBJQ29sb3JTZXQgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElSZW5kZXJEaW1lbnNpb25zIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgV2ViZ2xDaGFyQXRsYXMgfSBmcm9tICdhdGxhcy9XZWJnbENoYXJBdGxhcyc7XG5pbXBvcnQgeyB0aHJvd0lmRmFsc3kgfSBmcm9tICcuLi9XZWJnbFV0aWxzJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VSZW5kZXJMYXllciBpbXBsZW1lbnRzIElSZW5kZXJMYXllciB7XG4gIHByaXZhdGUgX2NhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIHByb3RlY3RlZCBfY3R4ITogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICBwcml2YXRlIF9zY2FsZWRDaGFyV2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3NjYWxlZENoYXJIZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3NjYWxlZENlbGxXaWR0aDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfc2NhbGVkQ2VsbEhlaWdodDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfc2NhbGVkQ2hhckxlZnQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3NjYWxlZENoYXJUb3A6IG51bWJlciA9IDA7XG5cbiAgcHJvdGVjdGVkIF9jaGFyQXRsYXM6IFdlYmdsQ2hhckF0bGFzIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2NvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgaWQ6IHN0cmluZyxcbiAgICB6SW5kZXg6IG51bWJlcixcbiAgICBwcml2YXRlIF9hbHBoYTogYm9vbGVhbixcbiAgICBwcm90ZWN0ZWQgX2NvbG9yczogSUNvbG9yU2V0XG4gICkge1xuICAgIHRoaXMuX2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHRoaXMuX2NhbnZhcy5jbGFzc0xpc3QuYWRkKGB4dGVybS0ke2lkfS1sYXllcmApO1xuICAgIHRoaXMuX2NhbnZhcy5zdHlsZS56SW5kZXggPSB6SW5kZXgudG9TdHJpbmcoKTtcbiAgICB0aGlzLl9pbml0Q2FudmFzKCk7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2NhbnZhcyk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9jb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5fY2FudmFzKTtcbiAgICBpZiAodGhpcy5fY2hhckF0bGFzKSB7XG4gICAgICB0aGlzLl9jaGFyQXRsYXMuZGlzcG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2luaXRDYW52YXMoKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4ID0gdGhyb3dJZkZhbHN5KHRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHthbHBoYTogdGhpcy5fYWxwaGF9KSk7XG4gICAgLy8gRHJhdyB0aGUgYmFja2dyb3VuZCBpZiB0aGlzIGlzIGFuIG9wYXF1ZSBsYXllclxuICAgIGlmICghdGhpcy5fYWxwaGEpIHtcbiAgICAgIHRoaXMuX2NsZWFyQWxsKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uT3B0aW9uc0NoYW5nZWQodGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7fVxuICBwdWJsaWMgb25CbHVyKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge31cbiAgcHVibGljIG9uRm9jdXModGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7fVxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge31cbiAgcHVibGljIG9uR3JpZENoYW5nZWQodGVybWluYWw6IFRlcm1pbmFsLCBzdGFydFJvdzogbnVtYmVyLCBlbmRSb3c6IG51bWJlcik6IHZvaWQge31cbiAgcHVibGljIG9uU2VsZWN0aW9uQ2hhbmdlZCh0ZXJtaW5hbDogVGVybWluYWwsIHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0sIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge31cblxuICBwdWJsaWMgc2V0Q29sb3JzKHRlcm1pbmFsOiBUZXJtaW5hbCwgY29sb3JTZXQ6IElDb2xvclNldCk6IHZvaWQge1xuICAgIHRoaXMuX3JlZnJlc2hDaGFyQXRsYXModGVybWluYWwsIGNvbG9yU2V0KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfc2V0VHJhbnNwYXJlbmN5KHRlcm1pbmFsOiBUZXJtaW5hbCwgYWxwaGE6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyBEbyBub3RoaW5nIHdoZW4gYWxwaGEgZG9lc24ndCBjaGFuZ2VcbiAgICBpZiAoYWxwaGEgPT09IHRoaXMuX2FscGhhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIG5ldyBjYW52YXMgYW5kIHJlcGxhY2Ugb2xkIG9uZVxuICAgIGNvbnN0IG9sZENhbnZhcyA9IHRoaXMuX2NhbnZhcztcbiAgICB0aGlzLl9hbHBoYSA9IGFscGhhO1xuICAgIC8vIENsb25pbmcgcHJlc2VydmVzIHByb3BlcnRpZXNcbiAgICB0aGlzLl9jYW52YXMgPSA8SFRNTENhbnZhc0VsZW1lbnQ+dGhpcy5fY2FudmFzLmNsb25lTm9kZSgpO1xuICAgIHRoaXMuX2luaXRDYW52YXMoKTtcbiAgICB0aGlzLl9jb250YWluZXIucmVwbGFjZUNoaWxkKHRoaXMuX2NhbnZhcywgb2xkQ2FudmFzKTtcblxuICAgIC8vIFJlZ2VuZXJhdGUgY2hhciBhdGxhcyBhbmQgZm9yY2UgYSBmdWxsIHJlZHJhd1xuICAgIHRoaXMuX3JlZnJlc2hDaGFyQXRsYXModGVybWluYWwsIHRoaXMuX2NvbG9ycyk7XG4gICAgdGhpcy5vbkdyaWRDaGFuZ2VkKHRlcm1pbmFsLCAwLCB0ZXJtaW5hbC5yb3dzIC0gMSk7XG4gIH1cblxuICAvKipcbiAgICogUmVmcmVzaGVzIHRoZSBjaGFyIGF0bGFzLCBhcXVpcmluZyBhIG5ldyBvbmUgaWYgbmVjZXNzYXJ5LlxuICAgKiBAcGFyYW0gdGVybWluYWwgVGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gY29sb3JTZXQgVGhlIGNvbG9yIHNldCB0byB1c2UgZm9yIHRoZSBjaGFyIGF0bGFzLlxuICAgKi9cbiAgcHJpdmF0ZSBfcmVmcmVzaENoYXJBdGxhcyh0ZXJtaW5hbDogVGVybWluYWwsIGNvbG9yU2V0OiBJQ29sb3JTZXQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc2NhbGVkQ2hhcldpZHRoIDw9IDAgJiYgdGhpcy5fc2NhbGVkQ2hhckhlaWdodCA8PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2NoYXJBdGxhcyA9IGFjcXVpcmVDaGFyQXRsYXModGVybWluYWwsIGNvbG9yU2V0LCB0aGlzLl9zY2FsZWRDaGFyV2lkdGgsIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQpO1xuICAgIHRoaXMuX2NoYXJBdGxhcy53YXJtVXAoKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUodGVybWluYWw6IFRlcm1pbmFsLCBkaW06IElSZW5kZXJEaW1lbnNpb25zKTogdm9pZCB7XG4gICAgdGhpcy5fc2NhbGVkQ2VsbFdpZHRoID0gZGltLnNjYWxlZENlbGxXaWR0aDtcbiAgICB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0ID0gZGltLnNjYWxlZENlbGxIZWlnaHQ7XG4gICAgdGhpcy5fc2NhbGVkQ2hhcldpZHRoID0gZGltLnNjYWxlZENoYXJXaWR0aDtcbiAgICB0aGlzLl9zY2FsZWRDaGFySGVpZ2h0ID0gZGltLnNjYWxlZENoYXJIZWlnaHQ7XG4gICAgdGhpcy5fc2NhbGVkQ2hhckxlZnQgPSBkaW0uc2NhbGVkQ2hhckxlZnQ7XG4gICAgdGhpcy5fc2NhbGVkQ2hhclRvcCA9IGRpbS5zY2FsZWRDaGFyVG9wO1xuICAgIHRoaXMuX2NhbnZhcy53aWR0aCA9IGRpbS5zY2FsZWRDYW52YXNXaWR0aDtcbiAgICB0aGlzLl9jYW52YXMuaGVpZ2h0ID0gZGltLnNjYWxlZENhbnZhc0hlaWdodDtcbiAgICB0aGlzLl9jYW52YXMuc3R5bGUud2lkdGggPSBgJHtkaW0uY2FudmFzV2lkdGh9cHhgO1xuICAgIHRoaXMuX2NhbnZhcy5zdHlsZS5oZWlnaHQgPSBgJHtkaW0uY2FudmFzSGVpZ2h0fXB4YDtcblxuICAgIC8vIERyYXcgdGhlIGJhY2tncm91bmQgaWYgdGhpcyBpcyBhbiBvcGFxdWUgbGF5ZXJcbiAgICBpZiAoIXRoaXMuX2FscGhhKSB7XG4gICAgICB0aGlzLl9jbGVhckFsbCgpO1xuICAgIH1cblxuICAgIHRoaXMuX3JlZnJlc2hDaGFyQXRsYXModGVybWluYWwsIHRoaXMuX2NvbG9ycyk7XG4gIH1cblxuICBwdWJsaWMgYWJzdHJhY3QgcmVzZXQodGVybWluYWw6IFRlcm1pbmFsKTogdm9pZDtcblxuICAvKipcbiAgICogRmlsbHMgMSsgY2VsbHMgY29tcGxldGVseS4gVGhpcyB1c2VzIHRoZSBleGlzdGluZyBmaWxsU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gc3RhcnQgYXQuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gc3RhcnQgYXRcbiAgICogQHBhcmFtIHdpZHRoIFRoZSBudW1iZXIgb2YgY29sdW1ucyB0byBmaWxsLlxuICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBudW1iZXIgb2Ygcm93cyB0byBmaWxsLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9maWxsQ2VsbHMoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIGhlaWdodCAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbGxzIGEgMXB4IGxpbmUgKDJweCBvbiBIRFBJKSBhdCB0aGUgYm90dG9tIG9mIHRoZSBjZWxsLiBUaGlzIHVzZXMgdGhlXG4gICAqIGV4aXN0aW5nIGZpbGxTdHlsZSBvbiB0aGUgY29udGV4dC5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBmaWxsLlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGZpbGwuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2ZpbGxCb3R0b21MaW5lQXRDZWxscyh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciA9IDEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguZmlsbFJlY3QoXG4gICAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgICh5ICsgMSkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0IC0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gLSAxIC8qIEVuc3VyZSBpdCdzIGRyYXduIHdpdGhpbiB0aGUgY2VsbCAqLyxcbiAgICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWxscyBhIDFweCBsaW5lICgycHggb24gSERQSSkgYXQgdGhlIGxlZnQgb2YgdGhlIGNlbGwuIFRoaXMgdXNlcyB0aGVcbiAgICogZXhpc3RpbmcgZmlsbFN0eWxlIG9uIHRoZSBjb250ZXh0LlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIGZpbGwuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmlsbC5cbiAgICovXG4gIHByb3RlY3RlZCBfZmlsbExlZnRMaW5lQXRDZWxsKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgd2luZG93LmRldmljZVBpeGVsUmF0aW8gKiB3aWR0aCxcbiAgICAgICAgdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7XG4gIH1cblxuICAvKipcbiAgICogU3Ryb2tlcyBhIDFweCByZWN0YW5nbGUgKDJweCBvbiBIRFBJKSBhcm91bmQgYSBjZWxsLiBUaGlzIHVzZXMgdGhlIGV4aXN0aW5nXG4gICAqIHN0cm9rZVN0eWxlIG9uIHRoZSBjb250ZXh0LlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIGZpbGwuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmlsbC5cbiAgICovXG4gIHByb3RlY3RlZCBfc3Ryb2tlUmVjdEF0Q2VsbCh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHgubGluZVdpZHRoID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgdGhpcy5fY3R4LnN0cm9rZVJlY3QoXG4gICAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGggKyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAvIDIsXG4gICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0ICsgKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIC8gMiksXG4gICAgICAgIHdpZHRoICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoIC0gd2luZG93LmRldmljZVBpeGVsUmF0aW8sXG4gICAgICAgIChoZWlnaHQgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KSAtIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIGVudGlyZSBjYW52YXMuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2NsZWFyQWxsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hbHBoYSkge1xuICAgICAgdGhpcy5fY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgICAgdGhpcy5fY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyAxKyBjZWxscyBjb21wbGV0ZWx5LlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0gd2lkdGggVGhlIG51bWJlciBvZiBjb2x1bW5zIHRvIGNsZWFyLlxuICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBudW1iZXIgb2Ygcm93cyB0byBjbGVhci5cbiAgICovXG4gIHByb3RlY3RlZCBfY2xlYXJDZWxscyh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYWxwaGEpIHtcbiAgICAgIHRoaXMuX2N0eC5jbGVhclJlY3QoXG4gICAgICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgICB3aWR0aCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgICBoZWlnaHQgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLmNzcztcbiAgICAgIHRoaXMuX2N0eC5maWxsUmVjdChcbiAgICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICAgIHdpZHRoICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICAgIGhlaWdodCAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyBhIHRydWVjb2xvciBjaGFyYWN0ZXIgYXQgdGhlIGNlbGwuIFRoZSBjaGFyYWN0ZXIgd2lsbCBiZSBjbGlwcGVkIHRvXG4gICAqIGVuc3VyZSB0aGF0IGl0IGZpdHMgd2l0aCB0aGUgY2VsbCwgaW5jbHVkaW5nIHRoZSBjZWxsIHRvIHRoZSByaWdodCBpZiBpdCdzXG4gICAqIGEgd2lkZSBjaGFyYWN0ZXIuIFRoaXMgdXNlcyB0aGUgZXhpc3RpbmcgZmlsbFN0eWxlIG9uIHRoZSBjb250ZXh0LlxuICAgKiBAcGFyYW0gdGVybWluYWwgVGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gY2VsbCBUaGUgY2VsbCBkYXRhIGZvciB0aGUgY2hhcmFjdGVyIHRvIGRyYXcuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZHJhdyBhdC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBkcmF3IGF0LlxuICAgKiBAcGFyYW0gY29sb3IgVGhlIGNvbG9yIG9mIHRoZSBjaGFyYWN0ZXIuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2ZpbGxDaGFyVHJ1ZUNvbG9yKHRlcm1pbmFsOiBUZXJtaW5hbCwgY2VsbDogQ2VsbERhdGEsIHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmZvbnQgPSB0aGlzLl9nZXRGb250KHRlcm1pbmFsLCBmYWxzZSwgZmFsc2UpO1xuICAgIHRoaXMuX2N0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICB0aGlzLl9jbGlwUm93KHRlcm1pbmFsLCB5KTtcbiAgICB0aGlzLl9jdHguZmlsbFRleHQoXG4gICAgICAgIGNlbGwuZ2V0Q2hhcnMoKSxcbiAgICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCArIHRoaXMuX3NjYWxlZENoYXJMZWZ0LFxuICAgICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCArIHRoaXMuX3NjYWxlZENoYXJUb3AgKyB0aGlzLl9zY2FsZWRDaGFySGVpZ2h0IC8gMik7XG4gIH1cblxuICAvKipcbiAgICogQ2xpcHMgYSByb3cgdG8gZW5zdXJlIG5vIHBpeGVscyB3aWxsIGJlIGRyYXduIG91dHNpZGUgdGhlIGNlbGxzIGluIHRoZSByb3cuXG4gICAqIEBwYXJhbSB0ZXJtaW5hbCBUaGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gY2xpcC5cbiAgICovXG4gIHByaXZhdGUgX2NsaXBSb3codGVybWluYWw6IFRlcm1pbmFsLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguYmVnaW5QYXRoKCk7XG4gICAgdGhpcy5fY3R4LnJlY3QoXG4gICAgICAgIDAsXG4gICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICB0ZXJtaW5hbC5jb2xzICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KTtcbiAgICB0aGlzLl9jdHguY2xpcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgZm9udC5cbiAgICogQHBhcmFtIHRlcm1pbmFsIFRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIGlzQm9sZCBJZiB3ZSBzaG91bGQgdXNlIHRoZSBib2xkIGZvbnRXZWlnaHQuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2dldEZvbnQodGVybWluYWw6IFRlcm1pbmFsLCBpc0JvbGQ6IGJvb2xlYW4sIGlzSXRhbGljOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICBjb25zdCBmb250V2VpZ2h0ID0gaXNCb2xkID8gdGVybWluYWwuZ2V0T3B0aW9uKCdmb250V2VpZ2h0Qm9sZCcpIDogdGVybWluYWwuZ2V0T3B0aW9uKCdmb250V2VpZ2h0Jyk7XG4gICAgY29uc3QgZm9udFN0eWxlID0gaXNJdGFsaWMgPyAnaXRhbGljJyA6ICcnO1xuXG4gICAgcmV0dXJuIGAke2ZvbnRTdHlsZX0gJHtmb250V2VpZ2h0fSAke3Rlcm1pbmFsLmdldE9wdGlvbignZm9udFNpemUnKSAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfXB4ICR7dGVybWluYWwuZ2V0T3B0aW9uKCdmb250RmFtaWx5Jyl9YDtcbiAgfVxufVxuXG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IFRlcm1pbmFsIH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgQmFzZVJlbmRlckxheWVyIH0gZnJvbSAnLi9CYXNlUmVuZGVyTGF5ZXInO1xuaW1wb3J0IHsgSUNlbGxEYXRhIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBJQ29sb3JTZXQgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElSZW5kZXJEaW1lbnNpb25zLCBJUmVxdWVzdFJlZnJlc2hSb3dzRXZlbnQgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcbmltcG9ydCB7IElFdmVudEVtaXR0ZXIgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcblxuaW50ZXJmYWNlIElDdXJzb3JTdGF0ZSB7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuICBpc0ZvY3VzZWQ6IGJvb2xlYW47XG4gIHN0eWxlOiBzdHJpbmc7XG4gIHdpZHRoOiBudW1iZXI7XG59XG5cbi8qKlxuICogVGhlIHRpbWUgYmV0d2VlbiBjdXJzb3IgYmxpbmtzLlxuICovXG5jb25zdCBCTElOS19JTlRFUlZBTCA9IDYwMDtcblxuZXhwb3J0IGNsYXNzIEN1cnNvclJlbmRlckxheWVyIGV4dGVuZHMgQmFzZVJlbmRlckxheWVyIHtcbiAgcHJpdmF0ZSBfc3RhdGU6IElDdXJzb3JTdGF0ZTtcbiAgcHJpdmF0ZSBfY3Vyc29yUmVuZGVyZXJzOiB7W2tleTogc3RyaW5nXTogKHRlcm1pbmFsOiBUZXJtaW5hbCwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSkgPT4gdm9pZH07XG4gIHByaXZhdGUgX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyOiBDdXJzb3JCbGlua1N0YXRlTWFuYWdlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfY2VsbDogSUNlbGxEYXRhID0gbmV3IENlbGxEYXRhKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB6SW5kZXg6IG51bWJlcixcbiAgICBjb2xvcnM6IElDb2xvclNldCxcbiAgICBwcml2YXRlIF9vblJlcXVlc3RSZWZyZXNoUm93c0V2ZW50OiBJRXZlbnRFbWl0dGVyPElSZXF1ZXN0UmVmcmVzaFJvd3NFdmVudD5cbiAgKSB7XG4gICAgc3VwZXIoY29udGFpbmVyLCAnY3Vyc29yJywgekluZGV4LCB0cnVlLCBjb2xvcnMpO1xuICAgIHRoaXMuX3N0YXRlID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICBpc0ZvY3VzZWQ6IGZhbHNlLFxuICAgICAgc3R5bGU6ICcnLFxuICAgICAgd2lkdGg6IDBcbiAgICB9O1xuICAgIHRoaXMuX2N1cnNvclJlbmRlcmVycyA9IHtcbiAgICAgICdiYXInOiB0aGlzLl9yZW5kZXJCYXJDdXJzb3IuYmluZCh0aGlzKSxcbiAgICAgICdibG9jayc6IHRoaXMuX3JlbmRlckJsb2NrQ3Vyc29yLmJpbmQodGhpcyksXG4gICAgICAndW5kZXJsaW5lJzogdGhpcy5fcmVuZGVyVW5kZXJsaW5lQ3Vyc29yLmJpbmQodGhpcylcbiAgICB9O1xuICAgIC8vIFRPRE86IENvbnNpZGVyIGluaXRpYWwgb3B0aW9ucz8gTWF5YmUgb25PcHRpb25zQ2hhbmdlZCBzaG91bGQgYmUgY2FsbGVkIGF0IHRoZSBlbmQgb2Ygb3Blbj9cbiAgfVxuXG4gIHB1YmxpYyByZXNpemUodGVybWluYWw6IFRlcm1pbmFsLCBkaW06IElSZW5kZXJEaW1lbnNpb25zKTogdm9pZCB7XG4gICAgc3VwZXIucmVzaXplKHRlcm1pbmFsLCBkaW0pO1xuICAgIC8vIFJlc2l6aW5nIHRoZSBjYW52YXMgZGlzY2FyZHMgdGhlIGNvbnRlbnRzIG9mIHRoZSBjYW52YXMgc28gY2xlYXIgc3RhdGVcbiAgICB0aGlzLl9zdGF0ZSA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgaXNGb2N1c2VkOiBmYWxzZSxcbiAgICAgIHN0eWxlOiAnJyxcbiAgICAgIHdpZHRoOiAwXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5vbk9wdGlvbnNDaGFuZ2VkKHRlcm1pbmFsKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25CbHVyKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIucGF1c2UoKTtcbiAgICB9XG4gICAgdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3NFdmVudC5maXJlKHsgc3RhcnQ6IHRlcm1pbmFsLmJ1ZmZlci5jdXJzb3JZLCBlbmQ6IHRlcm1pbmFsLmJ1ZmZlci5jdXJzb3JZIH0pO1xuICB9XG5cbiAgcHVibGljIG9uRm9jdXModGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKSB7XG4gICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5yZXN1bWUodGVybWluYWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93c0V2ZW50LmZpcmUoeyBzdGFydDogdGVybWluYWwuYnVmZmVyLmN1cnNvclksIGVuZDogdGVybWluYWwuYnVmZmVyLmN1cnNvclkgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uT3B0aW9uc0NoYW5nZWQodGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7XG4gICAgaWYgKHRlcm1pbmFsLmdldE9wdGlvbignY3Vyc29yQmxpbmsnKSkge1xuICAgICAgaWYgKCF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciA9IG5ldyBDdXJzb3JCbGlua1N0YXRlTWFuYWdlcih0ZXJtaW5hbCwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX3JlbmRlcih0ZXJtaW5hbCwgdHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcj8uZGlzcG9zZSgpO1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIFJlcXVlc3QgYSByZWZyZXNoIGZyb20gdGhlIHRlcm1pbmFsIGFzIG1hbmFnZW1lbnQgb2YgcmVuZGVyaW5nIGlzIGJlaW5nXG4gICAgLy8gbW92ZWQgYmFjayB0byB0aGUgdGVybWluYWxcbiAgICB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93c0V2ZW50LmZpcmUoeyBzdGFydDogdGVybWluYWwuYnVmZmVyLmN1cnNvclksIGVuZDogdGVybWluYWwuYnVmZmVyLmN1cnNvclkgfSk7XG4gIH1cblxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIucmVzdGFydEJsaW5rQW5pbWF0aW9uKHRlcm1pbmFsKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25HcmlkQ2hhbmdlZCh0ZXJtaW5hbDogVGVybWluYWwsIHN0YXJ0Um93OiBudW1iZXIsIGVuZFJvdzogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciB8fCB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5pc1BhdXNlZCkge1xuICAgICAgdGhpcy5fcmVuZGVyKHRlcm1pbmFsLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLnJlc3RhcnRCbGlua0FuaW1hdGlvbih0ZXJtaW5hbCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyKHRlcm1pbmFsOiBUZXJtaW5hbCwgdHJpZ2dlcmVkQnlBbmltYXRpb25GcmFtZTogYm9vbGVhbik6IHZvaWQge1xuICAgIC8vIERvbid0IGRyYXcgdGhlIGN1cnNvciBpZiBpdCdzIGhpZGRlblxuICAgIC8vIFRPRE86IE5lZWQgdG8gZXhwb3NlIEFQSSBmb3IgdGhpc1xuICAgIGlmICghKHRlcm1pbmFsIGFzIGFueSkuX2NvcmUuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQgfHwgKHRlcm1pbmFsIGFzIGFueSkuX2NvcmUuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySGlkZGVuKSB7XG4gICAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnNvclkgPSB0ZXJtaW5hbC5idWZmZXIuYmFzZVkgKyB0ZXJtaW5hbC5idWZmZXIuY3Vyc29yWTtcbiAgICBjb25zdCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSA9IGN1cnNvclkgLSB0ZXJtaW5hbC5idWZmZXIudmlld3BvcnRZO1xuXG4gICAgLy8gRG9uJ3QgZHJhdyB0aGUgY3Vyc29yIGlmIGl0J3Mgb2ZmLXNjcmVlblxuICAgIGlmICh2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSA8IDAgfHwgdmlld3BvcnRSZWxhdGl2ZUN1cnNvclkgPj0gdGVybWluYWwucm93cykge1xuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBOZWVkIGZhc3QgYnVmZmVyIEFQSSBmb3IgbG9hZGluZyBjZWxsXG4gICAgKHRlcm1pbmFsIGFzIGFueSkuX2NvcmUuYnVmZmVyLmxpbmVzLmdldChjdXJzb3JZKS5sb2FkQ2VsbCh0ZXJtaW5hbC5idWZmZXIuY3Vyc29yWCwgdGhpcy5fY2VsbCk7XG4gICAgaWYgKHRoaXMuX2NlbGwuY29udGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFpc1Rlcm1pbmFsRm9jdXNlZCh0ZXJtaW5hbCkpIHtcbiAgICAgIHRoaXMuX2NsZWFyQ3Vyc29yKCk7XG4gICAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzO1xuICAgICAgY29uc3QgY3Vyc29yU3R5bGUgPSB0ZXJtaW5hbC5nZXRPcHRpb24oJ2N1cnNvclN0eWxlJyk7XG4gICAgICBpZiAoY3Vyc29yU3R5bGUgJiYgY3Vyc29yU3R5bGUgIT09ICdibG9jaycpIHtcbiAgICAgICAgdGhpcy5fY3Vyc29yUmVuZGVyZXJzW2N1cnNvclN0eWxlXSh0ZXJtaW5hbCwgdGVybWluYWwuYnVmZmVyLmN1cnNvclgsIHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZLCB0aGlzLl9jZWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3JlbmRlckJsdXJDdXJzb3IodGVybWluYWwsIHRlcm1pbmFsLmJ1ZmZlci5jdXJzb3JYLCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSwgdGhpcy5fY2VsbCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICAgICAgdGhpcy5fc3RhdGUueCA9IHRlcm1pbmFsLmJ1ZmZlci5jdXJzb3JYO1xuICAgICAgdGhpcy5fc3RhdGUueSA9IHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZO1xuICAgICAgdGhpcy5fc3RhdGUuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICB0aGlzLl9zdGF0ZS5zdHlsZSA9IGN1cnNvclN0eWxlO1xuICAgICAgdGhpcy5fc3RhdGUud2lkdGggPSB0aGlzLl9jZWxsLmdldFdpZHRoKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgZHJhdyB0aGUgY3Vyc29yIGlmIGl0J3MgYmxpbmtpbmdcbiAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIgJiYgIXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLmlzQ3Vyc29yVmlzaWJsZSkge1xuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc3RhdGUpIHtcbiAgICAgIC8vIFRoZSBjdXJzb3IgaXMgYWxyZWFkeSBpbiB0aGUgY29ycmVjdCBzcG90LCBkb24ndCByZWRyYXdcbiAgICAgIGlmICh0aGlzLl9zdGF0ZS54ID09PSB0ZXJtaW5hbC5idWZmZXIuY3Vyc29yWCAmJlxuICAgICAgICAgIHRoaXMuX3N0YXRlLnkgPT09IHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZICYmXG4gICAgICAgICAgdGhpcy5fc3RhdGUuaXNGb2N1c2VkID09PSBpc1Rlcm1pbmFsRm9jdXNlZCh0ZXJtaW5hbCkgJiZcbiAgICAgICAgICB0aGlzLl9zdGF0ZS5zdHlsZSA9PT0gdGVybWluYWwuZ2V0T3B0aW9uKCdjdXJzb3JTdHlsZScpICYmXG4gICAgICAgICAgdGhpcy5fc3RhdGUud2lkdGggPT09IHRoaXMuX2NlbGwuZ2V0V2lkdGgoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgIH1cblxuICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgdGhpcy5fY3Vyc29yUmVuZGVyZXJzW3Rlcm1pbmFsLmdldE9wdGlvbignY3Vyc29yU3R5bGUnKSB8fCAnYmxvY2snXSh0ZXJtaW5hbCwgdGVybWluYWwuYnVmZmVyLmN1cnNvclgsIHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZLCB0aGlzLl9jZWxsKTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuXG4gICAgdGhpcy5fc3RhdGUueCA9IHRlcm1pbmFsLmJ1ZmZlci5jdXJzb3JYO1xuICAgIHRoaXMuX3N0YXRlLnkgPSB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWTtcbiAgICB0aGlzLl9zdGF0ZS5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9zdGF0ZS5zdHlsZSA9IHRlcm1pbmFsLmdldE9wdGlvbignY3Vyc29yU3R5bGUnKTtcbiAgICB0aGlzLl9zdGF0ZS53aWR0aCA9IHRoaXMuX2NlbGwuZ2V0V2lkdGgoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2NsZWFyQ3Vyc29yKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zdGF0ZSkge1xuICAgICAgdGhpcy5fY2xlYXJDZWxscyh0aGlzLl9zdGF0ZS54LCB0aGlzLl9zdGF0ZS55LCB0aGlzLl9zdGF0ZS53aWR0aCwgMSk7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHtcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMCxcbiAgICAgICAgaXNGb2N1c2VkOiBmYWxzZSxcbiAgICAgICAgc3R5bGU6ICcnLFxuICAgICAgICB3aWR0aDogMFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJCYXJDdXJzb3IodGVybWluYWw6IFRlcm1pbmFsLCB4OiBudW1iZXIsIHk6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmN1cnNvci5jc3M7XG4gICAgdGhpcy5fZmlsbExlZnRMaW5lQXRDZWxsKHgsIHksIHRlcm1pbmFsLmdldE9wdGlvbignY3Vyc29yV2lkdGgnKSk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlckJsb2NrQ3Vyc29yKHRlcm1pbmFsOiBUZXJtaW5hbCwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzO1xuICAgIHRoaXMuX2ZpbGxDZWxscyh4LCB5LCBjZWxsLmdldFdpZHRoKCksIDEpO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzcztcbiAgICB0aGlzLl9maWxsQ2hhclRydWVDb2xvcih0ZXJtaW5hbCwgY2VsbCwgeCwgeSk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlclVuZGVybGluZUN1cnNvcih0ZXJtaW5hbDogVGVybWluYWwsIHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcztcbiAgICB0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoeCwgeSk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlckJsdXJDdXJzb3IodGVybWluYWw6IFRlcm1pbmFsLCB4OiBudW1iZXIsIHk6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICB0aGlzLl9jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcztcbiAgICB0aGlzLl9zdHJva2VSZWN0QXRDZWxsKHgsIHksIGNlbGwuZ2V0V2lkdGgoKSwgMSk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcbiAgfVxufVxuXG5jbGFzcyBDdXJzb3JCbGlua1N0YXRlTWFuYWdlciB7XG4gIHB1YmxpYyBpc0N1cnNvclZpc2libGU6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBfYW5pbWF0aW9uRnJhbWU6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfYmxpbmtTdGFydFRpbWVvdXQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfYmxpbmtJbnRlcnZhbDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgdGltZSBhdCB3aGljaCB0aGUgYW5pbWF0aW9uIGZyYW1lIHdhcyByZXN0YXJ0ZWQsIHRoaXMgaXMgdXNlZCBvbiB0aGVcbiAgICogbmV4dCByZW5kZXIgdG8gcmVzdGFydCB0aGUgdGltZXJzIHNvIHRoZXkgZG9uJ3QgbmVlZCB0byByZXN0YXJ0IHRoZSB0aW1lcnNcbiAgICogbXVsdGlwbGUgdGltZXMgb3ZlciBhIHNob3J0IHBlcmlvZC5cbiAgICovXG4gIHByaXZhdGUgX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQ6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICB0ZXJtaW5hbDogVGVybWluYWwsXG4gICAgcHJpdmF0ZSBfcmVuZGVyQ2FsbGJhY2s6ICgpID0+IHZvaWRcbiAgKSB7XG4gICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSB0cnVlO1xuICAgIGlmIChpc1Rlcm1pbmFsRm9jdXNlZCh0ZXJtaW5hbCkpIHtcbiAgICAgIHRoaXMuX3Jlc3RhcnRJbnRlcnZhbCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXQgaXNQYXVzZWQoKTogYm9vbGVhbiB7IHJldHVybiAhKHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0IHx8IHRoaXMuX2JsaW5rSW50ZXJ2YWwpOyB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2JsaW5rSW50ZXJ2YWwpIHtcbiAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX2JsaW5rSW50ZXJ2YWwpO1xuICAgICAgdGhpcy5fYmxpbmtJbnRlcnZhbCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0KSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0KTtcbiAgICAgIHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZSk7XG4gICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVzdGFydEJsaW5rQW5pbWF0aW9uKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzUGF1c2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIFNhdmUgYSB0aW1lc3RhbXAgc28gdGhhdCB0aGUgcmVzdGFydCBjYW4gYmUgZG9uZSBvbiB0aGUgbmV4dCBpbnRlcnZhbFxuICAgIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQgPSBEYXRlLm5vdygpO1xuICAgIC8vIEZvcmNlIGEgY3Vyc29yIHJlbmRlciB0byBlbnN1cmUgaXQncyB2aXNpYmxlIGFuZCBpbiB0aGUgY29ycmVjdCBwb3NpdGlvblxuICAgIHRoaXMuaXNDdXJzb3JWaXNpYmxlID0gdHJ1ZTtcbiAgICBpZiAoIXRoaXMuX2FuaW1hdGlvbkZyYW1lKSB7XG4gICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICB0aGlzLl9yZW5kZXJDYWxsYmFjaygpO1xuICAgICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3Jlc3RhcnRJbnRlcnZhbCh0aW1lVG9TdGFydDogbnVtYmVyID0gQkxJTktfSU5URVJWQUwpOiB2b2lkIHtcbiAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgaW50ZXJ2YWxcbiAgICBpZiAodGhpcy5fYmxpbmtJbnRlcnZhbCkge1xuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fYmxpbmtJbnRlcnZhbCk7XG4gICAgfVxuXG4gICAgLy8gU2V0dXAgdGhlIGluaXRpYWwgdGltZW91dCB3aGljaCB3aWxsIGhpZGUgdGhlIGN1cnNvciwgdGhpcyBpcyBkb25lIGJlZm9yZVxuICAgIC8vIHRoZSByZWd1bGFyIGludGVydmFsIGlzIHNldHVwIGluIG9yZGVyIHRvIHN1cHBvcnQgcmVzdGFydGluZyB0aGUgYmxpbmtcbiAgICAvLyBhbmltYXRpb24gaW4gYSBsaWdodHdlaWdodCB3YXkgKHdpdGhvdXQgdGhyYXNoaW5nIGNsZWFySW50ZXJ2YWwgYW5kXG4gICAgLy8gc2V0SW50ZXJ2YWwpLlxuICAgIHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0ID0gPG51bWJlcj48YW55PnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgLy8gQ2hlY2sgaWYgYW5vdGhlciBhbmltYXRpb24gcmVzdGFydCB3YXMgcmVxdWVzdGVkIHdoaWxlIHRoaXMgd2FzIGJlaW5nXG4gICAgICAvLyBzdGFydGVkXG4gICAgICBpZiAodGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCkge1xuICAgICAgICBjb25zdCB0aW1lID0gQkxJTktfSU5URVJWQUwgLSAoRGF0ZS5ub3coKSAtIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQpO1xuICAgICAgICB0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGltZSA+IDApIHtcbiAgICAgICAgICB0aGlzLl9yZXN0YXJ0SW50ZXJ2YWwodGltZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEhpZGUgdGhlIGN1cnNvclxuICAgICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuX3JlbmRlckNhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBibGluayBpbnRlcnZhbFxuICAgICAgdGhpcy5fYmxpbmtJbnRlcnZhbCA9IDxudW1iZXI+PGFueT5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIC8vIEFkanVzdCB0aGUgYW5pbWF0aW9uIHRpbWUgaWYgaXQgd2FzIHJlc3RhcnRlZFxuICAgICAgICBpZiAodGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCkge1xuICAgICAgICAgIC8vIGNhbGMgdGltZSBkaWZmXG4gICAgICAgICAgLy8gTWFrZSByZXN0YXJ0IGludGVydmFsIGRvIGEgc2V0VGltZW91dCBpbml0aWFsbHk/XG4gICAgICAgICAgY29uc3QgdGltZSA9IEJMSU5LX0lOVEVSVkFMIC0gKERhdGUubm93KCkgLSB0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkKTtcbiAgICAgICAgICB0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHRoaXMuX3Jlc3RhcnRJbnRlcnZhbCh0aW1lKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbnZlcnQgdmlzaWJpbGl0eSBhbmQgcmVuZGVyXG4gICAgICAgIHRoaXMuaXNDdXJzb3JWaXNpYmxlID0gIXRoaXMuaXNDdXJzb3JWaXNpYmxlO1xuICAgICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX3JlbmRlckNhbGxiYWNrKCk7XG4gICAgICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgICAgfSwgQkxJTktfSU5URVJWQUwpO1xuICAgIH0sIHRpbWVUb1N0YXJ0KTtcbiAgfVxuXG4gIHB1YmxpYyBwYXVzZSgpOiB2b2lkIHtcbiAgICB0aGlzLmlzQ3Vyc29yVmlzaWJsZSA9IHRydWU7XG4gICAgaWYgKHRoaXMuX2JsaW5rSW50ZXJ2YWwpIHtcbiAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX2JsaW5rSW50ZXJ2YWwpO1xuICAgICAgdGhpcy5fYmxpbmtJbnRlcnZhbCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0KSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0KTtcbiAgICAgIHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZSk7XG4gICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVzdW1lKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVzdGFydEludGVydmFsKCk7XG4gICAgdGhpcy5yZXN0YXJ0QmxpbmtBbmltYXRpb24odGVybWluYWwpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzVGVybWluYWxGb2N1c2VkKHRlcm1pbmFsOiBUZXJtaW5hbCk6IGJvb2xlYW4ge1xuICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGVybWluYWwudGV4dGFyZWEgJiYgZG9jdW1lbnQuaGFzRm9jdXMoKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUxpbmtpZmllckFjY2Vzc29yIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL1R5cGVzJztcbmltcG9ydCB7IFRlcm1pbmFsIH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgQmFzZVJlbmRlckxheWVyIH0gZnJvbSAnLi9CYXNlUmVuZGVyTGF5ZXInO1xuaW1wb3J0IHsgSU5WRVJURURfREVGQVVMVF9DT0xPUiB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQ29uc3RhbnRzJztcbmltcG9ydCB7IGlzMjU2Q29sb3IgfSBmcm9tICcuLi9hdGxhcy9DaGFyQXRsYXNVdGlscyc7XG5pbXBvcnQgeyBJQ29sb3JTZXQsIElMaW5raWZpZXJFdmVudCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcblxuZXhwb3J0IGNsYXNzIExpbmtSZW5kZXJMYXllciBleHRlbmRzIEJhc2VSZW5kZXJMYXllciB7XG4gIHByaXZhdGUgX3N0YXRlOiBJTGlua2lmaWVyRXZlbnQgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgekluZGV4OiBudW1iZXIsIGNvbG9yczogSUNvbG9yU2V0LCB0ZXJtaW5hbDogSUxpbmtpZmllckFjY2Vzc29yKSB7XG4gICAgc3VwZXIoY29udGFpbmVyLCAnbGluaycsIHpJbmRleCwgdHJ1ZSwgY29sb3JzKTtcbiAgICB0ZXJtaW5hbC5saW5raWZpZXIub25MaW5rSG92ZXIoZSA9PiB0aGlzLl9vbkxpbmtIb3ZlcihlKSk7XG4gICAgdGVybWluYWwubGlua2lmaWVyLm9uTGlua0xlYXZlKGUgPT4gdGhpcy5fb25MaW5rTGVhdmUoZSkpO1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZSh0ZXJtaW5hbDogVGVybWluYWwsIGRpbTogSVJlbmRlckRpbWVuc2lvbnMpOiB2b2lkIHtcbiAgICBzdXBlci5yZXNpemUodGVybWluYWwsIGRpbSk7XG4gICAgLy8gUmVzaXppbmcgdGhlIGNhbnZhcyBkaXNjYXJkcyB0aGUgY29udGVudHMgb2YgdGhlIGNhbnZhcyBzbyBjbGVhciBzdGF0ZVxuICAgIHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2NsZWFyQ3VycmVudExpbmsoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N0YXRlKSB7XG4gICAgICB0aGlzLl9jbGVhckNlbGxzKHRoaXMuX3N0YXRlLngxLCB0aGlzLl9zdGF0ZS55MSwgdGhpcy5fc3RhdGUuY29scyAtIHRoaXMuX3N0YXRlLngxLCAxKTtcbiAgICAgIGNvbnN0IG1pZGRsZVJvd0NvdW50ID0gdGhpcy5fc3RhdGUueTIgLSB0aGlzLl9zdGF0ZS55MSAtIDE7XG4gICAgICBpZiAobWlkZGxlUm93Q291bnQgPiAwKSB7XG4gICAgICAgIHRoaXMuX2NsZWFyQ2VsbHMoMCwgdGhpcy5fc3RhdGUueTEgKyAxLCB0aGlzLl9zdGF0ZS5jb2xzLCBtaWRkbGVSb3dDb3VudCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9jbGVhckNlbGxzKDAsIHRoaXMuX3N0YXRlLnkyLCB0aGlzLl9zdGF0ZS54MiwgMSk7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9vbkxpbmtIb3ZlcihlOiBJTGlua2lmaWVyRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZS5mZyA9PT0gSU5WRVJURURfREVGQVVMVF9DT0xPUikge1xuICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLmNzcztcbiAgICB9IGVsc2UgaWYgKGUuZmcgIT09IHVuZGVmaW5lZCAmJiBpczI1NkNvbG9yKGUuZmcpKSB7XG4gICAgICAvLyAyNTYgY29sb3Igc3VwcG9ydFxuICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5hbnNpW2UuZmchXS5jc3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3M7XG4gICAgfVxuXG4gICAgaWYgKGUueTEgPT09IGUueTIpIHtcbiAgICAgIC8vIFNpbmdsZSBsaW5lIGxpbmtcbiAgICAgIHRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscyhlLngxLCBlLnkxLCBlLngyIC0gZS54MSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE11bHRpLWxpbmUgbGlua1xuICAgICAgdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKGUueDEsIGUueTEsIGUuY29scyAtIGUueDEpO1xuICAgICAgZm9yIChsZXQgeSA9IGUueTEgKyAxOyB5IDwgZS55MjsgeSsrKSB7XG4gICAgICAgIHRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscygwLCB5LCBlLmNvbHMpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKDAsIGUueTIsIGUueDIpO1xuICAgIH1cbiAgICB0aGlzLl9zdGF0ZSA9IGU7XG4gIH1cblxuICBwcml2YXRlIF9vbkxpbmtMZWF2ZShlOiBJTGlua2lmaWVyRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9jbGVhckN1cnJlbnRMaW5rKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKlxuICogVGhpcyBmaWxlIGlzIHRoZSBlbnRyeSBwb2ludCBmb3IgYnJvd3NlcmlmeS5cbiAqL1xuXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwaW5ncy94dGVybS5kLnRzXCIvPlxuXG4vLyBVc2UgdHNjIHZlcnNpb24gKHlhcm4gd2F0Y2gpXG5pbXBvcnQgeyBUZXJtaW5hbCB9IGZyb20gJy4uL291dC9wdWJsaWMvVGVybWluYWwnO1xuaW1wb3J0IHsgQXR0YWNoQWRkb24gfSBmcm9tICcuLi9hZGRvbnMveHRlcm0tYWRkb24tYXR0YWNoL291dC9BdHRhY2hBZGRvbic7XG5pbXBvcnQgeyBGaXRBZGRvbiB9IGZyb20gJy4uL2FkZG9ucy94dGVybS1hZGRvbi1maXQvb3V0L0ZpdEFkZG9uJztcbmltcG9ydCB7IFNlYXJjaEFkZG9uLCBJU2VhcmNoT3B0aW9ucyB9IGZyb20gJy4uL2FkZG9ucy94dGVybS1hZGRvbi1zZWFyY2gvb3V0L1NlYXJjaEFkZG9uJztcbmltcG9ydCB7IFdlYkxpbmtzQWRkb24gfSBmcm9tICcuLi9hZGRvbnMveHRlcm0tYWRkb24td2ViLWxpbmtzL291dC9XZWJMaW5rc0FkZG9uJztcbmltcG9ydCB7IFdlYmdsQWRkb24gfSBmcm9tICcuLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvb3V0L1dlYmdsQWRkb24nO1xuXG4vLyBVc2Ugd2VicGFja2VkIHZlcnNpb24gKHlhcm4gcGFja2FnZSlcbi8vIGltcG9ydCB7IFRlcm1pbmFsIH0gZnJvbSAnLi4vbGliL3h0ZXJtJztcbi8vIGltcG9ydCB7IEF0dGFjaEFkZG9uIH0gZnJvbSAneHRlcm0tYWRkb24tYXR0YWNoJztcbi8vIGltcG9ydCB7IEZpdEFkZG9uIH0gZnJvbSAneHRlcm0tYWRkb24tZml0Jztcbi8vIGltcG9ydCB7IFNlYXJjaEFkZG9uLCBJU2VhcmNoT3B0aW9ucyB9IGZyb20gJ3h0ZXJtLWFkZG9uLXNlYXJjaCc7XG4vLyBpbXBvcnQgeyBXZWJMaW5rc0FkZG9uIH0gZnJvbSAneHRlcm0tYWRkb24td2ViLWxpbmtzJztcbi8vIGltcG9ydCB7IFdlYmdsQWRkb24gfSBmcm9tICd4dGVybS1hZGRvbi13ZWJnbCc7XG5cbi8vIFB1bGxpbmcgaW4gdGhlIG1vZHVsZSdzIHR5cGVzIHJlbGllcyBvbiB0aGUgPHJlZmVyZW5jZT4gYWJvdmUsIGl0J3MgbG9va3MgYVxuLy8gbGl0dGxlIHdlaXJkIGhlcmUgYXMgd2UncmUgaW1wb3J0aW5nIFwidGhpc1wiIG1vZHVsZVxuaW1wb3J0IHsgVGVybWluYWwgYXMgVGVybWluYWxUeXBlLCBJVGVybWluYWxPcHRpb25zIH0gZnJvbSAneHRlcm0nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElXaW5kb3dXaXRoVGVybWluYWwgZXh0ZW5kcyBXaW5kb3cge1xuICB0ZXJtOiBUZXJtaW5hbFR5cGU7XG4gIFRlcm1pbmFsPzogdHlwZW9mIFRlcm1pbmFsVHlwZTtcbiAgQXR0YWNoQWRkb24/OiB0eXBlb2YgQXR0YWNoQWRkb247XG4gIEZpdEFkZG9uPzogdHlwZW9mIEZpdEFkZG9uO1xuICBTZWFyY2hBZGRvbj86IHR5cGVvZiBTZWFyY2hBZGRvbjtcbiAgV2ViTGlua3NBZGRvbj86IHR5cGVvZiBXZWJMaW5rc0FkZG9uO1xuICBXZWJnbEFkZG9uPzogdHlwZW9mIFdlYmdsQWRkb247XG59XG5kZWNsYXJlIGxldCB3aW5kb3c6IElXaW5kb3dXaXRoVGVybWluYWw7XG5cbmxldCB0ZXJtO1xubGV0IHByb3RvY29sO1xubGV0IHNvY2tldFVSTDtcbmxldCBzb2NrZXQ7XG5sZXQgcGlkO1xuXG50eXBlIEFkZG9uVHlwZSA9ICdhdHRhY2gnIHwgJ2ZpdCcgfCAnc2VhcmNoJyB8ICd3ZWItbGlua3MnIHwgJ3dlYmdsJztcblxuaW50ZXJmYWNlIElEZW1vQWRkb248VCBleHRlbmRzIEFkZG9uVHlwZT4ge1xuICBuYW1lOiBUO1xuICBjYW5DaGFuZ2U6IGJvb2xlYW47XG4gIGN0b3I6XG4gICAgVCBleHRlbmRzICdhdHRhY2gnID8gdHlwZW9mIEF0dGFjaEFkZG9uIDpcbiAgICBUIGV4dGVuZHMgJ2ZpdCcgPyB0eXBlb2YgRml0QWRkb24gOlxuICAgIFQgZXh0ZW5kcyAnc2VhcmNoJyA/IHR5cGVvZiBTZWFyY2hBZGRvbiA6XG4gICAgVCBleHRlbmRzICd3ZWItbGlua3MnID8gdHlwZW9mIFdlYkxpbmtzQWRkb24gOlxuICAgIHR5cGVvZiBXZWJnbEFkZG9uO1xuICBpbnN0YW5jZT86XG4gICAgVCBleHRlbmRzICdhdHRhY2gnID8gQXR0YWNoQWRkb24gOlxuICAgIFQgZXh0ZW5kcyAnZml0JyA/IEZpdEFkZG9uIDpcbiAgICBUIGV4dGVuZHMgJ3NlYXJjaCcgPyBTZWFyY2hBZGRvbiA6XG4gICAgVCBleHRlbmRzICd3ZWItbGlua3MnID8gV2ViTGlua3NBZGRvbiA6XG4gICAgVCBleHRlbmRzICd3ZWJnbCcgPyBXZWJnbEFkZG9uIDpcbiAgICBuZXZlcjtcbn1cblxuY29uc3QgYWRkb25zOiB7IFtUIGluIEFkZG9uVHlwZV06IElEZW1vQWRkb248VD59ID0ge1xuICBhdHRhY2g6IHsgbmFtZTogJ2F0dGFjaCcsIGN0b3I6IEF0dGFjaEFkZG9uLCBjYW5DaGFuZ2U6IGZhbHNlIH0sXG4gIGZpdDogeyBuYW1lOiAnZml0JywgY3RvcjogRml0QWRkb24sIGNhbkNoYW5nZTogZmFsc2UgfSxcbiAgc2VhcmNoOiB7IG5hbWU6ICdzZWFyY2gnLCBjdG9yOiBTZWFyY2hBZGRvbiwgY2FuQ2hhbmdlOiB0cnVlIH0sXG4gICd3ZWItbGlua3MnOiB7IG5hbWU6ICd3ZWItbGlua3MnLCBjdG9yOiBXZWJMaW5rc0FkZG9uLCBjYW5DaGFuZ2U6IHRydWUgfSxcbiAgd2ViZ2w6IHsgbmFtZTogJ3dlYmdsJywgY3RvcjogV2ViZ2xBZGRvbiwgY2FuQ2hhbmdlOiB0cnVlIH1cbn07XG5cbmNvbnN0IHRlcm1pbmFsQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rlcm1pbmFsLWNvbnRhaW5lcicpO1xuY29uc3QgYWN0aW9uRWxlbWVudHMgPSB7XG4gIGZpbmROZXh0OiA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmluZC1uZXh0JyksXG4gIGZpbmRQcmV2aW91czogPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpbmQtcHJldmlvdXMnKVxufTtcbmNvbnN0IHBhZGRpbmdFbGVtZW50ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZGRpbmcnKTtcblxuZnVuY3Rpb24gc2V0UGFkZGluZygpOiB2b2lkIHtcbiAgdGVybS5lbGVtZW50LnN0eWxlLnBhZGRpbmcgPSBwYXJzZUludChwYWRkaW5nRWxlbWVudC52YWx1ZSwgMTApLnRvU3RyaW5nKCkgKyAncHgnO1xuICB0ZXJtLmZpdCgpO1xufVxuXG5mdW5jdGlvbiBnZXRTZWFyY2hPcHRpb25zKGU6IEtleWJvYXJkRXZlbnQpOiBJU2VhcmNoT3B0aW9ucyB7XG4gIHJldHVybiB7XG4gICAgcmVnZXg6IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVnZXgnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkLFxuICAgIHdob2xlV29yZDogKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aG9sZS13b3JkJykgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCxcbiAgICBjYXNlU2Vuc2l0aXZlOiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nhc2Utc2Vuc2l0aXZlJykgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCxcbiAgICBpbmNyZW1lbnRhbDogZS5rZXkgIT09IGBFbnRlcmBcbiAgfTtcbn1cblxuY29uc3QgZGlzcG9zZVJlY3JlYXRlQnV0dG9uSGFuZGxlciA9ICgpID0+IHtcbiAgLy8gSWYgdGhlIHRlcm1pbmFsIGV4aXN0cyBkaXNwb3NlIG9mIGl0LCBvdGhlcndpc2UgcmVjcmVhdGUgaXRcbiAgaWYgKHRlcm0pIHtcbiAgICB0ZXJtLmRpc3Bvc2UoKTtcbiAgICB0ZXJtID0gbnVsbDtcbiAgICB3aW5kb3cudGVybSA9IG51bGw7XG4gICAgc29ja2V0ID0gbnVsbDtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcG9zZScpLmlubmVySFRNTCA9ICdSZWNyZWF0ZSBUZXJtaW5hbCc7XG4gIH1cbiAgZWxzZSB7XG4gICAgY3JlYXRlVGVybWluYWwoKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcG9zZScpLmlubmVySFRNTCA9ICdEaXNwb3NlIHRlcm1pbmFsJztcbiAgfVxufTtcblxuaWYgKGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnL3Rlc3QnKSB7XG4gIHdpbmRvdy5UZXJtaW5hbCA9IFRlcm1pbmFsO1xuICB3aW5kb3cuQXR0YWNoQWRkb24gPSBBdHRhY2hBZGRvbjtcbiAgd2luZG93LkZpdEFkZG9uID0gRml0QWRkb247XG4gIHdpbmRvdy5TZWFyY2hBZGRvbiA9IFNlYXJjaEFkZG9uO1xuICB3aW5kb3cuV2ViTGlua3NBZGRvbiA9IFdlYkxpbmtzQWRkb247XG4gIHdpbmRvdy5XZWJnbEFkZG9uID0gV2ViZ2xBZGRvbjtcbn0gZWxzZSB7XG4gIGNyZWF0ZVRlcm1pbmFsKCk7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkaXNwb3NlUmVjcmVhdGVCdXR0b25IYW5kbGVyKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGVybWluYWwoKTogdm9pZCB7XG4gIC8vIENsZWFuIHRlcm1pbmFsXG4gIHdoaWxlICh0ZXJtaW5hbENvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICB0ZXJtaW5hbENvbnRhaW5lci5yZW1vdmVDaGlsZCh0ZXJtaW5hbENvbnRhaW5lci5jaGlsZHJlblswXSk7XG4gIH1cblxuICBjb25zdCBpc1dpbmRvd3MgPSBbJ1dpbmRvd3MnLCAnV2luMTYnLCAnV2luMzInLCAnV2luQ0UnXS5pbmRleE9mKG5hdmlnYXRvci5wbGF0Zm9ybSkgPj0gMDtcbiAgdGVybSA9IG5ldyBUZXJtaW5hbCh7XG4gICAgd2luZG93c01vZGU6IGlzV2luZG93c1xuICB9IGFzIElUZXJtaW5hbE9wdGlvbnMpO1xuXG4gIC8vIExvYWQgYWRkb25zXG4gIGNvbnN0IHR5cGVkVGVybSA9IHRlcm0gYXMgVGVybWluYWxUeXBlO1xuICBhZGRvbnNbJ3dlYi1saW5rcyddLmluc3RhbmNlID0gbmV3IFdlYkxpbmtzQWRkb24oKTtcbiAgYWRkb25zLnNlYXJjaC5pbnN0YW5jZSA9IG5ldyBTZWFyY2hBZGRvbigpO1xuICBhZGRvbnMuZml0Lmluc3RhbmNlID0gbmV3IEZpdEFkZG9uKCk7XG4gIHR5cGVkVGVybS5sb2FkQWRkb24oYWRkb25zWyd3ZWItbGlua3MnXS5pbnN0YW5jZSk7XG4gIHR5cGVkVGVybS5sb2FkQWRkb24oYWRkb25zLnNlYXJjaC5pbnN0YW5jZSk7XG4gIHR5cGVkVGVybS5sb2FkQWRkb24oYWRkb25zLmZpdC5pbnN0YW5jZSk7XG5cbiAgd2luZG93LnRlcm0gPSB0ZXJtOyAgLy8gRXhwb3NlIGB0ZXJtYCB0byB3aW5kb3cgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlc1xuICB0ZXJtLm9uUmVzaXplKChzaXplOiB7IGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyIH0pID0+IHtcbiAgICBpZiAoIXBpZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb2xzID0gc2l6ZS5jb2xzO1xuICAgIGNvbnN0IHJvd3MgPSBzaXplLnJvd3M7XG4gICAgY29uc3QgdXJsID0gJy90ZXJtaW5hbHMvJyArIHBpZCArICcvc2l6ZT9jb2xzPScgKyBjb2xzICsgJyZyb3dzPScgKyByb3dzO1xuXG4gICAgZmV0Y2godXJsLCB7bWV0aG9kOiAnUE9TVCd9KTtcbiAgfSk7XG4gIHByb3RvY29sID0gKGxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JykgPyAnd3NzOi8vJyA6ICd3czovLyc7XG4gIHNvY2tldFVSTCA9IHByb3RvY29sICsgbG9jYXRpb24uaG9zdG5hbWUgKyAoKGxvY2F0aW9uLnBvcnQpID8gKCc6JyArIGxvY2F0aW9uLnBvcnQpIDogJycpICsgJy90ZXJtaW5hbHMvJztcblxuICB0ZXJtLm9wZW4odGVybWluYWxDb250YWluZXIpO1xuICBhZGRvbnMuZml0Lmluc3RhbmNlIS5maXQoKTtcbiAgdGVybS5mb2N1cygpO1xuXG4gIGFkZERvbUxpc3RlbmVyKHBhZGRpbmdFbGVtZW50LCAnY2hhbmdlJywgc2V0UGFkZGluZyk7XG5cbiAgYWRkRG9tTGlzdGVuZXIoYWN0aW9uRWxlbWVudHMuZmluZE5leHQsICdrZXl1cCcsIChlKSA9PiB7XG4gICAgYWRkb25zLnNlYXJjaC5pbnN0YW5jZS5maW5kTmV4dChhY3Rpb25FbGVtZW50cy5maW5kTmV4dC52YWx1ZSwgZ2V0U2VhcmNoT3B0aW9ucyhlKSk7XG4gIH0pO1xuXG4gIGFkZERvbUxpc3RlbmVyKGFjdGlvbkVsZW1lbnRzLmZpbmRQcmV2aW91cywgJ2tleXVwJywgKGUpID0+IHtcbiAgICBhZGRvbnMuc2VhcmNoLmluc3RhbmNlLmZpbmRQcmV2aW91cyhhY3Rpb25FbGVtZW50cy5maW5kUHJldmlvdXMudmFsdWUsIGdldFNlYXJjaE9wdGlvbnMoZSkpO1xuICB9KTtcblxuICAvLyBmaXQgaXMgY2FsbGVkIHdpdGhpbiBhIHNldFRpbWVvdXQsIGNvbHMgYW5kIHJvd3MgbmVlZCB0aGlzLlxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBpbml0T3B0aW9ucyh0ZXJtKTtcbiAgICAvLyBUT0RPOiBDbGVhbiB0aGlzIHVwLCBvcHQtY29scy9yb3dzIGRvZXNuJ3QgZXhpc3QgYW55bW9yZVxuICAgICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgb3B0LWNvbHNgKSkudmFsdWUgPSB0ZXJtLmNvbHM7XG4gICAgKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBvcHQtcm93c2ApKS52YWx1ZSA9IHRlcm0ucm93cztcbiAgICBwYWRkaW5nRWxlbWVudC52YWx1ZSA9ICcwJztcblxuICAgIC8vIFNldCB0ZXJtaW5hbCBzaXplIGFnYWluIHRvIHNldCB0aGUgc3BlY2lmaWMgZGltZW5zaW9ucyBvbiB0aGUgZGVtb1xuICAgIHVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuXG4gICAgZmV0Y2goJy90ZXJtaW5hbHM/Y29scz0nICsgdGVybS5jb2xzICsgJyZyb3dzPScgKyB0ZXJtLnJvd3MsIHttZXRob2Q6ICdQT1NUJ30pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmVzLnRleHQoKS50aGVuKChwcm9jZXNzSWQpID0+IHtcbiAgICAgICAgcGlkID0gcHJvY2Vzc0lkO1xuICAgICAgICBzb2NrZXRVUkwgKz0gcHJvY2Vzc0lkO1xuICAgICAgICBzb2NrZXQgPSBuZXcgV2ViU29ja2V0KHNvY2tldFVSTCk7XG4gICAgICAgIHNvY2tldC5vbm9wZW4gPSBydW5SZWFsVGVybWluYWw7XG4gICAgICAgIHNvY2tldC5vbmNsb3NlID0gcnVuRmFrZVRlcm1pbmFsO1xuICAgICAgICBzb2NrZXQub25lcnJvciA9IHJ1bkZha2VUZXJtaW5hbDtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCAwKTtcbn1cblxuZnVuY3Rpb24gcnVuUmVhbFRlcm1pbmFsKCk6IHZvaWQge1xuICBhZGRvbnMuYXR0YWNoLmluc3RhbmNlID0gbmV3IEF0dGFjaEFkZG9uKHNvY2tldCk7XG4gIHRlcm0ubG9hZEFkZG9uKGFkZG9ucy5hdHRhY2guaW5zdGFuY2UpO1xuICB0ZXJtLl9pbml0aWFsaXplZCA9IHRydWU7XG4gIGluaXRBZGRvbnModGVybSk7XG59XG5cbmZ1bmN0aW9uIHJ1bkZha2VUZXJtaW5hbCgpOiB2b2lkIHtcbiAgaWYgKHRlcm0uX2luaXRpYWxpemVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGVybS5faW5pdGlhbGl6ZWQgPSB0cnVlO1xuICBpbml0QWRkb25zKHRlcm0pO1xuXG4gIHRlcm0ucHJvbXB0ID0gKCkgPT4ge1xuICAgIHRlcm0ud3JpdGUoJ1xcclxcbiQgJyk7XG4gIH07XG5cbiAgdGVybS53cml0ZWxuKCdXZWxjb21lIHRvIHh0ZXJtLmpzJyk7XG4gIHRlcm0ud3JpdGVsbignVGhpcyBpcyBhIGxvY2FsIHRlcm1pbmFsIGVtdWxhdGlvbiwgd2l0aG91dCBhIHJlYWwgdGVybWluYWwgaW4gdGhlIGJhY2stZW5kLicpO1xuICB0ZXJtLndyaXRlbG4oJ1R5cGUgc29tZSBrZXlzIGFuZCBjb21tYW5kcyB0byBwbGF5IGFyb3VuZC4nKTtcbiAgdGVybS53cml0ZWxuKCcnKTtcbiAgdGVybS5wcm9tcHQoKTtcblxuICB0ZXJtLm9uS2V5KChlOiB7IGtleTogc3RyaW5nLCBkb21FdmVudDogS2V5Ym9hcmRFdmVudCB9KSA9PiB7XG4gICAgY29uc3QgZXYgPSBlLmRvbUV2ZW50O1xuICAgIGNvbnN0IHByaW50YWJsZSA9ICFldi5hbHRLZXkgJiYgIWV2LmN0cmxLZXkgJiYgIWV2Lm1ldGFLZXk7XG5cbiAgICBpZiAoZXYua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgIHRlcm0ucHJvbXB0KCk7XG4gICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09PSA4KSB7XG4gICAgIC8vIERvIG5vdCBkZWxldGUgdGhlIHByb21wdFxuICAgICAgaWYgKHRlcm0uX2NvcmUuYnVmZmVyLnggPiAyKSB7XG4gICAgICAgIHRlcm0ud3JpdGUoJ1xcYiBcXGInKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHByaW50YWJsZSkge1xuICAgICAgdGVybS53cml0ZShlLmtleSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gaW5pdE9wdGlvbnModGVybTogVGVybWluYWxUeXBlKTogdm9pZCB7XG4gIGNvbnN0IGJsYWNrbGlzdGVkT3B0aW9ucyA9IFtcbiAgICAvLyBJbnRlcm5hbCBvbmx5IG9wdGlvbnNcbiAgICAnY2FuY2VsRXZlbnRzJyxcbiAgICAnY29udmVydEVvbCcsXG4gICAgJ2hhbmRsZXInLFxuICAgICdzY3JlZW5LZXlzJyxcbiAgICAndGVybU5hbWUnLFxuICAgICd1c2VGbG93Q29udHJvbCcsXG4gICAgLy8gQ29tcGxleCBvcHRpb25cbiAgICAndGhlbWUnXG4gIF07XG4gIGNvbnN0IHN0cmluZ09wdGlvbnMgPSB7XG4gICAgYmVsbFNvdW5kOiBudWxsLFxuICAgIGJlbGxTdHlsZTogWydub25lJywgJ3NvdW5kJ10sXG4gICAgY3Vyc29yU3R5bGU6IFsnYmxvY2snLCAndW5kZXJsaW5lJywgJ2JhciddLFxuICAgIGZhc3RTY3JvbGxNb2RpZmllcjogWydhbHQnLCAnY3RybCcsICdzaGlmdCcsIHVuZGVmaW5lZF0sXG4gICAgZm9udEZhbWlseTogbnVsbCxcbiAgICBmb250V2VpZ2h0OiBbJ25vcm1hbCcsICdib2xkJywgJzEwMCcsICcyMDAnLCAnMzAwJywgJzQwMCcsICc1MDAnLCAnNjAwJywgJzcwMCcsICc4MDAnLCAnOTAwJ10sXG4gICAgZm9udFdlaWdodEJvbGQ6IFsnbm9ybWFsJywgJ2JvbGQnLCAnMTAwJywgJzIwMCcsICczMDAnLCAnNDAwJywgJzUwMCcsICc2MDAnLCAnNzAwJywgJzgwMCcsICc5MDAnXSxcbiAgICBsb2dMZXZlbDogWydkZWJ1ZycsICdpbmZvJywgJ3dhcm4nLCAnZXJyb3InLCAnb2ZmJ10sXG4gICAgcmVuZGVyZXJUeXBlOiBbJ2RvbScsICdjYW52YXMnXSxcbiAgICB3b3JkU2VwYXJhdG9yOiBudWxsXG4gIH07XG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3Qua2V5cygoPGFueT50ZXJtKS5fY29yZS5vcHRpb25zKTtcbiAgY29uc3QgYm9vbGVhbk9wdGlvbnMgPSBbXTtcbiAgY29uc3QgbnVtYmVyT3B0aW9ucyA9IFtdO1xuICBvcHRpb25zLmZpbHRlcihvID0+IGJsYWNrbGlzdGVkT3B0aW9ucy5pbmRleE9mKG8pID09PSAtMSkuZm9yRWFjaChvID0+IHtcbiAgICBzd2l0Y2ggKHR5cGVvZiB0ZXJtLmdldE9wdGlvbihvKSkge1xuICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgIGJvb2xlYW5PcHRpb25zLnB1c2gobyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgbnVtYmVyT3B0aW9ucy5wdXNoKG8pO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhzdHJpbmdPcHRpb25zKS5pbmRleE9mKG8pID09PSAtMSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgVW5yZWNvZ25pemVkIG9wdGlvbjogXCIke299XCJgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgbGV0IGh0bWwgPSAnJztcbiAgaHRtbCArPSAnPGRpdiBjbGFzcz1cIm9wdGlvbi1ncm91cFwiPic7XG4gIGJvb2xlYW5PcHRpb25zLmZvckVhY2gobyA9PiB7XG4gICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cIm9wdGlvblwiPjxsYWJlbD48aW5wdXQgaWQ9XCJvcHQtJHtvfVwiIHR5cGU9XCJjaGVja2JveFwiICR7dGVybS5nZXRPcHRpb24obykgPyAnY2hlY2tlZCcgOiAnJ30vPiAke299PC9sYWJlbD48L2Rpdj5gO1xuICB9KTtcbiAgaHRtbCArPSAnPC9kaXY+PGRpdiBjbGFzcz1cIm9wdGlvbi1ncm91cFwiPic7XG4gIG51bWJlck9wdGlvbnMuZm9yRWFjaChvID0+IHtcbiAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwib3B0aW9uXCI+PGxhYmVsPiR7b30gPGlucHV0IGlkPVwib3B0LSR7b31cIiB0eXBlPVwibnVtYmVyXCIgdmFsdWU9XCIke3Rlcm0uZ2V0T3B0aW9uKG8pfVwiIHN0ZXA9XCIke28gPT09ICdsaW5lSGVpZ2h0JyB8fCBvID09PSAnc2Nyb2xsU2Vuc2l0aXZpdHknID8gJzAuMScgOiAnMSd9XCIvPjwvbGFiZWw+PC9kaXY+YDtcbiAgfSk7XG4gIGh0bWwgKz0gJzwvZGl2PjxkaXYgY2xhc3M9XCJvcHRpb24tZ3JvdXBcIj4nO1xuICBPYmplY3Qua2V5cyhzdHJpbmdPcHRpb25zKS5mb3JFYWNoKG8gPT4ge1xuICAgIGlmIChzdHJpbmdPcHRpb25zW29dKSB7XG4gICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwib3B0aW9uXCI+PGxhYmVsPiR7b30gPHNlbGVjdCBpZD1cIm9wdC0ke299XCI+JHtzdHJpbmdPcHRpb25zW29dLm1hcCh2ID0+IGA8b3B0aW9uICR7dGVybS5nZXRPcHRpb24obykgPT09IHYgPyAnc2VsZWN0ZWQnIDogJyd9PiR7dn08L29wdGlvbj5gKS5qb2luKCcnKX08L3NlbGVjdD48L2xhYmVsPjwvZGl2PmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJvcHRpb25cIj48bGFiZWw+JHtvfSA8aW5wdXQgaWQ9XCJvcHQtJHtvfVwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCIke3Rlcm0uZ2V0T3B0aW9uKG8pfVwiLz48L2xhYmVsPjwvZGl2PmA7XG4gICAgfVxuICB9KTtcbiAgaHRtbCArPSAnPC9kaXY+JztcblxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3B0aW9ucy1jb250YWluZXInKTtcbiAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7XG5cbiAgLy8gQXR0YWNoIGxpc3RlbmVyc1xuICBib29sZWFuT3B0aW9ucy5mb3JFYWNoKG8gPT4ge1xuICAgIGNvbnN0IGlucHV0ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG9wdC0ke299YCk7XG4gICAgYWRkRG9tTGlzdGVuZXIoaW5wdXQsICdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnY2hhbmdlJywgbywgaW5wdXQuY2hlY2tlZCk7XG4gICAgICB0ZXJtLnNldE9wdGlvbihvLCBpbnB1dC5jaGVja2VkKTtcbiAgICB9KTtcbiAgfSk7XG4gIG51bWJlck9wdGlvbnMuZm9yRWFjaChvID0+IHtcbiAgICBjb25zdCBpbnB1dCA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBvcHQtJHtvfWApO1xuICAgIGFkZERvbUxpc3RlbmVyKGlucHV0LCAnY2hhbmdlJywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ2NoYW5nZScsIG8sIGlucHV0LnZhbHVlKTtcbiAgICAgIGlmIChvID09PSAnY29scycgfHwgbyA9PT0gJ3Jvd3MnKSB7XG4gICAgICAgIHVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuICAgICAgfSBlbHNlIGlmIChvID09PSAnbGluZUhlaWdodCcgfHwgbyA9PT0gJ3Njcm9sbFNlbnNpdGl2aXR5Jykge1xuICAgICAgICB0ZXJtLnNldE9wdGlvbihvLCBwYXJzZUZsb2F0KGlucHV0LnZhbHVlKSk7XG4gICAgICAgIHVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGVybS5zZXRPcHRpb24obywgcGFyc2VJbnQoaW5wdXQudmFsdWUpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIE9iamVjdC5rZXlzKHN0cmluZ09wdGlvbnMpLmZvckVhY2gobyA9PiB7XG4gICAgY29uc3QgaW5wdXQgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgb3B0LSR7b31gKTtcbiAgICBhZGREb21MaXN0ZW5lcihpbnB1dCwgJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdjaGFuZ2UnLCBvLCBpbnB1dC52YWx1ZSk7XG4gICAgICB0ZXJtLnNldE9wdGlvbihvLCBpbnB1dC52YWx1ZSk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0QWRkb25zKHRlcm06IFRlcm1pbmFsVHlwZSk6IHZvaWQge1xuICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgT2JqZWN0LmtleXMoYWRkb25zKS5mb3JFYWNoKChuYW1lOiBBZGRvblR5cGUpID0+IHtcbiAgICBjb25zdCBhZGRvbiA9IGFkZG9uc1tuYW1lXTtcbiAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcbiAgICBjaGVja2JveC5jaGVja2VkID0gISFhZGRvbi5pbnN0YW5jZTtcbiAgICBpZiAoIWFkZG9uLmNhbkNoYW5nZSkge1xuICAgICAgY2hlY2tib3guZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgICBhZGRvbi5pbnN0YW5jZSA9IG5ldyBhZGRvbi5jdG9yKCk7XG4gICAgICAgIHRlcm0ubG9hZEFkZG9uKGFkZG9uLmluc3RhbmNlKTtcbiAgICAgICAgaWYgKG5hbWUgPT09ICd3ZWJnbCcpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoKGFkZG9uLmluc3RhbmNlIGFzIFdlYmdsQWRkb24pLnRleHR1cmVBdGxhcyk7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnd2ViZ2wnKSB7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCgoYWRkb24uaW5zdGFuY2UgYXMgV2ViZ2xBZGRvbikudGV4dHVyZUF0bGFzKTtcbiAgICAgICAgfVxuICAgICAgICBhZGRvbi5pbnN0YW5jZSEuZGlzcG9zZSgpO1xuICAgICAgICBhZGRvbi5pbnN0YW5jZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgbGFiZWwuY2xhc3NMaXN0LmFkZCgnYWRkb24nKTtcbiAgICBpZiAoIWFkZG9uLmNhbkNoYW5nZSkge1xuICAgICAgbGFiZWwudGl0bGUgPSAnVGhpcyBhZGRvbiBpcyBuZWVkZWQgZm9yIHRoZSBkZW1vIHRvIG9wZXJhdGUnO1xuICAgIH1cbiAgICBsYWJlbC5hcHBlbmRDaGlsZChjaGVja2JveCk7XG4gICAgbGFiZWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobmFtZSkpO1xuICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2FkZG9uJyk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG4gIH0pO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkb25zLWNvbnRhaW5lcicpLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbn1cblxuZnVuY3Rpb24gYWRkRG9tTGlzdGVuZXIoZWxlbWVudDogSFRNTEVsZW1lbnQsIHR5cGU6IHN0cmluZywgaGFuZGxlcjogKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnkpOiB2b2lkIHtcbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpO1xuICB0ZXJtLl9jb3JlLnJlZ2lzdGVyKHsgZGlzcG9zZTogKCkgPT4gZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpIH0pO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVUZXJtaW5hbFNpemUoKTogdm9pZCB7XG4gIGNvbnN0IGNvbHMgPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG9wdC1jb2xzYCkpLnZhbHVlLCAxMCk7XG4gIGNvbnN0IHJvd3MgPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG9wdC1yb3dzYCkpLnZhbHVlLCAxMCk7XG4gIGNvbnN0IHdpZHRoID0gKGNvbHMgKiB0ZXJtLl9jb3JlLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoICsgdGVybS5fY29yZS52aWV3cG9ydC5zY3JvbGxCYXJXaWR0aCkudG9TdHJpbmcoKSArICdweCc7XG4gIGNvbnN0IGhlaWdodCA9IChyb3dzICogdGVybS5fY29yZS5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQpLnRvU3RyaW5nKCkgKyAncHgnO1xuICB0ZXJtaW5hbENvbnRhaW5lci5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICB0ZXJtaW5hbENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XG4gIGFkZG9ucy5maXQuaW5zdGFuY2UuZml0KCk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCAqIGFzIFN0cmluZ3MgZnJvbSAnLi9icm93c2VyL0xvY2FsaXphYmxlU3RyaW5ncyc7XG5pbXBvcnQgeyBJVGVybWluYWwgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IElCdWZmZXIgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IGlzTWFjIH0gZnJvbSAnY29tbW9uL1BsYXRmb3JtJztcbmltcG9ydCB7IFJlbmRlckRlYm91bmNlciB9IGZyb20gJ2Jyb3dzZXIvUmVuZGVyRGVib3VuY2VyJztcbmltcG9ydCB7IGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lciB9IGZyb20gJ2Jyb3dzZXIvTGlmZWN5Y2xlJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IFNjcmVlbkRwck1vbml0b3IgfSBmcm9tICdicm93c2VyL1NjcmVlbkRwck1vbml0b3InO1xuaW1wb3J0IHsgSVJlbmRlclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuY29uc3QgTUFYX1JPV1NfVE9fUkVBRCA9IDIwO1xuXG5jb25zdCBlbnVtIEJvdW5kYXJ5UG9zaXRpb24ge1xuICBUT1AsXG4gIEJPVFRPTVxufVxuXG5leHBvcnQgY2xhc3MgQWNjZXNzaWJpbGl0eU1hbmFnZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIHtcbiAgcHJpdmF0ZSBfYWNjZXNzaWJpbGl0eVRyZWVSb290OiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfcm93Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfcm93RWxlbWVudHM6IEhUTUxFbGVtZW50W107XG4gIHByaXZhdGUgX2xpdmVSZWdpb246IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIF9saXZlUmVnaW9uTGluZUNvdW50OiBudW1iZXIgPSAwO1xuXG4gIHByaXZhdGUgX3JlbmRlclJvd3NEZWJvdW5jZXI6IFJlbmRlckRlYm91bmNlcjtcbiAgcHJpdmF0ZSBfc2NyZWVuRHByTW9uaXRvcjogU2NyZWVuRHByTW9uaXRvcjtcblxuICBwcml2YXRlIF90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXI6IChlOiBGb2N1c0V2ZW50KSA9PiB2b2lkO1xuICBwcml2YXRlIF9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXI6IChlOiBGb2N1c0V2ZW50KSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBUaGlzIHF1ZXVlIGhhcyBhIGNoYXJhY3RlciBwdXNoZWQgdG8gaXQgZm9yIGtleXMgdGhhdCBhcmUgcHJlc3NlZCwgaWYgdGhlXG4gICAqIG5leHQgY2hhcmFjdGVyIGFkZGVkIHRvIHRoZSB0ZXJtaW5hbCBpcyBlcXVhbCB0byB0aGUga2V5IGNoYXIgdGhlbiBpdCBpc1xuICAgKiBub3QgYW5ub3VuY2VkIChhZGRlZCB0byBsaXZlIHJlZ2lvbikgYmVjYXVzZSBpdCBoYXMgYWxyZWFkeSBiZWVuIGFubm91bmNlZFxuICAgKiBieSB0aGUgdGV4dGFyZWEgZXZlbnQgKHdoaWNoIGNhbm5vdCBiZSBjYW5jZWxlZCkuIFRoZXJlIGFyZSBzb21lIHJhY2VcbiAgICogY29uZGl0aW9uIGNhc2VzIGlmIHRoZXJlIGlzIHR5cGluZyB3aGlsZSBkYXRhIGlzIHN0cmVhbWluZywgYnV0IHRoaXMgY292ZXJzXG4gICAqIHRoZSBtYWluIGNhc2Ugb2YgdHlwaW5nIGludG8gdGhlIHByb21wdCBhbmQgaW5wdXR0aW5nIHRoZSBhbnN3ZXIgdG8gYVxuICAgKiBxdWVzdGlvbiAoWS9OLCBldGMuKS5cbiAgICovXG4gIHByaXZhdGUgX2NoYXJzVG9Db25zdW1lOiBzdHJpbmdbXSA9IFtdO1xuXG4gIHByaXZhdGUgX2NoYXJzVG9Bbm5vdW5jZTogc3RyaW5nID0gJyc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdGVybWluYWw6IElUZXJtaW5hbCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9yZW5kZXJTZXJ2aWNlOiBJUmVuZGVyU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdC5jbGFzc0xpc3QuYWRkKCd4dGVybS1hY2Nlc3NpYmlsaXR5Jyk7XG5cbiAgICB0aGlzLl9yb3dDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LmFkZCgneHRlcm0tYWNjZXNzaWJpbGl0eS10cmVlJyk7XG4gICAgdGhpcy5fcm93RWxlbWVudHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3Rlcm1pbmFsLnJvd3M7IGkrKykge1xuICAgICAgdGhpcy5fcm93RWxlbWVudHNbaV0gPSB0aGlzLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKTtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9yb3dFbGVtZW50c1tpXSk7XG4gICAgfVxuXG4gICAgdGhpcy5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyID0gZSA9PiB0aGlzLl9vbkJvdW5kYXJ5Rm9jdXMoZSwgQm91bmRhcnlQb3NpdGlvbi5UT1ApO1xuICAgIHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciA9IGUgPT4gdGhpcy5fb25Cb3VuZGFyeUZvY3VzKGUsIEJvdW5kYXJ5UG9zaXRpb24uQk9UVE9NKTtcbiAgICB0aGlzLl9yb3dFbGVtZW50c1swXS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX3RvcEJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7XG4gICAgdGhpcy5fcm93RWxlbWVudHNbdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoIC0gMV0uYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpO1xuXG4gICAgdGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCk7XG4gICAgdGhpcy5fYWNjZXNzaWJpbGl0eVRyZWVSb290LmFwcGVuZENoaWxkKHRoaXMuX3Jvd0NvbnRhaW5lcik7XG5cbiAgICB0aGlzLl9yZW5kZXJSb3dzRGVib3VuY2VyID0gbmV3IFJlbmRlckRlYm91bmNlcih0aGlzLl9yZW5kZXJSb3dzLmJpbmQodGhpcykpO1xuICAgIHRoaXMuX3JlZnJlc2hSb3dzKCk7XG5cbiAgICB0aGlzLl9saXZlUmVnaW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fbGl2ZVJlZ2lvbi5jbGFzc0xpc3QuYWRkKCdsaXZlLXJlZ2lvbicpO1xuICAgIHRoaXMuX2xpdmVSZWdpb24uc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCAnYXNzZXJ0aXZlJyk7XG4gICAgdGhpcy5fYWNjZXNzaWJpbGl0eVRyZWVSb290LmFwcGVuZENoaWxkKHRoaXMuX2xpdmVSZWdpb24pO1xuXG4gICAgdGhpcy5fdGVybWluYWwuZWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCB0aGlzLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QpO1xuXG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJSb3dzRGVib3VuY2VyKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uUmVzaXplKGUgPT4gdGhpcy5fb25SZXNpemUoZS5yb3dzKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fdGVybWluYWwub25SZW5kZXIoZSA9PiB0aGlzLl9yZWZyZXNoUm93cyhlLnN0YXJ0LCBlLmVuZCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uU2Nyb2xsKCgpID0+IHRoaXMuX3JlZnJlc2hSb3dzKCkpKTtcbiAgICAvLyBMaW5lIGZlZWQgaXMgYW4gaXNzdWUgYXMgdGhlIHByb21wdCB3b24ndCBiZSByZWFkIG91dCBhZnRlciBhIGNvbW1hbmQgaXMgcnVuXG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5vbkExMXlDaGFyKGNoYXIgPT4gdGhpcy5fb25DaGFyKGNoYXIpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5vbkxpbmVGZWVkKCgpID0+IHRoaXMuX29uQ2hhcignXFxuJykpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uQTExeVRhYihzcGFjZUNvdW50ID0+IHRoaXMuX29uVGFiKHNwYWNlQ291bnQpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5vbktleShlID0+IHRoaXMuX29uS2V5KGUua2V5KSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fdGVybWluYWwub25CbHVyKCgpID0+IHRoaXMuX2NsZWFyTGl2ZVJlZ2lvbigpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uRGltZW5zaW9uc0NoYW5nZSgoKSA9PiB0aGlzLl9yZWZyZXNoUm93c0RpbWVuc2lvbnMoKSkpO1xuXG4gICAgdGhpcy5fc2NyZWVuRHByTW9uaXRvciA9IG5ldyBTY3JlZW5EcHJNb25pdG9yKCk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9zY3JlZW5EcHJNb25pdG9yKTtcbiAgICB0aGlzLl9zY3JlZW5EcHJNb25pdG9yLnNldExpc3RlbmVyKCgpID0+IHRoaXMuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpKTtcbiAgICAvLyBUaGlzIHNob3VsZG4ndCBiZSBuZWVkZWQgb24gbW9kZXJuIGJyb3dzZXJzIGJ1dCBpcyBwcmVzZW50IGluIGNhc2UgdGhlXG4gICAgLy8gbWVkaWEgcXVlcnkgdGhhdCBkcml2ZXMgdGhlIFNjcmVlbkRwck1vbml0b3IgaXNuJ3Qgc3VwcG9ydGVkXG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIod2luZG93LCAncmVzaXplJywgKCkgPT4gdGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCkpKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl90ZXJtaW5hbC5lbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdCk7XG4gICAgdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIHByaXZhdGUgX29uQm91bmRhcnlGb2N1cyhlOiBGb2N1c0V2ZW50LCBwb3NpdGlvbjogQm91bmRhcnlQb3NpdGlvbik6IHZvaWQge1xuICAgIGNvbnN0IGJvdW5kYXJ5RWxlbWVudCA9IDxIVE1MRWxlbWVudD5lLnRhcmdldDtcbiAgICBjb25zdCBiZWZvcmVCb3VuZGFyeUVsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50c1twb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1AgPyAxIDogdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoIC0gMl07XG5cbiAgICAvLyBEb24ndCBzY3JvbGwgaWYgdGhlIGJ1ZmZlciB0b3AgaGFzIHJlYWNoZWQgdGhlIGVuZCBpbiB0aGF0IGRpcmVjdGlvblxuICAgIGNvbnN0IHBvc0luU2V0ID0gYm91bmRhcnlFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1wb3NpbnNldCcpO1xuICAgIGNvbnN0IGxhc3RSb3dQb3MgPSBwb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1AgPyAnMScgOiBgJHt0aGlzLl90ZXJtaW5hbC5idWZmZXIubGluZXMubGVuZ3RofWA7XG4gICAgaWYgKHBvc0luU2V0ID09PSBsYXN0Um93UG9zKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRG9uJ3Qgc2Nyb2xsIHdoZW4gdGhlIGxhc3QgZm9jdXNlZCBpdGVtIHdhcyBub3QgdGhlIHNlY29uZCByb3cgKGZvY3VzIGlzIGdvaW5nIHRoZSBvdGhlclxuICAgIC8vIGRpcmVjdGlvbilcbiAgICBpZiAoZS5yZWxhdGVkVGFyZ2V0ICE9PSBiZWZvcmVCb3VuZGFyeUVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgb2xkIGJvdW5kYXJ5IGVsZW1lbnQgZnJvbSBhcnJheVxuICAgIGxldCB0b3BCb3VuZGFyeUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIGxldCBib3R0b21Cb3VuZGFyeUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIGlmIChwb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1ApIHtcbiAgICAgIHRvcEJvdW5kYXJ5RWxlbWVudCA9IGJvdW5kYXJ5RWxlbWVudDtcbiAgICAgIGJvdHRvbUJvdW5kYXJ5RWxlbWVudCA9IHRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpITtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZChib3R0b21Cb3VuZGFyeUVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b3BCb3VuZGFyeUVsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50cy5zaGlmdCgpITtcbiAgICAgIGJvdHRvbUJvdW5kYXJ5RWxlbWVudCA9IGJvdW5kYXJ5RWxlbWVudDtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0b3BCb3VuZGFyeUVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBsaXN0ZW5lcnMgZnJvbSBvbGQgYm91bmRhcnkgZWxlbWVudHNcbiAgICB0b3BCb3VuZGFyeUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXIpO1xuICAgIGJvdHRvbUJvdW5kYXJ5RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7XG5cbiAgICAvLyBBZGQgbmV3IGVsZW1lbnQgdG8gYXJyYXkvRE9NXG4gICAgaWYgKHBvc2l0aW9uID09PSBCb3VuZGFyeVBvc2l0aW9uLlRPUCkge1xuICAgICAgY29uc3QgbmV3RWxlbWVudCA9IHRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO1xuICAgICAgdGhpcy5fcm93RWxlbWVudHMudW5zaGlmdChuZXdFbGVtZW50KTtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCBuZXdFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbmV3RWxlbWVudCA9IHRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO1xuICAgICAgdGhpcy5fcm93RWxlbWVudHMucHVzaChuZXdFbGVtZW50KTtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgbGlzdGVuZXJzIHRvIG5ldyBib3VuZGFyeSBlbGVtZW50c1xuICAgIHRoaXMuX3Jvd0VsZW1lbnRzWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcbiAgICB0aGlzLl9yb3dFbGVtZW50c1t0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGggLSAxXS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7XG5cbiAgICAvLyBTY3JvbGwgdXBcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JvbGxMaW5lcyhwb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1AgPyAtMSA6IDEpO1xuXG4gICAgLy8gRm9jdXMgbmV3IGJvdW5kYXJ5IGJlZm9yZSBlbGVtZW50XG4gICAgdGhpcy5fcm93RWxlbWVudHNbcG9zaXRpb24gPT09IEJvdW5kYXJ5UG9zaXRpb24uVE9QID8gMSA6IHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDJdLmZvY3VzKCk7XG5cbiAgICAvLyBQcmV2ZW50IHRoZSBzdGFuZGFyZCBiZWhhdmlvclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBfb25SZXNpemUocm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gUmVtb3ZlIGJvdHRvbSBib3VuZGFyeSBsaXN0ZW5lclxuICAgIHRoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDFdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcblxuICAgIC8vIEdyb3cgcm93cyBhcyByZXF1aXJlZFxuICAgIGZvciAobGV0IGkgPSB0aGlzLl9yb3dDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgdGhpcy5fdGVybWluYWwucm93czsgaSsrKSB7XG4gICAgICB0aGlzLl9yb3dFbGVtZW50c1tpXSA9IHRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO1xuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzW2ldKTtcbiAgICB9XG4gICAgLy8gU2hyaW5rIHJvd3MgYXMgcmVxdWlyZWRcbiAgICB3aGlsZSAodGhpcy5fcm93RWxlbWVudHMubGVuZ3RoID4gcm93cykge1xuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpISk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGJvdHRvbSBib3VuZGFyeSBsaXN0ZW5lclxuICAgIHRoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDFdLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcblxuICAgIHRoaXMuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlKCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbGlzdGl0ZW0nKTtcbiAgICBlbGVtZW50LnRhYkluZGV4ID0gLTE7XG4gICAgdGhpcy5fcmVmcmVzaFJvd0RpbWVuc2lvbnMoZWxlbWVudCk7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICBwcml2YXRlIF9vblRhYihzcGFjZUNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwYWNlQ291bnQ7IGkrKykge1xuICAgICAgdGhpcy5fb25DaGFyKCcgJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25DaGFyKGNoYXI6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9saXZlUmVnaW9uTGluZUNvdW50IDwgTUFYX1JPV1NfVE9fUkVBRCArIDEpIHtcbiAgICAgIGlmICh0aGlzLl9jaGFyc1RvQ29uc3VtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIEhhdmUgdGhlIHNjcmVlbiByZWFkZXIgaWdub3JlIHRoZSBjaGFyIGlmIGl0IHdhcyBqdXN0IGlucHV0XG4gICAgICAgIGNvbnN0IHNoaWZ0ZWRDaGFyID0gdGhpcy5fY2hhcnNUb0NvbnN1bWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKHNoaWZ0ZWRDaGFyICE9PSBjaGFyKSB7XG4gICAgICAgICAgdGhpcy5fY2hhcnNUb0Fubm91bmNlICs9IGNoYXI7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2NoYXJzVG9Bbm5vdW5jZSArPSBjaGFyO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJ1xcbicpIHtcbiAgICAgICAgdGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudCsrO1xuICAgICAgICBpZiAodGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudCA9PT0gTUFYX1JPV1NfVE9fUkVBRCArIDEpIHtcbiAgICAgICAgICB0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50ICs9IFN0cmluZ3MudG9vTXVjaE91dHB1dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBPbmx5IGRldGFjaC9hdHRhY2ggb24gbWFjIGFzIG90aGVyd2lzZSBtZXNzYWdlcyBjYW4gZ28gdW5hY2NvdW5jZWRcbiAgICAgIGlmIChpc01hYykge1xuICAgICAgICBpZiAodGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudCAmJiB0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50Lmxlbmd0aCA+IDAgJiYgIXRoaXMuX2xpdmVSZWdpb24ucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fYWNjZXNzaWJpbGl0eVRyZWVSb290LmFwcGVuZENoaWxkKHRoaXMuX2xpdmVSZWdpb24pO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJMaXZlUmVnaW9uKCk6IHZvaWQge1xuICAgIHRoaXMuX2xpdmVSZWdpb24udGV4dENvbnRlbnQgPSAnJztcbiAgICB0aGlzLl9saXZlUmVnaW9uTGluZUNvdW50ID0gMDtcblxuICAgIC8vIE9ubHkgZGV0YWNoL2F0dGFjaCBvbiBtYWMgYXMgb3RoZXJ3aXNlIG1lc3NhZ2VzIGNhbiBnbyB1bmFjY291bmNlZFxuICAgIGlmIChpc01hYykge1xuICAgICAgaWYgKHRoaXMuX2xpdmVSZWdpb24ucGFyZW50Tm9kZSkge1xuICAgICAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QucmVtb3ZlQ2hpbGQodGhpcy5fbGl2ZVJlZ2lvbik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25LZXkoa2V5Q2hhcjogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5fY2xlYXJMaXZlUmVnaW9uKCk7XG4gICAgdGhpcy5fY2hhcnNUb0NvbnN1bWUucHVzaChrZXlDaGFyKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlZnJlc2hSb3dzKHN0YXJ0PzogbnVtYmVyLCBlbmQ/OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJSb3dzRGVib3VuY2VyLnJlZnJlc2goc3RhcnQsIGVuZCwgdGhpcy5fdGVybWluYWwucm93cyk7XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJSb3dzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgYnVmZmVyOiBJQnVmZmVyID0gdGhpcy5fdGVybWluYWwuYnVmZmVyO1xuICAgIGNvbnN0IHNldFNpemUgPSBidWZmZXIubGluZXMubGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSsrKSB7XG4gICAgICBjb25zdCBsaW5lRGF0YSA9IGJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoYnVmZmVyLnlkaXNwICsgaSwgdHJ1ZSk7XG4gICAgICBjb25zdCBwb3NJblNldCA9IChidWZmZXIueWRpc3AgKyBpICsgMSkudG9TdHJpbmcoKTtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50c1tpXTtcbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIGlmIChsaW5lRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9ICcmbmJzcDsnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBsaW5lRGF0YTtcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1wb3NpbnNldCcsIHBvc0luU2V0KTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2V0c2l6ZScsIHNldFNpemUpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9hbm5vdW5jZUNoYXJhY3RlcnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGggIT09IHRoaXMuX3Rlcm1pbmFsLnJvd3MpIHtcbiAgICAgIHRoaXMuX29uUmVzaXplKHRoaXMuX3Rlcm1pbmFsLnJvd3MpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3Rlcm1pbmFsLnJvd3M7IGkrKykge1xuICAgICAgdGhpcy5fcmVmcmVzaFJvd0RpbWVuc2lvbnModGhpcy5fcm93RWxlbWVudHNbaV0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3JlZnJlc2hSb3dEaW1lbnNpb25zKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodH1weGA7XG4gIH1cblxuICBwcml2YXRlIF9hbm5vdW5jZUNoYXJhY3RlcnMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2NoYXJzVG9Bbm5vdW5jZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudCArPSB0aGlzLl9jaGFyc1RvQW5ub3VuY2U7XG4gICAgdGhpcy5fY2hhcnNUb0Fubm91bmNlID0gJyc7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQ29weXJpZ2h0IChjKSAyMDEyLTIwMTMsIENocmlzdG9waGVyIEplZmZyZXkgKE1JVCBMaWNlbnNlKVxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUlucHV0SGFuZGxlciwgSUlucHV0SGFuZGxpbmdUZXJtaW5hbCB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgQzAsIEMxIH0gZnJvbSAnY29tbW9uL2RhdGEvRXNjYXBlU2VxdWVuY2VzJztcbmltcG9ydCB7IENIQVJTRVRTLCBERUZBVUxUX0NIQVJTRVQgfSBmcm9tICdjb21tb24vZGF0YS9DaGFyc2V0cyc7XG5pbXBvcnQgeyB3Y3dpZHRoIH0gZnJvbSAnY29tbW9uL0NoYXJXaWR0aCc7XG5pbXBvcnQgeyBFc2NhcGVTZXF1ZW5jZVBhcnNlciB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvRXNjYXBlU2VxdWVuY2VQYXJzZXInO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgY29uY2F0IH0gZnJvbSAnY29tbW9uL1R5cGVkQXJyYXlVdGlscyc7XG5pbXBvcnQgeyBTdHJpbmdUb1V0ZjMyLCBzdHJpbmdGcm9tQ29kZVBvaW50LCB1dGYzMlRvU3RyaW5nLCBVdGY4VG9VdGYzMiB9IGZyb20gJ2NvbW1vbi9pbnB1dC9UZXh0RGVjb2Rlcic7XG5pbXBvcnQgeyBERUZBVUxUX0FUVFJfREFUQSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyTGluZSc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSVBhcnNpbmdTdGF0ZSwgSURjc0hhbmRsZXIsIElFc2NhcGVTZXF1ZW5jZVBhcnNlciwgSVBhcmFtcywgSUZ1bmN0aW9uSWRlbnRpZmllciB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvVHlwZXMnO1xuaW1wb3J0IHsgTlVMTF9DRUxMX0NPREUsIE5VTExfQ0VMTF9XSURUSCwgQXR0cmlidXRlcywgRmdGbGFncywgQmdGbGFncywgQ29udGVudCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9BdHRyaWJ1dGVEYXRhJztcbmltcG9ydCB7IElBdHRyaWJ1dGVEYXRhLCBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBJQ29yZVNlcnZpY2UsIElCdWZmZXJTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UsIElMb2dTZXJ2aWNlLCBJRGlydHlSb3dTZXJ2aWNlLCBJQ29yZU1vdXNlU2VydmljZSwgSUNoYXJzZXRTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IE9zY0hhbmRsZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL09zY1BhcnNlcic7XG5pbXBvcnQgeyBEY3NIYW5kbGVyIH0gZnJvbSAnY29tbW9uL3BhcnNlci9EY3NQYXJzZXInO1xuXG4vKipcbiAqIE1hcCBjb2xsZWN0IHRvIGdsZXZlbC4gVXNlZCBpbiBgc2VsZWN0Q2hhcnNldGAuXG4gKi9cbmNvbnN0IEdMRVZFTDoge1trZXk6IHN0cmluZ106IG51bWJlcn0gPSB7JygnOiAwLCAnKSc6IDEsICcqJzogMiwgJysnOiAzLCAnLSc6IDEsICcuJzogMn07XG5cbi8qKlxuICogTWF4IGxlbmd0aCBvZiB0aGUgVVRGMzIgaW5wdXQgYnVmZmVyLiBSZWFsIG1lbW9yeSBjb25zdW1wdGlvbiBpcyA0IHRpbWVzIGhpZ2hlci5cbiAqL1xuY29uc3QgTUFYX1BBUlNFQlVGRkVSX0xFTkdUSCA9IDEzMTA3MjtcblxuXG4vKipcbiAqIERDUyBzdWJwYXJzZXIgaW1wbGVtZW50YXRpb25zXG4gKi9cblxuLyoqXG4gKiBEQ1MgJCBxIFB0IFNUXG4gKiAgIERFQ1JRU1MgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vREVDUlFTUy5odG1sKVxuICogICBSZXF1ZXN0IFN0YXR1cyBTdHJpbmcgKERFQ1JRU1MpLCBWVDQyMCBhbmQgdXAuXG4gKiAgIFJlc3BvbnNlOiBERUNSUFNTIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ1JQU1MuaHRtbClcbiAqL1xuY2xhc3MgREVDUlFTUyBpbXBsZW1lbnRzIElEY3NIYW5kbGVyIHtcbiAgcHJpdmF0ZSBfZGF0YTogVWludDMyQXJyYXkgPSBuZXcgVWludDMyQXJyYXkoMCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgcHJpdmF0ZSBfY29yZVNlcnZpY2U6IElDb3JlU2VydmljZSxcbiAgICBwcml2YXRlIF9sb2dTZXJ2aWNlOiBJTG9nU2VydmljZSxcbiAgICBwcml2YXRlIF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkgeyB9XG5cbiAgaG9vayhwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KDApO1xuICB9XG5cbiAgcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2RhdGEgPSBjb25jYXQodGhpcy5fZGF0YSwgZGF0YS5zdWJhcnJheShzdGFydCwgZW5kKSk7XG4gIH1cblxuICB1bmhvb2soc3VjY2VzczogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgdGhpcy5fZGF0YSA9IG5ldyBVaW50MzJBcnJheSgwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHV0ZjMyVG9TdHJpbmcodGhpcy5fZGF0YSk7XG4gICAgdGhpcy5fZGF0YSA9IG5ldyBVaW50MzJBcnJheSgwKTtcbiAgICBzd2l0Y2ggKGRhdGEpIHtcbiAgICAgIC8vIHZhbGlkOiBEQ1MgMSAkIHIgUHQgU1QgKHh0ZXJtKVxuICAgICAgY2FzZSAnXCJxJzogLy8gREVDU0NBXG4gICAgICAgIHJldHVybiB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31QMSRyMFwicSR7QzAuRVNDfVxcXFxgKTtcbiAgICAgIGNhc2UgJ1wicCc6IC8vIERFQ1NDTFxuICAgICAgICByZXR1cm4gdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9UDEkcjYxXCJwJHtDMC5FU0N9XFxcXGApO1xuICAgICAgY2FzZSAncic6IC8vIERFQ1NUQk1cbiAgICAgICAgY29uc3QgcHQgPSAnJyArICh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3AgKyAxKSArXG4gICAgICAgICAgICAgICAgJzsnICsgKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbEJvdHRvbSArIDEpICsgJ3InO1xuICAgICAgICByZXR1cm4gdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9UDEkciR7cHR9JHtDMC5FU0N9XFxcXGApO1xuICAgICAgY2FzZSAnbSc6IC8vIFNHUlxuICAgICAgICAvLyBUT0RPOiByZXBvcnQgcmVhbCBzZXR0aW5ncyBpbnN0ZWFkIG9mIDBtXG4gICAgICAgIHJldHVybiB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31QMSRyMG0ke0MwLkVTQ31cXFxcYCk7XG4gICAgICBjYXNlICcgcSc6IC8vIERFQ1NDVVNSXG4gICAgICAgIGNvbnN0IFNUWUxFUzoge1trZXk6IHN0cmluZ106IG51bWJlcn0gPSB7J2Jsb2NrJzogMiwgJ3VuZGVybGluZSc6IDQsICdiYXInOiA2fTtcbiAgICAgICAgbGV0IHN0eWxlID0gU1RZTEVTW3RoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGVdO1xuICAgICAgICBzdHlsZSAtPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvckJsaW5rID8gMSA6IDA7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31QMSRyJHtzdHlsZX0gcSR7QzAuRVNDfVxcXFxgKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIGludmFsaWQ6IERDUyAwICQgciBQdCBTVCAoeHRlcm0pXG4gICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Vua25vd24gRENTICRxICVzJywgZGF0YSk7XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7QzAuRVNDfVAwJHIke0MwLkVTQ31cXFxcYCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRENTIFBzOyBQc3wgUHQgU1RcbiAqICAgREVDVURLIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ1VESy5odG1sKVxuICogICBub3Qgc3VwcG9ydGVkXG4gKi9cblxuLyoqXG4gKiBEQ1MgKyBxIFB0IFNUICh4dGVybSlcbiAqICAgUmVxdWVzdCBUZXJtaW5mbyBTdHJpbmdcbiAqICAgbm90IGltcGxlbWVudGVkXG4gKi9cblxuLyoqXG4gKiBEQ1MgKyBwIFB0IFNUICh4dGVybSlcbiAqICAgU2V0IFRlcm1pbmZvIERhdGFcbiAqICAgbm90IHN1cHBvcnRlZFxuICovXG5cblxuXG4vKipcbiAqIFRoZSB0ZXJtaW5hbCdzIHN0YW5kYXJkIGltcGxlbWVudGF0aW9uIG9mIElJbnB1dEhhbmRsZXIsIHRoaXMgaGFuZGxlcyBhbGxcbiAqIGlucHV0IGZyb20gdGhlIFBhcnNlci5cbiAqXG4gKiBSZWZlciB0byBodHRwOi8vaW52aXNpYmxlLWlzbGFuZC5uZXQveHRlcm0vY3Rsc2Vxcy9jdGxzZXFzLmh0bWwgdG8gdW5kZXJzdGFuZFxuICogZWFjaCBmdW5jdGlvbidzIGhlYWRlciBjb21tZW50LlxuICovXG5leHBvcnQgY2xhc3MgSW5wdXRIYW5kbGVyIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElJbnB1dEhhbmRsZXIge1xuICBwcml2YXRlIF9wYXJzZUJ1ZmZlcjogVWludDMyQXJyYXkgPSBuZXcgVWludDMyQXJyYXkoNDA5Nik7XG4gIHByaXZhdGUgX3N0cmluZ0RlY29kZXI6IFN0cmluZ1RvVXRmMzIgPSBuZXcgU3RyaW5nVG9VdGYzMigpO1xuICBwcml2YXRlIF91dGY4RGVjb2RlcjogVXRmOFRvVXRmMzIgPSBuZXcgVXRmOFRvVXRmMzIoKTtcbiAgcHJpdmF0ZSBfd29ya0NlbGw6IENlbGxEYXRhID0gbmV3IENlbGxEYXRhKCk7XG5cbiAgcHJpdmF0ZSBfY3VyQXR0ckRhdGE6IElBdHRyaWJ1dGVEYXRhID0gREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKTtcbiAgcHJpdmF0ZSBfZXJhc2VBdHRyRGF0YUludGVybmFsOiBJQXR0cmlidXRlRGF0YSA9IERFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCk7XG5cbiAgcHJpdmF0ZSBfb25SZXF1ZXN0UmVmcmVzaFJvd3MgPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlciwgbnVtYmVyPigpO1xuICBwdWJsaWMgZ2V0IG9uUmVxdWVzdFJlZnJlc2hSb3dzKCk6IElFdmVudDxudW1iZXIsIG51bWJlcj4geyByZXR1cm4gdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25SZXF1ZXN0UmVzZXQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25SZXF1ZXN0UmVzZXQoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX29uUmVxdWVzdFJlc2V0LmV2ZW50OyB9XG4gIHByaXZhdGUgX29uUmVxdWVzdEJlbGwgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25SZXF1ZXN0QmVsbCgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25SZXF1ZXN0QmVsbC5ldmVudDsgfVxuICBwcml2YXRlIF9vbkN1cnNvck1vdmUgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25DdXJzb3JNb3ZlKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vbkN1cnNvck1vdmUuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25MaW5lRmVlZCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvbkxpbmVGZWVkKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vbkxpbmVGZWVkLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uU2Nyb2xsID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XG4gIHB1YmxpYyBnZXQgb25TY3JvbGwoKTogSUV2ZW50PG51bWJlcj4geyByZXR1cm4gdGhpcy5fb25TY3JvbGwuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF90ZXJtaW5hbDogSUlucHV0SGFuZGxpbmdUZXJtaW5hbCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jaGFyc2V0U2VydmljZTogSUNoYXJzZXRTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVTZXJ2aWNlOiBJQ29yZVNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZGlydHlSb3dTZXJ2aWNlOiBJRGlydHlSb3dTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2xvZ1NlcnZpY2U6IElMb2dTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29yZU1vdXNlU2VydmljZTogSUNvcmVNb3VzZVNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcGFyc2VyOiBJRXNjYXBlU2VxdWVuY2VQYXJzZXIgPSBuZXcgRXNjYXBlU2VxdWVuY2VQYXJzZXIoKSlcbiAge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3BhcnNlcik7XG5cbiAgICAvKipcbiAgICAgKiBjdXN0b20gZmFsbGJhY2sgaGFuZGxlcnNcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlckZhbGxiYWNrKChpZGVudCwgcGFyYW1zKSA9PiB7XG4gICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdVbmtub3duIENTSSBjb2RlOiAnLCB7IGlkZW50aWZpZXI6IHRoaXMuX3BhcnNlci5pZGVudFRvU3RyaW5nKGlkZW50KSwgcGFyYW1zOiBwYXJhbXMudG9BcnJheSgpIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyRmFsbGJhY2soaWRlbnQgPT4ge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnVW5rbm93biBFU0MgY29kZTogJywgeyBpZGVudGlmaWVyOiB0aGlzLl9wYXJzZXIuaWRlbnRUb1N0cmluZyhpZGVudCkgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyRmFsbGJhY2soY29kZSA9PiB7XG4gICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdVbmtub3duIEVYRUNVVEUgY29kZTogJywgeyBjb2RlIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX3BhcnNlci5zZXRPc2NIYW5kbGVyRmFsbGJhY2soKGlkZW50aWZpZXIsIGFjdGlvbiwgZGF0YSkgPT4ge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnVW5rbm93biBPU0MgY29kZTogJywgeyBpZGVudGlmaWVyLCBhY3Rpb24sIGRhdGEgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldERjc0hhbmRsZXJGYWxsYmFjaygoaWRlbnQsIGFjdGlvbiwgcGF5bG9hZCkgPT4ge1xuICAgICAgaWYgKGFjdGlvbiA9PT0gJ0hPT0snKSB7XG4gICAgICAgIHBheWxvYWQgPSBwYXlsb2FkLnRvQXJyYXkoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Vua25vd24gRENTIGNvZGU6ICcsIHsgaWRlbnRpZmllcjogdGhpcy5fcGFyc2VyLmlkZW50VG9TdHJpbmcoaWRlbnQpLCBhY3Rpb24sIHBheWxvYWQgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBwcmludCBoYW5kbGVyXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnNldFByaW50SGFuZGxlcigoZGF0YSwgc3RhcnQsIGVuZCkgPT4gdGhpcy5wcmludChkYXRhLCBzdGFydCwgZW5kKSk7XG5cbiAgICAvKipcbiAgICAgKiBDU0kgaGFuZGxlclxuICAgICAqL1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ0AnfSwgcGFyYW1zID0+IHRoaXMuaW5zZXJ0Q2hhcnMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICcgJywgZmluYWw6ICdAJ30sIHBhcmFtcyA9PiB0aGlzLnNjcm9sbExlZnQocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnQSd9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JVcChwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7aW50ZXJtZWRpYXRlczogJyAnLCBmaW5hbDogJ0EnfSwgcGFyYW1zID0+IHRoaXMuc2Nyb2xsUmlnaHQocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnQid9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JEb3duKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ0MnfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yRm9yd2FyZChwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICdEJ30sIHBhcmFtcyA9PiB0aGlzLmN1cnNvckJhY2t3YXJkKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ0UnfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yTmV4dExpbmUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnRid9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JQcmVjZWRpbmdMaW5lKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ0cnfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yQ2hhckFic29sdXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ0gnfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yUG9zaXRpb24ocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnSSd9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JGb3J3YXJkVGFiKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ0onfSwgcGFyYW1zID0+IHRoaXMuZXJhc2VJbkRpc3BsYXkocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe3ByZWZpeDogJz8nLCBmaW5hbDogJ0onfSwgcGFyYW1zID0+IHRoaXMuZXJhc2VJbkRpc3BsYXkocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnSyd9LCBwYXJhbXMgPT4gdGhpcy5lcmFzZUluTGluZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7cHJlZml4OiAnPycsIGZpbmFsOiAnSyd9LCBwYXJhbXMgPT4gdGhpcy5lcmFzZUluTGluZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICdMJ30sIHBhcmFtcyA9PiB0aGlzLmluc2VydExpbmVzKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ00nfSwgcGFyYW1zID0+IHRoaXMuZGVsZXRlTGluZXMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnUCd9LCBwYXJhbXMgPT4gdGhpcy5kZWxldGVDaGFycyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICdTJ30sIHBhcmFtcyA9PiB0aGlzLnNjcm9sbFVwKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ1QnfSwgcGFyYW1zID0+IHRoaXMuc2Nyb2xsRG93bihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICdYJ30sIHBhcmFtcyA9PiB0aGlzLmVyYXNlQ2hhcnMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnWid9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JCYWNrd2FyZFRhYihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICdgJ30sIHBhcmFtcyA9PiB0aGlzLmNoYXJQb3NBYnNvbHV0ZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICdhJ30sIHBhcmFtcyA9PiB0aGlzLmhQb3NpdGlvblJlbGF0aXZlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ2InfSwgcGFyYW1zID0+IHRoaXMucmVwZWF0UHJlY2VkaW5nQ2hhcmFjdGVyKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ2MnfSwgcGFyYW1zID0+IHRoaXMuc2VuZERldmljZUF0dHJpYnV0ZXNQcmltYXJ5KHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtwcmVmaXg6ICc+JywgZmluYWw6ICdjJ30sIHBhcmFtcyA9PiB0aGlzLnNlbmREZXZpY2VBdHRyaWJ1dGVzU2Vjb25kYXJ5KHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ2QnfSwgcGFyYW1zID0+IHRoaXMubGluZVBvc0Fic29sdXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ2UnfSwgcGFyYW1zID0+IHRoaXMudlBvc2l0aW9uUmVsYXRpdmUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnZid9LCBwYXJhbXMgPT4gdGhpcy5oVlBvc2l0aW9uKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ2cnfSwgcGFyYW1zID0+IHRoaXMudGFiQ2xlYXIocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnaCd9LCBwYXJhbXMgPT4gdGhpcy5zZXRNb2RlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtwcmVmaXg6ICc/JywgZmluYWw6ICdoJ30sIHBhcmFtcyA9PiB0aGlzLnNldE1vZGVQcml2YXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ2wnfSwgcGFyYW1zID0+IHRoaXMucmVzZXRNb2RlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtwcmVmaXg6ICc/JywgZmluYWw6ICdsJ30sIHBhcmFtcyA9PiB0aGlzLnJlc2V0TW9kZVByaXZhdGUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnbSd9LCBwYXJhbXMgPT4gdGhpcy5jaGFyQXR0cmlidXRlcyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICduJ30sIHBhcmFtcyA9PiB0aGlzLmRldmljZVN0YXR1cyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7cHJlZml4OiAnPycsIGZpbmFsOiAnbid9LCBwYXJhbXMgPT4gdGhpcy5kZXZpY2VTdGF0dXNQcml2YXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiAnIScsIGZpbmFsOiAncCd9LCBwYXJhbXMgPT4gdGhpcy5zb2Z0UmVzZXQocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICcgJywgZmluYWw6ICdxJ30sIHBhcmFtcyA9PiB0aGlzLnNldEN1cnNvclN0eWxlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ3InfSwgcGFyYW1zID0+IHRoaXMuc2V0U2Nyb2xsUmVnaW9uKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ3MnfSwgcGFyYW1zID0+IHRoaXMuc2F2ZUN1cnNvcihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICd1J30sIHBhcmFtcyA9PiB0aGlzLnJlc3RvcmVDdXJzb3IocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICdcXCcnLCBmaW5hbDogJ30nfSwgcGFyYW1zID0+IHRoaXMuaW5zZXJ0Q29sdW1ucyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7aW50ZXJtZWRpYXRlczogJ1xcJycsIGZpbmFsOiAnfid9LCBwYXJhbXMgPT4gdGhpcy5kZWxldGVDb2x1bW5zKHBhcmFtcykpO1xuXG4gICAgLyoqXG4gICAgICogZXhlY3V0ZSBoYW5kbGVyXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkJFTCwgKCkgPT4gdGhpcy5iZWxsKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5MRiwgKCkgPT4gdGhpcy5saW5lRmVlZCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuVlQsICgpID0+IHRoaXMubGluZUZlZWQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkZGLCAoKSA9PiB0aGlzLmxpbmVGZWVkKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5DUiwgKCkgPT4gdGhpcy5jYXJyaWFnZVJldHVybigpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuQlMsICgpID0+IHRoaXMuYmFja3NwYWNlKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5IVCwgKCkgPT4gdGhpcy50YWIoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLlNPLCAoKSA9PiB0aGlzLnNoaWZ0T3V0KCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5TSSwgKCkgPT4gdGhpcy5zaGlmdEluKCkpO1xuICAgIC8vIEZJWE1FOiAgIFdoYXQgZG8gdG8gd2l0aCBtaXNzaW5nPyBPbGQgY29kZSBqdXN0IGFkZGVkIHRob3NlIHRvIHByaW50LlxuXG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMxLklORCwgKCkgPT4gdGhpcy5pbmRleCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzEuTkVMLCAoKSA9PiB0aGlzLm5leHRMaW5lKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMS5IVFMsICgpID0+IHRoaXMudGFiU2V0KCkpO1xuXG4gICAgLyoqXG4gICAgICogT1NDIGhhbmRsZXJcbiAgICAgKi9cbiAgICAvLyAgIDAgLSBpY29uIG5hbWUgKyB0aXRsZVxuICAgIHRoaXMuX3BhcnNlci5zZXRPc2NIYW5kbGVyKDAsIG5ldyBPc2NIYW5kbGVyKChkYXRhOiBzdHJpbmcpID0+IHRoaXMuc2V0VGl0bGUoZGF0YSkpKTtcbiAgICAvLyAgIDEgLSBpY29uIG5hbWVcbiAgICAvLyAgIDIgLSB0aXRsZVxuICAgIHRoaXMuX3BhcnNlci5zZXRPc2NIYW5kbGVyKDIsIG5ldyBPc2NIYW5kbGVyKChkYXRhOiBzdHJpbmcpID0+IHRoaXMuc2V0VGl0bGUoZGF0YSkpKTtcbiAgICAvLyAgIDMgLSBzZXQgcHJvcGVydHkgWCBpbiB0aGUgZm9ybSBcInByb3A9dmFsdWVcIlxuICAgIC8vICAgNCAtIENoYW5nZSBDb2xvciBOdW1iZXJcbiAgICAvLyAgIDUgLSBDaGFuZ2UgU3BlY2lhbCBDb2xvciBOdW1iZXJcbiAgICAvLyAgIDYgLSBFbmFibGUvZGlzYWJsZSBTcGVjaWFsIENvbG9yIE51bWJlciBjXG4gICAgLy8gICA3IC0gY3VycmVudCBkaXJlY3Rvcnk/IChub3QgaW4geHRlcm0gc3BlYywgc2VlIGh0dHBzOi8vZ2l0bGFiLmNvbS9nbmFjaG1hbi9pdGVybTIvaXNzdWVzLzM5MzkpXG4gICAgLy8gIDEwIC0gQ2hhbmdlIFZUMTAwIHRleHQgZm9yZWdyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTEgLSBDaGFuZ2UgVlQxMDAgdGV4dCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxMiAtIENoYW5nZSB0ZXh0IGN1cnNvciBjb2xvciB0byBQdC5cbiAgICAvLyAgMTMgLSBDaGFuZ2UgbW91c2UgZm9yZWdyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTQgLSBDaGFuZ2UgbW91c2UgYmFja2dyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTUgLSBDaGFuZ2UgVGVrdHJvbml4IGZvcmVncm91bmQgY29sb3IgdG8gUHQuXG4gICAgLy8gIDE2IC0gQ2hhbmdlIFRla3Ryb25peCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxNyAtIENoYW5nZSBoaWdobGlnaHQgYmFja2dyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTggLSBDaGFuZ2UgVGVrdHJvbml4IGN1cnNvciBjb2xvciB0byBQdC5cbiAgICAvLyAgMTkgLSBDaGFuZ2UgaGlnaGxpZ2h0IGZvcmVncm91bmQgY29sb3IgdG8gUHQuXG4gICAgLy8gIDQ2IC0gQ2hhbmdlIExvZyBGaWxlIHRvIFB0LlxuICAgIC8vICA1MCAtIFNldCBGb250IHRvIFB0LlxuICAgIC8vICA1MSAtIHJlc2VydmVkIGZvciBFbWFjcyBzaGVsbC5cbiAgICAvLyAgNTIgLSBNYW5pcHVsYXRlIFNlbGVjdGlvbiBEYXRhLlxuICAgIC8vIDEwNCA7IGMgLSBSZXNldCBDb2xvciBOdW1iZXIgYy5cbiAgICAvLyAxMDUgOyBjIC0gUmVzZXQgU3BlY2lhbCBDb2xvciBOdW1iZXIgYy5cbiAgICAvLyAxMDYgOyBjOyBmIC0gRW5hYmxlL2Rpc2FibGUgU3BlY2lhbCBDb2xvciBOdW1iZXIgYy5cbiAgICAvLyAxMTAgLSBSZXNldCBWVDEwMCB0ZXh0IGZvcmVncm91bmQgY29sb3IuXG4gICAgLy8gMTExIC0gUmVzZXQgVlQxMDAgdGV4dCBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgIC8vIDExMiAtIFJlc2V0IHRleHQgY3Vyc29yIGNvbG9yLlxuICAgIC8vIDExMyAtIFJlc2V0IG1vdXNlIGZvcmVncm91bmQgY29sb3IuXG4gICAgLy8gMTE0IC0gUmVzZXQgbW91c2UgYmFja2dyb3VuZCBjb2xvci5cbiAgICAvLyAxMTUgLSBSZXNldCBUZWt0cm9uaXggZm9yZWdyb3VuZCBjb2xvci5cbiAgICAvLyAxMTYgLSBSZXNldCBUZWt0cm9uaXggYmFja2dyb3VuZCBjb2xvci5cbiAgICAvLyAxMTcgLSBSZXNldCBoaWdobGlnaHQgY29sb3IuXG4gICAgLy8gMTE4IC0gUmVzZXQgVGVrdHJvbml4IGN1cnNvciBjb2xvci5cbiAgICAvLyAxMTkgLSBSZXNldCBoaWdobGlnaHQgZm9yZWdyb3VuZCBjb2xvci5cblxuICAgIC8qKlxuICAgICAqIEVTQyBoYW5kbGVyc1xuICAgICAqL1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtmaW5hbDogJzcnfSwgKCkgPT4gdGhpcy5zYXZlQ3Vyc29yKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtmaW5hbDogJzgnfSwgKCkgPT4gdGhpcy5yZXN0b3JlQ3Vyc29yKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtmaW5hbDogJ0QnfSwgKCkgPT4gdGhpcy5pbmRleCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcih7ZmluYWw6ICdFJ30sICgpID0+IHRoaXMubmV4dExpbmUoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnSCd9LCAoKSA9PiB0aGlzLnRhYlNldCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcih7ZmluYWw6ICdNJ30sICgpID0+IHRoaXMucmV2ZXJzZUluZGV4KCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtmaW5hbDogJz0nfSwgKCkgPT4gdGhpcy5rZXlwYWRBcHBsaWNhdGlvbk1vZGUoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnPid9LCAoKSA9PiB0aGlzLmtleXBhZE51bWVyaWNNb2RlKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtmaW5hbDogJ2MnfSwgKCkgPT4gdGhpcy5mdWxsUmVzZXQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnbid9LCAoKSA9PiB0aGlzLnNldGdMZXZlbCgyKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnbyd9LCAoKSA9PiB0aGlzLnNldGdMZXZlbCgzKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnfCd9LCAoKSA9PiB0aGlzLnNldGdMZXZlbCgzKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnfSd9LCAoKSA9PiB0aGlzLnNldGdMZXZlbCgyKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnfid9LCAoKSA9PiB0aGlzLnNldGdMZXZlbCgxKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICclJywgZmluYWw6ICdAJ30sICgpID0+IHRoaXMuc2VsZWN0RGVmYXVsdENoYXJzZXQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICclJywgZmluYWw6ICdHJ30sICgpID0+IHRoaXMuc2VsZWN0RGVmYXVsdENoYXJzZXQoKSk7XG4gICAgZm9yIChjb25zdCBmbGFnIGluIENIQVJTRVRTKSB7XG4gICAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczogJygnLCBmaW5hbDogZmxhZ30sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnKCcgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczogJyknLCBmaW5hbDogZmxhZ30sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnKScgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczogJyonLCBmaW5hbDogZmxhZ30sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnKicgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczogJysnLCBmaW5hbDogZmxhZ30sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnKycgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczogJy0nLCBmaW5hbDogZmxhZ30sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnLScgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczogJy4nLCBmaW5hbDogZmxhZ30sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnLicgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczogJy8nLCBmaW5hbDogZmxhZ30sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnLycgKyBmbGFnKSk7IC8vIFRPRE86IHN1cHBvcnRlZD9cbiAgICB9XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICcjJywgZmluYWw6ICc4J30sICgpID0+IHRoaXMuc2NyZWVuQWxpZ25tZW50UGF0dGVybigpKTtcblxuICAgIC8qKlxuICAgICAqIGVycm9yIGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIuc2V0RXJyb3JIYW5kbGVyKChzdGF0ZTogSVBhcnNpbmdTdGF0ZSkgPT4ge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS5lcnJvcignUGFyc2luZyBlcnJvcjogJywgc3RhdGUpO1xuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogRENTIGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIuc2V0RGNzSGFuZGxlcih7aW50ZXJtZWRpYXRlczogJyQnLCBmaW5hbDogJ3EnfSwgbmV3IERFQ1JRU1ModGhpcy5fYnVmZmVyU2VydmljZSwgdGhpcy5fY29yZVNlcnZpY2UsIHRoaXMuX2xvZ1NlcnZpY2UsIHRoaXMuX29wdGlvbnNTZXJ2aWNlKSk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cblxuICBwdWJsaWMgcGFyc2UoZGF0YTogc3RyaW5nIHwgVWludDhBcnJheSk6IHZvaWQge1xuICAgIGxldCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICBjb25zdCBjdXJzb3JTdGFydFggPSBidWZmZXIueDtcbiAgICBjb25zdCBjdXJzb3JTdGFydFkgPSBidWZmZXIueTtcblxuICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ3BhcnNpbmcgZGF0YScsIGRhdGEpO1xuXG4gICAgLy8gcmVzaXplIGlucHV0IGJ1ZmZlciBpZiBuZWVkZWRcbiAgICBpZiAodGhpcy5fcGFyc2VCdWZmZXIubGVuZ3RoIDwgZGF0YS5sZW5ndGgpIHtcbiAgICAgIGlmICh0aGlzLl9wYXJzZUJ1ZmZlci5sZW5ndGggPCBNQVhfUEFSU0VCVUZGRVJfTEVOR1RIKSB7XG4gICAgICAgIHRoaXMuX3BhcnNlQnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KE1hdGgubWluKGRhdGEubGVuZ3RoLCBNQVhfUEFSU0VCVUZGRVJfTEVOR1RIKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgdGhlIGRpcnR5IHJvdyBzZXJ2aWNlIHNvIHdlIGtub3cgd2hpY2ggbGluZXMgY2hhbmdlZCBhcyBhIHJlc3VsdCBvZiBwYXJzaW5nXG4gICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLmNsZWFyUmFuZ2UoKTtcblxuICAgIC8vIHByb2Nlc3MgYmlnIGRhdGEgaW4gc21hbGxlciBjaHVua3NcbiAgICBpZiAoZGF0YS5sZW5ndGggPiBNQVhfUEFSU0VCVUZGRVJfTEVOR1RIKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IE1BWF9QQVJTRUJVRkZFUl9MRU5HVEgpIHtcbiAgICAgICAgY29uc3QgZW5kID0gaSArIE1BWF9QQVJTRUJVRkZFUl9MRU5HVEggPCBkYXRhLmxlbmd0aCA/IGkgKyBNQVhfUEFSU0VCVUZGRVJfTEVOR1RIIDogZGF0YS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGxlbiA9ICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgPyB0aGlzLl9zdHJpbmdEZWNvZGVyLmRlY29kZShkYXRhLnN1YnN0cmluZyhpLCBlbmQpLCB0aGlzLl9wYXJzZUJ1ZmZlcilcbiAgICAgICAgICA6IHRoaXMuX3V0ZjhEZWNvZGVyLmRlY29kZShkYXRhLnN1YmFycmF5KGksIGVuZCksIHRoaXMuX3BhcnNlQnVmZmVyKTtcbiAgICAgICAgdGhpcy5fcGFyc2VyLnBhcnNlKHRoaXMuX3BhcnNlQnVmZmVyLCBsZW4pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBsZW4gPSAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKVxuICAgICAgICA/IHRoaXMuX3N0cmluZ0RlY29kZXIuZGVjb2RlKGRhdGEsIHRoaXMuX3BhcnNlQnVmZmVyKVxuICAgICAgICA6IHRoaXMuX3V0ZjhEZWNvZGVyLmRlY29kZShkYXRhLCB0aGlzLl9wYXJzZUJ1ZmZlcik7XG4gICAgICB0aGlzLl9wYXJzZXIucGFyc2UodGhpcy5fcGFyc2VCdWZmZXIsIGxlbik7XG4gICAgfVxuXG4gICAgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG4gICAgaWYgKGJ1ZmZlci54ICE9PSBjdXJzb3JTdGFydFggfHwgYnVmZmVyLnkgIT09IGN1cnNvclN0YXJ0WSkge1xuICAgICAgdGhpcy5fb25DdXJzb3JNb3ZlLmZpcmUoKTtcbiAgICB9XG5cbiAgICAvLyBSZWZyZXNoIGFueSBkaXJ0eSByb3dzIGFjY3VtdWxhdGVkIGFzIHBhcnQgb2YgcGFyc2luZ1xuICAgIHRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzLmZpcmUodGhpcy5fZGlydHlSb3dTZXJ2aWNlLnN0YXJ0LCB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UuZW5kKTtcbiAgfVxuXG4gIHB1YmxpYyBwcmludChkYXRhOiBVaW50MzJBcnJheSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgY29kZTogbnVtYmVyO1xuICAgIGxldCBjaFdpZHRoOiBudW1iZXI7XG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG4gICAgY29uc3QgY2hhcnNldCA9IHRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQ7XG4gICAgY29uc3Qgc2NyZWVuUmVhZGVyTW9kZSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZTtcbiAgICBjb25zdCBjb2xzID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgIGNvbnN0IHdyYXBhcm91bmRNb2RlID0gdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLndyYXBhcm91bmQ7XG4gICAgY29uc3QgaW5zZXJ0TW9kZSA9IHRoaXMuX3Rlcm1pbmFsLmluc2VydE1vZGU7XG4gICAgY29uc3QgY3VyQXR0ciA9IHRoaXMuX2N1ckF0dHJEYXRhO1xuICAgIGxldCBidWZmZXJSb3cgPSBidWZmZXIubGluZXMuZ2V0KGJ1ZmZlci55ICsgYnVmZmVyLnliYXNlKTtcblxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkoYnVmZmVyLnkpO1xuXG4gICAgLy8gaGFuZGxlIHdpZGUgY2hhcnM6IHJlc2V0IHN0YXJ0X2NlbGwtMSBpZiB3ZSB3b3VsZCBvdmVyd3JpdGUgdGhlIHNlY29uZCBjZWxsIG9mIGEgd2lkZSBjaGFyXG4gICAgaWYgKGJ1ZmZlci54ICYmIGVuZCAtIHN0YXJ0ID4gMCAmJiBidWZmZXJSb3cuZ2V0V2lkdGgoYnVmZmVyLnggLSAxKSA9PT0gMikge1xuICAgICAgYnVmZmVyUm93LnNldENlbGxGcm9tQ29kZVBvaW50KGJ1ZmZlci54IC0gMSwgMCwgMSwgY3VyQXR0ci5mZywgY3VyQXR0ci5iZyk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgcG9zID0gc3RhcnQ7IHBvcyA8IGVuZDsgKytwb3MpIHtcbiAgICAgIGNvZGUgPSBkYXRhW3Bvc107XG5cbiAgICAgIC8vIGNhbGN1bGF0ZSBwcmludCBzcGFjZVxuICAgICAgLy8gZXhwZW5zaXZlIGNhbGwsIHRoZXJlZm9yZSB3ZSBzYXZlIHdpZHRoIGluIGxpbmUgYnVmZmVyXG4gICAgICBjaFdpZHRoID0gd2N3aWR0aChjb2RlKTtcblxuICAgICAgLy8gZ2V0IGNoYXJzZXQgcmVwbGFjZW1lbnQgY2hhcmFjdGVyXG4gICAgICAvLyBjaGFyc2V0IGlzIG9ubHkgZGVmaW5lZCBmb3IgQVNDSUksIHRoZXJlZm9yZSB3ZSBvbmx5XG4gICAgICAvLyBzZWFyY2ggZm9yIGFuIHJlcGxhY2VtZW50IGNoYXIgaWYgY29kZSA8IDEyN1xuICAgICAgaWYgKGNvZGUgPCAxMjcgJiYgY2hhcnNldCkge1xuICAgICAgICBjb25zdCBjaCA9IGNoYXJzZXRbU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKV07XG4gICAgICAgIGlmIChjaCkge1xuICAgICAgICAgIGNvZGUgPSBjaC5jaGFyQ29kZUF0KDApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzY3JlZW5SZWFkZXJNb2RlKSB7XG4gICAgICAgIHRoaXMuX3Rlcm1pbmFsLm9uQTExeUNoYXJFbWl0dGVyLmZpcmUoc3RyaW5nRnJvbUNvZGVQb2ludChjb2RlKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGluc2VydCBjb21iaW5pbmcgY2hhciBhdCBsYXN0IGN1cnNvciBwb3NpdGlvblxuICAgICAgLy8gRklYTUU6IG5lZWRzIGhhbmRsaW5nIGFmdGVyIGN1cnNvciBqdW1wc1xuICAgICAgLy8gYnVmZmVyLnggc2hvdWxkIG5ldmVyIGJlIDAgZm9yIGEgY29tYmluaW5nIGNoYXJcbiAgICAgIC8vIHNpbmNlIHRoZXkgYWx3YXlzIGZvbGxvdyBhIGNlbGwgY29uc3VtaW5nIGNoYXJcbiAgICAgIC8vIHRoZXJlZm9yZSB3ZSBjYW4gdGVzdCBmb3IgYnVmZmVyLnggdG8gYXZvaWQgb3ZlcmZsb3cgbGVmdFxuICAgICAgaWYgKCFjaFdpZHRoICYmIGJ1ZmZlci54KSB7XG4gICAgICAgIGlmICghYnVmZmVyUm93LmdldFdpZHRoKGJ1ZmZlci54IC0gMSkpIHtcbiAgICAgICAgICAvLyBmb3VuZCBlbXB0eSBjZWxsIGFmdGVyIGZ1bGx3aWR0aCwgbmVlZCB0byBnbyAyIGNlbGxzIGJhY2tcbiAgICAgICAgICAvLyBpdCBpcyBzYXZlIHRvIHN0ZXAgMiBjZWxscyBiYWNrIGhlcmVcbiAgICAgICAgICAvLyBzaW5jZSBhbiBlbXB0eSBjZWxsIGlzIG9ubHkgc2V0IGJ5IGZ1bGx3aWR0aCBjaGFyc1xuICAgICAgICAgIGJ1ZmZlclJvdy5hZGRDb2RlcG9pbnRUb0NlbGwoYnVmZmVyLnggLSAyLCBjb2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBidWZmZXJSb3cuYWRkQ29kZXBvaW50VG9DZWxsKGJ1ZmZlci54IC0gMSwgY29kZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGdvdG8gbmV4dCBsaW5lIGlmIGNoIHdvdWxkIG92ZXJmbG93XG4gICAgICAvLyBUT0RPOiBuZWVkcyBhIGdsb2JhbCBtaW4gdGVybWluYWwgd2lkdGggb2YgMlxuICAgICAgLy8gRklYTUU6IGFkZGl0aW9uYWxseSBlbnN1cmUgY2hXaWR0aCBmaXRzIGludG8gYSBsaW5lXG4gICAgICAvLyAgIC0tPiAgbWF5YmUgZm9yYmlkIGNvbHM8eHkgYXQgaGlnaGVyIGxldmVsIGFzIGl0IHdvdWxkXG4gICAgICAvLyAgICAgICAgaW50cm9kdWNlIGEgYmFkIHJ1bnRpbWUgcGVuYWx0eSBoZXJlXG4gICAgICBpZiAoYnVmZmVyLnggKyBjaFdpZHRoIC0gMSA+PSBjb2xzKSB7XG4gICAgICAgIC8vIGF1dG93cmFwIC0gREVDQVdNXG4gICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgd3JhcHMgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgbmV4dCBsaW5lXG4gICAgICAgIGlmICh3cmFwYXJvdW5kTW9kZSkge1xuICAgICAgICAgIGJ1ZmZlci54ID0gMDtcbiAgICAgICAgICBidWZmZXIueSsrO1xuICAgICAgICAgIGlmIChidWZmZXIueSA9PT0gYnVmZmVyLnNjcm9sbEJvdHRvbSArIDEpIHtcbiAgICAgICAgICAgIGJ1ZmZlci55LS07XG4gICAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zY3JvbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpLCB0cnVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGJ1ZmZlci55ID49IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cykge1xuICAgICAgICAgICAgICBidWZmZXIueSA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGUgbGluZSBhbHJlYWR5IGV4aXN0cyAoZWcuIHRoZSBpbml0aWFsIHZpZXdwb3J0KSwgbWFyayBpdCBhcyBhXG4gICAgICAgICAgICAvLyB3cmFwcGVkIGxpbmVcbiAgICAgICAgICAgIGJ1ZmZlci5saW5lcy5nZXQoYnVmZmVyLnkpLmlzV3JhcHBlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHJvdyBjaGFuZ2VkLCBnZXQgaXQgYWdhaW5cbiAgICAgICAgICBidWZmZXJSb3cgPSBidWZmZXIubGluZXMuZ2V0KGJ1ZmZlci55ICsgYnVmZmVyLnliYXNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBidWZmZXIueCA9IGNvbHMgLSAxO1xuICAgICAgICAgIGlmIChjaFdpZHRoID09PSAyKSB7XG4gICAgICAgICAgICAvLyBGSVhNRTogY2hlY2sgZm9yIHh0ZXJtIGJlaGF2aW9yXG4gICAgICAgICAgICAvLyBXaGF0IHRvIGRvIGhlcmU/IFdlIGdvdCBhIHdpZGUgY2hhciB0aGF0IGRvZXMgbm90IGZpdCBpbnRvIGxhc3QgY2VsbFxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGluc2VydCBtb2RlOiBtb3ZlIGNoYXJhY3RlcnMgdG8gcmlnaHRcbiAgICAgIGlmIChpbnNlcnRNb2RlKSB7XG4gICAgICAgIC8vIHJpZ2h0IHNoaWZ0IGNlbGxzIGFjY29yZGluZyB0byB0aGUgd2lkdGhcbiAgICAgICAgYnVmZmVyUm93Lmluc2VydENlbGxzKGJ1ZmZlci54LCBjaFdpZHRoLCBidWZmZXIuZ2V0TnVsbENlbGwoY3VyQXR0ciksIGN1ckF0dHIpO1xuICAgICAgICAvLyB0ZXN0IGxhc3QgY2VsbCAtIHNpbmNlIHRoZSBsYXN0IGNlbGwgaGFzIG9ubHkgcm9vbSBmb3JcbiAgICAgICAgLy8gYSBoYWxmd2lkdGggY2hhciBhbnkgZnVsbHdpZHRoIHNoaWZ0ZWQgdGhlcmUgaXMgbG9zdFxuICAgICAgICAvLyBhbmQgd2lsbCBiZSBzZXQgdG8gZW1wdHkgY2VsbFxuICAgICAgICBpZiAoYnVmZmVyUm93LmdldFdpZHRoKGNvbHMgLSAxKSA9PT0gMikge1xuICAgICAgICAgIGJ1ZmZlclJvdy5zZXRDZWxsRnJvbUNvZGVQb2ludChjb2xzIC0gMSwgTlVMTF9DRUxMX0NPREUsIE5VTExfQ0VMTF9XSURUSCwgY3VyQXR0ci5mZywgY3VyQXR0ci5iZyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gd3JpdGUgY3VycmVudCBjaGFyIHRvIGJ1ZmZlciBhbmQgYWR2YW5jZSBjdXJzb3JcbiAgICAgIGJ1ZmZlclJvdy5zZXRDZWxsRnJvbUNvZGVQb2ludChidWZmZXIueCsrLCBjb2RlLCBjaFdpZHRoLCBjdXJBdHRyLmZnLCBjdXJBdHRyLmJnKTtcblxuICAgICAgLy8gZnVsbHdpZHRoIGNoYXIgLSBhbHNvIHNldCBuZXh0IGNlbGwgdG8gcGxhY2Vob2xkZXIgc3R1YiBhbmQgYWR2YW5jZSBjdXJzb3JcbiAgICAgIC8vIGZvciBncmFwaGVtZXMgYmlnZ2VyIHRoYW4gZnVsbHdpZHRoIHdlIGNhbiBzaW1wbHkgbG9vcCB0byB6ZXJvXG4gICAgICAvLyB3ZSBhbHJlYWR5IG1hZGUgc3VyZSBhYm92ZSwgdGhhdCBidWZmZXIueCArIGNoV2lkdGggd2lsbCBub3Qgb3ZlcmZsb3cgcmlnaHRcbiAgICAgIGlmIChjaFdpZHRoID4gMCkge1xuICAgICAgICB3aGlsZSAoLS1jaFdpZHRoKSB7XG4gICAgICAgICAgLy8gb3RoZXIgdGhhbiBhIHJlZ3VsYXIgZW1wdHkgY2VsbCBhIGNlbGwgZm9sbG93aW5nIGEgd2lkZSBjaGFyIGhhcyBubyB3aWR0aFxuICAgICAgICAgIGJ1ZmZlclJvdy5zZXRDZWxsRnJvbUNvZGVQb2ludChidWZmZXIueCsrLCAwLCAwLCBjdXJBdHRyLmZnLCBjdXJBdHRyLmJnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBzdG9yZSBsYXN0IGNoYXIgaW4gUGFyc2VyLnByZWNlZGluZ0NvZGVwb2ludCBmb3IgUkVQIHRvIHdvcmsgY29ycmVjdGx5XG4gICAgLy8gVGhpcyBuZWVkcyB0byBjaGVjayB3aGV0aGVyOlxuICAgIC8vICAtIGZ1bGx3aWR0aCArIHN1cnJvZ2F0ZXM6IHJlc2V0XG4gICAgLy8gIC0gY29tYmluaW5nOiBvbmx5IGJhc2UgY2hhciBnZXRzIGNhcnJpZWQgb24gKGJ1ZyBpbiB4dGVybT8pXG4gICAgaWYgKGVuZCAtIHN0YXJ0ID4gMCkge1xuICAgICAgYnVmZmVyUm93LmxvYWRDZWxsKGJ1ZmZlci54IC0gMSwgdGhpcy5fd29ya0NlbGwpO1xuICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCkgPT09IDIgfHwgdGhpcy5fd29ya0NlbGwuZ2V0Q29kZSgpID4gMHhGRkZGKSB7XG4gICAgICAgIHRoaXMuX3BhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQgPSAwO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl93b3JrQ2VsbC5pc0NvbWJpbmVkKCkpIHtcbiAgICAgICAgdGhpcy5fcGFyc2VyLnByZWNlZGluZ0NvZGVwb2ludCA9IHRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkuY2hhckNvZGVBdCgwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3BhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQgPSB0aGlzLl93b3JrQ2VsbC5jb250ZW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGhhbmRsZSB3aWRlIGNoYXJzOiByZXNldCBjZWxsIHRvIHRoZSByaWdodCBpZiBpdCBpcyBzZWNvbmQgY2VsbCBvZiBhIHdpZGUgY2hhclxuICAgIGlmIChidWZmZXIueCA8IGNvbHMgJiYgZW5kIC0gc3RhcnQgPiAwICYmIGJ1ZmZlclJvdy5nZXRXaWR0aChidWZmZXIueCkgPT09IDAgJiYgIWJ1ZmZlclJvdy5oYXNDb250ZW50KGJ1ZmZlci54KSkge1xuICAgICAgYnVmZmVyUm93LnNldENlbGxGcm9tQ29kZVBvaW50KGJ1ZmZlci54LCAwLCAxLCBjdXJBdHRyLmZnLCBjdXJBdHRyLmJnKTtcbiAgICB9XG5cbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KGJ1ZmZlci55KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3J3YXJkIGFkZENzaUhhbmRsZXIgZnJvbSBwYXJzZXIuXG4gICAqL1xuICBwdWJsaWMgYWRkQ3NpSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChwYXJhbXM6IElQYXJhbXMpID0+IGJvb2xlYW4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlci5hZGRDc2lIYW5kbGVyKGlkLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogRm9yd2FyZCBhZGREY3NIYW5kbGVyIGZyb20gcGFyc2VyLlxuICAgKi9cbiAgcHVibGljIGFkZERjc0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nLCBwYXJhbTogSVBhcmFtcykgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyc2VyLmFkZERjc0hhbmRsZXIoaWQsIG5ldyBEY3NIYW5kbGVyKGNhbGxiYWNrKSk7XG4gIH1cblxuICAvKipcbiAgICogRm9yd2FyZCBhZGRFc2NIYW5kbGVyIGZyb20gcGFyc2VyLlxuICAgKi9cbiAgcHVibGljIGFkZEVzY0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoKSA9PiBib29sZWFuKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9wYXJzZXIuYWRkRXNjSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcndhcmQgYWRkT3NjSGFuZGxlciBmcm9tIHBhcnNlci5cbiAgICovXG4gIHB1YmxpYyBhZGRPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nKSA9PiBib29sZWFuKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9wYXJzZXIuYWRkT3NjSGFuZGxlcihpZGVudCwgbmV3IE9zY0hhbmRsZXIoY2FsbGJhY2spKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCRUxcbiAgICogQmVsbCAoQ3RybC1HKS5cbiAgICovXG4gIHB1YmxpYyBiZWxsKCk6IHZvaWQge1xuICAgIHRoaXMuX29uUmVxdWVzdEJlbGwuZmlyZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIExGXG4gICAqIExpbmUgRmVlZCBvciBOZXcgTGluZSAoTkwpLiAgKExGICBpcyBDdHJsLUopLlxuICAgKi9cbiAgcHVibGljIGxpbmVGZWVkKCk6IHZvaWQge1xuICAgIC8vIG1ha2UgYnVmZmVyIGxvY2FsIGZvciBmYXN0ZXIgYWNjZXNzXG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG5cbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KGJ1ZmZlci55KTtcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jb252ZXJ0RW9sKSB7XG4gICAgICBidWZmZXIueCA9IDA7XG4gICAgfVxuICAgIGJ1ZmZlci55Kys7XG4gICAgaWYgKGJ1ZmZlci55ID09PSBidWZmZXIuc2Nyb2xsQm90dG9tICsgMSkge1xuICAgICAgYnVmZmVyLnktLTtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLnNjcm9sbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpO1xuICAgIH0gZWxzZSBpZiAoYnVmZmVyLnkgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSB7XG4gICAgICBidWZmZXIueSA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDE7XG4gICAgfVxuICAgIC8vIElmIHRoZSBlbmQgb2YgdGhlIGxpbmUgaXMgaGl0LCBwcmV2ZW50IHRoaXMgYWN0aW9uIGZyb20gd3JhcHBpbmcgYXJvdW5kIHRvIHRoZSBuZXh0IGxpbmUuXG4gICAgaWYgKGJ1ZmZlci54ID49IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgYnVmZmVyLngtLTtcbiAgICB9XG4gICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eShidWZmZXIueSk7XG5cbiAgICB0aGlzLl9vbkxpbmVGZWVkLmZpcmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDUlxuICAgKiBDYXJyaWFnZSBSZXR1cm4gKEN0cmwtTSkuXG4gICAqL1xuICBwdWJsaWMgY2FycmlhZ2VSZXR1cm4oKTogdm9pZCB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQlNcbiAgICogQmFja3NwYWNlIChDdHJsLUgpLlxuICAgKi9cbiAgcHVibGljIGJhY2tzcGFjZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID4gMCkge1xuICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueC0tO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUQUJcbiAgICogSG9yaXpvbnRhbCBUYWIgKEhUKSAoQ3RybC1JKS5cbiAgICovXG4gIHB1YmxpYyB0YWIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9yaWdpbmFsWCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLng7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLm5leHRTdG9wKCk7XG4gICAgaWYgKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZSkge1xuICAgICAgdGhpcy5fdGVybWluYWwub25BMTF5VGFiRW1pdHRlci5maXJlKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggLSBvcmlnaW5hbFgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTT1xuICAgKiBTaGlmdCBPdXQgKEN0cmwtTikgLT4gU3dpdGNoIHRvIEFsdGVybmF0ZSBDaGFyYWN0ZXIgU2V0LiAgVGhpcyBpbnZva2VzIHRoZVxuICAgKiBHMSBjaGFyYWN0ZXIgc2V0LlxuICAgKi9cbiAgcHVibGljIHNoaWZ0T3V0KCk6IHZvaWQge1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTSVxuICAgKiBTaGlmdCBJbiAoQ3RybC1PKSAtPiBTd2l0Y2ggdG8gU3RhbmRhcmQgQ2hhcmFjdGVyIFNldC4gIFRoaXMgaW52b2tlcyB0aGUgRzBcbiAgICogY2hhcmFjdGVyIHNldCAodGhlIGRlZmF1bHQpLlxuICAgKi9cbiAgcHVibGljIHNoaWZ0SW4oKTogdm9pZCB7XG4gICAgdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0xldmVsKDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc3RyaWN0IGN1cnNvciB0byB2aWV3cG9ydCBzaXplIC8gc2Nyb2xsIG1hcmdpbiAob3JpZ2luIG1vZGUpLlxuICAgKi9cbiAgcHJpdmF0ZSBfcmVzdHJpY3RDdXJzb3IoKTogdm9pZCB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IE1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAtIDEsIE1hdGgubWF4KDAsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngpKTtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ID0gdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpblxuICAgICAgPyBNYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxCb3R0b20sIE1hdGgubWF4KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcCwgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSkpXG4gICAgICA6IE1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEsIE1hdGgubWF4KDAsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpKTtcbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhYnNvbHV0ZSBjdXJzb3IgcG9zaXRpb24uXG4gICAqL1xuICBwcml2YXRlIF9zZXRDdXJzb3IoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpO1xuICAgIGlmICh0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luKSB7XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID0geDtcbiAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3AgKyB5O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID0geDtcbiAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgPSB5O1xuICAgIH1cbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHJlbGF0aXZlIGN1cnNvciBwb3NpdGlvbi5cbiAgICovXG4gIHByaXZhdGUgX21vdmVDdXJzb3IoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBmb3IgcmVsYXRpdmUgY2hhbmdlcyB3ZSBoYXZlIHRvIG1ha2Ugc3VyZSB3ZSBhcmUgd2l0aGluIDAgLi4gY29scy9yb3dzIC0gMVxuICAgIC8vIGJlZm9yZSBjYWxjdWxhdGluZyB0aGUgbmV3IHBvc2l0aW9uXG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICB0aGlzLl9zZXRDdXJzb3IodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCArIHgsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgKyB5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgQVxuICAgKiBDdXJzb3IgVXAgUHMgVGltZXMgKGRlZmF1bHQgPSAxKSAoQ1VVKS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JVcChwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICAvLyBzdG9wIGF0IHNjcm9sbFRvcFxuICAgIGNvbnN0IGRpZmZUb1RvcCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3A7XG4gICAgaWYgKGRpZmZUb1RvcCA+PSAwKSB7XG4gICAgICB0aGlzLl9tb3ZlQ3Vyc29yKDAsIC1NYXRoLm1pbihkaWZmVG9Ub3AsIHBhcmFtcy5wYXJhbXNbMF0gfHwgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9tb3ZlQ3Vyc29yKDAsIC0ocGFyYW1zLnBhcmFtc1swXSB8fCAxKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBCXG4gICAqIEN1cnNvciBEb3duIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENVRCkuXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yRG93bihwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICAvLyBzdG9wIGF0IHNjcm9sbEJvdHRvbVxuICAgIGNvbnN0IGRpZmZUb0JvdHRvbSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbEJvdHRvbSAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnk7XG4gICAgaWYgKGRpZmZUb0JvdHRvbSA+PSAwKSB7XG4gICAgICB0aGlzLl9tb3ZlQ3Vyc29yKDAsIE1hdGgubWluKGRpZmZUb0JvdHRvbSwgcGFyYW1zLnBhcmFtc1swXSB8fCAxKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX21vdmVDdXJzb3IoMCwgcGFyYW1zLnBhcmFtc1swXSB8fCAxKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIENcbiAgICogQ3Vyc29yIEZvcndhcmQgUHMgVGltZXMgKGRlZmF1bHQgPSAxKSAoQ1VGKS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JGb3J3YXJkKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX21vdmVDdXJzb3IocGFyYW1zLnBhcmFtc1swXSB8fCAxLCAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgRFxuICAgKiBDdXJzb3IgQmFja3dhcmQgUHMgVGltZXMgKGRlZmF1bHQgPSAxKSAoQ1VCKS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JCYWNrd2FyZChwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9tb3ZlQ3Vyc29yKC0ocGFyYW1zLnBhcmFtc1swXSB8fCAxKSwgMCk7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIEVcbiAgICogQ3Vyc29yIE5leHQgTGluZSBQcyBUaW1lcyAoZGVmYXVsdCA9IDEpIChDTkwpLlxuICAgKiBPdGhlciB0aGFuIGN1cnNvckRvd24gKENVRCkgYWxzbyBzZXQgdGhlIGN1cnNvciB0byBmaXJzdCBjb2x1bW4uXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yTmV4dExpbmUocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5jdXJzb3JEb3duKHBhcmFtcyk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIEZcbiAgICogQ3Vyc29yIFByZXZpb3VzIExpbmUgUHMgVGltZXMgKGRlZmF1bHQgPSAxKSAoQ1BMKS5cbiAgICogT3RoZXIgdGhhbiBjdXJzb3JVcCAoQ1VVKSBhbHNvIHNldCB0aGUgY3Vyc29yIHRvIGZpcnN0IGNvbHVtbi5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JQcmVjZWRpbmdMaW5lKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuY3Vyc29yVXAocGFyYW1zKTtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgR1xuICAgKiBDdXJzb3IgQ2hhcmFjdGVyIEFic29sdXRlICBbY29sdW1uXSAoZGVmYXVsdCA9IFtyb3csMV0pIChDSEEpLlxuICAgKi9cbiAgcHVibGljIGN1cnNvckNoYXJBYnNvbHV0ZShwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9zZXRDdXJzb3IoKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSkgLSAxLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgOyBQcyBIXG4gICAqIEN1cnNvciBQb3NpdGlvbiBbcm93O2NvbHVtbl0gKGRlZmF1bHQgPSBbMSwxXSkgKENVUCkuXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yUG9zaXRpb24ocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5fc2V0Q3Vyc29yKFxuICAgICAgLy8gY29sXG4gICAgICAocGFyYW1zLmxlbmd0aCA+PSAyKSA/IChwYXJhbXMucGFyYW1zWzFdIHx8IDEpIC0gMSA6IDAsXG4gICAgICAvLyByb3dcbiAgICAgIChwYXJhbXMucGFyYW1zWzBdIHx8IDEpIC0gMSk7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGAgIENoYXJhY3RlciBQb3NpdGlvbiBBYnNvbHV0ZVxuICAgKiAgIFtjb2x1bW5dIChkZWZhdWx0ID0gW3JvdywxXSkgKEhQQSkuXG4gICAqIEN1cnJlbnRseSBzYW1lIGZ1bmN0aW9uYWxpdHkgYXMgQ0hBLlxuICAgKi9cbiAgcHVibGljIGNoYXJQb3NBYnNvbHV0ZShwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9zZXRDdXJzb3IoKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSkgLSAxLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gYSAgQ2hhcmFjdGVyIFBvc2l0aW9uIFJlbGF0aXZlXG4gICAqICAgW2NvbHVtbnNdIChkZWZhdWx0ID0gW3Jvdyxjb2wrMV0pIChIUFIpXG4gICAqIEN1cnJlbnRseSBzYW1lIGZ1bmN0aW9uYWxpdHkgYXMgQ1VGLlxuICAgKi9cbiAgcHVibGljIGhQb3NpdGlvblJlbGF0aXZlKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX21vdmVDdXJzb3IocGFyYW1zLnBhcmFtc1swXSB8fCAxLCAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gZCAgVmVydGljYWwgUG9zaXRpb24gQWJzb2x1dGUgKFZQQSlcbiAgICogICBbcm93XSAoZGVmYXVsdCA9IFsxLGNvbHVtbl0pXG4gICAqL1xuICBwdWJsaWMgbGluZVBvc0Fic29sdXRlKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3NldEN1cnNvcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LCAocGFyYW1zLnBhcmFtc1swXSB8fCAxKSAtIDEpO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQbSBlICBWZXJ0aWNhbCBQb3NpdGlvbiBSZWxhdGl2ZSAoVlBSKVxuICAgKiAgIFtyb3dzXSAoZGVmYXVsdCA9IFtyb3crMSxjb2x1bW5dKVxuICAgKiByZXVzZSBDU0kgUHMgQiA/XG4gICAqL1xuICBwdWJsaWMgdlBvc2l0aW9uUmVsYXRpdmUocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5fbW92ZUN1cnNvcigwLCBwYXJhbXMucGFyYW1zWzBdIHx8IDEpO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyA7IFBzIGZcbiAgICogICBIb3Jpem9udGFsIGFuZCBWZXJ0aWNhbCBQb3NpdGlvbiBbcm93O2NvbHVtbl0gKGRlZmF1bHQgPVxuICAgKiAgIFsxLDFdKSAoSFZQKS5cbiAgICogICBTYW1lIGFzIENVUC5cbiAgICovXG4gIHB1YmxpYyBoVlBvc2l0aW9uKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuY3Vyc29yUG9zaXRpb24ocGFyYW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgZyAgVGFiIENsZWFyIChUQkMpLlxuICAgKiAgICAgUHMgPSAwICAtPiBDbGVhciBDdXJyZW50IENvbHVtbiAoZGVmYXVsdCkuXG4gICAqICAgICBQcyA9IDMgIC0+IENsZWFyIEFsbC5cbiAgICogUG90ZW50aWFsbHk6XG4gICAqICAgUHMgPSAyICAtPiBDbGVhciBTdG9wcyBvbiBMaW5lLlxuICAgKiAgIGh0dHA6Ly92dDEwMC5uZXQvYW5uYXJib3IvYWFhLXVnL3NlY3Rpb242Lmh0bWxcbiAgICovXG4gIHB1YmxpYyB0YWJDbGVhcihwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICBjb25zdCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF07XG4gICAgaWYgKHBhcmFtID09PSAwKSB7XG4gICAgICBkZWxldGUgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIudGFic1t0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54XTtcbiAgICB9IGVsc2UgaWYgKHBhcmFtID09PSAzKSB7XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci50YWJzID0ge307XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBJXG4gICAqICAgQ3Vyc29yIEZvcndhcmQgVGFidWxhdGlvbiBQcyB0YWIgc3RvcHMgKGRlZmF1bHQgPSAxKSAoQ0hUKS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JGb3J3YXJkVGFiKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID49IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG4gICAgd2hpbGUgKHBhcmFtLS0pIHtcbiAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5uZXh0U3RvcCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgWiAgQ3Vyc29yIEJhY2t3YXJkIFRhYnVsYXRpb24gUHMgdGFiIHN0b3BzIChkZWZhdWx0ID0gMSkgKENCVCkuXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yQmFja3dhcmRUYWIocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcblxuICAgIC8vIG1ha2UgYnVmZmVyIGxvY2FsIGZvciBmYXN0ZXIgYWNjZXNzXG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG5cbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgYnVmZmVyLnggPSBidWZmZXIucHJldlN0b3AoKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIGVyYXNlIGNlbGxzIGluIGEgdGVybWluYWwgcm93LlxuICAgKiBUaGUgY2VsbCBnZXRzIHJlcGxhY2VkIHdpdGggdGhlIGVyYXNlQ2hhciBvZiB0aGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSB5IHJvdyBpbmRleFxuICAgKiBAcGFyYW0gc3RhcnQgZmlyc3QgY2VsbCBpbmRleCB0byBiZSBlcmFzZWRcbiAgICogQHBhcmFtIGVuZCAgIGVuZCAtIDEgaXMgbGFzdCBlcmFzZWQgY2VsbFxuICAgKi9cbiAgcHJpdmF0ZSBfZXJhc2VJbkJ1ZmZlckxpbmUoeTogbnVtYmVyLCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciwgY2xlYXJXcmFwOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlICsgeSk7XG4gICAgbGluZS5yZXBsYWNlQ2VsbHMoXG4gICAgICBzdGFydCxcbiAgICAgIGVuZCxcbiAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksXG4gICAgICB0aGlzLl9lcmFzZUF0dHJEYXRhKClcbiAgICApO1xuICAgIGlmIChjbGVhcldyYXApIHtcbiAgICAgIGxpbmUuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gcmVzZXQgY2VsbHMgaW4gYSB0ZXJtaW5hbCByb3cuXG4gICAqIFRoZSBjZWxsIGdldHMgcmVwbGFjZWQgd2l0aCB0aGUgZXJhc2VDaGFyIG9mIHRoZSB0ZXJtaW5hbCBhbmQgdGhlIGlzV3JhcHBlZCBwcm9wZXJ0eSBpcyBzZXQgdG8gZmFsc2UuXG4gICAqIEBwYXJhbSB5IHJvdyBpbmRleFxuICAgKi9cbiAgcHJpdmF0ZSBfcmVzZXRCdWZmZXJMaW5lKHk6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgKyB5KTtcbiAgICBsaW5lLmZpbGwodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgbGluZS5pc1dyYXBwZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgSiAgRXJhc2UgaW4gRGlzcGxheSAoRUQpLlxuICAgKiAgICAgUHMgPSAwICAtPiBFcmFzZSBCZWxvdyAoZGVmYXVsdCkuXG4gICAqICAgICBQcyA9IDEgIC0+IEVyYXNlIEFib3ZlLlxuICAgKiAgICAgUHMgPSAyICAtPiBFcmFzZSBBbGwuXG4gICAqICAgICBQcyA9IDMgIC0+IEVyYXNlIFNhdmVkIExpbmVzICh4dGVybSkuXG4gICAqIENTSSA/IFBzIEpcbiAgICogICBFcmFzZSBpbiBEaXNwbGF5IChERUNTRUQpLlxuICAgKiAgICAgUHMgPSAwICAtPiBTZWxlY3RpdmUgRXJhc2UgQmVsb3cgKGRlZmF1bHQpLlxuICAgKiAgICAgUHMgPSAxICAtPiBTZWxlY3RpdmUgRXJhc2UgQWJvdmUuXG4gICAqICAgICBQcyA9IDIgIC0+IFNlbGVjdGl2ZSBFcmFzZSBBbGwuXG4gICAqL1xuICBwdWJsaWMgZXJhc2VJbkRpc3BsYXkocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBsZXQgajtcbiAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbMF0pIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgaiA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnk7XG4gICAgICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkoaik7XG4gICAgICAgIHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKGorKywgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID09PSAwKTtcbiAgICAgICAgZm9yICg7IGogPCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7IGorKykge1xuICAgICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyTGluZShqKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KGopO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgaiA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnk7XG4gICAgICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkoaik7XG4gICAgICAgIC8vIERlbGV0ZWQgZnJvbnQgcGFydCBvZiBsaW5lIGFuZCBldmVyeXRoaW5nIGJlZm9yZS4gVGhpcyBsaW5lIHdpbGwgbm8gbG9uZ2VyIGJlIHdyYXBwZWQuXG4gICAgICAgIHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKGosIDAsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggKyAxLCB0cnVlKTtcbiAgICAgICAgaWYgKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggKyAxID49IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgICAgIC8vIERlbGV0ZWQgZW50aXJlIHByZXZpb3VzIGxpbmUuIFRoaXMgbmV4dCBsaW5lIGNhbiBubyBsb25nZXIgYmUgd3JhcHBlZC5cbiAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoaiArIDEpLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChqLS0pIHtcbiAgICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlckxpbmUoaik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSgwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGogPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkoaiAtIDEpO1xuICAgICAgICB3aGlsZSAoai0tKSB7XG4gICAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXJMaW5lKGopO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkoMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICAvLyBDbGVhciBzY3JvbGxiYWNrIChldmVyeXRoaW5nIG5vdCBpbiB2aWV3cG9ydClcbiAgICAgICAgY29uc3Qgc2Nyb2xsQmFja1NpemUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGggLSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgICAgIGlmIChzY3JvbGxCYWNrU2l6ZSA+IDApIHtcbiAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy50cmltU3RhcnQoc2Nyb2xsQmFja1NpemUpO1xuICAgICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlID0gTWF0aC5tYXgodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgLSBzY3JvbGxCYWNrU2l6ZSwgMCk7XG4gICAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AgPSBNYXRoLm1heCh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCAtIHNjcm9sbEJhY2tTaXplLCAwKTtcbiAgICAgICAgICAvLyBGb3JjZSBhIHNjcm9sbCBldmVudCB0byByZWZyZXNoIHZpZXdwb3J0XG4gICAgICAgICAgdGhpcy5fb25TY3JvbGwuZmlyZSgwKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIEsgIEVyYXNlIGluIExpbmUgKEVMKS5cbiAgICogICAgIFBzID0gMCAgLT4gRXJhc2UgdG8gUmlnaHQgKGRlZmF1bHQpLlxuICAgKiAgICAgUHMgPSAxICAtPiBFcmFzZSB0byBMZWZ0LlxuICAgKiAgICAgUHMgPSAyICAtPiBFcmFzZSBBbGwuXG4gICAqIENTSSA/IFBzIEtcbiAgICogICBFcmFzZSBpbiBMaW5lIChERUNTRUwpLlxuICAgKiAgICAgUHMgPSAwICAtPiBTZWxlY3RpdmUgRXJhc2UgdG8gUmlnaHQgKGRlZmF1bHQpLlxuICAgKiAgICAgUHMgPSAxICAtPiBTZWxlY3RpdmUgRXJhc2UgdG8gTGVmdC5cbiAgICogICAgIFBzID0gMiAgLT4gU2VsZWN0aXZlIEVyYXNlIEFsbC5cbiAgICovXG4gIHB1YmxpYyBlcmFzZUluTGluZShwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1swXSkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICB0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgdGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSwgMCwgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCArIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgdGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSwgMCwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIExcbiAgICogSW5zZXJ0IFBzIExpbmUocykgKGRlZmF1bHQgPSAxKSAoSUwpLlxuICAgKi9cbiAgcHVibGljIGluc2VydExpbmVzKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgLy8gbWFrZSBidWZmZXIgbG9jYWwgZm9yIGZhc3RlciBhY2Nlc3NcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIGlmIChidWZmZXIueSA+IGJ1ZmZlci5zY3JvbGxCb3R0b20gfHwgYnVmZmVyLnkgPCBidWZmZXIuc2Nyb2xsVG9wKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgcm93OiBudW1iZXIgPSBidWZmZXIueSArIGJ1ZmZlci55YmFzZTtcblxuICAgIGNvbnN0IHNjcm9sbEJvdHRvbVJvd3NPZmZzZXQgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxIC0gYnVmZmVyLnNjcm9sbEJvdHRvbTtcbiAgICBjb25zdCBzY3JvbGxCb3R0b21BYnNvbHV0ZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEgKyBidWZmZXIueWJhc2UgLSBzY3JvbGxCb3R0b21Sb3dzT2Zmc2V0ICsgMTtcbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgLy8gdGVzdDogZWNobyAtZSAnXFxlWzQ0bVxcZVsxTFxcZVswbSdcbiAgICAgIC8vIGJsYW5rTGluZSh0cnVlKSAtIHh0ZXJtL2xpbnV4IGJlaGF2aW9yXG4gICAgICBidWZmZXIubGluZXMuc3BsaWNlKHNjcm9sbEJvdHRvbUFic29sdXRlIC0gMSwgMSk7XG4gICAgICBidWZmZXIubGluZXMuc3BsaWNlKHJvdywgMCwgYnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICB9XG5cbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkoYnVmZmVyLnksIGJ1ZmZlci5zY3JvbGxCb3R0b20pO1xuICAgIGJ1ZmZlci54ID0gMDsgLy8gc2VlIGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vY2hhcHRlcjQuaHRtbCAtIHZ0MjIwIG9ubHk/XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIE1cbiAgICogRGVsZXRlIFBzIExpbmUocykgKGRlZmF1bHQgPSAxKSAoREwpLlxuICAgKi9cbiAgcHVibGljIGRlbGV0ZUxpbmVzKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgLy8gbWFrZSBidWZmZXIgbG9jYWwgZm9yIGZhc3RlciBhY2Nlc3NcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIGlmIChidWZmZXIueSA+IGJ1ZmZlci5zY3JvbGxCb3R0b20gfHwgYnVmZmVyLnkgPCBidWZmZXIuc2Nyb2xsVG9wKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgcm93OiBudW1iZXIgPSBidWZmZXIueSArIGJ1ZmZlci55YmFzZTtcblxuICAgIGxldCBqOiBudW1iZXI7XG4gICAgaiA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEgLSBidWZmZXIuc2Nyb2xsQm90dG9tO1xuICAgIGogPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxICsgYnVmZmVyLnliYXNlIC0gajtcbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgLy8gdGVzdDogZWNobyAtZSAnXFxlWzQ0bVxcZVsxTVxcZVswbSdcbiAgICAgIC8vIGJsYW5rTGluZSh0cnVlKSAtIHh0ZXJtL2xpbnV4IGJlaGF2aW9yXG4gICAgICBidWZmZXIubGluZXMuc3BsaWNlKHJvdywgMSk7XG4gICAgICBidWZmZXIubGluZXMuc3BsaWNlKGosIDAsIGJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KGJ1ZmZlci55LCBidWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICBidWZmZXIueCA9IDA7IC8vIHNlZSBodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL2NoYXB0ZXI0Lmh0bWwgLSB2dDIyMCBvbmx5P1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBAXG4gICAqIEluc2VydCBQcyAoQmxhbmspIENoYXJhY3RlcihzKSAoZGVmYXVsdCA9IDEpIChJQ0gpLlxuICAgKi9cbiAgcHVibGljIGluc2VydENoYXJzKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldCh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ICsgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UpO1xuICAgIGlmIChsaW5lKSB7XG4gICAgICBsaW5lLmluc2VydENlbGxzKFxuICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LFxuICAgICAgICBwYXJhbXMucGFyYW1zWzBdIHx8IDEsXG4gICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksXG4gICAgICAgIHRoaXMuX2VyYXNlQXR0ckRhdGEoKVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBQXG4gICAqIERlbGV0ZSBQcyBDaGFyYWN0ZXIocykgKGRlZmF1bHQgPSAxKSAoRENIKS5cbiAgICovXG4gIHB1YmxpYyBkZWxldGVDaGFycyhwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSArIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlKTtcbiAgICBpZiAobGluZSkge1xuICAgICAgbGluZS5kZWxldGVDZWxscyhcbiAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCxcbiAgICAgICAgcGFyYW1zLnBhcmFtc1swXSB8fCAxLFxuICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLFxuICAgICAgICB0aGlzLl9lcmFzZUF0dHJEYXRhKClcbiAgICAgICk7XG4gICAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgUyAgU2Nyb2xsIHVwIFBzIGxpbmVzIChkZWZhdWx0ID0gMSkgKFNVKS5cbiAgICovXG4gIHB1YmxpYyBzY3JvbGxVcChwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICBsZXQgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG5cbiAgICAvLyBtYWtlIGJ1ZmZlciBsb2NhbCBmb3IgZmFzdGVyIGFjY2Vzc1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuXG4gICAgd2hpbGUgKHBhcmFtLS0pIHtcbiAgICAgIGJ1ZmZlci5saW5lcy5zcGxpY2UoYnVmZmVyLnliYXNlICsgYnVmZmVyLnNjcm9sbFRvcCwgMSk7XG4gICAgICBidWZmZXIubGluZXMuc3BsaWNlKGJ1ZmZlci55YmFzZSArIGJ1ZmZlci5zY3JvbGxCb3R0b20sIDAsIGJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShidWZmZXIuc2Nyb2xsVG9wLCBidWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgVCAgU2Nyb2xsIGRvd24gUHMgbGluZXMgKGRlZmF1bHQgPSAxKSAoU0QpLlxuICAgKi9cbiAgcHVibGljIHNjcm9sbERvd24ocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgLy8gbWFrZSBidWZmZXIgbG9jYWwgZm9yIGZhc3RlciBhY2Nlc3NcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIHdoaWxlIChwYXJhbS0tKSB7XG4gICAgICBidWZmZXIubGluZXMuc3BsaWNlKGJ1ZmZlci55YmFzZSArIGJ1ZmZlci5zY3JvbGxCb3R0b20sIDEpO1xuICAgICAgYnVmZmVyLmxpbmVzLnNwbGljZShidWZmZXIueWJhc2UgKyBidWZmZXIuc2Nyb2xsVG9wLCAwLCBidWZmZXIuZ2V0QmxhbmtMaW5lKERFRkFVTFRfQVRUUl9EQVRBKSk7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShidWZmZXIuc2Nyb2xsVG9wLCBidWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgU1AgQCAgU2Nyb2xsIGxlZnQgUHMgY29sdW1ucyAoZGVmYXVsdCA9IDEpIChTTCkgRUNNQS00OFxuICAgKlxuICAgKiBOb3RhdGlvbjogKFBuKVxuICAgKiBSZXByZXNlbnRhdGlvbjogQ1NJIFBuIDAyLzAwIDA0LzAwXG4gICAqIFBhcmFtZXRlciBkZWZhdWx0IHZhbHVlOiBQbiA9IDFcbiAgICogU0wgY2F1c2VzIHRoZSBkYXRhIGluIHRoZSBwcmVzZW50YXRpb24gY29tcG9uZW50IHRvIGJlIG1vdmVkIGJ5IG4gY2hhcmFjdGVyIHBvc2l0aW9uc1xuICAgKiBpZiB0aGUgbGluZSBvcmllbnRhdGlvbiBpcyBob3Jpem9udGFsLCBvciBieSBuIGxpbmUgcG9zaXRpb25zIGlmIHRoZSBsaW5lIG9yaWVudGF0aW9uXG4gICAqIGlzIHZlcnRpY2FsLCBzdWNoIHRoYXQgdGhlIGRhdGEgYXBwZWFyIHRvIG1vdmUgdG8gdGhlIGxlZnQ7IHdoZXJlIG4gZXF1YWxzIHRoZSB2YWx1ZSBvZiBQbi5cbiAgICogVGhlIGFjdGl2ZSBwcmVzZW50YXRpb24gcG9zaXRpb24gaXMgbm90IGFmZmVjdGVkIGJ5IHRoaXMgY29udHJvbCBmdW5jdGlvbi5cbiAgICpcbiAgICogU3VwcG9ydGVkOlxuICAgKiAgIC0gYWx3YXlzIGxlZnQgc2hpZnQgKG5vIGxpbmUgb3JpZW50YXRpb24gc2V0dGluZyByZXNwZWN0ZWQpXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsTGVmdChwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICBpZiAoYnVmZmVyLnkgPiBidWZmZXIuc2Nyb2xsQm90dG9tIHx8IGJ1ZmZlci55IDwgYnVmZmVyLnNjcm9sbFRvcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICBmb3IgKGxldCB5ID0gYnVmZmVyLnNjcm9sbFRvcDsgeSA8PSBidWZmZXIuc2Nyb2xsQm90dG9tOyArK3kpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBidWZmZXIubGluZXMuZ2V0KGJ1ZmZlci55YmFzZSArIHkpO1xuICAgICAgbGluZS5kZWxldGVDZWxscygwLCBwYXJhbSwgYnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksIHRoaXMuX2VyYXNlQXR0ckRhdGEoKSk7XG4gICAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkoYnVmZmVyLnNjcm9sbFRvcCwgYnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFNQIEEgIFNjcm9sbCByaWdodCBQcyBjb2x1bW5zIChkZWZhdWx0ID0gMSkgKFNSKSBFQ01BLTQ4XG4gICAqXG4gICAqIE5vdGF0aW9uOiAoUG4pXG4gICAqIFJlcHJlc2VudGF0aW9uOiBDU0kgUG4gMDIvMDAgMDQvMDFcbiAgICogUGFyYW1ldGVyIGRlZmF1bHQgdmFsdWU6IFBuID0gMVxuICAgKiBTUiBjYXVzZXMgdGhlIGRhdGEgaW4gdGhlIHByZXNlbnRhdGlvbiBjb21wb25lbnQgdG8gYmUgbW92ZWQgYnkgbiBjaGFyYWN0ZXIgcG9zaXRpb25zXG4gICAqIGlmIHRoZSBsaW5lIG9yaWVudGF0aW9uIGlzIGhvcml6b250YWwsIG9yIGJ5IG4gbGluZSBwb3NpdGlvbnMgaWYgdGhlIGxpbmUgb3JpZW50YXRpb25cbiAgICogaXMgdmVydGljYWwsIHN1Y2ggdGhhdCB0aGUgZGF0YSBhcHBlYXIgdG8gbW92ZSB0byB0aGUgcmlnaHQ7IHdoZXJlIG4gZXF1YWxzIHRoZSB2YWx1ZSBvZiBQbi5cbiAgICogVGhlIGFjdGl2ZSBwcmVzZW50YXRpb24gcG9zaXRpb24gaXMgbm90IGFmZmVjdGVkIGJ5IHRoaXMgY29udHJvbCBmdW5jdGlvbi5cbiAgICpcbiAgICogU3VwcG9ydGVkOlxuICAgKiAgIC0gYWx3YXlzIHJpZ2h0IHNoaWZ0IChubyBsaW5lIG9yaWVudGF0aW9uIHNldHRpbmcgcmVzcGVjdGVkKVxuICAgKi9cbiAgcHVibGljIHNjcm9sbFJpZ2h0KHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGlmIChidWZmZXIueSA+IGJ1ZmZlci5zY3JvbGxCb3R0b20gfHwgYnVmZmVyLnkgPCBidWZmZXIuc2Nyb2xsVG9wKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuICAgIGZvciAobGV0IHkgPSBidWZmZXIuc2Nyb2xsVG9wOyB5IDw9IGJ1ZmZlci5zY3JvbGxCb3R0b207ICsreSkge1xuICAgICAgY29uc3QgbGluZSA9IGJ1ZmZlci5saW5lcy5nZXQoYnVmZmVyLnliYXNlICsgeSk7XG4gICAgICBsaW5lLmluc2VydENlbGxzKDAsIHBhcmFtLCBidWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSwgdGhpcy5fZXJhc2VBdHRyRGF0YSgpKTtcbiAgICAgIGxpbmUuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShidWZmZXIuc2Nyb2xsVG9wLCBidWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gJyB9XG4gICAqIEluc2VydCBQcyBDb2x1bW4ocykgKGRlZmF1bHQgPSAxKSAoREVDSUMpLCBWVDQyMCBhbmQgdXAuXG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0Q29sdW1ucyhwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICBpZiAoYnVmZmVyLnkgPiBidWZmZXIuc2Nyb2xsQm90dG9tIHx8IGJ1ZmZlci55IDwgYnVmZmVyLnNjcm9sbFRvcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICBmb3IgKGxldCB5ID0gYnVmZmVyLnNjcm9sbFRvcDsgeSA8PSBidWZmZXIuc2Nyb2xsQm90dG9tOyArK3kpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoYnVmZmVyLnliYXNlICsgeSk7XG4gICAgICBsaW5lLmluc2VydENlbGxzKGJ1ZmZlci54LCBwYXJhbSwgYnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksIHRoaXMuX2VyYXNlQXR0ckRhdGEoKSk7XG4gICAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkoYnVmZmVyLnNjcm9sbFRvcCwgYnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtICcgflxuICAgKiBEZWxldGUgUHMgQ29sdW1uKHMpIChkZWZhdWx0ID0gMSkgKERFQ0RDKSwgVlQ0MjAgYW5kIHVwLlxuICAgKi9cbiAgcHVibGljIGRlbGV0ZUNvbHVtbnMocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG4gICAgaWYgKGJ1ZmZlci55ID4gYnVmZmVyLnNjcm9sbEJvdHRvbSB8fCBidWZmZXIueSA8IGJ1ZmZlci5zY3JvbGxUb3ApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG4gICAgZm9yIChsZXQgeSA9IGJ1ZmZlci5zY3JvbGxUb3A7IHkgPD0gYnVmZmVyLnNjcm9sbEJvdHRvbTsgKyt5KSB7XG4gICAgICBjb25zdCBsaW5lID0gYnVmZmVyLmxpbmVzLmdldChidWZmZXIueWJhc2UgKyB5KTtcbiAgICAgIGxpbmUuZGVsZXRlQ2VsbHMoYnVmZmVyLngsIHBhcmFtLCBidWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSwgdGhpcy5fZXJhc2VBdHRyRGF0YSgpKTtcbiAgICAgIGxpbmUuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShidWZmZXIuc2Nyb2xsVG9wLCBidWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgWFxuICAgKiBFcmFzZSBQcyBDaGFyYWN0ZXIocykgKGRlZmF1bHQgPSAxKSAoRUNIKS5cbiAgICovXG4gIHB1YmxpYyBlcmFzZUNoYXJzKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldCh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ICsgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UpO1xuICAgIGlmIChsaW5lKSB7XG4gICAgICBsaW5lLnJlcGxhY2VDZWxscyhcbiAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCxcbiAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCArIChwYXJhbXMucGFyYW1zWzBdIHx8IDEpLFxuICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLFxuICAgICAgICB0aGlzLl9lcmFzZUF0dHJEYXRhKClcbiAgICAgICk7XG4gICAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgYiAgUmVwZWF0IHRoZSBwcmVjZWRpbmcgZ3JhcGhpYyBjaGFyYWN0ZXIgUHMgdGltZXMgKFJFUCkuXG4gICAqIEZyb20gRUNNQSA0OCAoQHNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvcHVibGljYXRpb25zL2ZpbGVzL0VDTUEtU1QvRWNtYS0wNDgucGRmKVxuICAgKiAgICBOb3RhdGlvbjogKFBuKVxuICAgKiAgICBSZXByZXNlbnRhdGlvbjogQ1NJIFBuIDA2LzAyXG4gICAqICAgIFBhcmFtZXRlciBkZWZhdWx0IHZhbHVlOiBQbiA9IDFcbiAgICogICAgUkVQIGlzIHVzZWQgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJlY2VkaW5nIGNoYXJhY3RlciBpbiB0aGUgZGF0YSBzdHJlYW0sXG4gICAqICAgIGlmIGl0IGlzIGEgZ3JhcGhpYyBjaGFyYWN0ZXIgKHJlcHJlc2VudGVkIGJ5IG9uZSBvciBtb3JlIGJpdCBjb21iaW5hdGlvbnMpIGluY2x1ZGluZyBTUEFDRSxcbiAgICogICAgaXMgdG8gYmUgcmVwZWF0ZWQgbiB0aW1lcywgd2hlcmUgbiBlcXVhbHMgdGhlIHZhbHVlIG9mIFBuLlxuICAgKiAgICBJZiB0aGUgY2hhcmFjdGVyIHByZWNlZGluZyBSRVAgaXMgYSBjb250cm9sIGZ1bmN0aW9uIG9yIHBhcnQgb2YgYSBjb250cm9sIGZ1bmN0aW9uLFxuICAgKiAgICB0aGUgZWZmZWN0IG9mIFJFUCBpcyBub3QgZGVmaW5lZCBieSB0aGlzIFN0YW5kYXJkLlxuICAgKlxuICAgKiBTaW5jZSB3ZSBwcm9wYWdhdGUgdGhlIHRlcm1pbmFsIGFzIHh0ZXJtLTI1NmNvbG9yIHdlIGhhdmUgdG8gZm9sbG93IHh0ZXJtJ3MgYmVoYXZpb3I6XG4gICAqICAgIC0gZnVsbHdpZHRoICsgc3Vycm9nYXRlIGNoYXJzIGFyZSBpZ25vcmVkXG4gICAqICAgIC0gZm9yIGNvbWJpbmluZyBjaGFycyBvbmx5IHRoZSBiYXNlIGNoYXIgZ2V0cyByZXBlYXRlZFxuICAgKiAgICAtIHRleHQgYXR0cnMgYXJlIGFwcGxpZWQgbm9ybWFsbHlcbiAgICogICAgLSB3cmFwIGFyb3VuZCBpcyByZXNwZWN0ZWRcbiAgICogICAgLSBhbnkgdmFsaWQgc2VxdWVuY2UgcmVzZXRzIHRoZSBjYXJyaWVkIGZvcndhcmQgY2hhclxuICAgKlxuICAgKiBOb3RlOiBUbyBnZXQgcmVzZXQgb24gYSB2YWxpZCBzZXF1ZW5jZSB3b3JraW5nIGNvcnJlY3RseSB3aXRob3V0IG11Y2ggcnVudGltZSBwZW5hbHR5LFxuICAgKiB0aGUgcHJlY2VkaW5nIGNvZGVwb2ludCBpcyBzdG9yZWQgb24gdGhlIHBhcnNlciBpbiBgdGhpcy5wcmludGAgYW5kIHJlc2V0IGR1cmluZyBgcGFyc2VyLnBhcnNlYC5cbiAgICovXG4gIHB1YmxpYyByZXBlYXRQcmVjZWRpbmdDaGFyYWN0ZXIocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGNhbGwgcHJpbnQgdG8gaW5zZXJ0IHRoZSBjaGFycyBhbmQgaGFuZGxlIGNvcnJlY3Qgd3JhcHBpbmdcbiAgICBjb25zdCBsZW5ndGggPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG4gICAgY29uc3QgZGF0YSA9IG5ldyBVaW50MzJBcnJheShsZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgIGRhdGFbaV0gPSB0aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50O1xuICAgIH1cbiAgICB0aGlzLnByaW50KGRhdGEsIDAsIGRhdGEubGVuZ3RoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgYyAgU2VuZCBEZXZpY2UgQXR0cmlidXRlcyAoUHJpbWFyeSBEQSkuXG4gICAqICAgICBQcyA9IDAgIG9yIG9taXR0ZWQgLT4gcmVxdWVzdCBhdHRyaWJ1dGVzIGZyb20gdGVybWluYWwuICBUaGVcbiAgICogICAgIHJlc3BvbnNlIGRlcGVuZHMgb24gdGhlIGRlY1Rlcm1pbmFsSUQgcmVzb3VyY2Ugc2V0dGluZy5cbiAgICogICAgIC0+IENTSSA/IDEgOyAyIGMgIChgYFZUMTAwIHdpdGggQWR2YW5jZWQgVmlkZW8gT3B0aW9uJycpXG4gICAqICAgICAtPiBDU0kgPyAxIDsgMCBjICAoYGBWVDEwMSB3aXRoIE5vIE9wdGlvbnMnJylcbiAgICogICAgIC0+IENTSSA/IDYgYyAgKGBgVlQxMDInJylcbiAgICogICAgIC0+IENTSSA/IDYgMCA7IDEgOyAyIDsgNiA7IDggOyA5IDsgMSA1IDsgYyAgKGBgVlQyMjAnJylcbiAgICogICBUaGUgVlQxMDAtc3R5bGUgcmVzcG9uc2UgcGFyYW1ldGVycyBkbyBub3QgbWVhbiBhbnl0aGluZyBieVxuICAgKiAgIHRoZW1zZWx2ZXMuICBWVDIyMCBwYXJhbWV0ZXJzIGRvLCB0ZWxsaW5nIHRoZSBob3N0IHdoYXQgZmVhLVxuICAgKiAgIHR1cmVzIHRoZSB0ZXJtaW5hbCBzdXBwb3J0czpcbiAgICogICAgIFBzID0gMSAgLT4gMTMyLWNvbHVtbnMuXG4gICAqICAgICBQcyA9IDIgIC0+IFByaW50ZXIuXG4gICAqICAgICBQcyA9IDYgIC0+IFNlbGVjdGl2ZSBlcmFzZS5cbiAgICogICAgIFBzID0gOCAgLT4gVXNlci1kZWZpbmVkIGtleXMuXG4gICAqICAgICBQcyA9IDkgIC0+IE5hdGlvbmFsIHJlcGxhY2VtZW50IGNoYXJhY3RlciBzZXRzLlxuICAgKiAgICAgUHMgPSAxIDUgIC0+IFRlY2huaWNhbCBjaGFyYWN0ZXJzLlxuICAgKiAgICAgUHMgPSAyIDIgIC0+IEFOU0kgY29sb3IsIGUuZy4sIFZUNTI1LlxuICAgKiAgICAgUHMgPSAyIDkgIC0+IEFOU0kgdGV4dCBsb2NhdG9yIChpLmUuLCBERUMgTG9jYXRvciBtb2RlKS5cbiAgICogQ1NJID4gUHMgY1xuICAgKiAgIFNlbmQgRGV2aWNlIEF0dHJpYnV0ZXMgKFNlY29uZGFyeSBEQSkuXG4gICAqICAgICBQcyA9IDAgIG9yIG9taXR0ZWQgLT4gcmVxdWVzdCB0aGUgdGVybWluYWwncyBpZGVudGlmaWNhdGlvblxuICAgKiAgICAgY29kZS4gIFRoZSByZXNwb25zZSBkZXBlbmRzIG9uIHRoZSBkZWNUZXJtaW5hbElEIHJlc291cmNlIHNldC1cbiAgICogICAgIHRpbmcuICBJdCBzaG91bGQgYXBwbHkgb25seSB0byBWVDIyMCBhbmQgdXAsIGJ1dCB4dGVybSBleHRlbmRzXG4gICAqICAgICB0aGlzIHRvIFZUMTAwLlxuICAgKiAgICAgLT4gQ1NJICA+IFBwIDsgUHYgOyBQYyBjXG4gICAqICAgd2hlcmUgUHAgZGVub3RlcyB0aGUgdGVybWluYWwgdHlwZVxuICAgKiAgICAgUHAgPSAwICAtPiBgYFZUMTAwJycuXG4gICAqICAgICBQcCA9IDEgIC0+IGBgVlQyMjAnJy5cbiAgICogICBhbmQgUHYgaXMgdGhlIGZpcm13YXJlIHZlcnNpb24gKGZvciB4dGVybSwgdGhpcyB3YXMgb3JpZ2luYWxseVxuICAgKiAgIHRoZSBYRnJlZTg2IHBhdGNoIG51bWJlciwgc3RhcnRpbmcgd2l0aCA5NSkuICBJbiBhIERFQyB0ZXJtaS1cbiAgICogICBuYWwsIFBjIGluZGljYXRlcyB0aGUgUk9NIGNhcnRyaWRnZSByZWdpc3RyYXRpb24gbnVtYmVyIGFuZCBpc1xuICAgKiAgIGFsd2F5cyB6ZXJvLlxuICAgKiBNb3JlIGluZm9ybWF0aW9uOlxuICAgKiAgIHh0ZXJtL2NoYXJwcm9jLmMgLSBsaW5lIDIwMTIsIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgKiAgIHZpbSByZXNwb25kcyB3aXRoIF5bWz8wYyBvciBeW1s/MWMgYWZ0ZXIgdGhlIHRlcm1pbmFsJ3MgcmVzcG9uc2UgKD8pXG4gICAqL1xuICBwdWJsaWMgc2VuZERldmljZUF0dHJpYnV0ZXNQcmltYXJ5KHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIGlmIChwYXJhbXMucGFyYW1zWzBdID4gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fdGVybWluYWwuaXMoJ3h0ZXJtJykgfHwgdGhpcy5fdGVybWluYWwuaXMoJ3J4dnQtdW5pY29kZScpIHx8IHRoaXMuX3Rlcm1pbmFsLmlzKCdzY3JlZW4nKSkge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5FU0MgKyAnWz8xOzJjJyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl90ZXJtaW5hbC5pcygnbGludXgnKSkge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5FU0MgKyAnWz82YycpO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgc2VuZERldmljZUF0dHJpYnV0ZXNTZWNvbmRhcnkocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgaWYgKHBhcmFtcy5wYXJhbXNbMF0gPiAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHh0ZXJtIGFuZCB1cnh2dFxuICAgIC8vIHNlZW0gdG8gc3BpdCB0aGlzXG4gICAgLy8gb3V0IGFyb3VuZCB+MzcwIHRpbWVzICg/KS5cbiAgICBpZiAodGhpcy5fdGVybWluYWwuaXMoJ3h0ZXJtJykpIHtcbiAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoQzAuRVNDICsgJ1s+MDsyNzY7MGMnKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX3Rlcm1pbmFsLmlzKCdyeHZ0LXVuaWNvZGUnKSkge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5FU0MgKyAnWz44NTs5NTswYycpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fdGVybWluYWwuaXMoJ2xpbnV4JykpIHtcbiAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgYnkgbGludXggY29uc29sZS5cbiAgICAgIC8vIGxpbnV4IGNvbnNvbGUgZWNob2VzIHBhcmFtZXRlcnMuXG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHBhcmFtcy5wYXJhbXNbMF0gKyAnYycpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fdGVybWluYWwuaXMoJ3NjcmVlbicpKSB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbPjgzOzQwMDAzOzBjJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQbSBoICBTZXQgTW9kZSAoU00pLlxuICAgKiAgICAgUHMgPSAyICAtPiBLZXlib2FyZCBBY3Rpb24gTW9kZSAoQU0pLlxuICAgKiAgICAgUHMgPSA0ICAtPiBJbnNlcnQgTW9kZSAoSVJNKS5cbiAgICogICAgIFBzID0gMSAyICAtPiBTZW5kL3JlY2VpdmUgKFNSTSkuXG4gICAqICAgICBQcyA9IDIgMCAgLT4gQXV0b21hdGljIE5ld2xpbmUgKExOTSkuXG4gICAqIENTSSA/IFBtIGhcbiAgICogICBERUMgUHJpdmF0ZSBNb2RlIFNldCAoREVDU0VUKS5cbiAgICogICAgIFBzID0gMSAgLT4gQXBwbGljYXRpb24gQ3Vyc29yIEtleXMgKERFQ0NLTSkuXG4gICAqICAgICBQcyA9IDIgIC0+IERlc2lnbmF0ZSBVU0FTQ0lJIGZvciBjaGFyYWN0ZXIgc2V0cyBHMC1HM1xuICAgKiAgICAgKERFQ0FOTSksIGFuZCBzZXQgVlQxMDAgbW9kZS5cbiAgICogICAgIFBzID0gMyAgLT4gMTMyIENvbHVtbiBNb2RlIChERUNDT0xNKS5cbiAgICogICAgIFBzID0gNCAgLT4gU21vb3RoIChTbG93KSBTY3JvbGwgKERFQ1NDTE0pLlxuICAgKiAgICAgUHMgPSA1ICAtPiBSZXZlcnNlIFZpZGVvIChERUNTQ05NKS5cbiAgICogICAgIFBzID0gNiAgLT4gT3JpZ2luIE1vZGUgKERFQ09NKS5cbiAgICogICAgIFBzID0gNyAgLT4gV3JhcGFyb3VuZCBNb2RlIChERUNBV00pLlxuICAgKiAgICAgUHMgPSA4ICAtPiBBdXRvLXJlcGVhdCBLZXlzIChERUNBUk0pLlxuICAgKiAgICAgUHMgPSA5ICAtPiBTZW5kIE1vdXNlIFggJiBZIG9uIGJ1dHRvbiBwcmVzcy4gIFNlZSB0aGUgc2VjLVxuICAgKiAgICAgdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwICAtPiBTaG93IHRvb2xiYXIgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAxIDIgIC0+IFN0YXJ0IEJsaW5raW5nIEN1cnNvciAoYXR0NjEwKS5cbiAgICogICAgIFBzID0gMSA4ICAtPiBQcmludCBmb3JtIGZlZWQgKERFQ1BGRikuXG4gICAqICAgICBQcyA9IDEgOSAgLT4gU2V0IHByaW50IGV4dGVudCB0byBmdWxsIHNjcmVlbiAoREVDUEVYKS5cbiAgICogICAgIFBzID0gMiA1ICAtPiBTaG93IEN1cnNvciAoREVDVENFTSkuXG4gICAqICAgICBQcyA9IDMgMCAgLT4gU2hvdyBzY3JvbGxiYXIgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAzIDUgIC0+IEVuYWJsZSBmb250LXNoaWZ0aW5nIGZ1bmN0aW9ucyAocnh2dCkuXG4gICAqICAgICBQcyA9IDMgOCAgLT4gRW50ZXIgVGVrdHJvbml4IE1vZGUgKERFQ1RFSykuXG4gICAqICAgICBQcyA9IDQgMCAgLT4gQWxsb3cgODAgLT4gMTMyIE1vZGUuXG4gICAqICAgICBQcyA9IDQgMSAgLT4gbW9yZSgxKSBmaXggKHNlZSBjdXJzZXMgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSA0IDIgIC0+IEVuYWJsZSBOYXRpb24gUmVwbGFjZW1lbnQgQ2hhcmFjdGVyIHNldHMgKERFQ04tXG4gICAqICAgICBSQ00pLlxuICAgKiAgICAgUHMgPSA0IDQgIC0+IFR1cm4gT24gTWFyZ2luIEJlbGwuXG4gICAqICAgICBQcyA9IDQgNSAgLT4gUmV2ZXJzZS13cmFwYXJvdW5kIE1vZGUuXG4gICAqICAgICBQcyA9IDQgNiAgLT4gU3RhcnQgTG9nZ2luZy4gIFRoaXMgaXMgbm9ybWFsbHkgZGlzYWJsZWQgYnkgYVxuICAgKiAgICAgY29tcGlsZS10aW1lIG9wdGlvbi5cbiAgICogICAgIFBzID0gNCA3ICAtPiBVc2UgQWx0ZXJuYXRlIFNjcmVlbiBCdWZmZXIuICAoVGhpcyBtYXkgYmUgZGlzLVxuICAgKiAgICAgYWJsZWQgYnkgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS5cbiAgICogICAgIFBzID0gNiA2ICAtPiBBcHBsaWNhdGlvbiBrZXlwYWQgKERFQ05LTSkuXG4gICAqICAgICBQcyA9IDYgNyAgLT4gQmFja2Fycm93IGtleSBzZW5kcyBiYWNrc3BhY2UgKERFQ0JLTSkuXG4gICAqICAgICBQcyA9IDEgMCAwIDAgIC0+IFNlbmQgTW91c2UgWCAmIFkgb24gYnV0dG9uIHByZXNzIGFuZFxuICAgKiAgICAgcmVsZWFzZS4gIFNlZSB0aGUgc2VjdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgMSAgLT4gVXNlIEhpbGl0ZSBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgMiAgLT4gVXNlIENlbGwgTW90aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCAzICAtPiBVc2UgQWxsIE1vdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgNCAgLT4gU2VuZCBGb2N1c0luL0ZvY3VzT3V0IGV2ZW50cy5cbiAgICogICAgIFBzID0gMSAwIDAgNSAgLT4gRW5hYmxlIEV4dGVuZGVkIE1vdXNlIE1vZGUuXG4gICAqICAgICBQcyA9IDEgMCAxIDAgIC0+IFNjcm9sbCB0byBib3R0b20gb24gdHR5IG91dHB1dCAocnh2dCkuXG4gICAqICAgICBQcyA9IDEgMCAxIDEgIC0+IFNjcm9sbCB0byBib3R0b20gb24ga2V5IHByZXNzIChyeHZ0KS5cbiAgICogICAgIFBzID0gMSAwIDMgNCAgLT4gSW50ZXJwcmV0IFwibWV0YVwiIGtleSwgc2V0cyBlaWdodGggYml0LlxuICAgKiAgICAgKGVuYWJsZXMgdGhlIGVpZ2h0Qml0SW5wdXQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA1ICAtPiBFbmFibGUgc3BlY2lhbCBtb2RpZmllcnMgZm9yIEFsdCBhbmQgTnVtLVxuICAgKiAgICAgTG9jayBrZXlzLiAgKFRoaXMgZW5hYmxlcyB0aGUgbnVtTG9jayByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDYgIC0+IFNlbmQgRVNDICAgd2hlbiBNZXRhIG1vZGlmaWVzIGEga2V5LiAgKFRoaXNcbiAgICogICAgIGVuYWJsZXMgdGhlIG1ldGFTZW5kc0VzY2FwZSByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDcgIC0+IFNlbmQgREVMIGZyb20gdGhlIGVkaXRpbmcta2V5cGFkIERlbGV0ZVxuICAgKiAgICAga2V5LlxuICAgKiAgICAgUHMgPSAxIDAgMyA5ICAtPiBTZW5kIEVTQyAgd2hlbiBBbHQgbW9kaWZpZXMgYSBrZXkuICAoVGhpc1xuICAgKiAgICAgZW5hYmxlcyB0aGUgYWx0U2VuZHNFc2NhcGUgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAwICAtPiBLZWVwIHNlbGVjdGlvbiBldmVuIGlmIG5vdCBoaWdobGlnaHRlZC5cbiAgICogICAgIChUaGlzIGVuYWJsZXMgdGhlIGtlZXBTZWxlY3Rpb24gcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAxICAtPiBVc2UgdGhlIENMSVBCT0FSRCBzZWxlY3Rpb24uICAoVGhpcyBlbmFibGVzXG4gICAqICAgICB0aGUgc2VsZWN0VG9DbGlwYm9hcmQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAyICAtPiBFbmFibGUgVXJnZW5jeSB3aW5kb3cgbWFuYWdlciBoaW50IHdoZW5cbiAgICogICAgIENvbnRyb2wtRyBpcyByZWNlaXZlZC4gIChUaGlzIGVuYWJsZXMgdGhlIGJlbGxJc1VyZ2VudFxuICAgKiAgICAgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAzICAtPiBFbmFibGUgcmFpc2luZyBvZiB0aGUgd2luZG93IHdoZW4gQ29udHJvbC1HXG4gICAqICAgICBpcyByZWNlaXZlZC4gIChlbmFibGVzIHRoZSBwb3BPbkJlbGwgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCA3ICAtPiBVc2UgQWx0ZXJuYXRlIFNjcmVlbiBCdWZmZXIuICAoVGhpcyBtYXkgYmVcbiAgICogICAgIGRpc2FibGVkIGJ5IHRoZSB0aXRlSW5oaWJpdCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDggIC0+IFNhdmUgY3Vyc29yIGFzIGluIERFQ1NDLiAgKFRoaXMgbWF5IGJlIGRpcy1cbiAgICogICAgIGFibGVkIGJ5IHRoZSB0aXRlSW5oaWJpdCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDkgIC0+IFNhdmUgY3Vyc29yIGFzIGluIERFQ1NDIGFuZCB1c2UgQWx0ZXJuYXRlXG4gICAqICAgICBTY3JlZW4gQnVmZmVyLCBjbGVhcmluZyBpdCBmaXJzdC4gIChUaGlzIG1heSBiZSBkaXNhYmxlZCBieVxuICAgKiAgICAgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS4gIFRoaXMgY29tYmluZXMgdGhlIGVmZmVjdHMgb2YgdGhlIDFcbiAgICogICAgIDAgNCA3ICBhbmQgMSAwIDQgOCAgbW9kZXMuICBVc2UgdGhpcyB3aXRoIHRlcm1pbmZvLWJhc2VkXG4gICAqICAgICBhcHBsaWNhdGlvbnMgcmF0aGVyIHRoYW4gdGhlIDQgNyAgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMCAgLT4gU2V0IHRlcm1pbmZvL3Rlcm1jYXAgZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDEgIC0+IFNldCBTdW4gZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDIgIC0+IFNldCBIUCBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMyAgLT4gU2V0IFNDTyBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDYgMCAgLT4gU2V0IGxlZ2FjeSBrZXlib2FyZCBlbXVsYXRpb24gKFgxMVI2KS5cbiAgICogICAgIFBzID0gMSAwIDYgMSAgLT4gU2V0IFZUMjIwIGtleWJvYXJkIGVtdWxhdGlvbi5cbiAgICogICAgIFBzID0gMiAwIDAgNCAgLT4gU2V0IGJyYWNrZXRlZCBwYXN0ZSBtb2RlLlxuICAgKiBNb2RlczpcbiAgICogICBodHRwOiAqdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vY2hhcHRlcjQuaHRtbFxuICAgKi9cbiAgcHVibGljIHNldE1vZGUocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1tpXSkge1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuaW5zZXJ0TW9kZSA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjA6XG4gICAgICAgICAgLy8gdGhpcy5fdC5jb252ZXJ0RW9sID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcHVibGljIHNldE1vZGVQcml2YXRlKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbaV0pIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXMgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoMCwgREVGQVVMVF9DSEFSU0VUKTtcbiAgICAgICAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgxLCBERUZBVUxUX0NIQVJTRVQpO1xuICAgICAgICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdDaGFyc2V0KDIsIERFRkFVTFRfQ0hBUlNFVCk7XG4gICAgICAgICAgdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoMywgREVGQVVMVF9DSEFSU0VUKTtcbiAgICAgICAgICAvLyBzZXQgVlQxMDAgbW9kZSBoZXJlXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzogLy8gMTMyIGNvbCBtb2RlXG4gICAgICAgICAgLy8gVE9ETzogbW92ZSBERUNDT0xNIGludG8gY29tcGF0IGFkZG9uXG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuc2F2ZWRDb2xzID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnJlc2l6ZSgxMzIsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyk7XG4gICAgICAgICAgdGhpcy5fb25SZXF1ZXN0UmVzZXQuZmlyZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbiA9IHRydWU7XG4gICAgICAgICAgdGhpcy5fc2V0Q3Vyc29yKDAsIDApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLndyYXBhcm91bmQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgIC8vIHRoaXMuY3Vyc29yQmxpbmsgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDY2OlxuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1NlcmlhbCBwb3J0IHJlcXVlc3RlZCBhcHBsaWNhdGlvbiBrZXlwYWQuJyk7XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uS2V5cGFkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC52aWV3cG9ydD8uc3luY1Njcm9sbEFyZWEoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA5OiAvLyBYMTAgTW91c2VcbiAgICAgICAgICAvLyBubyByZWxlYXNlLCBubyBtb3Rpb24sIG5vIHdoZWVsLCBubyBtb2RpZmllcnMuXG4gICAgICAgICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbCA9ICdYMTAnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDA6IC8vIHZ0MjAwIG1vdXNlXG4gICAgICAgICAgLy8gbm8gbW90aW9uLlxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wgPSAnVlQyMDAnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDI6IC8vIGJ1dHRvbiBldmVudCBtb3VzZVxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wgPSAnRFJBRyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAwMzogLy8gYW55IGV2ZW50IG1vdXNlXG4gICAgICAgICAgLy8gYW55IGV2ZW50IC0gc2VuZHMgbW90aW9uIGV2ZW50cyxcbiAgICAgICAgICAvLyBldmVuIGlmIHRoZXJlIGlzIG5vIGJ1dHRvbiBoZWxkIGRvd24uXG4gICAgICAgICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbCA9ICdBTlknO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDQ6IC8vIHNlbmQgZm9jdXNpbi9mb2N1c291dCBldmVudHNcbiAgICAgICAgICAvLyBmb2N1c2luOiBeW1tJXG4gICAgICAgICAgLy8gZm9jdXNvdXQ6IF5bW09cbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zZW5kRm9jdXMgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDU6IC8vIHV0ZjggZXh0IG1vZGUgbW91c2UgLSByZW1vdmVkIGluICMyNTA3XG4gICAgICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnREVDU0VUIDEwMDUgbm90IHN1cHBvcnRlZCAoc2VlICMyNTA3KScpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDY6IC8vIHNnciBleHQgbW9kZSBtb3VzZVxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlRW5jb2RpbmcgPSAnU0dSJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDE1OiAvLyB1cnh2dCBleHQgbW9kZSBtb3VzZSAtIHJlbW92ZWQgaW4gIzI1MDdcbiAgICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdERUNTRVQgMTAxNSBub3Qgc3VwcG9ydGVkIChzZWUgIzI1MDcpJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjU6IC8vIHNob3cgY3Vyc29yXG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDQ4OiAvLyBhbHQgc2NyZWVuIGN1cnNvclxuICAgICAgICAgIHRoaXMuc2F2ZUN1cnNvcigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwNDk6IC8vIGFsdCBzY3JlZW4gYnVmZmVyIGN1cnNvclxuICAgICAgICAgIHRoaXMuc2F2ZUN1cnNvcigpO1xuICAgICAgICAgIC8vIEZBTEwtVEhST1VHSFxuICAgICAgICBjYXNlIDQ3OiAvLyBhbHQgc2NyZWVuIGJ1ZmZlclxuICAgICAgICBjYXNlIDEwNDc6IC8vIGFsdCBzY3JlZW4gYnVmZmVyXG4gICAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2YXRlQWx0QnVmZmVyKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSk7XG4gICAgICAgICAgdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MuZmlyZSgwLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxKTtcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC52aWV3cG9ydD8uc3luY1Njcm9sbEFyZWEoKTtcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zaG93Q3Vyc29yKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjAwNDogLy8gYnJhY2tldGVkIHBhc3RlIG1vZGUgKGh0dHBzOi8vY2lydy5pbi9ibG9nL2JyYWNrZXRlZC1wYXN0ZSlcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5icmFja2V0ZWRQYXN0ZU1vZGUgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIENTSSBQbSBsICBSZXNldCBNb2RlIChSTSkuXG4gICAqICAgICBQcyA9IDIgIC0+IEtleWJvYXJkIEFjdGlvbiBNb2RlIChBTSkuXG4gICAqICAgICBQcyA9IDQgIC0+IFJlcGxhY2UgTW9kZSAoSVJNKS5cbiAgICogICAgIFBzID0gMSAyICAtPiBTZW5kL3JlY2VpdmUgKFNSTSkuXG4gICAqICAgICBQcyA9IDIgMCAgLT4gTm9ybWFsIExpbmVmZWVkIChMTk0pLlxuICAgKiBDU0kgPyBQbSBsXG4gICAqICAgREVDIFByaXZhdGUgTW9kZSBSZXNldCAoREVDUlNUKS5cbiAgICogICAgIFBzID0gMSAgLT4gTm9ybWFsIEN1cnNvciBLZXlzIChERUNDS00pLlxuICAgKiAgICAgUHMgPSAyICAtPiBEZXNpZ25hdGUgVlQ1MiBtb2RlIChERUNBTk0pLlxuICAgKiAgICAgUHMgPSAzICAtPiA4MCBDb2x1bW4gTW9kZSAoREVDQ09MTSkuXG4gICAqICAgICBQcyA9IDQgIC0+IEp1bXAgKEZhc3QpIFNjcm9sbCAoREVDU0NMTSkuXG4gICAqICAgICBQcyA9IDUgIC0+IE5vcm1hbCBWaWRlbyAoREVDU0NOTSkuXG4gICAqICAgICBQcyA9IDYgIC0+IE5vcm1hbCBDdXJzb3IgTW9kZSAoREVDT00pLlxuICAgKiAgICAgUHMgPSA3ICAtPiBObyBXcmFwYXJvdW5kIE1vZGUgKERFQ0FXTSkuXG4gICAqICAgICBQcyA9IDggIC0+IE5vIEF1dG8tcmVwZWF0IEtleXMgKERFQ0FSTSkuXG4gICAqICAgICBQcyA9IDkgIC0+IERvbid0IHNlbmQgTW91c2UgWCAmIFkgb24gYnV0dG9uIHByZXNzLlxuICAgKiAgICAgUHMgPSAxIDAgIC0+IEhpZGUgdG9vbGJhciAocnh2dCkuXG4gICAqICAgICBQcyA9IDEgMiAgLT4gU3RvcCBCbGlua2luZyBDdXJzb3IgKGF0dDYxMCkuXG4gICAqICAgICBQcyA9IDEgOCAgLT4gRG9uJ3QgcHJpbnQgZm9ybSBmZWVkIChERUNQRkYpLlxuICAgKiAgICAgUHMgPSAxIDkgIC0+IExpbWl0IHByaW50IHRvIHNjcm9sbGluZyByZWdpb24gKERFQ1BFWCkuXG4gICAqICAgICBQcyA9IDIgNSAgLT4gSGlkZSBDdXJzb3IgKERFQ1RDRU0pLlxuICAgKiAgICAgUHMgPSAzIDAgIC0+IERvbid0IHNob3cgc2Nyb2xsYmFyIChyeHZ0KS5cbiAgICogICAgIFBzID0gMyA1ICAtPiBEaXNhYmxlIGZvbnQtc2hpZnRpbmcgZnVuY3Rpb25zIChyeHZ0KS5cbiAgICogICAgIFBzID0gNCAwICAtPiBEaXNhbGxvdyA4MCAtPiAxMzIgTW9kZS5cbiAgICogICAgIFBzID0gNCAxICAtPiBObyBtb3JlKDEpIGZpeCAoc2VlIGN1cnNlcyByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDQgMiAgLT4gRGlzYWJsZSBOYXRpb24gUmVwbGFjZW1lbnQgQ2hhcmFjdGVyIHNldHMgKERFQy1cbiAgICogICAgIE5SQ00pLlxuICAgKiAgICAgUHMgPSA0IDQgIC0+IFR1cm4gT2ZmIE1hcmdpbiBCZWxsLlxuICAgKiAgICAgUHMgPSA0IDUgIC0+IE5vIFJldmVyc2Utd3JhcGFyb3VuZCBNb2RlLlxuICAgKiAgICAgUHMgPSA0IDYgIC0+IFN0b3AgTG9nZ2luZy4gIChUaGlzIGlzIG5vcm1hbGx5IGRpc2FibGVkIGJ5IGFcbiAgICogICAgIGNvbXBpbGUtdGltZSBvcHRpb24pLlxuICAgKiAgICAgUHMgPSA0IDcgIC0+IFVzZSBOb3JtYWwgU2NyZWVuIEJ1ZmZlci5cbiAgICogICAgIFBzID0gNiA2ICAtPiBOdW1lcmljIGtleXBhZCAoREVDTktNKS5cbiAgICogICAgIFBzID0gNiA3ICAtPiBCYWNrYXJyb3cga2V5IHNlbmRzIGRlbGV0ZSAoREVDQktNKS5cbiAgICogICAgIFBzID0gMSAwIDAgMCAgLT4gRG9uJ3Qgc2VuZCBNb3VzZSBYICYgWSBvbiBidXR0b24gcHJlc3MgYW5kXG4gICAqICAgICByZWxlYXNlLiAgU2VlIHRoZSBzZWN0aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCAxICAtPiBEb24ndCB1c2UgSGlsaXRlIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCAyICAtPiBEb24ndCB1c2UgQ2VsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDMgIC0+IERvbid0IHVzZSBBbGwgTW90aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCA0ICAtPiBEb24ndCBzZW5kIEZvY3VzSW4vRm9jdXNPdXQgZXZlbnRzLlxuICAgKiAgICAgUHMgPSAxIDAgMCA1ICAtPiBEaXNhYmxlIEV4dGVuZGVkIE1vdXNlIE1vZGUuXG4gICAqICAgICBQcyA9IDEgMCAxIDAgIC0+IERvbid0IHNjcm9sbCB0byBib3R0b20gb24gdHR5IG91dHB1dFxuICAgKiAgICAgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAxIDAgMSAxICAtPiBEb24ndCBzY3JvbGwgdG8gYm90dG9tIG9uIGtleSBwcmVzcyAocnh2dCkuXG4gICAqICAgICBQcyA9IDEgMCAzIDQgIC0+IERvbid0IGludGVycHJldCBcIm1ldGFcIiBrZXkuICAoVGhpcyBkaXNhYmxlc1xuICAgKiAgICAgdGhlIGVpZ2h0Qml0SW5wdXQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA1ICAtPiBEaXNhYmxlIHNwZWNpYWwgbW9kaWZpZXJzIGZvciBBbHQgYW5kIE51bS1cbiAgICogICAgIExvY2sga2V5cy4gIChUaGlzIGRpc2FibGVzIHRoZSBudW1Mb2NrIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDMgNiAgLT4gRG9uJ3Qgc2VuZCBFU0MgIHdoZW4gTWV0YSBtb2RpZmllcyBhIGtleS5cbiAgICogICAgIChUaGlzIGRpc2FibGVzIHRoZSBtZXRhU2VuZHNFc2NhcGUgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA3ICAtPiBTZW5kIFZUMjIwIFJlbW92ZSBmcm9tIHRoZSBlZGl0aW5nLWtleXBhZFxuICAgKiAgICAgRGVsZXRlIGtleS5cbiAgICogICAgIFBzID0gMSAwIDMgOSAgLT4gRG9uJ3Qgc2VuZCBFU0MgIHdoZW4gQWx0IG1vZGlmaWVzIGEga2V5LlxuICAgKiAgICAgKFRoaXMgZGlzYWJsZXMgdGhlIGFsdFNlbmRzRXNjYXBlIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgMCAgLT4gRG8gbm90IGtlZXAgc2VsZWN0aW9uIHdoZW4gbm90IGhpZ2hsaWdodGVkLlxuICAgKiAgICAgKFRoaXMgZGlzYWJsZXMgdGhlIGtlZXBTZWxlY3Rpb24gcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAxICAtPiBVc2UgdGhlIFBSSU1BUlkgc2VsZWN0aW9uLiAgKFRoaXMgZGlzYWJsZXNcbiAgICogICAgIHRoZSBzZWxlY3RUb0NsaXBib2FyZCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDIgIC0+IERpc2FibGUgVXJnZW5jeSB3aW5kb3cgbWFuYWdlciBoaW50IHdoZW5cbiAgICogICAgIENvbnRyb2wtRyBpcyByZWNlaXZlZC4gIChUaGlzIGRpc2FibGVzIHRoZSBiZWxsSXNVcmdlbnRcbiAgICogICAgIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgMyAgLT4gRGlzYWJsZSByYWlzaW5nIG9mIHRoZSB3aW5kb3cgd2hlbiBDb250cm9sLVxuICAgKiAgICAgRyBpcyByZWNlaXZlZC4gIChUaGlzIGRpc2FibGVzIHRoZSBwb3BPbkJlbGwgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCA3ICAtPiBVc2UgTm9ybWFsIFNjcmVlbiBCdWZmZXIsIGNsZWFyaW5nIHNjcmVlblxuICAgKiAgICAgZmlyc3QgaWYgaW4gdGhlIEFsdGVybmF0ZSBTY3JlZW4uICAoVGhpcyBtYXkgYmUgZGlzYWJsZWQgYnlcbiAgICogICAgIHRoZSB0aXRlSW5oaWJpdCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDggIC0+IFJlc3RvcmUgY3Vyc29yIGFzIGluIERFQ1JDLiAgKFRoaXMgbWF5IGJlXG4gICAqICAgICBkaXNhYmxlZCBieSB0aGUgdGl0ZUluaGliaXQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCA5ICAtPiBVc2UgTm9ybWFsIFNjcmVlbiBCdWZmZXIgYW5kIHJlc3RvcmUgY3Vyc29yXG4gICAqICAgICBhcyBpbiBERUNSQy4gIChUaGlzIG1heSBiZSBkaXNhYmxlZCBieSB0aGUgdGl0ZUluaGliaXRcbiAgICogICAgIHJlc291cmNlKS4gIFRoaXMgY29tYmluZXMgdGhlIGVmZmVjdHMgb2YgdGhlIDEgMCA0IDcgIGFuZCAxIDBcbiAgICogICAgIDQgOCAgbW9kZXMuICBVc2UgdGhpcyB3aXRoIHRlcm1pbmZvLWJhc2VkIGFwcGxpY2F0aW9ucyByYXRoZXJcbiAgICogICAgIHRoYW4gdGhlIDQgNyAgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMCAgLT4gUmVzZXQgdGVybWluZm8vdGVybWNhcCBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMSAgLT4gUmVzZXQgU3VuIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAyICAtPiBSZXNldCBIUCBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMyAgLT4gUmVzZXQgU0NPIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNiAwICAtPiBSZXNldCBsZWdhY3kga2V5Ym9hcmQgZW11bGF0aW9uIChYMTFSNikuXG4gICAqICAgICBQcyA9IDEgMCA2IDEgIC0+IFJlc2V0IGtleWJvYXJkIGVtdWxhdGlvbiB0byBTdW4vUEMgc3R5bGUuXG4gICAqICAgICBQcyA9IDIgMCAwIDQgIC0+IFJlc2V0IGJyYWNrZXRlZCBwYXN0ZSBtb2RlLlxuICAgKi9cbiAgcHVibGljIHJlc2V0TW9kZShwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgc3dpdGNoIChwYXJhbXMucGFyYW1zW2ldKSB7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5pbnNlcnRNb2RlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjA6XG4gICAgICAgICAgLy8gdGhpcy5fdC5jb252ZXJ0RW9sID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHB1YmxpYyByZXNldE1vZGVQcml2YXRlKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbaV0pIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXMgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIC8vIFRPRE86IG1vdmUgREVDQ09MTSBpbnRvIGNvbXBhdCBhZGRvblxuICAgICAgICAgIC8vIE5vdGU6IFRoaXMgaW1wbCBjdXJyZW50bHkgZG9lcyBub3QgZW5mb3JjZSBjb2wgODAsIGluc3RlYWQgcmV2ZXJ0c1xuICAgICAgICAgIC8vIHRvIHByZXZpb3VzIHRlcm1pbmFsIHdpZHRoIGJlZm9yZSBlbnRlcmluZyBERUNDT0xNIDEzMlxuICAgICAgICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgPT09IDEzMiAmJiB0aGlzLl90ZXJtaW5hbC5zYXZlZENvbHMpIHtcbiAgICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnJlc2l6ZSh0aGlzLl90ZXJtaW5hbC5zYXZlZENvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl90ZXJtaW5hbC5zYXZlZENvbHM7XG4gICAgICAgICAgdGhpcy5fb25SZXF1ZXN0UmVzZXQuZmlyZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbiA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuX3NldEN1cnNvcigwLCAwKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy53cmFwYXJvdW5kID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgLy8gdGhpcy5jdXJzb3JCbGluayA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDY2OlxuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1N3aXRjaGluZyBiYWNrIHRvIG5vcm1hbCBrZXlwYWQuJyk7XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uS2V5cGFkID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwudmlld3BvcnQ/LnN5bmNTY3JvbGxBcmVhKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgOTogLy8gWDEwIE1vdXNlXG4gICAgICAgIGNhc2UgMTAwMDogLy8gdnQyMDAgbW91c2VcbiAgICAgICAgY2FzZSAxMDAyOiAvLyBidXR0b24gZXZlbnQgbW91c2VcbiAgICAgICAgY2FzZSAxMDAzOiAvLyBhbnkgZXZlbnQgbW91c2VcbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sID0gJ05PTkUnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDQ6IC8vIHNlbmQgZm9jdXNpbi9mb2N1c291dCBldmVudHNcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zZW5kRm9jdXMgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA1OiAvLyB1dGY4IGV4dCBtb2RlIG1vdXNlIC0gcmVtb3ZlZCBpbiAjMjUwN1xuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ0RFQ1JTVCAxMDA1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNyknKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA2OiAvLyBzZ3IgZXh0IG1vZGUgbW91c2VcbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZUVuY29kaW5nID0gJ0RFRkFVTFQnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMTU6IC8vIHVyeHZ0IGV4dCBtb2RlIG1vdXNlIC0gcmVtb3ZlZCBpbiAjMjUwN1xuICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdERUNSU1QgMTAxNSBub3Qgc3VwcG9ydGVkIChzZWUgIzI1MDcpJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjU6IC8vIGhpZGUgY3Vyc29yXG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW4gPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwNDg6IC8vIGFsdCBzY3JlZW4gY3Vyc29yXG4gICAgICAgICAgdGhpcy5yZXN0b3JlQ3Vyc29yKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTA0OTogLy8gYWx0IHNjcmVlbiBidWZmZXIgY3Vyc29yXG4gICAgICAgICAgIC8vIEZBTEwtVEhST1VHSFxuICAgICAgICBjYXNlIDQ3OiAvLyBub3JtYWwgc2NyZWVuIGJ1ZmZlclxuICAgICAgICBjYXNlIDEwNDc6IC8vIG5vcm1hbCBzY3JlZW4gYnVmZmVyIC0gY2xlYXJpbmcgaXQgZmlyc3RcbiAgICAgICAgICAvLyBFbnN1cmUgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyIGhhcyB0aGUgY29ycmVjdCBidWZmZXJcbiAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZhdGVOb3JtYWxCdWZmZXIoKTtcbiAgICAgICAgICBpZiAocGFyYW1zLnBhcmFtc1tpXSA9PT0gMTA0OSkge1xuICAgICAgICAgICAgdGhpcy5yZXN0b3JlQ3Vyc29yKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzLmZpcmUoMCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSk7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwudmlld3BvcnQ/LnN5bmNTY3JvbGxBcmVhKCk7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuc2hvd0N1cnNvcigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDIwMDQ6IC8vIGJyYWNrZXRlZCBwYXN0ZSBtb2RlIChodHRwczovL2NpcncuaW4vYmxvZy9icmFja2V0ZWQtcGFzdGUpXG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuYnJhY2tldGVkUGFzdGVNb2RlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byBleHRyYWN0IGFuZCBhcHBseSBjb2xvciBwYXJhbXMvc3VicGFyYW1zLlxuICAgKiBSZXR1cm5zIGFkdmFuY2UgZm9yIHBhcmFtcyBpbmRleC5cbiAgICovXG4gIHByaXZhdGUgX2V4dHJhY3RDb2xvcihwYXJhbXM6IElQYXJhbXMsIHBvczogbnVtYmVyLCBhdHRyOiBJQXR0cmlidXRlRGF0YSk6IG51bWJlciB7XG4gICAgLy8gbm9ybWFsaXplIHBhcmFtc1xuICAgIC8vIG1lYW5pbmc6IFt0YXJnZXQsIENNLCBpZ24sIHZhbCwgdmFsLCB2YWxdXG4gICAgLy8gUkdCICAgIDogWyAzOC80OCwgIDIsIGlnbiwgICByLCAgIGcsICAgYl1cbiAgICAvLyBQMjU2ICAgOiBbIDM4LzQ4LCAgNSwgaWduLCAgIHYsIGlnbiwgaWduXVxuICAgIGNvbnN0IGFjY3UgPSBbMCwgMCwgLTEsIDAsIDAsIDBdO1xuXG4gICAgLy8gYWxpZ25tZW50IHBsYWNlaG9sZGVyIGZvciBub24gY29sb3Igc3BhY2Ugc2VxdWVuY2VzXG4gICAgbGV0IGNTcGFjZSA9IDA7XG5cbiAgICAvLyByZXR1cm4gYWR2YW5jZSB3ZSB0b29rIGluIHBhcmFtc1xuICAgIGxldCBhZHZhbmNlID0gMDtcblxuICAgIGRvIHtcbiAgICAgIGFjY3VbYWR2YW5jZSArIGNTcGFjZV0gPSBwYXJhbXMucGFyYW1zW3BvcyArIGFkdmFuY2VdO1xuICAgICAgaWYgKHBhcmFtcy5oYXNTdWJQYXJhbXMocG9zICsgYWR2YW5jZSkpIHtcbiAgICAgICAgY29uc3Qgc3VicGFyYW1zID0gcGFyYW1zLmdldFN1YlBhcmFtcyhwb3MgKyBhZHZhbmNlKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgaWYgKGFjY3VbMV0gPT09IDUpIHtcbiAgICAgICAgICAgIGNTcGFjZSA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFjY3VbYWR2YW5jZSArIGkgKyAxICsgY1NwYWNlXSA9IHN1YnBhcmFtc1tpXTtcbiAgICAgICAgfSB3aGlsZSAoKytpIDwgc3VicGFyYW1zLmxlbmd0aCAmJiBpICsgYWR2YW5jZSArIDEgKyBjU3BhY2UgPCBhY2N1Lmxlbmd0aCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy8gZXhpdCBlYXJseSBpZiBjYW4gZGVjaWRlIGNvbG9yIG1vZGUgd2l0aCBzZW1pY29sb25zXG4gICAgICBpZiAoKGFjY3VbMV0gPT09IDUgJiYgYWR2YW5jZSArIGNTcGFjZSA+PSAyKVxuICAgICAgICAgIHx8IChhY2N1WzFdID09PSAyICYmIGFkdmFuY2UgKyBjU3BhY2UgPj0gNSkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLyBvZmZzZXQgY29sb3JTcGFjZSBzbG90IGZvciBzZW1pY29sb24gbW9kZVxuICAgICAgaWYgKGFjY3VbMV0pIHtcbiAgICAgICAgY1NwYWNlID0gMTtcbiAgICAgIH1cbiAgICB9IHdoaWxlICgrK2FkdmFuY2UgKyBwb3MgPCBwYXJhbXMubGVuZ3RoICYmIGFkdmFuY2UgKyBjU3BhY2UgPCBhY2N1Lmxlbmd0aCk7XG5cbiAgICAvLyBzZXQgZGVmYXVsdCB2YWx1ZXMgdG8gMFxuICAgIGZvciAobGV0IGkgPSAyOyBpIDwgYWNjdS5sZW5ndGg7ICsraSkge1xuICAgICAgaWYgKGFjY3VbaV0gPT09IC0xKSB7XG4gICAgICAgIGFjY3VbaV0gPSAwO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGFwcGx5IGNvbG9yc1xuICAgIGlmIChhY2N1WzBdID09PSAzOCkge1xuICAgICAgaWYgKGFjY3VbMV0gPT09IDIpIHtcbiAgICAgICAgYXR0ci5mZyB8PSBBdHRyaWJ1dGVzLkNNX1JHQjtcbiAgICAgICAgYXR0ci5mZyAmPSB+QXR0cmlidXRlcy5SR0JfTUFTSztcbiAgICAgICAgYXR0ci5mZyB8PSBBdHRyaWJ1dGVEYXRhLmZyb21Db2xvclJHQihbYWNjdVszXSwgYWNjdVs0XSwgYWNjdVs1XV0pO1xuICAgICAgfSBlbHNlIGlmIChhY2N1WzFdID09PSA1KSB7XG4gICAgICAgIGF0dHIuZmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLKTtcbiAgICAgICAgYXR0ci5mZyB8PSBBdHRyaWJ1dGVzLkNNX1AyNTYgfCAoYWNjdVszXSAmIDB4ZmYpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYWNjdVswXSA9PT0gNDgpIHtcbiAgICAgIGlmIChhY2N1WzFdID09PSAyKSB7XG4gICAgICAgIGF0dHIuYmcgfD0gQXR0cmlidXRlcy5DTV9SR0I7XG4gICAgICAgIGF0dHIuYmcgJj0gfkF0dHJpYnV0ZXMuUkdCX01BU0s7XG4gICAgICAgIGF0dHIuYmcgfD0gQXR0cmlidXRlRGF0YS5mcm9tQ29sb3JSR0IoW2FjY3VbM10sIGFjY3VbNF0sIGFjY3VbNV1dKTtcbiAgICAgIH0gZWxzZSBpZiAoYWNjdVsxXSA9PT0gNSkge1xuICAgICAgICBhdHRyLmJnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5QQ09MT1JfTUFTSyk7XG4gICAgICAgIGF0dHIuYmcgfD0gQXR0cmlidXRlcy5DTV9QMjU2IHwgKGFjY3VbM10gJiAweGZmKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYWR2YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gbSAgQ2hhcmFjdGVyIEF0dHJpYnV0ZXMgKFNHUikuXG4gICAqICAgICBQcyA9IDAgIC0+IE5vcm1hbCAoZGVmYXVsdCkuXG4gICAqICAgICBQcyA9IDEgIC0+IEJvbGQuXG4gICAqICAgICBQcyA9IDIgIC0+IEZhaW50LCBkZWNyZWFzZWQgaW50ZW5zaXR5IChJU08gNjQyOSkuXG4gICAqICAgICBQcyA9IDQgIC0+IFVuZGVybGluZWQuXG4gICAqICAgICBQcyA9IDUgIC0+IEJsaW5rIChhcHBlYXJzIGFzIEJvbGQpLlxuICAgKiAgICAgUHMgPSA3ICAtPiBJbnZlcnNlLlxuICAgKiAgICAgUHMgPSA4ICAtPiBJbnZpc2libGUsIGkuZS4sIGhpZGRlbiAoVlQzMDApLlxuICAgKiAgICAgUHMgPSAyIDIgIC0+IE5vcm1hbCAobmVpdGhlciBib2xkIG5vciBmYWludCkuXG4gICAqICAgICBQcyA9IDIgNCAgLT4gTm90IHVuZGVybGluZWQuXG4gICAqICAgICBQcyA9IDIgNSAgLT4gU3RlYWR5IChub3QgYmxpbmtpbmcpLlxuICAgKiAgICAgUHMgPSAyIDcgIC0+IFBvc2l0aXZlIChub3QgaW52ZXJzZSkuXG4gICAqICAgICBQcyA9IDIgOCAgLT4gVmlzaWJsZSwgaS5lLiwgbm90IGhpZGRlbiAoVlQzMDApLlxuICAgKiAgICAgUHMgPSAzIDAgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIEJsYWNrLlxuICAgKiAgICAgUHMgPSAzIDEgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIFJlZC5cbiAgICogICAgIFBzID0gMyAyICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBHcmVlbi5cbiAgICogICAgIFBzID0gMyAzICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBZZWxsb3cuXG4gICAqICAgICBQcyA9IDMgNCAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gQmx1ZS5cbiAgICogICAgIFBzID0gMyA1ICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBNYWdlbnRhLlxuICAgKiAgICAgUHMgPSAzIDYgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIEN5YW4uXG4gICAqICAgICBQcyA9IDMgNyAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gV2hpdGUuXG4gICAqICAgICBQcyA9IDMgOSAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gZGVmYXVsdCAob3JpZ2luYWwpLlxuICAgKiAgICAgUHMgPSA0IDAgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIEJsYWNrLlxuICAgKiAgICAgUHMgPSA0IDEgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFJlZC5cbiAgICogICAgIFBzID0gNCAyICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBHcmVlbi5cbiAgICogICAgIFBzID0gNCAzICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBZZWxsb3cuXG4gICAqICAgICBQcyA9IDQgNCAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gQmx1ZS5cbiAgICogICAgIFBzID0gNCA1ICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBNYWdlbnRhLlxuICAgKiAgICAgUHMgPSA0IDYgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIEN5YW4uXG4gICAqICAgICBQcyA9IDQgNyAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gV2hpdGUuXG4gICAqICAgICBQcyA9IDQgOSAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gZGVmYXVsdCAob3JpZ2luYWwpLlxuICAgKlxuICAgKiAgIElmIDE2LWNvbG9yIHN1cHBvcnQgaXMgY29tcGlsZWQsIHRoZSBmb2xsb3dpbmcgYXBwbHkuICBBc3N1bWVcbiAgICogICB0aGF0IHh0ZXJtJ3MgcmVzb3VyY2VzIGFyZSBzZXQgc28gdGhhdCB0aGUgSVNPIGNvbG9yIGNvZGVzIGFyZVxuICAgKiAgIHRoZSBmaXJzdCA4IG9mIGEgc2V0IG9mIDE2LiAgVGhlbiB0aGUgYWl4dGVybSBjb2xvcnMgYXJlIHRoZVxuICAgKiAgIGJyaWdodCB2ZXJzaW9ucyBvZiB0aGUgSVNPIGNvbG9yczpcbiAgICogICAgIFBzID0gOSAwICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBCbGFjay5cbiAgICogICAgIFBzID0gOSAxICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBSZWQuXG4gICAqICAgICBQcyA9IDkgMiAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gR3JlZW4uXG4gICAqICAgICBQcyA9IDkgMyAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gWWVsbG93LlxuICAgKiAgICAgUHMgPSA5IDQgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIEJsdWUuXG4gICAqICAgICBQcyA9IDkgNSAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gTWFnZW50YS5cbiAgICogICAgIFBzID0gOSA2ICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBDeWFuLlxuICAgKiAgICAgUHMgPSA5IDcgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIFdoaXRlLlxuICAgKiAgICAgUHMgPSAxIDAgMCAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gQmxhY2suXG4gICAqICAgICBQcyA9IDEgMCAxICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBSZWQuXG4gICAqICAgICBQcyA9IDEgMCAyICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBHcmVlbi5cbiAgICogICAgIFBzID0gMSAwIDMgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFllbGxvdy5cbiAgICogICAgIFBzID0gMSAwIDQgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIEJsdWUuXG4gICAqICAgICBQcyA9IDEgMCA1ICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBNYWdlbnRhLlxuICAgKiAgICAgUHMgPSAxIDAgNiAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gQ3lhbi5cbiAgICogICAgIFBzID0gMSAwIDcgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFdoaXRlLlxuICAgKlxuICAgKiAgIElmIHh0ZXJtIGlzIGNvbXBpbGVkIHdpdGggdGhlIDE2LWNvbG9yIHN1cHBvcnQgZGlzYWJsZWQsIGl0XG4gICAqICAgc3VwcG9ydHMgdGhlIGZvbGxvd2luZywgZnJvbSByeHZ0OlxuICAgKiAgICAgUHMgPSAxIDAgMCAgLT4gU2V0IGZvcmVncm91bmQgYW5kIGJhY2tncm91bmQgY29sb3IgdG9cbiAgICogICAgIGRlZmF1bHQuXG4gICAqXG4gICAqICAgSWYgODgtIG9yIDI1Ni1jb2xvciBzdXBwb3J0IGlzIGNvbXBpbGVkLCB0aGUgZm9sbG93aW5nIGFwcGx5LlxuICAgKiAgICAgUHMgPSAzIDggIDsgNSAgOyBQcyAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byB0aGUgc2Vjb25kXG4gICAqICAgICBQcy5cbiAgICogICAgIFBzID0gNCA4ICA7IDUgIDsgUHMgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gdGhlIHNlY29uZFxuICAgKiAgICAgUHMuXG4gICAqL1xuICBwdWJsaWMgY2hhckF0dHJpYnV0ZXMocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgLy8gT3B0aW1pemUgYSBzaW5nbGUgU0dSMC5cbiAgICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gMSAmJiBwYXJhbXMucGFyYW1zWzBdID09PSAwKSB7XG4gICAgICB0aGlzLl9jdXJBdHRyRGF0YS5mZyA9IERFRkFVTFRfQVRUUl9EQVRBLmZnO1xuICAgICAgdGhpcy5fY3VyQXR0ckRhdGEuYmcgPSBERUZBVUxUX0FUVFJfREFUQS5iZztcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBsID0gcGFyYW1zLmxlbmd0aDtcbiAgICBsZXQgcDtcbiAgICBjb25zdCBhdHRyID0gdGhpcy5fY3VyQXR0ckRhdGE7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgcCA9IHBhcmFtcy5wYXJhbXNbaV07XG4gICAgICBpZiAocCA+PSAzMCAmJiBwIDw9IDM3KSB7XG4gICAgICAgIC8vIGZnIGNvbG9yIDhcbiAgICAgICAgYXR0ci5mZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUENPTE9SX01BU0spO1xuICAgICAgICBhdHRyLmZnIHw9IEF0dHJpYnV0ZXMuQ01fUDE2IHwgKHAgLSAzMCk7XG4gICAgICB9IGVsc2UgaWYgKHAgPj0gNDAgJiYgcCA8PSA0Nykge1xuICAgICAgICAvLyBiZyBjb2xvciA4XG4gICAgICAgIGF0dHIuYmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLKTtcbiAgICAgICAgYXR0ci5iZyB8PSBBdHRyaWJ1dGVzLkNNX1AxNiB8IChwIC0gNDApO1xuICAgICAgfSBlbHNlIGlmIChwID49IDkwICYmIHAgPD0gOTcpIHtcbiAgICAgICAgLy8gZmcgY29sb3IgMTZcbiAgICAgICAgYXR0ci5mZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUENPTE9SX01BU0spO1xuICAgICAgICBhdHRyLmZnIHw9IEF0dHJpYnV0ZXMuQ01fUDE2IHwgKHAgLSA5MCkgfCA4O1xuICAgICAgfSBlbHNlIGlmIChwID49IDEwMCAmJiBwIDw9IDEwNykge1xuICAgICAgICAvLyBiZyBjb2xvciAxNlxuICAgICAgICBhdHRyLmJnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5QQ09MT1JfTUFTSyk7XG4gICAgICAgIGF0dHIuYmcgfD0gQXR0cmlidXRlcy5DTV9QMTYgfCAocCAtIDEwMCkgfCA4O1xuICAgICAgfSBlbHNlIGlmIChwID09PSAwKSB7XG4gICAgICAgIC8vIGRlZmF1bHRcbiAgICAgICAgYXR0ci5mZyA9IERFRkFVTFRfQVRUUl9EQVRBLmZnO1xuICAgICAgICBhdHRyLmJnID0gREVGQVVMVF9BVFRSX0RBVEEuYmc7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDEpIHtcbiAgICAgICAgLy8gYm9sZCB0ZXh0XG4gICAgICAgIGF0dHIuZmcgfD0gRmdGbGFncy5CT0xEO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAzKSB7XG4gICAgICAgIC8vIGl0YWxpYyB0ZXh0XG4gICAgICAgIGF0dHIuYmcgfD0gQmdGbGFncy5JVEFMSUM7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDQpIHtcbiAgICAgICAgLy8gdW5kZXJsaW5lZCB0ZXh0XG4gICAgICAgIGF0dHIuZmcgfD0gRmdGbGFncy5VTkRFUkxJTkU7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDUpIHtcbiAgICAgICAgLy8gYmxpbmtcbiAgICAgICAgYXR0ci5mZyB8PSBGZ0ZsYWdzLkJMSU5LO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA3KSB7XG4gICAgICAgIC8vIGludmVyc2UgYW5kIHBvc2l0aXZlXG4gICAgICAgIC8vIHRlc3Qgd2l0aDogZWNobyAtZSAnXFxlWzMxbVxcZVs0Mm1oZWxsb1xcZVs3bXdvcmxkXFxlWzI3bWhpXFxlW20nXG4gICAgICAgIGF0dHIuZmcgfD0gRmdGbGFncy5JTlZFUlNFO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA4KSB7XG4gICAgICAgIC8vIGludmlzaWJsZVxuICAgICAgICBhdHRyLmZnIHw9IEZnRmxhZ3MuSU5WSVNJQkxFO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyKSB7XG4gICAgICAgIC8vIGRpbW1lZCB0ZXh0XG4gICAgICAgIGF0dHIuYmcgfD0gQmdGbGFncy5ESU07XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDIyKSB7XG4gICAgICAgIC8vIG5vdCBib2xkIG5vciBmYWludFxuICAgICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLkJPTEQ7XG4gICAgICAgIGF0dHIuYmcgJj0gfkJnRmxhZ3MuRElNO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyMykge1xuICAgICAgICAvLyBub3QgaXRhbGljXG4gICAgICAgIGF0dHIuYmcgJj0gfkJnRmxhZ3MuSVRBTElDO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyNCkge1xuICAgICAgICAvLyBub3QgdW5kZXJsaW5lZFxuICAgICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLlVOREVSTElORTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjUpIHtcbiAgICAgICAgLy8gbm90IGJsaW5rXG4gICAgICAgIGF0dHIuZmcgJj0gfkZnRmxhZ3MuQkxJTks7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDI3KSB7XG4gICAgICAgIC8vIG5vdCBpbnZlcnNlXG4gICAgICAgIGF0dHIuZmcgJj0gfkZnRmxhZ3MuSU5WRVJTRTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjgpIHtcbiAgICAgICAgLy8gbm90IGludmlzaWJsZVxuICAgICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLklOVklTSUJMRTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMzkpIHtcbiAgICAgICAgLy8gcmVzZXQgZmdcbiAgICAgICAgYXR0ci5mZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgICBhdHRyLmZnIHw9IERFRkFVTFRfQVRUUl9EQVRBLmZnICYgKEF0dHJpYnV0ZXMuUENPTE9SX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gNDkpIHtcbiAgICAgICAgLy8gcmVzZXQgYmdcbiAgICAgICAgYXR0ci5iZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgICBhdHRyLmJnIHw9IERFRkFVTFRfQVRUUl9EQVRBLmJnICYgKEF0dHJpYnV0ZXMuUENPTE9SX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMzggfHwgcCA9PT0gNDgpIHtcbiAgICAgICAgLy8gZmcgY29sb3IgMjU2IGFuZCBSR0JcbiAgICAgICAgaSArPSB0aGlzLl9leHRyYWN0Q29sb3IocGFyYW1zLCBpLCBhdHRyKTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMTAwKSB7XG4gICAgICAgIC8vIHJlc2V0IGZnL2JnXG4gICAgICAgIGF0dHIuZmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgICAgYXR0ci5mZyB8PSBERUZBVUxUX0FUVFJfREFUQS5mZyAmIChBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICAgIGF0dHIuYmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgICAgYXR0ci5iZyB8PSBERUZBVUxUX0FUVFJfREFUQS5iZyAmIChBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdVbmtub3duIFNHUiBhdHRyaWJ1dGU6ICVkLicsIHApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgbiAgRGV2aWNlIFN0YXR1cyBSZXBvcnQgKERTUikuXG4gICAqICAgICBQcyA9IDUgIC0+IFN0YXR1cyBSZXBvcnQuICBSZXN1bHQgKGBgT0snJykgaXNcbiAgICogICBDU0kgMCBuXG4gICAqICAgICBQcyA9IDYgIC0+IFJlcG9ydCBDdXJzb3IgUG9zaXRpb24gKENQUikgW3Jvdztjb2x1bW5dLlxuICAgKiAgIFJlc3VsdCBpc1xuICAgKiAgIENTSSByIDsgYyBSXG4gICAqIENTSSA/IFBzIG5cbiAgICogICBEZXZpY2UgU3RhdHVzIFJlcG9ydCAoRFNSLCBERUMtc3BlY2lmaWMpLlxuICAgKiAgICAgUHMgPSA2ICAtPiBSZXBvcnQgQ3Vyc29yIFBvc2l0aW9uIChDUFIpIFtyb3c7Y29sdW1uXSBhcyBDU0lcbiAgICogICAgID8gciA7IGMgUiAoYXNzdW1lcyBwYWdlIGlzIHplcm8pLlxuICAgKiAgICAgUHMgPSAxIDUgIC0+IFJlcG9ydCBQcmludGVyIHN0YXR1cyBhcyBDU0kgPyAxIDAgIG4gIChyZWFkeSkuXG4gICAqICAgICBvciBDU0kgPyAxIDEgIG4gIChub3QgcmVhZHkpLlxuICAgKiAgICAgUHMgPSAyIDUgIC0+IFJlcG9ydCBVREsgc3RhdHVzIGFzIENTSSA/IDIgMCAgbiAgKHVubG9ja2VkKVxuICAgKiAgICAgb3IgQ1NJID8gMiAxICBuICAobG9ja2VkKS5cbiAgICogICAgIFBzID0gMiA2ICAtPiBSZXBvcnQgS2V5Ym9hcmQgc3RhdHVzIGFzXG4gICAqICAgQ1NJID8gMiA3ICA7ICAxICA7ICAwICA7ICAwICBuICAoTm9ydGggQW1lcmljYW4pLlxuICAgKiAgIFRoZSBsYXN0IHR3byBwYXJhbWV0ZXJzIGFwcGx5IHRvIFZUNDAwICYgdXAsIGFuZCBkZW5vdGUga2V5LVxuICAgKiAgIGJvYXJkIHJlYWR5IGFuZCBMSzAxIHJlc3BlY3RpdmVseS5cbiAgICogICAgIFBzID0gNSAzICAtPiBSZXBvcnQgTG9jYXRvciBzdGF0dXMgYXNcbiAgICogICBDU0kgPyA1IDMgIG4gIExvY2F0b3IgYXZhaWxhYmxlLCBpZiBjb21waWxlZC1pbiwgb3JcbiAgICogICBDU0kgPyA1IDAgIG4gIE5vIExvY2F0b3IsIGlmIG5vdC5cbiAgICovXG4gIHB1YmxpYyBkZXZpY2VTdGF0dXMocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgc3dpdGNoIChwYXJhbXMucGFyYW1zWzBdKSB7XG4gICAgICBjYXNlIDU6XG4gICAgICAgIC8vIHN0YXR1cyByZXBvcnRcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9WzBuYCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA2OlxuICAgICAgICAvLyBjdXJzb3IgcG9zaXRpb25cbiAgICAgICAgY29uc3QgeSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgKyAxO1xuICAgICAgICBjb25zdCB4ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCArIDE7XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7QzAuRVNDfVske3l9OyR7eH1SYCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZXZpY2VTdGF0dXNQcml2YXRlKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIC8vIG1vZGVybiB4dGVybSBkb2VzbnQgc2VlbSB0b1xuICAgIC8vIHJlc3BvbmQgdG8gYW55IG9mIHRoZXNlIGV4Y2VwdCA/NiwgNiwgYW5kIDVcbiAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbMF0pIHtcbiAgICAgIGNhc2UgNjpcbiAgICAgICAgLy8gY3Vyc29yIHBvc2l0aW9uXG4gICAgICAgIGNvbnN0IHkgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ICsgMTtcbiAgICAgICAgY29uc3QgeCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggKyAxO1xuICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31bPyR7eX07JHt4fVJgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE1OlxuICAgICAgICAvLyBubyBwcmludGVyXG4gICAgICAgIC8vIHRoaXMuaGFuZGxlcihDMC5FU0MgKyAnWz8xMW4nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI1OlxuICAgICAgICAvLyBkb250IHN1cHBvcnQgdXNlciBkZWZpbmVkIGtleXNcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyKEMwLkVTQyArICdbPzIxbicpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjY6XG4gICAgICAgIC8vIG5vcnRoIGFtZXJpY2FuIGtleWJvYXJkXG4gICAgICAgIC8vIHRoaXMuaGFuZGxlcihDMC5FU0MgKyAnWz8yNzsxOzA7MG4nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDUzOlxuICAgICAgICAvLyBubyBkZWMgbG9jYXRvci9tb3VzZVxuICAgICAgICAvLyB0aGlzLmhhbmRsZXIoQzAuRVNDICsgJ1s/NTBuJyk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgISBwICAgU29mdCB0ZXJtaW5hbCByZXNldCAoREVDU1RSKS5cbiAgICogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlNC0xMC5odG1sXG4gICAqL1xuICBwdWJsaWMgc29mdFJlc2V0KHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySGlkZGVuID0gZmFsc2U7XG4gICAgdGhpcy5fdGVybWluYWwuaW5zZXJ0TW9kZSA9IGZhbHNlO1xuICAgIHRoaXMuX3Rlcm1pbmFsLnZpZXdwb3J0Py5zeW5jU2Nyb2xsQXJlYSgpO1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcCA9IDA7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsQm90dG9tID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMTtcbiAgICB0aGlzLl9jdXJBdHRyRGF0YSA9IERFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgPSAwOyAvLyA/XG4gICAgdGhpcy5fY29yZVNlcnZpY2UucmVzZXQoKTtcbiAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5yZXNldCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBTUCBxICBTZXQgY3Vyc29yIHN0eWxlIChERUNTQ1VTUiwgVlQ1MjApLlxuICAgKiAgIFBzID0gMCAgLT4gYmxpbmtpbmcgYmxvY2suXG4gICAqICAgUHMgPSAxICAtPiBibGlua2luZyBibG9jayAoZGVmYXVsdCkuXG4gICAqICAgUHMgPSAyICAtPiBzdGVhZHkgYmxvY2suXG4gICAqICAgUHMgPSAzICAtPiBibGlua2luZyB1bmRlcmxpbmUuXG4gICAqICAgUHMgPSA0ICAtPiBzdGVhZHkgdW5kZXJsaW5lLlxuICAgKiAgIFBzID0gNSAgLT4gYmxpbmtpbmcgYmFyICh4dGVybSkuXG4gICAqICAgUHMgPSA2ICAtPiBzdGVhZHkgYmFyICh4dGVybSkuXG4gICAqL1xuICBwdWJsaWMgc2V0Q3Vyc29yU3R5bGUocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgY29uc3QgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG4gICAgc3dpdGNoIChwYXJhbSkge1xuICAgICAgY2FzZSAxOlxuICAgICAgY2FzZSAyOlxuICAgICAgICB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvclN0eWxlID0gJ2Jsb2NrJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGUgPSAndW5kZXJsaW5lJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDU6XG4gICAgICBjYXNlIDY6XG4gICAgICAgIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGUgPSAnYmFyJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNvbnN0IGlzQmxpbmtpbmcgPSBwYXJhbSAlIDIgPT09IDE7XG4gICAgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JCbGluayA9IGlzQmxpbmtpbmc7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIDsgUHMgclxuICAgKiAgIFNldCBTY3JvbGxpbmcgUmVnaW9uIFt0b3A7Ym90dG9tXSAoZGVmYXVsdCA9IGZ1bGwgc2l6ZSBvZiB3aW4tXG4gICAqICAgZG93KSAoREVDU1RCTSkuXG4gICAqL1xuICBwdWJsaWMgc2V0U2Nyb2xsUmVnaW9uKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIGNvbnN0IHRvcCA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICBsZXQgYm90dG9tOiBudW1iZXI7XG5cbiAgICBpZiAocGFyYW1zLmxlbmd0aCA8IDIgfHwgKGJvdHRvbSA9IHBhcmFtcy5wYXJhbXNbMV0pID4gIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyB8fCBib3R0b20gPT09IDApIHtcbiAgICAgIGJvdHRvbSA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcbiAgICB9XG5cbiAgICBpZiAoYm90dG9tID4gdG9wKSB7XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3AgPSB0b3AgLSAxO1xuICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsQm90dG9tID0gYm90dG9tIC0gMTtcbiAgICAgIHRoaXMuX3NldEN1cnNvcigwLCAwKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDU0kgc1xuICAgKiBFU0MgN1xuICAgKiAgIFNhdmUgY3Vyc29yIChBTlNJLlNZUykuXG4gICAqL1xuICBwdWJsaWMgc2F2ZUN1cnNvcihwYXJhbXM/OiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRYID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueDtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zYXZlZFkgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSArIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5mZyA9IHRoaXMuX2N1ckF0dHJEYXRhLmZnO1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuYmcgPSB0aGlzLl9jdXJBdHRyRGF0YS5iZztcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zYXZlZENoYXJzZXQgPSB0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0O1xuICB9XG5cblxuICAvKipcbiAgICogQ1NJIHVcbiAgICogRVNDIDhcbiAgICogICBSZXN0b3JlIGN1cnNvciAoQU5TSS5TWVMpLlxuICAgKi9cbiAgcHVibGljIHJlc3RvcmVDdXJzb3IocGFyYW1zPzogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zYXZlZFggfHwgMDtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ID0gTWF0aC5tYXgodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRZIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UsIDApO1xuICAgIHRoaXMuX2N1ckF0dHJEYXRhLmZnID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5mZztcbiAgICB0aGlzLl9jdXJBdHRyRGF0YS5iZyA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuYmc7XG4gICAgdGhpcy5fY2hhcnNldFNlcnZpY2UuY2hhcnNldCA9ICh0aGlzIGFzIGFueSkuX3NhdmVkQ2hhcnNldDtcbiAgICBpZiAodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRDaGFyc2V0KSB7XG4gICAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRDaGFyc2V0O1xuICAgIH1cbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICB9XG5cblxuICAvKipcbiAgICogT1NDIDA7IDxkYXRhPiBTVCAoc2V0IGljb24gbmFtZSArIHdpbmRvdyB0aXRsZSlcbiAgICogT1NDIDI7IDxkYXRhPiBTVCAoc2V0IHdpbmRvdyB0aXRsZSlcbiAgICogICBQcm94eSB0byBzZXQgd2luZG93IHRpdGxlLiBJY29uIG5hbWUgaXMgbm90IHN1cHBvcnRlZC5cbiAgICovXG4gIHB1YmxpYyBzZXRUaXRsZShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXJtaW5hbC5oYW5kbGVUaXRsZShkYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgRVxuICAgKiBDMS5ORUxcbiAgICogICBERUMgbW5lbW9uaWM6IE5FTCAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9ORUwpXG4gICAqICAgTW92ZXMgY3Vyc29yIHRvIGZpcnN0IHBvc2l0aW9uIG9uIG5leHQgbGluZS5cbiAgICovXG4gIHB1YmxpYyBuZXh0TGluZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID0gMDtcbiAgICB0aGlzLmluZGV4KCk7XG4gIH1cblxuICAvKipcbiAgICogRVNDID1cbiAgICogICBERUMgbW5lbW9uaWM6IERFQ0tQQU0gKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vREVDS1BBTS5odG1sKVxuICAgKiAgIEVuYWJsZXMgdGhlIG51bWVyaWMga2V5cGFkIHRvIHNlbmQgYXBwbGljYXRpb24gc2VxdWVuY2VzIHRvIHRoZSBob3N0LlxuICAgKi9cbiAgcHVibGljIGtleXBhZEFwcGxpY2F0aW9uTW9kZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdTZXJpYWwgcG9ydCByZXF1ZXN0ZWQgYXBwbGljYXRpb24ga2V5cGFkLicpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZCA9IHRydWU7XG4gICAgdGhpcy5fdGVybWluYWwudmlld3BvcnQ/LnN5bmNTY3JvbGxBcmVhKCk7XG4gIH1cblxuICAvKipcbiAgICogRVNDID5cbiAgICogICBERUMgbW5lbW9uaWM6IERFQ0tQTk0gKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vREVDS1BOTS5odG1sKVxuICAgKiAgIEVuYWJsZXMgdGhlIGtleXBhZCB0byBzZW5kIG51bWVyaWMgY2hhcmFjdGVycyB0byB0aGUgaG9zdC5cbiAgICovXG4gIHB1YmxpYyBrZXlwYWROdW1lcmljTW9kZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdTd2l0Y2hpbmcgYmFjayB0byBub3JtYWwga2V5cGFkLicpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZCA9IGZhbHNlO1xuICAgIHRoaXMuX3Rlcm1pbmFsLnZpZXdwb3J0Py5zeW5jU2Nyb2xsQXJlYSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyAlIEBcbiAgICogRVNDICUgR1xuICAgKiAgIFNlbGVjdCBkZWZhdWx0IGNoYXJhY3RlciBzZXQuIFVURi04IGlzIG5vdCBzdXBwb3J0ZWQgKHN0cmluZyBhcmUgdW5pY29kZSBhbnl3YXlzKVxuICAgKiAgIHRoZXJlZm9yZSBFU0MgJSBHIGRvZXMgdGhlIHNhbWUuXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0RGVmYXVsdENoYXJzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0xldmVsKDApO1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdDaGFyc2V0KDAsIERFRkFVTFRfQ0hBUlNFVCk7IC8vIFVTIChkZWZhdWx0KVxuICB9XG5cbiAgLyoqXG4gICAqIEVTQyAoIENcbiAgICogICBEZXNpZ25hdGUgRzAgQ2hhcmFjdGVyIFNldCwgVlQxMDAsIElTTyAyMDIyLlxuICAgKiBFU0MgKSBDXG4gICAqICAgRGVzaWduYXRlIEcxIENoYXJhY3RlciBTZXQgKElTTyAyMDIyLCBWVDEwMCkuXG4gICAqIEVTQyAqIENcbiAgICogICBEZXNpZ25hdGUgRzIgQ2hhcmFjdGVyIFNldCAoSVNPIDIwMjIsIFZUMjIwKS5cbiAgICogRVNDICsgQ1xuICAgKiAgIERlc2lnbmF0ZSBHMyBDaGFyYWN0ZXIgU2V0IChJU08gMjAyMiwgVlQyMjApLlxuICAgKiBFU0MgLSBDXG4gICAqICAgRGVzaWduYXRlIEcxIENoYXJhY3RlciBTZXQgKFZUMzAwKS5cbiAgICogRVNDIC4gQ1xuICAgKiAgIERlc2lnbmF0ZSBHMiBDaGFyYWN0ZXIgU2V0IChWVDMwMCkuXG4gICAqIEVTQyAvIENcbiAgICogICBEZXNpZ25hdGUgRzMgQ2hhcmFjdGVyIFNldCAoVlQzMDApLiBDID0gQSAgLT4gSVNPIExhdGluLTEgU3VwcGxlbWVudGFsLiAtIFN1cHBvcnRlZD9cbiAgICovXG4gIHB1YmxpYyBzZWxlY3RDaGFyc2V0KGNvbGxlY3RBbmRGbGFnOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoY29sbGVjdEFuZEZsYWcubGVuZ3RoICE9PSAyKSB7XG4gICAgICB0aGlzLnNlbGVjdERlZmF1bHRDaGFyc2V0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjb2xsZWN0QW5kRmxhZ1swXSA9PT0gJy8nKSB7XG4gICAgICByZXR1cm47ICAvLyBUT0RPOiBJcyB0aGlzIHN1cHBvcnRlZD9cbiAgICB9XG4gICAgdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoR0xFVkVMW2NvbGxlY3RBbmRGbGFnWzBdXSwgQ0hBUlNFVFNbY29sbGVjdEFuZEZsYWdbMV1dIHx8IERFRkFVTFRfQ0hBUlNFVCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyBEXG4gICAqIEMxLklORFxuICAgKiAgIERFQyBtbmVtb25pYzogSU5EIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0lORC5odG1sKVxuICAgKiAgIE1vdmVzIHRoZSBjdXJzb3IgZG93biBvbmUgbGluZSBpbiB0aGUgc2FtZSBjb2x1bW4uXG4gICAqL1xuICBwdWJsaWMgaW5kZXgoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55Kys7XG4gICAgaWYgKGJ1ZmZlci55ID09PSBidWZmZXIuc2Nyb2xsQm90dG9tICsgMSkge1xuICAgICAgYnVmZmVyLnktLTtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLnNjcm9sbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpO1xuICAgIH0gZWxzZSBpZiAoYnVmZmVyLnkgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSB7XG4gICAgICBidWZmZXIueSA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDE7XG4gICAgfVxuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gIH1cblxuICAvKipcbiAgICogRVNDIEhcbiAgICogQzEuSFRTXG4gICAqICAgREVDIG1uZW1vbmljOiBIVFMgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vSFRTLmh0bWwpXG4gICAqICAgU2V0cyBhIGhvcml6b250YWwgdGFiIHN0b3AgYXQgdGhlIGNvbHVtbiBwb3NpdGlvbiBpbmRpY2F0ZWQgYnlcbiAgICogICB0aGUgdmFsdWUgb2YgdGhlIGFjdGl2ZSBjb2x1bW4gd2hlbiB0aGUgdGVybWluYWwgcmVjZWl2ZXMgYW4gSFRTLlxuICAgKi9cbiAgcHVibGljIHRhYlNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci50YWJzW3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnhdID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgTVxuICAgKiBDMS5SSVxuICAgKiAgIERFQyBtbmVtb25pYzogSFRTXG4gICAqICAgTW92ZXMgdGhlIGN1cnNvciB1cCBvbmUgbGluZSBpbiB0aGUgc2FtZSBjb2x1bW4uIElmIHRoZSBjdXJzb3IgaXMgYXQgdGhlIHRvcCBtYXJnaW4sXG4gICAqICAgdGhlIHBhZ2Ugc2Nyb2xscyBkb3duLlxuICAgKi9cbiAgcHVibGljIHJldmVyc2VJbmRleCgpOiB2b2lkIHtcbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGlmIChidWZmZXIueSA9PT0gYnVmZmVyLnNjcm9sbFRvcCkge1xuICAgICAgLy8gcG9zc2libHkgbW92ZSB0aGUgY29kZSBiZWxvdyB0byB0ZXJtLnJldmVyc2VTY3JvbGwoKTtcbiAgICAgIC8vIHRlc3Q6IGVjaG8gLW5lICdcXGVbMTsxSFxcZVs0NG1cXGVNXFxlWzBtJ1xuICAgICAgLy8gYmxhbmtMaW5lKHRydWUpIGlzIHh0ZXJtL2xpbnV4IGJlaGF2aW9yXG4gICAgICBjb25zdCBzY3JvbGxSZWdpb25IZWlnaHQgPSBidWZmZXIuc2Nyb2xsQm90dG9tIC0gYnVmZmVyLnNjcm9sbFRvcDtcbiAgICAgIGJ1ZmZlci5saW5lcy5zaGlmdEVsZW1lbnRzKGJ1ZmZlci55ICsgYnVmZmVyLnliYXNlLCBzY3JvbGxSZWdpb25IZWlnaHQsIDEpO1xuICAgICAgYnVmZmVyLmxpbmVzLnNldChidWZmZXIueSArIGJ1ZmZlci55YmFzZSwgYnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShidWZmZXIuc2Nyb2xsVG9wLCBidWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmZmVyLnktLTtcbiAgICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7IC8vIHF1aWNrZml4IHRvIG5vdCBydW4gb3V0IG9mIGJvdW5kc1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgY1xuICAgKiAgIERFQyBtbmVtb25pYzogUklTIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL1JJUy5odG1sKVxuICAgKiAgIFJlc2V0IHRvIGluaXRpYWwgc3RhdGUuXG4gICAqL1xuICBwdWJsaWMgZnVsbFJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuX3BhcnNlci5yZXNldCgpO1xuICAgIHRoaXMuX29uUmVxdWVzdFJlc2V0LmZpcmUoKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl9jdXJBdHRyRGF0YSA9IERFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCk7XG4gICAgdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsID0gREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBiYWNrX2NvbG9yX2VyYXNlIGZlYXR1cmUgZm9yIHh0ZXJtLlxuICAgKi9cbiAgcHJpdmF0ZSBfZXJhc2VBdHRyRGF0YSgpOiBJQXR0cmlidXRlRGF0YSB7XG4gICAgdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsLmJnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgMHhGRkZGRkYpO1xuICAgIHRoaXMuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbC5iZyB8PSB0aGlzLl9jdXJBdHRyRGF0YS5iZyAmIH4weEZDMDAwMDAwO1xuICAgIHJldHVybiB0aGlzLl9lcmFzZUF0dHJEYXRhSW50ZXJuYWw7XG4gIH1cblxuICAvKipcbiAgICogRVNDIG5cbiAgICogRVNDIG9cbiAgICogRVNDIHxcbiAgICogRVNDIH1cbiAgICogRVNDIH5cbiAgICogICBERUMgbW5lbW9uaWM6IExTIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0xTLmh0bWwpXG4gICAqICAgV2hlbiB5b3UgdXNlIGEgbG9ja2luZyBzaGlmdCwgdGhlIGNoYXJhY3RlciBzZXQgcmVtYWlucyBpbiBHTCBvciBHUiB1bnRpbFxuICAgKiAgIHlvdSB1c2UgYW5vdGhlciBsb2NraW5nIHNoaWZ0LiAocGFydGx5IHN1cHBvcnRlZClcbiAgICovXG4gIHB1YmxpYyBzZXRnTGV2ZWwobGV2ZWw6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbChsZXZlbCk7XG4gIH1cblxuICAvKipcbiAgICogRVNDICMgOFxuICAgKiAgIERFQyBtbmVtb25pYzogREVDQUxOIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ0FMTi5odG1sKVxuICAgKiAgIFRoaXMgY29udHJvbCBmdW5jdGlvbiBmaWxscyB0aGUgY29tcGxldGUgc2NyZWVuIGFyZWEgd2l0aFxuICAgKiAgIGEgdGVzdCBwYXR0ZXJuIChFKSB1c2VkIGZvciBhZGp1c3Rpbmcgc2NyZWVuIGFsaWdubWVudC5cbiAgICpcbiAgICogVE9ETzogbW92ZSBERUNBTE4gaW50byBjb21wYXQgYWRkb25cbiAgICovXG4gIHB1YmxpYyBzY3JlZW5BbGlnbm1lbnRQYXR0ZXJuKCk6IHZvaWQge1xuICAgIC8vIHByZXBhcmUgY2VsbCBkYXRhXG4gICAgY29uc3QgY2VsbCA9IG5ldyBDZWxsRGF0YSgpO1xuICAgIGNlbGwuY29udGVudCA9IDEgPDwgQ29udGVudC5XSURUSF9TSElGVCB8ICdFJy5jaGFyQ29kZUF0KDApO1xuICAgIGNlbGwuZmcgPSB0aGlzLl9jdXJBdHRyRGF0YS5mZztcbiAgICBjZWxsLmJnID0gdGhpcy5fY3VyQXR0ckRhdGEuYmc7XG5cbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIHRoaXMuX3NldEN1cnNvcigwLCAwKTtcbiAgICBmb3IgKGxldCB5T2Zmc2V0ID0gMDsgeU9mZnNldCA8IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93czsgKyt5T2Zmc2V0KSB7XG4gICAgICBjb25zdCByb3cgPSBidWZmZXIueSArIGJ1ZmZlci55YmFzZSArIHlPZmZzZXQ7XG4gICAgICBidWZmZXIubGluZXMuZ2V0KHJvdykuZmlsbChjZWxsKTtcbiAgICAgIGJ1ZmZlci5saW5lcy5nZXQocm93KS5pc1dyYXBwZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtBbGxEaXJ0eSgpO1xuICAgIHRoaXMuX3NldEN1cnNvcigwLCAwKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxMywgQ2hyaXN0b3BoZXIgSmVmZnJleSAoTUlUIExpY2Vuc2UpXG4gKiBAbGljZW5zZSBNSVRcbiAqXG4gKiBPcmlnaW5hbGx5IGZvcmtlZCBmcm9tICh3aXRoIHRoZSBhdXRob3IncyBwZXJtaXNzaW9uKTpcbiAqICAgRmFicmljZSBCZWxsYXJkJ3MgamF2YXNjcmlwdCB2dDEwMCBmb3IganNsaW51eDpcbiAqICAgaHR0cDovL2JlbGxhcmQub3JnL2pzbGludXgvXG4gKiAgIENvcHlyaWdodCAoYykgMjAxMSBGYWJyaWNlIEJlbGxhcmRcbiAqICAgVGhlIG9yaWdpbmFsIGRlc2lnbiByZW1haW5zLiBUaGUgdGVybWluYWwgaXRzZWxmXG4gKiAgIGhhcyBiZWVuIGV4dGVuZGVkIHRvIGluY2x1ZGUgeHRlcm0gQ1NJIGNvZGVzLCBhbW9uZ1xuICogICBvdGhlciBmZWF0dXJlcy5cbiAqXG4gKiBUZXJtaW5hbCBFbXVsYXRpb24gUmVmZXJlbmNlczpcbiAqICAgaHR0cDovL3Z0MTAwLm5ldC9cbiAqICAgaHR0cDovL2ludmlzaWJsZS1pc2xhbmQubmV0L3h0ZXJtL2N0bHNlcXMvY3Rsc2Vxcy50eHRcbiAqICAgaHR0cDovL2ludmlzaWJsZS1pc2xhbmQubmV0L3h0ZXJtL2N0bHNlcXMvY3Rsc2Vxcy5odG1sXG4gKiAgIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC92dHRlc3QvXG4gKiAgIGh0dHA6Ly93d3cuaW53YXAuY29tL3BkcDEwL2Fuc2ljb2RlLnR4dFxuICogICBodHRwOi8vbGludXguZGllLm5ldC9tYW4vNC9jb25zb2xlX2NvZGVzXG4gKiAgIGh0dHA6Ly9saW51eC5kaWUubmV0L21hbi83L3VyeHZ0XG4gKi9cblxuaW1wb3J0IHsgSUlucHV0SGFuZGxpbmdUZXJtaW5hbCwgSUNvbXBvc2l0aW9uSGVscGVyLCBJVGVybWluYWxPcHRpb25zLCBJVGVybWluYWwsIElCcm93c2VyLCBDdXN0b21LZXlFdmVudEhhbmRsZXIgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IElSZW5kZXJlciwgQ2hhcmFjdGVySm9pbmVySGFuZGxlciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgQ29tcG9zaXRpb25IZWxwZXIgfSBmcm9tICdicm93c2VyL2lucHV0L0NvbXBvc2l0aW9uSGVscGVyJztcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnYnJvd3Nlci9WaWV3cG9ydCc7XG5pbXBvcnQgeyByaWdodENsaWNrSGFuZGxlciwgbW92ZVRleHRBcmVhVW5kZXJNb3VzZUN1cnNvciwgaGFuZGxlUGFzdGVFdmVudCwgY29weUhhbmRsZXIsIHBhc3RlIH0gZnJvbSAnYnJvd3Nlci9DbGlwYm9hcmQnO1xuaW1wb3J0IHsgQzAgfSBmcm9tICdjb21tb24vZGF0YS9Fc2NhcGVTZXF1ZW5jZXMnO1xuaW1wb3J0IHsgSW5wdXRIYW5kbGVyIH0gZnJvbSAnLi9JbnB1dEhhbmRsZXInO1xuaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1JlbmRlcmVyJztcbmltcG9ydCB7IExpbmtpZmllciB9IGZyb20gJ2Jyb3dzZXIvTGlua2lmaWVyJztcbmltcG9ydCB7IFNlbGVjdGlvblNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlbGVjdGlvblNlcnZpY2UnO1xuaW1wb3J0ICogYXMgQnJvd3NlciBmcm9tICdjb21tb24vUGxhdGZvcm0nO1xuaW1wb3J0IHsgYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyIH0gZnJvbSAnYnJvd3Nlci9MaWZlY3ljbGUnO1xuaW1wb3J0ICogYXMgU3RyaW5ncyBmcm9tICdicm93c2VyL0xvY2FsaXphYmxlU3RyaW5ncyc7XG5pbXBvcnQgeyBTb3VuZFNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NvdW5kU2VydmljZSc7XG5pbXBvcnQgeyBNb3VzZVpvbmVNYW5hZ2VyIH0gZnJvbSAnYnJvd3Nlci9Nb3VzZVpvbmVNYW5hZ2VyJztcbmltcG9ydCB7IEFjY2Vzc2liaWxpdHlNYW5hZ2VyIH0gZnJvbSAnLi9BY2Nlc3NpYmlsaXR5TWFuYWdlcic7XG5pbXBvcnQgeyBJVGhlbWUsIElNYXJrZXIsIElEaXNwb3NhYmxlLCBJU2VsZWN0aW9uUG9zaXRpb24gfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBEb21SZW5kZXJlciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvZG9tL0RvbVJlbmRlcmVyJztcbmltcG9ydCB7IElLZXlib2FyZEV2ZW50LCBLZXlib2FyZFJlc3VsdFR5cGUsIElCdWZmZXJMaW5lLCBJQXR0cmlidXRlRGF0YSwgQ29yZU1vdXNlRXZlbnRUeXBlLCBDb3JlTW91c2VCdXR0b24sIENvcmVNb3VzZUFjdGlvbiB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBldmFsdWF0ZUtleWJvYXJkRXZlbnQgfSBmcm9tICdjb21tb24vaW5wdXQvS2V5Ym9hcmQnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IERFRkFVTFRfQVRUUl9EQVRBIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9CdWZmZXJMaW5lJztcbmltcG9ydCB7IHVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlIH0gZnJvbSAnY29tbW9uL1dpbmRvd3NNb2RlJztcbmltcG9ydCB7IENvbG9yTWFuYWdlciB9IGZyb20gJ2Jyb3dzZXIvQ29sb3JNYW5hZ2VyJztcbmltcG9ydCB7IFJlbmRlclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1JlbmRlclNlcnZpY2UnO1xuaW1wb3J0IHsgSU9wdGlvbnNTZXJ2aWNlLCBJQnVmZmVyU2VydmljZSwgSUNvcmVNb3VzZVNlcnZpY2UsIElDb3JlU2VydmljZSwgSUxvZ1NlcnZpY2UsIElEaXJ0eVJvd1NlcnZpY2UsIElJbnN0YW50aWF0aW9uU2VydmljZSwgSUNoYXJzZXRTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IE9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL09wdGlvbnNTZXJ2aWNlJztcbmltcG9ydCB7IElDaGFyU2l6ZVNlcnZpY2UsIElSZW5kZXJTZXJ2aWNlLCBJTW91c2VTZXJ2aWNlLCBJU2VsZWN0aW9uU2VydmljZSwgSVNvdW5kU2VydmljZSwgSUNvcmVCcm93c2VyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgQ2hhclNpemVTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9DaGFyU2l6ZVNlcnZpY2UnO1xuaW1wb3J0IHsgQnVmZmVyU2VydmljZSwgTUlOSU1VTV9DT0xTLCBNSU5JTVVNX1JPV1MgfSBmcm9tICdjb21tb24vc2VydmljZXMvQnVmZmVyU2VydmljZSc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJQnVmZmVyU2V0LCBJQnVmZmVyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBNb3VzZVNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL01vdXNlU2VydmljZSc7XG5pbXBvcnQgeyBJUGFyYW1zLCBJRnVuY3Rpb25JZGVudGlmaWVyIH0gZnJvbSAnY29tbW9uL3BhcnNlci9UeXBlcyc7XG5pbXBvcnQgeyBDb3JlU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9Db3JlU2VydmljZSc7XG5pbXBvcnQgeyBMb2dTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL0xvZ1NlcnZpY2UnO1xuaW1wb3J0IHsgSUxpbmtpZmllciwgSU1vdXNlWm9uZU1hbmFnZXIsIExpbmtNYXRjaGVySGFuZGxlciwgSUxpbmtNYXRjaGVyT3B0aW9ucywgSVZpZXdwb3J0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBEaXJ0eVJvd1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvRGlydHlSb3dTZXJ2aWNlJztcbmltcG9ydCB7IEluc3RhbnRpYXRpb25TZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL0luc3RhbnRpYXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IENvcmVNb3VzZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvQ29yZU1vdXNlU2VydmljZSc7XG5pbXBvcnQgeyBXcml0ZUJ1ZmZlciB9IGZyb20gJ2NvbW1vbi9pbnB1dC9Xcml0ZUJ1ZmZlcic7XG5pbXBvcnQgeyBDb3JlQnJvd3NlclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL0NvcmVCcm93c2VyU2VydmljZSc7XG5pbXBvcnQgeyBDaGFyc2V0U2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9DaGFyc2V0U2VydmljZSc7XG5cbi8vIExldCBpdCB3b3JrIGluc2lkZSBOb2RlLmpzIGZvciBhdXRvbWF0ZWQgdGVzdGluZyBwdXJwb3Nlcy5cbmNvbnN0IGRvY3VtZW50ID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvdy5kb2N1bWVudCA6IG51bGw7XG5cblxuZXhwb3J0IGNsYXNzIFRlcm1pbmFsIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElUZXJtaW5hbCwgSURpc3Bvc2FibGUsIElJbnB1dEhhbmRsaW5nVGVybWluYWwge1xuICBwdWJsaWMgdGV4dGFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIHB1YmxpYyBlbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgcHVibGljIHNjcmVlbkVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuXG4gIHByaXZhdGUgX2RvY3VtZW50OiBEb2N1bWVudDtcbiAgcHJpdmF0ZSBfdmlld3BvcnRTY3JvbGxBcmVhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfdmlld3BvcnRFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfaGVscGVyQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfY29tcG9zaXRpb25WaWV3OiBIVE1MRWxlbWVudDtcblxuICBwcml2YXRlIF92aXN1YWxCZWxsVGltZXI6IG51bWJlcjtcblxuICBwdWJsaWMgYnJvd3NlcjogSUJyb3dzZXIgPSA8YW55PkJyb3dzZXI7XG5cbiAgLy8gVE9ETzogV2Ugc2hvdWxkIHJlbW92ZSBvcHRpb25zIG9uY2UgY29tcG9uZW50cyBhZG9wdCBvcHRpb25zU2VydmljZVxuICBwdWJsaWMgZ2V0IG9wdGlvbnMoKTogSVRlcm1pbmFsT3B0aW9ucyB7IHJldHVybiB0aGlzLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnM7IH1cblxuICBwcml2YXRlIF9jdXN0b21LZXlFdmVudEhhbmRsZXI6IEN1c3RvbUtleUV2ZW50SGFuZGxlcjtcblxuICAvLyBjb21tb24gc2VydmljZXNcbiAgcHJpdmF0ZSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2U7XG4gIHByaXZhdGUgX2NvcmVTZXJ2aWNlOiBJQ29yZVNlcnZpY2U7XG4gIHByaXZhdGUgX2NoYXJzZXRTZXJ2aWNlOiBJQ2hhcnNldFNlcnZpY2U7XG4gIHByaXZhdGUgX2NvcmVNb3VzZVNlcnZpY2U6IElDb3JlTW91c2VTZXJ2aWNlO1xuICBwcml2YXRlIF9kaXJ0eVJvd1NlcnZpY2U6IElEaXJ0eVJvd1NlcnZpY2U7XG4gIHByaXZhdGUgX2luc3RhbnRpYXRpb25TZXJ2aWNlOiBJSW5zdGFudGlhdGlvblNlcnZpY2U7XG4gIHByaXZhdGUgX2xvZ1NlcnZpY2U6IElMb2dTZXJ2aWNlO1xuICBwdWJsaWMgb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZTtcblxuICAvLyBicm93c2VyIHNlcnZpY2VzXG4gIHByaXZhdGUgX2NoYXJTaXplU2VydmljZTogSUNoYXJTaXplU2VydmljZTtcbiAgcHJpdmF0ZSBfbW91c2VTZXJ2aWNlOiBJTW91c2VTZXJ2aWNlO1xuICBwcml2YXRlIF9yZW5kZXJTZXJ2aWNlOiBJUmVuZGVyU2VydmljZTtcbiAgcHJpdmF0ZSBfc2VsZWN0aW9uU2VydmljZTogSVNlbGVjdGlvblNlcnZpY2U7XG4gIHByaXZhdGUgX3NvdW5kU2VydmljZTogSVNvdW5kU2VydmljZTtcblxuICAvLyBtb2Rlc1xuICBwdWJsaWMgaW5zZXJ0TW9kZTogYm9vbGVhbjtcbiAgcHVibGljIGJyYWNrZXRlZFBhc3RlTW9kZTogYm9vbGVhbjtcblxuICAvLyBtb3VzZSBwcm9wZXJ0aWVzXG4gIHB1YmxpYyBtb3VzZUV2ZW50czogQ29yZU1vdXNlRXZlbnRUeXBlID0gQ29yZU1vdXNlRXZlbnRUeXBlLk5PTkU7XG4gIHB1YmxpYyBzZW5kRm9jdXM6IGJvb2xlYW47XG5cbiAgLy8gbWlzY1xuICBwdWJsaWMgc2F2ZWRDb2xzOiBudW1iZXI7XG5cbiAgLy8gd3JpdGUgYnVmZmVyXG4gIHByaXZhdGUgX3dyaXRlQnVmZmVyOiBXcml0ZUJ1ZmZlcjtcblxuICAvLyBTdG9yZSBpZiB1c2VyIHdlbnQgYnJvd3NpbmcgaGlzdG9yeSBpbiBzY3JvbGxiYWNrXG4gIHByaXZhdGUgX3VzZXJTY3JvbGxpbmc6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFJlY29yZHMgd2hldGhlciB0aGUga2V5ZG93biBldmVudCBoYXMgYWxyZWFkeSBiZWVuIGhhbmRsZWQgYW5kIHRyaWdnZXJlZCBhIGRhdGEgZXZlbnQsIGlmIHNvXG4gICAqIHRoZSBrZXlwcmVzcyBldmVudCBzaG91bGQgbm90IHRyaWdnZXIgYSBkYXRhIGV2ZW50IGJ1dCBzaG91bGQgc3RpbGwgcHJpbnQgdG8gdGhlIHRleHRhcmVhIHNvXG4gICAqIHNjcmVlbiByZWFkZXJzIHdpbGwgYW5ub3VuY2UgaXQuXG4gICAqL1xuICBwcml2YXRlIF9rZXlEb3duSGFuZGxlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgX2lucHV0SGFuZGxlcjogSW5wdXRIYW5kbGVyO1xuICBwdWJsaWMgbGlua2lmaWVyOiBJTGlua2lmaWVyO1xuICBwdWJsaWMgdmlld3BvcnQ6IElWaWV3cG9ydDtcbiAgcHJpdmF0ZSBfY29tcG9zaXRpb25IZWxwZXI6IElDb21wb3NpdGlvbkhlbHBlcjtcbiAgcHJpdmF0ZSBfbW91c2Vab25lTWFuYWdlcjogSU1vdXNlWm9uZU1hbmFnZXI7XG4gIHByaXZhdGUgX2FjY2Vzc2liaWxpdHlNYW5hZ2VyOiBBY2Nlc3NpYmlsaXR5TWFuYWdlcjtcbiAgcHJpdmF0ZSBfY29sb3JNYW5hZ2VyOiBDb2xvck1hbmFnZXI7XG4gIHByaXZhdGUgX3RoZW1lOiBJVGhlbWU7XG4gIHByaXZhdGUgX3dpbmRvd3NNb2RlOiBJRGlzcG9zYWJsZSB8IHVuZGVmaW5lZDtcblxuICAvLyBidWZmZXJsaW5lIHRvIGNsb25lL2NvcHkgZnJvbSBmb3IgbmV3IGJsYW5rIGxpbmVzXG4gIHByaXZhdGUgX2JsYW5rTGluZTogSUJ1ZmZlckxpbmUgPSBudWxsO1xuXG4gIHB1YmxpYyBnZXQgY29scygpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzOyB9XG4gIHB1YmxpYyBnZXQgcm93cygpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzOyB9XG5cbiAgcHJpdmF0ZSBfb25DdXJzb3JNb3ZlID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBwdWJsaWMgZ2V0IG9uQ3Vyc29yTW92ZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25DdXJzb3JNb3ZlLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uRGF0YSA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICBwdWJsaWMgZ2V0IG9uRGF0YSgpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9vbkRhdGEuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25CaW5hcnkgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcbiAgcHVibGljIGdldCBvbkJpbmFyeSgpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9vbkJpbmFyeS5ldmVudDsgfVxuICBwcml2YXRlIF9vbktleSA9IG5ldyBFdmVudEVtaXR0ZXI8eyBrZXk6IHN0cmluZywgZG9tRXZlbnQ6IEtleWJvYXJkRXZlbnQgfT4oKTtcbiAgcHVibGljIGdldCBvbktleSgpOiBJRXZlbnQ8eyBrZXk6IHN0cmluZywgZG9tRXZlbnQ6IEtleWJvYXJkRXZlbnQgfT4geyByZXR1cm4gdGhpcy5fb25LZXkuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25MaW5lRmVlZCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvbkxpbmVGZWVkKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vbkxpbmVGZWVkLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uUmVuZGVyID0gbmV3IEV2ZW50RW1pdHRlcjx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+KCk7XG4gIHB1YmxpYyBnZXQgb25SZW5kZXIoKTogSUV2ZW50PHsgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIgfT4geyByZXR1cm4gdGhpcy5fb25SZW5kZXIuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25SZXNpemUgPSBuZXcgRXZlbnRFbWl0dGVyPHsgY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIgfT4oKTtcbiAgcHVibGljIGdldCBvblJlc2l6ZSgpOiBJRXZlbnQ8eyBjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlciB9PiB7IHJldHVybiB0aGlzLl9vblJlc2l6ZS5ldmVudDsgfVxuICBwcml2YXRlIF9vblNjcm9sbCA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuICBwdWJsaWMgZ2V0IG9uU2Nyb2xsKCk6IElFdmVudDxudW1iZXI+IHsgcmV0dXJuIHRoaXMuX29uU2Nyb2xsLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uU2VsZWN0aW9uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBwdWJsaWMgZ2V0IG9uU2VsZWN0aW9uQ2hhbmdlKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5ldmVudDsgfVxuICBwcml2YXRlIF9vblRpdGxlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XG4gIHB1YmxpYyBnZXQgb25UaXRsZUNoYW5nZSgpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9vblRpdGxlQ2hhbmdlLmV2ZW50OyB9XG5cbiAgcHJpdmF0ZSBfb25Gb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvbkZvY3VzKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vbkZvY3VzLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uQmx1ciA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvbkJsdXIoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX29uQmx1ci5ldmVudDsgfVxuICBwdWJsaWMgb25BMTF5Q2hhckVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcbiAgcHVibGljIGdldCBvbkExMXlDaGFyKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMub25BMTF5Q2hhckVtaXR0ZXIuZXZlbnQ7IH1cbiAgcHVibGljIG9uQTExeVRhYkVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKTtcbiAgcHVibGljIGdldCBvbkExMXlUYWIoKTogSUV2ZW50PG51bWJlcj4geyByZXR1cm4gdGhpcy5vbkExMXlUYWJFbWl0dGVyLmV2ZW50OyB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgYFRlcm1pbmFsYCBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIEFuIG9iamVjdCBjb250YWluaW5nIGEgc2V0IG9mIG9wdGlvbnMsIHRoZSBhdmFpbGFibGUgb3B0aW9ucyBhcmU6XG4gICAqICAgLSBgY3Vyc29yQmxpbmtgIChib29sZWFuKTogV2hldGhlciB0aGUgdGVybWluYWwgY3Vyc29yIGJsaW5rc1xuICAgKiAgIC0gYGNvbHNgIChudW1iZXIpOiBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgb2YgdGhlIHRlcm1pbmFsIChob3Jpem9udGFsIHNpemUpXG4gICAqICAgLSBgcm93c2AgKG51bWJlcik6IFRoZSBudW1iZXIgb2Ygcm93cyBvZiB0aGUgdGVybWluYWwgKHZlcnRpY2FsIHNpemUpXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQGNsYXNzIFh0ZXJtIFh0ZXJtXG4gICAqIEBhbGlhcyBtb2R1bGU6eHRlcm0vc3JjL3h0ZXJtXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBvcHRpb25zOiBJVGVybWluYWxPcHRpb25zID0ge31cbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8vIFNldHVwIGFuZCBpbml0aWFsaXplIGNvbW1vbiBzZXJ2aWNlc1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlID0gbmV3IEluc3RhbnRpYXRpb25TZXJ2aWNlKCk7XG4gICAgdGhpcy5vcHRpb25zU2VydmljZSA9IG5ldyBPcHRpb25zU2VydmljZShvcHRpb25zKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElPcHRpb25zU2VydmljZSwgdGhpcy5vcHRpb25zU2VydmljZSk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKEJ1ZmZlclNlcnZpY2UpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSUJ1ZmZlclNlcnZpY2UsIHRoaXMuX2J1ZmZlclNlcnZpY2UpO1xuICAgIHRoaXMuX2xvZ1NlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShMb2dTZXJ2aWNlKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElMb2dTZXJ2aWNlLCB0aGlzLl9sb2dTZXJ2aWNlKTtcbiAgICB0aGlzLl9jb3JlU2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENvcmVTZXJ2aWNlLCAoKSA9PiB0aGlzLnNjcm9sbFRvQm90dG9tKCkpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSUNvcmVTZXJ2aWNlLCB0aGlzLl9jb3JlU2VydmljZSk7XG4gICAgdGhpcy5fY29yZVNlcnZpY2Uub25EYXRhKGUgPT4gdGhpcy5fb25EYXRhLmZpcmUoZSkpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLm9uQmluYXJ5KGUgPT4gdGhpcy5fb25CaW5hcnkuZmlyZShlKSk7XG4gICAgdGhpcy5fY29yZU1vdXNlU2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENvcmVNb3VzZVNlcnZpY2UpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSUNvcmVNb3VzZVNlcnZpY2UsIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UpO1xuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKERpcnR5Um93U2VydmljZSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJRGlydHlSb3dTZXJ2aWNlLCB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UpO1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoQ2hhcnNldFNlcnZpY2UpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSUNoYXJzZXRTZXJ2aWNlLCB0aGlzLl9jaGFyc2V0U2VydmljZSk7XG5cbiAgICB0aGlzLl9zZXR1cE9wdGlvbnNMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9zZXR1cCgpO1xuXG4gICAgdGhpcy5fd3JpdGVCdWZmZXIgPSBuZXcgV3JpdGVCdWZmZXIoZGF0YSA9PiB0aGlzLl9pbnB1dEhhbmRsZXIucGFyc2UoZGF0YSkpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2lzRGlzcG9zZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIHRoaXMuX3dpbmRvd3NNb2RlPy5kaXNwb3NlKCk7XG4gICAgdGhpcy5fd2luZG93c01vZGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVuZGVyU2VydmljZT8uZGlzcG9zZSgpO1xuICAgIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciA9IG51bGw7XG4gICAgdGhpcy53cml0ZSA9ICgpID0+IHt9O1xuICAgIHRoaXMuZWxlbWVudD8ucGFyZW50Tm9kZT8ucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgfVxuXG4gIHByaXZhdGUgX3NldHVwKCk6IHZvaWQge1xuICAgIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciA9IG51bGw7XG5cbiAgICAvLyBtb2Rlc1xuICAgIHRoaXMuaW5zZXJ0TW9kZSA9IGZhbHNlO1xuICAgIHRoaXMuYnJhY2tldGVkUGFzdGVNb2RlID0gZmFsc2U7XG5cbiAgICB0aGlzLl91c2VyU2Nyb2xsaW5nID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5faW5wdXRIYW5kbGVyKSB7XG4gICAgICB0aGlzLl9pbnB1dEhhbmRsZXIucmVzZXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmVnaXN0ZXIgaW5wdXQgaGFuZGxlciBhbmQgcmVmaXJlL2hhbmRsZSBldmVudHNcbiAgICAgIHRoaXMuX2lucHV0SGFuZGxlciA9IG5ldyBJbnB1dEhhbmRsZXIodGhpcywgdGhpcy5fYnVmZmVyU2VydmljZSwgdGhpcy5fY2hhcnNldFNlcnZpY2UsIHRoaXMuX2NvcmVTZXJ2aWNlLCB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UsIHRoaXMuX2xvZ1NlcnZpY2UsIHRoaXMub3B0aW9uc1NlcnZpY2UsIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UpO1xuICAgICAgdGhpcy5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdEJlbGwoKCkgPT4gdGhpcy5iZWxsKCkpO1xuICAgICAgdGhpcy5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdFJlZnJlc2hSb3dzKChzdGFydCwgZW5kKSA9PiB0aGlzLnJlZnJlc2goc3RhcnQsIGVuZCkpO1xuICAgICAgdGhpcy5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdFJlc2V0KCgpID0+IHRoaXMucmVzZXQoKSk7XG4gICAgICB0aGlzLl9pbnB1dEhhbmRsZXIub25DdXJzb3JNb3ZlKCgpID0+IHRoaXMuX29uQ3Vyc29yTW92ZS5maXJlKCkpO1xuICAgICAgdGhpcy5faW5wdXRIYW5kbGVyLm9uTGluZUZlZWQoKCkgPT4gdGhpcy5fb25MaW5lRmVlZC5maXJlKCkpO1xuICAgICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9pbnB1dEhhbmRsZXIpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5saW5raWZpZXIpIHtcbiAgICAgIHRoaXMubGlua2lmaWVyID0gbmV3IExpbmtpZmllcih0aGlzLl9idWZmZXJTZXJ2aWNlLCB0aGlzLl9sb2dTZXJ2aWNlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLndpbmRvd3NNb2RlKSB7XG4gICAgICB0aGlzLl9lbmFibGVXaW5kb3dzTW9kZSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2VuYWJsZVdpbmRvd3NNb2RlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fd2luZG93c01vZGUpIHtcbiAgICAgIGNvbnN0IGRpc3Bvc2FibGVzOiBJRGlzcG9zYWJsZVtdID0gW107XG4gICAgICBkaXNwb3NhYmxlcy5wdXNoKHRoaXMub25MaW5lRmVlZCh1cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZS5iaW5kKG51bGwsIHRoaXMuX2J1ZmZlclNlcnZpY2UpKSk7XG4gICAgICBkaXNwb3NhYmxlcy5wdXNoKHRoaXMuYWRkQ3NpSGFuZGxlcih7IGZpbmFsOiAnSCcgfSwgKCkgPT4ge1xuICAgICAgICB1cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZSh0aGlzLl9idWZmZXJTZXJ2aWNlKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSkpO1xuICAgICAgdGhpcy5fd2luZG93c01vZGUgPSB7XG4gICAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgICBkaXNwb3NhYmxlcy5mb3JFYWNoKGQgPT4gZC5kaXNwb3NlKCkpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBwcm9wZXJ0eSB0byBhY3RpdmUgYnVmZmVyLlxuICAgKi9cbiAgcHVibGljIGdldCBidWZmZXIoKTogSUJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuYnVmZmVycy5hY3RpdmU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGJ1ZmZlcnMoKTogSUJ1ZmZlclNldCB7XG4gICAgcmV0dXJuIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb2N1cyB0aGUgdGVybWluYWwuIERlbGVnYXRlcyBmb2N1cyBoYW5kbGluZyB0byB0aGUgdGVybWluYWwncyBET00gZWxlbWVudC5cbiAgICovXG4gIHB1YmxpYyBmb2N1cygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50ZXh0YXJlYSkge1xuICAgICAgdGhpcy50ZXh0YXJlYS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfc2V0dXBPcHRpb25zTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIC8vIFRPRE86IFRoZXNlIGxpc3RlbmVycyBzaG91bGQgYmUgb3duZWQgYnkgaW5kaXZpZHVhbCBjb21wb25lbnRzXG4gICAgdGhpcy5vcHRpb25zU2VydmljZS5vbk9wdGlvbkNoYW5nZShrZXkgPT4ge1xuICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgY2FzZSAnZm9udEZhbWlseSc6XG4gICAgICAgIGNhc2UgJ2ZvbnRTaXplJzpcbiAgICAgICAgICAvLyBXaGVuIHRoZSBmb250IGNoYW5nZXMgdGhlIHNpemUgb2YgdGhlIGNlbGxzIG1heSBjaGFuZ2Ugd2hpY2ggcmVxdWlyZXMgYSByZW5kZXJlciBjbGVhclxuICAgICAgICAgIHRoaXMuX3JlbmRlclNlcnZpY2U/LmNsZWFyKCk7XG4gICAgICAgICAgdGhpcy5fY2hhclNpemVTZXJ2aWNlPy5tZWFzdXJlKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzJzpcbiAgICAgICAgY2FzZSAnbGV0dGVyU3BhY2luZyc6XG4gICAgICAgIGNhc2UgJ2xpbmVIZWlnaHQnOlxuICAgICAgICBjYXNlICdmb250V2VpZ2h0JzpcbiAgICAgICAgY2FzZSAnZm9udFdlaWdodEJvbGQnOlxuICAgICAgICBjYXNlICdtaW5pbXVtQ29udHJhc3RSYXRpbyc6XG4gICAgICAgICAgLy8gV2hlbiB0aGUgZm9udCBjaGFuZ2VzIHRoZSBzaXplIG9mIHRoZSBjZWxscyBtYXkgY2hhbmdlIHdoaWNoIHJlcXVpcmVzIGEgcmVuZGVyZXIgY2xlYXJcbiAgICAgICAgICBpZiAodGhpcy5fcmVuZGVyU2VydmljZSkge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyU2VydmljZS5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyU2VydmljZS5vblJlc2l6ZSh0aGlzLmNvbHMsIHRoaXMucm93cyk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyZW5kZXJlclR5cGUnOlxuICAgICAgICAgIGlmICh0aGlzLl9yZW5kZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJTZXJ2aWNlLnNldFJlbmRlcmVyKHRoaXMuX2NyZWF0ZVJlbmRlcmVyKCkpO1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyU2VydmljZS5vblJlc2l6ZSh0aGlzLmNvbHMsIHRoaXMucm93cyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzY3JvbGxiYWNrJzpcbiAgICAgICAgICB0aGlzLmJ1ZmZlcnMucmVzaXplKHRoaXMuY29scywgdGhpcy5yb3dzKTtcbiAgICAgICAgICB0aGlzLnZpZXdwb3J0Py5zeW5jU2Nyb2xsQXJlYSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzY3JlZW5SZWFkZXJNb2RlJzpcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zU2VydmljZS5vcHRpb25zLnNjcmVlblJlYWRlck1vZGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXIgJiYgdGhpcy5fcmVuZGVyU2VydmljZSkge1xuICAgICAgICAgICAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlciA9IG5ldyBBY2Nlc3NpYmlsaXR5TWFuYWdlcih0aGlzLCB0aGlzLl9yZW5kZXJTZXJ2aWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXI/LmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3RhYlN0b3BXaWR0aCc6IHRoaXMuYnVmZmVycy5zZXR1cFRhYlN0b3BzKCk7IGJyZWFrO1xuICAgICAgICBjYXNlICd0aGVtZSc6XG4gICAgICAgICAgdGhpcy5fc2V0VGhlbWUodGhpcy5vcHRpb25zU2VydmljZS5vcHRpb25zLnRoZW1lKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnd2luZG93c01vZGUnOlxuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnMud2luZG93c01vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZVdpbmRvd3NNb2RlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3dpbmRvd3NNb2RlPy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLl93aW5kb3dzTW9kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQmluZHMgdGhlIGRlc2lyZWQgZm9jdXMgYmVoYXZpb3Igb24gYSBnaXZlbiB0ZXJtaW5hbCBvYmplY3QuXG4gICAqL1xuICBwcml2YXRlIF9vblRleHRBcmVhRm9jdXMoZXY6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zZW5kRm9jdXMpIHtcbiAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoQzAuRVNDICsgJ1tJJyk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlQ3Vyc29yU3R5bGUoZXYpO1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdmb2N1cycpO1xuICAgIHRoaXMuc2hvd0N1cnNvcigpO1xuICAgIHRoaXMuX29uRm9jdXMuZmlyZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJsdXIgdGhlIHRlcm1pbmFsLCBjYWxsaW5nIHRoZSBibHVyIGZ1bmN0aW9uIG9uIHRoZSB0ZXJtaW5hbCdzIHVuZGVybHlpbmdcbiAgICogdGV4dGFyZWEuXG4gICAqL1xuICBwdWJsaWMgYmx1cigpOiB2b2lkIHtcbiAgICByZXR1cm4gdGhpcy50ZXh0YXJlYS5ibHVyKCk7XG4gIH1cblxuICAvKipcbiAgICogQmluZHMgdGhlIGRlc2lyZWQgYmx1ciBiZWhhdmlvciBvbiBhIGdpdmVuIHRlcm1pbmFsIG9iamVjdC5cbiAgICovXG4gIHByaXZhdGUgX29uVGV4dEFyZWFCbHVyKCk6IHZvaWQge1xuICAgIC8vIFRleHQgY2FuIHNhZmVseSBiZSByZW1vdmVkIG9uIGJsdXIuIERvaW5nIGl0IGVhcmxpZXIgY291bGQgaW50ZXJmZXJlIHdpdGhcbiAgICAvLyBzY3JlZW4gcmVhZGVycyByZWFkaW5nIGl0IG91dC5cbiAgICB0aGlzLnRleHRhcmVhLnZhbHVlID0gJyc7XG4gICAgdGhpcy5yZWZyZXNoKHRoaXMuYnVmZmVyLnksIHRoaXMuYnVmZmVyLnkpO1xuICAgIGlmICh0aGlzLnNlbmRGb2N1cykge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5FU0MgKyAnW08nKTtcbiAgICB9XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2ZvY3VzJyk7XG4gICAgdGhpcy5fb25CbHVyLmZpcmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGRlZmF1bHQgYmVoYXZpb3JcbiAgICovXG4gIHByaXZhdGUgX2luaXRHbG9iYWwoKTogdm9pZCB7XG4gICAgdGhpcy5fYmluZEtleXMoKTtcblxuICAgIC8vIEJpbmQgY2xpcGJvYXJkIGZ1bmN0aW9uYWxpdHlcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLmVsZW1lbnQsICdjb3B5JywgKGV2ZW50OiBDbGlwYm9hcmRFdmVudCkgPT4ge1xuICAgICAgLy8gSWYgbW91c2UgZXZlbnRzIGFyZSBhY3RpdmUgaXQgbWVhbnMgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyIGlzIGRpc2FibGVkIGFuZFxuICAgICAgLy8gY29weSBzaG91bGQgYmUgaGFuZGxlZCBieSB0aGUgaG9zdCBwcm9ncmFtLlxuICAgICAgaWYgKCF0aGlzLmhhc1NlbGVjdGlvbigpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvcHlIYW5kbGVyKGV2ZW50LCB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlKTtcbiAgICB9KSk7XG4gICAgY29uc3QgcGFzdGVIYW5kbGVyV3JhcHBlciA9IChldmVudDogQ2xpcGJvYXJkRXZlbnQpID0+IGhhbmRsZVBhc3RlRXZlbnQoZXZlbnQsIHRoaXMudGV4dGFyZWEsIHRoaXMuYnJhY2tldGVkUGFzdGVNb2RlLCB0aGlzLl9jb3JlU2VydmljZSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSwgJ3Bhc3RlJywgcGFzdGVIYW5kbGVyV3JhcHBlcikpO1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgJ3Bhc3RlJywgcGFzdGVIYW5kbGVyV3JhcHBlcikpO1xuXG4gICAgLy8gSGFuZGxlIHJpZ2h0IGNsaWNrIGNvbnRleHQgbWVudXNcbiAgICBpZiAoQnJvd3Nlci5pc0ZpcmVmb3gpIHtcbiAgICAgIC8vIEZpcmVmb3ggZG9lc24ndCBhcHBlYXIgdG8gZmlyZSB0aGUgY29udGV4dG1lbnUgZXZlbnQgb24gcmlnaHQgY2xpY2tcbiAgICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgJ21vdXNlZG93bicsIChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuYnV0dG9uID09PSAyKSB7XG4gICAgICAgICAgcmlnaHRDbGlja0hhbmRsZXIoZXZlbnQsIHRoaXMudGV4dGFyZWEsIHRoaXMuc2NyZWVuRWxlbWVudCwgdGhpcy5fc2VsZWN0aW9uU2VydmljZSwgdGhpcy5vcHRpb25zLnJpZ2h0Q2xpY2tTZWxlY3RzV29yZCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5lbGVtZW50LCAnY29udGV4dG1lbnUnLCAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgcmlnaHRDbGlja0hhbmRsZXIoZXZlbnQsIHRoaXMudGV4dGFyZWEsIHRoaXMuc2NyZWVuRWxlbWVudCwgdGhpcy5fc2VsZWN0aW9uU2VydmljZSwgdGhpcy5vcHRpb25zLnJpZ2h0Q2xpY2tTZWxlY3RzV29yZCk7XG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgLy8gTW92ZSB0aGUgdGV4dGFyZWEgdW5kZXIgdGhlIGN1cnNvciB3aGVuIG1pZGRsZSBjbGlja2luZyBvbiBMaW51eCB0byBlbnN1cmVcbiAgICAvLyBtaWRkbGUgY2xpY2sgdG8gcGFzdGUgc2VsZWN0aW9uIHdvcmtzLiBUaGlzIG9ubHkgYXBwZWFycyB0byB3b3JrIGluIENocm9tZVxuICAgIC8vIGF0IHRoZSB0aW1lIGlzIHdyaXRpbmcuXG4gICAgaWYgKEJyb3dzZXIuaXNMaW51eCkge1xuICAgICAgLy8gVXNlIGF1eGNsaWNrIGV2ZW50IG92ZXIgbW91c2Vkb3duIHRoZSBsYXR0ZXIgZG9lc24ndCBzZWVtIHRvIHdvcmsuIE5vdGVcbiAgICAgIC8vIHRoYXQgdGhlIHJlZ3VsYXIgY2xpY2sgZXZlbnQgZG9lc24ndCBmaXJlIGZvciB0aGUgbWlkZGxlIG1vdXNlIGJ1dHRvbi5cbiAgICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgJ2F1eGNsaWNrJywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5idXR0b24gPT09IDEpIHtcbiAgICAgICAgICBtb3ZlVGV4dEFyZWFVbmRlck1vdXNlQ3Vyc29yKGV2ZW50LCB0aGlzLnRleHRhcmVhLCB0aGlzLnNjcmVlbkVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGtleSBoYW5kbGluZyB0byB0aGUgdGVybWluYWxcbiAgICovXG4gIHByaXZhdGUgX2JpbmRLZXlzKCk6IHZvaWQge1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMudGV4dGFyZWEsICdrZXl1cCcsIChldjogS2V5Ym9hcmRFdmVudCkgPT4gdGhpcy5fa2V5VXAoZXYpLCB0cnVlKSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSwgJ2tleWRvd24nLCAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHRoaXMuX2tleURvd24oZXYpLCB0cnVlKSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSwgJ2tleXByZXNzJywgKGV2OiBLZXlib2FyZEV2ZW50KSA9PiB0aGlzLl9rZXlQcmVzcyhldiksIHRydWUpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLnRleHRhcmVhLCAnY29tcG9zaXRpb25zdGFydCcsICgpID0+IHRoaXMuX2NvbXBvc2l0aW9uSGVscGVyLmNvbXBvc2l0aW9uc3RhcnQoKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMudGV4dGFyZWEsICdjb21wb3NpdGlvbnVwZGF0ZScsIChlOiBDb21wb3NpdGlvbkV2ZW50KSA9PiB0aGlzLl9jb21wb3NpdGlvbkhlbHBlci5jb21wb3NpdGlvbnVwZGF0ZShlKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMudGV4dGFyZWEsICdjb21wb3NpdGlvbmVuZCcsICgpID0+IHRoaXMuX2NvbXBvc2l0aW9uSGVscGVyLmNvbXBvc2l0aW9uZW5kKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMub25SZW5kZXIoKCkgPT4gdGhpcy5fY29tcG9zaXRpb25IZWxwZXIudXBkYXRlQ29tcG9zaXRpb25FbGVtZW50cygpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9uUmVuZGVyKGUgPT4gdGhpcy5fcXVldWVMaW5raWZpY2F0aW9uKGUuc3RhcnQsIGUuZW5kKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSB0ZXJtaW5hbCB3aXRoaW4gYW4gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHBhcmVudCBUaGUgZWxlbWVudCB0byBjcmVhdGUgdGhlIHRlcm1pbmFsIHdpdGhpbi5cbiAgICovXG4gIHB1YmxpYyBvcGVuKHBhcmVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBpZiAoIXBhcmVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXJtaW5hbCByZXF1aXJlcyBhIHBhcmVudCBlbGVtZW50LicpO1xuICAgIH1cblxuICAgIGlmICghZG9jdW1lbnQuYm9keS5jb250YWlucyhwYXJlbnQpKSB7XG4gICAgICB0aGlzLl9sb2dTZXJ2aWNlLndhcm4oJ1Rlcm1pbmFsLm9wZW4gd2FzIGNhbGxlZCBvbiBhbiBlbGVtZW50IHRoYXQgd2FzIG5vdCBhdHRhY2hlZCB0byB0aGUgRE9NJyk7XG4gICAgfVxuXG4gICAgdGhpcy5fZG9jdW1lbnQgPSBwYXJlbnQub3duZXJEb2N1bWVudDtcblxuICAgIC8vIENyZWF0ZSBtYWluIGVsZW1lbnQgY29udGFpbmVyXG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5lbGVtZW50LmRpciA9ICdsdHInOyAgIC8vIHh0ZXJtLmNzcyBhc3N1bWVzIExUUlxuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd0ZXJtaW5hbCcpO1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd4dGVybScpO1xuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcblxuICAgIC8vIFBlcmZvcm1hbmNlOiBVc2UgYSBkb2N1bWVudCBmcmFnbWVudCB0byBidWlsZCB0aGUgdGVybWluYWxcbiAgICAvLyB2aWV3cG9ydCBhbmQgaGVscGVyIGVsZW1lbnRzIGRldGFjaGVkIGZyb20gdGhlIERPTVxuICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHRoaXMuX3ZpZXdwb3J0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCd4dGVybS12aWV3cG9ydCcpO1xuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuX3ZpZXdwb3J0RWxlbWVudCk7XG4gICAgdGhpcy5fdmlld3BvcnRTY3JvbGxBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fdmlld3BvcnRTY3JvbGxBcmVhLmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLXNjcm9sbC1hcmVhJyk7XG4gICAgdGhpcy5fdmlld3BvcnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYSk7XG5cbiAgICB0aGlzLnNjcmVlbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLnNjcmVlbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgneHRlcm0tc2NyZWVuJyk7XG4gICAgLy8gQ3JlYXRlIHRoZSBjb250YWluZXIgdGhhdCB3aWxsIGhvbGQgaGVscGVycyBsaWtlIHRoZSB0ZXh0YXJlYSBmb3JcbiAgICAvLyBjYXB0dXJpbmcgRE9NIEV2ZW50cy4gVGhlbiBwcm9kdWNlIHRoZSBoZWxwZXJzLlxuICAgIHRoaXMuX2hlbHBlckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX2hlbHBlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd4dGVybS1oZWxwZXJzJyk7XG4gICAgdGhpcy5zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2hlbHBlckNvbnRhaW5lcik7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5zY3JlZW5FbGVtZW50KTtcblxuICAgIHRoaXMudGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIHRoaXMudGV4dGFyZWEuY2xhc3NMaXN0LmFkZCgneHRlcm0taGVscGVyLXRleHRhcmVhJyk7XG4gICAgdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBTdHJpbmdzLnByb21wdExhYmVsKTtcbiAgICB0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgnYXJpYS1tdWx0aWxpbmUnLCAnZmFsc2UnKTtcbiAgICB0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgnYXV0b2NvcnJlY3QnLCAnb2ZmJyk7XG4gICAgdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ2F1dG9jYXBpdGFsaXplJywgJ29mZicpO1xuICAgIHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCdzcGVsbGNoZWNrJywgJ2ZhbHNlJyk7XG4gICAgdGhpcy50ZXh0YXJlYS50YWJJbmRleCA9IDA7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSwgJ2ZvY3VzJywgKGV2OiBLZXlib2FyZEV2ZW50KSA9PiB0aGlzLl9vblRleHRBcmVhRm9jdXMoZXYpKSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSwgJ2JsdXInLCAoKSA9PiB0aGlzLl9vblRleHRBcmVhQmx1cigpKSk7XG4gICAgdGhpcy5faGVscGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMudGV4dGFyZWEpO1xuXG4gICAgY29uc3QgY29yZUJyb3dzZXJTZXJ2aWNlID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoQ29yZUJyb3dzZXJTZXJ2aWNlLCB0aGlzLnRleHRhcmVhKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElDb3JlQnJvd3NlclNlcnZpY2UsIGNvcmVCcm93c2VyU2VydmljZSk7XG5cbiAgICB0aGlzLl9jaGFyU2l6ZVNlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShDaGFyU2l6ZVNlcnZpY2UsIHRoaXMuX2RvY3VtZW50LCB0aGlzLl9oZWxwZXJDb250YWluZXIpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSUNoYXJTaXplU2VydmljZSwgdGhpcy5fY2hhclNpemVTZXJ2aWNlKTtcblxuICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy5jbGFzc0xpc3QuYWRkKCdjb21wb3NpdGlvbi12aWV3Jyk7XG4gICAgdGhpcy5fY29tcG9zaXRpb25IZWxwZXIgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShDb21wb3NpdGlvbkhlbHBlciwgdGhpcy50ZXh0YXJlYSwgdGhpcy5fY29tcG9zaXRpb25WaWV3KTtcbiAgICB0aGlzLl9oZWxwZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fY29tcG9zaXRpb25WaWV3KTtcblxuICAgIC8vIFBlcmZvcm1hbmNlOiBBZGQgdmlld3BvcnQgYW5kIGhlbHBlciBlbGVtZW50cyBmcm9tIHRoZSBmcmFnbWVudFxuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cbiAgICB0aGlzLl90aGVtZSA9IHRoaXMub3B0aW9ucy50aGVtZSB8fCB0aGlzLl90aGVtZTtcbiAgICB0aGlzLm9wdGlvbnMudGhlbWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fY29sb3JNYW5hZ2VyID0gbmV3IENvbG9yTWFuYWdlcihkb2N1bWVudCwgdGhpcy5vcHRpb25zLmFsbG93VHJhbnNwYXJlbmN5KTtcbiAgICB0aGlzLm9wdGlvbnNTZXJ2aWNlLm9uT3B0aW9uQ2hhbmdlKGUgPT4gdGhpcy5fY29sb3JNYW5hZ2VyLm9uT3B0aW9uc0NoYW5nZShlKSk7XG4gICAgdGhpcy5fY29sb3JNYW5hZ2VyLnNldFRoZW1lKHRoaXMuX3RoZW1lKTtcblxuICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5fY3JlYXRlUmVuZGVyZXIoKTtcbiAgICB0aGlzLl9yZW5kZXJTZXJ2aWNlID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoUmVuZGVyU2VydmljZSwgcmVuZGVyZXIsIHRoaXMucm93cywgdGhpcy5zY3JlZW5FbGVtZW50KTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElSZW5kZXJTZXJ2aWNlLCB0aGlzLl9yZW5kZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVuZGVyKGUgPT4gdGhpcy5fb25SZW5kZXIuZmlyZShlKSk7XG4gICAgdGhpcy5vblJlc2l6ZShlID0+IHRoaXMuX3JlbmRlclNlcnZpY2UucmVzaXplKGUuY29scywgZS5yb3dzKSk7XG5cbiAgICB0aGlzLl9zb3VuZFNlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShTb3VuZFNlcnZpY2UpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSVNvdW5kU2VydmljZSwgdGhpcy5fc291bmRTZXJ2aWNlKTtcbiAgICB0aGlzLl9tb3VzZVNlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShNb3VzZVNlcnZpY2UpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSU1vdXNlU2VydmljZSwgdGhpcy5fbW91c2VTZXJ2aWNlKTtcblxuICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShWaWV3cG9ydCxcbiAgICAgIChhbW91bnQ6IG51bWJlciwgc3VwcHJlc3NFdmVudDogYm9vbGVhbikgPT4gdGhpcy5zY3JvbGxMaW5lcyhhbW91bnQsIHN1cHByZXNzRXZlbnQpLFxuICAgICAgdGhpcy5fdmlld3BvcnRFbGVtZW50LFxuICAgICAgdGhpcy5fdmlld3BvcnRTY3JvbGxBcmVhXG4gICAgKTtcbiAgICB0aGlzLnZpZXdwb3J0Lm9uVGhlbWVDaGFuZ2UodGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9ycyk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLnZpZXdwb3J0KTtcblxuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5vbkN1cnNvck1vdmUoKCkgPT4gdGhpcy5fcmVuZGVyU2VydmljZS5vbkN1cnNvck1vdmUoKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5vblJlc2l6ZSgoKSA9PiB0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVzaXplKHRoaXMuY29scywgdGhpcy5yb3dzKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5vbkJsdXIoKCkgPT4gdGhpcy5fcmVuZGVyU2VydmljZS5vbkJsdXIoKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5vbkZvY3VzKCgpID0+IHRoaXMuX3JlbmRlclNlcnZpY2Uub25Gb2N1cygpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uRGltZW5zaW9uc0NoYW5nZSgoKSA9PiB0aGlzLnZpZXdwb3J0LnN5bmNTY3JvbGxBcmVhKCkpKTtcblxuICAgIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShTZWxlY3Rpb25TZXJ2aWNlLFxuICAgICAgKGFtb3VudDogbnVtYmVyLCBzdXBwcmVzc0V2ZW50OiBib29sZWFuKSA9PiB0aGlzLnNjcm9sbExpbmVzKGFtb3VudCwgc3VwcHJlc3NFdmVudCksXG4gICAgICB0aGlzLmVsZW1lbnQsXG4gICAgICB0aGlzLnNjcmVlbkVsZW1lbnQpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSVNlbGVjdGlvblNlcnZpY2UsIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fc2VsZWN0aW9uU2VydmljZS5vblNlbGVjdGlvbkNoYW5nZSgoKSA9PiB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uub25SZWRyYXdSZXF1ZXN0KGUgPT4gdGhpcy5fcmVuZGVyU2VydmljZS5vblNlbGVjdGlvbkNoYW5nZWQoZS5zdGFydCwgZS5lbmQsIGUuY29sdW1uU2VsZWN0TW9kZSkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uub25MaW51eE1vdXNlU2VsZWN0aW9uKHRleHQgPT4ge1xuICAgICAgLy8gSWYgdGhlcmUncyBhIG5ldyBzZWxlY3Rpb24sIHB1dCBpdCBpbnRvIHRoZSB0ZXh0YXJlYSwgZm9jdXMgYW5kIHNlbGVjdCBpdFxuICAgICAgLy8gaW4gb3JkZXIgdG8gcmVnaXN0ZXIgaXQgYXMgYSBzZWxlY3Rpb24gb24gdGhlIE9TLiBUaGlzIGV2ZW50IGlzIGZpcmVkXG4gICAgICAvLyBvbmx5IG9uIExpbnV4IHRvIGVuYWJsZSBtaWRkbGUgY2xpY2sgdG8gcGFzdGUgc2VsZWN0aW9uLlxuICAgICAgdGhpcy50ZXh0YXJlYS52YWx1ZSA9IHRleHQ7XG4gICAgICB0aGlzLnRleHRhcmVhLmZvY3VzKCk7XG4gICAgICB0aGlzLnRleHRhcmVhLnNlbGVjdCgpO1xuICAgIH0pKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMub25TY3JvbGwoKCkgPT4ge1xuICAgICAgdGhpcy52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpO1xuICAgICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZS5yZWZyZXNoKCk7XG4gICAgfSkpO1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuX3ZpZXdwb3J0RWxlbWVudCwgJ3Njcm9sbCcsICgpID0+IHRoaXMuX3NlbGVjdGlvblNlcnZpY2UucmVmcmVzaCgpKSk7XG5cbiAgICB0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoTW91c2Vab25lTWFuYWdlciwgdGhpcy5lbGVtZW50LCB0aGlzLnNjcmVlbkVsZW1lbnQpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fbW91c2Vab25lTWFuYWdlcik7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9uU2Nyb2xsKCgpID0+IHRoaXMuX21vdXNlWm9uZU1hbmFnZXIuY2xlYXJBbGwoKSkpO1xuICAgIHRoaXMubGlua2lmaWVyLmF0dGFjaFRvRG9tKHRoaXMuZWxlbWVudCwgdGhpcy5fbW91c2Vab25lTWFuYWdlcik7XG5cbiAgICAvLyBUaGlzIGV2ZW50IGxpc3RlbmVyIG11c3QgYmUgcmVnaXN0ZXJlZCBhZnRyZSBNb3VzZVpvbmVNYW5hZ2VyIGlzIGNyZWF0ZWRcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLmVsZW1lbnQsICdtb3VzZWRvd24nLCAoZTogTW91c2VFdmVudCkgPT4gdGhpcy5fc2VsZWN0aW9uU2VydmljZS5vbk1vdXNlRG93bihlKSkpO1xuXG4gICAgLy8gYXBwbHkgbW91c2UgZXZlbnQgY2xhc3NlcyBzZXQgYnkgZXNjYXBlIGNvZGVzIGJlZm9yZSB0ZXJtaW5hbCB3YXMgYXR0YWNoZWRcbiAgICBpZiAodGhpcy5tb3VzZUV2ZW50cykge1xuICAgICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZS5kaXNhYmxlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZW5hYmxlLW1vdXNlLWV2ZW50cycpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmVuYWJsZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZSkge1xuICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgbXVzdCBiZSBkb25lICphZnRlciogdGhlIHJlbmRlcmVyIGlzIGNyZWF0ZWQgaW4gb3JkZXIgdG9cbiAgICAgIC8vIGVuc3VyZSB0aGUgY29ycmVjdCBvcmRlciBvZiB0aGUgZHByY2hhbmdlIGV2ZW50XG4gICAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlciA9IG5ldyBBY2Nlc3NpYmlsaXR5TWFuYWdlcih0aGlzLCB0aGlzLl9yZW5kZXJTZXJ2aWNlKTtcbiAgICB9XG5cbiAgICAvLyBNZWFzdXJlIHRoZSBjaGFyYWN0ZXIgc2l6ZVxuICAgIHRoaXMuX2NoYXJTaXplU2VydmljZS5tZWFzdXJlKCk7XG5cbiAgICAvLyBTZXR1cCBsb29wIHRoYXQgZHJhd3MgdG8gc2NyZWVuXG4gICAgdGhpcy5yZWZyZXNoKDAsIHRoaXMucm93cyAtIDEpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBnbG9iYWwgYWN0aW9ucyB0aGF0IG5lZWQgdG8gYmUgdGFrZW4gb24gdGhlIGRvY3VtZW50LlxuICAgIHRoaXMuX2luaXRHbG9iYWwoKTtcblxuICAgIC8vIExpc3RlbiBmb3IgbW91c2UgZXZlbnRzIGFuZCB0cmFuc2xhdGVcbiAgICAvLyB0aGVtIGludG8gdGVybWluYWwgbW91c2UgcHJvdG9jb2xzLlxuICAgIHRoaXMuYmluZE1vdXNlKCk7XG4gIH1cblxuICBwcml2YXRlIF9jcmVhdGVSZW5kZXJlcigpOiBJUmVuZGVyZXIge1xuICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLnJlbmRlcmVyVHlwZSkge1xuICAgICAgY2FzZSAnY2FudmFzJzogcmV0dXJuIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFJlbmRlcmVyLCB0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzLCB0aGlzLnNjcmVlbkVsZW1lbnQsIHRoaXMubGlua2lmaWVyKTtcbiAgICAgIGNhc2UgJ2RvbSc6IHJldHVybiB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShEb21SZW5kZXJlciwgdGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9ycywgdGhpcy5lbGVtZW50LCB0aGlzLnNjcmVlbkVsZW1lbnQsIHRoaXMuX3ZpZXdwb3J0RWxlbWVudCwgdGhpcy5saW5raWZpZXIpO1xuICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgcmVuZGVyZXJUeXBlIFwiJHt0aGlzLm9wdGlvbnMucmVuZGVyZXJUeXBlfVwiYCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHRoZW1lIG9uIHRoZSByZW5kZXJlci4gVGhlIHJlbmRlcmVyIG11c3QgaGF2ZSBiZWVuIGluaXRpYWxpemVkLlxuICAgKiBAcGFyYW0gdGhlbWUgVGhlIHRoZW1lIHRvIHNldC5cbiAgICovXG4gIHByaXZhdGUgX3NldFRoZW1lKHRoZW1lOiBJVGhlbWUpOiB2b2lkIHtcbiAgICB0aGlzLl90aGVtZSA9IHRoZW1lO1xuICAgIHRoaXMuX2NvbG9yTWFuYWdlcj8uc2V0VGhlbWUodGhlbWUpO1xuICAgIHRoaXMuX3JlbmRlclNlcnZpY2U/LnNldENvbG9ycyh0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzKTtcbiAgICB0aGlzLnZpZXdwb3J0Py5vblRoZW1lQ2hhbmdlKHRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJpbmQgY2VydGFpbiBtb3VzZSBldmVudHMgdG8gdGhlIHRlcm1pbmFsLlxuICAgKiBCeSBkZWZhdWx0IG9ubHkgMyBidXR0b24gKyB3aGVlbCB1cC9kb3duIGlzIGF0aXZhdGVkLiBGb3IgaGlnaGVyIGJ1dHRvbnNcbiAgICogbm8gbW91c2UgcmVwb3J0IHdpbGwgYmUgY3JlYXRlZC4gVHlwaWNhbGx5IHRoZSBzdGFuZGFyZCBhY3Rpb25zIHdpbGwgYmUgYWN0aXZlLlxuICAgKlxuICAgKiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIG5vdCB0byBlbmFibGUgc3VwcG9ydCBmb3IgaGlnaGVyIGJ1dHRvbnMvd2hlZWw6XG4gICAqIC0gQnV0dG9uIDQgYW5kIDUgYXJlIHR5cGljYWxseSB1c2VkIGZvciBoaXN0b3J5IGJhY2sgYW5kIGZvcndhcmQgbmF2aWdhdGlvbixcbiAgICogICB0aGVyZSBpcyBubyBzdHJhaWdodCBmb3J3YXJkIHdheSB0byBzdXByZXNzL2ludGVyY2VwdCB0aG9zZSBzdGFuZGFyZCBhY3Rpb25zLlxuICAgKiAtIFN1cHBvcnQgZm9yIGhpZ2hlciBidXR0b25zIGRvZXMgbm90IHdvcmsgaW4gc29tZSBwbGF0Zm9ybS9icm93c2VyIGNvbWJpbmF0aW9ucy5cbiAgICogLSBMZWZ0L3JpZ2h0IHdoZWVsIHdhcyBub3QgdGVzdGVkLlxuICAgKiAtIEVtdWxhdG9ycyB2YXJ5IGluIG1vdXNlIGJ1dHRvbiBzdXBwb3J0LCB0eXBpY2FsbHkgb25seSAzIGJ1dHRvbnMgYW5kXG4gICAqICAgd2hlZWwgdXAvZG93biB3b3JrIHJlbGlhYmxlLlxuICAgKlxuICAgKiBUT0RPOiBNb3ZlIG1vdXNlIGV2ZW50IGNvZGUgaW50byBpdHMgb3duIGZpbGUuXG4gICAqL1xuICBwdWJsaWMgYmluZE1vdXNlKCk6IHZvaWQge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGNvbnN0IGVsID0gdGhpcy5lbGVtZW50O1xuXG4gICAgLy8gc2VuZCBldmVudCB0byBDb3JlTW91c2VTZXJ2aWNlXG4gICAgZnVuY3Rpb24gc2VuZEV2ZW50KGV2OiBNb3VzZUV2ZW50IHwgV2hlZWxFdmVudCk6IGJvb2xlYW4ge1xuICAgICAgbGV0IHBvcztcblxuICAgICAgLy8gZ2V0IG1vdXNlIGNvb3JkaW5hdGVzXG4gICAgICBwb3MgPSBzZWxmLl9tb3VzZVNlcnZpY2UuZ2V0UmF3Qnl0ZUNvb3Jkcyhldiwgc2VsZi5zY3JlZW5FbGVtZW50LCBzZWxmLmNvbHMsIHNlbGYucm93cyk7XG4gICAgICBpZiAoIXBvcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGxldCBidXQ6IENvcmVNb3VzZUJ1dHRvbjtcbiAgICAgIGxldCBhY3Rpb246IENvcmVNb3VzZUFjdGlvbjtcbiAgICAgIHN3aXRjaCAoKDxhbnk+ZXYpLm92ZXJyaWRlVHlwZSB8fCBldi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ21vdXNlbW92ZSc6XG4gICAgICAgICAgYWN0aW9uID0gQ29yZU1vdXNlQWN0aW9uLk1PVkU7XG4gICAgICAgICAgaWYgKGV2LmJ1dHRvbnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gYnV0dG9ucyBpcyBub3Qgc3VwcG9ydGVkIG9uIG1hY09TLCB0cnkgdG8gZ2V0IGEgdmFsdWUgZnJvbSBidXR0b24gaW5zdGVhZFxuICAgICAgICAgICAgYnV0ID0gQ29yZU1vdXNlQnV0dG9uLk5PTkU7XG4gICAgICAgICAgICBpZiAoZXYuYnV0dG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgYnV0ID0gZXYuYnV0dG9uIDwgMyA/IGV2LmJ1dHRvbiA6IENvcmVNb3VzZUJ1dHRvbi5OT05FO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBhY2NvcmRpbmcgdG8gTUROIGJ1dHRvbnMgb25seSByZXBvcnRzIHVwIHRvIGJ1dHRvbiA1IChBVVgyKVxuICAgICAgICAgICAgYnV0ID0gZXYuYnV0dG9ucyAmIDEgPyBDb3JlTW91c2VCdXR0b24uTEVGVCA6XG4gICAgICAgICAgICAgICAgICBldi5idXR0b25zICYgNCA/IENvcmVNb3VzZUJ1dHRvbi5NSURETEUgOlxuICAgICAgICAgICAgICAgICAgZXYuYnV0dG9ucyAmIDIgPyBDb3JlTW91c2VCdXR0b24uUklHSFQgOlxuICAgICAgICAgICAgICAgICAgQ29yZU1vdXNlQnV0dG9uLk5PTkU7IC8vIGZhbGxiYWNrIHRvIE5PTkVcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21vdXNldXAnOlxuICAgICAgICAgIGFjdGlvbiA9IENvcmVNb3VzZUFjdGlvbi5VUDtcbiAgICAgICAgICBidXQgPSBldi5idXR0b24gPCAzID8gZXYuYnV0dG9uIDogQ29yZU1vdXNlQnV0dG9uLk5PTkU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21vdXNlZG93bic6XG4gICAgICAgICAgYWN0aW9uID0gQ29yZU1vdXNlQWN0aW9uLkRPV047XG4gICAgICAgICAgYnV0ID0gZXYuYnV0dG9uIDwgMyA/IGV2LmJ1dHRvbiA6IENvcmVNb3VzZUJ1dHRvbi5OT05FO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd3aGVlbCc6XG4gICAgICAgICAgLy8gb25seSBVUC9ET1dOIHdoZWVsIGV2ZW50cyBhcmUgcmVzcGVjdGVkXG4gICAgICAgICAgaWYgKChldiBhcyBXaGVlbEV2ZW50KS5kZWx0YVkgIT09IDApIHtcbiAgICAgICAgICAgIGFjdGlvbiA9IChldiBhcyBXaGVlbEV2ZW50KS5kZWx0YVkgPCAwID8gQ29yZU1vdXNlQWN0aW9uLlVQIDogQ29yZU1vdXNlQWN0aW9uLkRPV047XG4gICAgICAgICAgfVxuICAgICAgICAgIGJ1dCA9IENvcmVNb3VzZUJ1dHRvbi5XSEVFTDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAvLyBkb250IGhhbmRsZSBvdGhlciBldmVudCB0eXBlcyBieSBhY2NpZGVudFxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gZXhpdCBpZiB3ZSBjYW5ub3QgZGV0ZXJtaW5lIHZhbGlkIGJ1dHRvbi9hY3Rpb24gdmFsdWVzXG4gICAgICAvLyBkbyBub3RoaW5nIGZvciBoaWdoZXIgYnV0dG9ucyB0aGFuIHdoZWVsXG4gICAgICBpZiAoYWN0aW9uID09PSB1bmRlZmluZWQgfHwgYnV0ID09PSB1bmRlZmluZWQgfHwgYnV0ID4gQ29yZU1vdXNlQnV0dG9uLldIRUVMKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGYuX2NvcmVNb3VzZVNlcnZpY2UudHJpZ2dlck1vdXNlRXZlbnQoe1xuICAgICAgICBjb2w6IHBvcy54IC0gMzMsIC8vIEZJWE1FOiB3aHkgLTMzIGhlcmU/XG4gICAgICAgIHJvdzogcG9zLnkgLSAzMyxcbiAgICAgICAgYnV0dG9uOiBidXQsXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgY3RybDogZXYuY3RybEtleSxcbiAgICAgICAgYWx0OiBldi5hbHRLZXksXG4gICAgICAgIHNoaWZ0OiBldi5zaGlmdEtleVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXZlbnQgbGlzdGVuZXIgc3RhdGUgaGFuZGxpbmcuXG4gICAgICogV2UgbGlzdGVuIHRvIHRoZSBvblByb3RvY29sQ2hhbmdlIGV2ZW50IG9mIENvcmVNb3VzZVNlcnZpY2UgYW5kIHB1dFxuICAgICAqIHJlcXVlc3RlZCBsaXN0ZW5lcnMgaW4gYHJlcXVlc3RlZEV2ZW50c2AuIFdpdGggdGhpcyB0aGUgbGlzdGVuZXJzXG4gICAgICogaGF2ZSBhbGwgYml0cyB0byBkbyB0aGUgZXZlbnQgbGlzdGVuZXIganVnZ2xpbmcuXG4gICAgICogTm90ZTogJ21vdXNlZG93bicgY3VycmVudGx5IGlzIFwiYWx3YXlzIG9uXCIgYW5kIG5vdCBtYW5hZ2VkXG4gICAgICogYnkgb25Qcm90b2NvbENoYW5nZS5cbiAgICAgKi9cbiAgICBjb25zdCByZXF1ZXN0ZWRFdmVudHM6IHtba2V5OiBzdHJpbmddOiAoKGV2OiBFdmVudCkgPT4gdm9pZCkgfCBudWxsfSA9IHtcbiAgICAgIG1vdXNldXA6IG51bGwsXG4gICAgICB3aGVlbDogbnVsbCxcbiAgICAgIG1vdXNlZHJhZzogbnVsbCxcbiAgICAgIG1vdXNlbW92ZTogbnVsbFxuICAgIH07XG4gICAgY29uc3QgZXZlbnRMaXN0ZW5lcnM6IHtba2V5OiBzdHJpbmddOiAoZXY6IEV2ZW50KSA9PiB2b2lkfSA9IHtcbiAgICAgIG1vdXNldXA6IChldjogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBzZW5kRXZlbnQoZXYpO1xuICAgICAgICBpZiAoIWV2LmJ1dHRvbnMpIHtcbiAgICAgICAgICAvLyBpZiBubyBvdGhlciBidXR0b24gaXMgaGVsZCByZW1vdmUgZ2xvYmFsIGhhbmRsZXJzXG4gICAgICAgICAgdGhpcy5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwKTtcbiAgICAgICAgICBpZiAocmVxdWVzdGVkRXZlbnRzLm1vdXNlZHJhZykge1xuICAgICAgICAgICAgdGhpcy5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgcmVxdWVzdGVkRXZlbnRzLm1vdXNlZHJhZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldik7XG4gICAgICB9LFxuICAgICAgd2hlZWw6IChldjogV2hlZWxFdmVudCkgPT4ge1xuICAgICAgICBzZW5kRXZlbnQoZXYpO1xuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5jZWwoZXYpO1xuICAgICAgfSxcbiAgICAgIG1vdXNlZHJhZzogKGV2OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIC8vIGRlYWwgb25seSB3aXRoIG1vdmUgd2hpbGUgYSBidXR0b24gaXMgaGVsZFxuICAgICAgICBpZiAoZXYuYnV0dG9ucykge1xuICAgICAgICAgIHNlbmRFdmVudChldik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBtb3VzZW1vdmU6IChldjogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAvLyBkZWFsIG9ubHkgd2l0aCBtb3ZlIHdpdGhvdXQgYW55IGJ1dHRvblxuICAgICAgICBpZiAoIWV2LmJ1dHRvbnMpIHtcbiAgICAgICAgICBzZW5kRXZlbnQoZXYpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLm9uUHJvdG9jb2xDaGFuZ2UoZXZlbnRzID0+IHtcbiAgICAgIC8vIGFwcGx5IGdsb2JhbCBjaGFuZ2VzIG9uIGV2ZW50c1xuICAgICAgdGhpcy5tb3VzZUV2ZW50cyA9IGV2ZW50cztcbiAgICAgIGlmIChldmVudHMpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dMZXZlbCA9PT0gJ2RlYnVnJykge1xuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ0JpbmRpbmcgdG8gbW91c2UgZXZlbnRzOicsIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuZXhwbGFpbkV2ZW50cyhldmVudHMpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZW5hYmxlLW1vdXNlLWV2ZW50cycpO1xuICAgICAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmRpc2FibGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1VuYmluZGluZyBmcm9tIG1vdXNlIGV2ZW50cy4nKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2VuYWJsZS1tb3VzZS1ldmVudHMnKTtcbiAgICAgICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZS5lbmFibGUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gYWRkL3JlbW92ZSBoYW5kbGVycyBmcm9tIHJlcXVlc3RlZEV2ZW50c1xuXG4gICAgICBpZiAoIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuTU9WRSkpIHtcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgcmVxdWVzdGVkRXZlbnRzLm1vdXNlbW92ZSk7XG4gICAgICAgIHJlcXVlc3RlZEV2ZW50cy5tb3VzZW1vdmUgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICghcmVxdWVzdGVkRXZlbnRzLm1vdXNlbW92ZSkge1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBldmVudExpc3RlbmVycy5tb3VzZW1vdmUpO1xuICAgICAgICByZXF1ZXN0ZWRFdmVudHMubW91c2Vtb3ZlID0gZXZlbnRMaXN0ZW5lcnMubW91c2Vtb3ZlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuV0hFRUwpKSB7XG4gICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgcmVxdWVzdGVkRXZlbnRzLndoZWVsKTtcbiAgICAgICAgcmVxdWVzdGVkRXZlbnRzLndoZWVsID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoIXJlcXVlc3RlZEV2ZW50cy53aGVlbCkge1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGV2ZW50TGlzdGVuZXJzLndoZWVsKTtcbiAgICAgICAgcmVxdWVzdGVkRXZlbnRzLndoZWVsID0gZXZlbnRMaXN0ZW5lcnMud2hlZWw7XG4gICAgICB9XG5cbiAgICAgIGlmICghKGV2ZW50cyAmIENvcmVNb3VzZUV2ZW50VHlwZS5VUCkpIHtcbiAgICAgICAgdGhpcy5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwKTtcbiAgICAgICAgcmVxdWVzdGVkRXZlbnRzLm1vdXNldXAgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICghcmVxdWVzdGVkRXZlbnRzLm1vdXNldXApIHtcbiAgICAgICAgcmVxdWVzdGVkRXZlbnRzLm1vdXNldXAgPSBldmVudExpc3RlbmVycy5tb3VzZXVwO1xuICAgICAgfVxuXG4gICAgICBpZiAoIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuRFJBRykpIHtcbiAgICAgICAgdGhpcy5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgcmVxdWVzdGVkRXZlbnRzLm1vdXNlZHJhZyk7XG4gICAgICAgIHJlcXVlc3RlZEV2ZW50cy5tb3VzZWRyYWcgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICghcmVxdWVzdGVkRXZlbnRzLm1vdXNlZHJhZykge1xuICAgICAgICByZXF1ZXN0ZWRFdmVudHMubW91c2VkcmFnID0gZXZlbnRMaXN0ZW5lcnMubW91c2VkcmFnO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIGZvcmNlIGluaXRpYWwgb25Qcm90b2NvbENoYW5nZSBzbyB3ZSBkb250IG1pc3MgZWFybHkgbW91c2UgcmVxdWVzdHNcbiAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sID0gdGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbDtcblxuICAgIC8qKlxuICAgICAqIFwiQWx3YXlzIG9uXCIgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAqL1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKGVsLCAnbW91c2Vkb3duJywgKGV2OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5mb2N1cygpO1xuXG4gICAgICAvLyBEb24ndCBzZW5kIHRoZSBtb3VzZSBidXR0b24gdG8gdGhlIHB0eSBpZiBtb3VzZSBldmVudHMgYXJlIGRpc2FibGVkIG9yXG4gICAgICAvLyBpZiB0aGUgc2VsZWN0aW9uIG1hbmFnZXIgaXMgaGF2aW5nIHNlbGVjdGlvbiBmb3JjZWQgKGllLiBhIG1vZGlmaWVyIGlzXG4gICAgICAvLyBoZWxkKS5cbiAgICAgIGlmICghdGhpcy5tb3VzZUV2ZW50cyB8fCB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNob3VsZEZvcmNlU2VsZWN0aW9uKGV2KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlbmRFdmVudChldik7XG5cbiAgICAgIC8vIFJlZ2lzdGVyIGFkZGl0aW9uYWwgZ2xvYmFsIGhhbmRsZXJzIHdoaWNoIHNob3VsZCBrZWVwIHJlcG9ydGluZyBvdXRzaWRlXG4gICAgICAvLyBvZiB0aGUgdGVybWluYWwgZWxlbWVudC5cbiAgICAgIC8vIE5vdGU6IE90aGVyIGVtdWxhdG9ycyBhbHNvIGRvIHRoaXMgZm9yICdtb3VzZWRvd24nIHdoaWxlIGEgYnV0dG9uXG4gICAgICAvLyBpcyBoZWxkLCB3ZSBjdXJyZW50bHkgbGltaXQgJ21vdXNlZG93bicgdG8gdGhlIHRlcm1pbmFsIG9ubHkuXG4gICAgICBpZiAocmVxdWVzdGVkRXZlbnRzLm1vdXNldXApIHtcbiAgICAgICAgdGhpcy5fZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXF1ZXN0ZWRFdmVudHMubW91c2VkcmFnKSB7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZWRyYWcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jYW5jZWwoZXYpO1xuICAgIH0pKTtcblxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKGVsLCAnd2hlZWwnLCAoZXY6IFdoZWVsRXZlbnQpID0+IHtcbiAgICAgIGlmICghcmVxdWVzdGVkRXZlbnRzLndoZWVsKSB7XG4gICAgICAgIC8vIENvbnZlcnQgd2hlZWwgZXZlbnRzIGludG8gdXAvZG93biBldmVudHMgd2hlbiB0aGUgYnVmZmVyIGRvZXMgbm90IGhhdmUgc2Nyb2xsYmFjaywgdGhpc1xuICAgICAgICAvLyBlbmFibGVzIHNjcm9sbGluZyBpbiBhcHBzIGhvc3RlZCBpbiB0aGUgYWx0IGJ1ZmZlciBzdWNoIGFzIHZpbSBvciB0bXV4LlxuICAgICAgICBpZiAoIXRoaXMuYnVmZmVyLmhhc1Njcm9sbGJhY2spIHtcbiAgICAgICAgICBjb25zdCBhbW91bnQgPSB0aGlzLnZpZXdwb3J0LmdldExpbmVzU2Nyb2xsZWQoZXYpO1xuXG4gICAgICAgICAgLy8gRG8gbm90aGluZyBpZiB0aGVyZSdzIG5vIHZlcnRpY2FsIHNjcm9sbFxuICAgICAgICAgIGlmIChhbW91bnQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDb25zdHJ1Y3QgYW5kIHNlbmQgc2VxdWVuY2VzXG4gICAgICAgICAgY29uc3Qgc2VxdWVuY2UgPSBDMC5FU0MgKyAodGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyA/ICdPJyA6ICdbJykgKyAoIGV2LmRlbHRhWSA8IDAgPyAnQScgOiAnQicpO1xuICAgICAgICAgIGxldCBkYXRhID0gJyc7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLmFicyhhbW91bnQpOyBpKyspIHtcbiAgICAgICAgICAgIGRhdGEgKz0gc2VxdWVuY2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoZGF0YSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIC8vIGFsbG93IHdoZWVsIHNjcm9sbGluZyBpblxuICAgIC8vIHRoZSBzaGVsbCBmb3IgZXhhbXBsZVxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKGVsLCAnd2hlZWwnLCAoZXY6IFdoZWVsRXZlbnQpID0+IHtcbiAgICAgIGlmIChyZXF1ZXN0ZWRFdmVudHMud2hlZWwpIHJldHVybjtcbiAgICAgIGlmICghdGhpcy52aWV3cG9ydC5vbldoZWVsKGV2KSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5jZWwoZXYpO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKGVsLCAndG91Y2hzdGFydCcsIChldjogVG91Y2hFdmVudCkgPT4ge1xuICAgICAgaWYgKHRoaXMubW91c2VFdmVudHMpIHJldHVybjtcbiAgICAgIHRoaXMudmlld3BvcnQub25Ub3VjaFN0YXJ0KGV2KTtcbiAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldik7XG4gICAgfSkpO1xuXG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIoZWwsICd0b3VjaG1vdmUnLCAoZXY6IFRvdWNoRXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLm1vdXNlRXZlbnRzKSByZXR1cm47XG4gICAgICBpZiAoIXRoaXMudmlld3BvcnQub25Ub3VjaE1vdmUoZXYpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldik7XG4gICAgICB9XG4gICAgfSkpO1xuICB9XG5cblxuICAvKipcbiAgICogVGVsbHMgdGhlIHJlbmRlcmVyIHRvIHJlZnJlc2ggdGVybWluYWwgY29udGVudCBiZXR3ZWVuIHR3byByb3dzIChpbmNsdXNpdmUpIGF0IHRoZSBuZXh0XG4gICAqIG9wcG9ydHVuaXR5LlxuICAgKiBAcGFyYW0gc3RhcnQgVGhlIHJvdyB0byBzdGFydCBmcm9tIChiZXR3ZWVuIDAgYW5kIHRoaXMucm93cyAtIDEpLlxuICAgKiBAcGFyYW0gZW5kIFRoZSByb3cgdG8gZW5kIGF0IChiZXR3ZWVuIHN0YXJ0IGFuZCB0aGlzLnJvd3MgLSAxKS5cbiAgICovXG4gIHB1YmxpYyByZWZyZXNoKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyU2VydmljZT8ucmVmcmVzaFJvd3Moc3RhcnQsIGVuZCk7XG4gIH1cblxuICAvKipcbiAgICogUXVldWVzIGxpbmtpZmljYXRpb24gZm9yIHRoZSBzcGVjaWZpZWQgcm93cy5cbiAgICogQHBhcmFtIHN0YXJ0IFRoZSByb3cgdG8gc3RhcnQgZnJvbSAoYmV0d2VlbiAwIGFuZCB0aGlzLnJvd3MgLSAxKS5cbiAgICogQHBhcmFtIGVuZCBUaGUgcm93IHRvIGVuZCBhdCAoYmV0d2VlbiBzdGFydCBhbmQgdGhpcy5yb3dzIC0gMSkuXG4gICAqL1xuICBwcml2YXRlIF9xdWV1ZUxpbmtpZmljYXRpb24oc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmxpbmtpZmllcj8ubGlua2lmeVJvd3Moc3RhcnQsIGVuZCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hhbmdlIHRoZSBjdXJzb3Igc3R5bGUgZm9yIGRpZmZlcmVudCBzZWxlY3Rpb24gbW9kZXNcbiAgICovXG4gIHB1YmxpYyB1cGRhdGVDdXJzb3JTdHlsZShldjogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlICYmIHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2hvdWxkQ29sdW1uU2VsZWN0KGV2KSkge1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NvbHVtbi1zZWxlY3QnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbHVtbi1zZWxlY3QnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzcGxheSB0aGUgY3Vyc29yIGVsZW1lbnRcbiAgICovXG4gIHB1YmxpYyBzaG93Q3Vyc29yKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JJbml0aWFsaXplZCkge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICB0aGlzLnJlZnJlc2godGhpcy5idWZmZXIueSwgdGhpcy5idWZmZXIueSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbCB0aGUgdGVybWluYWwgZG93biAxIHJvdywgY3JlYXRpbmcgYSBibGFuayBsaW5lLlxuICAgKiBAcGFyYW0gaXNXcmFwcGVkIFdoZXRoZXIgdGhlIG5ldyBsaW5lIGlzIHdyYXBwZWQgZnJvbSB0aGUgcHJldmlvdXMgbGluZS5cbiAgICovXG4gIHB1YmxpYyBzY3JvbGwoZXJhc2VBdHRyOiBJQXR0cmlidXRlRGF0YSwgaXNXcmFwcGVkOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICBsZXQgbmV3TGluZTogSUJ1ZmZlckxpbmU7XG4gICAgbmV3TGluZSA9IHRoaXMuX2JsYW5rTGluZTtcbiAgICBpZiAoIW5ld0xpbmUgfHwgbmV3TGluZS5sZW5ndGggIT09IHRoaXMuY29scyB8fCBuZXdMaW5lLmdldEZnKDApICE9PSBlcmFzZUF0dHIuZmcgfHwgbmV3TGluZS5nZXRCZygwKSAhPT0gZXJhc2VBdHRyLmJnKSB7XG4gICAgICBuZXdMaW5lID0gdGhpcy5idWZmZXIuZ2V0QmxhbmtMaW5lKGVyYXNlQXR0ciwgaXNXcmFwcGVkKTtcbiAgICAgIHRoaXMuX2JsYW5rTGluZSA9IG5ld0xpbmU7XG4gICAgfVxuICAgIG5ld0xpbmUuaXNXcmFwcGVkID0gaXNXcmFwcGVkO1xuXG4gICAgY29uc3QgdG9wUm93ID0gdGhpcy5idWZmZXIueWJhc2UgKyB0aGlzLmJ1ZmZlci5zY3JvbGxUb3A7XG4gICAgY29uc3QgYm90dG9tUm93ID0gdGhpcy5idWZmZXIueWJhc2UgKyB0aGlzLmJ1ZmZlci5zY3JvbGxCb3R0b207XG5cbiAgICBpZiAodGhpcy5idWZmZXIuc2Nyb2xsVG9wID09PSAwKSB7XG4gICAgICAvLyBEZXRlcm1pbmUgd2hldGhlciB0aGUgYnVmZmVyIGlzIGdvaW5nIHRvIGJlIHRyaW1tZWQgYWZ0ZXIgaW5zZXJ0aW9uLlxuICAgICAgY29uc3Qgd2lsbEJ1ZmZlckJlVHJpbW1lZCA9IHRoaXMuYnVmZmVyLmxpbmVzLmlzRnVsbDtcblxuICAgICAgLy8gSW5zZXJ0IHRoZSBsaW5lIHVzaW5nIHRoZSBmYXN0ZXN0IG1ldGhvZFxuICAgICAgaWYgKGJvdHRvbVJvdyA9PT0gdGhpcy5idWZmZXIubGluZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICBpZiAod2lsbEJ1ZmZlckJlVHJpbW1lZCkge1xuICAgICAgICAgIHRoaXMuYnVmZmVyLmxpbmVzLnJlY3ljbGUoKS5jb3B5RnJvbShuZXdMaW5lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlci5saW5lcy5wdXNoKG5ld0xpbmUuY2xvbmUoKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYnVmZmVyLmxpbmVzLnNwbGljZShib3R0b21Sb3cgKyAxLCAwLCBuZXdMaW5lLmNsb25lKCkpO1xuICAgICAgfVxuXG4gICAgICAvLyBPbmx5IGFkanVzdCB5YmFzZSBhbmQgeWRpc3Agd2hlbiB0aGUgYnVmZmVyIGlzIG5vdCB0cmltbWVkXG4gICAgICBpZiAoIXdpbGxCdWZmZXJCZVRyaW1tZWQpIHtcbiAgICAgICAgdGhpcy5idWZmZXIueWJhc2UrKztcbiAgICAgICAgLy8gT25seSBzY3JvbGwgdGhlIHlkaXNwIHdpdGggeWJhc2UgaWYgdGhlIHVzZXIgaGFzIG5vdCBzY3JvbGxlZCB1cFxuICAgICAgICBpZiAoIXRoaXMuX3VzZXJTY3JvbGxpbmcpIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlci55ZGlzcCsrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXaGVuIHRoZSBidWZmZXIgaXMgZnVsbCBhbmQgdGhlIHVzZXIgaGFzIHNjcm9sbGVkIHVwLCBrZWVwIHRoZSB0ZXh0XG4gICAgICAgIC8vIHN0YWJsZSB1bmxlc3MgeWRpc3AgaXMgcmlnaHQgYXQgdGhlIHRvcFxuICAgICAgICBpZiAodGhpcy5fdXNlclNjcm9sbGluZykge1xuICAgICAgICAgIHRoaXMuYnVmZmVyLnlkaXNwID0gTWF0aC5tYXgodGhpcy5idWZmZXIueWRpc3AgLSAxLCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzY3JvbGxUb3AgaXMgbm9uLXplcm8gd2hpY2ggbWVhbnMgbm8gbGluZSB3aWxsIGJlIGdvaW5nIHRvIHRoZVxuICAgICAgLy8gc2Nyb2xsYmFjaywgaW5zdGVhZCB3ZSBjYW4ganVzdCBzaGlmdCB0aGVtIGluLXBsYWNlLlxuICAgICAgY29uc3Qgc2Nyb2xsUmVnaW9uSGVpZ2h0ID0gYm90dG9tUm93IC0gdG9wUm93ICsgMS8qYXMgaXQncyB6ZXJvLWJhc2VkKi87XG4gICAgICB0aGlzLmJ1ZmZlci5saW5lcy5zaGlmdEVsZW1lbnRzKHRvcFJvdyArIDEsIHNjcm9sbFJlZ2lvbkhlaWdodCAtIDEsIC0xKTtcbiAgICAgIHRoaXMuYnVmZmVyLmxpbmVzLnNldChib3R0b21Sb3csIG5ld0xpbmUuY2xvbmUoKSk7XG4gICAgfVxuXG4gICAgLy8gTW92ZSB0aGUgdmlld3BvcnQgdG8gdGhlIGJvdHRvbSBvZiB0aGUgYnVmZmVyIHVubGVzcyB0aGUgdXNlciBpc1xuICAgIC8vIHNjcm9sbGluZy5cbiAgICBpZiAoIXRoaXMuX3VzZXJTY3JvbGxpbmcpIHtcbiAgICAgIHRoaXMuYnVmZmVyLnlkaXNwID0gdGhpcy5idWZmZXIueWJhc2U7XG4gICAgfVxuXG4gICAgLy8gRmxhZyByb3dzIHRoYXQgbmVlZCB1cGRhdGluZ1xuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLmJ1ZmZlci5zY3JvbGxUb3AsIHRoaXMuYnVmZmVyLnNjcm9sbEJvdHRvbSk7XG5cbiAgICB0aGlzLl9vblNjcm9sbC5maXJlKHRoaXMuYnVmZmVyLnlkaXNwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGwgdGhlIGRpc3BsYXkgb2YgdGhlIHRlcm1pbmFsXG4gICAqIEBwYXJhbSBkaXNwIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gc2Nyb2xsIGRvd24gKG5lZ2F0aXZlIHNjcm9sbCB1cCkuXG4gICAqIEBwYXJhbSBzdXBwcmVzc1Njcm9sbEV2ZW50IERvbid0IGVtaXQgdGhlIHNjcm9sbCBldmVudCBhcyBzY3JvbGxMaW5lcy4gVGhpcyBpcyB1c2VkXG4gICAqIHRvIGF2b2lkIHVud2FudGVkIGV2ZW50cyBiZWluZyBoYW5kbGVkIGJ5IHRoZSB2aWV3cG9ydCB3aGVuIHRoZSBldmVudCB3YXMgdHJpZ2dlcmVkIGZyb20gdGhlXG4gICAqIHZpZXdwb3J0IG9yaWdpbmFsbHkuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsTGluZXMoZGlzcDogbnVtYmVyLCBzdXBwcmVzc1Njcm9sbEV2ZW50PzogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChkaXNwIDwgMCkge1xuICAgICAgaWYgKHRoaXMuYnVmZmVyLnlkaXNwID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3VzZXJTY3JvbGxpbmcgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoZGlzcCArIHRoaXMuYnVmZmVyLnlkaXNwID49IHRoaXMuYnVmZmVyLnliYXNlKSB7XG4gICAgICB0aGlzLl91c2VyU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkWWRpc3AgPSB0aGlzLmJ1ZmZlci55ZGlzcDtcbiAgICB0aGlzLmJ1ZmZlci55ZGlzcCA9IE1hdGgubWF4KE1hdGgubWluKHRoaXMuYnVmZmVyLnlkaXNwICsgZGlzcCwgdGhpcy5idWZmZXIueWJhc2UpLCAwKTtcblxuICAgIC8vIE5vIGNoYW5nZSBvY2N1cnJlZCwgZG9uJ3QgdHJpZ2dlciBzY3JvbGwvcmVmcmVzaFxuICAgIGlmIChvbGRZZGlzcCA9PT0gdGhpcy5idWZmZXIueWRpc3ApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXN1cHByZXNzU2Nyb2xsRXZlbnQpIHtcbiAgICAgIHRoaXMuX29uU2Nyb2xsLmZpcmUodGhpcy5idWZmZXIueWRpc3ApO1xuICAgIH1cblxuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGwgdGhlIGRpc3BsYXkgb2YgdGhlIHRlcm1pbmFsIGJ5IGEgbnVtYmVyIG9mIHBhZ2VzLlxuICAgKiBAcGFyYW0gcGFnZUNvdW50IFRoZSBudW1iZXIgb2YgcGFnZXMgdG8gc2Nyb2xsIChuZWdhdGl2ZSBzY3JvbGxzIHVwKS5cbiAgICovXG4gIHB1YmxpYyBzY3JvbGxQYWdlcyhwYWdlQ291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuc2Nyb2xsTGluZXMocGFnZUNvdW50ICogKHRoaXMucm93cyAtIDEpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGxzIHRoZSBkaXNwbGF5IG9mIHRoZSB0ZXJtaW5hbCB0byB0aGUgdG9wLlxuICAgKi9cbiAgcHVibGljIHNjcm9sbFRvVG9wKCk6IHZvaWQge1xuICAgIHRoaXMuc2Nyb2xsTGluZXMoLXRoaXMuYnVmZmVyLnlkaXNwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGxzIHRoZSBkaXNwbGF5IG9mIHRoZSB0ZXJtaW5hbCB0byB0aGUgYm90dG9tLlxuICAgKi9cbiAgcHVibGljIHNjcm9sbFRvQm90dG9tKCk6IHZvaWQge1xuICAgIHRoaXMuc2Nyb2xsTGluZXModGhpcy5idWZmZXIueWJhc2UgLSB0aGlzLmJ1ZmZlci55ZGlzcCk7XG4gIH1cblxuICBwdWJsaWMgc2Nyb2xsVG9MaW5lKGxpbmU6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHNjcm9sbEFtb3VudCA9IGxpbmUgLSB0aGlzLmJ1ZmZlci55ZGlzcDtcbiAgICBpZiAoc2Nyb2xsQW1vdW50ICE9PSAwKSB7XG4gICAgICB0aGlzLnNjcm9sbExpbmVzKHNjcm9sbEFtb3VudCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHBhc3RlKGRhdGE6IHN0cmluZyk6IHZvaWQge1xuICAgIHBhc3RlKGRhdGEsIHRoaXMudGV4dGFyZWEsIHRoaXMuYnJhY2tldGVkUGFzdGVNb2RlLCB0aGlzLl9jb3JlU2VydmljZSk7XG4gIH1cblxuICAvKipcbiAgICogQXR0YWNoZXMgYSBjdXN0b20ga2V5IGV2ZW50IGhhbmRsZXIgd2hpY2ggaXMgcnVuIGJlZm9yZSBrZXlzIGFyZSBwcm9jZXNzZWQsXG4gICAqIGdpdmluZyBjb25zdW1lcnMgb2YgeHRlcm0uanMgdWx0aW1hdGUgY29udHJvbCBhcyB0byB3aGF0IGtleXMgc2hvdWxkIGJlXG4gICAqIHByb2Nlc3NlZCBieSB0aGUgdGVybWluYWwgYW5kIHdoYXQga2V5cyBzaG91bGQgbm90LlxuICAgKiBAcGFyYW0gY3VzdG9tS2V5RXZlbnRIYW5kbGVyIFRoZSBjdXN0b20gS2V5Ym9hcmRFdmVudCBoYW5kbGVyIHRvIGF0dGFjaC5cbiAgICogVGhpcyBpcyBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBLZXlib2FyZEV2ZW50LCBhbGxvd2luZyBjb25zdW1lcnMgdG8gc3RvcFxuICAgKiBwcm9wYWdhdGlvbiBhbmQvb3IgcHJldmVudCB0aGUgZGVmYXVsdCBhY3Rpb24uIFRoZSBmdW5jdGlvbiByZXR1cm5zIHdoZXRoZXJcbiAgICogdGhlIGV2ZW50IHNob3VsZCBiZSBwcm9jZXNzZWQgYnkgeHRlcm0uanMuXG4gICAqL1xuICBwdWJsaWMgYXR0YWNoQ3VzdG9tS2V5RXZlbnRIYW5kbGVyKGN1c3RvbUtleUV2ZW50SGFuZGxlcjogQ3VzdG9tS2V5RXZlbnRIYW5kbGVyKTogdm9pZCB7XG4gICAgdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyID0gY3VzdG9tS2V5RXZlbnRIYW5kbGVyO1xuICB9XG5cbiAgLyoqIEFkZCBoYW5kbGVyIGZvciBFU0MgZXNjYXBlIHNlcXVlbmNlLiBTZWUgeHRlcm0uZC50cyBmb3IgZGV0YWlscy4gKi9cbiAgcHVibGljIGFkZEVzY0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoKSA9PiBib29sZWFuKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIuYWRkRXNjSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEFkZCBoYW5kbGVyIGZvciBEQ1MgZXNjYXBlIHNlcXVlbmNlLiBTZWUgeHRlcm0uZC50cyBmb3IgZGV0YWlscy4gKi9cbiAgcHVibGljIGFkZERjc0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nLCBwYXJhbTogSVBhcmFtcykgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLmFkZERjc0hhbmRsZXIoaWQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBBZGQgaGFuZGxlciBmb3IgQ1NJIGVzY2FwZSBzZXF1ZW5jZS4gU2VlIHh0ZXJtLmQudHMgZm9yIGRldGFpbHMuICovXG4gIHB1YmxpYyBhZGRDc2lIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBjYWxsYmFjazogKHBhcmFtczogSVBhcmFtcykgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLmFkZENzaUhhbmRsZXIoaWQsIGNhbGxiYWNrKTtcbiAgfVxuICAvKiogQWRkIGhhbmRsZXIgZm9yIE9TQyBlc2NhcGUgc2VxdWVuY2UuIFNlZSB4dGVybS5kLnRzIGZvciBkZXRhaWxzLiAqL1xuICBwdWJsaWMgYWRkT3NjSGFuZGxlcihpZGVudDogbnVtYmVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZykgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLmFkZE9zY0hhbmRsZXIoaWRlbnQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBsaW5rIG1hdGNoZXIsIGFsbG93aW5nIGN1c3RvbSBsaW5rIHBhdHRlcm5zIHRvIGJlIG1hdGNoZWQgYW5kXG4gICAqIGhhbmRsZWQuXG4gICAqIEBwYXJhbSByZWdleCBUaGUgcmVndWxhciBleHByZXNzaW9uIHRvIHNlYXJjaCBmb3IsIHNwZWNpZmljYWxseVxuICAgKiB0aGlzIHNlYXJjaGVzIHRoZSB0ZXh0Q29udGVudCBvZiB0aGUgcm93cy4gWW91IHdpbGwgd2FudCB0byB1c2UgXFxzIHRvIG1hdGNoXG4gICAqIGEgc3BhY2UgJyAnIGNoYXJhY3RlciBmb3IgZXhhbXBsZS5cbiAgICogQHBhcmFtIGhhbmRsZXIgVGhlIGNhbGxiYWNrIHdoZW4gdGhlIGxpbmsgaXMgY2FsbGVkLlxuICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciB0aGUgbGluayBtYXRjaGVyLlxuICAgKiBAcmV0dXJuIFRoZSBJRCBvZiB0aGUgbmV3IG1hdGNoZXIsIHRoaXMgY2FuIGJlIHVzZWQgdG8gZGVyZWdpc3Rlci5cbiAgICovXG4gIHB1YmxpYyByZWdpc3RlckxpbmtNYXRjaGVyKHJlZ2V4OiBSZWdFeHAsIGhhbmRsZXI6IExpbmtNYXRjaGVySGFuZGxlciwgb3B0aW9ucz86IElMaW5rTWF0Y2hlck9wdGlvbnMpOiBudW1iZXIge1xuICAgIGNvbnN0IG1hdGNoZXJJZCA9IHRoaXMubGlua2lmaWVyLnJlZ2lzdGVyTGlua01hdGNoZXIocmVnZXgsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICByZXR1cm4gbWF0Y2hlcklkO1xuICB9XG5cbiAgLyoqXG4gICAqIERlcmVnaXN0ZXJzIGEgbGluayBtYXRjaGVyIGlmIGl0IGhhcyBiZWVuIHJlZ2lzdGVyZWQuXG4gICAqIEBwYXJhbSBtYXRjaGVySWQgVGhlIGxpbmsgbWF0Y2hlcidzIElEIChyZXR1cm5lZCBhZnRlciByZWdpc3RlcilcbiAgICovXG4gIHB1YmxpYyBkZXJlZ2lzdGVyTGlua01hdGNoZXIobWF0Y2hlcklkOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5saW5raWZpZXIuZGVyZWdpc3RlckxpbmtNYXRjaGVyKG1hdGNoZXJJZCkpIHtcbiAgICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoaGFuZGxlcjogQ2hhcmFjdGVySm9pbmVySGFuZGxlcik6IG51bWJlciB7XG4gICAgY29uc3Qgam9pbmVySWQgPSB0aGlzLl9yZW5kZXJTZXJ2aWNlLnJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGhhbmRsZXIpO1xuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICByZXR1cm4gam9pbmVySWQ7XG4gIH1cblxuICBwdWJsaWMgZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3JlbmRlclNlcnZpY2UuZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZCkpIHtcbiAgICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0IG1hcmtlcnMoKTogSU1hcmtlcltdIHtcbiAgICByZXR1cm4gdGhpcy5idWZmZXIubWFya2VycztcbiAgfVxuXG4gIHB1YmxpYyBhZGRNYXJrZXIoY3Vyc29yWU9mZnNldDogbnVtYmVyKTogSU1hcmtlciB7XG4gICAgLy8gRGlzYWxsb3cgbWFya2VycyBvbiB0aGUgYWx0IGJ1ZmZlclxuICAgIGlmICh0aGlzLmJ1ZmZlciAhPT0gdGhpcy5idWZmZXJzLm5vcm1hbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmJ1ZmZlci5hZGRNYXJrZXIodGhpcy5idWZmZXIueWJhc2UgKyB0aGlzLmJ1ZmZlci55ICsgY3Vyc29yWU9mZnNldCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB3aGV0aGVyIHRoZSB0ZXJtaW5hbCBoYXMgYW4gYWN0aXZlIHNlbGVjdGlvbi5cbiAgICovXG4gIHB1YmxpYyBoYXNTZWxlY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UgPyB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmhhc1NlbGVjdGlvbiA6IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgdGV4dCB3aXRoaW4gdGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gY29sdW1uIFRoZSBjb2x1bW4gdGhlIHNlbGVjdGlvbiBzdGFydHMgYXQuLlxuICAgKiBAcGFyYW0gcm93IFRoZSByb3cgdGhlIHNlbGVjdGlvbiBzdGFydHMgYXQuXG4gICAqIEBwYXJhbSBsZW5ndGggVGhlIGxlbmd0aCBvZiB0aGUgc2VsZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIHNlbGVjdChjb2x1bW46IG51bWJlciwgcm93OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZXRTZWxlY3Rpb24oY29sdW1uLCByb3csIGxlbmd0aCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdGVybWluYWwncyBjdXJyZW50IHNlbGVjdGlvbiwgdGhpcyBpcyB1c2VmdWwgZm9yIGltcGxlbWVudGluZyBjb3B5XG4gICAqIGJlaGF2aW9yIG91dHNpZGUgb2YgeHRlcm0uanMuXG4gICAqL1xuICBwdWJsaWMgZ2V0U2VsZWN0aW9uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UgPyB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblRleHQgOiAnJztcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZWxlY3Rpb25Qb3NpdGlvbigpOiBJU2VsZWN0aW9uUG9zaXRpb24gfCB1bmRlZmluZWQge1xuICAgIGlmICghdGhpcy5fc2VsZWN0aW9uU2VydmljZS5oYXNTZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0Q29sdW1uOiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblN0YXJ0WzBdLFxuICAgICAgc3RhcnRSb3c6IHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uU3RhcnRbMV0sXG4gICAgICBlbmRDb2x1bW46IHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uRW5kWzBdLFxuICAgICAgZW5kUm93OiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvbkVuZFsxXVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBjdXJyZW50IHRlcm1pbmFsIHNlbGVjdGlvbi5cbiAgICovXG4gIHB1YmxpYyBjbGVhclNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlPy5jbGVhclNlbGVjdGlvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgYWxsIHRleHQgd2l0aGluIHRoZSB0ZXJtaW5hbC5cbiAgICovXG4gIHB1YmxpYyBzZWxlY3RBbGwoKTogdm9pZCB7XG4gICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZT8uc2VsZWN0QWxsKCk7XG4gIH1cblxuICBwdWJsaWMgc2VsZWN0TGluZXMoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlPy5zZWxlY3RMaW5lcyhzdGFydCwgZW5kKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYSBrZXlkb3duIGV2ZW50XG4gICAqIEtleSBSZXNvdXJjZXM6XG4gICAqICAgLSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS9LZXlib2FyZEV2ZW50XG4gICAqIEBwYXJhbSBldiBUaGUga2V5ZG93biBldmVudCB0byBiZSBoYW5kbGVkLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9rZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogYm9vbGVhbiB7XG4gICAgdGhpcy5fa2V5RG93bkhhbmRsZWQgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIgJiYgdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyKGV2ZW50KSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2NvbXBvc2l0aW9uSGVscGVyLmtleWRvd24oZXZlbnQpKSB7XG4gICAgICBpZiAodGhpcy5idWZmZXIueWJhc2UgIT09IHRoaXMuYnVmZmVyLnlkaXNwKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBldmFsdWF0ZUtleWJvYXJkRXZlbnQoZXZlbnQsIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXMsIHRoaXMuYnJvd3Nlci5pc01hYywgdGhpcy5vcHRpb25zLm1hY09wdGlvbklzTWV0YSk7XG5cbiAgICB0aGlzLnVwZGF0ZUN1cnNvclN0eWxlKGV2ZW50KTtcblxuICAgIGlmIChyZXN1bHQudHlwZSA9PT0gS2V5Ym9hcmRSZXN1bHRUeXBlLlBBR0VfRE9XTiB8fCByZXN1bHQudHlwZSA9PT0gS2V5Ym9hcmRSZXN1bHRUeXBlLlBBR0VfVVApIHtcbiAgICAgIGNvbnN0IHNjcm9sbENvdW50ID0gdGhpcy5yb3dzIC0gMTtcbiAgICAgIHRoaXMuc2Nyb2xsTGluZXMocmVzdWx0LnR5cGUgPT09IEtleWJvYXJkUmVzdWx0VHlwZS5QQUdFX1VQID8gLXNjcm9sbENvdW50IDogc2Nyb2xsQ291bnQpO1xuICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKGV2ZW50LCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0LnR5cGUgPT09IEtleWJvYXJkUmVzdWx0VHlwZS5TRUxFQ1RfQUxMKSB7XG4gICAgICB0aGlzLnNlbGVjdEFsbCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9pc1RoaXJkTGV2ZWxTaGlmdCh0aGlzLmJyb3dzZXIsIGV2ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdC5jYW5jZWwpIHtcbiAgICAgIC8vIFRoZSBldmVudCBpcyBjYW5jZWxlZCBhdCB0aGUgZW5kIGFscmVhZHksIGlzIHRoaXMgbmVjZXNzYXJ5P1xuICAgICAgdGhpcy5jYW5jZWwoZXZlbnQsIHRydWUpO1xuICAgIH1cblxuICAgIGlmICghcmVzdWx0LmtleSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gSWYgY3RybCtjIG9yIGVudGVyIGlzIGJlaW5nIHNlbnQsIGNsZWFyIG91dCB0aGUgdGV4dGFyZWEuIFRoaXMgaXMgZG9uZSBzbyB0aGF0IHNjcmVlbiByZWFkZXJzXG4gICAgLy8gd2lsbCBhbm5vdW5jZSBkZWxldGVkIGNoYXJhY3RlcnMuIFRoaXMgd2lsbCBub3Qgd29yayAxMDAlIG9mIHRoZSB0aW1lIGJ1dCBpdCBzaG91bGQgY292ZXJcbiAgICAvLyBtb3N0IHNjZW5hcmlvcy5cbiAgICBpZiAocmVzdWx0LmtleSA9PT0gQzAuRVRYIHx8IHJlc3VsdC5rZXkgPT09IEMwLkNSKSB7XG4gICAgICB0aGlzLnRleHRhcmVhLnZhbHVlID0gJyc7XG4gICAgfVxuXG4gICAgdGhpcy5fb25LZXkuZmlyZSh7IGtleTogcmVzdWx0LmtleSwgZG9tRXZlbnQ6IGV2ZW50IH0pO1xuICAgIHRoaXMuc2hvd0N1cnNvcigpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocmVzdWx0LmtleSwgdHJ1ZSk7XG5cbiAgICAvLyBDYW5jZWwgZXZlbnRzIHdoZW4gbm90IGluIHNjcmVlbiByZWFkZXIgbW9kZSBzbyBldmVudHMgZG9uJ3QgZ2V0IGJ1YmJsZWQgdXAgYW5kIGhhbmRsZWQgYnlcbiAgICAvLyBvdGhlciBsaXN0ZW5lcnMuIFdoZW4gc2NyZWVuIHJlYWRlciBtb2RlIGlzIGVuYWJsZWQsIHRoaXMgY291bGQgY2F1c2UgaXNzdWVzIGlmIHRoZSBldmVudFxuICAgIC8vIGlzIGhhbmRsZWQgYXQgYSBoaWdoZXIgbGV2ZWwsIHRoaXMgaXMgYSBjb21wcm9taXNlIGluIG9yZGVyIHRvIGVjaG8ga2V5cyB0byB0aGUgc2NyZWVuXG4gICAgLy8gcmVhZGVyLlxuICAgIGlmICghdGhpcy5vcHRpb25zU2VydmljZS5vcHRpb25zLnNjcmVlblJlYWRlck1vZGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldmVudCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5fa2V5RG93bkhhbmRsZWQgPSB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfaXNUaGlyZExldmVsU2hpZnQoYnJvd3NlcjogSUJyb3dzZXIsIGV2OiBJS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRoaXJkTGV2ZWxLZXkgPVxuICAgICAgICAoYnJvd3Nlci5pc01hYyAmJiAhdGhpcy5vcHRpb25zLm1hY09wdGlvbklzTWV0YSAmJiBldi5hbHRLZXkgJiYgIWV2LmN0cmxLZXkgJiYgIWV2Lm1ldGFLZXkpIHx8XG4gICAgICAgIChicm93c2VyLmlzV2luZG93cyAmJiBldi5hbHRLZXkgJiYgZXYuY3RybEtleSAmJiAhZXYubWV0YUtleSk7XG5cbiAgICBpZiAoZXYudHlwZSA9PT0gJ2tleXByZXNzJykge1xuICAgICAgcmV0dXJuIHRoaXJkTGV2ZWxLZXk7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgaW52b2tlIGZvciBhcnJvd3MsIHBhZ2VEb3duLCBob21lLCBiYWNrc3BhY2UsIGV0Yy4gKG9uIG5vbi1rZXlwcmVzcyBldmVudHMpXG4gICAgcmV0dXJuIHRoaXJkTGV2ZWxLZXkgJiYgKCFldi5rZXlDb2RlIHx8IGV2LmtleUNvZGUgPiA0Nyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2tleVVwKGV2OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciAmJiB0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIoZXYpID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghd2FzTW9kaWZpZXJLZXlPbmx5RXZlbnQoZXYpKSB7XG4gICAgICB0aGlzLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVDdXJzb3JTdHlsZShldik7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGEga2V5cHJlc3MgZXZlbnQuXG4gICAqIEtleSBSZXNvdXJjZXM6XG4gICAqICAgLSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS9LZXlib2FyZEV2ZW50XG4gICAqIEBwYXJhbSBldiBUaGUga2V5cHJlc3MgZXZlbnQgdG8gYmUgaGFuZGxlZC5cbiAgICovXG4gIHByb3RlY3RlZCBfa2V5UHJlc3MoZXY6IEtleWJvYXJkRXZlbnQpOiBib29sZWFuIHtcbiAgICBsZXQga2V5O1xuXG4gICAgaWYgKHRoaXMuX2tleURvd25IYW5kbGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciAmJiB0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIoZXYpID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMuY2FuY2VsKGV2KTtcblxuICAgIGlmIChldi5jaGFyQ29kZSkge1xuICAgICAga2V5ID0gZXYuY2hhckNvZGU7XG4gICAgfSBlbHNlIGlmIChldi53aGljaCA9PT0gbnVsbCB8fCBldi53aGljaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBrZXkgPSBldi5rZXlDb2RlO1xuICAgIH0gZWxzZSBpZiAoZXYud2hpY2ggIT09IDAgJiYgZXYuY2hhckNvZGUgIT09IDApIHtcbiAgICAgIGtleSA9IGV2LndoaWNoO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCFrZXkgfHwgKFxuICAgICAgKGV2LmFsdEtleSB8fCBldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpICYmICF0aGlzLl9pc1RoaXJkTGV2ZWxTaGlmdCh0aGlzLmJyb3dzZXIsIGV2KVxuICAgICkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBrZXkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGtleSk7XG5cbiAgICB0aGlzLl9vbktleS5maXJlKHsga2V5LCBkb21FdmVudDogZXYgfSk7XG4gICAgdGhpcy5zaG93Q3Vyc29yKCk7XG4gICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChrZXksIHRydWUpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogUmluZyB0aGUgYmVsbC5cbiAgICogTm90ZTogV2UgY291bGQgZG8gc3dlZXQgdGhpbmdzIHdpdGggd2ViYXVkaW8gaGVyZVxuICAgKi9cbiAgcHVibGljIGJlbGwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3NvdW5kQmVsbCgpKSB7XG4gICAgICB0aGlzLl9zb3VuZFNlcnZpY2UucGxheUJlbGxTb3VuZCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl92aXN1YWxCZWxsKCkpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd2aXN1YWwtYmVsbC1hY3RpdmUnKTtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl92aXN1YWxCZWxsVGltZXIpO1xuICAgICAgdGhpcy5fdmlzdWFsQmVsbFRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndmlzdWFsLWJlbGwtYWN0aXZlJyk7XG4gICAgICB9LCAyMDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNpemVzIHRoZSB0ZXJtaW5hbC5cbiAgICpcbiAgICogQHBhcmFtIHggVGhlIG51bWJlciBvZiBjb2x1bW5zIHRvIHJlc2l6ZSB0by5cbiAgICogQHBhcmFtIHkgVGhlIG51bWJlciBvZiByb3dzIHRvIHJlc2l6ZSB0by5cbiAgICovXG4gIHB1YmxpYyByZXNpemUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoaXNOYU4oeCkgfHwgaXNOYU4oeSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoeCA9PT0gdGhpcy5jb2xzICYmIHkgPT09IHRoaXMucm93cykge1xuICAgICAgLy8gQ2hlY2sgaWYgd2Ugc3RpbGwgbmVlZCB0byBtZWFzdXJlIHRoZSBjaGFyIHNpemUgKGZpeGVzICM3ODUpLlxuICAgICAgaWYgKHRoaXMuX2NoYXJTaXplU2VydmljZSAmJiAhdGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZSkge1xuICAgICAgICB0aGlzLl9jaGFyU2l6ZVNlcnZpY2UubWVhc3VyZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh4IDwgTUlOSU1VTV9DT0xTKSB4ID0gTUlOSU1VTV9DT0xTO1xuICAgIGlmICh5IDwgTUlOSU1VTV9ST1dTKSB5ID0gTUlOSU1VTV9ST1dTO1xuXG4gICAgdGhpcy5idWZmZXJzLnJlc2l6ZSh4LCB5KTtcblxuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UucmVzaXplKHgsIHkpO1xuICAgIHRoaXMuYnVmZmVycy5zZXR1cFRhYlN0b3BzKHRoaXMuY29scyk7XG5cbiAgICB0aGlzLl9jaGFyU2l6ZVNlcnZpY2U/Lm1lYXN1cmUoKTtcblxuICAgIC8vIFN5bmMgdGhlIHNjcm9sbCBhcmVhIHRvIG1ha2Ugc3VyZSBzY3JvbGwgZXZlbnRzIGRvbid0IGZpcmUgYW5kIHNjcm9sbCB0aGUgdmlld3BvcnQgdG8gYW5cbiAgICAvLyBpbnZhbGlkIGxvY2F0aW9uXG4gICAgdGhpcy52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSh0cnVlKTtcblxuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICB0aGlzLl9vblJlc2l6ZS5maXJlKHsgY29sczogeCwgcm93czogeSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciB0aGUgZW50aXJlIGJ1ZmZlciwgbWFraW5nIHRoZSBwcm9tcHQgbGluZSB0aGUgbmV3IGZpcnN0IGxpbmUuXG4gICAqL1xuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYnVmZmVyLnliYXNlID09PSAwICYmIHRoaXMuYnVmZmVyLnkgPT09IDApIHtcbiAgICAgIC8vIERvbid0IGNsZWFyIGlmIGl0J3MgYWxyZWFkeSBjbGVhclxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmJ1ZmZlci5saW5lcy5zZXQoMCwgdGhpcy5idWZmZXIubGluZXMuZ2V0KHRoaXMuYnVmZmVyLnliYXNlICsgdGhpcy5idWZmZXIueSkpO1xuICAgIHRoaXMuYnVmZmVyLmxpbmVzLmxlbmd0aCA9IDE7XG4gICAgdGhpcy5idWZmZXIueWRpc3AgPSAwO1xuICAgIHRoaXMuYnVmZmVyLnliYXNlID0gMDtcbiAgICB0aGlzLmJ1ZmZlci55ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMucm93czsgaSsrKSB7XG4gICAgICB0aGlzLmJ1ZmZlci5saW5lcy5wdXNoKHRoaXMuYnVmZmVyLmdldEJsYW5rTGluZShERUZBVUxUX0FUVFJfREFUQSkpO1xuICAgIH1cbiAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gICAgdGhpcy5fb25TY3JvbGwuZmlyZSh0aGlzLmJ1ZmZlci55ZGlzcCk7XG4gIH1cblxuICAvKipcbiAgICogRXZhbHVhdGUgaWYgdGhlIGN1cnJlbnQgdGVybWluYWwgaXMgdGhlIGdpdmVuIGFyZ3VtZW50LlxuICAgKiBAcGFyYW0gdGVybSBUaGUgdGVybWluYWwgbmFtZSB0byBldmFsdWF0ZVxuICAgKi9cbiAgcHVibGljIGlzKHRlcm06IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5vcHRpb25zLnRlcm1OYW1lICsgJycpLmluZGV4T2YodGVybSkgPT09IDA7XG4gIH1cblxuICAvKipcbiAgICogRW1pdCB0aGUgZGF0YSBldmVudCBhbmQgcG9wdWxhdGUgdGhlIGdpdmVuIGRhdGEuXG4gICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIHBvcHVsYXRlIGluIHRoZSBldmVudC5cbiAgICovXG4gIC8vIHB1YmxpYyBoYW5kbGVyKGRhdGE6IHN0cmluZyk6IHZvaWQge1xuICAvLyAgIC8vIFByZXZlbnRzIGFsbCBldmVudHMgdG8gcHR5IHByb2Nlc3MgaWYgc3RkaW4gaXMgZGlzYWJsZWRcbiAgLy8gICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVTdGRpbikge1xuICAvLyAgICAgcmV0dXJuO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIENsZWFyIHRoZSBzZWxlY3Rpb24gaWYgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyIGlzIGF2YWlsYWJsZSBhbmQgaGFzIGFuIGFjdGl2ZSBzZWxlY3Rpb25cbiAgLy8gICBpZiAodGhpcy5zZWxlY3Rpb25TZXJ2aWNlICYmIHRoaXMuc2VsZWN0aW9uU2VydmljZS5oYXNTZWxlY3Rpb24pIHtcbiAgLy8gICAgIHRoaXMuc2VsZWN0aW9uU2VydmljZS5jbGVhclNlbGVjdGlvbigpO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIElucHV0IGlzIGJlaW5nIHNlbnQgdG8gdGhlIHRlcm1pbmFsLCB0aGUgdGVybWluYWwgc2hvdWxkIGZvY3VzIHRoZSBwcm9tcHQuXG4gIC8vICAgaWYgKHRoaXMuYnVmZmVyLnliYXNlICE9PSB0aGlzLmJ1ZmZlci55ZGlzcCkge1xuICAvLyAgICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICAvLyAgIH1cbiAgLy8gICB0aGlzLl9vbkRhdGEuZmlyZShkYXRhKTtcbiAgLy8gfVxuXG4gIC8qKlxuICAgKiBFbWl0IHRoZSAndGl0bGUnIGV2ZW50IGFuZCBwb3B1bGF0ZSB0aGUgZ2l2ZW4gdGl0bGUuXG4gICAqIEBwYXJhbSB0aXRsZSBUaGUgdGl0bGUgdG8gcG9wdWxhdGUgaW4gdGhlIGV2ZW50LlxuICAgKi9cbiAgcHVibGljIGhhbmRsZVRpdGxlKHRpdGxlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLl9vblRpdGxlQ2hhbmdlLmZpcmUodGl0bGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHRlcm1pbmFsLlxuICAgKiBOb3RlOiBDYWxsaW5nIHRoaXMgZGlyZWN0bHkgZnJvbSBKUyBpcyBzeW5jaHJvbm91cyBidXQgZG9lcyBub3QgY2xlYXJcbiAgICogaW5wdXQgYnVmZmVycyBhbmQgZG9lcyBub3QgcmVzZXQgdGhlIHBhcnNlciwgdGh1cyB0aGUgdGVybWluYWwgd2lsbFxuICAgKiBjb250aW51ZSB0byBhcHBseSBwZW5kaW5nIGlucHV0IGRhdGEuXG4gICAqIElmIHlvdSBuZWVkIGluIGJhbmQgcmVzZXQgKHN5bmNocm9ub3VzIHdpdGggaW5wdXQgZGF0YSkgY29uc2lkZXJcbiAgICogdXNpbmcgREVDU1RSIChzb2Z0IHJlc2V0LCBDU0kgISBwKSBvciBSSVMgaW5zdGVhZCAoaGFyZCByZXNldCwgRVNDIGMpLlxuICAgKi9cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIC8qKlxuICAgICAqIFNpbmNlIF9zZXR1cCBoYW5kbGVzIGEgZnVsbCB0ZXJtaW5hbCBjcmVhdGlvbiwgd2UgaGF2ZSB0byBjYXJyeSBmb3J3YXJkXG4gICAgICogYSBmZXcgdGhpbmdzIHRoYXQgc2hvdWxkIG5vdCByZXNldC5cbiAgICAgKi9cbiAgICB0aGlzLm9wdGlvbnMucm93cyA9IHRoaXMucm93cztcbiAgICB0aGlzLm9wdGlvbnMuY29scyA9IHRoaXMuY29scztcbiAgICBjb25zdCBjdXN0b21LZXlFdmVudEhhbmRsZXIgPSB0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXI7XG4gICAgY29uc3QgdXNlclNjcm9sbGluZyA9IHRoaXMuX3VzZXJTY3JvbGxpbmc7XG5cbiAgICB0aGlzLl9zZXR1cCgpO1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UucmVzZXQoKTtcbiAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5yZXNldCgpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnJlc2V0KCk7XG4gICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5yZXNldCgpO1xuICAgIHRoaXMuX3NlbGVjdGlvblNlcnZpY2U/LnJlc2V0KCk7XG5cbiAgICAvLyByZWF0dGFjaFxuICAgIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciA9IGN1c3RvbUtleUV2ZW50SGFuZGxlcjtcbiAgICB0aGlzLl91c2VyU2Nyb2xsaW5nID0gdXNlclNjcm9sbGluZztcblxuICAgIC8vIGRvIGEgZnVsbCBzY3JlZW4gcmVmcmVzaFxuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICB0aGlzLnZpZXdwb3J0Py5zeW5jU2Nyb2xsQXJlYSgpO1xuICB9XG5cbiAgLy8gVE9ETzogUmVtb3ZlIGNhbmNlbCBmdW5jdGlvbiBhbmQgY2FuY2VsRXZlbnRzIG9wdGlvblxuICBwdWJsaWMgY2FuY2VsKGV2OiBFdmVudCwgZm9yY2U/OiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuY2FuY2VsRXZlbnRzICYmICFmb3JjZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgX3Zpc3VhbEJlbGwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vIHJldHVybiB0aGlzLm9wdGlvbnMuYmVsbFN0eWxlID09PSAndmlzdWFsJyB8fFxuICAgIC8vICAgICB0aGlzLm9wdGlvbnMuYmVsbFN0eWxlID09PSAnYm90aCc7XG4gIH1cblxuICBwcml2YXRlIF9zb3VuZEJlbGwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5iZWxsU3R5bGUgPT09ICdzb3VuZCc7XG4gICAgLy8gcmV0dXJuIHRoaXMub3B0aW9ucy5iZWxsU3R5bGUgPT09ICdzb3VuZCcgfHxcbiAgICAvLyAgICAgdGhpcy5vcHRpb25zLmJlbGxTdHlsZSA9PT0gJ2JvdGgnO1xuICB9XG5cbiAgcHVibGljIHdyaXRlKGRhdGE6IHN0cmluZyB8IFVpbnQ4QXJyYXksIGNhbGxiYWNrPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlKGRhdGEsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIHB1YmxpYyB3cml0ZVN5bmMoZGF0YTogc3RyaW5nIHwgVWludDhBcnJheSk6IHZvaWQge1xuICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3luYyhkYXRhKTtcbiAgfVxufVxuXG4vKipcbiAqIEhlbHBlcnNcbiAqL1xuXG5mdW5jdGlvbiB3YXNNb2RpZmllcktleU9ubHlFdmVudChldjogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICByZXR1cm4gZXYua2V5Q29kZSA9PT0gMTYgfHwgLy8gU2hpZnRcbiAgICBldi5rZXlDb2RlID09PSAxNyB8fCAvLyBDdHJsXG4gICAgZXYua2V5Q29kZSA9PT0gMTg7IC8vIEFsdFxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJU2VsZWN0aW9uU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUNvcmVTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuLyoqXG4gKiBQcmVwYXJlcyB0ZXh0IHRvIGJlIHBhc3RlZCBpbnRvIHRoZSB0ZXJtaW5hbCBieSBub3JtYWxpemluZyB0aGUgbGluZSBlbmRpbmdzXG4gKiBAcGFyYW0gdGV4dCBUaGUgcGFzdGVkIHRleHQgdGhhdCBuZWVkcyBwcm9jZXNzaW5nIGJlZm9yZSBpbnNlcnRpbmcgaW50byB0aGUgdGVybWluYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByZXBhcmVUZXh0Rm9yVGVybWluYWwodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHRleHQucmVwbGFjZSgvXFxyP1xcbi9nLCAnXFxyJyk7XG59XG5cbi8qKlxuICogQnJhY2tldCB0ZXh0IGZvciBwYXN0ZSwgaWYgbmVjZXNzYXJ5LCBhcyBwZXIgaHR0cHM6Ly9jaXJ3LmluL2Jsb2cvYnJhY2tldGVkLXBhc3RlXG4gKiBAcGFyYW0gdGV4dCBUaGUgcGFzdGVkIHRleHQgdG8gYnJhY2tldFxuICovXG5leHBvcnQgZnVuY3Rpb24gYnJhY2tldFRleHRGb3JQYXN0ZSh0ZXh0OiBzdHJpbmcsIGJyYWNrZXRlZFBhc3RlTW9kZTogYm9vbGVhbik6IHN0cmluZyB7XG4gIGlmIChicmFja2V0ZWRQYXN0ZU1vZGUpIHtcbiAgICByZXR1cm4gJ1xceDFiWzIwMH4nICsgdGV4dCArICdcXHgxYlsyMDF+JztcbiAgfVxuICByZXR1cm4gdGV4dDtcbn1cblxuLyoqXG4gKiBCaW5kcyBjb3B5IGZ1bmN0aW9uYWxpdHkgdG8gdGhlIGdpdmVuIHRlcm1pbmFsLlxuICogQHBhcmFtIGV2IFRoZSBvcmlnaW5hbCBjb3B5IGV2ZW50IHRvIGJlIGhhbmRsZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHlIYW5kbGVyKGV2OiBDbGlwYm9hcmRFdmVudCwgc2VsZWN0aW9uU2VydmljZTogSVNlbGVjdGlvblNlcnZpY2UpOiB2b2lkIHtcbiAgaWYgKGV2LmNsaXBib2FyZERhdGEpIHtcbiAgICBldi5jbGlwYm9hcmREYXRhLnNldERhdGEoJ3RleHQvcGxhaW4nLCBzZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblRleHQpO1xuICB9XG4gIC8vIFByZXZlbnQgb3IgdGhlIG9yaWdpbmFsIHRleHQgd2lsbCBiZSBjb3BpZWQuXG4gIGV2LnByZXZlbnREZWZhdWx0KCk7XG59XG5cbi8qKlxuICogUmVkaXJlY3QgdGhlIGNsaXBib2FyZCdzIGRhdGEgdG8gdGhlIHRlcm1pbmFsJ3MgaW5wdXQgaGFuZGxlci5cbiAqIEBwYXJhbSBldiBUaGUgb3JpZ2luYWwgcGFzdGUgZXZlbnQgdG8gYmUgaGFuZGxlZFxuICogQHBhcmFtIHRlcm0gVGhlIHRlcm1pbmFsIG9uIHdoaWNoIHRvIGFwcGx5IHRoZSBoYW5kbGVkIHBhc3RlIGV2ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVQYXN0ZUV2ZW50KGV2OiBDbGlwYm9hcmRFdmVudCwgdGV4dGFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQsIGJyYWNrZXRlZFBhc3RlTW9kZTogYm9vbGVhbiwgY29yZVNlcnZpY2U6IElDb3JlU2VydmljZSk6IHZvaWQge1xuICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgaWYgKGV2LmNsaXBib2FyZERhdGEpIHtcbiAgICBjb25zdCB0ZXh0ID0gZXYuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgcGFzdGUodGV4dCwgdGV4dGFyZWEsIGJyYWNrZXRlZFBhc3RlTW9kZSwgY29yZVNlcnZpY2UpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXN0ZSh0ZXh0OiBzdHJpbmcsIHRleHRhcmVhOiBIVE1MVGV4dEFyZWFFbGVtZW50LCBicmFja2V0ZWRQYXN0ZU1vZGU6IGJvb2xlYW4sIGNvcmVTZXJ2aWNlOiBJQ29yZVNlcnZpY2UpOiB2b2lkIHtcbiAgdGV4dCA9IHByZXBhcmVUZXh0Rm9yVGVybWluYWwodGV4dCk7XG4gIHRleHQgPSBicmFja2V0VGV4dEZvclBhc3RlKHRleHQsIGJyYWNrZXRlZFBhc3RlTW9kZSk7XG4gIGNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodGV4dCwgdHJ1ZSk7XG4gIHRleHRhcmVhLnZhbHVlID0gJyc7XG59XG5cbi8qKlxuICogTW92ZXMgdGhlIHRleHRhcmVhIHVuZGVyIHRoZSBtb3VzZSBjdXJzb3IgYW5kIGZvY3VzZXMgaXQuXG4gKiBAcGFyYW0gZXYgVGhlIG9yaWdpbmFsIHJpZ2h0IGNsaWNrIGV2ZW50IHRvIGJlIGhhbmRsZWQuXG4gKiBAcGFyYW0gdGV4dGFyZWEgVGhlIHRlcm1pbmFsJ3MgdGV4dGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtb3ZlVGV4dEFyZWFVbmRlck1vdXNlQ3Vyc29yKGV2OiBNb3VzZUV2ZW50LCB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCwgc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblxuICAvLyBDYWxjdWxhdGUgdGV4dGFyZWEgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHNjcmVlbiBlbGVtZW50XG4gIGNvbnN0IHBvcyA9IHNjcmVlbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IGxlZnQgPSBldi5jbGllbnRYIC0gcG9zLmxlZnQgLSAxMDtcbiAgY29uc3QgdG9wID0gZXYuY2xpZW50WSAtIHBvcy50b3AgLSAxMDtcblxuICAvLyBCcmluZyB0ZXh0YXJlYSBhdCB0aGUgY3Vyc29yIHBvc2l0aW9uXG4gIHRleHRhcmVhLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgdGV4dGFyZWEuc3R5bGUud2lkdGggPSAnMjBweCc7XG4gIHRleHRhcmVhLnN0eWxlLmhlaWdodCA9ICcyMHB4JztcbiAgdGV4dGFyZWEuc3R5bGUubGVmdCA9IGAke2xlZnR9cHhgO1xuICB0ZXh0YXJlYS5zdHlsZS50b3AgPSBgJHt0b3B9cHhgO1xuICB0ZXh0YXJlYS5zdHlsZS56SW5kZXggPSAnMTAwMCc7XG5cbiAgdGV4dGFyZWEuZm9jdXMoKTtcblxuICAvLyBSZXNldCB0aGUgdGVybWluYWwgdGV4dGFyZWEncyBzdHlsaW5nXG4gIC8vIFRpbWVvdXQgbmVlZHMgdG8gYmUgbG9uZyBlbm91Z2ggZm9yIGNsaWNrIGV2ZW50IHRvIGJlIGhhbmRsZWQuXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIHRleHRhcmVhLnN0eWxlLnBvc2l0aW9uID0gJyc7XG4gICAgdGV4dGFyZWEuc3R5bGUud2lkdGggPSAnJztcbiAgICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICB0ZXh0YXJlYS5zdHlsZS5sZWZ0ID0gJyc7XG4gICAgdGV4dGFyZWEuc3R5bGUudG9wID0gJyc7XG4gICAgdGV4dGFyZWEuc3R5bGUuekluZGV4ID0gJyc7XG4gIH0sIDIwMCk7XG59XG5cbi8qKlxuICogQmluZCB0byByaWdodC1jbGljayBldmVudCBhbmQgYWxsb3cgcmlnaHQtY2xpY2sgY29weSBhbmQgcGFzdGUuXG4gKiBAcGFyYW0gZXYgVGhlIG9yaWdpbmFsIHJpZ2h0IGNsaWNrIGV2ZW50IHRvIGJlIGhhbmRsZWQuXG4gKiBAcGFyYW0gdGV4dGFyZWEgVGhlIHRlcm1pbmFsJ3MgdGV4dGFyZWEuXG4gKiBAcGFyYW0gc2VsZWN0aW9uU2VydmljZSBUaGUgdGVybWluYWwncyBzZWxlY3Rpb24gbWFuYWdlci5cbiAqIEBwYXJhbSBzaG91bGRTZWxlY3RXb3JkIElmIHRydWUgYW5kIHRoZXJlIGlzIG5vIHNlbGVjdGlvbiB0aGUgY3VycmVudCB3b3JkIHdpbGwgYmUgc2VsZWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJpZ2h0Q2xpY2tIYW5kbGVyKGV2OiBNb3VzZUV2ZW50LCB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCwgc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQsIHNlbGVjdGlvblNlcnZpY2U6IElTZWxlY3Rpb25TZXJ2aWNlLCBzaG91bGRTZWxlY3RXb3JkOiBib29sZWFuKTogdm9pZCB7XG4gIG1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3IoZXYsIHRleHRhcmVhLCBzY3JlZW5FbGVtZW50KTtcblxuICBpZiAoc2hvdWxkU2VsZWN0V29yZCAmJiAhc2VsZWN0aW9uU2VydmljZS5pc0NsaWNrSW5TZWxlY3Rpb24oZXYpKSB7XG4gICAgc2VsZWN0aW9uU2VydmljZS5zZWxlY3RXb3JkQXRDdXJzb3IoZXYpO1xuICB9XG5cbiAgLy8gR2V0IHRleHRhcmVhIHJlYWR5IHRvIGNvcHkgZnJvbSB0aGUgY29udGV4dCBtZW51XG4gIHRleHRhcmVhLnZhbHVlID0gc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25UZXh0O1xuICB0ZXh0YXJlYS5zZWxlY3QoKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNvbG9yIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9ucyB3aGVyZSB0aGUgc291cmNlIHR5cGUgaXMgXCJjaGFubmVsc1wiIChpbmRpdmlkdWFsIGNvbG9yIGNoYW5uZWxzIGFzIG51bWJlcnMpLlxuICovXG5leHBvcnQgbmFtZXNwYWNlIGNoYW5uZWxzIHtcbiAgZXhwb3J0IGZ1bmN0aW9uIHRvQ3NzKHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE/OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmIChhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBgIyR7dG9QYWRkZWRIZXgocil9JHt0b1BhZGRlZEhleChnKX0ke3RvUGFkZGVkSGV4KGIpfSR7dG9QYWRkZWRIZXgoYSl9YDtcbiAgICB9XG4gICAgcmV0dXJuIGAjJHt0b1BhZGRlZEhleChyKX0ke3RvUGFkZGVkSGV4KGcpfSR7dG9QYWRkZWRIZXgoYil9YDtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiB0b1JnYmEocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyID0gMHhGRik6IG51bWJlciB7XG4gICAgLy8gPj4+IDAgZm9yY2VzIGFuIHVuc2lnbmVkIGludFxuICAgIHJldHVybiAociA8PCAyNCB8IGcgPDwgMTYgfCBiIDw8IDggfCBhKSA+Pj4gMDtcbiAgfVxufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbnMgd2hlcmUgdGhlIHNvdXJjZSB0eXBlIGlzIGBJQ29sb3JgLlxuICovXG5leHBvcnQgbmFtZXNwYWNlIGNvbG9yIHtcbiAgZXhwb3J0IGZ1bmN0aW9uIGJsZW5kKGJnOiBJQ29sb3IsIGZnOiBJQ29sb3IpOiBJQ29sb3Ige1xuICAgIGNvbnN0IGEgPSAoZmcucmdiYSAmIDB4RkYpIC8gMjU1O1xuICAgIGlmIChhID09PSAxKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjc3M6IGZnLmNzcyxcbiAgICAgICAgcmdiYTogZmcucmdiYVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgZmdSID0gKGZnLnJnYmEgPj4gMjQpICYgMHhGRjtcbiAgICBjb25zdCBmZ0cgPSAoZmcucmdiYSA+PiAxNikgJiAweEZGO1xuICAgIGNvbnN0IGZnQiA9IChmZy5yZ2JhID4+IDgpICYgMHhGRjtcbiAgICBjb25zdCBiZ1IgPSAoYmcucmdiYSA+PiAyNCkgJiAweEZGO1xuICAgIGNvbnN0IGJnRyA9IChiZy5yZ2JhID4+IDE2KSAmIDB4RkY7XG4gICAgY29uc3QgYmdCID0gKGJnLnJnYmEgPj4gOCkgJiAweEZGO1xuICAgIGNvbnN0IHIgPSBiZ1IgKyBNYXRoLnJvdW5kKChmZ1IgLSBiZ1IpICogYSk7XG4gICAgY29uc3QgZyA9IGJnRyArIE1hdGgucm91bmQoKGZnRyAtIGJnRykgKiBhKTtcbiAgICBjb25zdCBiID0gYmdCICsgTWF0aC5yb3VuZCgoZmdCIC0gYmdCKSAqIGEpO1xuICAgIGNvbnN0IGNzcyA9IGNoYW5uZWxzLnRvQ3NzKHIsIGcsIGIpO1xuICAgIGNvbnN0IHJnYmEgPSBjaGFubmVscy50b1JnYmEociwgZywgYik7XG4gICAgcmV0dXJuIHsgY3NzLCByZ2JhIH07XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gZW5zdXJlQ29udHJhc3RSYXRpbyhiZzogSUNvbG9yLCBmZzogSUNvbG9yLCByYXRpbzogbnVtYmVyKTogSUNvbG9yIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCByZXN1bHQgPSByZ2JhLmVuc3VyZUNvbnRyYXN0UmF0aW8oYmcucmdiYSwgZmcucmdiYSwgcmF0aW8pO1xuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gcmdiYS50b0NvbG9yKFxuICAgICAgKHJlc3VsdCA+PiAyNCAmIDB4RkYpLFxuICAgICAgKHJlc3VsdCA+PiAxNiAmIDB4RkYpLFxuICAgICAgKHJlc3VsdCA+PiA4ICAmIDB4RkYpXG4gICAgKTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBvcGFxdWUoY29sb3I6IElDb2xvcik6IElDb2xvciB7XG4gICAgY29uc3QgcmdiYUNvbG9yID0gKGNvbG9yLnJnYmEgfCAweEZGKSA+Pj4gMDtcbiAgICBjb25zdCBbciwgZywgYl0gPSByZ2JhLnRvQ2hhbm5lbHMocmdiYUNvbG9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgY3NzOiBjaGFubmVscy50b0NzcyhyLCBnLCBiKSxcbiAgICAgIHJnYmE6IHJnYmFDb2xvclxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb25zIHdoZXJlIHRoZSBzb3VyY2UgdHlwZSBpcyBcImNzc1wiIChzdHJpbmc6ICcjcmdiJywgJyNyZ2JhJywgJyNycmdnYmInLCAnI3JyZ2diYmFhJykuXG4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgY3NzIHtcbiAgZXhwb3J0IGZ1bmN0aW9uIHRvQ29sb3IoY3NzOiBzdHJpbmcpOiBJQ29sb3Ige1xuICAgIHJldHVybiB7XG4gICAgICBjc3MsXG4gICAgICByZ2JhOiAocGFyc2VJbnQoY3NzLnNsaWNlKDEpLCAxNikgPDwgOCB8IDB4RkYpID4+PiAwXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbnMgd2hlcmUgdGhlIHNvdXJjZSB0eXBlIGlzIFwicmdiXCIgKG51bWJlcjogMHhycmdnYmIpLlxuICovXG5leHBvcnQgbmFtZXNwYWNlIHJnYiB7XG4gIC8qKlxuICAgKiBHZXRzIHRoZSByZWxhdGl2ZSBsdW1pbmFuY2Ugb2YgYW4gUkdCIGNvbG9yLCB0aGlzIGlzIHVzZWZ1bCBpbiBkZXRlcm1pbmluZyB0aGUgY29udHJhc3QgcmF0aW9cbiAgICogYmV0d2VlbiB0d28gY29sb3JzLlxuICAgKiBAcGFyYW0gcmdiIFRoZSBjb2xvciB0byB1c2UuXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL1dDQUcyMC8jcmVsYXRpdmVsdW1pbmFuY2VkZWZcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiByZWxhdGl2ZUx1bWluYW5jZShyZ2I6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHJlbGF0aXZlTHVtaW5hbmNlMihcbiAgICAgIChyZ2IgPj4gMTYpICYgMHhGRixcbiAgICAgIChyZ2IgPj4gOCApICYgMHhGRixcbiAgICAgIChyZ2IgICAgICApICYgMHhGRik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcmVsYXRpdmUgbHVtaW5hbmNlIG9mIGFuIFJHQiBjb2xvciwgdGhpcyBpcyB1c2VmdWwgaW4gZGV0ZXJtaW5pbmcgdGhlIGNvbnRyYXN0IHJhdGlvXG4gICAqIGJldHdlZW4gdHdvIGNvbG9ycy5cbiAgICogQHBhcmFtIHIgVGhlIHJlZCBjaGFubmVsICgweDAwIHRvIDB4RkYpLlxuICAgKiBAcGFyYW0gZyBUaGUgZ3JlZW4gY2hhbm5lbCAoMHgwMCB0byAweEZGKS5cbiAgICogQHBhcmFtIGIgVGhlIGJsdWUgY2hhbm5lbCAoMHgwMCB0byAweEZGKS5cbiAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvV0NBRzIwLyNyZWxhdGl2ZWx1bWluYW5jZWRlZlxuICAgKi9cbiAgZXhwb3J0IGZ1bmN0aW9uIHJlbGF0aXZlTHVtaW5hbmNlMihyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBycyA9IHIgLyAyNTU7XG4gICAgY29uc3QgZ3MgPSBnIC8gMjU1O1xuICAgIGNvbnN0IGJzID0gYiAvIDI1NTtcbiAgICBjb25zdCByciA9IHJzIDw9IDAuMDM5MjggPyBycyAvIDEyLjkyIDogTWF0aC5wb3coKHJzICsgMC4wNTUpIC8gMS4wNTUsIDIuNCk7XG4gICAgY29uc3QgcmcgPSBncyA8PSAwLjAzOTI4ID8gZ3MgLyAxMi45MiA6IE1hdGgucG93KChncyArIDAuMDU1KSAvIDEuMDU1LCAyLjQpO1xuICAgIGNvbnN0IHJiID0gYnMgPD0gMC4wMzkyOCA/IGJzIC8gMTIuOTIgOiBNYXRoLnBvdygoYnMgKyAwLjA1NSkgLyAxLjA1NSwgMi40KTtcbiAgICByZXR1cm4gcnIgKiAwLjIxMjYgKyByZyAqIDAuNzE1MiArIHJiICogMC4wNzIyO1xuICB9XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9ucyB3aGVyZSB0aGUgc291cmNlIHR5cGUgaXMgXCJyZ2JhXCIgKG51bWJlcjogMHhycmdnYmJhYSkuXG4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgcmdiYSB7XG4gIGV4cG9ydCBmdW5jdGlvbiBlbnN1cmVDb250cmFzdFJhdGlvKGJnUmdiYTogbnVtYmVyLCBmZ1JnYmE6IG51bWJlciwgcmF0aW86IG51bWJlcik6IG51bWJlciB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgYmdMID0gcmdiLnJlbGF0aXZlTHVtaW5hbmNlKGJnUmdiYSA+PiA4KTtcbiAgICBjb25zdCBmZ0wgPSByZ2IucmVsYXRpdmVMdW1pbmFuY2UoZmdSZ2JhID4+IDgpO1xuICAgIGNvbnN0IGNyID0gY29udHJhc3RSYXRpbyhiZ0wsIGZnTCk7XG4gICAgaWYgKGNyIDwgcmF0aW8pIHtcbiAgICAgIGlmIChmZ0wgPCBiZ0wpIHtcbiAgICAgICAgcmV0dXJuIHJlZHVjZUx1bWluYW5jZShiZ1JnYmEsIGZnUmdiYSwgcmF0aW8pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGluY3JlYXNlTHVtaW5hbmNlKGJnUmdiYSwgZmdSZ2JhLCByYXRpbyk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gcmVkdWNlTHVtaW5hbmNlKGJnUmdiYTogbnVtYmVyLCBmZ1JnYmE6IG51bWJlciwgcmF0aW86IG51bWJlcik6IG51bWJlciB7XG4gICAgLy8gVGhpcyBpcyBhIG5haXZlIGJ1dCBmYXN0IGFwcHJvYWNoIHRvIHJlZHVjaW5nIGx1bWluYW5jZSBhcyBjb252ZXJ0aW5nIHRvXG4gICAgLy8gSFNMIGFuZCBiYWNrIGlzIGV4cGVuc2l2ZVxuICAgIGNvbnN0IGJnUiA9IChiZ1JnYmEgPj4gMjQpICYgMHhGRjtcbiAgICBjb25zdCBiZ0cgPSAoYmdSZ2JhID4+IDE2KSAmIDB4RkY7XG4gICAgY29uc3QgYmdCID0gKGJnUmdiYSA+PiAgOCkgJiAweEZGO1xuICAgIGxldCBmZ1IgPSAoZmdSZ2JhID4+IDI0KSAmIDB4RkY7XG4gICAgbGV0IGZnRyA9IChmZ1JnYmEgPj4gMTYpICYgMHhGRjtcbiAgICBsZXQgZmdCID0gKGZnUmdiYSA+PiAgOCkgJiAweEZGO1xuICAgIGxldCBjciA9IGNvbnRyYXN0UmF0aW8ocmdiLnJlbGF0aXZlTHVtaW5hbmNlMihmZ1IsIGZnQiwgZmdHKSwgcmdiLnJlbGF0aXZlTHVtaW5hbmNlMihiZ1IsIGJnRywgYmdCKSk7XG4gICAgd2hpbGUgKGNyIDwgcmF0aW8gJiYgKGZnUiA+IDAgfHwgZmdHID4gMCB8fCBmZ0IgPiAwKSkge1xuICAgICAgLy8gUmVkdWNlIGJ5IDEwJSB1bnRpbCB0aGUgcmF0aW8gaXMgaGl0XG4gICAgICBmZ1IgLT0gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKGZnUiAqIDAuMSkpO1xuICAgICAgZmdHIC09IE1hdGgubWF4KDAsIE1hdGguY2VpbChmZ0cgKiAwLjEpKTtcbiAgICAgIGZnQiAtPSBNYXRoLm1heCgwLCBNYXRoLmNlaWwoZmdCICogMC4xKSk7XG4gICAgICBjciA9IGNvbnRyYXN0UmF0aW8ocmdiLnJlbGF0aXZlTHVtaW5hbmNlMihmZ1IsIGZnQiwgZmdHKSwgcmdiLnJlbGF0aXZlTHVtaW5hbmNlMihiZ1IsIGJnRywgYmdCKSk7XG4gICAgfVxuICAgIHJldHVybiAoZmdSIDw8IDI0IHwgZmdHIDw8IDE2IHwgZmdCIDw8IDggfCAweEZGKSA+Pj4gMDtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBpbmNyZWFzZUx1bWluYW5jZShiZ1JnYmE6IG51bWJlciwgZmdSZ2JhOiBudW1iZXIsIHJhdGlvOiBudW1iZXIpOiBudW1iZXIge1xuICAgIC8vIFRoaXMgaXMgYSBuYWl2ZSBidXQgZmFzdCBhcHByb2FjaCB0byBpbmNyZWFzaW5nIGx1bWluYW5jZSBhcyBjb252ZXJ0aW5nIHRvXG4gICAgLy8gSFNMIGFuZCBiYWNrIGlzIGV4cGVuc2l2ZVxuICAgIGNvbnN0IGJnUiA9IChiZ1JnYmEgPj4gMjQpICYgMHhGRjtcbiAgICBjb25zdCBiZ0cgPSAoYmdSZ2JhID4+IDE2KSAmIDB4RkY7XG4gICAgY29uc3QgYmdCID0gKGJnUmdiYSA+PiAgOCkgJiAweEZGO1xuICAgIGxldCBmZ1IgPSAoZmdSZ2JhID4+IDI0KSAmIDB4RkY7XG4gICAgbGV0IGZnRyA9IChmZ1JnYmEgPj4gMTYpICYgMHhGRjtcbiAgICBsZXQgZmdCID0gKGZnUmdiYSA+PiAgOCkgJiAweEZGO1xuICAgIGxldCBjciA9IGNvbnRyYXN0UmF0aW8ocmdiLnJlbGF0aXZlTHVtaW5hbmNlMihmZ1IsIGZnQiwgZmdHKSwgcmdiLnJlbGF0aXZlTHVtaW5hbmNlMihiZ1IsIGJnRywgYmdCKSk7XG4gICAgd2hpbGUgKGNyIDwgcmF0aW8gJiYgKGZnUiA8IDB4RkYgfHwgZmdHIDwgMHhGRiB8fCBmZ0IgPCAweEZGKSkge1xuICAgICAgLy8gSW5jcmVhc2UgYnkgMTAlIHVudGlsIHRoZSByYXRpbyBpcyBoaXRcbiAgICAgIGZnUiA9IE1hdGgubWluKDB4RkYsIGZnUiArIE1hdGguY2VpbCgoMjU1IC0gZmdSKSAqIDAuMSkpO1xuICAgICAgZmdHID0gTWF0aC5taW4oMHhGRiwgZmdHICsgTWF0aC5jZWlsKCgyNTUgLSBmZ0cpICogMC4xKSk7XG4gICAgICBmZ0IgPSBNYXRoLm1pbigweEZGLCBmZ0IgKyBNYXRoLmNlaWwoKDI1NSAtIGZnQikgKiAwLjEpKTtcbiAgICAgIGNyID0gY29udHJhc3RSYXRpbyhyZ2IucmVsYXRpdmVMdW1pbmFuY2UyKGZnUiwgZmdCLCBmZ0cpLCByZ2IucmVsYXRpdmVMdW1pbmFuY2UyKGJnUiwgYmdHLCBiZ0IpKTtcbiAgICB9XG4gICAgcmV0dXJuIChmZ1IgPDwgMjQgfCBmZ0cgPDwgMTYgfCBmZ0IgPDwgOCB8IDB4RkYpID4+PiAwO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIHRvQ2hhbm5lbHModmFsdWU6IG51bWJlcik6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdIHtcbiAgICByZXR1cm4gWyh2YWx1ZSA+PiAyNCkgJiAweEZGLCAodmFsdWUgPj4gMTYpICYgMHhGRiwgKHZhbHVlID4+IDgpICYgMHhGRiwgdmFsdWUgJiAweEZGXTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiB0b0NvbG9yKHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIpOiBJQ29sb3Ige1xuICAgIHJldHVybiB7XG4gICAgICBjc3M6IGNoYW5uZWxzLnRvQ3NzKHIsIGcsIGIpLFxuICAgICAgcmdiYTogY2hhbm5lbHMudG9SZ2JhKHIsIGcsIGIpXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9QYWRkZWRIZXgoYzogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3QgcyA9IGMudG9TdHJpbmcoMTYpO1xuICByZXR1cm4gcy5sZW5ndGggPCAyID8gJzAnICsgcyA6IHM7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgY29udHJhc3QgcmF0aW8gYmV0d2VlbiB0d28gcmVsYXRpdmUgbHVtaW5hbmNlIHZhbHVlcy5cbiAqIEBwYXJhbSBsMSBUaGUgZmlyc3QgcmVsYXRpdmUgbHVtaW5hbmNlLlxuICogQHBhcmFtIGwyIFRoZSBmaXJzdCByZWxhdGl2ZSBsdW1pbmFuY2UuXG4gKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9XQ0FHMjAvI2NvbnRyYXN0LXJhdGlvZGVmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250cmFzdFJhdGlvKGwxOiBudW1iZXIsIGwyOiBudW1iZXIpOiBudW1iZXIge1xuICBpZiAobDEgPCBsMikge1xuICAgIHJldHVybiAobDIgKyAwLjA1KSAvIChsMSArIDAuMDUpO1xuICB9XG4gIHJldHVybiAobDEgKyAwLjA1KSAvIChsMiArIDAuMDUpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ29sb3IsIElDb2xvckNvbnRyYXN0Q2FjaGUgfSBmcm9tICdicm93c2VyL1R5cGVzJztcblxuZXhwb3J0IGNsYXNzIENvbG9yQ29udHJhc3RDYWNoZSBpbXBsZW1lbnRzIElDb2xvckNvbnRyYXN0Q2FjaGUge1xuICBwcml2YXRlIF9jb2xvcjogeyBbYmc6IG51bWJlcl06IHsgW2ZnOiBudW1iZXJdOiBJQ29sb3IgfCBudWxsIHwgdW5kZWZpbmVkIH0gfCB1bmRlZmluZWQgfSA9IHt9O1xuICBwcml2YXRlIF9yZ2JhOiB7IFtiZzogbnVtYmVyXTogeyBbZmc6IG51bWJlcl06IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQgfSB8IHVuZGVmaW5lZCB9ID0ge307XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvbG9yID0ge307XG4gICAgdGhpcy5fcmdiYSA9IHt9O1xuICB9XG5cbiAgcHVibGljIHNldENzcyhiZzogbnVtYmVyLCBmZzogbnVtYmVyLCB2YWx1ZTogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fcmdiYVtiZ10pIHtcbiAgICAgIHRoaXMuX3JnYmFbYmddID0ge307XG4gICAgfVxuICAgIHRoaXMuX3JnYmFbYmddIVtmZ10gPSB2YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDc3MoYmc6IG51bWJlciwgZmc6IG51bWJlcik6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9yZ2JhW2JnXSA/IHRoaXMuX3JnYmFbYmddIVtmZ10gOiB1bmRlZmluZWQ7XG4gIH1cblxuICBwdWJsaWMgc2V0Q29sb3IoYmc6IG51bWJlciwgZmc6IG51bWJlciwgdmFsdWU6IElDb2xvciB8IG51bGwpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvbG9yW2JnXSkge1xuICAgICAgdGhpcy5fY29sb3JbYmddID0ge307XG4gICAgfVxuICAgIHRoaXMuX2NvbG9yW2JnXSFbZmddID0gdmFsdWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29sb3IoYmc6IG51bWJlciwgZmc6IG51bWJlcik6IElDb2xvciB8IG51bGwgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9jb2xvcltiZ10gPyB0aGlzLl9jb2xvcltiZ10hW2ZnXSA6IHVuZGVmaW5lZDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ29sb3JNYW5hZ2VyLCBJQ29sb3IsIElDb2xvclNldCwgSUNvbG9yQ29udHJhc3RDYWNoZSB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSVRoZW1lIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IGNoYW5uZWxzLCBjb2xvciwgY3NzIH0gZnJvbSAnYnJvd3Nlci9Db2xvcic7XG5pbXBvcnQgeyBDb2xvckNvbnRyYXN0Q2FjaGUgfSBmcm9tICdicm93c2VyL0NvbG9yQ29udHJhc3RDYWNoZSc7XG5cbmNvbnN0IERFRkFVTFRfRk9SRUdST1VORCA9IGNzcy50b0NvbG9yKCcjZmZmZmZmJyk7XG5jb25zdCBERUZBVUxUX0JBQ0tHUk9VTkQgPSBjc3MudG9Db2xvcignIzAwMDAwMCcpO1xuY29uc3QgREVGQVVMVF9DVVJTT1IgPSBjc3MudG9Db2xvcignI2ZmZmZmZicpO1xuY29uc3QgREVGQVVMVF9DVVJTT1JfQUNDRU5UID0gY3NzLnRvQ29sb3IoJyMwMDAwMDAnKTtcbmNvbnN0IERFRkFVTFRfU0VMRUNUSU9OID0ge1xuICBjc3M6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyknLFxuICByZ2JhOiAweEZGRkZGRjREXG59O1xuXG4vLyBBbiBJSUZFIHRvIGdlbmVyYXRlIERFRkFVTFRfQU5TSV9DT0xPUlMuIERvIG5vdCBtdXRhdGUgREVGQVVMVF9BTlNJX0NPTE9SUywgaW5zdGVhZCBtYWtlIGEgY29weVxuLy8gYW5kIG11dGF0ZSB0aGF0LlxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQU5TSV9DT0xPUlMgPSAoKCkgPT4ge1xuICBjb25zdCBjb2xvcnMgPSBbXG4gICAgLy8gZGFyazpcbiAgICBjc3MudG9Db2xvcignIzJlMzQzNicpLFxuICAgIGNzcy50b0NvbG9yKCcjY2MwMDAwJyksXG4gICAgY3NzLnRvQ29sb3IoJyM0ZTlhMDYnKSxcbiAgICBjc3MudG9Db2xvcignI2M0YTAwMCcpLFxuICAgIGNzcy50b0NvbG9yKCcjMzQ2NWE0JyksXG4gICAgY3NzLnRvQ29sb3IoJyM3NTUwN2InKSxcbiAgICBjc3MudG9Db2xvcignIzA2OTg5YScpLFxuICAgIGNzcy50b0NvbG9yKCcjZDNkN2NmJyksXG4gICAgLy8gYnJpZ2h0OlxuICAgIGNzcy50b0NvbG9yKCcjNTU1NzUzJyksXG4gICAgY3NzLnRvQ29sb3IoJyNlZjI5MjknKSxcbiAgICBjc3MudG9Db2xvcignIzhhZTIzNCcpLFxuICAgIGNzcy50b0NvbG9yKCcjZmNlOTRmJyksXG4gICAgY3NzLnRvQ29sb3IoJyM3MjlmY2YnKSxcbiAgICBjc3MudG9Db2xvcignI2FkN2ZhOCcpLFxuICAgIGNzcy50b0NvbG9yKCcjMzRlMmUyJyksXG4gICAgY3NzLnRvQ29sb3IoJyNlZWVlZWMnKVxuICBdO1xuXG4gIC8vIEZpbGwgaW4gdGhlIHJlbWFpbmluZyAyNDAgQU5TSSBjb2xvcnMuXG4gIC8vIEdlbmVyYXRlIGNvbG9ycyAoMTYtMjMxKVxuICBjb25zdCB2ID0gWzB4MDAsIDB4NWYsIDB4ODcsIDB4YWYsIDB4ZDcsIDB4ZmZdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDIxNjsgaSsrKSB7XG4gICAgY29uc3QgciA9IHZbKGkgLyAzNikgJSA2IHwgMF07XG4gICAgY29uc3QgZyA9IHZbKGkgLyA2KSAlIDYgfCAwXTtcbiAgICBjb25zdCBiID0gdltpICUgNl07XG4gICAgY29sb3JzLnB1c2goe1xuICAgICAgY3NzOiBjaGFubmVscy50b0NzcyhyLCBnLCBiKSxcbiAgICAgIHJnYmE6IGNoYW5uZWxzLnRvUmdiYShyLCBnLCBiKVxuICAgIH0pO1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgZ3JleXMgKDIzMi0yNTUpXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMjQ7IGkrKykge1xuICAgIGNvbnN0IGMgPSA4ICsgaSAqIDEwO1xuICAgIGNvbG9ycy5wdXNoKHtcbiAgICAgIGNzczogY2hhbm5lbHMudG9Dc3MoYywgYywgYyksXG4gICAgICByZ2JhOiBjaGFubmVscy50b1JnYmEoYywgYywgYylcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBjb2xvcnM7XG59KSgpO1xuXG4vKipcbiAqIE1hbmFnZXMgdGhlIHNvdXJjZSBvZiB0cnV0aCBmb3IgYSB0ZXJtaW5hbCdzIGNvbG9ycy5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbG9yTWFuYWdlciBpbXBsZW1lbnRzIElDb2xvck1hbmFnZXIge1xuICBwdWJsaWMgY29sb3JzOiBJQ29sb3JTZXQ7XG4gIHByaXZhdGUgX2N0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICBwcml2YXRlIF9saXRtdXNDb2xvcjogQ2FudmFzR3JhZGllbnQ7XG4gIHByaXZhdGUgX2NvbnRyYXN0Q2FjaGU6IElDb2xvckNvbnRyYXN0Q2FjaGU7XG5cbiAgY29uc3RydWN0b3IoZG9jdW1lbnQ6IERvY3VtZW50LCBwdWJsaWMgYWxsb3dUcmFuc3BhcmVuY3k6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjYW52YXMud2lkdGggPSAxO1xuICAgIGNhbnZhcy5oZWlnaHQgPSAxO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGlmICghY3R4KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBnZXQgcmVuZGVyaW5nIGNvbnRleHQnKTtcbiAgICB9XG4gICAgdGhpcy5fY3R4ID0gY3R4O1xuICAgIHRoaXMuX2N0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnY29weSc7XG4gICAgdGhpcy5fbGl0bXVzQ29sb3IgPSB0aGlzLl9jdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgMSwgMSk7XG4gICAgdGhpcy5fY29udHJhc3RDYWNoZSA9IG5ldyBDb2xvckNvbnRyYXN0Q2FjaGUoKTtcbiAgICB0aGlzLmNvbG9ycyA9IHtcbiAgICAgIGZvcmVncm91bmQ6IERFRkFVTFRfRk9SRUdST1VORCxcbiAgICAgIGJhY2tncm91bmQ6IERFRkFVTFRfQkFDS0dST1VORCxcbiAgICAgIGN1cnNvcjogREVGQVVMVF9DVVJTT1IsXG4gICAgICBjdXJzb3JBY2NlbnQ6IERFRkFVTFRfQ1VSU09SX0FDQ0VOVCxcbiAgICAgIHNlbGVjdGlvbjogREVGQVVMVF9TRUxFQ1RJT04sXG4gICAgICBzZWxlY3Rpb25PcGFxdWU6IGNvbG9yLmJsZW5kKERFRkFVTFRfQkFDS0dST1VORCwgREVGQVVMVF9TRUxFQ1RJT04pLFxuICAgICAgYW5zaTogREVGQVVMVF9BTlNJX0NPTE9SUy5zbGljZSgpLFxuICAgICAgY29udHJhc3RDYWNoZTogdGhpcy5fY29udHJhc3RDYWNoZVxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgb25PcHRpb25zQ2hhbmdlKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKGtleSA9PT0gJ21pbmltdW1Db250cmFzdFJhdGlvJykge1xuICAgICAgdGhpcy5fY29udHJhc3RDYWNoZS5jbGVhcigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB0ZXJtaW5hbCdzIHRoZW1lLlxuICAgKiBAcGFyYW0gdGhlbWUgVGhlICB0aGVtZSB0byB1c2UuIElmIGEgcGFydGlhbCB0aGVtZSBpcyBwcm92aWRlZCB0aGVuIGRlZmF1bHRcbiAgICogY29sb3JzIHdpbGwgYmUgdXNlZCB3aGVyZSBjb2xvcnMgYXJlIG5vdCBkZWZpbmVkLlxuICAgKi9cbiAgcHVibGljIHNldFRoZW1lKHRoZW1lOiBJVGhlbWUgPSB7fSk6IHZvaWQge1xuICAgIHRoaXMuY29sb3JzLmZvcmVncm91bmQgPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmZvcmVncm91bmQsIERFRkFVTFRfRk9SRUdST1VORCk7XG4gICAgdGhpcy5jb2xvcnMuYmFja2dyb3VuZCA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYmFja2dyb3VuZCwgREVGQVVMVF9CQUNLR1JPVU5EKTtcbiAgICB0aGlzLmNvbG9ycy5jdXJzb3IgPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmN1cnNvciwgREVGQVVMVF9DVVJTT1IsIHRydWUpO1xuICAgIHRoaXMuY29sb3JzLmN1cnNvckFjY2VudCA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuY3Vyc29yQWNjZW50LCBERUZBVUxUX0NVUlNPUl9BQ0NFTlQsIHRydWUpO1xuICAgIHRoaXMuY29sb3JzLnNlbGVjdGlvbiA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuc2VsZWN0aW9uLCBERUZBVUxUX1NFTEVDVElPTiwgdHJ1ZSk7XG4gICAgdGhpcy5jb2xvcnMuc2VsZWN0aW9uT3BhcXVlID0gY29sb3IuYmxlbmQodGhpcy5jb2xvcnMuYmFja2dyb3VuZCwgdGhpcy5jb2xvcnMuc2VsZWN0aW9uKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzBdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5ibGFjaywgREVGQVVMVF9BTlNJX0NPTE9SU1swXSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVsxXSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUucmVkLCBERUZBVUxUX0FOU0lfQ09MT1JTWzFdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzJdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5ncmVlbiwgREVGQVVMVF9BTlNJX0NPTE9SU1syXSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVszXSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUueWVsbG93LCBERUZBVUxUX0FOU0lfQ09MT1JTWzNdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzRdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5ibHVlLCBERUZBVUxUX0FOU0lfQ09MT1JTWzRdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzVdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5tYWdlbnRhLCBERUZBVUxUX0FOU0lfQ09MT1JTWzVdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzZdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5jeWFuLCBERUZBVUxUX0FOU0lfQ09MT1JTWzZdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzddID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS53aGl0ZSwgREVGQVVMVF9BTlNJX0NPTE9SU1s3XSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVs4XSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYnJpZ2h0QmxhY2ssIERFRkFVTFRfQU5TSV9DT0xPUlNbOF0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbOV0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJyaWdodFJlZCwgREVGQVVMVF9BTlNJX0NPTE9SU1s5XSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVsxMF0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJyaWdodEdyZWVuLCBERUZBVUxUX0FOU0lfQ09MT1JTWzEwXSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVsxMV0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJyaWdodFllbGxvdywgREVGQVVMVF9BTlNJX0NPTE9SU1sxMV0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbMTJdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5icmlnaHRCbHVlLCBERUZBVUxUX0FOU0lfQ09MT1JTWzEyXSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVsxM10gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJyaWdodE1hZ2VudGEsIERFRkFVTFRfQU5TSV9DT0xPUlNbMTNdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzE0XSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYnJpZ2h0Q3lhbiwgREVGQVVMVF9BTlNJX0NPTE9SU1sxNF0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbMTVdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5icmlnaHRXaGl0ZSwgREVGQVVMVF9BTlNJX0NPTE9SU1sxNV0pO1xuICAgIC8vIENsZWFyIG91ciB0aGUgY2FjaGVcbiAgICB0aGlzLl9jb250cmFzdENhY2hlLmNsZWFyKCk7XG4gIH1cblxuICBwcml2YXRlIF9wYXJzZUNvbG9yKFxuICAgIGNzczogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIGZhbGxiYWNrOiBJQ29sb3IsXG4gICAgYWxsb3dUcmFuc3BhcmVuY3k6IGJvb2xlYW4gPSB0aGlzLmFsbG93VHJhbnNwYXJlbmN5XG4gICk6IElDb2xvciB7XG4gICAgaWYgKGNzcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgfVxuXG4gICAgLy8gSWYgcGFyc2luZyB0aGUgdmFsdWUgcmVzdWx0cyBpbiBmYWlsdXJlLCB0aGVuIGl0IG11c3QgYmUgaWdub3JlZCwgYW5kIHRoZSBhdHRyaWJ1dGUgbXVzdFxuICAgIC8vIHJldGFpbiBpdHMgcHJldmlvdXMgdmFsdWUuXG4gICAgLy8gLS0gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvY2FudmFzLmh0bWwjZmlsbC1hbmQtc3Ryb2tlLXN0eWxlc1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9saXRtdXNDb2xvcjtcbiAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gY3NzO1xuICAgIGlmICh0eXBlb2YgdGhpcy5fY3R4LmZpbGxTdHlsZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnNvbGUud2FybihgQ29sb3I6ICR7Y3NzfSBpcyBpbnZhbGlkIHVzaW5nIGZhbGxiYWNrICR7ZmFsbGJhY2suY3NzfWApO1xuICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIH1cblxuICAgIHRoaXMuX2N0eC5maWxsUmVjdCgwLCAwLCAxLCAxKTtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5fY3R4LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKS5kYXRhO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHByaW50ZWQgY29sb3Igd2FzIHRyYW5zcGFyZW50XG4gICAgaWYgKGRhdGFbM10gIT09IDB4RkYpIHtcbiAgICAgIGlmICghYWxsb3dUcmFuc3BhcmVuY3kpIHtcbiAgICAgICAgLy8gSWRlYWxseSB3ZSdkIGp1c3QgaWdub3JlIHRoZSBhbHBoYSBjaGFubmVsLCBidXQuLi5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gQnJvd3NlcnMgbWF5IG5vdCBnaXZlIGJhY2sgZXhhY3RseSB0aGUgc2FtZSBSR0IgdmFsdWVzIHdlIHB1dCBpbiwgYmVjYXVzZSBtb3N0L2FsbFxuICAgICAgICAvLyBjb252ZXJ0IHRoZSBjb2xvciB0byBhIHByZS1tdWx0aXBsaWVkIHJlcHJlc2VudGF0aW9uLiBnZXRJbWFnZURhdGEgY29udmVydHMgdGhhdCBiYWNrIHRvXG4gICAgICAgIC8vIGEgdW4tcHJlbXVsdGlwbGVkIHJlcHJlc2VudGF0aW9uLCBidXQgdGhlIHByZWNpc2lvbiBsb3NzIG1heSBtYWtlIHRoZSBSR0IgY2hhbm5lbHMgdW51YWJsZVxuICAgICAgICAvLyBvbiB0aGVpciBvd24uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEUuZy4gSW4gQ2hyb21lICMxMjM0NTYxMCB0dXJucyBpbnRvICMxMDMwNTAxMCwgYW5kIGluIHRoZSBleHRyZW1lIGNhc2UsIDB4RkZGRkZGMDAgdHVybnNcbiAgICAgICAgLy8gaW50byAweDAwMDAwMDAwLlxuICAgICAgICAvL1xuICAgICAgICAvLyBcIk5vdGU6IER1ZSB0byB0aGUgbG9zc3kgbmF0dXJlIG9mIGNvbnZlcnRpbmcgdG8gYW5kIGZyb20gcHJlbXVsdGlwbGllZCBhbHBoYSBjb2xvciB2YWx1ZXMsXG4gICAgICAgIC8vIHBpeGVscyB0aGF0IGhhdmUganVzdCBiZWVuIHNldCB1c2luZyBwdXRJbWFnZURhdGEoKSBtaWdodCBiZSByZXR1cm5lZCB0byBhbiBlcXVpdmFsZW50XG4gICAgICAgIC8vIGdldEltYWdlRGF0YSgpIGFzIGRpZmZlcmVudCB2YWx1ZXMuXCJcbiAgICAgICAgLy8gLS0gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvY2FudmFzLmh0bWwjcGl4ZWwtbWFuaXB1bGF0aW9uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFNvIGxldCdzIGp1c3QgdXNlIHRoZSBmYWxsYmFjayBjb2xvciBpbiB0aGlzIGNhc2UgaW5zdGVhZC5cbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBDb2xvcjogJHtjc3N9IGlzIHVzaW5nIHRyYW5zcGFyZW5jeSwgYnV0IGFsbG93VHJhbnNwYXJlbmN5IGlzIGZhbHNlLiBgICtcbiAgICAgICAgICBgVXNpbmcgZmFsbGJhY2sgJHtmYWxsYmFjay5jc3N9LmBcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgICAgfVxuXG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9jYW52YXMuaHRtbCNzZXJpYWxpc2F0aW9uLW9mLWEtY29sb3JcbiAgICAgIC8vIHRoZSBjb2xvciB2YWx1ZSBoYXMgYWxwaGEgbGVzcyB0aGFuIDEuMCwgYW5kIHRoZSBzdHJpbmcgaXMgdGhlIGNvbG9yIHZhbHVlIGluIHRoZSBDU1MgcmdiYSgpXG4gICAgICBjb25zdCBbciwgZywgYiwgYV0gPSB0aGlzLl9jdHguZmlsbFN0eWxlLnN1YnN0cmluZyg1LCB0aGlzLl9jdHguZmlsbFN0eWxlLmxlbmd0aCAtIDEpLnNwbGl0KCcsJykubWFwKGNvbXBvbmVudCA9PiBOdW1iZXIoY29tcG9uZW50KSk7XG4gICAgICBjb25zdCBhbHBoYSA9IE1hdGgucm91bmQoYSAqIDI1NSk7XG4gICAgICBjb25zdCByZ2JhOiBudW1iZXIgPSBjaGFubmVscy50b1JnYmEociwgZywgYiwgYWxwaGEpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmdiYSxcbiAgICAgICAgY3NzOiBjaGFubmVscy50b0NzcyhyLCBnLCBiLCBhbHBoYSlcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2NhbnZhcy5odG1sI3NlcmlhbGlzYXRpb24tb2YtYS1jb2xvclxuICAgICAgLy8gaWYgaXQgaGFzIGFscGhhIGVxdWFsIHRvIDEuMCwgdGhlbiB0aGUgc3RyaW5nIGlzIGEgbG93ZXJjYXNlIHNpeC1kaWdpdCBoZXggdmFsdWUsIHByZWZpeGVkIHdpdGggYSBcIiNcIiBjaGFyYWN0ZXJcbiAgICAgIGNzczogdGhpcy5fY3R4LmZpbGxTdHlsZSxcbiAgICAgIHJnYmE6IGNoYW5uZWxzLnRvUmdiYShkYXRhWzBdLCBkYXRhWzFdLCBkYXRhWzJdLCBkYXRhWzNdKVxuICAgIH07XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG4vKipcbiAqIEFkZHMgYSBkaXNwb3NhYmxlIGxpc3RlbmVyIHRvIGEgbm9kZSBpbiB0aGUgRE9NLCByZXR1cm5pbmcgdGhlIGRpc3Bvc2FibGUuXG4gKiBAcGFyYW0gdHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAqIEBwYXJhbSBoYW5kbGVyIFRoZSBoYW5kbGVyIGZvciB0aGUgbGlzdGVuZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIoXG4gIG5vZGU6IEVsZW1lbnQgfCBXaW5kb3cgfCBEb2N1bWVudCxcbiAgdHlwZTogc3RyaW5nLFxuICBoYW5kbGVyOiAoZTogYW55KSA9PiB2b2lkLFxuICB1c2VDYXB0dXJlPzogYm9vbGVhblxuKTogSURpc3Bvc2FibGUge1xuICBub2RlLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgdXNlQ2FwdHVyZSk7XG4gIGxldCBkaXNwb3NlZCA9IGZhbHNlO1xuICByZXR1cm4ge1xuICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgIGlmICghZGlzcG9zZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZGlzcG9zZWQgPSB0cnVlO1xuICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIHVzZUNhcHR1cmUpO1xuICAgIH1cbiAgfTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUxpbmtpZmllckV2ZW50LCBJTGlua01hdGNoZXIsIExpbmtNYXRjaGVySGFuZGxlciwgSUxpbmtNYXRjaGVyT3B0aW9ucywgSUxpbmtpZmllciwgSU1vdXNlWm9uZU1hbmFnZXIsIElNb3VzZVpvbmUsIElSZWdpc3RlcmVkTGlua01hdGNoZXIgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElCdWZmZXJTdHJpbmdJdGVyYXRvclJlc3VsdCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgZ2V0U3RyaW5nQ2VsbFdpZHRoIH0gZnJvbSAnY29tbW9uL0NoYXJXaWR0aCc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSUxvZ1NlcnZpY2UsIElCdWZmZXJTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuLyoqXG4gKiBMaW1pdCBvZiB0aGUgdW53cmFwcGluZyBsaW5lIGV4cGFuc2lvbiAob3ZlcnNjYW4pIGF0IHRoZSB0b3AgYW5kIGJvdHRvbVxuICogb2YgdGhlIGFjdHVhbCB2aWV3cG9ydCBpbiBBU0NJSSBjaGFyYWN0ZXJzLlxuICogQSBsaW1pdCBvZiAyMDAwIHNob3VsZCBtYXRjaCBtb3N0IHNhbmUgdXJscy5cbiAqL1xuY29uc3QgT1ZFUlNDQU5fQ0hBUl9MSU1JVCA9IDIwMDA7XG5cbi8qKlxuICogVGhlIExpbmtpZmllciBhcHBsaWVzIGxpbmtzIHRvIHJvd3Mgc2hvcnRseSBhZnRlciB0aGV5IGhhdmUgYmVlbiByZWZyZXNoZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBMaW5raWZpZXIgaW1wbGVtZW50cyBJTGlua2lmaWVyIHtcbiAgLyoqXG4gICAqIFRoZSB0aW1lIHRvIHdhaXQgYWZ0ZXIgYSByb3cgaXMgY2hhbmdlZCBiZWZvcmUgaXQgaXMgbGlua2lmaWVkLiBUaGlzIHByZXZlbnRzXG4gICAqIHRoZSBjb3N0bHkgb3BlcmF0aW9uIG9mIHNlYXJjaGluZyBldmVyeSByb3cgbXVsdGlwbGUgdGltZXMsIHBvdGVudGlhbGx5IGFcbiAgICogaHVnZSBhbW91bnQgb2YgdGltZXMuXG4gICAqL1xuICBwcm90ZWN0ZWQgc3RhdGljIF90aW1lQmVmb3JlTGF0ZW5jeSA9IDIwMDtcblxuICBwcm90ZWN0ZWQgX2xpbmtNYXRjaGVyczogSVJlZ2lzdGVyZWRMaW5rTWF0Y2hlcltdID0gW107XG5cbiAgcHJpdmF0ZSBfbW91c2Vab25lTWFuYWdlcjogSU1vdXNlWm9uZU1hbmFnZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2VsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgX3Jvd3NUaW1lb3V0SWQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfbmV4dExpbmtNYXRjaGVySWQgPSAwO1xuICBwcml2YXRlIF9yb3dzVG9MaW5raWZ5OiB7IHN0YXJ0OiBudW1iZXIgfCB1bmRlZmluZWQsIGVuZDogbnVtYmVyIHwgdW5kZWZpbmVkIH07XG5cbiAgcHJpdmF0ZSBfb25MaW5rSG92ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPElMaW5raWZpZXJFdmVudD4oKTtcbiAgcHVibGljIGdldCBvbkxpbmtIb3ZlcigpOiBJRXZlbnQ8SUxpbmtpZmllckV2ZW50PiB7IHJldHVybiB0aGlzLl9vbkxpbmtIb3Zlci5ldmVudDsgfVxuICBwcml2YXRlIF9vbkxpbmtMZWF2ZSA9IG5ldyBFdmVudEVtaXR0ZXI8SUxpbmtpZmllckV2ZW50PigpO1xuICBwdWJsaWMgZ2V0IG9uTGlua0xlYXZlKCk6IElFdmVudDxJTGlua2lmaWVyRXZlbnQ+IHsgcmV0dXJuIHRoaXMuX29uTGlua0xlYXZlLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uTGlua1Rvb2x0aXAgPSBuZXcgRXZlbnRFbWl0dGVyPElMaW5raWZpZXJFdmVudD4oKTtcbiAgcHVibGljIGdldCBvbkxpbmtUb29sdGlwKCk6IElFdmVudDxJTGlua2lmaWVyRXZlbnQ+IHsgcmV0dXJuIHRoaXMuX29uTGlua1Rvb2x0aXAuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2xvZ1NlcnZpY2U6IElMb2dTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuX3Jvd3NUb0xpbmtpZnkgPSB7XG4gICAgICBzdGFydDogdW5kZWZpbmVkLFxuICAgICAgZW5kOiB1bmRlZmluZWRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dGFjaGVzIHRoZSBsaW5raWZpZXIgdG8gdGhlIERPTSwgZW5hYmxpbmcgbGlua2lmaWNhdGlvbi5cbiAgICogQHBhcmFtIG1vdXNlWm9uZU1hbmFnZXIgVGhlIG1vdXNlIHpvbmUgbWFuYWdlciB0byByZWdpc3RlciBsaW5rIHpvbmVzIHdpdGguXG4gICAqL1xuICBwdWJsaWMgYXR0YWNoVG9Eb20oZWxlbWVudDogSFRNTEVsZW1lbnQsIG1vdXNlWm9uZU1hbmFnZXI6IElNb3VzZVpvbmVNYW5hZ2VyKTogdm9pZCB7XG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5fbW91c2Vab25lTWFuYWdlciA9IG1vdXNlWm9uZU1hbmFnZXI7XG4gIH1cblxuICAvKipcbiAgICogUXVldWUgbGlua2lmaWNhdGlvbiBvbiBhIHNldCBvZiByb3dzLlxuICAgKiBAcGFyYW0gc3RhcnQgVGhlIHJvdyB0byBsaW5raWZ5IGZyb20gKGluY2x1c2l2ZSkuXG4gICAqIEBwYXJhbSBlbmQgVGhlIHJvdyB0byBsaW5raWZ5IHRvIChpbmNsdXNpdmUpLlxuICAgKi9cbiAgcHVibGljIGxpbmtpZnlSb3dzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gRG9uJ3QgYXR0ZW1wdCBsaW5raWZ5IGlmIG5vdCB5ZXQgYXR0YWNoZWQgdG8gRE9NXG4gICAgaWYgKCF0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW5jcmVhc2UgcmFuZ2UgdG8gbGlua2lmeVxuICAgIGlmICh0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0ID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcm93c1RvTGlua2lmeS5lbmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fcm93c1RvTGlua2lmeS5zdGFydCA9IHN0YXJ0O1xuICAgICAgdGhpcy5fcm93c1RvTGlua2lmeS5lbmQgPSBlbmQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQgPSBNYXRoLm1pbih0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0LCBzdGFydCk7XG4gICAgICB0aGlzLl9yb3dzVG9MaW5raWZ5LmVuZCA9IE1hdGgubWF4KHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kLCBlbmQpO1xuICAgIH1cblxuICAgIC8vIENsZWFyIG91dCBhbnkgZXhpc3RpbmcgbGlua3Mgb24gdGhpcyByb3cgcmFuZ2VcbiAgICB0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyLmNsZWFyQWxsKHN0YXJ0LCBlbmQpO1xuXG4gICAgLy8gUmVzdGFydCB0aW1lclxuICAgIGlmICh0aGlzLl9yb3dzVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fcm93c1RpbWVvdXRJZCk7XG4gICAgfVxuICAgIHRoaXMuX3Jvd3NUaW1lb3V0SWQgPSA8bnVtYmVyPjxhbnk+c2V0VGltZW91dCgoKSA9PiB0aGlzLl9saW5raWZ5Um93cygpLCBMaW5raWZpZXIuX3RpbWVCZWZvcmVMYXRlbmN5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaW5raWZpZXMgdGhlIHJvd3MgcmVxdWVzdGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfbGlua2lmeVJvd3MoKTogdm9pZCB7XG4gICAgdGhpcy5fcm93c1RpbWVvdXRJZCA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIGlmICh0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0ID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcm93c1RvTGlua2lmeS5lbmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnX3Jvd1RvTGlua2lmeSB3YXMgdW5zZXQgYmVmb3JlIF9saW5raWZ5Um93cyB3YXMgY2FsbGVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHRoZSBzdGFydCByb3cgZXhpc3RzXG4gICAgY29uc3QgYWJzb2x1dGVSb3dJbmRleFN0YXJ0ID0gYnVmZmVyLnlkaXNwICsgdGhpcy5fcm93c1RvTGlua2lmeS5zdGFydDtcbiAgICBpZiAoYWJzb2x1dGVSb3dJbmRleFN0YXJ0ID49IGJ1ZmZlci5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJbnZhbGlkYXRlIGJhZCBlbmQgcm93IHZhbHVlcyAoaWYgYSByZXNpemUgaGFwcGVuZWQpXG4gICAgY29uc3QgYWJzb2x1dGVSb3dJbmRleEVuZCA9IGJ1ZmZlci55ZGlzcCArIE1hdGgubWluKHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpICsgMTtcblxuICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgcmFuZ2Ugb2YgdW53cmFwcGVkIGNvbnRlbnQgc3RyaW5ncyB3aXRoaW4gc3RhcnQuLmVuZFxuICAgIC8vIChleGNsdWRpbmcpLlxuICAgIC8vIF9kb0xpbmtpZnlSb3cgZ2V0cyBmdWxsIHVud3JhcHBlZCBsaW5lcyB3aXRoIHRoZSBzdGFydCByb3cgYXMgYnVmZmVyIG9mZnNldFxuICAgIC8vIGZvciBldmVyeSBtYXRjaGVyLlxuICAgIC8vIFRoZSB1bndyYXBwaW5nIGlzIG5lZWRlZCB0byBhbHNvIG1hdGNoIGNvbnRlbnQgdGhhdCBnb3Qgd3JhcHBlZCBhY3Jvc3NcbiAgICAvLyBzZXZlcmFsIGJ1ZmZlciBsaW5lcy4gVG8gYXZvaWQgYSB3b3JzdCBjYXNlIHNjZW5hcmlvIHdoZXJlIHRoZSB3aG9sZSBidWZmZXJcbiAgICAvLyBjb250YWlucyBqdXN0IGEgc2luZ2xlIHVud3JhcHBlZCBzdHJpbmcgd2UgbGltaXQgdGhpcyBsaW5lIGV4cGFuc2lvbiBiZXlvbmRcbiAgICAvLyB0aGUgdmlld3BvcnQgdG8gK09WRVJTQ0FOX0NIQVJfTElNSVQgY2hhcnMgKG92ZXJzY2FuKSBhdCB0b3AgYW5kIGJvdHRvbS5cbiAgICAvLyBUaGlzIGNvbWVzIHdpdGggdGhlIHRyYWRlb2ZmIHRoYXQgbWF0Y2hlcyBsb25nZXIgdGhhbiBPVkVSU0NBTl9DSEFSX0xJTUlUXG4gICAgLy8gY2hhcnMgd2lsbCBub3QgbWF0Y2ggYW55bW9yZSBhdCB0aGUgdmlld3BvcnQgYm9yZGVycy5cbiAgICBjb25zdCBvdmVyc2NhbkxpbmVMaW1pdCA9IE1hdGguY2VpbChPVkVSU0NBTl9DSEFSX0xJTUlUIC8gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTtcbiAgICBjb25zdCBpdGVyYXRvciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLml0ZXJhdG9yKFxuICAgICAgZmFsc2UsIGFic29sdXRlUm93SW5kZXhTdGFydCwgYWJzb2x1dGVSb3dJbmRleEVuZCwgb3ZlcnNjYW5MaW5lTGltaXQsIG92ZXJzY2FuTGluZUxpbWl0KTtcbiAgICB3aGlsZSAoaXRlcmF0b3IuaGFzTmV4dCgpKSB7XG4gICAgICBjb25zdCBsaW5lRGF0YTogSUJ1ZmZlclN0cmluZ0l0ZXJhdG9yUmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9saW5rTWF0Y2hlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fZG9MaW5raWZ5Um93KGxpbmVEYXRhLnJhbmdlLmZpcnN0LCBsaW5lRGF0YS5jb250ZW50LCB0aGlzLl9saW5rTWF0Y2hlcnNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcm93c1RvTGlua2lmeS5lbmQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGluayBtYXRjaGVyLCBhbGxvd2luZyBjdXN0b20gbGluayBwYXR0ZXJucyB0byBiZSBtYXRjaGVkIGFuZFxuICAgKiBoYW5kbGVkLlxuICAgKiBAcGFyYW0gcmVnZXggVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzZWFyY2ggZm9yLiBTcGVjaWZpY2FsbHksIHRoaXNcbiAgICogc2VhcmNoZXMgdGhlIHRleHRDb250ZW50IG9mIHRoZSByb3dzLiBZb3Ugd2lsbCB3YW50IHRvIHVzZSBcXHMgdG8gbWF0Y2ggYVxuICAgKiBzcGFjZSAnICcgY2hhcmFjdGVyIGZvciBleGFtcGxlLlxuICAgKiBAcGFyYW0gaGFuZGxlciBUaGUgY2FsbGJhY2sgd2hlbiB0aGUgbGluayBpcyBjYWxsZWQuXG4gICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgZm9yIHRoZSBsaW5rIG1hdGNoZXIuXG4gICAqIEByZXR1cm4gVGhlIElEIG9mIHRoZSBuZXcgbWF0Y2hlciwgdGhpcyBjYW4gYmUgdXNlZCB0byBkZXJlZ2lzdGVyLlxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyTGlua01hdGNoZXIocmVnZXg6IFJlZ0V4cCwgaGFuZGxlcjogTGlua01hdGNoZXJIYW5kbGVyLCBvcHRpb25zOiBJTGlua01hdGNoZXJPcHRpb25zID0ge30pOiBudW1iZXIge1xuICAgIGlmICghaGFuZGxlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdoYW5kbGVyIG11c3QgYmUgZGVmaW5lZCcpO1xuICAgIH1cbiAgICBjb25zdCBtYXRjaGVyOiBJUmVnaXN0ZXJlZExpbmtNYXRjaGVyID0ge1xuICAgICAgaWQ6IHRoaXMuX25leHRMaW5rTWF0Y2hlcklkKyssXG4gICAgICByZWdleCxcbiAgICAgIGhhbmRsZXIsXG4gICAgICBtYXRjaEluZGV4OiBvcHRpb25zLm1hdGNoSW5kZXgsXG4gICAgICB2YWxpZGF0aW9uQ2FsbGJhY2s6IG9wdGlvbnMudmFsaWRhdGlvbkNhbGxiYWNrLFxuICAgICAgaG92ZXJUb29sdGlwQ2FsbGJhY2s6IG9wdGlvbnMudG9vbHRpcENhbGxiYWNrLFxuICAgICAgaG92ZXJMZWF2ZUNhbGxiYWNrOiBvcHRpb25zLmxlYXZlQ2FsbGJhY2ssXG4gICAgICB3aWxsTGlua0FjdGl2YXRlOiBvcHRpb25zLndpbGxMaW5rQWN0aXZhdGUsXG4gICAgICBwcmlvcml0eTogb3B0aW9ucy5wcmlvcml0eSB8fCAwXG4gICAgfTtcbiAgICB0aGlzLl9hZGRMaW5rTWF0Y2hlclRvTGlzdChtYXRjaGVyKTtcbiAgICByZXR1cm4gbWF0Y2hlci5pZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgbGluayBtYXRjaGVyIHRvIHRoZSBsaXN0IGluIHRoZSBjb3JyZWN0IHBvc2l0aW9uIGJhc2VkIG9uIHRoZVxuICAgKiBwcmlvcml0eSBvZiBlYWNoIGxpbmsgbWF0Y2hlci4gTmV3IGxpbmsgbWF0Y2hlcnMgb2YgZXF1YWwgcHJpb3JpdHkgYXJlXG4gICAqIGNvbnNpZGVyZWQgYWZ0ZXIgb2xkZXIgbGluayBtYXRjaGVycy5cbiAgICogQHBhcmFtIG1hdGNoZXIgVGhlIGxpbmsgbWF0Y2hlciB0byBiZSBhZGRlZC5cbiAgICovXG4gIHByaXZhdGUgX2FkZExpbmtNYXRjaGVyVG9MaXN0KG1hdGNoZXI6IElSZWdpc3RlcmVkTGlua01hdGNoZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbGlua01hdGNoZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5fbGlua01hdGNoZXJzLnB1c2gobWF0Y2hlcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuX2xpbmtNYXRjaGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgaWYgKG1hdGNoZXIucHJpb3JpdHkgPD0gdGhpcy5fbGlua01hdGNoZXJzW2ldLnByaW9yaXR5KSB7XG4gICAgICAgIHRoaXMuX2xpbmtNYXRjaGVycy5zcGxpY2UoaSArIDEsIDAsIG1hdGNoZXIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fbGlua01hdGNoZXJzLnNwbGljZSgwLCAwLCBtYXRjaGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXJlZ2lzdGVycyBhIGxpbmsgbWF0Y2hlciBpZiBpdCBoYXMgYmVlbiByZWdpc3RlcmVkLlxuICAgKiBAcGFyYW0gbWF0Y2hlcklkIFRoZSBsaW5rIG1hdGNoZXIncyBJRCAocmV0dXJuZWQgYWZ0ZXIgcmVnaXN0ZXIpXG4gICAqIEByZXR1cm4gV2hldGhlciBhIGxpbmsgbWF0Y2hlciB3YXMgZm91bmQgYW5kIGRlcmVnaXN0ZXJlZC5cbiAgICovXG4gIHB1YmxpYyBkZXJlZ2lzdGVyTGlua01hdGNoZXIobWF0Y2hlcklkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2xpbmtNYXRjaGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuX2xpbmtNYXRjaGVyc1tpXS5pZCA9PT0gbWF0Y2hlcklkKSB7XG4gICAgICAgIHRoaXMuX2xpbmtNYXRjaGVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogTGlua2lmaWVzIGEgcm93IGdpdmVuIGEgc3BlY2lmaWMgaGFuZGxlci5cbiAgICogQHBhcmFtIHJvd0luZGV4IFRoZSByb3cgaW5kZXggdG8gbGlua2lmeSAoYWJzb2x1dGUgaW5kZXgpLlxuICAgKiBAcGFyYW0gdGV4dCBzdHJpbmcgY29udGVudCBvZiB0aGUgdW53cmFwcGVkIHJvdy5cbiAgICogQHBhcmFtIG1hdGNoZXIgVGhlIGxpbmsgbWF0Y2hlciBmb3IgdGhpcyBsaW5lLlxuICAgKi9cbiAgcHJpdmF0ZSBfZG9MaW5raWZ5Um93KHJvd0luZGV4OiBudW1iZXIsIHRleHQ6IHN0cmluZywgbWF0Y2hlcjogSUxpbmtNYXRjaGVyKTogdm9pZCB7XG4gICAgLy8gY2xvbmUgcmVnZXggdG8gZG8gYSBnbG9iYWwgc2VhcmNoIG9uIHRleHRcbiAgICBjb25zdCByZXggPSBuZXcgUmVnRXhwKG1hdGNoZXIucmVnZXguc291cmNlLCAobWF0Y2hlci5yZWdleC5mbGFncyB8fCAnJykgKyAnZycpO1xuICAgIGxldCBtYXRjaDtcbiAgICBsZXQgc3RyaW5nSW5kZXggPSAtMTtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmV4LmV4ZWModGV4dCkpICE9PSBudWxsKSB7XG4gICAgICBjb25zdCB1cmkgPSBtYXRjaFt0eXBlb2YgbWF0Y2hlci5tYXRjaEluZGV4ICE9PSAnbnVtYmVyJyA/IDAgOiBtYXRjaGVyLm1hdGNoSW5kZXhdO1xuICAgICAgaWYgKCF1cmkpIHtcbiAgICAgICAgLy8gc29tZXRoaW5nIG1hdGNoZWQgYnV0IGRvZXMgbm90IGNvbXBseSB3aXRoIHRoZSBnaXZlbiBtYXRjaEluZGV4XG4gICAgICAgIC8vIHNpbmNlIHRoaXMgaXMgbW9zdCBsaWtlbHkgYSBidWcgdGhlIHJlZ2V4IGl0c2VsZiB3ZSBzaW1wbHkgZG8gbm90aGluZyBoZXJlXG4gICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ21hdGNoIGZvdW5kIHdpdGhvdXQgY29ycmVzcG9uZGluZyBtYXRjaEluZGV4JywgbWF0Y2gsIG1hdGNoZXIpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IGluZGV4LCBtYXRjaC5pbmRleCBpcyBmb3IgdGhlIG91dGVyIG1hdGNoIHdoaWNoIGluY2x1ZGVzIG5lZ2F0ZWQgY2hhcnNcbiAgICAgIC8vIHRoZXJlZm9yZSB3ZSBjYW5ub3QgdXNlIG1hdGNoLmluZGV4IGRpcmVjdGx5LCBpbnN0ZWFkIHdlIHNlYXJjaCB0aGUgcG9zaXRpb25cbiAgICAgIC8vIG9mIHRoZSBtYXRjaCBncm91cCBpbiB0ZXh0IGFnYWluXG4gICAgICAvLyBhbHNvIGNvcnJlY3QgcmVnZXggYW5kIHN0cmluZyBzZWFyY2ggb2Zmc2V0cyBmb3IgdGhlIG5leHQgbG9vcCBydW5cbiAgICAgIHN0cmluZ0luZGV4ID0gdGV4dC5pbmRleE9mKHVyaSwgc3RyaW5nSW5kZXggKyAxKTtcbiAgICAgIHJleC5sYXN0SW5kZXggPSBzdHJpbmdJbmRleCArIHVyaS5sZW5ndGg7XG4gICAgICBpZiAoc3RyaW5nSW5kZXggPCAwKSB7XG4gICAgICAgIC8vIGludmFsaWQgc3RyaW5nSW5kZXggKHNob3VsZCBub3QgaGF2ZSBoYXBwZW5lZClcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIGdldCB0aGUgYnVmZmVyIGluZGV4IGFzIFthYnNvbHV0ZSByb3csIGNvbF0gZm9yIHRoZSBtYXRjaFxuICAgICAgY29uc3QgYnVmZmVySW5kZXggPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zdHJpbmdJbmRleFRvQnVmZmVySW5kZXgocm93SW5kZXgsIHN0cmluZ0luZGV4KTtcbiAgICAgIGlmIChidWZmZXJJbmRleFswXSA8IDApIHtcbiAgICAgICAgLy8gaW52YWxpZCBidWZmZXJJbmRleCAoc2hvdWxkIG5vdCBoYXZlIGhhcHBlbmVkKVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChidWZmZXJJbmRleFswXSk7XG4gICAgICBpZiAoIWxpbmUpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGF0dHIgPSBsaW5lLmdldEZnKGJ1ZmZlckluZGV4WzFdKTtcbiAgICAgIGNvbnN0IGZnID0gYXR0ciA/IChhdHRyID4+IDkpICYgMHgxZmYgOiB1bmRlZmluZWQ7XG5cbiAgICAgIGlmIChtYXRjaGVyLnZhbGlkYXRpb25DYWxsYmFjaykge1xuICAgICAgICBtYXRjaGVyLnZhbGlkYXRpb25DYWxsYmFjayh1cmksIGlzVmFsaWQgPT4ge1xuICAgICAgICAgIC8vIERpc2NhcmQgbGluayBpZiB0aGUgbGluZSBoYXMgYWxyZWFkeSBjaGFuZ2VkXG4gICAgICAgICAgaWYgKHRoaXMuX3Jvd3NUaW1lb3V0SWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2FkZExpbmsoYnVmZmVySW5kZXhbMV0sIGJ1ZmZlckluZGV4WzBdIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AsIHVyaSwgbWF0Y2hlciwgZmcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9hZGRMaW5rKGJ1ZmZlckluZGV4WzFdLCBidWZmZXJJbmRleFswXSAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLCB1cmksIG1hdGNoZXIsIGZnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGluayB0byB0aGUgbW91c2Ugem9uZSBtYW5hZ2VyLlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRoZSBsaW5rIHN0YXJ0cy5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0aGUgbGluayBpcyBvbi5cbiAgICogQHBhcmFtIHVyaSBUaGUgVVJJIG9mIHRoZSBsaW5rLlxuICAgKiBAcGFyYW0gbWF0Y2hlciBUaGUgbGluayBtYXRjaGVyIGZvciB0aGUgbGluay5cbiAgICogQHBhcmFtIGZnIFRoZSBsaW5rIGNvbG9yIGZvciBob3ZlciBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX2FkZExpbmsoeDogbnVtYmVyLCB5OiBudW1iZXIsIHVyaTogc3RyaW5nLCBtYXRjaGVyOiBJTGlua01hdGNoZXIsIGZnOiBudW1iZXIgfCB1bmRlZmluZWQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX21vdXNlWm9uZU1hbmFnZXIgfHwgIXRoaXMuX2VsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB3aWR0aCA9IGdldFN0cmluZ0NlbGxXaWR0aCh1cmkpO1xuICAgIGNvbnN0IHgxID0geCAlIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICBjb25zdCB5MSA9IHkgKyBNYXRoLmZsb29yKHggLyB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpO1xuICAgIGxldCB4MiA9ICh4MSArIHdpZHRoKSAlIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICBsZXQgeTIgPSB5MSArIE1hdGguZmxvb3IoKHgxICsgd2lkdGgpIC8gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTtcbiAgICBpZiAoeDIgPT09IDApIHtcbiAgICAgIHgyID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgICAgeTItLTtcbiAgICB9XG5cbiAgICB0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyLmFkZChuZXcgTW91c2Vab25lKFxuICAgICAgeDEgKyAxLFxuICAgICAgeTEgKyAxLFxuICAgICAgeDIgKyAxLFxuICAgICAgeTIgKyAxLFxuICAgICAgZSA9PiB7XG4gICAgICAgIGlmIChtYXRjaGVyLmhhbmRsZXIpIHtcbiAgICAgICAgICByZXR1cm4gbWF0Y2hlci5oYW5kbGVyKGUsIHVyaSk7XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93Lm9wZW4odXJpLCAnX2JsYW5rJyk7XG4gICAgICB9LFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLl9vbkxpbmtIb3Zlci5maXJlKHRoaXMuX2NyZWF0ZUxpbmtIb3ZlckV2ZW50KHgxLCB5MSwgeDIsIHkyLCBmZykpO1xuICAgICAgICB0aGlzLl9lbGVtZW50IS5jbGFzc0xpc3QuYWRkKCd4dGVybS1jdXJzb3ItcG9pbnRlcicpO1xuICAgICAgfSxcbiAgICAgIGUgPT4ge1xuICAgICAgICB0aGlzLl9vbkxpbmtUb29sdGlwLmZpcmUodGhpcy5fY3JlYXRlTGlua0hvdmVyRXZlbnQoeDEsIHkxLCB4MiwgeTIsIGZnKSk7XG4gICAgICAgIGlmIChtYXRjaGVyLmhvdmVyVG9vbHRpcENhbGxiYWNrKSB7XG4gICAgICAgICAgLy8gTm90ZSB0aGF0IElWaWV3cG9ydFJhbmdlIHVzZSAxLWJhc2VkIGNvb3JkaW5hdGVzIHRvIGFsaWduIHdpdGggZXNjYXBlIHNlcXVlbmNlcyBzdWNoXG4gICAgICAgICAgLy8gYXMgQ1VQIHdoaWNoIHVzZSAxLDEgYXMgdGhlIGRlZmF1bHQgZm9yIHJvdy9jb2xcbiAgICAgICAgICBtYXRjaGVyLmhvdmVyVG9vbHRpcENhbGxiYWNrKGUsIHVyaSwgeyBzdGFydDogeyB4OiB4MSwgeTogeTEgfSwgZW5kOiB7IHg6IHgyLCB5OiB5MiB9IH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLl9vbkxpbmtMZWF2ZS5maXJlKHRoaXMuX2NyZWF0ZUxpbmtIb3ZlckV2ZW50KHgxLCB5MSwgeDIsIHkyLCBmZykpO1xuICAgICAgICB0aGlzLl9lbGVtZW50IS5jbGFzc0xpc3QucmVtb3ZlKCd4dGVybS1jdXJzb3ItcG9pbnRlcicpO1xuICAgICAgICBpZiAobWF0Y2hlci5ob3ZlckxlYXZlQ2FsbGJhY2spIHtcbiAgICAgICAgICBtYXRjaGVyLmhvdmVyTGVhdmVDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZSA9PiB7XG4gICAgICAgIGlmIChtYXRjaGVyLndpbGxMaW5rQWN0aXZhdGUpIHtcbiAgICAgICAgICByZXR1cm4gbWF0Y2hlci53aWxsTGlua0FjdGl2YXRlKGUsIHVyaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgKSk7XG4gIH1cblxuICBwcml2YXRlIF9jcmVhdGVMaW5rSG92ZXJFdmVudCh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyLCBmZzogbnVtYmVyIHwgdW5kZWZpbmVkKTogSUxpbmtpZmllckV2ZW50IHtcbiAgICByZXR1cm4geyB4MSwgeTEsIHgyLCB5MiwgY29sczogdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCBmZyB9O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3VzZVpvbmUgaW1wbGVtZW50cyBJTW91c2Vab25lIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHgxOiBudW1iZXIsXG4gICAgcHVibGljIHkxOiBudW1iZXIsXG4gICAgcHVibGljIHgyOiBudW1iZXIsXG4gICAgcHVibGljIHkyOiBudW1iZXIsXG4gICAgcHVibGljIGNsaWNrQ2FsbGJhY2s6IChlOiBNb3VzZUV2ZW50KSA9PiBhbnksXG4gICAgcHVibGljIGhvdmVyQ2FsbGJhY2s6IChlOiBNb3VzZUV2ZW50KSA9PiBhbnksXG4gICAgcHVibGljIHRvb2x0aXBDYWxsYmFjazogKGU6IE1vdXNlRXZlbnQpID0+IGFueSxcbiAgICBwdWJsaWMgbGVhdmVDYWxsYmFjazogKCkgPT4gdm9pZCxcbiAgICBwdWJsaWMgd2lsbExpbmtBY3RpdmF0ZTogKGU6IE1vdXNlRXZlbnQpID0+IGJvb2xlYW5cbiAgKSB7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZXhwb3J0IGxldCBwcm9tcHRMYWJlbCA9ICdUZXJtaW5hbCBpbnB1dCc7XG5leHBvcnQgbGV0IHRvb011Y2hPdXRwdXQgPSAnVG9vIG11Y2ggb3V0cHV0IHRvIGFubm91bmNlLCBuYXZpZ2F0ZSB0byByb3dzIG1hbnVhbGx5IHRvIHJlYWQnO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIgfSBmcm9tICdicm93c2VyL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJTW91c2VTZXJ2aWNlLCBJU2VsZWN0aW9uU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSU1vdXNlWm9uZU1hbmFnZXIsIElNb3VzZVpvbmUgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuY29uc3QgSE9WRVJfRFVSQVRJT04gPSA1MDA7XG5cbi8qKlxuICogVGhlIE1vdXNlWm9uZU1hbmFnZXIgYWxsb3dzIGNvbXBvbmVudHMgdG8gcmVnaXN0ZXIgem9uZXMgd2l0aGluIHRoZSB0ZXJtaW5hbFxuICogdGhhdCB0cmlnZ2VyIGhvdmVyIGFuZCBjbGljayBjYWxsYmFja3MuXG4gKlxuICogVGhpcyBjbGFzcyB3YXMgaW50ZW50aW9uYWxseSBtYWRlIG5vdCBzbyByb2J1c3QgaW5pdGlhbGx5IGFzIHRoZSBvbmx5IGNhc2UgaXRcbiAqIG5lZWRlZCB0byBzdXBwb3J0IHdhcyBzaW5nbGUtbGluZSBsaW5rcyB3aGljaCBuZXZlciBvdmVybGFwLiBJbXByb3ZlbWVudHMgY2FuXG4gKiBiZSBtYWRlIGluIHRoZSBmdXR1cmUuXG4gKi9cbmV4cG9ydCBjbGFzcyBNb3VzZVpvbmVNYW5hZ2VyIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElNb3VzZVpvbmVNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBfem9uZXM6IElNb3VzZVpvbmVbXSA9IFtdO1xuXG4gIHByaXZhdGUgX2FyZVpvbmVzQWN0aXZlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX21vdXNlTW92ZUxpc3RlbmVyOiAoZTogTW91c2VFdmVudCkgPT4gYW55O1xuICBwcml2YXRlIF9tb3VzZUxlYXZlTGlzdGVuZXI6IChlOiBNb3VzZUV2ZW50KSA9PiBhbnk7XG4gIHByaXZhdGUgX2NsaWNrTGlzdGVuZXI6IChlOiBNb3VzZUV2ZW50KSA9PiBhbnk7XG5cbiAgcHJpdmF0ZSBfdG9vbHRpcFRpbWVvdXQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfY3VycmVudFpvbmU6IElNb3VzZVpvbmUgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2xhc3RIb3ZlckNvb3JkczogW251bWJlciB8IHVuZGVmaW5lZCwgbnVtYmVyIHwgdW5kZWZpbmVkXSA9IFt1bmRlZmluZWQsIHVuZGVmaW5lZF07XG4gIHByaXZhdGUgX2luaXRpYWxTZWxlY3Rpb25MZW5ndGg6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIEBJTW91c2VTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX21vdXNlU2VydmljZTogSU1vdXNlU2VydmljZSxcbiAgICBASVNlbGVjdGlvblNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfc2VsZWN0aW9uU2VydmljZTogSVNlbGVjdGlvblNlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuX2VsZW1lbnQsICdtb3VzZWRvd24nLCBlID0+IHRoaXMuX29uTW91c2VEb3duKGUpKSk7XG5cbiAgICAvLyBUaGVzZSBldmVudHMgYXJlIGV4cGVuc2l2ZSwgb25seSBsaXN0ZW4gdG8gaXQgd2hlbiBtb3VzZSB6b25lcyBhcmUgYWN0aXZlXG4gICAgdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIgPSBlID0+IHRoaXMuX29uTW91c2VNb3ZlKGUpO1xuICAgIHRoaXMuX21vdXNlTGVhdmVMaXN0ZW5lciA9IGUgPT4gdGhpcy5fb25Nb3VzZUxlYXZlKGUpO1xuICAgIHRoaXMuX2NsaWNrTGlzdGVuZXIgPSBlID0+IHRoaXMuX29uQ2xpY2soZSk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgdGhpcy5fZGVhY3RpdmF0ZSgpO1xuICB9XG5cbiAgcHVibGljIGFkZCh6b25lOiBJTW91c2Vab25lKTogdm9pZCB7XG4gICAgdGhpcy5fem9uZXMucHVzaCh6b25lKTtcbiAgICBpZiAodGhpcy5fem9uZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICB0aGlzLl9hY3RpdmF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjbGVhckFsbChzdGFydD86IG51bWJlciwgZW5kPzogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gRXhpdCBpZiB0aGVyZSdzIG5vdGhpbmcgdG8gY2xlYXJcbiAgICBpZiAodGhpcy5fem9uZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgYWxsIGlmIHN0YXJ0L2VuZCB3ZXJlbid0IHNldFxuICAgIGlmICghc3RhcnQgfHwgIWVuZCkge1xuICAgICAgc3RhcnQgPSAwO1xuICAgICAgZW5kID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMTtcbiAgICB9XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggem9uZXMgYW5kIGNsZWFyIHRoZW0gb3V0IGlmIHRoZXkncmUgd2l0aGluIHRoZSByYW5nZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fem9uZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHpvbmUgPSB0aGlzLl96b25lc1tpXTtcbiAgICAgIGlmICgoem9uZS55MSA+IHN0YXJ0ICYmIHpvbmUueTEgPD0gZW5kICsgMSkgfHxcbiAgICAgICAgICAoem9uZS55MiA+IHN0YXJ0ICYmIHpvbmUueTIgPD0gZW5kICsgMSkgfHxcbiAgICAgICAgICAoem9uZS55MSA8IHN0YXJ0ICYmIHpvbmUueTIgPiBlbmQgKyAxKSkge1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudFpvbmUgJiYgdGhpcy5fY3VycmVudFpvbmUgPT09IHpvbmUpIHtcbiAgICAgICAgICB0aGlzLl9jdXJyZW50Wm9uZS5sZWF2ZUNhbGxiYWNrKCk7XG4gICAgICAgICAgdGhpcy5fY3VycmVudFpvbmUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fem9uZXMuc3BsaWNlKGktLSwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGVhY3RpdmF0ZSB0aGUgbW91c2Ugem9uZSBtYW5hZ2VyIGlmIGFsbCB0aGUgem9uZXMgaGF2ZSBiZWVuIHJlbW92ZWRcbiAgICBpZiAodGhpcy5fem9uZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLl9kZWFjdGl2YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfYWN0aXZhdGUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9hcmVab25lc0FjdGl2ZSkge1xuICAgICAgdGhpcy5fYXJlWm9uZXNBY3RpdmUgPSB0cnVlO1xuICAgICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lcik7XG4gICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLl9tb3VzZUxlYXZlTGlzdGVuZXIpO1xuICAgICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2NsaWNrTGlzdGVuZXIpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2RlYWN0aXZhdGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FyZVpvbmVzQWN0aXZlKSB7XG4gICAgICB0aGlzLl9hcmVab25lc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lcik7XG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLl9tb3VzZUxlYXZlTGlzdGVuZXIpO1xuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2NsaWNrTGlzdGVuZXIpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uTW91c2VNb3ZlKGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBUT0RPOiBJZGVhbGx5IHRoaXMgd291bGQgb25seSBjbGVhciB0aGUgaG92ZXIgc3RhdGUgd2hlbiB0aGUgbW91c2UgbW92ZXNcbiAgICAvLyBvdXRzaWRlIG9mIHRoZSBtb3VzZSB6b25lXG4gICAgaWYgKHRoaXMuX2xhc3RIb3ZlckNvb3Jkc1swXSAhPT0gZS5wYWdlWCB8fCB0aGlzLl9sYXN0SG92ZXJDb29yZHNbMV0gIT09IGUucGFnZVkpIHtcbiAgICAgIHRoaXMuX29uSG92ZXIoZSk7XG4gICAgICAvLyBSZWNvcmQgdGhlIGN1cnJlbnQgY29vcmRpbmF0ZXNcbiAgICAgIHRoaXMuX2xhc3RIb3ZlckNvb3JkcyA9IFtlLnBhZ2VYLCBlLnBhZ2VZXTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9vbkhvdmVyKGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB6b25lID0gdGhpcy5fZmluZFpvbmVFdmVudEF0KGUpO1xuXG4gICAgLy8gRG8gbm90aGluZyBpZiB0aGUgem9uZSBpcyB0aGUgc2FtZVxuICAgIGlmICh6b25lID09PSB0aGlzLl9jdXJyZW50Wm9uZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZpcmUgdGhlIGhvdmVyIGVuZCBjYWxsYmFjayBhbmQgY2FuY2VsIGFueSBleGlzdGluZyB0aW1lciBpZiBhIG5ldyB6b25lXG4gICAgLy8gaXMgYmVpbmcgaG92ZXJlZFxuICAgIGlmICh0aGlzLl9jdXJyZW50Wm9uZSkge1xuICAgICAgdGhpcy5fY3VycmVudFpvbmUubGVhdmVDYWxsYmFjaygpO1xuICAgICAgdGhpcy5fY3VycmVudFpvbmUgPSB1bmRlZmluZWQ7XG4gICAgICBpZiAodGhpcy5fdG9vbHRpcFRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3Rvb2x0aXBUaW1lb3V0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFeGl0IGlmIHRoZXJlIGlzIG5vdCB6b25lXG4gICAgaWYgKCF6b25lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2N1cnJlbnRab25lID0gem9uZTtcblxuICAgIC8vIFRyaWdnZXIgdGhlIGhvdmVyIGNhbGxiYWNrXG4gICAgaWYgKHpvbmUuaG92ZXJDYWxsYmFjaykge1xuICAgICAgem9uZS5ob3ZlckNhbGxiYWNrKGUpO1xuICAgIH1cblxuICAgIC8vIFJlc3RhcnQgdGhlIHRvb2x0aXAgdGltZW91dFxuICAgIHRoaXMuX3Rvb2x0aXBUaW1lb3V0ID0gPG51bWJlcj48YW55PnNldFRpbWVvdXQoKCkgPT4gdGhpcy5fb25Ub29sdGlwKGUpLCBIT1ZFUl9EVVJBVElPTik7XG4gIH1cblxuICBwcml2YXRlIF9vblRvb2x0aXAoZTogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuX3Rvb2x0aXBUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHpvbmUgPSB0aGlzLl9maW5kWm9uZUV2ZW50QXQoZSk7XG4gICAgaWYgKHpvbmUgJiYgem9uZS50b29sdGlwQ2FsbGJhY2spIHtcbiAgICAgIHpvbmUudG9vbHRpcENhbGxiYWNrKGUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uTW91c2VEb3duKGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBTdG9yZSBjdXJyZW50IHRlcm1pbmFsIHNlbGVjdGlvbiBsZW5ndGgsIHRvIGNoZWNrIGlmIHdlJ3JlIHBlcmZvcm1pbmdcbiAgICAvLyBhIHNlbGVjdGlvbiBvcGVyYXRpb25cbiAgICB0aGlzLl9pbml0aWFsU2VsZWN0aW9uTGVuZ3RoID0gdGhpcy5fZ2V0U2VsZWN0aW9uTGVuZ3RoKCk7XG5cbiAgICAvLyBJZ25vcmUgdGhlIGV2ZW50IGlmIHRoZXJlIGFyZSBubyB6b25lcyBhY3RpdmVcbiAgICBpZiAoIXRoaXMuX2FyZVpvbmVzQWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRmluZCB0aGUgYWN0aXZlIHpvbmUsIHByZXZlbnQgZXZlbnQgcHJvcGFnYXRpb24gaWYgZm91bmQgdG8gcHJldmVudCBvdGhlclxuICAgIC8vIGNvbXBvbmVudHMgZnJvbSBoYW5kbGluZyB0aGUgbW91c2UgZXZlbnQuXG4gICAgY29uc3Qgem9uZSA9IHRoaXMuX2ZpbmRab25lRXZlbnRBdChlKTtcbiAgICBpZiAoem9uZT8ud2lsbExpbmtBY3RpdmF0ZShlKSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9vbk1vdXNlTGVhdmUoZTogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIC8vIEZpcmUgdGhlIGhvdmVyIGVuZCBjYWxsYmFjayBhbmQgY2FuY2VsIGFueSBleGlzdGluZyB0aW1lciBpZiB0aGUgbW91c2VcbiAgICAvLyBsZWF2ZXMgdGhlIHRlcm1pbmFsIGVsZW1lbnRcbiAgICBpZiAodGhpcy5fY3VycmVudFpvbmUpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRab25lLmxlYXZlQ2FsbGJhY2soKTtcbiAgICAgIHRoaXMuX2N1cnJlbnRab25lID0gdW5kZWZpbmVkO1xuICAgICAgaWYgKHRoaXMuX3Rvb2x0aXBUaW1lb3V0KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90b29sdGlwVGltZW91dCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25DbGljayhlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLy8gRmluZCB0aGUgYWN0aXZlIHpvbmUgYW5kIGNsaWNrIGl0IGlmIGZvdW5kIGFuZCBubyBzZWxlY3Rpb24gd2FzXG4gICAgLy8gYmVpbmcgcGVyZm9ybWVkXG4gICAgY29uc3Qgem9uZSA9IHRoaXMuX2ZpbmRab25lRXZlbnRBdChlKTtcbiAgICBjb25zdCBjdXJyZW50U2VsZWN0aW9uTGVuZ3RoID0gdGhpcy5fZ2V0U2VsZWN0aW9uTGVuZ3RoKCk7XG5cbiAgICBpZiAoem9uZSAmJiBjdXJyZW50U2VsZWN0aW9uTGVuZ3RoID09PSB0aGlzLl9pbml0aWFsU2VsZWN0aW9uTGVuZ3RoKSB7XG4gICAgICB6b25lLmNsaWNrQ2FsbGJhY2soZSk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2dldFNlbGVjdGlvbkxlbmd0aCgpOiBudW1iZXIge1xuICAgIGNvbnN0IHNlbGVjdGlvblRleHQgPSB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblRleHQ7XG4gICAgcmV0dXJuIHNlbGVjdGlvblRleHQgPyBzZWxlY3Rpb25UZXh0Lmxlbmd0aCA6IDA7XG4gIH1cblxuICBwcml2YXRlIF9maW5kWm9uZUV2ZW50QXQoZTogTW91c2VFdmVudCk6IElNb3VzZVpvbmUgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGNvb3JkcyA9IHRoaXMuX21vdXNlU2VydmljZS5nZXRDb29yZHMoZSwgdGhpcy5fc2NyZWVuRWxlbWVudCwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpO1xuICAgIGlmICghY29vcmRzKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCB4ID0gY29vcmRzWzBdO1xuICAgIGNvbnN0IHkgPSBjb29yZHNbMV07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl96b25lcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgem9uZSA9IHRoaXMuX3pvbmVzW2ldO1xuICAgICAgaWYgKHpvbmUueTEgPT09IHpvbmUueTIpIHtcbiAgICAgICAgLy8gU2luZ2xlIGxpbmUgbGlua1xuICAgICAgICBpZiAoeSA9PT0gem9uZS55MSAmJiB4ID49IHpvbmUueDEgJiYgeCA8IHpvbmUueDIpIHtcbiAgICAgICAgICByZXR1cm4gem9uZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTXVsdGktbGluZSBsaW5rXG4gICAgICAgIGlmICgoeSA9PT0gem9uZS55MSAmJiB4ID49IHpvbmUueDEpIHx8XG4gICAgICAgICAgICAoeSA9PT0gem9uZS55MiAmJiB4IDwgem9uZS54MikgfHxcbiAgICAgICAgICAgICh5ID4gem9uZS55MSAmJiB5IDwgem9uZS55MikpIHtcbiAgICAgICAgICByZXR1cm4gem9uZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxuLyoqXG4gKiBEZWJvdW5jZXMgY2FsbHMgdG8gcmVuZGVyIHRlcm1pbmFsIHJvd3MgdXNpbmcgYW5pbWF0aW9uIGZyYW1lcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJlbmRlckRlYm91bmNlciBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcbiAgcHJpdmF0ZSBfcm93U3RhcnQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfcm93RW5kOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3Jvd0NvdW50OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2FuaW1hdGlvbkZyYW1lOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfcmVuZGVyQ2FsbGJhY2s6IChzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcikgPT4gdm9pZFxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZWZyZXNoKHJvd1N0YXJ0OiBudW1iZXIsIHJvd0VuZDogbnVtYmVyLCByb3dDb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fcm93Q291bnQgPSByb3dDb3VudDtcbiAgICAvLyBHZXQgdGhlIG1pbi9tYXggcm93IHN0YXJ0L2VuZCBmb3IgdGhlIGFyZyB2YWx1ZXNcbiAgICByb3dTdGFydCA9IHJvd1N0YXJ0ICE9PSB1bmRlZmluZWQgPyByb3dTdGFydCA6IDA7XG4gICAgcm93RW5kID0gcm93RW5kICE9PSB1bmRlZmluZWQgPyByb3dFbmQgOiB0aGlzLl9yb3dDb3VudCAtIDE7XG4gICAgLy8gU2V0IHRoZSBwcm9wZXJ0aWVzIHRvIHRoZSB1cGRhdGVkIHZhbHVlc1xuICAgIHRoaXMuX3Jvd1N0YXJ0ID0gdGhpcy5fcm93U3RhcnQgIT09IHVuZGVmaW5lZCA/IE1hdGgubWluKHRoaXMuX3Jvd1N0YXJ0LCByb3dTdGFydCkgOiByb3dTdGFydDtcbiAgICB0aGlzLl9yb3dFbmQgPSB0aGlzLl9yb3dFbmQgIT09IHVuZGVmaW5lZCA/IE1hdGgubWF4KHRoaXMuX3Jvd0VuZCwgcm93RW5kKSA6IHJvd0VuZDtcblxuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLl9pbm5lclJlZnJlc2goKSk7XG4gIH1cblxuICBwcml2YXRlIF9pbm5lclJlZnJlc2goKTogdm9pZCB7XG4gICAgLy8gTWFrZSBzdXJlIHZhbHVlcyBhcmUgc2V0XG4gICAgaWYgKHRoaXMuX3Jvd1N0YXJ0ID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcm93RW5kID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcm93Q291bnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENsYW1wIHZhbHVlc1xuICAgIHRoaXMuX3Jvd1N0YXJ0ID0gTWF0aC5tYXgodGhpcy5fcm93U3RhcnQsIDApO1xuICAgIHRoaXMuX3Jvd0VuZCA9IE1hdGgubWluKHRoaXMuX3Jvd0VuZCwgdGhpcy5fcm93Q291bnQgLSAxKTtcblxuICAgIC8vIFJ1biByZW5kZXIgY2FsbGJhY2tcbiAgICB0aGlzLl9yZW5kZXJDYWxsYmFjayh0aGlzLl9yb3dTdGFydCwgdGhpcy5fcm93RW5kKTtcblxuICAgIC8vIFJlc2V0IGRlYm91bmNlclxuICAgIHRoaXMuX3Jvd1N0YXJ0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3Jvd0VuZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHVuZGVmaW5lZDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5cbmV4cG9ydCB0eXBlIFNjcmVlbkRwckxpc3RlbmVyID0gKG5ld0RldmljZVBpeGVsUmF0aW8/OiBudW1iZXIsIG9sZERldmljZVBpeGVsUmF0aW8/OiBudW1iZXIpID0+IHZvaWQ7XG5cbi8qKlxuICogVGhlIHNjcmVlbiBkZXZpY2UgcGl4ZWwgcmF0aW8gbW9uaXRvciBhbGxvd3MgbGlzdGVuaW5nIGZvciB3aGVuIHRoZVxuICogd2luZG93LmRldmljZVBpeGVsUmF0aW8gdmFsdWUgY2hhbmdlcy4gVGhpcyBpcyBkb25lIG5vdCB3aXRoIHBvbGxpbmcgYnV0IHdpdGhcbiAqIHRoZSB1c2Ugb2Ygd2luZG93Lm1hdGNoTWVkaWEgdG8gd2F0Y2ggbWVkaWEgcXVlcmllcy4gV2hlbiB0aGUgZXZlbnQgZmlyZXMsXG4gKiB0aGUgbGlzdGVuZXIgd2lsbCBiZSByZWF0dGFjaGVkIHVzaW5nIGEgZGlmZmVyZW50IG1lZGlhIHF1ZXJ5IHRvIGVuc3VyZSB0aGF0XG4gKiBhbnkgZnVydGhlciBjaGFuZ2VzIHdpbGwgcmVnaXN0ZXIuXG4gKlxuICogVGhlIGxpc3RlbmVyIHNob3VsZCBmaXJlIG9uIGJvdGggd2luZG93IHpvb20gY2hhbmdlcyBhbmQgc3dpdGNoaW5nIHRvIGFcbiAqIG1vbml0b3Igd2l0aCBhIGRpZmZlcmVudCBEUEkuXG4gKi9cbmV4cG9ydCBjbGFzcyBTY3JlZW5EcHJNb25pdG9yIGV4dGVuZHMgRGlzcG9zYWJsZSB7XG4gIHByaXZhdGUgX2N1cnJlbnREZXZpY2VQaXhlbFJhdGlvOiBudW1iZXIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgcHJpdmF0ZSBfb3V0ZXJMaXN0ZW5lcjogKCh0aGlzOiBNZWRpYVF1ZXJ5TGlzdCwgZXY6IE1lZGlhUXVlcnlMaXN0RXZlbnQpID0+IGFueSkgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2xpc3RlbmVyOiBTY3JlZW5EcHJMaXN0ZW5lciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0OiBNZWRpYVF1ZXJ5TGlzdCB8IHVuZGVmaW5lZDtcblxuICBwdWJsaWMgc2V0TGlzdGVuZXIobGlzdGVuZXI6IFNjcmVlbkRwckxpc3RlbmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2xpc3RlbmVyKSB7XG4gICAgICB0aGlzLmNsZWFyTGlzdGVuZXIoKTtcbiAgICB9XG4gICAgdGhpcy5fbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICB0aGlzLl9vdXRlckxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9saXN0ZW5lcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9saXN0ZW5lcih3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgdGhpcy5fY3VycmVudERldmljZVBpeGVsUmF0aW8pO1xuICAgICAgdGhpcy5fdXBkYXRlRHByKCk7XG4gICAgfTtcbiAgICB0aGlzLl91cGRhdGVEcHIoKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLmNsZWFyTGlzdGVuZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZURwcigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdCB8fCAhdGhpcy5fb3V0ZXJMaXN0ZW5lcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENsZWFyIGxpc3RlbmVycyBmb3Igb2xkIERQUlxuICAgIHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdC5yZW1vdmVMaXN0ZW5lcih0aGlzLl9vdXRlckxpc3RlbmVyKTtcblxuICAgIC8vIEFkZCBsaXN0ZW5lcnMgZm9yIG5ldyBEUFJcbiAgICB0aGlzLl9jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdCA9IHdpbmRvdy5tYXRjaE1lZGlhKGBzY3JlZW4gYW5kIChyZXNvbHV0aW9uOiAke3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfWRwcHgpYCk7XG4gICAgdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0LmFkZExpc3RlbmVyKHRoaXMuX291dGVyTGlzdGVuZXIpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyTGlzdGVuZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QgfHwgIXRoaXMuX2xpc3RlbmVyIHx8ICF0aGlzLl9vdXRlckxpc3RlbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdC5yZW1vdmVMaXN0ZW5lcih0aGlzLl9vdXRlckxpc3RlbmVyKTtcbiAgICB0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fbGlzdGVuZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fb3V0ZXJMaXN0ZW5lciA9IHVuZGVmaW5lZDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIgfSBmcm9tICdicm93c2VyL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJQ29sb3JTZXQsIElWaWV3cG9ydCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUNoYXJTaXplU2VydmljZSwgSVJlbmRlclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5jb25zdCBGQUxMQkFDS19TQ1JPTExfQkFSX1dJRFRIID0gMTU7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgdmlld3BvcnQgb2YgYSB0ZXJtaW5hbCwgdGhlIHZpc2libGUgYXJlYSB3aXRoaW4gdGhlIGxhcmdlciBidWZmZXIgb2Ygb3V0cHV0LlxuICogTG9naWMgZm9yIHRoZSB2aXJ0dWFsIHNjcm9sbCBiYXIgaXMgaW5jbHVkZWQgaW4gdGhpcyBvYmplY3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBWaWV3cG9ydCBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJVmlld3BvcnQge1xuICBwdWJsaWMgc2Nyb2xsQmFyV2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2N1cnJlbnRSb3dIZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbGFzdFRvdWNoWTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbGFzdFNjcm9sbFRvcDogbnVtYmVyID0gMDtcblxuICAvLyBTdG9yZXMgYSBwYXJ0aWFsIGxpbmUgYW1vdW50IHdoZW4gc2Nyb2xsaW5nLCB0aGlzIGlzIHVzZWQgdG8ga2VlcCB0cmFjayBvZiBob3cgbXVjaCBvZiBhIGxpbmVcbiAgLy8gaXMgc2Nyb2xsZWQgc28gd2UgY2FuIFwic2Nyb2xsXCIgb3ZlciBwYXJ0aWFsIGxpbmVzIGFuZCBmZWVsIG5hdHVyYWwgb24gdG91Y2hwYWRzLiBUaGlzIGlzIGFcbiAgLy8gcXVpY2sgZml4IGFuZCBjb3VsZCBoYXZlIGEgbW9yZSByb2J1c3Qgc29sdXRpb24gaW4gcGxhY2UgdGhhdCByZXNldCB0aGUgdmFsdWUgd2hlbiBuZWVkZWQuXG4gIHByaXZhdGUgX3doZWVsUGFydGlhbFNjcm9sbDogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIF9yZWZyZXNoQW5pbWF0aW9uRnJhbWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9pZ25vcmVOZXh0U2Nyb2xsRXZlbnQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zY3JvbGxMaW5lczogKGFtb3VudDogbnVtYmVyLCBzdXBwcmVzc0V2ZW50OiBib29sZWFuKSA9PiB2b2lkLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3ZpZXdwb3J0RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2Nyb2xsQXJlYTogSFRNTEVsZW1lbnQsXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICBASUNoYXJTaXplU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jaGFyU2l6ZVNlcnZpY2U6IElDaGFyU2l6ZVNlcnZpY2UsXG4gICAgQElSZW5kZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX3JlbmRlclNlcnZpY2U6IElSZW5kZXJTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvLyBNZWFzdXJlIHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsYmFyLiBJZiBpdCBpcyAwIHdlIGNhbiBhc3N1bWUgaXQncyBhbiBPU1ggb3ZlcmxheSBzY3JvbGxiYXIuXG4gICAgLy8gVW5mb3J0dW5hdGVseSB0aGUgb3ZlcmxheSBzY3JvbGxiYXIgd291bGQgYmUgaGlkZGVuIHVuZGVybmVhdGggdGhlIHNjcmVlbiBlbGVtZW50IGluIHRoYXQgY2FzZSxcbiAgICAvLyB0aGVyZWZvcmUgd2UgYWNjb3VudCBmb3IgYSBzdGFuZGFyZCBhbW91bnQgdG8gbWFrZSBpdCB2aXNpYmxlXG4gICAgdGhpcy5zY3JvbGxCYXJXaWR0aCA9ICh0aGlzLl92aWV3cG9ydEVsZW1lbnQub2Zmc2V0V2lkdGggLSB0aGlzLl9zY3JvbGxBcmVhLm9mZnNldFdpZHRoKSB8fCBGQUxMQkFDS19TQ1JPTExfQkFSX1dJRFRIO1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuX3ZpZXdwb3J0RWxlbWVudCwgJ3Njcm9sbCcsIHRoaXMuX29uU2Nyb2xsLmJpbmQodGhpcykpKTtcblxuICAgIC8vIFBlcmZvcm0gdGhpcyBhc3luYyB0byBlbnN1cmUgdGhlIElDaGFyU2l6ZVNlcnZpY2UgaXMgcmVhZHkuXG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnN5bmNTY3JvbGxBcmVhKCksIDApO1xuICB9XG5cbiAgcHVibGljIG9uVGhlbWVDaGFuZ2UoY29sb3JzOiBJQ29sb3JTZXQpOiB2b2lkIHtcbiAgICB0aGlzLl92aWV3cG9ydEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2hlcyByb3cgaGVpZ2h0LCBzZXR0aW5nIGxpbmUtaGVpZ2h0LCB2aWV3cG9ydCBoZWlnaHQgYW5kIHNjcm9sbCBhcmVhIGhlaWdodCBpZlxuICAgKiBuZWNlc3NhcnkuXG4gICAqL1xuICBwcml2YXRlIF9yZWZyZXNoKGltbWVkaWF0ZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgIHRoaXMuX2lubmVyUmVmcmVzaCgpO1xuICAgICAgaWYgKHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSAhPT0gbnVsbCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lID09PSBudWxsKSB7XG4gICAgICB0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5faW5uZXJSZWZyZXNoKCkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2lubmVyUmVmcmVzaCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCA+IDApIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQgPSB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgdGhpcy5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQgPSB0aGlzLl92aWV3cG9ydEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgY29uc3QgbmV3QnVmZmVySGVpZ2h0ID0gTWF0aC5yb3VuZCh0aGlzLl9jdXJyZW50Um93SGVpZ2h0ICogdGhpcy5fbGFzdFJlY29yZGVkQnVmZmVyTGVuZ3RoKSArICh0aGlzLl9sYXN0UmVjb3JkZWRWaWV3cG9ydEhlaWdodCAtIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQpO1xuICAgICAgaWYgKHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodCAhPT0gbmV3QnVmZmVySGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodCA9IG5ld0J1ZmZlckhlaWdodDtcbiAgICAgICAgdGhpcy5fc2Nyb2xsQXJlYS5zdHlsZS5oZWlnaHQgPSB0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJIZWlnaHQgKyAncHgnO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN5bmMgc2Nyb2xsVG9wXG4gICAgY29uc3Qgc2Nyb2xsVG9wID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AgKiB0aGlzLl9jdXJyZW50Um93SGVpZ2h0O1xuICAgIGlmICh0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wICE9PSBzY3JvbGxUb3ApIHtcbiAgICAgIC8vIElnbm9yZSB0aGUgbmV4dCBzY3JvbGwgZXZlbnQgd2hpY2ggd2lsbCBiZSB0cmlnZ2VyZWQgYnkgc2V0dGluZyB0aGUgc2Nyb2xsVG9wIGFzIHdlIGRvIG5vdFxuICAgICAgLy8gd2FudCB0aGlzIGV2ZW50IHRvIHNjcm9sbCB0aGUgdGVybWluYWxcbiAgICAgIHRoaXMuX2lnbm9yZU5leHRTY3JvbGxFdmVudCA9IHRydWU7XG4gICAgICB0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgIH1cblxuICAgIHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSA9IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgZGltZW5zaW9ucyBhbmQgc3luY2hyb25pemVzIHRoZSBzY3JvbGwgYXJlYSBpZiBuZWNlc3NhcnkuXG4gICAqL1xuICBwdWJsaWMgc3luY1Njcm9sbEFyZWEoaW1tZWRpYXRlOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICAvLyBJZiBidWZmZXIgaGVpZ2h0IGNoYW5nZWRcbiAgICBpZiAodGhpcy5fbGFzdFJlY29yZGVkQnVmZmVyTGVuZ3RoICE9PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmxlbmd0aDtcbiAgICAgIHRoaXMuX3JlZnJlc2goaW1tZWRpYXRlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiB2aWV3cG9ydCBoZWlnaHQgY2hhbmdlZFxuICAgIGlmICh0aGlzLl9sYXN0UmVjb3JkZWRWaWV3cG9ydEhlaWdodCAhPT0gdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCkge1xuICAgICAgdGhpcy5fcmVmcmVzaChpbW1lZGlhdGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBidWZmZXIgcG9zaXRpb24gZG9lc24ndCBtYXRjaCBsYXN0IHNjcm9sbCB0b3BcbiAgICBjb25zdCBuZXdTY3JvbGxUb3AgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCAqIHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQ7XG4gICAgaWYgKHRoaXMuX2xhc3RTY3JvbGxUb3AgIT09IG5ld1Njcm9sbFRvcCkge1xuICAgICAgdGhpcy5fcmVmcmVzaChpbW1lZGlhdGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIGVsZW1lbnQncyBzY3JvbGwgdG9wIGNoYW5nZWQsIHRoaXMgY2FuIGhhcHBlbiB3aGVuIGhpZGluZyB0aGUgZWxlbWVudFxuICAgIGlmICh0aGlzLl9sYXN0U2Nyb2xsVG9wICE9PSB0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wKSB7XG4gICAgICB0aGlzLl9yZWZyZXNoKGltbWVkaWF0ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgcm93IGhlaWdodCBjaGFuZ2VkXG4gICAgaWYgKHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0IC8gd2luZG93LmRldmljZVBpeGVsUmF0aW8gIT09IHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQpIHtcbiAgICAgIHRoaXMuX3JlZnJlc2goaW1tZWRpYXRlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBzY3JvbGwgZXZlbnRzIG9uIHRoZSB2aWV3cG9ydCwgY2FsY3VsYXRpbmcgdGhlIG5ldyB2aWV3cG9ydCBhbmQgcmVxdWVzdGluZyB0aGVcbiAgICogdGVybWluYWwgdG8gc2Nyb2xsIHRvIGl0LlxuICAgKiBAcGFyYW0gZXYgVGhlIHNjcm9sbCBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uU2Nyb2xsKGV2OiBFdmVudCk6IHZvaWQge1xuICAgIC8vIFJlY29yZCBjdXJyZW50IHNjcm9sbCB0b3AgcG9zaXRpb25cbiAgICB0aGlzLl9sYXN0U2Nyb2xsVG9wID0gdGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcDtcblxuICAgIC8vIERvbid0IGF0dGVtcHQgdG8gc2Nyb2xsIGlmIHRoZSBlbGVtZW50IGlzIG5vdCB2aXNpYmxlLCBvdGhlcndpc2Ugc2Nyb2xsVG9wIHdpbGwgYmUgY29ycnVwdFxuICAgIC8vIHdoaWNoIGNhdXNlcyB0aGUgdGVybWluYWwgdG8gc2Nyb2xsIHRoZSBidWZmZXIgdG8gdGhlIHRvcFxuICAgIGlmICghdGhpcy5fdmlld3BvcnRFbGVtZW50Lm9mZnNldFBhcmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElnbm9yZSB0aGUgZXZlbnQgaWYgaXQgd2FzIGZsYWdnZWQgdG8gaWdub3JlICh3aGVuIHRoZSBzb3VyY2Ugb2YgdGhlIGV2ZW50IGlzIGZyb20gVmlld3BvcnQpXG4gICAgaWYgKHRoaXMuX2lnbm9yZU5leHRTY3JvbGxFdmVudCkge1xuICAgICAgdGhpcy5faWdub3JlTmV4dFNjcm9sbEV2ZW50ID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmV3Um93ID0gTWF0aC5yb3VuZCh0aGlzLl9sYXN0U2Nyb2xsVG9wIC8gdGhpcy5fY3VycmVudFJvd0hlaWdodCk7XG4gICAgY29uc3QgZGlmZiA9IG5ld1JvdyAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO1xuICAgIHRoaXMuX3Njcm9sbExpbmVzKGRpZmYsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYnViYmxpbmcgb2Ygc2Nyb2xsIGV2ZW50IGluIGNhc2UgdGhlIHZpZXdwb3J0IGhhcyByZWFjaGVkIHRvcCBvciBib3R0b21cbiAgICogQHBhcmFtIGV2IFRoZSBzY3JvbGwgZXZlbnQuXG4gICAqIEBwYXJhbSBhbW91bnQgVGhlIGFtb3VudCBzY3JvbGxlZFxuICAgKi9cbiAgcHJpdmF0ZSBfYnViYmxlU2Nyb2xsKGV2OiBFdmVudCwgYW1vdW50OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBjb25zdCBzY3JvbGxQb3NGcm9tVG9wID0gdGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCArIHRoaXMuX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0O1xuICAgIGlmICgoYW1vdW50IDwgMCAmJiB0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wICE9PSAwKSB8fFxuICAgICAgICAoYW1vdW50ID4gMCAmJiAgc2Nyb2xsUG9zRnJvbVRvcCA8IHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodCkpIHtcbiAgICAgIGlmIChldi5jYW5jZWxhYmxlKSB7XG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgbW91c2Ugd2hlZWwgZXZlbnRzIGJ5IGFkanVzdGluZyB0aGUgdmlld3BvcnQncyBzY3JvbGxUb3AgYW5kIGRlbGVnYXRpbmcgdGhlIGFjdHVhbFxuICAgKiBzY3JvbGxpbmcgdG8gYG9uU2Nyb2xsYCwgdGhpcyBldmVudCBuZWVkcyB0byBiZSBhdHRhY2hlZCBtYW51YWxseSBieSB0aGUgY29uc3VtZXIgb2ZcbiAgICogYFZpZXdwb3J0YC5cbiAgICogQHBhcmFtIGV2IFRoZSBtb3VzZSB3aGVlbCBldmVudC5cbiAgICovXG4gIHB1YmxpYyBvbldoZWVsKGV2OiBXaGVlbEV2ZW50KTogYm9vbGVhbiB7XG4gICAgY29uc3QgYW1vdW50ID0gdGhpcy5fZ2V0UGl4ZWxzU2Nyb2xsZWQoZXYpO1xuICAgIGlmIChhbW91bnQgPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCArPSBhbW91bnQ7XG4gICAgcmV0dXJuIHRoaXMuX2J1YmJsZVNjcm9sbChldiwgYW1vdW50KTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldFBpeGVsc1Njcm9sbGVkKGV2OiBXaGVlbEV2ZW50KTogbnVtYmVyIHtcbiAgICAvLyBEbyBub3RoaW5nIGlmIGl0J3Mgbm90IGEgdmVydGljYWwgc2Nyb2xsIGV2ZW50XG4gICAgaWYgKGV2LmRlbHRhWSA9PT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgdG8gV2hlZWxFdmVudC5ET01fREVMVEFfUElYRUxcbiAgICBsZXQgYW1vdW50ID0gdGhpcy5fYXBwbHlTY3JvbGxNb2RpZmllcihldi5kZWx0YVksIGV2KTtcbiAgICBpZiAoZXYuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FKSB7XG4gICAgICBhbW91bnQgKj0gdGhpcy5fY3VycmVudFJvd0hlaWdodDtcbiAgICB9IGVsc2UgaWYgKGV2LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfUEFHRSkge1xuICAgICAgYW1vdW50ICo9IHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQgKiB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgfVxuICAgIHJldHVybiBhbW91bnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbnVtYmVyIG9mIHBpeGVscyBzY3JvbGxlZCBieSB0aGUgbW91c2UgZXZlbnQgdGFraW5nIGludG8gYWNjb3VudCB3aGF0IHR5cGUgb2YgZGVsdGFcbiAgICogaXMgYmVpbmcgdXNlZC5cbiAgICogQHBhcmFtIGV2IFRoZSBtb3VzZSB3aGVlbCBldmVudC5cbiAgICovXG4gIHB1YmxpYyBnZXRMaW5lc1Njcm9sbGVkKGV2OiBXaGVlbEV2ZW50KTogbnVtYmVyIHtcbiAgICAvLyBEbyBub3RoaW5nIGlmIGl0J3Mgbm90IGEgdmVydGljYWwgc2Nyb2xsIGV2ZW50XG4gICAgaWYgKGV2LmRlbHRhWSA9PT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgdG8gV2hlZWxFdmVudC5ET01fREVMVEFfTElORVxuICAgIGxldCBhbW91bnQgPSB0aGlzLl9hcHBseVNjcm9sbE1vZGlmaWVyKGV2LmRlbHRhWSwgZXYpO1xuICAgIGlmIChldi5kZWx0YU1vZGUgPT09IFdoZWVsRXZlbnQuRE9NX0RFTFRBX1BJWEVMKSB7XG4gICAgICBhbW91bnQgLz0gdGhpcy5fY3VycmVudFJvd0hlaWdodCArIDAuMDsgLy8gUHJldmVudCBpbnRlZ2VyIGRpdmlzaW9uXG4gICAgICB0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwgKz0gYW1vdW50O1xuICAgICAgYW1vdW50ID0gTWF0aC5mbG9vcihNYXRoLmFicyh0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwpKSAqICh0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwgPiAwID8gMSA6IC0xKTtcbiAgICAgIHRoaXMuX3doZWVsUGFydGlhbFNjcm9sbCAlPSAxO1xuICAgIH0gZWxzZSBpZiAoZXYuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9QQUdFKSB7XG4gICAgICBhbW91bnQgKj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzO1xuICAgIH1cbiAgICByZXR1cm4gYW1vdW50O1xuICB9XG5cbiAgcHJpdmF0ZSBfYXBwbHlTY3JvbGxNb2RpZmllcihhbW91bnQ6IG51bWJlciwgZXY6IFdoZWVsRXZlbnQpOiBudW1iZXIge1xuICAgIGNvbnN0IG1vZGlmaWVyID0gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5mYXN0U2Nyb2xsTW9kaWZpZXI7XG4gICAgLy8gTXVsdGlwbHkgdGhlIHNjcm9sbCBzcGVlZCB3aGVuIHRoZSBtb2RpZmllciBpcyBkb3duXG4gICAgaWYgKChtb2RpZmllciA9PT0gJ2FsdCcgJiYgZXYuYWx0S2V5KSB8fFxuICAgICAgICAobW9kaWZpZXIgPT09ICdjdHJsJyAmJiBldi5jdHJsS2V5KSB8fFxuICAgICAgICAobW9kaWZpZXIgPT09ICdzaGlmdCcgJiYgZXYuc2hpZnRLZXkpKSB7XG4gICAgICByZXR1cm4gYW1vdW50ICogdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5mYXN0U2Nyb2xsU2Vuc2l0aXZpdHkgKiB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLnNjcm9sbFNlbnNpdGl2aXR5O1xuICAgIH1cblxuICAgIHJldHVybiBhbW91bnQgKiB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLnNjcm9sbFNlbnNpdGl2aXR5O1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHRvdWNoc3RhcnQgZXZlbnQsIHJlY29yZGluZyB0aGUgdG91Y2ggb2NjdXJyZWQuXG4gICAqIEBwYXJhbSBldiBUaGUgdG91Y2ggZXZlbnQuXG4gICAqL1xuICBwdWJsaWMgb25Ub3VjaFN0YXJ0KGV2OiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fbGFzdFRvdWNoWSA9IGV2LnRvdWNoZXNbMF0ucGFnZVk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgdG91Y2htb3ZlIGV2ZW50LCBzY3JvbGxpbmcgdGhlIHZpZXdwb3J0IGlmIHRoZSBwb3NpdGlvbiBzaGlmdGVkLlxuICAgKiBAcGFyYW0gZXYgVGhlIHRvdWNoIGV2ZW50LlxuICAgKi9cbiAgcHVibGljIG9uVG91Y2hNb3ZlKGV2OiBUb3VjaEV2ZW50KTogYm9vbGVhbiB7XG4gICAgY29uc3QgZGVsdGFZID0gdGhpcy5fbGFzdFRvdWNoWSAtIGV2LnRvdWNoZXNbMF0ucGFnZVk7XG4gICAgdGhpcy5fbGFzdFRvdWNoWSA9IGV2LnRvdWNoZXNbMF0ucGFnZVk7XG4gICAgaWYgKGRlbHRhWSA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wICs9IGRlbHRhWTtcbiAgICByZXR1cm4gdGhpcy5fYnViYmxlU2Nyb2xsKGV2LCBkZWx0YVkpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaGFyU2l6ZVNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJQ29yZVNlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmludGVyZmFjZSBJUG9zaXRpb24ge1xuICBzdGFydDogbnVtYmVyO1xuICBlbmQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBFbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIGZvciBoYW5kbGluZyBjb21wb3NpdGlvbnN0YXJ0LCBjb21wb3NpdGlvbnVwZGF0ZSBhbmQgY29tcG9zaXRpb25lbmRcbiAqIGV2ZW50cywgZGlzcGxheWluZyB0aGUgaW4tcHJvZ3Jlc3MgY29tcG9zaXRpb24gdG8gdGhlIFVJIGFuZCBmb3J3YXJkaW5nIHRoZSBmaW5hbCBjb21wb3NpdGlvblxuICogdG8gdGhlIGhhbmRsZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb21wb3NpdGlvbkhlbHBlciB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIGlucHV0IGNvbXBvc2l0aW9uIGlzIGN1cnJlbnRseSBoYXBwZW5pbmcsIGVnLiB2aWEgYSBtb2JpbGUga2V5Ym9hcmQsIHNwZWVjaCBpbnB1dCBvclxuICAgKiBJTUUuIFRoaXMgdmFyaWFibGUgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBjb21wb3NpdGlvblRleHQgc2hvdWxkIGJlIGRpc3BsYXllZCBvbiB0aGUgVUkuXG4gICAqL1xuICBwcml2YXRlIF9pc0NvbXBvc2luZzogYm9vbGVhbjtcblxuICAvKipcbiAgICogVGhlIHBvc2l0aW9uIHdpdGhpbiB0aGUgaW5wdXQgdGV4dGFyZWEncyB2YWx1ZSBvZiB0aGUgY3VycmVudCBjb21wb3NpdGlvbi5cbiAgICovXG4gIHByaXZhdGUgX2NvbXBvc2l0aW9uUG9zaXRpb246IElQb3NpdGlvbjtcblxuICAvKipcbiAgICogV2hldGhlciBhIGNvbXBvc2l0aW9uIGlzIGluIHRoZSBwcm9jZXNzIG9mIGJlaW5nIHNlbnQsIHNldHRpbmcgdGhpcyB0byBmYWxzZSB3aWxsIGNhbmNlbCBhbnlcbiAgICogaW4tcHJvZ3Jlc3MgY29tcG9zaXRpb24uXG4gICAqL1xuICBwcml2YXRlIF9pc1NlbmRpbmdDb21wb3NpdGlvbjogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IF90ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb21wb3NpdGlvblZpZXc6IEhUTUxFbGVtZW50LFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgQElDaGFyU2l6ZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfY2hhclNpemVTZXJ2aWNlOiBJQ2hhclNpemVTZXJ2aWNlLFxuICAgIEBJQ29yZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfY29yZVNlcnZpY2U6IElDb3JlU2VydmljZVxuICApIHtcbiAgICB0aGlzLl9pc0NvbXBvc2luZyA9IGZhbHNlO1xuICAgIHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uID0gZmFsc2U7XG4gICAgdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbiA9IHsgc3RhcnQ6IDAsIGVuZDogMCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIGNvbXBvc2l0aW9uc3RhcnQgZXZlbnQsIGFjdGl2YXRpbmcgdGhlIGNvbXBvc2l0aW9uIHZpZXcuXG4gICAqL1xuICBwdWJsaWMgY29tcG9zaXRpb25zdGFydCgpOiB2b2lkIHtcbiAgICB0aGlzLl9pc0NvbXBvc2luZyA9IHRydWU7XG4gICAgdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCA9IHRoaXMuX3RleHRhcmVhLnZhbHVlLmxlbmd0aDtcbiAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcudGV4dENvbnRlbnQgPSAnJztcbiAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgY29tcG9zaXRpb251cGRhdGUgZXZlbnQsIHVwZGF0aW5nIHRoZSBjb21wb3NpdGlvbiB2aWV3LlxuICAgKiBAcGFyYW0gZXYgVGhlIGV2ZW50LlxuICAgKi9cbiAgcHVibGljIGNvbXBvc2l0aW9udXBkYXRlKGV2OiBDb21wb3NpdGlvbkV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LnRleHRDb250ZW50ID0gZXYuZGF0YTtcbiAgICB0aGlzLnVwZGF0ZUNvbXBvc2l0aW9uRWxlbWVudHMoKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uZW5kID0gdGhpcy5fdGV4dGFyZWEudmFsdWUubGVuZ3RoO1xuICAgIH0sIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIGNvbXBvc2l0aW9uZW5kIGV2ZW50LCBoaWRpbmcgdGhlIGNvbXBvc2l0aW9uIHZpZXcgYW5kIHNlbmRpbmcgdGhlIGNvbXBvc2l0aW9uIHRvXG4gICAqIHRoZSBoYW5kbGVyLlxuICAgKi9cbiAgcHVibGljIGNvbXBvc2l0aW9uZW5kKCk6IHZvaWQge1xuICAgIHRoaXMuX2ZpbmFsaXplQ29tcG9zaXRpb24odHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUga2V5ZG93biBldmVudCwgcm91dGluZyBhbnkgbmVjZXNzYXJ5IGV2ZW50cyB0byB0aGUgQ29tcG9zaXRpb25IZWxwZXIgZnVuY3Rpb25zLlxuICAgKiBAcGFyYW0gZXYgVGhlIGtleWRvd24gZXZlbnQuXG4gICAqIEByZXR1cm4gV2hldGhlciB0aGUgVGVybWluYWwgc2hvdWxkIGNvbnRpbnVlIHByb2Nlc3NpbmcgdGhlIGtleWRvd24gZXZlbnQuXG4gICAqL1xuICBwdWJsaWMga2V5ZG93bihldjogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLl9pc0NvbXBvc2luZyB8fCB0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbikge1xuICAgICAgaWYgKGV2LmtleUNvZGUgPT09IDIyOSkge1xuICAgICAgICAvLyBDb250aW51ZSBjb21wb3NpbmcgaWYgdGhlIGtleUNvZGUgaXMgdGhlIFwiY29tcG9zaXRpb24gY2hhcmFjdGVyXCJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09PSAxNiB8fCBldi5rZXlDb2RlID09PSAxNyB8fCBldi5rZXlDb2RlID09PSAxOCkge1xuICAgICAgICAvLyBDb250aW51ZSBjb21wb3NpbmcgaWYgdGhlIGtleUNvZGUgaXMgYSBtb2RpZmllciBrZXlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gRmluaXNoIGNvbXBvc2l0aW9uIGltbWVkaWF0ZWx5LiBUaGlzIGlzIG1haW5seSBoZXJlIGZvciB0aGUgY2FzZSB3aGVyZSBlbnRlciBpc1xuICAgICAgLy8gcHJlc3NlZCBhbmQgdGhlIGhhbmRsZXIgbmVlZHMgdG8gYmUgdHJpZ2dlcmVkIGJlZm9yZSB0aGUgY29tbWFuZCBpcyBleGVjdXRlZC5cbiAgICAgIHRoaXMuX2ZpbmFsaXplQ29tcG9zaXRpb24oZmFsc2UpO1xuICAgIH1cblxuICAgIGlmIChldi5rZXlDb2RlID09PSAyMjkpIHtcbiAgICAgIC8vIElmIHRoZSBcImNvbXBvc2l0aW9uIGNoYXJhY3RlclwiIGlzIHVzZWQgYnV0IGdldHMgdG8gdGhpcyBwb2ludCBpdCBtZWFucyBhIG5vbi1jb21wb3NpdGlvblxuICAgICAgLy8gY2hhcmFjdGVyIChlZy4gbnVtYmVycyBhbmQgcHVuY3R1YXRpb24pIHdhcyBwcmVzc2VkIHdoZW4gdGhlIElNRSB3YXMgYWN0aXZlLlxuICAgICAgdGhpcy5faGFuZGxlQW55VGV4dGFyZWFDaGFuZ2VzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRmluYWxpemVzIHRoZSBjb21wb3NpdGlvbiwgcmVzdW1pbmcgcmVndWxhciBpbnB1dCBhY3Rpb25zLiBUaGlzIGlzIGNhbGxlZCB3aGVuIGEgY29tcG9zaXRpb25cbiAgICogaXMgZW5kaW5nLlxuICAgKiBAcGFyYW0gd2FpdEZvclByb3BhZ2F0aW9uIFdoZXRoZXIgdG8gd2FpdCBmb3IgZXZlbnRzIHRvIHByb3BhZ2F0ZSBiZWZvcmUgc2VuZGluZ1xuICAgKiAgIHRoZSBpbnB1dC4gVGhpcyBzaG91bGQgYmUgZmFsc2UgaWYgYSBub24tY29tcG9zaXRpb24ga2V5c3Ryb2tlIGlzIGVudGVyZWQgYmVmb3JlIHRoZVxuICAgKiAgIGNvbXBvc2l0aW9uZW5kIGV2ZW50IGlzIHRyaWdnZXJlZCwgc3VjaCBhcyBlbnRlciwgc28gdGhhdCB0aGUgY29tcG9zaXRpb24gaXMgc2VudCBiZWZvcmVcbiAgICogICB0aGUgY29tbWFuZCBpcyBleGVjdXRlZC5cbiAgICovXG4gIHByaXZhdGUgX2ZpbmFsaXplQ29tcG9zaXRpb24od2FpdEZvclByb3BhZ2F0aW9uOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIHRoaXMuX2lzQ29tcG9zaW5nID0gZmFsc2U7XG4gICAgdGhpcy5fY2xlYXJUZXh0YXJlYVBvc2l0aW9uKCk7XG5cbiAgICBpZiAoIXdhaXRGb3JQcm9wYWdhdGlvbikge1xuICAgICAgLy8gQ2FuY2VsIGFueSBkZWxheWVkIGNvbXBvc2l0aW9uIHNlbmQgcmVxdWVzdHMgYW5kIHNlbmQgdGhlIGlucHV0IGltbWVkaWF0ZWx5LlxuICAgICAgdGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb24gPSBmYWxzZTtcbiAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5fdGV4dGFyZWEudmFsdWUuc3Vic3RyaW5nKHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQsIHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uZW5kKTtcbiAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoaW5wdXQsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNYWtlIGEgZGVlcCBjb3B5IG9mIHRoZSBjb21wb3NpdGlvbiBwb3NpdGlvbiBoZXJlIGFzIGEgbmV3IGNvbXBvc2l0aW9uc3RhcnQgZXZlbnQgbWF5XG4gICAgICAvLyBmaXJlIGJlZm9yZSB0aGUgc2V0VGltZW91dCBleGVjdXRlcy5cbiAgICAgIGNvbnN0IGN1cnJlbnRDb21wb3NpdGlvblBvc2l0aW9uID0ge1xuICAgICAgICBzdGFydDogdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCxcbiAgICAgICAgZW5kOiB0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLmVuZFxuICAgICAgfTtcblxuICAgICAgLy8gU2luY2UgY29tcG9zaXRpb24qIGV2ZW50cyBoYXBwZW4gYmVmb3JlIHRoZSBjaGFuZ2VzIHRha2UgcGxhY2UgaW4gdGhlIHRleHRhcmVhIG9uIG1vc3RcbiAgICAgIC8vIGJyb3dzZXJzLCB1c2UgYSBzZXRUaW1lb3V0IHdpdGggMG1zIHRpbWUgdG8gYWxsb3cgdGhlIG5hdGl2ZSBjb21wb3NpdGlvbmVuZCBldmVudCB0b1xuICAgICAgLy8gY29tcGxldGUuIFRoaXMgZW5zdXJlcyB0aGUgY29ycmVjdCBjaGFyYWN0ZXIgaXMgcmV0cmlldmVkLlxuICAgICAgLy8gVGhpcyBzb2x1dGlvbiB3YXMgdXNlZCBiZWNhdXNlOlxuICAgICAgLy8gLSBUaGUgY29tcG9zaXRpb25lbmQgZXZlbnQncyBkYXRhIHByb3BlcnR5IGlzIHVucmVsaWFibGUsIGF0IGxlYXN0IG9uIENocm9taXVtXG4gICAgICAvLyAtIFRoZSBsYXN0IGNvbXBvc2l0aW9udXBkYXRlIGV2ZW50J3MgZGF0YSBwcm9wZXJ0eSBkb2VzIG5vdCBhbHdheXMgYWNjdXJhdGVseSBkZXNjcmliZVxuICAgICAgLy8gICB0aGUgY2hhcmFjdGVyLCBhIGNvdW50ZXIgZXhhbXBsZSBiZWluZyBLb3JlYW4gd2hlcmUgYW4gZW5kaW5nIGNvbnNvbnNhbnQgY2FuIG1vdmUgdG9cbiAgICAgIC8vICAgdGhlIGZvbGxvd2luZyBjaGFyYWN0ZXIgaWYgdGhlIGZvbGxvd2luZyBpbnB1dCBpcyBhIHZvd2VsLlxuICAgICAgdGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb24gPSB0cnVlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBpbnB1dCBoYXMgbm90IGFscmVhZHkgYmVlbiBzZW50XG4gICAgICAgIGlmICh0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbikge1xuICAgICAgICAgIHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uID0gZmFsc2U7XG4gICAgICAgICAgbGV0IGlucHV0O1xuICAgICAgICAgIGlmICh0aGlzLl9pc0NvbXBvc2luZykge1xuICAgICAgICAgICAgLy8gVXNlIHRoZSBlbmQgcG9zaXRpb24gdG8gZ2V0IHRoZSBzdHJpbmcgaWYgYSBuZXcgY29tcG9zaXRpb24gaGFzIHN0YXJ0ZWQuXG4gICAgICAgICAgICBpbnB1dCA9IHRoaXMuX3RleHRhcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJyZW50Q29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCwgY3VycmVudENvbXBvc2l0aW9uUG9zaXRpb24uZW5kKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRG9uJ3QgdXNlIHRoZSBlbmQgcG9zaXRpb24gaGVyZSBpbiBvcmRlciB0byBwaWNrIHVwIGFueSBjaGFyYWN0ZXJzIGFmdGVyIHRoZVxuICAgICAgICAgICAgLy8gY29tcG9zaXRpb24gaGFzIGZpbmlzaGVkLCBmb3IgZXhhbXBsZSB3aGVuIHR5cGluZyBhIG5vbi1jb21wb3NpdGlvbiBjaGFyYWN0ZXJcbiAgICAgICAgICAgIC8vIChlZy4gMikgYWZ0ZXIgYSBjb21wb3NpdGlvbiBjaGFyYWN0ZXIuXG4gICAgICAgICAgICBpbnB1dCA9IHRoaXMuX3RleHRhcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJyZW50Q29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoaW5wdXQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgYW55IGNoYW5nZXMgbWFkZSB0byB0aGUgdGV4dGFyZWEgYWZ0ZXIgdGhlIGN1cnJlbnQgZXZlbnQgY2hhaW4gaXMgYWxsb3dlZCB0byBjb21wbGV0ZS5cbiAgICogVGhpcyBzaG91bGQgYmUgY2FsbGVkIHdoZW4gbm90IGN1cnJlbnRseSBjb21wb3NpbmcgYnV0IGEga2V5ZG93biBldmVudCB3aXRoIHRoZSBcImNvbXBvc2l0aW9uXG4gICAqIGNoYXJhY3RlclwiICgyMjkpIGlzIHRyaWdnZXJlZCwgaW4gb3JkZXIgdG8gYWxsb3cgbm9uLWNvbXBvc2l0aW9uIHRleHQgdG8gYmUgZW50ZXJlZCB3aGVuIGFuXG4gICAqIElNRSBpcyBhY3RpdmUuXG4gICAqL1xuICBwcml2YXRlIF9oYW5kbGVBbnlUZXh0YXJlYUNoYW5nZXMoKTogdm9pZCB7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl90ZXh0YXJlYS52YWx1ZTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIElnbm9yZSBpZiBhIGNvbXBvc2l0aW9uIGhhcyBzdGFydGVkIHNpbmNlIHRoZSB0aW1lb3V0XG4gICAgICBpZiAoIXRoaXMuX2lzQ29tcG9zaW5nKSB7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy5fdGV4dGFyZWEudmFsdWU7XG4gICAgICAgIGNvbnN0IGRpZmYgPSBuZXdWYWx1ZS5yZXBsYWNlKG9sZFZhbHVlLCAnJyk7XG4gICAgICAgIGlmIChkaWZmLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGRpZmYsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMCk7XG4gIH1cblxuICAvKipcbiAgICogUG9zaXRpb25zIHRoZSBjb21wb3NpdGlvbiB2aWV3IG9uIHRvcCBvZiB0aGUgY3Vyc29yIGFuZCB0aGUgdGV4dGFyZWEganVzdCBiZWxvdyBpdCAoc28gdGhlXG4gICAqIElNRSBoZWxwZXIgZGlhbG9nIGlzIHBvc2l0aW9uZWQgY29ycmVjdGx5KS5cbiAgICogQHBhcmFtIGRvbnRSZWN1cnNlIFdoZXRoZXIgdG8gdXNlIHNldFRpbWVvdXQgdG8gcmVjdXJzaXZlbHkgdHJpZ2dlciBhbm90aGVyIHVwZGF0ZSwgdGhpcyBpc1xuICAgKiAgIG5lY2Vzc2FyeSBhcyB0aGUgSU1FIGV2ZW50cyBhY3Jvc3MgYnJvd3NlcnMgYXJlIG5vdCBjb25zaXN0ZW50bHkgdHJpZ2dlcmVkLlxuICAgKi9cbiAgcHVibGljIHVwZGF0ZUNvbXBvc2l0aW9uRWxlbWVudHMoZG9udFJlY3Vyc2U/OiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9pc0NvbXBvc2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5pc0N1cnNvckluVmlld3BvcnQpIHtcbiAgICAgIGNvbnN0IGNlbGxIZWlnaHQgPSBNYXRoLmNlaWwodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCAqIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubGluZUhlaWdodCk7XG4gICAgICBjb25zdCBjdXJzb3JUb3AgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ICogY2VsbEhlaWdodDtcbiAgICAgIGNvbnN0IGN1cnNvckxlZnQgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ICogdGhpcy5fY2hhclNpemVTZXJ2aWNlLndpZHRoO1xuXG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUubGVmdCA9IGN1cnNvckxlZnQgKyAncHgnO1xuICAgICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLnRvcCA9IGN1cnNvclRvcCArICdweCc7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUuaGVpZ2h0ID0gY2VsbEhlaWdodCArICdweCc7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUubGluZUhlaWdodCA9IGNlbGxIZWlnaHQgKyAncHgnO1xuICAgICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLmZvbnRGYW1pbHkgPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRGYW1pbHk7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUuZm9udFNpemUgPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRTaXplICsgJ3B4JztcbiAgICAgIC8vIFN5bmMgdGhlIHRleHRhcmVhIHRvIHRoZSBleGFjdCBwb3NpdGlvbiBvZiB0aGUgY29tcG9zaXRpb24gdmlldyBzbyB0aGUgSU1FIGtub3dzIHdoZXJlIHRoZVxuICAgICAgLy8gdGV4dCBpcy5cbiAgICAgIGNvbnN0IGNvbXBvc2l0aW9uVmlld0JvdW5kcyA9IHRoaXMuX2NvbXBvc2l0aW9uVmlldy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHRoaXMuX3RleHRhcmVhLnN0eWxlLmxlZnQgPSBjdXJzb3JMZWZ0ICsgJ3B4JztcbiAgICAgIHRoaXMuX3RleHRhcmVhLnN0eWxlLnRvcCA9IGN1cnNvclRvcCArICdweCc7XG4gICAgICB0aGlzLl90ZXh0YXJlYS5zdHlsZS53aWR0aCA9IGNvbXBvc2l0aW9uVmlld0JvdW5kcy53aWR0aCArICdweCc7XG4gICAgICB0aGlzLl90ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSBjb21wb3NpdGlvblZpZXdCb3VuZHMuaGVpZ2h0ICsgJ3B4JztcbiAgICAgIHRoaXMuX3RleHRhcmVhLnN0eWxlLmxpbmVIZWlnaHQgPSBjb21wb3NpdGlvblZpZXdCb3VuZHMuaGVpZ2h0ICsgJ3B4JztcbiAgICB9XG5cbiAgICBpZiAoIWRvbnRSZWN1cnNlKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMudXBkYXRlQ29tcG9zaXRpb25FbGVtZW50cyh0cnVlKSwgMCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgdGV4dGFyZWEncyBwb3NpdGlvbiBzbyB0aGF0IHRoZSBjdXJzb3IgZG9lcyBub3QgYmxpbmsgb24gSUUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIF9jbGVhclRleHRhcmVhUG9zaXRpb24oKTogdm9pZCB7XG4gICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUubGVmdCA9ICcnO1xuICAgIHRoaXMuX3RleHRhcmVhLnN0eWxlLnRvcCA9ICcnO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudChldmVudDoge2NsaWVudFg6IG51bWJlciwgY2xpZW50WTogbnVtYmVyfSwgZWxlbWVudDogSFRNTEVsZW1lbnQpOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiBbZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCwgZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wXTtcbn1cblxuLyoqXG4gKiBHZXRzIGNvb3JkaW5hdGVzIHdpdGhpbiB0aGUgdGVybWluYWwgZm9yIGEgcGFydGljdWxhciBtb3VzZSBldmVudC4gVGhlIHJlc3VsdFxuICogaXMgcmV0dXJuZWQgYXMgYW4gYXJyYXkgaW4gdGhlIGZvcm0gW3gsIHldIGluc3RlYWQgb2YgYW4gb2JqZWN0IGFzIGl0J3MgYVxuICogbGl0dGxlIGZhc3RlciBhbmQgdGhpcyBmdW5jdGlvbiBpcyB1c2VkIGluIHNvbWUgbG93IGxldmVsIGNvZGUuXG4gKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxuICogQHBhcmFtIGVsZW1lbnQgVGhlIHRlcm1pbmFsJ3MgY29udGFpbmVyIGVsZW1lbnQuXG4gKiBAcGFyYW0gY29sQ291bnQgVGhlIG51bWJlciBvZiBjb2x1bW5zIGluIHRoZSB0ZXJtaW5hbC5cbiAqIEBwYXJhbSByb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJvd3MgbiB0aGUgdGVybWluYWwuXG4gKiBAcGFyYW0gaXNTZWxlY3Rpb24gV2hldGhlciB0aGUgcmVxdWVzdCBpcyBmb3IgdGhlIHNlbGVjdGlvbiBvciBub3QuIFRoaXMgd2lsbFxuICogYXBwbHkgYW4gb2Zmc2V0IHRvIHRoZSB4IHZhbHVlIHN1Y2ggdGhhdCB0aGUgbGVmdCBoYWxmIG9mIHRoZSBjZWxsIHdpbGxcbiAqIHNlbGVjdCB0aGF0IGNlbGwgYW5kIHRoZSByaWdodCBoYWxmIHdpbGwgc2VsZWN0IHRoZSBuZXh0IGNlbGwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb29yZHMoZXZlbnQ6IHtjbGllbnRYOiBudW1iZXIsIGNsaWVudFk6IG51bWJlcn0sIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjb2xDb3VudDogbnVtYmVyLCByb3dDb3VudDogbnVtYmVyLCBoYXNWYWxpZENoYXJTaXplOiBib29sZWFuLCBhY3R1YWxDZWxsV2lkdGg6IG51bWJlciwgYWN0dWFsQ2VsbEhlaWdodDogbnVtYmVyLCBpc1NlbGVjdGlvbj86IGJvb2xlYW4pOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgLy8gQ29vcmRpbmF0ZXMgY2Fubm90IGJlIG1lYXN1cmVkIGlmIHRoZXJlIGFyZSBubyB2YWxpZFxuICBpZiAoIWhhc1ZhbGlkQ2hhclNpemUpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgY29uc3QgY29vcmRzID0gZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQoZXZlbnQsIGVsZW1lbnQpO1xuICBpZiAoIWNvb3Jkcykge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBjb29yZHNbMF0gPSBNYXRoLmNlaWwoKGNvb3Jkc1swXSArIChpc1NlbGVjdGlvbiA/IGFjdHVhbENlbGxXaWR0aCAvIDIgOiAwKSkgLyBhY3R1YWxDZWxsV2lkdGgpO1xuICBjb29yZHNbMV0gPSBNYXRoLmNlaWwoY29vcmRzWzFdIC8gYWN0dWFsQ2VsbEhlaWdodCk7XG5cbiAgLy8gRW5zdXJlIGNvb3JkaW5hdGVzIGFyZSB3aXRoaW4gdGhlIHRlcm1pbmFsIHZpZXdwb3J0LiBOb3RlIHRoYXQgc2VsZWN0aW9uc1xuICAvLyBuZWVkIGFuIGFkZGl0aW9uIHBvaW50IG9mIHByZWNpc2lvbiB0byBjb3ZlciB0aGUgZW5kIHBvaW50IChhcyBjaGFyYWN0ZXJzXG4gIC8vIGNvdmVyIGhhbGYgb2Ygb25lIGNoYXIgYW5kIGhhbGYgb2YgdGhlIG5leHQpLlxuICBjb29yZHNbMF0gPSBNYXRoLm1pbihNYXRoLm1heChjb29yZHNbMF0sIDEpLCBjb2xDb3VudCArIChpc1NlbGVjdGlvbiA/IDEgOiAwKSk7XG4gIGNvb3Jkc1sxXSA9IE1hdGgubWluKE1hdGgubWF4KGNvb3Jkc1sxXSwgMSksIHJvd0NvdW50KTtcblxuICByZXR1cm4gY29vcmRzO1xufVxuXG4vKipcbiAqIEdldHMgY29vcmRpbmF0ZXMgd2l0aGluIHRoZSB0ZXJtaW5hbCBmb3IgYSBwYXJ0aWN1bGFyIG1vdXNlIGV2ZW50LCB3cmFwcGluZ1xuICogdGhlbSB0byB0aGUgYm91bmRzIG9mIHRoZSB0ZXJtaW5hbCBhbmQgYWRkaW5nIDMyIHRvIGJvdGggdGhlIHggYW5kIHkgdmFsdWVzXG4gKiBhcyBleHBlY3RlZCBieSB4dGVybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJhd0J5dGVDb29yZHMoY29vcmRzOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkKTogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9IHwgdW5kZWZpbmVkIHtcbiAgaWYgKCFjb29yZHMpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLy8geHRlcm0gc2VuZHMgcmF3IGJ5dGVzIGFuZCBzdGFydHMgYXQgMzIgKFNQKSBmb3IgZWFjaC5cbiAgcmV0dXJuIHsgeDogY29vcmRzWzBdICsgMzIsIHk6IGNvb3Jkc1sxXSArIDMyIH07XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IEMwIH0gZnJvbSAnY29tbW9uL2RhdGEvRXNjYXBlU2VxdWVuY2VzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuY29uc3QgZW51bSBEaXJlY3Rpb24ge1xuICBVUCA9ICdBJyxcbiAgRE9XTiA9ICdCJyxcbiAgUklHSFQgPSAnQycsXG4gIExFRlQgPSAnRCdcbn1cblxuLyoqXG4gKiBDb25jYXRlbmF0ZXMgYWxsIHRoZSBhcnJvdyBzZXF1ZW5jZXMgdG9nZXRoZXIuXG4gKiBSZXNldHMgdGhlIHN0YXJ0aW5nIHJvdyB0byBhbiB1bndyYXBwZWQgcm93LCBtb3ZlcyB0byB0aGUgcmVxdWVzdGVkIHJvdyxcbiAqIHRoZW4gbW92ZXMgdG8gcmVxdWVzdGVkIGNvbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vdmVUb0NlbGxTZXF1ZW5jZSh0YXJnZXRYOiBudW1iZXIsIHRhcmdldFk6IG51bWJlciwgYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsIGFwcGxpY2F0aW9uQ3Vyc29yOiBib29sZWFuKTogc3RyaW5nIHtcbiAgY29uc3Qgc3RhcnRYID0gYnVmZmVyU2VydmljZS5idWZmZXIueDtcbiAgY29uc3Qgc3RhcnRZID0gYnVmZmVyU2VydmljZS5idWZmZXIueTtcblxuICAvLyBUaGUgYWx0IGJ1ZmZlciBzaG91bGQgdHJ5IHRvIG5hdmlnYXRlIGJldHdlZW4gcm93c1xuICBpZiAoIWJ1ZmZlclNlcnZpY2UuYnVmZmVyLmhhc1Njcm9sbGJhY2spIHtcbiAgICByZXR1cm4gcmVzZXRTdGFydGluZ1JvdyhzdGFydFgsIHN0YXJ0WSwgdGFyZ2V0WCwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3IpICtcbiAgICAgIG1vdmVUb1JlcXVlc3RlZFJvdyhzdGFydFksIHRhcmdldFksIGJ1ZmZlclNlcnZpY2UsIGFwcGxpY2F0aW9uQ3Vyc29yKSArXG4gICAgICBtb3ZlVG9SZXF1ZXN0ZWRDb2woc3RhcnRYLCBzdGFydFksIHRhcmdldFgsIHRhcmdldFksIGJ1ZmZlclNlcnZpY2UsIGFwcGxpY2F0aW9uQ3Vyc29yKTtcbiAgfVxuXG4gIC8vIE9ubHkgbW92ZSBob3Jpem9udGFsbHkgZm9yIHRoZSBub3JtYWwgYnVmZmVyXG4gIHJldHVybiBtb3ZlSG9yaXpvbnRhbGx5T25seShzdGFydFgsIHN0YXJ0WSwgdGFyZ2V0WCwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3IpO1xufVxuXG4vKipcbiAqIElmIHRoZSBpbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBjdXJzb3IgaXMgb24gYSByb3cgdGhhdCBpcyB3cmFwcGVkLCBtb3ZlIHRoZVxuICogY3Vyc29yIHVwIHRvIHRoZSBmaXJzdCByb3cgdGhhdCBpcyBub3Qgd3JhcHBlZCB0byBoYXZlIGFjY3VyYXRlIHZlcnRpY2FsXG4gKiBwb3NpdGlvbmluZy5cbiAqL1xuZnVuY3Rpb24gcmVzZXRTdGFydGluZ1JvdyhzdGFydFg6IG51bWJlciwgc3RhcnRZOiBudW1iZXIsIHRhcmdldFg6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyLCBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3I6IGJvb2xlYW4pOiBzdHJpbmcge1xuICBpZiAobW92ZVRvUmVxdWVzdGVkUm93KHN0YXJ0WSwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3IpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICByZXR1cm4gcmVwZWF0KGJ1ZmZlckxpbmUoXG4gICAgc3RhcnRYLCBzdGFydFksIHN0YXJ0WCxcbiAgICBzdGFydFkgLSB3cmFwcGVkUm93c0ZvclJvdyhidWZmZXJTZXJ2aWNlLCBzdGFydFkpLCBmYWxzZSwgYnVmZmVyU2VydmljZVxuICApLmxlbmd0aCwgc2VxdWVuY2UoRGlyZWN0aW9uLkxFRlQsIGFwcGxpY2F0aW9uQ3Vyc29yKSk7XG59XG5cbi8qKlxuICogVXNpbmcgdGhlIHJlc2V0IHN0YXJ0aW5nIGFuZCBlbmRpbmcgcm93LCBtb3ZlIHRvIHRoZSByZXF1ZXN0ZWQgcm93LFxuICogaWdub3Jpbmcgd3JhcHBlZCByb3dzXG4gKi9cbmZ1bmN0aW9uIG1vdmVUb1JlcXVlc3RlZFJvdyhzdGFydFk6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyLCBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3I6IGJvb2xlYW4pOiBzdHJpbmcge1xuICBjb25zdCBzdGFydFJvdyA9IHN0YXJ0WSAtIHdyYXBwZWRSb3dzRm9yUm93KGJ1ZmZlclNlcnZpY2UsIHN0YXJ0WSk7XG4gIGNvbnN0IGVuZFJvdyA9IHRhcmdldFkgLSB3cmFwcGVkUm93c0ZvclJvdyhidWZmZXJTZXJ2aWNlLCB0YXJnZXRZKTtcblxuICBjb25zdCByb3dzVG9Nb3ZlID0gTWF0aC5hYnMoc3RhcnRSb3cgLSBlbmRSb3cpIC0gd3JhcHBlZFJvd3NDb3VudChzdGFydFksIHRhcmdldFksIGJ1ZmZlclNlcnZpY2UpO1xuXG4gIHJldHVybiByZXBlYXQocm93c1RvTW92ZSwgc2VxdWVuY2UodmVydGljYWxEaXJlY3Rpb24oc3RhcnRZLCB0YXJnZXRZKSwgYXBwbGljYXRpb25DdXJzb3IpKTtcbn1cblxuLyoqXG4gKiBNb3ZlIHRvIHRoZSByZXF1ZXN0ZWQgY29sIG9uIHRoZSBlbmRpbmcgcm93XG4gKi9cbmZ1bmN0aW9uIG1vdmVUb1JlcXVlc3RlZENvbChzdGFydFg6IG51bWJlciwgc3RhcnRZOiBudW1iZXIsIHRhcmdldFg6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyLCBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3I6IGJvb2xlYW4pOiBzdHJpbmcge1xuICBsZXQgc3RhcnRSb3c7XG4gIGlmIChtb3ZlVG9SZXF1ZXN0ZWRSb3coc3RhcnRZLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcikubGVuZ3RoID4gMCkge1xuICAgIHN0YXJ0Um93ID0gdGFyZ2V0WSAtIHdyYXBwZWRSb3dzRm9yUm93KGJ1ZmZlclNlcnZpY2UsIHRhcmdldFkpO1xuICB9IGVsc2Uge1xuICAgIHN0YXJ0Um93ID0gc3RhcnRZO1xuICB9XG5cbiAgY29uc3QgZW5kUm93ID0gdGFyZ2V0WTtcbiAgY29uc3QgZGlyZWN0aW9uID0gaG9yaXpvbnRhbERpcmVjdGlvbihzdGFydFgsIHN0YXJ0WSwgdGFyZ2V0WCwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3IpO1xuXG4gIHJldHVybiByZXBlYXQoYnVmZmVyTGluZShcbiAgICBzdGFydFgsIHN0YXJ0Um93LCB0YXJnZXRYLCBlbmRSb3csXG4gICAgZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUklHSFQsIGJ1ZmZlclNlcnZpY2VcbiAgKS5sZW5ndGgsIHNlcXVlbmNlKGRpcmVjdGlvbiwgYXBwbGljYXRpb25DdXJzb3IpKTtcbn1cblxuZnVuY3Rpb24gbW92ZUhvcml6b250YWxseU9ubHkoc3RhcnRYOiBudW1iZXIsIHN0YXJ0WTogbnVtYmVyLCB0YXJnZXRYOiBudW1iZXIsIHRhcmdldFk6IG51bWJlciwgYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsIGFwcGxpY2F0aW9uQ3Vyc29yOiBib29sZWFuKTogc3RyaW5nIHtcbiAgY29uc3QgZGlyZWN0aW9uID0gaG9yaXpvbnRhbERpcmVjdGlvbihzdGFydFgsIHN0YXJ0WSwgdGFyZ2V0WCwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3IpO1xuICByZXR1cm4gcmVwZWF0KE1hdGguYWJzKHN0YXJ0WCAtIHRhcmdldFgpLCBzZXF1ZW5jZShkaXJlY3Rpb24sIGFwcGxpY2F0aW9uQ3Vyc29yKSk7XG59XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnNcbiAqL1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIG51bWJlciBvZiB3cmFwcGVkIHJvd3MgYmV0d2VlbiB0aGUgdW53cmFwcGVkIHN0YXJ0aW5nIGFuZFxuICogZW5kaW5nIHJvd3MuIFRoZXNlIHJvd3MgbmVlZCB0byBpZ25vcmVkIHNpbmNlIHRoZSBjdXJzb3Igc2tpcHMgb3ZlciB0aGVtLlxuICovXG5mdW5jdGlvbiB3cmFwcGVkUm93c0NvdW50KHN0YXJ0WTogbnVtYmVyLCB0YXJnZXRZOiBudW1iZXIsIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlKTogbnVtYmVyIHtcbiAgbGV0IHdyYXBwZWRSb3dzID0gMDtcbiAgY29uc3Qgc3RhcnRSb3cgPSBzdGFydFkgLSB3cmFwcGVkUm93c0ZvclJvdyhidWZmZXJTZXJ2aWNlLCBzdGFydFkpO1xuICBjb25zdCBlbmRSb3cgPSB0YXJnZXRZIC0gd3JhcHBlZFJvd3NGb3JSb3coYnVmZmVyU2VydmljZSwgdGFyZ2V0WSk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLmFicyhzdGFydFJvdyAtIGVuZFJvdyk7IGkrKykge1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IHZlcnRpY2FsRGlyZWN0aW9uKHN0YXJ0WSwgdGFyZ2V0WSkgPT09IERpcmVjdGlvbi5VUCA/IC0xIDogMTtcbiAgICBjb25zdCBsaW5lID0gYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KHN0YXJ0Um93ICsgKGRpcmVjdGlvbiAqIGkpKTtcbiAgICBpZiAobGluZSAmJiBsaW5lLmlzV3JhcHBlZCkge1xuICAgICAgd3JhcHBlZFJvd3MrKztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gd3JhcHBlZFJvd3M7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIHdyYXBwZWQgcm93cyB0aGF0IG1ha2UgdXAgYSBnaXZlbiByb3cuXG4gKiBAcGFyYW0gY3VycmVudFJvdyBUaGUgcm93IHRvIGRldGVybWluZSBob3cgbWFueSB3cmFwcGVkIHJvd3MgbWFrZSBpdCB1cFxuICovXG5mdW5jdGlvbiB3cmFwcGVkUm93c0ZvclJvdyhidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSwgY3VycmVudFJvdzogbnVtYmVyKTogbnVtYmVyIHtcbiAgbGV0IHJvd0NvdW50ID0gMDtcbiAgbGV0IGxpbmUgPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoY3VycmVudFJvdyk7XG4gIGxldCBsaW5lV3JhcHMgPSBsaW5lICYmIGxpbmUuaXNXcmFwcGVkO1xuXG4gIHdoaWxlIChsaW5lV3JhcHMgJiYgY3VycmVudFJvdyA+PSAwICYmIGN1cnJlbnRSb3cgPCBidWZmZXJTZXJ2aWNlLnJvd3MpIHtcbiAgICByb3dDb3VudCsrO1xuICAgIGxpbmUgPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoLS1jdXJyZW50Um93KTtcbiAgICBsaW5lV3JhcHMgPSBsaW5lICYmIGxpbmUuaXNXcmFwcGVkO1xuICB9XG5cbiAgcmV0dXJuIHJvd0NvdW50O1xufVxuXG4vKipcbiAqIERpcmVjdGlvbiBkZXRlcm1pbmVyc1xuICovXG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgcmlnaHQgb3IgbGVmdCBhcnJvdyBpcyBuZWVkZWRcbiAqL1xuZnVuY3Rpb24gaG9yaXpvbnRhbERpcmVjdGlvbihzdGFydFg6IG51bWJlciwgc3RhcnRZOiBudW1iZXIsIHRhcmdldFg6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyLCBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3I6IGJvb2xlYW4pOiBEaXJlY3Rpb24ge1xuICBsZXQgc3RhcnRSb3c7XG4gIGlmIChtb3ZlVG9SZXF1ZXN0ZWRSb3codGFyZ2V0WCwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3IpLmxlbmd0aCA+IDApIHtcbiAgICBzdGFydFJvdyA9IHRhcmdldFkgLSB3cmFwcGVkUm93c0ZvclJvdyhidWZmZXJTZXJ2aWNlLCB0YXJnZXRZKTtcbiAgfSBlbHNlIHtcbiAgICBzdGFydFJvdyA9IHN0YXJ0WTtcbiAgfVxuXG4gIGlmICgoc3RhcnRYIDwgdGFyZ2V0WCAmJlxuICAgIHN0YXJ0Um93IDw9IHRhcmdldFkpIHx8IC8vIGRvd24vcmlnaHQgb3Igc2FtZSB5L3JpZ2h0XG4gICAgKHN0YXJ0WCA+PSB0YXJnZXRYICYmXG4gICAgc3RhcnRSb3cgPCB0YXJnZXRZKSkgeyAgLy8gZG93bi9sZWZ0IG9yIHNhbWUgeS9sZWZ0XG4gICAgcmV0dXJuIERpcmVjdGlvbi5SSUdIVDtcbiAgfVxuICByZXR1cm4gRGlyZWN0aW9uLkxFRlQ7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgdXAgb3IgZG93biBhcnJvdyBpcyBuZWVkZWRcbiAqL1xuZnVuY3Rpb24gdmVydGljYWxEaXJlY3Rpb24oc3RhcnRZOiBudW1iZXIsIHRhcmdldFk6IG51bWJlcik6IERpcmVjdGlvbiB7XG4gIHJldHVybiBzdGFydFkgPiB0YXJnZXRZID8gRGlyZWN0aW9uLlVQIDogRGlyZWN0aW9uLkRPV047XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyB0aGUgc3RyaW5nIG9mIGNoYXJzIGluIHRoZSBidWZmZXIgZnJvbSBhIHN0YXJ0aW5nIHJvdyBhbmQgY29sXG4gKiB0byBhbiBlbmRpbmcgcm93IGFuZCBjb2xcbiAqIEBwYXJhbSBzdGFydENvbCBUaGUgc3RhcnRpbmcgY29sdW1uIHBvc2l0aW9uXG4gKiBAcGFyYW0gc3RhcnRSb3cgVGhlIHN0YXJ0aW5nIHJvdyBwb3NpdGlvblxuICogQHBhcmFtIGVuZENvbCBUaGUgZW5kaW5nIGNvbHVtbiBwb3NpdGlvblxuICogQHBhcmFtIGVuZFJvdyBUaGUgZW5kaW5nIHJvdyBwb3NpdGlvblxuICogQHBhcmFtIGZvcndhcmQgRGlyZWN0aW9uIHRvIG1vdmVcbiAqL1xuZnVuY3Rpb24gYnVmZmVyTGluZShcbiAgc3RhcnRDb2w6IG51bWJlcixcbiAgc3RhcnRSb3c6IG51bWJlcixcbiAgZW5kQ29sOiBudW1iZXIsXG4gIGVuZFJvdzogbnVtYmVyLFxuICBmb3J3YXJkOiBib29sZWFuLFxuICBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuKTogc3RyaW5nIHtcbiAgbGV0IGN1cnJlbnRDb2wgPSBzdGFydENvbDtcbiAgbGV0IGN1cnJlbnRSb3cgPSBzdGFydFJvdztcbiAgbGV0IGJ1ZmZlclN0ciA9ICcnO1xuXG4gIHdoaWxlIChjdXJyZW50Q29sICE9PSBlbmRDb2wgfHwgY3VycmVudFJvdyAhPT0gZW5kUm93KSB7XG4gICAgY3VycmVudENvbCArPSBmb3J3YXJkID8gMSA6IC0xO1xuXG4gICAgaWYgKGZvcndhcmQgJiYgY3VycmVudENvbCA+IGJ1ZmZlclNlcnZpY2UuY29scyAtIDEpIHtcbiAgICAgIGJ1ZmZlclN0ciArPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoXG4gICAgICAgIGN1cnJlbnRSb3csIGZhbHNlLCBzdGFydENvbCwgY3VycmVudENvbFxuICAgICAgKTtcbiAgICAgIGN1cnJlbnRDb2wgPSAwO1xuICAgICAgc3RhcnRDb2wgPSAwO1xuICAgICAgY3VycmVudFJvdysrO1xuICAgIH0gZWxzZSBpZiAoIWZvcndhcmQgJiYgY3VycmVudENvbCA8IDApIHtcbiAgICAgIGJ1ZmZlclN0ciArPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoXG4gICAgICAgIGN1cnJlbnRSb3csIGZhbHNlLCAwLCBzdGFydENvbCArIDFcbiAgICAgICk7XG4gICAgICBjdXJyZW50Q29sID0gYnVmZmVyU2VydmljZS5jb2xzIC0gMTtcbiAgICAgIHN0YXJ0Q29sID0gY3VycmVudENvbDtcbiAgICAgIGN1cnJlbnRSb3ctLTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnVmZmVyU3RyICsgYnVmZmVyU2VydmljZS5idWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKFxuICAgIGN1cnJlbnRSb3csIGZhbHNlLCBzdGFydENvbCwgY3VycmVudENvbFxuICApO1xufVxuXG4vKipcbiAqIENvbnN0cnVjdHMgdGhlIGVzY2FwZSBzZXF1ZW5jZSBmb3IgY2xpY2tpbmcgYW4gYXJyb3dcbiAqIEBwYXJhbSBkaXJlY3Rpb24gVGhlIGRpcmVjdGlvbiB0byBtb3ZlXG4gKi9cbmZ1bmN0aW9uIHNlcXVlbmNlKGRpcmVjdGlvbjogRGlyZWN0aW9uLCBhcHBsaWNhdGlvbkN1cnNvcjogYm9vbGVhbik6IHN0cmluZyB7XG4gIGNvbnN0IG1vZCA9ICBhcHBsaWNhdGlvbkN1cnNvciA/ICdPJyA6ICdbJztcbiAgcmV0dXJuIEMwLkVTQyArIG1vZCArIGRpcmVjdGlvbjtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcGVhdGVkIGEgZ2l2ZW4gbnVtYmVyIG9mIHRpbWVzXG4gKiBQb2x5ZmlsbCBmcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N0cmluZy9yZXBlYXRcbiAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdCB0aGUgc3RyaW5nXG4gKiBAcGFyYW0gc3RyaW5nIFRoZSBzdHJpbmcgdGhhdCBpcyB0byBiZSByZXBlYXRlZFxuICovXG5mdW5jdGlvbiByZXBlYXQoY291bnQ6IG51bWJlciwgc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb3VudCA9IE1hdGguZmxvb3IoY291bnQpO1xuICBsZXQgcnB0ID0gJyc7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgIHJwdCArPSBzdHI7XG4gIH1cbiAgcmV0dXJuIHJwdDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMsIElSZW5kZXJMYXllciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUNlbGxEYXRhIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IERFRkFVTFRfQ09MT1IsIFdISVRFU1BBQ0VfQ0VMTF9DSEFSLCBXSElURVNQQUNFX0NFTExfQ09ERSwgQXR0cmlidXRlcyB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IElHbHlwaElkZW50aWZpZXIgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL1R5cGVzJztcbmltcG9ydCB7IERJTV9PUEFDSVRZLCBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9Db25zdGFudHMnO1xuaW1wb3J0IHsgQmFzZUNoYXJBdGxhcyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQmFzZUNoYXJBdGxhcyc7XG5pbXBvcnQgeyBhY3F1aXJlQ2hhckF0bGFzIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9DaGFyQXRsYXNDYWNoZSc7XG5pbXBvcnQgeyBBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9BdHRyaWJ1dGVEYXRhJztcbmltcG9ydCB7IElDb2xvclNldCwgSUNvbG9yIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyB0aHJvd0lmRmFsc3kgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1JlbmRlcmVyVXRpbHMnO1xuaW1wb3J0IHsgY2hhbm5lbHMsIGNvbG9yLCByZ2JhIH0gZnJvbSAnYnJvd3Nlci9Db2xvcic7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlUmVuZGVyTGF5ZXIgaW1wbGVtZW50cyBJUmVuZGVyTGF5ZXIge1xuICBwcml2YXRlIF9jYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcm90ZWN0ZWQgX2N0eCE6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgcHJpdmF0ZSBfc2NhbGVkQ2hhcldpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDaGFySGVpZ2h0OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDZWxsV2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3NjYWxlZENlbGxIZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3NjYWxlZENoYXJMZWZ0OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDaGFyVG9wOiBudW1iZXIgPSAwO1xuXG4gIHByb3RlY3RlZCBfY2hhckF0bGFzOiBCYXNlQ2hhckF0bGFzIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgdGhhdCdzIHJldXNlZCB3aGVuIGRyYXdpbmcgZ2x5cGhzIGluIG9yZGVyIHRvIHJlZHVjZSBHQy5cbiAgICovXG4gIHByaXZhdGUgX2N1cnJlbnRHbHlwaElkZW50aWZpZXI6IElHbHlwaElkZW50aWZpZXIgPSB7XG4gICAgY2hhcnM6ICcnLFxuICAgIGNvZGU6IDAsXG4gICAgYmc6IDAsXG4gICAgZmc6IDAsXG4gICAgYm9sZDogZmFsc2UsXG4gICAgZGltOiBmYWxzZSxcbiAgICBpdGFsaWM6IGZhbHNlXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBpZDogc3RyaW5nLFxuICAgIHpJbmRleDogbnVtYmVyLFxuICAgIHByaXZhdGUgX2FscGhhOiBib29sZWFuLFxuICAgIHByb3RlY3RlZCBfY29sb3JzOiBJQ29sb3JTZXQsXG4gICAgcHJpdmF0ZSBfcmVuZGVyZXJJZDogbnVtYmVyLFxuICAgIHByb3RlY3RlZCByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuX2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHRoaXMuX2NhbnZhcy5jbGFzc0xpc3QuYWRkKGB4dGVybS0ke2lkfS1sYXllcmApO1xuICAgIHRoaXMuX2NhbnZhcy5zdHlsZS56SW5kZXggPSB6SW5kZXgudG9TdHJpbmcoKTtcbiAgICB0aGlzLl9pbml0Q2FudmFzKCk7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2NhbnZhcyk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9jb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5fY2FudmFzKTtcbiAgICB0aGlzLl9jaGFyQXRsYXM/LmRpc3Bvc2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2luaXRDYW52YXMoKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4ID0gdGhyb3dJZkZhbHN5KHRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHthbHBoYTogdGhpcy5fYWxwaGF9KSk7XG4gICAgLy8gRHJhdyB0aGUgYmFja2dyb3VuZCBpZiB0aGlzIGlzIGFuIG9wYXF1ZSBsYXllclxuICAgIGlmICghdGhpcy5fYWxwaGEpIHtcbiAgICAgIHRoaXMuX2NsZWFyQWxsKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uT3B0aW9uc0NoYW5nZWQoKTogdm9pZCB7fVxuICBwdWJsaWMgb25CbHVyKCk6IHZvaWQge31cbiAgcHVibGljIG9uRm9jdXMoKTogdm9pZCB7fVxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKCk6IHZvaWQge31cbiAgcHVibGljIG9uR3JpZENoYW5nZWQoc3RhcnRSb3c6IG51bWJlciwgZW5kUm93OiBudW1iZXIpOiB2b2lkIHt9XG4gIHB1YmxpYyBvblNlbGVjdGlvbkNoYW5nZWQoc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0sIGVuZDogW251bWJlciwgbnVtYmVyXSwgY29sdW1uU2VsZWN0TW9kZTogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7fVxuXG4gIHB1YmxpYyBzZXRDb2xvcnMoY29sb3JTZXQ6IElDb2xvclNldCk6IHZvaWQge1xuICAgIHRoaXMuX3JlZnJlc2hDaGFyQXRsYXMoY29sb3JTZXQpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9zZXRUcmFuc3BhcmVuY3koYWxwaGE6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyBEbyBub3RoaW5nIHdoZW4gYWxwaGEgZG9lc24ndCBjaGFuZ2VcbiAgICBpZiAoYWxwaGEgPT09IHRoaXMuX2FscGhhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIG5ldyBjYW52YXMgYW5kIHJlcGxhY2Ugb2xkIG9uZVxuICAgIGNvbnN0IG9sZENhbnZhcyA9IHRoaXMuX2NhbnZhcztcbiAgICB0aGlzLl9hbHBoYSA9IGFscGhhO1xuICAgIC8vIENsb25pbmcgcHJlc2VydmVzIHByb3BlcnRpZXNcbiAgICB0aGlzLl9jYW52YXMgPSA8SFRNTENhbnZhc0VsZW1lbnQ+dGhpcy5fY2FudmFzLmNsb25lTm9kZSgpO1xuICAgIHRoaXMuX2luaXRDYW52YXMoKTtcbiAgICB0aGlzLl9jb250YWluZXIucmVwbGFjZUNoaWxkKHRoaXMuX2NhbnZhcywgb2xkQ2FudmFzKTtcblxuICAgIC8vIFJlZ2VuZXJhdGUgY2hhciBhdGxhcyBhbmQgZm9yY2UgYSBmdWxsIHJlZHJhd1xuICAgIHRoaXMuX3JlZnJlc2hDaGFyQXRsYXModGhpcy5fY29sb3JzKTtcbiAgICB0aGlzLm9uR3JpZENoYW5nZWQoMCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSk7XG4gIH1cblxuICAvKipcbiAgICogUmVmcmVzaGVzIHRoZSBjaGFyIGF0bGFzLCBhcXVpcmluZyBhIG5ldyBvbmUgaWYgbmVjZXNzYXJ5LlxuICAgKiBAcGFyYW0gY29sb3JTZXQgVGhlIGNvbG9yIHNldCB0byB1c2UgZm9yIHRoZSBjaGFyIGF0bGFzLlxuICAgKi9cbiAgcHJpdmF0ZSBfcmVmcmVzaENoYXJBdGxhcyhjb2xvclNldDogSUNvbG9yU2V0KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3NjYWxlZENoYXJXaWR0aCA8PSAwICYmIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQgPD0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9jaGFyQXRsYXMgPSBhY3F1aXJlQ2hhckF0bGFzKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMsIHRoaXMuX3JlbmRlcmVySWQsIGNvbG9yU2V0LCB0aGlzLl9zY2FsZWRDaGFyV2lkdGgsIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQpO1xuICAgIHRoaXMuX2NoYXJBdGxhcy53YXJtVXAoKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUoZGltOiBJUmVuZGVyRGltZW5zaW9ucyk6IHZvaWQge1xuICAgIHRoaXMuX3NjYWxlZENlbGxXaWR0aCA9IGRpbS5zY2FsZWRDZWxsV2lkdGg7XG4gICAgdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCA9IGRpbS5zY2FsZWRDZWxsSGVpZ2h0O1xuICAgIHRoaXMuX3NjYWxlZENoYXJXaWR0aCA9IGRpbS5zY2FsZWRDaGFyV2lkdGg7XG4gICAgdGhpcy5fc2NhbGVkQ2hhckhlaWdodCA9IGRpbS5zY2FsZWRDaGFySGVpZ2h0O1xuICAgIHRoaXMuX3NjYWxlZENoYXJMZWZ0ID0gZGltLnNjYWxlZENoYXJMZWZ0O1xuICAgIHRoaXMuX3NjYWxlZENoYXJUb3AgPSBkaW0uc2NhbGVkQ2hhclRvcDtcbiAgICB0aGlzLl9jYW52YXMud2lkdGggPSBkaW0uc2NhbGVkQ2FudmFzV2lkdGg7XG4gICAgdGhpcy5fY2FudmFzLmhlaWdodCA9IGRpbS5zY2FsZWRDYW52YXNIZWlnaHQ7XG4gICAgdGhpcy5fY2FudmFzLnN0eWxlLndpZHRoID0gYCR7ZGltLmNhbnZhc1dpZHRofXB4YDtcbiAgICB0aGlzLl9jYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7ZGltLmNhbnZhc0hlaWdodH1weGA7XG5cbiAgICAvLyBEcmF3IHRoZSBiYWNrZ3JvdW5kIGlmIHRoaXMgaXMgYW4gb3BhcXVlIGxheWVyXG4gICAgaWYgKCF0aGlzLl9hbHBoYSkge1xuICAgICAgdGhpcy5fY2xlYXJBbGwoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZWZyZXNoQ2hhckF0bGFzKHRoaXMuX2NvbG9ycyk7XG4gIH1cblxuICBwdWJsaWMgYWJzdHJhY3QgcmVzZXQoKTogdm9pZDtcblxuICAvKipcbiAgICogRmlsbHMgMSsgY2VsbHMgY29tcGxldGVseS4gVGhpcyB1c2VzIHRoZSBleGlzdGluZyBmaWxsU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gc3RhcnQgYXQuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gc3RhcnQgYXRcbiAgICogQHBhcmFtIHdpZHRoIFRoZSBudW1iZXIgb2YgY29sdW1ucyB0byBmaWxsLlxuICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBudW1iZXIgb2Ygcm93cyB0byBmaWxsLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9maWxsQ2VsbHMoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIGhlaWdodCAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbGxzIGEgMXB4IGxpbmUgKDJweCBvbiBIRFBJKSBhdCB0aGUgYm90dG9tIG9mIHRoZSBjZWxsLiBUaGlzIHVzZXMgdGhlXG4gICAqIGV4aXN0aW5nIGZpbGxTdHlsZSBvbiB0aGUgY29udGV4dC5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBmaWxsLlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGZpbGwuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2ZpbGxCb3R0b21MaW5lQXRDZWxscyh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciA9IDEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguZmlsbFJlY3QoXG4gICAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgICh5ICsgMSkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0IC0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gLSAxIC8qIEVuc3VyZSBpdCdzIGRyYXduIHdpdGhpbiB0aGUgY2VsbCAqLyxcbiAgICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWxscyBhIDFweCBsaW5lICgycHggb24gSERQSSkgYXQgdGhlIGxlZnQgb2YgdGhlIGNlbGwuIFRoaXMgdXNlcyB0aGVcbiAgICogZXhpc3RpbmcgZmlsbFN0eWxlIG9uIHRoZSBjb250ZXh0LlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIGZpbGwuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmlsbC5cbiAgICovXG4gIHByb3RlY3RlZCBfZmlsbExlZnRMaW5lQXRDZWxsKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgd2luZG93LmRldmljZVBpeGVsUmF0aW8gKiB3aWR0aCxcbiAgICAgICAgdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7XG4gIH1cblxuICAvKipcbiAgICogU3Ryb2tlcyBhIDFweCByZWN0YW5nbGUgKDJweCBvbiBIRFBJKSBhcm91bmQgYSBjZWxsLiBUaGlzIHVzZXMgdGhlIGV4aXN0aW5nXG4gICAqIHN0cm9rZVN0eWxlIG9uIHRoZSBjb250ZXh0LlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIGZpbGwuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmlsbC5cbiAgICovXG4gIHByb3RlY3RlZCBfc3Ryb2tlUmVjdEF0Q2VsbCh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHgubGluZVdpZHRoID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgdGhpcy5fY3R4LnN0cm9rZVJlY3QoXG4gICAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGggKyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAvIDIsXG4gICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0ICsgKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIC8gMiksXG4gICAgICAgIHdpZHRoICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoIC0gd2luZG93LmRldmljZVBpeGVsUmF0aW8sXG4gICAgICAgIChoZWlnaHQgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KSAtIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIGVudGlyZSBjYW52YXMuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2NsZWFyQWxsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hbHBoYSkge1xuICAgICAgdGhpcy5fY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgICAgdGhpcy5fY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyAxKyBjZWxscyBjb21wbGV0ZWx5LlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0gd2lkdGggVGhlIG51bWJlciBvZiBjb2x1bW5zIHRvIGNsZWFyLlxuICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBudW1iZXIgb2Ygcm93cyB0byBjbGVhci5cbiAgICovXG4gIHByb3RlY3RlZCBfY2xlYXJDZWxscyh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYWxwaGEpIHtcbiAgICAgIHRoaXMuX2N0eC5jbGVhclJlY3QoXG4gICAgICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgICB3aWR0aCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgICBoZWlnaHQgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLmNzcztcbiAgICAgIHRoaXMuX2N0eC5maWxsUmVjdChcbiAgICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICAgIHdpZHRoICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICAgIGhlaWdodCAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyBhIHRydWVjb2xvciBjaGFyYWN0ZXIgYXQgdGhlIGNlbGwuIFRoZSBjaGFyYWN0ZXIgd2lsbCBiZSBjbGlwcGVkIHRvXG4gICAqIGVuc3VyZSB0aGF0IGl0IGZpdHMgd2l0aCB0aGUgY2VsbCwgaW5jbHVkaW5nIHRoZSBjZWxsIHRvIHRoZSByaWdodCBpZiBpdCdzXG4gICAqIGEgd2lkZSBjaGFyYWN0ZXIuIFRoaXMgdXNlcyB0aGUgZXhpc3RpbmcgZmlsbFN0eWxlIG9uIHRoZSBjb250ZXh0LlxuICAgKiBAcGFyYW0gY2VsbCBUaGUgY2VsbCBkYXRhIGZvciB0aGUgY2hhcmFjdGVyIHRvIGRyYXcuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZHJhdyBhdC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBkcmF3IGF0LlxuICAgKiBAcGFyYW0gY29sb3IgVGhlIGNvbG9yIG9mIHRoZSBjaGFyYWN0ZXIuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2ZpbGxDaGFyVHJ1ZUNvbG9yKGNlbGw6IENlbGxEYXRhLCB4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5mb250ID0gdGhpcy5fZ2V0Rm9udChmYWxzZSwgZmFsc2UpO1xuICAgIHRoaXMuX2N0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICB0aGlzLl9jbGlwUm93KHkpO1xuICAgIHRoaXMuX2N0eC5maWxsVGV4dChcbiAgICAgICAgY2VsbC5nZXRDaGFycygpLFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoICsgdGhpcy5fc2NhbGVkQ2hhckxlZnQsXG4gICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0ICsgdGhpcy5fc2NhbGVkQ2hhclRvcCArIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQgLyAyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyBvbmUgb3IgbW9yZSBjaGFyYWN0ZXJzIGF0IGEgY2VsbC4gSWYgcG9zc2libGUgdGhpcyB3aWxsIGRyYXcgdXNpbmdcbiAgICogdGhlIGNoYXJhY3RlciBhdGxhcyB0byByZWR1Y2UgZHJhdyB0aW1lLlxuICAgKiBAcGFyYW0gY2hhcnMgVGhlIGNoYXJhY3RlciBvciBjaGFyYWN0ZXJzLlxuICAgKiBAcGFyYW0gY29kZSBUaGUgY2hhcmFjdGVyIGNvZGUuXG4gICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIGNoYXJhY3RlcnMuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZHJhdyBhdC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBkcmF3IGF0LlxuICAgKiBAcGFyYW0gZmcgVGhlIGZvcmVncm91bmQgY29sb3IsIGluIHRoZSBmb3JtYXQgc3RvcmVkIHdpdGhpbiB0aGUgYXR0cmlidXRlcy5cbiAgICogQHBhcmFtIGJnIFRoZSBiYWNrZ3JvdW5kIGNvbG9yLCBpbiB0aGUgZm9ybWF0IHN0b3JlZCB3aXRoaW4gdGhlIGF0dHJpYnV0ZXMuXG4gICAqIFRoaXMgaXMgdXNlZCB0byB2YWxpZGF0ZSB3aGV0aGVyIGEgY2FjaGVkIGltYWdlIGNhbiBiZSB1c2VkLlxuICAgKiBAcGFyYW0gYm9sZCBXaGV0aGVyIHRoZSB0ZXh0IGlzIGJvbGQuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2RyYXdDaGFycyhjZWxsOiBJQ2VsbERhdGEsIHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgY29udHJhc3RDb2xvciA9IHRoaXMuX2dldENvbnRyYXN0Q29sb3IoY2VsbCk7XG5cbiAgICAvLyBza2lwIGNhY2hlIHJpZ2h0IGF3YXkgaWYgd2UgZHJhdyBpbiBSR0JcbiAgICAvLyBOb3RlOiB0byBhdm9pZCBiYWQgcnVudGltZSBKb2luZWRDZWxsRGF0YSB3aWxsIGJlIHNraXBwZWRcbiAgICAvLyAgICAgICBpbiB0aGUgY2FjaGUgaGFuZGxlciBpdHNlbGYgKGF0bGFzRGlkRHJhdyA9PSBmYWxzZSkgYW5kXG4gICAgLy8gICAgICAgZmFsbCB0aHJvdWdoIHRvIHVuY2FjaGVkIGxhdGVyIGRvd24gYmVsb3dcbiAgICBpZiAoY29udHJhc3RDb2xvciB8fCBjZWxsLmlzRmdSR0IoKSB8fCBjZWxsLmlzQmdSR0IoKSkge1xuICAgICAgdGhpcy5fZHJhd1VuY2FjaGVkQ2hhcnMoY2VsbCwgeCwgeSwgY29udHJhc3RDb2xvcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGZnO1xuICAgIGxldCBiZztcbiAgICBpZiAoY2VsbC5pc0ludmVyc2UoKSkge1xuICAgICAgZmcgPSAoY2VsbC5pc0JnRGVmYXVsdCgpKSA/IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgOiBjZWxsLmdldEJnQ29sb3IoKTtcbiAgICAgIGJnID0gKGNlbGwuaXNGZ0RlZmF1bHQoKSkgPyBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SIDogY2VsbC5nZXRGZ0NvbG9yKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJnID0gKGNlbGwuaXNCZ0RlZmF1bHQoKSkgPyBERUZBVUxUX0NPTE9SIDogY2VsbC5nZXRCZ0NvbG9yKCk7XG4gICAgICBmZyA9IChjZWxsLmlzRmdEZWZhdWx0KCkpID8gREVGQVVMVF9DT0xPUiA6IGNlbGwuZ2V0RmdDb2xvcigpO1xuICAgIH1cblxuICAgIGNvbnN0IGRyYXdJbkJyaWdodENvbG9yID0gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyAmJiBjZWxsLmlzQm9sZCgpICYmIGZnIDwgODtcblxuICAgIGZnICs9IGRyYXdJbkJyaWdodENvbG9yID8gOCA6IDA7XG4gICAgdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5jaGFycyA9IGNlbGwuZ2V0Q2hhcnMoKSB8fCBXSElURVNQQUNFX0NFTExfQ0hBUjtcbiAgICB0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmNvZGUgPSBjZWxsLmdldENvZGUoKSB8fCBXSElURVNQQUNFX0NFTExfQ09ERTtcbiAgICB0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmJnID0gYmc7XG4gICAgdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5mZyA9IGZnO1xuICAgIHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuYm9sZCA9ICEhY2VsbC5pc0JvbGQoKTtcbiAgICB0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmRpbSA9ICEhY2VsbC5pc0RpbSgpO1xuICAgIHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuaXRhbGljID0gISFjZWxsLmlzSXRhbGljKCk7XG4gICAgY29uc3QgYXRsYXNEaWREcmF3ID0gdGhpcy5fY2hhckF0bGFzICYmIHRoaXMuX2NoYXJBdGxhcy5kcmF3KFxuICAgICAgdGhpcy5fY3R4LFxuICAgICAgdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllcixcbiAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGggKyB0aGlzLl9zY2FsZWRDaGFyTGVmdCxcbiAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0ICsgdGhpcy5fc2NhbGVkQ2hhclRvcFxuICAgICk7XG5cbiAgICBpZiAoIWF0bGFzRGlkRHJhdykge1xuICAgICAgdGhpcy5fZHJhd1VuY2FjaGVkQ2hhcnMoY2VsbCwgeCwgeSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIG9uZSBvciBtb3JlIGNoYXJhY3RlcnMgYXQgb25lIG9yIG1vcmUgY2VsbHMuIFRoZSBjaGFyYWN0ZXIocykgd2lsbCBiZVxuICAgKiBjbGlwcGVkIHRvIGVuc3VyZSB0aGF0IHRoZXkgZml0IHdpdGggdGhlIGNlbGwocyksIGluY2x1ZGluZyB0aGUgY2VsbCB0byB0aGVcbiAgICogcmlnaHQgaWYgdGhlIGxhc3QgY2hhcmFjdGVyIGlzIGEgd2lkZSBjaGFyYWN0ZXIuXG4gICAqIEBwYXJhbSBjaGFycyBUaGUgY2hhcmFjdGVyLlxuICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSBjaGFyYWN0ZXIuXG4gICAqIEBwYXJhbSBmZyBUaGUgZm9yZWdyb3VuZCBjb2xvciwgaW4gdGhlIGZvcm1hdCBzdG9yZWQgd2l0aGluIHRoZSBhdHRyaWJ1dGVzLlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIGRyYXcgYXQuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZHJhdyBhdC5cbiAgICovXG4gIHByaXZhdGUgX2RyYXdVbmNhY2hlZENoYXJzKGNlbGw6IElDZWxsRGF0YSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGZnT3ZlcnJpZGU/OiBJQ29sb3IpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5mb250ID0gdGhpcy5fZ2V0Rm9udCghIWNlbGwuaXNCb2xkKCksICEhY2VsbC5pc0l0YWxpYygpKTtcbiAgICB0aGlzLl9jdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG5cbiAgICBpZiAoY2VsbC5pc0ludmVyc2UoKSkge1xuICAgICAgaWYgKGZnT3ZlcnJpZGUpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IGZnT3ZlcnJpZGUuY3NzO1xuICAgICAgfSBlbHNlIGlmIChjZWxsLmlzQmdEZWZhdWx0KCkpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IGNvbG9yLm9wYXF1ZSh0aGlzLl9jb2xvcnMuYmFja2dyb3VuZCkuY3NzO1xuICAgICAgfSBlbHNlIGlmIChjZWxsLmlzQmdSR0IoKSkge1xuICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gYHJnYigke0F0dHJpYnV0ZURhdGEudG9Db2xvclJHQihjZWxsLmdldEJnQ29sb3IoKSkuam9pbignLCcpfSlgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGJnID0gY2VsbC5nZXRCZ0NvbG9yKCk7XG4gICAgICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzICYmIGNlbGwuaXNCb2xkKCkgJiYgYmcgPCA4KSB7XG4gICAgICAgICAgYmcgKz0gODtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmFuc2lbYmddLmNzcztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGZnT3ZlcnJpZGUpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IGZnT3ZlcnJpZGUuY3NzO1xuICAgICAgfSBlbHNlIGlmIChjZWxsLmlzRmdEZWZhdWx0KCkpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLmNzcztcbiAgICAgIH0gZWxzZSBpZiAoY2VsbC5pc0ZnUkdCKCkpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IGByZ2IoJHtBdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoY2VsbC5nZXRGZ0NvbG9yKCkpLmpvaW4oJywnKX0pYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBmZyA9IGNlbGwuZ2V0RmdDb2xvcigpO1xuICAgICAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyAmJiBjZWxsLmlzQm9sZCgpICYmIGZnIDwgOCkge1xuICAgICAgICAgIGZnICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5hbnNpW2ZnXS5jc3M7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fY2xpcFJvdyh5KTtcblxuICAgIC8vIEFwcGx5IGFscGhhIHRvIGRpbSB0aGUgY2hhcmFjdGVyXG4gICAgaWYgKGNlbGwuaXNEaW0oKSkge1xuICAgICAgdGhpcy5fY3R4Lmdsb2JhbEFscGhhID0gRElNX09QQUNJVFk7XG4gICAgfVxuICAgIC8vIERyYXcgdGhlIGNoYXJhY3RlclxuICAgIHRoaXMuX2N0eC5maWxsVGV4dChcbiAgICAgICAgY2VsbC5nZXRDaGFycygpLFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoICsgdGhpcy5fc2NhbGVkQ2hhckxlZnQsXG4gICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0ICsgdGhpcy5fc2NhbGVkQ2hhclRvcCArIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQgLyAyKTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsaXBzIGEgcm93IHRvIGVuc3VyZSBubyBwaXhlbHMgd2lsbCBiZSBkcmF3biBvdXRzaWRlIHRoZSBjZWxscyBpbiB0aGUgcm93LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGNsaXAuXG4gICAqL1xuICBwcml2YXRlIF9jbGlwUm93KHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5iZWdpblBhdGgoKTtcbiAgICB0aGlzLl9jdHgucmVjdChcbiAgICAgICAgMCxcbiAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7XG4gICAgdGhpcy5fY3R4LmNsaXAoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IGZvbnQuXG4gICAqIEBwYXJhbSBpc0JvbGQgSWYgd2Ugc2hvdWxkIHVzZSB0aGUgYm9sZCBmb250V2VpZ2h0LlxuICAgKi9cbiAgcHJvdGVjdGVkIF9nZXRGb250KGlzQm9sZDogYm9vbGVhbiwgaXNJdGFsaWM6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgIGNvbnN0IGZvbnRXZWlnaHQgPSBpc0JvbGQgPyB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRXZWlnaHRCb2xkIDogdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5mb250V2VpZ2h0O1xuICAgIGNvbnN0IGZvbnRTdHlsZSA9IGlzSXRhbGljID8gJ2l0YWxpYycgOiAnJztcblxuICAgIHJldHVybiBgJHtmb250U3R5bGV9ICR7Zm9udFdlaWdodH0gJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRTaXplICogd2luZG93LmRldmljZVBpeGVsUmF0aW99cHggJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRGYW1pbHl9YDtcbiAgfVxuXG4gIHByaXZhdGUgX2dldENvbnRyYXN0Q29sb3IoY2VsbDogQ2VsbERhdGEpOiBJQ29sb3IgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLm1pbmltdW1Db250cmFzdFJhdGlvID09PSAxKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIFRyeSBnZXQgZnJvbSBjYWNoZSBmaXJzdFxuICAgIGNvbnN0IGFkanVzdGVkQ29sb3IgPSB0aGlzLl9jb2xvcnMuY29udHJhc3RDYWNoZS5nZXRDb2xvcihjZWxsLmJnLCBjZWxsLmZnKTtcbiAgICBpZiAoYWRqdXN0ZWRDb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gYWRqdXN0ZWRDb2xvciB8fCB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgbGV0IGZnQ29sb3IgPSBjZWxsLmdldEZnQ29sb3IoKTtcbiAgICBsZXQgZmdDb2xvck1vZGUgPSBjZWxsLmdldEZnQ29sb3JNb2RlKCk7XG4gICAgbGV0IGJnQ29sb3IgPSBjZWxsLmdldEJnQ29sb3IoKTtcbiAgICBsZXQgYmdDb2xvck1vZGUgPSBjZWxsLmdldEJnQ29sb3JNb2RlKCk7XG4gICAgY29uc3QgaXNJbnZlcnNlID0gISFjZWxsLmlzSW52ZXJzZSgpO1xuICAgIGNvbnN0IGlzQm9sZCA9ICEhY2VsbC5pc0ludmVyc2UoKTtcbiAgICBpZiAoaXNJbnZlcnNlKSB7XG4gICAgICBjb25zdCB0ZW1wID0gZmdDb2xvcjtcbiAgICAgIGZnQ29sb3IgPSBiZ0NvbG9yO1xuICAgICAgYmdDb2xvciA9IHRlbXA7XG4gICAgICBjb25zdCB0ZW1wMiA9IGZnQ29sb3JNb2RlO1xuICAgICAgZmdDb2xvck1vZGUgPSBiZ0NvbG9yTW9kZTtcbiAgICAgIGJnQ29sb3JNb2RlID0gdGVtcDI7XG4gICAgfVxuXG4gICAgY29uc3QgYmdSZ2JhID0gdGhpcy5fcmVzb2x2ZUJhY2tncm91bmRSZ2JhKGJnQ29sb3JNb2RlLCBiZ0NvbG9yLCBpc0ludmVyc2UpO1xuICAgIGNvbnN0IGZnUmdiYSA9IHRoaXMuX3Jlc29sdmVGb3JlZ3JvdW5kUmdiYShmZ0NvbG9yTW9kZSwgZmdDb2xvciwgaXNJbnZlcnNlLCBpc0JvbGQpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHJnYmEuZW5zdXJlQ29udHJhc3RSYXRpbyhiZ1JnYmEsIGZnUmdiYSwgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5taW5pbXVtQ29udHJhc3RSYXRpbyk7XG5cbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgdGhpcy5fY29sb3JzLmNvbnRyYXN0Q2FjaGUuc2V0Q29sb3IoY2VsbC5iZywgY2VsbC5mZywgbnVsbCk7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbG9yOiBJQ29sb3IgPSB7XG4gICAgICBjc3M6IGNoYW5uZWxzLnRvQ3NzKFxuICAgICAgICAocmVzdWx0ID4+IDI0KSAmIDB4RkYsXG4gICAgICAgIChyZXN1bHQgPj4gMTYpICYgMHhGRixcbiAgICAgICAgKHJlc3VsdCA+PiA4KSAmIDB4RkZcbiAgICAgICksXG4gICAgICByZ2JhOiByZXN1bHRcbiAgICB9O1xuICAgIHRoaXMuX2NvbG9ycy5jb250cmFzdENhY2hlLnNldENvbG9yKGNlbGwuYmcsIGNlbGwuZmcsIGNvbG9yKTtcblxuICAgIHJldHVybiBjb2xvcjtcbiAgfVxuXG4gIHByaXZhdGUgX3Jlc29sdmVCYWNrZ3JvdW5kUmdiYShiZ0NvbG9yTW9kZTogbnVtYmVyLCBiZ0NvbG9yOiBudW1iZXIsIGludmVyc2U6IGJvb2xlYW4pOiBudW1iZXIge1xuICAgIHN3aXRjaCAoYmdDb2xvck1vZGUpIHtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9ycy5hbnNpW2JnQ29sb3JdLnJnYmE7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOlxuICAgICAgICByZXR1cm4gYmdDb2xvciA8PCA4O1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX0RFRkFVTFQ6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaW52ZXJzZSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5yZ2JhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5yZ2JhO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3Jlc29sdmVGb3JlZ3JvdW5kUmdiYShmZ0NvbG9yTW9kZTogbnVtYmVyLCBmZ0NvbG9yOiBudW1iZXIsIGludmVyc2U6IGJvb2xlYW4sIGJvbGQ6IGJvb2xlYW4pOiBudW1iZXIge1xuICAgIHN3aXRjaCAoZmdDb2xvck1vZGUpIHtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMgJiYgYm9sZCAmJiBmZ0NvbG9yIDwgOCkge1xuICAgICAgICAgIGZnQ29sb3IgKz0gODtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fY29sb3JzLmFuc2lbZmdDb2xvcl0ucmdiYTtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6XG4gICAgICAgIHJldHVybiBmZ0NvbG9yIDw8IDg7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fREVGQVVMVDpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChpbnZlcnNlKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLnJnYmE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLnJnYmE7XG4gICAgfVxuICB9XG59XG5cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlckxpbmUsIElDZWxsRGF0YSwgQ2hhckRhdGEgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSUNoYXJhY3RlckpvaW5lclJlZ2lzdHJ5LCBJQ2hhcmFjdGVySm9pbmVyIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9BdHRyaWJ1dGVEYXRhJztcbmltcG9ydCB7IFdISVRFU1BBQ0VfQ0VMTF9DSEFSLCBDb250ZW50IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuZXhwb3J0IGNsYXNzIEpvaW5lZENlbGxEYXRhIGV4dGVuZHMgQXR0cmlidXRlRGF0YSBpbXBsZW1lbnRzIElDZWxsRGF0YSB7XG4gIHByaXZhdGUgX3dpZHRoOiBudW1iZXI7XG4gIC8vIC5jb250ZW50IGNhcnJpZXMgbm8gbWVhbmluZyBmb3Igam9pbmVkIENlbGxEYXRhLCBzaW1wbHkgbnVsbGlmeSBpdFxuICAvLyB0aHVzIHdlIGhhdmUgdG8gb3ZlcmxvYWQgYWxsIG90aGVyIC5jb250ZW50IGFjY2Vzc29yc1xuICBwdWJsaWMgY29udGVudDogbnVtYmVyID0gMDtcbiAgcHVibGljIGZnOiBudW1iZXI7XG4gIHB1YmxpYyBiZzogbnVtYmVyO1xuICBwdWJsaWMgY29tYmluZWREYXRhOiBzdHJpbmcgPSAnJztcblxuICBjb25zdHJ1Y3RvcihmaXJzdENlbGw6IElDZWxsRGF0YSwgY2hhcnM6IHN0cmluZywgd2lkdGg6IG51bWJlcikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5mZyA9IGZpcnN0Q2VsbC5mZztcbiAgICB0aGlzLmJnID0gZmlyc3RDZWxsLmJnO1xuICAgIHRoaXMuY29tYmluZWREYXRhID0gY2hhcnM7XG4gICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgfVxuXG4gIHB1YmxpYyBpc0NvbWJpbmVkKCk6IG51bWJlciB7XG4gICAgLy8gYWx3YXlzIG1hcmsgam9pbmVkIGNlbGwgZGF0YSBhcyBjb21iaW5lZFxuICAgIHJldHVybiBDb250ZW50LklTX0NPTUJJTkVEX01BU0s7XG4gIH1cblxuICBwdWJsaWMgZ2V0V2lkdGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fd2lkdGg7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q2hhcnMoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb21iaW5lZERhdGE7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29kZSgpOiBudW1iZXIge1xuICAgIC8vIGNvZGUgYWx3YXlzIGdldHMgdGhlIGhpZ2hlc3QgcG9zc2libGUgZmFrZSBjb2RlcG9pbnQgKHJlYWQgYXMgLTEpXG4gICAgLy8gdGhpcyBpcyBuZWVkZWQgYXMgY29kZSBpcyB1c2VkIGJ5IGNhY2hlcyBhcyBpZGVudGlmaWVyXG4gICAgcmV0dXJuIDB4MUZGRkZGO1xuICB9XG5cbiAgcHVibGljIHNldEZyb21DaGFyRGF0YSh2YWx1ZTogQ2hhckRhdGEpOiB2b2lkIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpO1xuICB9XG5cbiAgcHVibGljIGdldEFzQ2hhckRhdGEoKTogQ2hhckRhdGEge1xuICAgIHJldHVybiBbdGhpcy5mZywgdGhpcy5nZXRDaGFycygpLCB0aGlzLmdldFdpZHRoKCksIHRoaXMuZ2V0Q29kZSgpXTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnkgaW1wbGVtZW50cyBJQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnkge1xuXG4gIHByaXZhdGUgX2NoYXJhY3RlckpvaW5lcnM6IElDaGFyYWN0ZXJKb2luZXJbXSA9IFtdO1xuICBwcml2YXRlIF9uZXh0Q2hhcmFjdGVySm9pbmVySWQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3dvcmtDZWxsOiBDZWxsRGF0YSA9IG5ldyBDZWxsRGF0YSgpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlKSB7IH1cblxuICBwdWJsaWMgcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoaGFuZGxlcjogKHRleHQ6IHN0cmluZykgPT4gW251bWJlciwgbnVtYmVyXVtdKTogbnVtYmVyIHtcbiAgICBjb25zdCBqb2luZXI6IElDaGFyYWN0ZXJKb2luZXIgPSB7XG4gICAgICBpZDogdGhpcy5fbmV4dENoYXJhY3RlckpvaW5lcklkKyssXG4gICAgICBoYW5kbGVyXG4gICAgfTtcblxuICAgIHRoaXMuX2NoYXJhY3RlckpvaW5lcnMucHVzaChqb2luZXIpO1xuICAgIHJldHVybiBqb2luZXIuaWQ7XG4gIH1cblxuICBwdWJsaWMgZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5fY2hhcmFjdGVySm9pbmVyc1tpXS5pZCA9PT0gam9pbmVySWQpIHtcbiAgICAgICAgdGhpcy5fY2hhcmFjdGVySm9pbmVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRKb2luZWRDaGFyYWN0ZXJzKHJvdzogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXVtdIHtcbiAgICBpZiAodGhpcy5fY2hhcmFjdGVySm9pbmVycy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5lID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KHJvdyk7XG4gICAgaWYgKCFsaW5lIHx8IGxpbmUubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgcmFuZ2VzOiBbbnVtYmVyLCBudW1iZXJdW10gPSBbXTtcbiAgICBjb25zdCBsaW5lU3RyID0gbGluZS50cmFuc2xhdGVUb1N0cmluZyh0cnVlKTtcblxuICAgIC8vIEJlY2F1c2Ugc29tZSBjZWxscyBjYW4gYmUgcmVwcmVzZW50ZWQgYnkgbXVsdGlwbGUgamF2YXNjcmlwdCBjaGFyYWN0ZXJzLFxuICAgIC8vIHdlIHRyYWNrIHRoZSBjZWxsIGFuZCB0aGUgc3RyaW5nIGluZGV4ZXMgc2VwYXJhdGVseS4gVGhpcyBhbGxvd3MgdXMgdG9cbiAgICAvLyB0cmFuc2xhdGUgdGhlIHN0cmluZyByYW5nZXMgd2UgZ2V0IGZyb20gdGhlIGpvaW5lcnMgYmFjayBpbnRvIGNlbGwgcmFuZ2VzXG4gICAgLy8gZm9yIHVzZSB3aGVuIHJlbmRlcmluZ1xuICAgIGxldCByYW5nZVN0YXJ0Q29sdW1uID0gMDtcbiAgICBsZXQgY3VycmVudFN0cmluZ0luZGV4ID0gMDtcbiAgICBsZXQgcmFuZ2VTdGFydFN0cmluZ0luZGV4ID0gMDtcbiAgICBsZXQgcmFuZ2VBdHRyRkcgPSBsaW5lLmdldEZnKDApO1xuICAgIGxldCByYW5nZUF0dHJCRyA9IGxpbmUuZ2V0QmcoMCk7XG5cbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGxpbmUuZ2V0VHJpbW1lZExlbmd0aCgpOyB4KyspIHtcbiAgICAgIGxpbmUubG9hZENlbGwoeCwgdGhpcy5fd29ya0NlbGwpO1xuXG4gICAgICBpZiAodGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKSA9PT0gMCkge1xuICAgICAgICAvLyBJZiB0aGlzIGNoYXJhY3RlciBpcyBvZiB3aWR0aCAwLCBza2lwIGl0LlxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gRW5kIG9mIHJhbmdlXG4gICAgICBpZiAodGhpcy5fd29ya0NlbGwuZmcgIT09IHJhbmdlQXR0ckZHIHx8IHRoaXMuX3dvcmtDZWxsLmJnICE9PSByYW5nZUF0dHJCRykge1xuICAgICAgICAvLyBJZiB3ZSBlbmRlZCB1cCB3aXRoIGEgc2VxdWVuY2Ugb2YgbW9yZSB0aGFuIG9uZSBjaGFyYWN0ZXIsXG4gICAgICAgIC8vIGxvb2sgZm9yIHJhbmdlcyB0byBqb2luLlxuICAgICAgICBpZiAoeCAtIHJhbmdlU3RhcnRDb2x1bW4gPiAxKSB7XG4gICAgICAgICAgY29uc3Qgam9pbmVkUmFuZ2VzID0gdGhpcy5fZ2V0Sm9pbmVkUmFuZ2VzKFxuICAgICAgICAgICAgbGluZVN0cixcbiAgICAgICAgICAgIHJhbmdlU3RhcnRTdHJpbmdJbmRleCxcbiAgICAgICAgICAgIGN1cnJlbnRTdHJpbmdJbmRleCxcbiAgICAgICAgICAgIGxpbmUsXG4gICAgICAgICAgICByYW5nZVN0YXJ0Q29sdW1uXG4gICAgICAgICAgKTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpvaW5lZFJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmFuZ2VzLnB1c2goam9pbmVkUmFuZ2VzW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXNldCBvdXIgbWFya2VycyBmb3IgYSBuZXcgcmFuZ2UuXG4gICAgICAgIHJhbmdlU3RhcnRDb2x1bW4gPSB4O1xuICAgICAgICByYW5nZVN0YXJ0U3RyaW5nSW5kZXggPSBjdXJyZW50U3RyaW5nSW5kZXg7XG4gICAgICAgIHJhbmdlQXR0ckZHID0gdGhpcy5fd29ya0NlbGwuZmc7XG4gICAgICAgIHJhbmdlQXR0ckJHID0gdGhpcy5fd29ya0NlbGwuYmc7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnRTdHJpbmdJbmRleCArPSB0aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpLmxlbmd0aCB8fCBXSElURVNQQUNFX0NFTExfQ0hBUi5sZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gUHJvY2VzcyBhbnkgdHJhaWxpbmcgcmFuZ2VzLlxuICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgLSByYW5nZVN0YXJ0Q29sdW1uID4gMSkge1xuICAgICAgY29uc3Qgam9pbmVkUmFuZ2VzID0gdGhpcy5fZ2V0Sm9pbmVkUmFuZ2VzKFxuICAgICAgICBsaW5lU3RyLFxuICAgICAgICByYW5nZVN0YXJ0U3RyaW5nSW5kZXgsXG4gICAgICAgIGN1cnJlbnRTdHJpbmdJbmRleCxcbiAgICAgICAgbGluZSxcbiAgICAgICAgcmFuZ2VTdGFydENvbHVtblxuICAgICAgKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgam9pbmVkUmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJhbmdlcy5wdXNoKGpvaW5lZFJhbmdlc1tpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJhbmdlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIHNlZ21lbnQgb2YgYSBsaW5lIG9mIHRleHQsIGZpbmQgYWxsIHJhbmdlcyBvZiB0ZXh0IHRoYXQgc2hvdWxkIGJlXG4gICAqIGpvaW5lZCBpbiBhIHNpbmdsZSByZW5kZXJpbmcgdW5pdC4gUmFuZ2VzIGFyZSBpbnRlcm5hbGx5IGNvbnZlcnRlZCB0b1xuICAgKiBjb2x1bW4gcmFuZ2VzLCByYXRoZXIgdGhhbiBzdHJpbmcgcmFuZ2VzLlxuICAgKiBAcGFyYW0gbGluZSBTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGZ1bGwgbGluZSBvZiB0ZXh0XG4gICAqIEBwYXJhbSBzdGFydEluZGV4IFN0YXJ0IHBvc2l0aW9uIG9mIHRoZSByYW5nZSB0byBzZWFyY2ggaW4gdGhlIHN0cmluZyAoaW5jbHVzaXZlKVxuICAgKiBAcGFyYW0gZW5kSW5kZXggRW5kIHBvc2l0aW9uIG9mIHRoZSByYW5nZSB0byBzZWFyY2ggaW4gdGhlIHN0cmluZyAoZXhjbHVzaXZlKVxuICAgKi9cbiAgcHJpdmF0ZSBfZ2V0Sm9pbmVkUmFuZ2VzKGxpbmU6IHN0cmluZywgc3RhcnRJbmRleDogbnVtYmVyLCBlbmRJbmRleDogbnVtYmVyLCBsaW5lRGF0YTogSUJ1ZmZlckxpbmUsIHN0YXJ0Q29sOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdW10ge1xuICAgIGNvbnN0IHRleHQgPSBsaW5lLnN1YnN0cmluZyhzdGFydEluZGV4LCBlbmRJbmRleCk7XG4gICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBhbHJlYWR5IGtub3cgdGhhdCB0aGVyZSBpcyBhdCBsZWFzdCBvbmUgam9pbmVyIHNvXG4gICAgLy8gd2UgY2FuIGp1c3QgcHVsbCBpdHMgdmFsdWUgYW5kIGFzc2lnbiBpdCBkaXJlY3RseSByYXRoZXIgdGhhblxuICAgIC8vIG1lcmdpbmcgaXQgaW50byBhbiBlbXB0eSBhcnJheSwgd2hpY2ggaW5jdXJzIHVubmVjZXNzYXJ5IHdyaXRlcy5cbiAgICBjb25zdCBqb2luZWRSYW5nZXM6IFtudW1iZXIsIG51bWJlcl1bXSA9IHRoaXMuX2NoYXJhY3RlckpvaW5lcnNbMF0uaGFuZGxlcih0ZXh0KTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuX2NoYXJhY3RlckpvaW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIFdlIG1lcmdlIGFueSBvdmVybGFwcGluZyByYW5nZXMgYWNyb3NzIHRoZSBkaWZmZXJlbnQgam9pbmVyc1xuICAgICAgY29uc3Qgam9pbmVyUmFuZ2VzID0gdGhpcy5fY2hhcmFjdGVySm9pbmVyc1tpXS5oYW5kbGVyKHRleHQpO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBqb2luZXJSYW5nZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnkuX21lcmdlUmFuZ2VzKGpvaW5lZFJhbmdlcywgam9pbmVyUmFuZ2VzW2pdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fc3RyaW5nUmFuZ2VzVG9DZWxsUmFuZ2VzKGpvaW5lZFJhbmdlcywgbGluZURhdGEsIHN0YXJ0Q29sKTtcbiAgICByZXR1cm4gam9pbmVkUmFuZ2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoZSBwcm92aWRlZCByYW5nZXMgaW4tcGxhY2UgdG8gYWRqdXN0IGZvciB2YXJpYXRpb25zIGJldHdlZW5cbiAgICogc3RyaW5nIGxlbmd0aCBhbmQgY2VsbCB3aWR0aCBzbyB0aGF0IHRoZSByYW5nZSByZXByZXNlbnRzIGEgY2VsbCByYW5nZSxcbiAgICogcmF0aGVyIHRoYW4gdGhlIHN0cmluZyByYW5nZSB0aGUgam9pbmVyIHByb3ZpZGVzLlxuICAgKiBAcGFyYW0gcmFuZ2VzIFN0cmluZyByYW5nZXMgY29udGFpbmluZyBzdGFydCAoaW5jbHVzaXZlKSBhbmQgZW5kIChleGNsdXNpdmUpIGluZGV4XG4gICAqIEBwYXJhbSBsaW5lIENlbGwgZGF0YSBmb3IgdGhlIHJlbGV2YW50IGxpbmUgaW4gdGhlIHRlcm1pbmFsXG4gICAqIEBwYXJhbSBzdGFydENvbCBPZmZzZXQgd2l0aGluIHRoZSBsaW5lIHRvIHN0YXJ0IGZyb21cbiAgICovXG4gIHByaXZhdGUgX3N0cmluZ1Jhbmdlc1RvQ2VsbFJhbmdlcyhyYW5nZXM6IFtudW1iZXIsIG51bWJlcl1bXSwgbGluZTogSUJ1ZmZlckxpbmUsIHN0YXJ0Q29sOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgY3VycmVudFJhbmdlSW5kZXggPSAwO1xuICAgIGxldCBjdXJyZW50UmFuZ2VTdGFydGVkID0gZmFsc2U7XG4gICAgbGV0IGN1cnJlbnRTdHJpbmdJbmRleCA9IDA7XG4gICAgbGV0IGN1cnJlbnRSYW5nZSA9IHJhbmdlc1tjdXJyZW50UmFuZ2VJbmRleF07XG5cbiAgICAvLyBJZiB3ZSBnb3QgdGhyb3VnaCBhbGwgb2YgdGhlIHJhbmdlcywgc3RvcCBzZWFyY2hpbmdcbiAgICBpZiAoIWN1cnJlbnRSYW5nZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IHggPSBzdGFydENvbDsgeCA8IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczsgeCsrKSB7XG4gICAgICBjb25zdCB3aWR0aCA9IGxpbmUuZ2V0V2lkdGgoeCk7XG4gICAgICBjb25zdCBsZW5ndGggPSBsaW5lLmdldFN0cmluZyh4KS5sZW5ndGggfHwgV0hJVEVTUEFDRV9DRUxMX0NIQVIubGVuZ3RoO1xuXG4gICAgICAvLyBXZSBza2lwIHplcm8td2lkdGggY2hhcmFjdGVycyB3aGVuIGNyZWF0aW5nIHRoZSBzdHJpbmcgdG8gam9pbiB0aGUgdGV4dFxuICAgICAgLy8gc28gd2UgZG8gdGhlIHNhbWUgaGVyZVxuICAgICAgaWYgKHdpZHRoID09PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGp1c3QgdGhlIHN0YXJ0IG9mIHRoZSByYW5nZVxuICAgICAgaWYgKCFjdXJyZW50UmFuZ2VTdGFydGVkICYmIGN1cnJlbnRSYW5nZVswXSA8PSBjdXJyZW50U3RyaW5nSW5kZXgpIHtcbiAgICAgICAgY3VycmVudFJhbmdlWzBdID0geDtcbiAgICAgICAgY3VycmVudFJhbmdlU3RhcnRlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkanVzdCB0aGUgZW5kIG9mIHRoZSByYW5nZVxuICAgICAgaWYgKGN1cnJlbnRSYW5nZVsxXSA8PSBjdXJyZW50U3RyaW5nSW5kZXgpIHtcbiAgICAgICAgY3VycmVudFJhbmdlWzFdID0geDtcblxuICAgICAgICAvLyBXZSdyZSBmaW5pc2hlZCB3aXRoIHRoaXMgcmFuZ2UsIHNvIHdlIG1vdmUgdG8gdGhlIG5leHQgb25lXG4gICAgICAgIGN1cnJlbnRSYW5nZSA9IHJhbmdlc1srK2N1cnJlbnRSYW5nZUluZGV4XTtcblxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gbW9yZSByYW5nZXMgbGVmdCwgc3RvcCBzZWFyY2hpbmdcbiAgICAgICAgaWYgKCFjdXJyZW50UmFuZ2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJhbmdlcyBjYW4gYmUgb24gYWRqYWNlbnQgY2hhcmFjdGVycy4gQmVjYXVzZSB0aGUgZW5kIGluZGV4IG9mIHRoZVxuICAgICAgICAvLyByYW5nZXMgYXJlIGV4Y2x1c2l2ZSwgdGhpcyBtZWFucyB0aGF0IHRoZSBpbmRleCBmb3IgdGhlIHN0YXJ0IG9mIGFcbiAgICAgICAgLy8gcmFuZ2UgY2FuIGJlIHRoZSBzYW1lIGFzIHRoZSBlbmQgaW5kZXggb2YgdGhlIHByZXZpb3VzIHJhbmdlLiBUb1xuICAgICAgICAvLyBhY2NvdW50IGZvciB0aGUgc3RhcnQgb2YgdGhlIG5leHQgcmFuZ2UsIHdlIGNoZWNrIGhlcmUganVzdCBpbiBjYXNlLlxuICAgICAgICBpZiAoY3VycmVudFJhbmdlWzBdIDw9IGN1cnJlbnRTdHJpbmdJbmRleCkge1xuICAgICAgICAgIGN1cnJlbnRSYW5nZVswXSA9IHg7XG4gICAgICAgICAgY3VycmVudFJhbmdlU3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudFJhbmdlU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFkanVzdCB0aGUgc3RyaW5nIGluZGV4IGJhc2VkIG9uIHRoZSBjaGFyYWN0ZXIgbGVuZ3RoIHRvIGxpbmUgdXAgd2l0aFxuICAgICAgLy8gdGhlIGNvbHVtbiBhZGp1c3RtZW50XG4gICAgICBjdXJyZW50U3RyaW5nSW5kZXggKz0gbGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIGlzIHN0aWxsIGEgcmFuZ2UgbGVmdCBhdCB0aGUgZW5kLCBpdCBtdXN0IGV4dGVuZCBhbGwgdGhlIHdheSB0b1xuICAgIC8vIHRoZSBlbmQgb2YgdGhlIGxpbmUuXG4gICAgaWYgKGN1cnJlbnRSYW5nZSkge1xuICAgICAgY3VycmVudFJhbmdlWzFdID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNZXJnZXMgdGhlIHJhbmdlIGRlZmluZWQgYnkgdGhlIHByb3ZpZGVkIHN0YXJ0IGFuZCBlbmQgaW50byB0aGUgbGlzdCBvZlxuICAgKiBleGlzdGluZyByYW5nZXMuIFRoZSBtZXJnZSBpcyBkb25lIGluIHBsYWNlIG9uIHRoZSBleGlzdGluZyByYW5nZSBmb3JcbiAgICogcGVyZm9ybWFuY2UgYW5kIGlzIGFsc28gcmV0dXJuZWQuXG4gICAqIEBwYXJhbSByYW5nZXMgRXhpc3RpbmcgcmFuZ2UgbGlzdFxuICAgKiBAcGFyYW0gbmV3UmFuZ2UgVHVwbGUgb2YgdHdvIG51bWJlcnMgcmVwcmVzZW50aW5nIHRoZSBuZXcgcmFuZ2UgdG8gbWVyZ2UgaW4uXG4gICAqIEByZXR1cm5zIFRoZSByYW5nZXMgaW5wdXQgd2l0aCB0aGUgbmV3IHJhbmdlIG1lcmdlZCBpbiBwbGFjZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgX21lcmdlUmFuZ2VzKHJhbmdlczogW251bWJlciwgbnVtYmVyXVtdLCBuZXdSYW5nZTogW251bWJlciwgbnVtYmVyXSk6IFtudW1iZXIsIG51bWJlcl1bXSB7XG4gICAgbGV0IGluUmFuZ2UgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcmFuZ2UgPSByYW5nZXNbaV07XG4gICAgICBpZiAoIWluUmFuZ2UpIHtcbiAgICAgICAgaWYgKG5ld1JhbmdlWzFdIDw9IHJhbmdlWzBdKSB7XG4gICAgICAgICAgLy8gQ2FzZSAxOiBOZXcgcmFuZ2UgaXMgYmVmb3JlIHRoZSBzZWFyY2ggcmFuZ2VcbiAgICAgICAgICByYW5nZXMuc3BsaWNlKGksIDAsIG5ld1JhbmdlKTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JhbmdlWzFdIDw9IHJhbmdlWzFdKSB7XG4gICAgICAgICAgLy8gQ2FzZSAyOiBOZXcgcmFuZ2UgaXMgZWl0aGVyIHdob2xseSBjb250YWluZWQgd2l0aGluIHRoZVxuICAgICAgICAgIC8vIHNlYXJjaCByYW5nZSBvciBvdmVybGFwcyB3aXRoIHRoZSBmcm9udCBvZiBpdFxuICAgICAgICAgIHJhbmdlWzBdID0gTWF0aC5taW4obmV3UmFuZ2VbMF0sIHJhbmdlWzBdKTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JhbmdlWzBdIDwgcmFuZ2VbMV0pIHtcbiAgICAgICAgICAvLyBDYXNlIDM6IE5ldyByYW5nZSBlaXRoZXIgd2hvbGx5IGNvbnRhaW5zIHRoZSBzZWFyY2ggcmFuZ2VcbiAgICAgICAgICAvLyBvciBvdmVybGFwcyB3aXRoIHRoZSBlbmQgb2YgaXRcbiAgICAgICAgICByYW5nZVswXSA9IE1hdGgubWluKG5ld1JhbmdlWzBdLCByYW5nZVswXSk7XG4gICAgICAgICAgaW5SYW5nZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYXNlIDQ6IE5ldyByYW5nZSBzdGFydHMgYWZ0ZXIgdGhlIHNlYXJjaCByYW5nZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChuZXdSYW5nZVsxXSA8PSByYW5nZVswXSkge1xuICAgICAgICAgIC8vIENhc2UgNTogTmV3IHJhbmdlIGV4dGVuZHMgZnJvbSBwcmV2aW91cyByYW5nZSBidXQgZG9lc24ndFxuICAgICAgICAgIC8vIHJlYWNoIHRoZSBjdXJyZW50IG9uZVxuICAgICAgICAgIHJhbmdlc1tpIC0gMV1bMV0gPSBuZXdSYW5nZVsxXTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JhbmdlWzFdIDw9IHJhbmdlWzFdKSB7XG4gICAgICAgICAgLy8gQ2FzZSA2OiBOZXcgcmFuZ2UgZXh0ZW5kcyBmcm9tIHBydmlvdXMgcmFuZ2UgaW50byB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IHJhbmdlXG4gICAgICAgICAgcmFuZ2VzW2kgLSAxXVsxXSA9IE1hdGgubWF4KG5ld1JhbmdlWzFdLCByYW5nZVsxXSk7XG4gICAgICAgICAgcmFuZ2VzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FzZSA3OiBOZXcgcmFuZ2UgZXh0ZW5kcyBmcm9tIHByZXZpb3VzIHJhbmdlIHBhc3QgdGhlXG4gICAgICAgIC8vIGVuZCBvZiB0aGUgY3VycmVudCByYW5nZVxuICAgICAgICByYW5nZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICBpLS07XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGluUmFuZ2UpIHtcbiAgICAgIC8vIENhc2UgODogTmV3IHJhbmdlIGV4dGVuZHMgcGFzdCB0aGUgbGFzdCBleGlzdGluZyByYW5nZVxuICAgICAgcmFuZ2VzW3Jhbmdlcy5sZW5ndGggLSAxXVsxXSA9IG5ld1JhbmdlWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDYXNlIDk6IE5ldyByYW5nZSBzdGFydHMgYWZ0ZXIgdGhlIGxhc3QgZXhpc3RpbmcgcmFuZ2VcbiAgICAgIHJhbmdlcy5wdXNoKG5ld1JhbmdlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2VzO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElSZW5kZXJEaW1lbnNpb25zLCBJUmVxdWVzdFJlZnJlc2hSb3dzRXZlbnQgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcbmltcG9ydCB7IEJhc2VSZW5kZXJMYXllciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvQmFzZVJlbmRlckxheWVyJztcbmltcG9ydCB7IElDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlLCBJQ29yZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUV2ZW50RW1pdHRlciB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSUNvcmVCcm93c2VyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuXG5pbnRlcmZhY2UgSUN1cnNvclN0YXRlIHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgc3R5bGU6IHN0cmluZztcbiAgd2lkdGg6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBUaGUgdGltZSBiZXR3ZWVuIGN1cnNvciBibGlua3MuXG4gKi9cbmNvbnN0IEJMSU5LX0lOVEVSVkFMID0gNjAwO1xuXG5leHBvcnQgY2xhc3MgQ3Vyc29yUmVuZGVyTGF5ZXIgZXh0ZW5kcyBCYXNlUmVuZGVyTGF5ZXIge1xuICBwcml2YXRlIF9zdGF0ZTogSUN1cnNvclN0YXRlO1xuICBwcml2YXRlIF9jdXJzb3JSZW5kZXJlcnM6IHtba2V5OiBzdHJpbmddOiAoeDogbnVtYmVyLCB5OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSkgPT4gdm9pZH07XG4gIHByaXZhdGUgX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyOiBDdXJzb3JCbGlua1N0YXRlTWFuYWdlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfY2VsbDogSUNlbGxEYXRhID0gbmV3IENlbGxEYXRhKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB6SW5kZXg6IG51bWJlcixcbiAgICBjb2xvcnM6IElDb2xvclNldCxcbiAgICByZW5kZXJlcklkOiBudW1iZXIsXG4gICAgcHJpdmF0ZSBfb25SZXF1ZXN0UmVmcmVzaFJvd3NFdmVudDogSUV2ZW50RW1pdHRlcjxJUmVxdWVzdFJlZnJlc2hSb3dzRXZlbnQ+LFxuICAgIHJlYWRvbmx5IGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIHJlYWRvbmx5IG9wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY29yZVNlcnZpY2U6IElDb3JlU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb3JlQnJvd3NlclNlcnZpY2U6IElDb3JlQnJvd3NlclNlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoY29udGFpbmVyLCAnY3Vyc29yJywgekluZGV4LCB0cnVlLCBjb2xvcnMsIHJlbmRlcmVySWQsIGJ1ZmZlclNlcnZpY2UsIG9wdGlvbnNTZXJ2aWNlKTtcbiAgICB0aGlzLl9zdGF0ZSA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgaXNGb2N1c2VkOiBmYWxzZSxcbiAgICAgIHN0eWxlOiAnJyxcbiAgICAgIHdpZHRoOiAwXG4gICAgfTtcbiAgICB0aGlzLl9jdXJzb3JSZW5kZXJlcnMgPSB7XG4gICAgICAnYmFyJzogdGhpcy5fcmVuZGVyQmFyQ3Vyc29yLmJpbmQodGhpcyksXG4gICAgICAnYmxvY2snOiB0aGlzLl9yZW5kZXJCbG9ja0N1cnNvci5iaW5kKHRoaXMpLFxuICAgICAgJ3VuZGVybGluZSc6IHRoaXMuX3JlbmRlclVuZGVybGluZUN1cnNvci5iaW5kKHRoaXMpXG4gICAgfTtcbiAgICAvLyBUT0RPOiBDb25zaWRlciBpbml0aWFsIG9wdGlvbnM/IE1heWJlIG9uT3B0aW9uc0NoYW5nZWQgc2hvdWxkIGJlIGNhbGxlZCBhdCB0aGUgZW5kIG9mIG9wZW4/XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKGRpbTogSVJlbmRlckRpbWVuc2lvbnMpOiB2b2lkIHtcbiAgICBzdXBlci5yZXNpemUoZGltKTtcbiAgICAvLyBSZXNpemluZyB0aGUgY2FudmFzIGRpc2NhcmRzIHRoZSBjb250ZW50cyBvZiB0aGUgY2FudmFzIHNvIGNsZWFyIHN0YXRlXG4gICAgdGhpcy5fc3RhdGUgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIGlzRm9jdXNlZDogZmFsc2UsXG4gICAgICBzdHlsZTogJycsXG4gICAgICB3aWR0aDogMFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpIHtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5vbk9wdGlvbnNDaGFuZ2VkKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uQmx1cigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpIHtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLnBhdXNlKCk7XG4gICAgfVxuICAgIHRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzRXZlbnQuZmlyZSh7IHN0YXJ0OiB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LCBlbmQ6IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgfSk7XG4gIH1cblxuICBwdWJsaWMgb25Gb2N1cygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpIHtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLnJlc3VtZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93c0V2ZW50LmZpcmUoeyBzdGFydDogdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSwgZW5kOiB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55IH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbk9wdGlvbnNDaGFuZ2VkKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvckJsaW5rKSB7XG4gICAgICBpZiAoIXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyID0gbmV3IEN1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5pc0ZvY3VzZWQsICgpID0+IHtcbiAgICAgICAgICB0aGlzLl9yZW5kZXIodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcj8uZGlzcG9zZSgpO1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIFJlcXVlc3QgYSByZWZyZXNoIGZyb20gdGhlIHRlcm1pbmFsIGFzIG1hbmFnZW1lbnQgb2YgcmVuZGVyaW5nIGlzIGJlaW5nXG4gICAgLy8gbW92ZWQgYmFjayB0byB0aGUgdGVybWluYWxcbiAgICB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93c0V2ZW50LmZpcmUoeyBzdGFydDogdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSwgZW5kOiB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55IH0pO1xuICB9XG5cbiAgcHVibGljIG9uQ3Vyc29yTW92ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpIHtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLnJlc3RhcnRCbGlua0FuaW1hdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbkdyaWRDaGFuZ2VkKHN0YXJ0Um93OiBudW1iZXIsIGVuZFJvdzogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciB8fCB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5pc1BhdXNlZCkge1xuICAgICAgdGhpcy5fcmVuZGVyKGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIucmVzdGFydEJsaW5rQW5pbWF0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyKHRyaWdnZXJlZEJ5QW5pbWF0aW9uRnJhbWU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyBEb24ndCBkcmF3IHRoZSBjdXJzb3IgaWYgaXQncyBoaWRkZW5cbiAgICBpZiAoIXRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQgfHwgdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW4pIHtcbiAgICAgIHRoaXMuX2NsZWFyQ3Vyc29yKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yWSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlICsgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueTtcbiAgICBjb25zdCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSA9IGN1cnNvclkgLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtcblxuICAgIC8vIERvbid0IGRyYXcgdGhlIGN1cnNvciBpZiBpdCdzIG9mZi1zY3JlZW5cbiAgICBpZiAodmlld3BvcnRSZWxhdGl2ZUN1cnNvclkgPCAwIHx8IHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZID49IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cykge1xuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoY3Vyc29yWSkhLmxvYWRDZWxsKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsIHRoaXMuX2NlbGwpO1xuICAgIGlmICh0aGlzLl9jZWxsLmNvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLmlzRm9jdXNlZCkge1xuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmN1cnNvci5jc3M7XG4gICAgICBjb25zdCBjdXJzb3JTdHlsZSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGU7XG4gICAgICBpZiAoY3Vyc29yU3R5bGUgJiYgY3Vyc29yU3R5bGUgIT09ICdibG9jaycpIHtcbiAgICAgICAgdGhpcy5fY3Vyc29yUmVuZGVyZXJzW2N1cnNvclN0eWxlXSh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSwgdGhpcy5fY2VsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9yZW5kZXJCbHVyQ3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsIHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZLCB0aGlzLl9jZWxsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2N0eC5yZXN0b3JlKCk7XG4gICAgICB0aGlzLl9zdGF0ZS54ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueDtcbiAgICAgIHRoaXMuX3N0YXRlLnkgPSB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWTtcbiAgICAgIHRoaXMuX3N0YXRlLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fc3RhdGUuc3R5bGUgPSBjdXJzb3JTdHlsZTtcbiAgICAgIHRoaXMuX3N0YXRlLndpZHRoID0gdGhpcy5fY2VsbC5nZXRXaWR0aCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERvbid0IGRyYXcgdGhlIGN1cnNvciBpZiBpdCdzIGJsaW5raW5nXG4gICAgaWYgKHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyICYmICF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5pc0N1cnNvclZpc2libGUpIHtcbiAgICAgIHRoaXMuX2NsZWFyQ3Vyc29yKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N0YXRlKSB7XG4gICAgICAvLyBUaGUgY3Vyc29yIGlzIGFscmVhZHkgaW4gdGhlIGNvcnJlY3Qgc3BvdCwgZG9uJ3QgcmVkcmF3XG4gICAgICBpZiAodGhpcy5fc3RhdGUueCA9PT0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCAmJlxuICAgICAgICAgIHRoaXMuX3N0YXRlLnkgPT09IHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZICYmXG4gICAgICAgICAgdGhpcy5fc3RhdGUuaXNGb2N1c2VkID09PSB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuaXNGb2N1c2VkICYmXG4gICAgICAgICAgdGhpcy5fc3RhdGUuc3R5bGUgPT09IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGUgJiZcbiAgICAgICAgICB0aGlzLl9zdGF0ZS53aWR0aCA9PT0gdGhpcy5fY2VsbC5nZXRXaWR0aCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2NsZWFyQ3Vyc29yKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICB0aGlzLl9jdXJzb3JSZW5kZXJlcnNbdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JTdHlsZSB8fCAnYmxvY2snXSh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSwgdGhpcy5fY2VsbCk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcblxuICAgIHRoaXMuX3N0YXRlLnggPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54O1xuICAgIHRoaXMuX3N0YXRlLnkgPSB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWTtcbiAgICB0aGlzLl9zdGF0ZS5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9zdGF0ZS5zdHlsZSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGU7XG4gICAgdGhpcy5fc3RhdGUud2lkdGggPSB0aGlzLl9jZWxsLmdldFdpZHRoKCk7XG4gIH1cblxuICBwcml2YXRlIF9jbGVhckN1cnNvcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc3RhdGUpIHtcbiAgICAgIHRoaXMuX2NsZWFyQ2VsbHModGhpcy5fc3RhdGUueCwgdGhpcy5fc3RhdGUueSwgdGhpcy5fc3RhdGUud2lkdGgsIDEpO1xuICAgICAgdGhpcy5fc3RhdGUgPSB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDAsXG4gICAgICAgIGlzRm9jdXNlZDogZmFsc2UsXG4gICAgICAgIHN0eWxlOiAnJyxcbiAgICAgICAgd2lkdGg6IDBcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyQmFyQ3Vyc29yKHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcztcbiAgICB0aGlzLl9maWxsTGVmdExpbmVBdENlbGwoeCwgeSwgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JXaWR0aCk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlckJsb2NrQ3Vyc29yKHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcztcbiAgICB0aGlzLl9maWxsQ2VsbHMoeCwgeSwgY2VsbC5nZXRXaWR0aCgpLCAxKTtcbiAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmN1cnNvckFjY2VudC5jc3M7XG4gICAgdGhpcy5fZmlsbENoYXJUcnVlQ29sb3IoY2VsbCwgeCwgeSk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlclVuZGVybGluZUN1cnNvcih4OiBudW1iZXIsIHk6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmN1cnNvci5jc3M7XG4gICAgdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKHgsIHkpO1xuICAgIHRoaXMuX2N0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJCbHVyQ3Vyc29yKHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5zdHJva2VTdHlsZSA9IHRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzO1xuICAgIHRoaXMuX3N0cm9rZVJlY3RBdENlbGwoeCwgeSwgY2VsbC5nZXRXaWR0aCgpLCAxKTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG59XG5cbmNsYXNzIEN1cnNvckJsaW5rU3RhdGVNYW5hZ2VyIHtcbiAgcHVibGljIGlzQ3Vyc29yVmlzaWJsZTogYm9vbGVhbjtcblxuICBwcml2YXRlIF9hbmltYXRpb25GcmFtZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9ibGlua1N0YXJ0VGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9ibGlua0ludGVydmFsOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSB0aW1lIGF0IHdoaWNoIHRoZSBhbmltYXRpb24gZnJhbWUgd2FzIHJlc3RhcnRlZCwgdGhpcyBpcyB1c2VkIG9uIHRoZVxuICAgKiBuZXh0IHJlbmRlciB0byByZXN0YXJ0IHRoZSB0aW1lcnMgc28gdGhleSBkb24ndCBuZWVkIHRvIHJlc3RhcnQgdGhlIHRpbWVyc1xuICAgKiBtdWx0aXBsZSB0aW1lcyBvdmVyIGEgc2hvcnQgcGVyaW9kLlxuICAgKi9cbiAgcHJpdmF0ZSBfYW5pbWF0aW9uVGltZVJlc3RhcnRlZDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGlzRm9jdXNlZDogYm9vbGVhbixcbiAgICBwcml2YXRlIF9yZW5kZXJDYWxsYmFjazogKCkgPT4gdm9pZFxuICApIHtcbiAgICB0aGlzLmlzQ3Vyc29yVmlzaWJsZSA9IHRydWU7XG4gICAgaWYgKGlzRm9jdXNlZCkge1xuICAgICAgdGhpcy5fcmVzdGFydEludGVydmFsKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldCBpc1BhdXNlZCgpOiBib29sZWFuIHsgcmV0dXJuICEodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgfHwgdGhpcy5fYmxpbmtJbnRlcnZhbCk7IH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYmxpbmtJbnRlcnZhbCkge1xuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fYmxpbmtJbnRlcnZhbCk7XG4gICAgICB0aGlzLl9ibGlua0ludGVydmFsID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpO1xuICAgICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZXN0YXJ0QmxpbmtBbmltYXRpb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNQYXVzZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gU2F2ZSBhIHRpbWVzdGFtcCBzbyB0aGF0IHRoZSByZXN0YXJ0IGNhbiBiZSBkb25lIG9uIHRoZSBuZXh0IGludGVydmFsXG4gICAgdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCA9IERhdGUubm93KCk7XG4gICAgLy8gRm9yY2UgYSBjdXJzb3IgcmVuZGVyIHRvIGVuc3VyZSBpdCdzIHZpc2libGUgYW5kIGluIHRoZSBjb3JyZWN0IHBvc2l0aW9uXG4gICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSB0cnVlO1xuICAgIGlmICghdGhpcy5fYW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuX3JlbmRlckNhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVzdGFydEludGVydmFsKHRpbWVUb1N0YXJ0OiBudW1iZXIgPSBCTElOS19JTlRFUlZBTCk6IHZvaWQge1xuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBpbnRlcnZhbFxuICAgIGlmICh0aGlzLl9ibGlua0ludGVydmFsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9ibGlua0ludGVydmFsKTtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCB0aGUgaW5pdGlhbCB0aW1lb3V0IHdoaWNoIHdpbGwgaGlkZSB0aGUgY3Vyc29yLCB0aGlzIGlzIGRvbmUgYmVmb3JlXG4gICAgLy8gdGhlIHJlZ3VsYXIgaW50ZXJ2YWwgaXMgc2V0dXAgaW4gb3JkZXIgdG8gc3VwcG9ydCByZXN0YXJ0aW5nIHRoZSBibGlua1xuICAgIC8vIGFuaW1hdGlvbiBpbiBhIGxpZ2h0d2VpZ2h0IHdheSAod2l0aG91dCB0aHJhc2hpbmcgY2xlYXJJbnRlcnZhbCBhbmRcbiAgICAvLyBzZXRJbnRlcnZhbCkuXG4gICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSA8bnVtYmVyPjxhbnk+c2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBhbm90aGVyIGFuaW1hdGlvbiByZXN0YXJ0IHdhcyByZXF1ZXN0ZWQgd2hpbGUgdGhpcyB3YXMgYmVpbmdcbiAgICAgIC8vIHN0YXJ0ZWRcbiAgICAgIGlmICh0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkKSB7XG4gICAgICAgIGNvbnN0IHRpbWUgPSBCTElOS19JTlRFUlZBTCAtIChEYXRlLm5vdygpIC0gdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aW1lID4gMCkge1xuICAgICAgICAgIHRoaXMuX3Jlc3RhcnRJbnRlcnZhbCh0aW1lKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSGlkZSB0aGUgY3Vyc29yXG4gICAgICB0aGlzLmlzQ3Vyc29yVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB1bmRlZmluZWQ7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2V0dXAgdGhlIGJsaW5rIGludGVydmFsXG4gICAgICB0aGlzLl9ibGlua0ludGVydmFsID0gPG51bWJlcj48YW55PnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgLy8gQWRqdXN0IHRoZSBhbmltYXRpb24gdGltZSBpZiBpdCB3YXMgcmVzdGFydGVkXG4gICAgICAgIGlmICh0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkKSB7XG4gICAgICAgICAgLy8gY2FsYyB0aW1lIGRpZmZcbiAgICAgICAgICAvLyBNYWtlIHJlc3RhcnQgaW50ZXJ2YWwgZG8gYSBzZXRUaW1lb3V0IGluaXRpYWxseT9cbiAgICAgICAgICBjb25zdCB0aW1lID0gQkxJTktfSU5URVJWQUwgLSAoRGF0ZS5ub3coKSAtIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQpO1xuICAgICAgICAgIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgdGhpcy5fcmVzdGFydEludGVydmFsKHRpbWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEludmVydCB2aXNpYmlsaXR5IGFuZCByZW5kZXJcbiAgICAgICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSAhdGhpcy5pc0N1cnNvclZpc2libGU7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soKTtcbiAgICAgICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICB9LCBCTElOS19JTlRFUlZBTCk7XG4gICAgfSwgdGltZVRvU3RhcnQpO1xuICB9XG5cbiAgcHVibGljIHBhdXNlKCk6IHZvaWQge1xuICAgIHRoaXMuaXNDdXJzb3JWaXNpYmxlID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5fYmxpbmtJbnRlcnZhbCkge1xuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fYmxpbmtJbnRlcnZhbCk7XG4gICAgICB0aGlzLl9ibGlua0ludGVydmFsID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpO1xuICAgICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZXN1bWUoKTogdm9pZCB7XG4gICAgdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9yZXN0YXJ0SW50ZXJ2YWwoKTtcbiAgICB0aGlzLnJlc3RhcnRCbGlua0FuaW1hdGlvbigpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmV4cG9ydCBjbGFzcyBHcmlkQ2FjaGU8VD4ge1xuICBwdWJsaWMgY2FjaGU6IChUIHwgdW5kZWZpbmVkKVtdW107XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2FjaGUgPSBbXTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgIGlmICh0aGlzLmNhY2hlLmxlbmd0aCA8PSB4KSB7XG4gICAgICAgIHRoaXMuY2FjaGUucHVzaChbXSk7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCB5ID0gdGhpcy5jYWNoZVt4XS5sZW5ndGg7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICB0aGlzLmNhY2hlW3hdLnB1c2godW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2FjaGVbeF0ubGVuZ3RoID0gaGVpZ2h0O1xuICAgIH1cbiAgICB0aGlzLmNhY2hlLmxlbmd0aCA9IHdpZHRoO1xuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5jYWNoZS5sZW5ndGg7IHgrKykge1xuICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLmNhY2hlW3hdLmxlbmd0aDsgeSsrKSB7XG4gICAgICAgIHRoaXMuY2FjaGVbeF1beV0gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElSZW5kZXJEaW1lbnNpb25zIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBCYXNlUmVuZGVyTGF5ZXIgfSBmcm9tICcuL0Jhc2VSZW5kZXJMYXllcic7XG5pbXBvcnQgeyBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9Db25zdGFudHMnO1xuaW1wb3J0IHsgaXMyNTZDb2xvciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQ2hhckF0bGFzVXRpbHMnO1xuaW1wb3J0IHsgSUNvbG9yU2V0LCBJTGlua2lmaWVyRXZlbnQsIElMaW5raWZpZXIgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5leHBvcnQgY2xhc3MgTGlua1JlbmRlckxheWVyIGV4dGVuZHMgQmFzZVJlbmRlckxheWVyIHtcbiAgcHJpdmF0ZSBfc3RhdGU6IElMaW5raWZpZXJFdmVudCB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIHpJbmRleDogbnVtYmVyLFxuICAgIGNvbG9yczogSUNvbG9yU2V0LFxuICAgIHJlbmRlcmVySWQ6IG51bWJlcixcbiAgICBsaW5raWZpZXI6IElMaW5raWZpZXIsXG4gICAgcmVhZG9ubHkgYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgcmVhZG9ubHkgb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICBzdXBlcihjb250YWluZXIsICdsaW5rJywgekluZGV4LCB0cnVlLCBjb2xvcnMsIHJlbmRlcmVySWQsIGJ1ZmZlclNlcnZpY2UsIG9wdGlvbnNTZXJ2aWNlKTtcbiAgICBsaW5raWZpZXIub25MaW5rSG92ZXIoZSA9PiB0aGlzLl9vbkxpbmtIb3ZlcihlKSk7XG4gICAgbGlua2lmaWVyLm9uTGlua0xlYXZlKGUgPT4gdGhpcy5fb25MaW5rTGVhdmUoZSkpO1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZShkaW06IElSZW5kZXJEaW1lbnNpb25zKTogdm9pZCB7XG4gICAgc3VwZXIucmVzaXplKGRpbSk7XG4gICAgLy8gUmVzaXppbmcgdGhlIGNhbnZhcyBkaXNjYXJkcyB0aGUgY29udGVudHMgb2YgdGhlIGNhbnZhcyBzbyBjbGVhciBzdGF0ZVxuICAgIHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2NsZWFyQ3VycmVudExpbmsoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N0YXRlKSB7XG4gICAgICB0aGlzLl9jbGVhckNlbGxzKHRoaXMuX3N0YXRlLngxLCB0aGlzLl9zdGF0ZS55MSwgdGhpcy5fc3RhdGUuY29scyAtIHRoaXMuX3N0YXRlLngxLCAxKTtcbiAgICAgIGNvbnN0IG1pZGRsZVJvd0NvdW50ID0gdGhpcy5fc3RhdGUueTIgLSB0aGlzLl9zdGF0ZS55MSAtIDE7XG4gICAgICBpZiAobWlkZGxlUm93Q291bnQgPiAwKSB7XG4gICAgICAgIHRoaXMuX2NsZWFyQ2VsbHMoMCwgdGhpcy5fc3RhdGUueTEgKyAxLCB0aGlzLl9zdGF0ZS5jb2xzLCBtaWRkbGVSb3dDb3VudCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9jbGVhckNlbGxzKDAsIHRoaXMuX3N0YXRlLnkyLCB0aGlzLl9zdGF0ZS54MiwgMSk7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9vbkxpbmtIb3ZlcihlOiBJTGlua2lmaWVyRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZS5mZyA9PT0gSU5WRVJURURfREVGQVVMVF9DT0xPUikge1xuICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLmNzcztcbiAgICB9IGVsc2UgaWYgKGUuZmcgJiYgaXMyNTZDb2xvcihlLmZnKSkge1xuICAgICAgLy8gMjU2IGNvbG9yIHN1cHBvcnRcbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYW5zaVtlLmZnXS5jc3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3M7XG4gICAgfVxuXG4gICAgaWYgKGUueTEgPT09IGUueTIpIHtcbiAgICAgIC8vIFNpbmdsZSBsaW5lIGxpbmtcbiAgICAgIHRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscyhlLngxLCBlLnkxLCBlLngyIC0gZS54MSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE11bHRpLWxpbmUgbGlua1xuICAgICAgdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKGUueDEsIGUueTEsIGUuY29scyAtIGUueDEpO1xuICAgICAgZm9yIChsZXQgeSA9IGUueTEgKyAxOyB5IDwgZS55MjsgeSsrKSB7XG4gICAgICAgIHRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscygwLCB5LCBlLmNvbHMpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKDAsIGUueTIsIGUueDIpO1xuICAgIH1cbiAgICB0aGlzLl9zdGF0ZSA9IGU7XG4gIH1cblxuICBwcml2YXRlIF9vbkxpbmtMZWF2ZShlOiBJTGlua2lmaWVyRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9jbGVhckN1cnJlbnRMaW5rKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgVGV4dFJlbmRlckxheWVyIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UZXh0UmVuZGVyTGF5ZXInO1xuaW1wb3J0IHsgU2VsZWN0aW9uUmVuZGVyTGF5ZXIgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1NlbGVjdGlvblJlbmRlckxheWVyJztcbmltcG9ydCB7IEN1cnNvclJlbmRlckxheWVyIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9DdXJzb3JSZW5kZXJMYXllcic7XG5pbXBvcnQgeyBJUmVuZGVyTGF5ZXIsIElSZW5kZXJlciwgSVJlbmRlckRpbWVuc2lvbnMsIENoYXJhY3RlckpvaW5lckhhbmRsZXIsIElDaGFyYWN0ZXJKb2luZXJSZWdpc3RyeSwgSVJlcXVlc3RSZWZyZXNoUm93c0V2ZW50IH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBMaW5rUmVuZGVyTGF5ZXIgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL0xpbmtSZW5kZXJMYXllcic7XG5pbXBvcnQgeyBDaGFyYWN0ZXJKb2luZXJSZWdpc3RyeSB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnknO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgSUNvbG9yU2V0LCBJTGlua2lmaWVyIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJQ2hhclNpemVTZXJ2aWNlLCBJQ29yZUJyb3dzZXJTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlLCBJQ29yZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgcmVtb3ZlVGVybWluYWxGcm9tQ2FjaGUgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0NoYXJBdGxhc0NhY2hlJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5cbmxldCBuZXh0UmVuZGVyZXJJZCA9IDE7XG5cbmV4cG9ydCBjbGFzcyBSZW5kZXJlciBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJUmVuZGVyZXIge1xuICBwcml2YXRlIF9pZCA9IG5leHRSZW5kZXJlcklkKys7XG5cbiAgcHJpdmF0ZSBfcmVuZGVyTGF5ZXJzOiBJUmVuZGVyTGF5ZXJbXTtcbiAgcHJpdmF0ZSBfZGV2aWNlUGl4ZWxSYXRpbzogbnVtYmVyO1xuICBwcml2YXRlIF9jaGFyYWN0ZXJKb2luZXJSZWdpc3RyeTogSUNoYXJhY3RlckpvaW5lclJlZ2lzdHJ5O1xuXG4gIHB1YmxpYyBkaW1lbnNpb25zOiBJUmVuZGVyRGltZW5zaW9ucztcblxuICBwcml2YXRlIF9vblJlcXVlc3RSZWZyZXNoUm93cyA9IG5ldyBFdmVudEVtaXR0ZXI8SVJlcXVlc3RSZWZyZXNoUm93c0V2ZW50PigpO1xuICBwdWJsaWMgZ2V0IG9uUmVxdWVzdFJlZnJlc2hSb3dzKCk6IElFdmVudDxJUmVxdWVzdFJlZnJlc2hSb3dzRXZlbnQ+IHsgcmV0dXJuIHRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzLmV2ZW50OyB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfY29sb3JzOiBJQ29sb3JTZXQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfbGlua2lmaWVyOiBJTGlua2lmaWVyLFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASUNoYXJTaXplU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jaGFyU2l6ZVNlcnZpY2U6IElDaGFyU2l6ZVNlcnZpY2UsXG4gICAgQElPcHRpb25zU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlLFxuICAgIEBJQ29yZVNlcnZpY2UgcmVhZG9ubHkgY29yZVNlcnZpY2U6IElDb3JlU2VydmljZSxcbiAgICBASUNvcmVCcm93c2VyU2VydmljZSByZWFkb25seSBjb3JlQnJvd3NlclNlcnZpY2U6IElDb3JlQnJvd3NlclNlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICBjb25zdCBhbGxvd1RyYW5zcGFyZW5jeSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuYWxsb3dUcmFuc3BhcmVuY3k7XG4gICAgdGhpcy5fY2hhcmFjdGVySm9pbmVyUmVnaXN0cnkgPSBuZXcgQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnkodGhpcy5fYnVmZmVyU2VydmljZSk7XG5cbiAgICB0aGlzLl9yZW5kZXJMYXllcnMgPSBbXG4gICAgICBuZXcgVGV4dFJlbmRlckxheWVyKHRoaXMuX3NjcmVlbkVsZW1lbnQsIDAsIHRoaXMuX2NvbG9ycywgdGhpcy5fY2hhcmFjdGVySm9pbmVyUmVnaXN0cnksIGFsbG93VHJhbnNwYXJlbmN5LCB0aGlzLl9pZCwgdGhpcy5fYnVmZmVyU2VydmljZSwgX29wdGlvbnNTZXJ2aWNlKSxcbiAgICAgIG5ldyBTZWxlY3Rpb25SZW5kZXJMYXllcih0aGlzLl9zY3JlZW5FbGVtZW50LCAxLCB0aGlzLl9jb2xvcnMsIHRoaXMuX2lkLCB0aGlzLl9idWZmZXJTZXJ2aWNlLCBfb3B0aW9uc1NlcnZpY2UpLFxuICAgICAgbmV3IExpbmtSZW5kZXJMYXllcih0aGlzLl9zY3JlZW5FbGVtZW50LCAyLCB0aGlzLl9jb2xvcnMsIHRoaXMuX2lkLCB0aGlzLl9saW5raWZpZXIsIHRoaXMuX2J1ZmZlclNlcnZpY2UsIF9vcHRpb25zU2VydmljZSksXG4gICAgICBuZXcgQ3Vyc29yUmVuZGVyTGF5ZXIodGhpcy5fc2NyZWVuRWxlbWVudCwgMywgdGhpcy5fY29sb3JzLCB0aGlzLl9pZCwgdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MsIHRoaXMuX2J1ZmZlclNlcnZpY2UsIF9vcHRpb25zU2VydmljZSwgY29yZVNlcnZpY2UsIGNvcmVCcm93c2VyU2VydmljZSlcbiAgICBdO1xuICAgIHRoaXMuZGltZW5zaW9ucyA9IHtcbiAgICAgIHNjYWxlZENoYXJXaWR0aDogMCxcbiAgICAgIHNjYWxlZENoYXJIZWlnaHQ6IDAsXG4gICAgICBzY2FsZWRDZWxsV2lkdGg6IDAsXG4gICAgICBzY2FsZWRDZWxsSGVpZ2h0OiAwLFxuICAgICAgc2NhbGVkQ2hhckxlZnQ6IDAsXG4gICAgICBzY2FsZWRDaGFyVG9wOiAwLFxuICAgICAgc2NhbGVkQ2FudmFzV2lkdGg6IDAsXG4gICAgICBzY2FsZWRDYW52YXNIZWlnaHQ6IDAsXG4gICAgICBjYW52YXNXaWR0aDogMCxcbiAgICAgIGNhbnZhc0hlaWdodDogMCxcbiAgICAgIGFjdHVhbENlbGxXaWR0aDogMCxcbiAgICAgIGFjdHVhbENlbGxIZWlnaHQ6IDBcbiAgICB9O1xuICAgIHRoaXMuX2RldmljZVBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7XG4gICAgdGhpcy5vbk9wdGlvbnNDaGFuZ2VkKCk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgdGhpcy5fcmVuZGVyTGF5ZXJzLmZvckVhY2gobCA9PiBsLmRpc3Bvc2UoKSk7XG4gICAgcmVtb3ZlVGVybWluYWxGcm9tQ2FjaGUodGhpcy5faWQpO1xuICB9XG5cbiAgcHVibGljIG9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpOiB2b2lkIHtcbiAgICAvLyBJZiB0aGUgZGV2aWNlIHBpeGVsIHJhdGlvIGNoYW5nZWQsIHRoZSBjaGFyIGF0bGFzIG5lZWRzIHRvIGJlIHJlZ2VuZXJhdGVkXG4gICAgLy8gYW5kIHRoZSB0ZXJtaW5hbCBuZWVkcyB0byByZWZyZXNoZWRcbiAgICBpZiAodGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyAhPT0gd2luZG93LmRldmljZVBpeGVsUmF0aW8pIHtcbiAgICAgIHRoaXMuX2RldmljZVBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgIHRoaXMub25SZXNpemUodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzZXRDb2xvcnMoY29sb3JzOiBJQ29sb3JTZXQpOiB2b2lkIHtcbiAgICB0aGlzLl9jb2xvcnMgPSBjb2xvcnM7XG5cbiAgICAvLyBDbGVhciBsYXllcnMgYW5kIGZvcmNlIGEgZnVsbCByZW5kZXJcbiAgICB0aGlzLl9yZW5kZXJMYXllcnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGwuc2V0Q29sb3JzKHRoaXMuX2NvbG9ycyk7XG4gICAgICBsLnJlc2V0KCk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgb25SZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgY2hhcmFjdGVyIGFuZCBjYW52YXMgZGltZW5zaW9uc1xuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcblxuICAgIC8vIFJlc2l6ZSBhbGwgcmVuZGVyIGxheWVyc1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5yZXNpemUodGhpcy5kaW1lbnNpb25zKSk7XG5cbiAgICAvLyBSZXNpemUgdGhlIHNjcmVlblxuICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHt0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGh9cHhgO1xuICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodH1weGA7XG4gIH1cblxuICBwdWJsaWMgb25DaGFyU2l6ZUNoYW5nZWQoKTogdm9pZCB7XG4gICAgdGhpcy5vblJlc2l6ZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyk7XG4gIH1cblxuICBwdWJsaWMgb25CbHVyKCk6IHZvaWQge1xuICAgIHRoaXMuX3J1bk9wZXJhdGlvbihsID0+IGwub25CbHVyKCkpO1xuICB9XG5cbiAgcHVibGljIG9uRm9jdXMoKTogdm9pZCB7XG4gICAgdGhpcy5fcnVuT3BlcmF0aW9uKGwgPT4gbC5vbkZvY3VzKCkpO1xuICB9XG5cbiAgcHVibGljIG9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydDogW251bWJlciwgbnVtYmVyXSwgZW5kOiBbbnVtYmVyLCBudW1iZXJdLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICB0aGlzLl9ydW5PcGVyYXRpb24obCA9PiBsLm9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydCwgZW5kLCBjb2x1bW5TZWxlY3RNb2RlKSk7XG4gIH1cblxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuX3J1bk9wZXJhdGlvbihsID0+IGwub25DdXJzb3JNb3ZlKCkpO1xuICB9XG5cbiAgcHVibGljIG9uT3B0aW9uc0NoYW5nZWQoKTogdm9pZCB7XG4gICAgdGhpcy5fcnVuT3BlcmF0aW9uKGwgPT4gbC5vbk9wdGlvbnNDaGFuZ2VkKCkpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuX3J1bk9wZXJhdGlvbihsID0+IGwucmVzZXQoKSk7XG4gIH1cblxuICBwcml2YXRlIF9ydW5PcGVyYXRpb24ob3BlcmF0aW9uOiAobGF5ZXI6IElSZW5kZXJMYXllcikgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gb3BlcmF0aW9uKGwpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyB0aGUgcmVmcmVzaCBsb29wIGNhbGxiYWNrLCBjYWxsaW5nIHJlZnJlc2ggb25seSBpZiBhIHJlZnJlc2ggaXNcbiAgICogbmVjZXNzYXJ5IGJlZm9yZSBxdWV1ZWluZyB1cCB0aGUgbmV4dCBvbmUuXG4gICAqL1xuICBwdWJsaWMgcmVuZGVyUm93cyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5vbkdyaWRDaGFuZ2VkKHN0YXJ0LCBlbmQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNhbGN1bGF0ZXMgdGhlIGNoYXJhY3RlciBhbmQgY2FudmFzIGRpbWVuc2lvbnMuXG4gICAqL1xuICBwcml2YXRlIF91cGRhdGVEaW1lbnNpb25zKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGVkIGNoYXJhY3RlciB3aWR0aC4gV2lkdGggaXMgZmxvb3JlZCBhcyBpdCBtdXN0IGJlXG4gICAgLy8gZHJhd24gdG8gYW4gaW50ZWdlciBncmlkIGluIG9yZGVyIGZvciB0aGUgQ2hhckF0bGFzIFwic3RhbXBzXCIgdG8gbm90IGJlXG4gICAgLy8gYmx1cnJ5LiBXaGVuIHRleHQgaXMgZHJhd24gdG8gdGhlIGdyaWQgbm90IHVzaW5nIHRoZSBDaGFyQXRsYXMsIGl0IGlzXG4gICAgLy8gY2xpcHBlZCB0byBlbnN1cmUgdGhlcmUgaXMgbm8gb3ZlcmxhcCB3aXRoIHRoZSBuZXh0IGNlbGwuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJXaWR0aCA9IE1hdGguZmxvb3IodGhpcy5fY2hhclNpemVTZXJ2aWNlLndpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBzY2FsZWQgY2hhcmFjdGVyIGhlaWdodC4gSGVpZ2h0IGlzIGNlaWxlZCBpbiBjYXNlXG4gICAgLy8gZGV2aWNlUGl4ZWxSYXRpbyBpcyBhIGZsb2F0aW5nIHBvaW50IG51bWJlciBpbiBvcmRlciB0byBlbnN1cmUgdGhlcmUgaXNcbiAgICAvLyBlbm91Z2ggc3BhY2UgdG8gZHJhdyB0aGUgY2hhcmFjdGVyIHRvIHRoZSBjZWxsLlxuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0ID0gTWF0aC5jZWlsKHRoaXMuX2NoYXJTaXplU2VydmljZS5oZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHNjYWxlZCBjZWxsIGhlaWdodCwgaWYgbGluZUhlaWdodCBpcyBub3QgMSB0aGVuIHRoZSB2YWx1ZVxuICAgIC8vIHdpbGwgYmUgZmxvb3JlZCBiZWNhdXNlIHNpbmNlIGxpbmVIZWlnaHQgY2FuIG5ldmVyIGJlIGxvd2VyIHRoZW4gMSwgdGhlcmVcbiAgICAvLyBpcyBhIGd1YXJlbnRlZSB0aGF0IHRoZSBzY2FsZWQgbGluZSBoZWlnaHQgd2lsbCBhbHdheXMgYmUgbGFyZ2VyIHRoYW5cbiAgICAvLyBzY2FsZWQgY2hhciBoZWlnaHQuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQgPSBNYXRoLmZsb29yKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0ICogdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5saW5lSGVpZ2h0KTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgeSBjb29yZGluYXRlIHdpdGhpbiBhIGNlbGwgdGhhdCB0ZXh0IHNob3VsZCBkcmF3IGZyb20gaW5cbiAgICAvLyBvcmRlciB0byBkcmF3IGluIHRoZSBjZW50ZXIgb2YgYSBjZWxsLlxuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyVG9wID0gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5saW5lSGVpZ2h0ID09PSAxID8gMCA6IE1hdGgucm91bmQoKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0IC0gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQpIC8gMik7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHNjYWxlZCBjZWxsIHdpZHRoLCB0YWtpbmcgdGhlIGxldHRlclNwYWNpbmcgaW50byBhY2NvdW50LlxuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoICsgTWF0aC5yb3VuZCh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxldHRlclNwYWNpbmcpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSB4IGNvb3JkaW5hdGUgd2l0aCBhIGNlbGwgdGhhdCB0ZXh0IHNob3VsZCBkcmF3IGZyb20gaW5cbiAgICAvLyBvcmRlciB0byBkcmF3IGluIHRoZSBjZW50ZXIgb2YgYSBjZWxsLlxuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyTGVmdCA9IE1hdGguZmxvb3IodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sZXR0ZXJTcGFjaW5nIC8gMik7XG5cbiAgICAvLyBSZWNhbGN1bGF0ZSB0aGUgY2FudmFzIGRpbWVuc2lvbnM7IHNjYWxlZCogZGVmaW5lIHRoZSBhY3R1YWwgbnVtYmVyIG9mXG4gICAgLy8gcGl4ZWwgaW4gdGhlIGNhbnZhc1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgKiB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodDtcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGggPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgKiB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoO1xuXG4gICAgLy8gVGhlIHRoZSBzaXplIG9mIHRoZSBjYW52YXMgb24gdGhlIHBhZ2UuIEl0J3MgdmVyeSBpbXBvcnRhbnQgdGhhdCB0aGlzXG4gICAgLy8gcm91bmRzIHRvIG5lYXJlc3QgaW50ZWdlciBhbmQgbm90IGNlaWxzIGFzIGJyb3dzZXJzIG9mdGVuIHNldFxuICAgIC8vIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIGFzIHNvbWV0aGluZyBsaWtlIDEuMTAwMDAwMDIzODQxODU4LCB3aGVuIGl0J3NcbiAgICAvLyBhY3R1YWxseSAxLjEuIENlaWxpbmcgY2F1c2VzIGJsdXJyaW5lc3MgYXMgdGhlIGJhY2tpbmcgY2FudmFzIGltYWdlIGlzIDFcbiAgICAvLyBwaXhlbCB0b28gbGFyZ2UgZm9yIHRoZSBjYW52YXMgZWxlbWVudCBzaXplLlxuICAgIHRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQgPSBNYXRoLnJvdW5kKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQgLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoID0gTWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGggLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG5cbiAgICAvLyBHZXQgdGhlIF9hY3R1YWxfIGRpbWVuc2lvbnMgb2YgYW4gaW5kaXZpZHVhbCBjZWxsLiBUaGlzIG5lZWRzIHRvIGJlXG4gICAgLy8gZGVyaXZlZCBmcm9tIHRoZSBjYW52YXNXaWR0aC9IZWlnaHQgY2FsY3VsYXRlZCBhYm92ZSB3aGljaCB0YWtlcyBpbnRvXG4gICAgLy8gYWNjb3VudCB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpby4gSUNoYXJTaXplU2VydmljZS53aWR0aC9oZWlnaHQgYnkgaXRzZWxmXG4gICAgLy8gaXMgaW5zdWZmaWNpZW50IHdoZW4gdGhlIHBhZ2UgaXMgbm90IGF0IDEwMCUgem9vbSBsZXZlbCBhcyBpdCdzIG1lYXN1cmVkXG4gICAgLy8gaW4gQ1NTIHBpeGVscywgYnV0IHRoZSBhY3R1YWwgY2hhciBzaXplIG9uIHRoZSBjYW52YXMgY2FuIGRpZmZlci5cbiAgICB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCA9IHRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQgLyB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCA9IHRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aCAvIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyOiBDaGFyYWN0ZXJKb2luZXJIYW5kbGVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fY2hhcmFjdGVySm9pbmVyUmVnaXN0cnkucmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoaGFuZGxlcik7XG4gIH1cblxuICBwdWJsaWMgZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2NoYXJhY3RlckpvaW5lclJlZ2lzdHJ5LmRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoam9pbmVySWQpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0aHJvd0lmRmFsc3k8VD4odmFsdWU6IFQgfCB1bmRlZmluZWQgfCBudWxsKTogVCB7XG4gIGlmICghdmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3ZhbHVlIG11c3Qgbm90IGJlIGZhbHN5Jyk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJUmVuZGVyRGltZW5zaW9ucyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgQmFzZVJlbmRlckxheWVyIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9CYXNlUmVuZGVyTGF5ZXInO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuaW50ZXJmYWNlIElTZWxlY3Rpb25TdGF0ZSB7XG4gIHN0YXJ0PzogW251bWJlciwgbnVtYmVyXTtcbiAgZW5kPzogW251bWJlciwgbnVtYmVyXTtcbiAgY29sdW1uU2VsZWN0TW9kZT86IGJvb2xlYW47XG4gIHlkaXNwPzogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgU2VsZWN0aW9uUmVuZGVyTGF5ZXIgZXh0ZW5kcyBCYXNlUmVuZGVyTGF5ZXIge1xuICBwcml2YXRlIF9zdGF0ZSE6IElTZWxlY3Rpb25TdGF0ZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIHpJbmRleDogbnVtYmVyLFxuICAgIGNvbG9yczogSUNvbG9yU2V0LFxuICAgIHJlbmRlcmVySWQ6IG51bWJlcixcbiAgICByZWFkb25seSBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICByZWFkb25seSBvcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKGNvbnRhaW5lciwgJ3NlbGVjdGlvbicsIHpJbmRleCwgdHJ1ZSwgY29sb3JzLCByZW5kZXJlcklkLCBidWZmZXJTZXJ2aWNlLCBvcHRpb25zU2VydmljZSk7XG4gICAgdGhpcy5fY2xlYXJTdGF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJTdGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9zdGF0ZSA9IHtcbiAgICAgIHN0YXJ0OiB1bmRlZmluZWQsXG4gICAgICBlbmQ6IHVuZGVmaW5lZCxcbiAgICAgIGNvbHVtblNlbGVjdE1vZGU6IHVuZGVmaW5lZCxcbiAgICAgIHlkaXNwOiB1bmRlZmluZWRcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZShkaW06IElSZW5kZXJEaW1lbnNpb25zKTogdm9pZCB7XG4gICAgc3VwZXIucmVzaXplKGRpbSk7XG4gICAgLy8gUmVzaXppbmcgdGhlIGNhbnZhcyBkaXNjYXJkcyB0aGUgY29udGVudHMgb2YgdGhlIGNhbnZhcyBzbyBjbGVhciBzdGF0ZVxuICAgIHRoaXMuX2NsZWFyU3RhdGUoKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc3RhdGUuc3RhcnQgJiYgdGhpcy5fc3RhdGUuZW5kKSB7XG4gICAgICB0aGlzLl9jbGVhclN0YXRlKCk7XG4gICAgICB0aGlzLl9jbGVhckFsbCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvblNlbGVjdGlvbkNoYW5nZWQoc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0sIGVuZDogW251bWJlciwgbnVtYmVyXSwgY29sdW1uU2VsZWN0TW9kZTogYm9vbGVhbik6IHZvaWQge1xuICAgIC8vIFNlbGVjdGlvbiBoYXMgbm90IGNoYW5nZWRcbiAgICBpZiAoIXRoaXMuX2RpZFN0YXRlQ2hhbmdlKHN0YXJ0LCBlbmQsIGNvbHVtblNlbGVjdE1vZGUsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBhbGwgc2VsZWN0aW9uc1xuICAgIHRoaXMuX2NsZWFyQWxsKCk7XG5cbiAgICAvLyBTZWxlY3Rpb24gZG9lcyBub3QgZXhpc3RcbiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQpIHtcbiAgICAgIHRoaXMuX2NsZWFyU3RhdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBUcmFuc2xhdGUgZnJvbSBidWZmZXIgcG9zaXRpb24gdG8gdmlld3BvcnQgcG9zaXRpb25cbiAgICBjb25zdCB2aWV3cG9ydFN0YXJ0Um93ID0gc3RhcnRbMV0gLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtcbiAgICBjb25zdCB2aWV3cG9ydEVuZFJvdyA9IGVuZFsxXSAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO1xuICAgIGNvbnN0IHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPSBNYXRoLm1heCh2aWV3cG9ydFN0YXJ0Um93LCAwKTtcbiAgICBjb25zdCB2aWV3cG9ydENhcHBlZEVuZFJvdyA9IE1hdGgubWluKHZpZXdwb3J0RW5kUm93LCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxKTtcblxuICAgIC8vIE5vIG5lZWQgdG8gZHJhdyB0aGUgc2VsZWN0aW9uXG4gICAgaWYgKHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIHx8IHZpZXdwb3J0Q2FwcGVkRW5kUm93IDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuc2VsZWN0aW9uLmNzcztcblxuICAgIGlmIChjb2x1bW5TZWxlY3RNb2RlKSB7XG4gICAgICBjb25zdCBzdGFydENvbCA9IHN0YXJ0WzBdO1xuICAgICAgY29uc3Qgd2lkdGggPSBlbmRbMF0gLSBzdGFydENvbDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IHZpZXdwb3J0Q2FwcGVkRW5kUm93IC0gdmlld3BvcnRDYXBwZWRTdGFydFJvdyArIDE7XG4gICAgICB0aGlzLl9maWxsQ2VsbHMoc3RhcnRDb2wsIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3csIHdpZHRoLCBoZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEcmF3IGZpcnN0IHJvd1xuICAgICAgY29uc3Qgc3RhcnRDb2wgPSB2aWV3cG9ydFN0YXJ0Um93ID09PSB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID8gc3RhcnRbMF0gOiAwO1xuICAgICAgY29uc3Qgc3RhcnRSb3dFbmRDb2wgPSB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID09PSB2aWV3cG9ydENhcHBlZEVuZFJvdyA/IGVuZFswXSA6IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgIHRoaXMuX2ZpbGxDZWxscyhzdGFydENvbCwgdmlld3BvcnRDYXBwZWRTdGFydFJvdywgc3RhcnRSb3dFbmRDb2wgLSBzdGFydENvbCwgMSk7XG5cbiAgICAgIC8vIERyYXcgbWlkZGxlIHJvd3NcbiAgICAgIGNvbnN0IG1pZGRsZVJvd3NDb3VudCA9IE1hdGgubWF4KHZpZXdwb3J0Q2FwcGVkRW5kUm93IC0gdmlld3BvcnRDYXBwZWRTdGFydFJvdyAtIDEsIDApO1xuICAgICAgdGhpcy5fZmlsbENlbGxzKDAsIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyAxLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIG1pZGRsZVJvd3NDb3VudCk7XG5cbiAgICAgIC8vIERyYXcgZmluYWwgcm93XG4gICAgICBpZiAodmlld3BvcnRDYXBwZWRTdGFydFJvdyAhPT0gdmlld3BvcnRDYXBwZWRFbmRSb3cpIHtcbiAgICAgICAgLy8gT25seSBkcmF3IHZpZXdwb3J0RW5kUm93IGlmIGl0J3Mgbm90IHRoZSBzYW1lIGFzIHZpZXdwb3J0U3RhcnRSb3dcbiAgICAgICAgY29uc3QgZW5kQ29sID0gdmlld3BvcnRFbmRSb3cgPT09IHZpZXdwb3J0Q2FwcGVkRW5kUm93ID8gZW5kWzBdIDogdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgICAgICB0aGlzLl9maWxsQ2VsbHMoMCwgdmlld3BvcnRDYXBwZWRFbmRSb3csIGVuZENvbCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2F2ZSBzdGF0ZSBmb3IgbmV4dCByZW5kZXJcbiAgICB0aGlzLl9zdGF0ZS5zdGFydCA9IFtzdGFydFswXSwgc3RhcnRbMV1dO1xuICAgIHRoaXMuX3N0YXRlLmVuZCA9IFtlbmRbMF0sIGVuZFsxXV07XG4gICAgdGhpcy5fc3RhdGUuY29sdW1uU2VsZWN0TW9kZSA9IGNvbHVtblNlbGVjdE1vZGU7XG4gICAgdGhpcy5fc3RhdGUueWRpc3AgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtcbiAgfVxuXG4gIHByaXZhdGUgX2RpZFN0YXRlQ2hhbmdlKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0sIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4sIHlkaXNwOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMuX2FyZUNvb3JkaW5hdGVzRXF1YWwoc3RhcnQsIHRoaXMuX3N0YXRlLnN0YXJ0KSB8fFxuICAgICAgIXRoaXMuX2FyZUNvb3JkaW5hdGVzRXF1YWwoZW5kLCB0aGlzLl9zdGF0ZS5lbmQpIHx8XG4gICAgICBjb2x1bW5TZWxlY3RNb2RlICE9PSB0aGlzLl9zdGF0ZS5jb2x1bW5TZWxlY3RNb2RlIHx8XG4gICAgICB5ZGlzcCAhPT0gdGhpcy5fc3RhdGUueWRpc3A7XG4gIH1cblxuICBwcml2YXRlIF9hcmVDb29yZGluYXRlc0VxdWFsKGNvb3JkMTogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCwgY29vcmQyOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gICAgaWYgKCFjb29yZDEgfHwgIWNvb3JkMikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBjb29yZDFbMF0gPT09IGNvb3JkMlswXSAmJiBjb29yZDFbMV0gPT09IGNvb3JkMlsxXTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnksIElSZW5kZXJEaW1lbnNpb25zIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBDaGFyRGF0YSwgSUNlbGxEYXRhIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEdyaWRDYWNoZSB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvR3JpZENhY2hlJztcbmltcG9ydCB7IEJhc2VSZW5kZXJMYXllciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvQmFzZVJlbmRlckxheWVyJztcbmltcG9ydCB7IEF0dHJpYnV0ZURhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0F0dHJpYnV0ZURhdGEnO1xuaW1wb3J0IHsgTlVMTF9DRUxMX0NPREUsIENvbnRlbnQgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBKb2luZWRDZWxsRGF0YSB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnknO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgSU9wdGlvbnNTZXJ2aWNlLCBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbi8qKlxuICogVGhpcyBDaGFyRGF0YSBsb29rcyBsaWtlIGEgbnVsbCBjaGFyYWN0ZXIsIHdoaWNoIHdpbGwgZm9yYyBhIGNsZWFyIGFuZCByZW5kZXJcbiAqIHdoZW4gdGhlIGNoYXJhY3RlciBjaGFuZ2VzIChhIHJlZ3VsYXIgc3BhY2UgJyAnIGNoYXJhY3RlciBtYXkgbm90IGFzIGl0J3NcbiAqIGRyYXduIHN0YXRlIGlzIGEgY2xlYXJlZCBjZWxsKS5cbiAqL1xuLy8gY29uc3QgT1ZFUkxBUF9PV05FRF9DSEFSX0RBVEE6IENoYXJEYXRhID0gW251bGwsICcnLCAwLCAtMV07XG5cbmV4cG9ydCBjbGFzcyBUZXh0UmVuZGVyTGF5ZXIgZXh0ZW5kcyBCYXNlUmVuZGVyTGF5ZXIge1xuICBwcml2YXRlIF9zdGF0ZTogR3JpZENhY2hlPENoYXJEYXRhPjtcbiAgcHJpdmF0ZSBfY2hhcmFjdGVyV2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2NoYXJhY3RlckZvbnQ6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIF9jaGFyYWN0ZXJPdmVybGFwQ2FjaGU6IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9ID0ge307XG4gIHByaXZhdGUgX2NoYXJhY3RlckpvaW5lclJlZ2lzdHJ5OiBJQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnk7XG4gIHByaXZhdGUgX3dvcmtDZWxsID0gbmV3IENlbGxEYXRhKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB6SW5kZXg6IG51bWJlcixcbiAgICBjb2xvcnM6IElDb2xvclNldCxcbiAgICBjaGFyYWN0ZXJKb2luZXJSZWdpc3RyeTogSUNoYXJhY3RlckpvaW5lclJlZ2lzdHJ5LFxuICAgIGFscGhhOiBib29sZWFuLFxuICAgIHJlbmRlcmVySWQ6IG51bWJlcixcbiAgICByZWFkb25seSBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICByZWFkb25seSBvcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKGNvbnRhaW5lciwgJ3RleHQnLCB6SW5kZXgsIGFscGhhLCBjb2xvcnMsIHJlbmRlcmVySWQsIGJ1ZmZlclNlcnZpY2UsIG9wdGlvbnNTZXJ2aWNlKTtcbiAgICB0aGlzLl9zdGF0ZSA9IG5ldyBHcmlkQ2FjaGU8Q2hhckRhdGE+KCk7XG4gICAgdGhpcy5fY2hhcmFjdGVySm9pbmVyUmVnaXN0cnkgPSBjaGFyYWN0ZXJKb2luZXJSZWdpc3RyeTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUoZGltOiBJUmVuZGVyRGltZW5zaW9ucyk6IHZvaWQge1xuICAgIHN1cGVyLnJlc2l6ZShkaW0pO1xuXG4gICAgLy8gQ2xlYXIgdGhlIGNoYXJhY3RlciB3aWR0aCBjYWNoZSBpZiB0aGUgZm9udCBvciB3aWR0aCBoYXMgY2hhbmdlZFxuICAgIGNvbnN0IHRlcm1pbmFsRm9udCA9IHRoaXMuX2dldEZvbnQoZmFsc2UsIGZhbHNlKTtcbiAgICBpZiAodGhpcy5fY2hhcmFjdGVyV2lkdGggIT09IGRpbS5zY2FsZWRDaGFyV2lkdGggfHwgdGhpcy5fY2hhcmFjdGVyRm9udCAhPT0gdGVybWluYWxGb250KSB7XG4gICAgICB0aGlzLl9jaGFyYWN0ZXJXaWR0aCA9IGRpbS5zY2FsZWRDaGFyV2lkdGg7XG4gICAgICB0aGlzLl9jaGFyYWN0ZXJGb250ID0gdGVybWluYWxGb250O1xuICAgICAgdGhpcy5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlID0ge307XG4gICAgfVxuICAgIC8vIFJlc2l6aW5nIHRoZSBjYW52YXMgZGlzY2FyZHMgdGhlIGNvbnRlbnRzIG9mIHRoZSBjYW52YXMgc28gY2xlYXIgc3RhdGVcbiAgICB0aGlzLl9zdGF0ZS5jbGVhcigpO1xuICAgIHRoaXMuX3N0YXRlLnJlc2l6ZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fc3RhdGUuY2xlYXIoKTtcbiAgICB0aGlzLl9jbGVhckFsbCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZm9yRWFjaENlbGwoXG4gICAgZmlyc3RSb3c6IG51bWJlcixcbiAgICBsYXN0Um93OiBudW1iZXIsXG4gICAgam9pbmVyUmVnaXN0cnk6IElDaGFyYWN0ZXJKb2luZXJSZWdpc3RyeSB8IG51bGwsXG4gICAgY2FsbGJhY2s6IChcbiAgICAgIGNlbGw6IElDZWxsRGF0YSxcbiAgICAgIHg6IG51bWJlcixcbiAgICAgIHk6IG51bWJlclxuICAgICkgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBmb3IgKGxldCB5ID0gZmlyc3RSb3c7IHkgPD0gbGFzdFJvdzsgeSsrKSB7XG4gICAgICBjb25zdCByb3cgPSB5ICsgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7XG4gICAgICBjb25zdCBsaW5lID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KHJvdyk7XG4gICAgICBjb25zdCBqb2luZWRSYW5nZXMgPSBqb2luZXJSZWdpc3RyeSA/IGpvaW5lclJlZ2lzdHJ5LmdldEpvaW5lZENoYXJhY3RlcnMocm93KSA6IFtdO1xuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7IHgrKykge1xuICAgICAgICBsaW5lIS5sb2FkQ2VsbCh4LCB0aGlzLl93b3JrQ2VsbCk7XG4gICAgICAgIGxldCBjZWxsID0gdGhpcy5fd29ya0NlbGw7XG5cbiAgICAgICAgLy8gSWYgdHJ1ZSwgaW5kaWNhdGVzIHRoYXQgdGhlIGN1cnJlbnQgY2hhcmFjdGVyKHMpIHRvIGRyYXcgd2VyZSBqb2luZWQuXG4gICAgICAgIGxldCBpc0pvaW5lZCA9IGZhbHNlO1xuICAgICAgICBsZXQgbGFzdENoYXJYID0geDtcblxuICAgICAgICAvLyBUaGUgY2hhcmFjdGVyIHRvIHRoZSBsZWZ0IGlzIGEgd2lkZSBjaGFyYWN0ZXIsIGRyYXdpbmcgaXMgb3duZWQgYnlcbiAgICAgICAgLy8gdGhlIGNoYXIgYXQgeC0xXG4gICAgICAgIGlmIChjZWxsLmdldFdpZHRoKCkgPT09IDApIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByb2Nlc3MgYW55IGpvaW5lZCBjaGFyYWN0ZXIgcmFuZ2VzIGFzIG5lZWRlZC4gQmVjYXVzZSBvZiBob3cgdGhlXG4gICAgICAgIC8vIHJhbmdlcyBhcmUgcHJvZHVjZWQsIHdlIGtub3cgdGhhdCB0aGV5IGFyZSB2YWxpZCBmb3IgdGhlIGNoYXJhY3RlcnNcbiAgICAgICAgLy8gYW5kIGF0dHJpYnV0ZXMgb2Ygb3VyIGlucHV0LlxuICAgICAgICBpZiAoam9pbmVkUmFuZ2VzLmxlbmd0aCA+IDAgJiYgeCA9PT0gam9pbmVkUmFuZ2VzWzBdWzBdKSB7XG4gICAgICAgICAgaXNKb2luZWQgPSB0cnVlO1xuICAgICAgICAgIGNvbnN0IHJhbmdlID0gam9pbmVkUmFuZ2VzLnNoaWZ0KCkhO1xuXG4gICAgICAgICAgLy8gV2UgYWxyZWFkeSBrbm93IHRoZSBleGFjdCBzdGFydCBhbmQgZW5kIGNvbHVtbiBvZiB0aGUgam9pbmVkIHJhbmdlLFxuICAgICAgICAgIC8vIHNvIHdlIGdldCB0aGUgc3RyaW5nIGFuZCB3aWR0aCByZXByZXNlbnRpbmcgaXQgZGlyZWN0bHlcblxuICAgICAgICAgIGNlbGwgPSBuZXcgSm9pbmVkQ2VsbERhdGEoXG4gICAgICAgICAgICB0aGlzLl93b3JrQ2VsbCxcbiAgICAgICAgICAgIGxpbmUhLnRyYW5zbGF0ZVRvU3RyaW5nKHRydWUsIHJhbmdlWzBdLCByYW5nZVsxXSksXG4gICAgICAgICAgICByYW5nZVsxXSAtIHJhbmdlWzBdXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIFNraXAgb3ZlciB0aGUgY2VsbHMgb2NjdXBpZWQgYnkgdGhpcyByYW5nZSBpbiB0aGUgbG9vcFxuICAgICAgICAgIGxhc3RDaGFyWCA9IHJhbmdlWzFdIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSBjaGFyYWN0ZXIgaXMgYW4gb3ZlcmxhcHBpbmcgY2hhciBhbmQgdGhlIGNoYXJhY3RlciB0byB0aGVcbiAgICAgICAgLy8gcmlnaHQgaXMgYSBzcGFjZSwgdGFrZSBvd25lcnNoaXAgb2YgdGhlIGNlbGwgdG8gdGhlIHJpZ2h0LiBXZSBza2lwXG4gICAgICAgIC8vIHRoaXMgY2hlY2sgZm9yIGpvaW5lZCBjaGFyYWN0ZXJzIGJlY2F1c2UgdGhlaXIgcmVuZGVyaW5nIGxpa2VseSB3b24ndFxuICAgICAgICAvLyB5aWVsZCB0aGUgc2FtZSByZXN1bHQgYXMgcmVuZGVyaW5nIHRoZSBsYXN0IGNoYXJhY3RlciBpbmRpdmlkdWFsbHkuXG4gICAgICAgIGlmICghaXNKb2luZWQgJiYgdGhpcy5faXNPdmVybGFwcGluZyhjZWxsKSkge1xuICAgICAgICAgIC8vIElmIHRoZSBjaGFyYWN0ZXIgaXMgb3ZlcmxhcHBpbmcsIHdlIHdhbnQgdG8gZm9yY2UgYSByZS1yZW5kZXIgb24gZXZlcnlcbiAgICAgICAgICAvLyBmcmFtZS4gVGhpcyBpcyBzcGVjaWZpY2FsbHkgdG8gd29yayBhcm91bmQgdGhlIGNhc2Ugd2hlcmUgdHdvXG4gICAgICAgICAgLy8gb3ZlcmxhcGluZyBjaGFycyBgYWAgYW5kIGBiYCBhcmUgYWRqYWNlbnQsIHRoZSBjdXJzb3IgaXMgbW92ZWQgdG8gYiBhbmQgYVxuICAgICAgICAgIC8vIHNwYWNlIGlzIGFkZGVkLiBXaXRob3V0IHRoaXMsIHRoZSBmaXJzdCBoYWxmIG9mIGBiYCB3b3VsZCBuZXZlclxuICAgICAgICAgIC8vIGdldCByZW1vdmVkLCBhbmQgYGFgIHdvdWxkIG5vdCByZS1yZW5kZXIgYmVjYXVzZSBpdCB0aGlua3MgaXQnc1xuICAgICAgICAgIC8vIGFscmVhZHkgaW4gdGhlIGNvcnJlY3Qgc3RhdGUuXG4gICAgICAgICAgLy8gdGhpcy5fc3RhdGUuY2FjaGVbeF1beV0gPSBPVkVSTEFQX09XTkVEX0NIQVJfREFUQTtcbiAgICAgICAgICBpZiAobGFzdENoYXJYIDwgbGluZSEubGVuZ3RoIC0gMSAmJiBsaW5lIS5nZXRDb2RlUG9pbnQobGFzdENoYXJYICsgMSkgPT09IE5VTExfQ0VMTF9DT0RFKSB7XG4gICAgICAgICAgICAvLyBwYXRjaCB3aWR0aCB0byAyXG4gICAgICAgICAgICBjZWxsLmNvbnRlbnQgJj0gfkNvbnRlbnQuV0lEVEhfTUFTSztcbiAgICAgICAgICAgIGNlbGwuY29udGVudCB8PSAyIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQ7XG4gICAgICAgICAgICAvLyB0aGlzLl9jbGVhckNoYXIoeCArIDEsIHkpO1xuICAgICAgICAgICAgLy8gVGhlIG92ZXJsYXBwaW5nIGNoYXIncyBjaGFyIGRhdGEgd2lsbCBmb3JjZSBhIGNsZWFyIGFuZCByZW5kZXIgd2hlbiB0aGVcbiAgICAgICAgICAgIC8vIG92ZXJsYXBwaW5nIGNoYXIgaXMgbm8gbG9uZ2VyIHRvIHRoZSBsZWZ0IG9mIHRoZSBjaGFyYWN0ZXIgYW5kIGFsc28gd2hlblxuICAgICAgICAgICAgLy8gdGhlIHNwYWNlIGNoYW5nZXMgdG8gYW5vdGhlciBjaGFyYWN0ZXIuXG4gICAgICAgICAgICAvLyB0aGlzLl9zdGF0ZS5jYWNoZVt4ICsgMV1beV0gPSBPVkVSTEFQX09XTkVEX0NIQVJfREFUQTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjayhcbiAgICAgICAgICBjZWxsLFxuICAgICAgICAgIHgsXG4gICAgICAgICAgeVxuICAgICAgICApO1xuXG4gICAgICAgIHggPSBsYXN0Q2hhclg7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIHRoZSBiYWNrZ3JvdW5kIGZvciBhIHNwZWNpZmllZCByYW5nZSBvZiBjb2x1bW5zLiBUcmllcyB0byBiYXRjaCBhZGphY2VudCBjZWxscyBvZiB0aGVcbiAgICogc2FtZSBjb2xvciB0b2dldGhlciB0byByZWR1Y2UgZHJhdyBjYWxscy5cbiAgICovXG4gIHByaXZhdGUgX2RyYXdCYWNrZ3JvdW5kKGZpcnN0Um93OiBudW1iZXIsIGxhc3RSb3c6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuX2N0eDtcbiAgICBjb25zdCBjb2xzID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgIGxldCBzdGFydFg6IG51bWJlciA9IDA7XG4gICAgbGV0IHN0YXJ0WTogbnVtYmVyID0gMDtcbiAgICBsZXQgcHJldkZpbGxTdHlsZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjdHguc2F2ZSgpO1xuXG4gICAgdGhpcy5fZm9yRWFjaENlbGwoZmlyc3RSb3csIGxhc3RSb3csIG51bGwsIChjZWxsLCB4LCB5KSA9PiB7XG4gICAgICAvLyBsaWJ2dGUgYW5kIHh0ZXJtIGJvdGggZHJhdyB0aGUgYmFja2dyb3VuZCAoYnV0IG5vdCBmb3JlZ3JvdW5kKSBvZiBpbnZpc2libGUgY2hhcmFjdGVycyxcbiAgICAgIC8vIHNvIHdlIHNob3VsZCB0b28uXG4gICAgICBsZXQgbmV4dEZpbGxTdHlsZSA9IG51bGw7IC8vIG51bGwgcmVwcmVzZW50cyBkZWZhdWx0IGJhY2tncm91bmQgY29sb3JcblxuICAgICAgaWYgKGNlbGwuaXNJbnZlcnNlKCkpIHtcbiAgICAgICAgaWYgKGNlbGwuaXNGZ0RlZmF1bHQoKSkge1xuICAgICAgICAgIG5leHRGaWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3M7XG4gICAgICAgIH0gZWxzZSBpZiAoY2VsbC5pc0ZnUkdCKCkpIHtcbiAgICAgICAgICBuZXh0RmlsbFN0eWxlID0gYHJnYigke0F0dHJpYnV0ZURhdGEudG9Db2xvclJHQihjZWxsLmdldEZnQ29sb3IoKSkuam9pbignLCcpfSlgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5leHRGaWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYW5zaVtjZWxsLmdldEZnQ29sb3IoKV0uY3NzO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNlbGwuaXNCZ1JHQigpKSB7XG4gICAgICAgIG5leHRGaWxsU3R5bGUgPSBgcmdiKCR7QXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGNlbGwuZ2V0QmdDb2xvcigpKS5qb2luKCcsJyl9KWA7XG4gICAgICB9IGVsc2UgaWYgKGNlbGwuaXNCZ1BhbGV0dGUoKSkge1xuICAgICAgICBuZXh0RmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmFuc2lbY2VsbC5nZXRCZ0NvbG9yKCldLmNzcztcbiAgICAgIH1cblxuICAgICAgaWYgKHByZXZGaWxsU3R5bGUgPT09IG51bGwpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBlaXRoZXIgdGhlIGZpcnN0IGl0ZXJhdGlvbiwgb3IgdGhlIGRlZmF1bHQgYmFja2dyb3VuZCB3YXMgc2V0LiBFaXRoZXIgd2F5LCB3ZVxuICAgICAgICAvLyBkb24ndCBuZWVkIHRvIGRyYXcgYW55dGhpbmcuXG4gICAgICAgIHN0YXJ0WCA9IHg7XG4gICAgICAgIHN0YXJ0WSA9IHk7XG4gICAgICB9XG5cbiAgICAgIGlmICh5ICE9PSBzdGFydFkpIHtcbiAgICAgICAgLy8gb3VyIHJvdyBjaGFuZ2VkLCBkcmF3IHRoZSBwcmV2aW91cyByb3dcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHByZXZGaWxsU3R5bGUgPyBwcmV2RmlsbFN0eWxlIDogJyc7XG4gICAgICAgIHRoaXMuX2ZpbGxDZWxscyhzdGFydFgsIHN0YXJ0WSwgY29scyAtIHN0YXJ0WCwgMSk7XG4gICAgICAgIHN0YXJ0WCA9IHg7XG4gICAgICAgIHN0YXJ0WSA9IHk7XG4gICAgICB9IGVsc2UgaWYgKHByZXZGaWxsU3R5bGUgIT09IG5leHRGaWxsU3R5bGUpIHtcbiAgICAgICAgLy8gb3VyIGNvbG9yIGNoYW5nZWQsIGRyYXcgdGhlIHByZXZpb3VzIGNoYXJhY3RlcnMgaW4gdGhpcyByb3dcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHByZXZGaWxsU3R5bGUgPyBwcmV2RmlsbFN0eWxlIDogJyc7XG4gICAgICAgIHRoaXMuX2ZpbGxDZWxscyhzdGFydFgsIHN0YXJ0WSwgeCAtIHN0YXJ0WCwgMSk7XG4gICAgICAgIHN0YXJ0WCA9IHg7XG4gICAgICAgIHN0YXJ0WSA9IHk7XG4gICAgICB9XG5cbiAgICAgIHByZXZGaWxsU3R5bGUgPSBuZXh0RmlsbFN0eWxlO1xuICAgIH0pO1xuXG4gICAgLy8gZmx1c2ggdGhlIGxhc3QgY29sb3Igd2UgZW5jb3VudGVyZWRcbiAgICBpZiAocHJldkZpbGxTdHlsZSAhPT0gbnVsbCkge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IHByZXZGaWxsU3R5bGU7XG4gICAgICB0aGlzLl9maWxsQ2VsbHMoc3RhcnRYLCBzdGFydFksIGNvbHMgLSBzdGFydFgsIDEpO1xuICAgIH1cblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBwcml2YXRlIF9kcmF3Rm9yZWdyb3VuZChmaXJzdFJvdzogbnVtYmVyLCBsYXN0Um93OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9mb3JFYWNoQ2VsbChmaXJzdFJvdywgbGFzdFJvdywgdGhpcy5fY2hhcmFjdGVySm9pbmVyUmVnaXN0cnksIChjZWxsLCB4LCB5KSA9PiB7XG4gICAgICBpZiAoY2VsbC5pc0ludmlzaWJsZSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2RyYXdDaGFycyhjZWxsLCB4LCB5KTtcbiAgICAgIGlmIChjZWxsLmlzVW5kZXJsaW5lKCkpIHtcbiAgICAgICAgdGhpcy5fY3R4LnNhdmUoKTtcblxuICAgICAgICBpZiAoY2VsbC5pc0ludmVyc2UoKSkge1xuICAgICAgICAgIGlmIChjZWxsLmlzQmdEZWZhdWx0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5jc3M7XG4gICAgICAgICAgfSBlbHNlIGlmIChjZWxsLmlzQmdSR0IoKSkge1xuICAgICAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IGByZ2IoJHtBdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoY2VsbC5nZXRCZ0NvbG9yKCkpLmpvaW4oJywnKX0pYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGJnID0gY2VsbC5nZXRCZ0NvbG9yKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyAmJiBjZWxsLmlzQm9sZCgpICYmIGJnIDwgOCkge1xuICAgICAgICAgICAgICBiZyArPSA4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5hbnNpW2JnXS5jc3M7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChjZWxsLmlzRmdEZWZhdWx0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3M7XG4gICAgICAgICAgfSBlbHNlIGlmIChjZWxsLmlzRmdSR0IoKSkge1xuICAgICAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IGByZ2IoJHtBdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoY2VsbC5nZXRGZ0NvbG9yKCkpLmpvaW4oJywnKX0pYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGZnID0gY2VsbC5nZXRGZ0NvbG9yKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyAmJiBjZWxsLmlzQm9sZCgpICYmIGZnIDwgOCkge1xuICAgICAgICAgICAgICBmZyArPSA4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5hbnNpW2ZnXS5jc3M7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKHgsIHksIGNlbGwuZ2V0V2lkdGgoKSk7XG4gICAgICAgIHRoaXMuX2N0eC5yZXN0b3JlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgb25HcmlkQ2hhbmdlZChmaXJzdFJvdzogbnVtYmVyLCBsYXN0Um93OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBSZXNpemUgaGFzIG5vdCBiZWVuIGNhbGxlZCB5ZXRcbiAgICBpZiAodGhpcy5fc3RhdGUuY2FjaGUubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2NoYXJBdGxhcykge1xuICAgICAgdGhpcy5fY2hhckF0bGFzLmJlZ2luRnJhbWUoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jbGVhckNlbGxzKDAsIGZpcnN0Um93LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIGxhc3RSb3cgLSBmaXJzdFJvdyArIDEpO1xuICAgIHRoaXMuX2RyYXdCYWNrZ3JvdW5kKGZpcnN0Um93LCBsYXN0Um93KTtcbiAgICB0aGlzLl9kcmF3Rm9yZWdyb3VuZChmaXJzdFJvdywgbGFzdFJvdyk7XG4gIH1cblxuICBwdWJsaWMgb25PcHRpb25zQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICB0aGlzLl9zZXRUcmFuc3BhcmVuY3kodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5hbGxvd1RyYW5zcGFyZW5jeSk7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciBhIGNoYXJhY3RlciBpcyBvdmVybGFwcGluZyB0byB0aGUgbmV4dCBjZWxsLlxuICAgKi9cbiAgcHJpdmF0ZSBfaXNPdmVybGFwcGluZyhjZWxsOiBJQ2VsbERhdGEpOiBib29sZWFuIHtcbiAgICAvLyBPbmx5IHNpbmdsZSBjZWxsIGNoYXJhY3RlcnMgY2FuIGJlIG92ZXJsYXBwaW5nLCByZW5kZXJpbmcgaXNzdWVzIGNhblxuICAgIC8vIG9jY3VyIHdpdGhvdXQgdGhpcyBjaGVja1xuICAgIGlmIChjZWxsLmdldFdpZHRoKCkgIT09IDEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBXZSBhc3N1bWUgdGhhdCBhbnkgYXNjaWkgY2hhcmFjdGVyIHdpbGwgbm90IG92ZXJsYXBcbiAgICBpZiAoY2VsbC5nZXRDb2RlKCkgPCAyNTYpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGFycyA9IGNlbGwuZ2V0Q2hhcnMoKTtcblxuICAgIC8vIERlbGl2ZXIgZnJvbSBjYWNoZSBpZiBhdmFpbGFibGVcbiAgICBpZiAodGhpcy5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlLmhhc093blByb3BlcnR5KGNoYXJzKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NoYXJhY3Rlck92ZXJsYXBDYWNoZVtjaGFyc107XG4gICAgfVxuXG4gICAgLy8gU2V0dXAgdGhlIGZvbnRcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5mb250ID0gdGhpcy5fY2hhcmFjdGVyRm9udDtcblxuICAgIC8vIE1lYXN1cmUgdGhlIHdpZHRoIG9mIHRoZSBjaGFyYWN0ZXIsIGJ1dCBNYXRoLmZsb29yIGl0XG4gICAgLy8gYmVjYXVzZSB0aGF0IGlzIHdoYXQgdGhlIHJlbmRlcmVyIGRvZXMgd2hlbiBpdCBjYWxjdWxhdGVzXG4gICAgLy8gdGhlIGNoYXJhY3RlciBkaW1lbnNpb25zIHdlIGFyZSBjb21wYXJpbmcgYWdhaW5zdFxuICAgIGNvbnN0IG92ZXJsYXBzID0gTWF0aC5mbG9vcih0aGlzLl9jdHgubWVhc3VyZVRleHQoY2hhcnMpLndpZHRoKSA+IHRoaXMuX2NoYXJhY3RlcldpZHRoO1xuXG4gICAgLy8gUmVzdG9yZSB0aGUgb3JpZ2luYWwgY29udGV4dFxuICAgIHRoaXMuX2N0eC5yZXN0b3JlKCk7XG5cbiAgICAvLyBDYWNoZSBhbmQgcmV0dXJuXG4gICAgdGhpcy5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlW2NoYXJzXSA9IG92ZXJsYXBzO1xuICAgIHJldHVybiBvdmVybGFwcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciB0aGUgY2hhcmNhdGVyIGF0IHRoZSBjZWxsIHNwZWNpZmllZC5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiBvZiB0aGUgY2hhci5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyBvZiB0aGUgY2hhci5cbiAgICovXG4gIC8vIHByaXZhdGUgX2NsZWFyQ2hhcih4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAvLyAgIGxldCBjb2xzVG9DbGVhciA9IDE7XG4gIC8vICAgLy8gQ2xlYXIgdGhlIGFkamFjZW50IGNoYXJhY3RlciBpZiBpdCB3YXMgd2lkZVxuICAvLyAgIGNvbnN0IHN0YXRlID0gdGhpcy5fc3RhdGUuY2FjaGVbeF1beV07XG4gIC8vICAgaWYgKHN0YXRlICYmIHN0YXRlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPT09IDIpIHtcbiAgLy8gICAgIGNvbHNUb0NsZWFyID0gMjtcbiAgLy8gICB9XG4gIC8vICAgdGhpcy5jbGVhckNlbGxzKHgsIHksIGNvbHNUb0NsZWFyLCAxKTtcbiAgLy8gfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJR2x5cGhJZGVudGlmaWVyIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9UeXBlcyc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlQ2hhckF0bGFzIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuICBwcml2YXRlIF9kaWRXYXJtVXA6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHsgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGFueSB3b3JrIG5lZWRlZCB0byB3YXJtIHRoZSBjYWNoZSBiZWZvcmUgaXQgY2FuIGJlIHVzZWQuIE1heSBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMuXG4gICAqIEltcGxlbWVudCBfZG9XYXJtVXAgaW5zdGVhZCBpZiB5b3Ugb25seSB3YW50IHRvIGdldCBjYWxsZWQgb25jZS5cbiAgICovXG4gIHB1YmxpYyB3YXJtVXAoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9kaWRXYXJtVXApIHtcbiAgICAgIHRoaXMuX2RvV2FybVVwKCk7XG4gICAgICB0aGlzLl9kaWRXYXJtVXAgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGFueSB3b3JrIG5lZWRlZCB0byB3YXJtIHRoZSBjYWNoZSBiZWZvcmUgaXQgY2FuIGJlIHVzZWQuIFVzZWQgYnkgdGhlIGRlZmF1bHRcbiAgICogaW1wbGVtZW50YXRpb24gb2Ygd2FybVVwKCksIGFuZCB3aWxsIG9ubHkgYmUgY2FsbGVkIG9uY2UuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2RvV2FybVVwKCk6IHZvaWQgeyB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHdlIHN0YXJ0IGRyYXdpbmcgYSBuZXcgZnJhbWUuXG4gICAqXG4gICAqIFRPRE86IFdlIHJlbHkgb24gdGhpcyBnZXR0aW5nIGNhbGxlZCBieSBUZXh0UmVuZGVyTGF5ZXIuIFRoaXMgc2hvdWxkIHJlYWxseSBiZSBjYWxsZWQgYnlcbiAgICogUmVuZGVyZXIgaW5zdGVhZCwgYnV0IHdlIG5lZWQgdG8gbWFrZSBSZW5kZXJlciB0aGUgc291cmNlLW9mLXRydXRoIGZvciB0aGUgY2hhciBhdGxhcywgaW5zdGVhZFxuICAgKiBvZiBCYXNlUmVuZGVyTGF5ZXIuXG4gICAqL1xuICBwdWJsaWMgYmVnaW5GcmFtZSgpOiB2b2lkIHsgfVxuXG4gIC8qKlxuICAgKiBNYXkgYmUgY2FsbGVkIGJlZm9yZSB3YXJtVXAgZmluaXNoZXMsIGhvd2V2ZXIgaXQgaXMgb2theSBmb3IgdGhlIGltcGxlbWVudGF0aW9uIHRvXG4gICAqIGRvIG5vdGhpbmcgYW5kIHJldHVybiBmYWxzZSBpbiB0aGF0IGNhc2UuXG4gICAqXG4gICAqIEBwYXJhbSBjdHggV2hlcmUgdG8gZHJhdyB0aGUgY2hhcmFjdGVyIG9udG8uXG4gICAqIEBwYXJhbSBnbHlwaCBJbmZvcm1hdGlvbiBhYm91dCB3aGF0IHRvIGRyYXdcbiAgICogQHBhcmFtIHggVGhlIHBvc2l0aW9uIG9uIHRoZSBjb250ZXh0IHRvIHN0YXJ0IGRyYXdpbmcgYXRcbiAgICogQHBhcmFtIHkgVGhlIHBvc2l0aW9uIG9uIHRoZSBjb250ZXh0IHRvIHN0YXJ0IGRyYXdpbmcgYXRcbiAgICogQHJldHVybnMgVGhlIHN1Y2Nlc3Mgc3RhdGUuIFRydWUgaWYgd2UgZHJldyB0aGUgY2hhcmFjdGVyLlxuICAgKi9cbiAgcHVibGljIGFic3RyYWN0IGRyYXcoXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgZ2x5cGg6IElHbHlwaElkZW50aWZpZXIsXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuICApOiBib29sZWFuO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBnZW5lcmF0ZUNvbmZpZywgY29uZmlnRXF1YWxzIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9DaGFyQXRsYXNVdGlscyc7XG5pbXBvcnQgeyBCYXNlQ2hhckF0bGFzIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9CYXNlQ2hhckF0bGFzJztcbmltcG9ydCB7IER5bmFtaWNDaGFyQXRsYXMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0R5bmFtaWNDaGFyQXRsYXMnO1xuaW1wb3J0IHsgSUNoYXJBdGxhc0NvbmZpZyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvVHlwZXMnO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJVGVybWluYWxPcHRpb25zIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuaW50ZXJmYWNlIElDaGFyQXRsYXNDYWNoZUVudHJ5IHtcbiAgYXRsYXM6IEJhc2VDaGFyQXRsYXM7XG4gIGNvbmZpZzogSUNoYXJBdGxhc0NvbmZpZztcbiAgLy8gTi5CLiBUaGlzIGltcGxlbWVudGF0aW9uIHBvdGVudGlhbGx5IGhvbGRzIG9udG8gY29waWVzIG9mIHRoZSB0ZXJtaW5hbCBmb3JldmVyLCBzb1xuICAvLyB0aGlzIG1heSBjYXVzZSBtZW1vcnkgbGVha3MuXG4gIG93bmVkQnk6IG51bWJlcltdO1xufVxuXG5jb25zdCBjaGFyQXRsYXNDYWNoZTogSUNoYXJBdGxhc0NhY2hlRW50cnlbXSA9IFtdO1xuXG4vKipcbiAqIEFjcXVpcmVzIGEgY2hhciBhdGxhcywgZWl0aGVyIGdlbmVyYXRpbmcgYSBuZXcgb25lIG9yIHJldHVybmluZyBhbiBleGlzdGluZ1xuICogb25lIHRoYXQgaXMgaW4gdXNlIGJ5IGFub3RoZXIgdGVybWluYWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhY3F1aXJlQ2hhckF0bGFzKFxuICBvcHRpb25zOiBJVGVybWluYWxPcHRpb25zLFxuICByZW5kZXJlcklkOiBudW1iZXIsXG4gIGNvbG9yczogSUNvbG9yU2V0LFxuICBzY2FsZWRDaGFyV2lkdGg6IG51bWJlcixcbiAgc2NhbGVkQ2hhckhlaWdodDogbnVtYmVyXG4pOiBCYXNlQ2hhckF0bGFzIHtcbiAgY29uc3QgbmV3Q29uZmlnID0gZ2VuZXJhdGVDb25maWcoc2NhbGVkQ2hhcldpZHRoLCBzY2FsZWRDaGFySGVpZ2h0LCBvcHRpb25zLCBjb2xvcnMpO1xuXG4gIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgcmVuZGVyZXIgYWxyZWFkeSBvd25zIHRoaXMgY29uZmlnXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckF0bGFzQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBlbnRyeSA9IGNoYXJBdGxhc0NhY2hlW2ldO1xuICAgIGNvbnN0IG93bmVkQnlJbmRleCA9IGVudHJ5Lm93bmVkQnkuaW5kZXhPZihyZW5kZXJlcklkKTtcbiAgICBpZiAob3duZWRCeUluZGV4ID49IDApIHtcbiAgICAgIGlmIChjb25maWdFcXVhbHMoZW50cnkuY29uZmlnLCBuZXdDb25maWcpKSB7XG4gICAgICAgIHJldHVybiBlbnRyeS5hdGxhcztcbiAgICAgIH1cbiAgICAgIC8vIFRoZSBjb25maWdzIGRpZmZlciwgcmVsZWFzZSB0aGUgcmVuZGVyZXIgZnJvbSB0aGUgZW50cnlcbiAgICAgIGlmIChlbnRyeS5vd25lZEJ5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBlbnRyeS5hdGxhcy5kaXNwb3NlKCk7XG4gICAgICAgIGNoYXJBdGxhc0NhY2hlLnNwbGljZShpLCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVudHJ5Lm93bmVkQnkuc3BsaWNlKG93bmVkQnlJbmRleCwgMSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBUcnkgbWF0Y2ggYSBjaGFyIGF0bGFzIGZyb20gdGhlIGNhY2hlXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckF0bGFzQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBlbnRyeSA9IGNoYXJBdGxhc0NhY2hlW2ldO1xuICAgIGlmIChjb25maWdFcXVhbHMoZW50cnkuY29uZmlnLCBuZXdDb25maWcpKSB7XG4gICAgICAvLyBBZGQgdGhlIHJlbmRlcmVyIHRvIHRoZSBjYWNoZSBlbnRyeSBhbmQgcmV0dXJuXG4gICAgICBlbnRyeS5vd25lZEJ5LnB1c2gocmVuZGVyZXJJZCk7XG4gICAgICByZXR1cm4gZW50cnkuYXRsYXM7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgbmV3RW50cnk6IElDaGFyQXRsYXNDYWNoZUVudHJ5ID0ge1xuICAgIGF0bGFzOiBuZXcgRHluYW1pY0NoYXJBdGxhcyhcbiAgICAgIGRvY3VtZW50LFxuICAgICAgbmV3Q29uZmlnXG4gICAgKSxcbiAgICBjb25maWc6IG5ld0NvbmZpZyxcbiAgICBvd25lZEJ5OiBbcmVuZGVyZXJJZF1cbiAgfTtcbiAgY2hhckF0bGFzQ2FjaGUucHVzaChuZXdFbnRyeSk7XG4gIHJldHVybiBuZXdFbnRyeS5hdGxhcztcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGEgdGVybWluYWwgcmVmZXJlbmNlIGZyb20gdGhlIGNhY2hlLCBhbGxvd2luZyBpdHMgbWVtb3J5IHRvIGJlIGZyZWVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlVGVybWluYWxGcm9tQ2FjaGUocmVuZGVyZXJJZDogbnVtYmVyKTogdm9pZCB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckF0bGFzQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBpbmRleCA9IGNoYXJBdGxhc0NhY2hlW2ldLm93bmVkQnkuaW5kZXhPZihyZW5kZXJlcklkKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBpZiAoY2hhckF0bGFzQ2FjaGVbaV0ub3duZWRCeS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBjYWNoZSBlbnRyeSBpZiBpdCdzIHRoZSBvbmx5IHJlbmRlcmVyXG4gICAgICAgIGNoYXJBdGxhc0NhY2hlW2ldLmF0bGFzLmRpc3Bvc2UoKTtcbiAgICAgICAgY2hhckF0bGFzQ2FjaGUuc3BsaWNlKGksIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSByZWZlcmVuY2UgZnJvbSB0aGUgY2FjaGUgZW50cnlcbiAgICAgICAgY2hhckF0bGFzQ2FjaGVbaV0ub3duZWRCeS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaGFyQXRsYXNDb25maWcgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL1R5cGVzJztcbmltcG9ydCB7IERFRkFVTFRfQ09MT1IgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBJQ29sb3JTZXQsIElQYXJ0aWFsQ29sb3JTZXQgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElUZXJtaW5hbE9wdGlvbnMgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVDb25maWcoc2NhbGVkQ2hhcldpZHRoOiBudW1iZXIsIHNjYWxlZENoYXJIZWlnaHQ6IG51bWJlciwgb3B0aW9uczogSVRlcm1pbmFsT3B0aW9ucywgY29sb3JzOiBJQ29sb3JTZXQpOiBJQ2hhckF0bGFzQ29uZmlnIHtcbiAgLy8gbnVsbCBvdXQgc29tZSBmaWVsZHMgdGhhdCBkb24ndCBtYXR0ZXJcbiAgY29uc3QgY2xvbmVkQ29sb3JzID0gPElQYXJ0aWFsQ29sb3JTZXQ+e1xuICAgIGZvcmVncm91bmQ6IGNvbG9ycy5mb3JlZ3JvdW5kLFxuICAgIGJhY2tncm91bmQ6IGNvbG9ycy5iYWNrZ3JvdW5kLFxuICAgIGN1cnNvcjogdW5kZWZpbmVkLFxuICAgIGN1cnNvckFjY2VudDogdW5kZWZpbmVkLFxuICAgIHNlbGVjdGlvbjogdW5kZWZpbmVkLFxuICAgIC8vIEZvciB0aGUgc3RhdGljIGNoYXIgYXRsYXMsIHdlIG9ubHkgdXNlIHRoZSBmaXJzdCAxNiBjb2xvcnMsIGJ1dCB3ZSBuZWVkIGFsbCAyNTYgZm9yIHRoZVxuICAgIC8vIGR5bmFtaWMgY2hhcmFjdGVyIGF0bGFzLlxuICAgIGFuc2k6IGNvbG9ycy5hbnNpLnNsaWNlKDAsIDE2KVxuICB9O1xuICByZXR1cm4ge1xuICAgIGRldmljZVBpeGVsUmF0aW86IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgIHNjYWxlZENoYXJXaWR0aCxcbiAgICBzY2FsZWRDaGFySGVpZ2h0LFxuICAgIGZvbnRGYW1pbHk6IG9wdGlvbnMuZm9udEZhbWlseSxcbiAgICBmb250U2l6ZTogb3B0aW9ucy5mb250U2l6ZSxcbiAgICBmb250V2VpZ2h0OiBvcHRpb25zLmZvbnRXZWlnaHQsXG4gICAgZm9udFdlaWdodEJvbGQ6IG9wdGlvbnMuZm9udFdlaWdodEJvbGQsXG4gICAgYWxsb3dUcmFuc3BhcmVuY3k6IG9wdGlvbnMuYWxsb3dUcmFuc3BhcmVuY3ksXG4gICAgY29sb3JzOiBjbG9uZWRDb2xvcnNcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ0VxdWFscyhhOiBJQ2hhckF0bGFzQ29uZmlnLCBiOiBJQ2hhckF0bGFzQ29uZmlnKTogYm9vbGVhbiB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYS5jb2xvcnMuYW5zaS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhLmNvbG9ycy5hbnNpW2ldLnJnYmEgIT09IGIuY29sb3JzLmFuc2lbaV0ucmdiYSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYS5kZXZpY2VQaXhlbFJhdGlvID09PSBiLmRldmljZVBpeGVsUmF0aW8gJiZcbiAgICAgIGEuZm9udEZhbWlseSA9PT0gYi5mb250RmFtaWx5ICYmXG4gICAgICBhLmZvbnRTaXplID09PSBiLmZvbnRTaXplICYmXG4gICAgICBhLmZvbnRXZWlnaHQgPT09IGIuZm9udFdlaWdodCAmJlxuICAgICAgYS5mb250V2VpZ2h0Qm9sZCA9PT0gYi5mb250V2VpZ2h0Qm9sZCAmJlxuICAgICAgYS5hbGxvd1RyYW5zcGFyZW5jeSA9PT0gYi5hbGxvd1RyYW5zcGFyZW5jeSAmJlxuICAgICAgYS5zY2FsZWRDaGFyV2lkdGggPT09IGIuc2NhbGVkQ2hhcldpZHRoICYmXG4gICAgICBhLnNjYWxlZENoYXJIZWlnaHQgPT09IGIuc2NhbGVkQ2hhckhlaWdodCAmJlxuICAgICAgYS5jb2xvcnMuZm9yZWdyb3VuZCA9PT0gYi5jb2xvcnMuZm9yZWdyb3VuZCAmJlxuICAgICAgYS5jb2xvcnMuYmFja2dyb3VuZCA9PT0gYi5jb2xvcnMuYmFja2dyb3VuZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzMjU2Q29sb3IoY29sb3JDb2RlOiBudW1iZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuIGNvbG9yQ29kZSA8IERFRkFVTFRfQ09MT1I7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmV4cG9ydCBjb25zdCBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SID0gMjU3O1xuZXhwb3J0IGNvbnN0IERJTV9PUEFDSVRZID0gMC41O1xuXG5leHBvcnQgY29uc3QgQ0hBUl9BVExBU19DRUxMX1NQQUNJTkcgPSAxO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBESU1fT1BBQ0lUWSwgSU5WRVJURURfREVGQVVMVF9DT0xPUiB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQ29uc3RhbnRzJztcbmltcG9ydCB7IElHbHlwaElkZW50aWZpZXIsIElDaGFyQXRsYXNDb25maWcgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL1R5cGVzJztcbmltcG9ydCB7IEJhc2VDaGFyQXRsYXMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0Jhc2VDaGFyQXRsYXMnO1xuaW1wb3J0IHsgREVGQVVMVF9BTlNJX0NPTE9SUyB9IGZyb20gJ2Jyb3dzZXIvQ29sb3JNYW5hZ2VyJztcbmltcG9ydCB7IExSVU1hcCB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvTFJVTWFwJztcbmltcG9ydCB7IGlzRmlyZWZveCwgaXNTYWZhcmkgfSBmcm9tICdjb21tb24vUGxhdGZvcm0nO1xuaW1wb3J0IHsgSUNvbG9yIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyB0aHJvd0lmRmFsc3kgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1JlbmRlcmVyVXRpbHMnO1xuaW1wb3J0IHsgY29sb3IgfSBmcm9tICdicm93c2VyL0NvbG9yJztcblxuLy8gSW4gcHJhY3RpY2Ugd2UncmUgcHJvYmFibHkgbmV2ZXIgZ29pbmcgdG8gZXhoYXVzdCBhIHRleHR1cmUgdGhpcyBsYXJnZS4gRm9yIGRlYnVnZ2luZyBwdXJwb3Nlcyxcbi8vIGhvd2V2ZXIsIGl0IGNhbiBiZSB1c2VmdWwgdG8gc2V0IHRoaXMgdG8gYSByZWFsbHkgdGlueSB2YWx1ZSwgdG8gdmVyaWZ5IHRoYXQgTFJVIGV2aWN0aW9uIHdvcmtzLlxuY29uc3QgVEVYVFVSRV9XSURUSCA9IDEwMjQ7XG5jb25zdCBURVhUVVJFX0hFSUdIVCA9IDEwMjQ7XG5cbmNvbnN0IFRSQU5TUEFSRU5UX0NPTE9SID0ge1xuICBjc3M6ICdyZ2JhKDAsIDAsIDAsIDApJyxcbiAgcmdiYTogMFxufTtcblxuLy8gRHJhd2luZyB0byB0aGUgY2FjaGUgaXMgZXhwZW5zaXZlOiBJZiB3ZSBoYXZlIHRvIGRyYXcgbW9yZSB0aGFuIHRoaXMgbnVtYmVyIG9mIGdseXBocyB0byB0aGVcbi8vIGNhY2hlIGluIGEgc2luZ2xlIGZyYW1lLCBnaXZlIHVwIG9uIHRyeWluZyB0byBjYWNoZSBhbnl0aGluZyBlbHNlLCBhbmQgdHJ5IHRvIGZpbmlzaCB0aGUgY3VycmVudFxuLy8gZnJhbWUgQVNBUC5cbi8vXG4vLyBUaGlzIGhlbHBzIHRvIGxpbWl0IHRoZSBhbW91bnQgb2YgZGFtYWdlIGEgcHJvZ3JhbSBjYW4gZG8gd2hlbiBpdCB3b3VsZCBvdGhlcndpc2UgdGhyYXNoIHRoZVxuLy8gY2FjaGUuXG5jb25zdCBGUkFNRV9DQUNIRV9EUkFXX0xJTUlUID0gMTAwO1xuXG4vKipcbiAqIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIGdlbmVyYXRpbmcgdGhlIEltYWdlQml0bWFwLCB0aGlzIGlzIHRvIGRlYm91bmNlL2JhdGNoXG4gKiB0aGUgb3BlcmF0aW9uIGFzIHdpbmRvdy5jcmVhdGVJbWFnZUJpdG1hcCBpcyBhc3luY2hyb25vdXMuXG4gKi9cbmNvbnN0IEdMWVBIX0JJVE1BUF9DT01NSVRfREVMQVkgPSAxMDA7XG5cbmludGVyZmFjZSBJR2x5cGhDYWNoZVZhbHVlIHtcbiAgaW5kZXg6IG51bWJlcjtcbiAgaXNFbXB0eTogYm9vbGVhbjtcbiAgaW5CaXRtYXA6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHbHlwaENhY2hlS2V5KGdseXBoOiBJR2x5cGhJZGVudGlmaWVyKTogbnVtYmVyIHtcbiAgLy8gTm90ZSB0aGF0IHRoaXMgb25seSByZXR1cm5zIGEgdmFsaWQga2V5IHdoZW4gY29kZSA8IDI1NlxuICAvLyBMYXlvdXQ6XG4gIC8vIDBiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDE6IGl0YWxpYyAoMSlcbiAgLy8gMGIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDogZGltICgxKVxuICAvLyAwYjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwOiBib2xkICgxKVxuICAvLyAwYjAwMDAwMDAwMDAwMDAwMDAwMDAwMTExMTExMTExMDAwOiBmZyAoOSlcbiAgLy8gMGIwMDAwMDAwMDAwMDExMTExMTExMTAwMDAwMDAwMDAwMDogYmcgKDkpXG4gIC8vIDBiMDAwMTExMTExMTEwMDAwMDAwMDAwMDAwMDAwMDAwMDA6IGNvZGUgKDgpXG4gIC8vIDBiMTExMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA6IHVudXNlZCAoMylcbiAgcmV0dXJuIGdseXBoLmNvZGUgPDwgMjEgfCBnbHlwaC5iZyA8PCAxMiB8IGdseXBoLmZnIDw8IDMgfCAoZ2x5cGguYm9sZCA/IDAgOiA0KSArIChnbHlwaC5kaW0gPyAwIDogMikgKyAoZ2x5cGguaXRhbGljID8gMCA6IDEpO1xufVxuXG5leHBvcnQgY2xhc3MgRHluYW1pY0NoYXJBdGxhcyBleHRlbmRzIEJhc2VDaGFyQXRsYXMge1xuICAvLyBBbiBvcmRlcmVkIG1hcCB0aGF0IHdlJ3JlIHVzaW5nIHRvIGtlZXAgdHJhY2sgb2Ygd2hlcmUgZWFjaCBnbHlwaCBpcyBpbiB0aGUgYXRsYXMgdGV4dHVyZS5cbiAgLy8gSXQncyBvcmRlcmVkIHNvIHRoYXQgd2UgY2FuIGRldGVybWluZSB3aGVuIHRvIHJlbW92ZSB0aGUgb2xkIGVudHJpZXMuXG4gIHByaXZhdGUgX2NhY2hlTWFwOiBMUlVNYXA8SUdseXBoQ2FjaGVWYWx1ZT47XG5cbiAgLy8gVGhlIHRleHR1cmUgdGhhdCB0aGUgYXRsYXMgaXMgZHJhd24gdG9cbiAgcHJpdmF0ZSBfY2FjaGVDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIF9jYWNoZUN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gIC8vIEEgdGVtcG9yYXJ5IGNvbnRleHQgdGhhdCBnbHlwaHMgYXJlIGRyYXduIHRvIGJlZm9yZSBiZWluZyB0cmFuc2ZlcmVkIHRvIHRoZSBhdGxhcy5cbiAgcHJpdmF0ZSBfdG1wQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgLy8gVGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIHN0b3JlZCBpbiB0aGUgYXRsYXMgYnkgd2lkdGgvaGVpZ2h0XG4gIHByaXZhdGUgX3dpZHRoOiBudW1iZXI7XG4gIHByaXZhdGUgX2hlaWdodDogbnVtYmVyO1xuXG4gIHByaXZhdGUgX2RyYXdUb0NhY2hlQ291bnQ6IG51bWJlciA9IDA7XG5cbiAgLy8gQW4gYXJyYXkgb2YgZ2x5cGgga2V5cyB0aGF0IGFyZSB3YWl0aW5nIG9uIHRoZSBiaXRtYXAgdG8gYmUgZ2VuZXJhdGVkLlxuICBwcml2YXRlIF9nbHlwaHNXYWl0aW5nT25CaXRtYXA6IElHbHlwaENhY2hlVmFsdWVbXSA9IFtdO1xuXG4gIC8vIFRoZSB0aW1lb3V0IHRoYXQgaXMgdXNlZCB0byBiYXRjaCBiaXRtYXAgZ2VuZXJhdGlvbiBzbyBpdCdzIG5vdCByZXF1ZXN0ZWQgZm9yIGV2ZXJ5IG5ldyBnbHlwaC5cbiAgcHJpdmF0ZSBfYml0bWFwQ29tbWl0VGltZW91dDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgLy8gVGhlIGJpdG1hcCB0byBkcmF3IGZyb20sIHRoaXMgaXMgbXVjaCBmYXN0ZXIgb24gb3RoZXIgYnJvd3NlcnMgdGhhbiBvdGhlcnMuXG4gIHByaXZhdGUgX2JpdG1hcDogSW1hZ2VCaXRtYXAgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3Rvcihkb2N1bWVudDogRG9jdW1lbnQsIHByaXZhdGUgX2NvbmZpZzogSUNoYXJBdGxhc0NvbmZpZykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fY2FjaGVDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB0aGlzLl9jYWNoZUNhbnZhcy53aWR0aCA9IFRFWFRVUkVfV0lEVEg7XG4gICAgdGhpcy5fY2FjaGVDYW52YXMuaGVpZ2h0ID0gVEVYVFVSRV9IRUlHSFQ7XG4gICAgLy8gVGhlIGNhbnZhcyBuZWVkcyBhbHBoYSBiZWNhdXNlIHdlIHVzZSBjbGVhckNvbG9yIHRvIGNvbnZlcnQgdGhlIGJhY2tncm91bmQgY29sb3IgdG8gYWxwaGEuXG4gICAgLy8gSXQgbWlnaHQgYWxzbyBjb250YWluIHNvbWUgY2hhcmFjdGVycyB3aXRoIHRyYW5zcGFyZW50IGJhY2tncm91bmRzIGlmIGFsbG93VHJhbnNwYXJlbmN5IGlzXG4gICAgLy8gc2V0LlxuICAgIHRoaXMuX2NhY2hlQ3R4ID0gdGhyb3dJZkZhbHN5KHRoaXMuX2NhY2hlQ2FudmFzLmdldENvbnRleHQoJzJkJywge2FscGhhOiB0cnVlfSkpO1xuXG4gICAgY29uc3QgdG1wQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdG1wQ2FudmFzLndpZHRoID0gdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aDtcbiAgICB0bXBDYW52YXMuaGVpZ2h0ID0gdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQ7XG4gICAgdGhpcy5fdG1wQ3R4ID0gdGhyb3dJZkZhbHN5KHRtcENhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHthbHBoYTogdGhpcy5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5fSkpO1xuXG4gICAgdGhpcy5fd2lkdGggPSBNYXRoLmZsb29yKFRFWFRVUkVfV0lEVEggLyB0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoKTtcbiAgICB0aGlzLl9oZWlnaHQgPSBNYXRoLmZsb29yKFRFWFRVUkVfSEVJR0hUIC8gdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpO1xuICAgIGNvbnN0IGNhcGFjaXR5ID0gdGhpcy5fd2lkdGggKiB0aGlzLl9oZWlnaHQ7XG4gICAgdGhpcy5fY2FjaGVNYXAgPSBuZXcgTFJVTWFwKGNhcGFjaXR5KTtcbiAgICB0aGlzLl9jYWNoZU1hcC5wcmVhbGxvYyhjYXBhY2l0eSk7XG5cbiAgICAvLyBUaGlzIGlzIHVzZWZ1bCBmb3IgZGVidWdnaW5nXG4gICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9jYWNoZUNhbnZhcyk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYml0bWFwQ29tbWl0VGltZW91dCAhPT0gbnVsbCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0KTtcbiAgICAgIHRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBiZWdpbkZyYW1lKCk6IHZvaWQge1xuICAgIHRoaXMuX2RyYXdUb0NhY2hlQ291bnQgPSAwO1xuICB9XG5cbiAgcHVibGljIGRyYXcoXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgZ2x5cGg6IElHbHlwaElkZW50aWZpZXIsXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuICApOiBib29sZWFuIHtcbiAgICAvLyBTcGFjZSBpcyBhbHdheXMgYW4gZW1wdHkgY2VsbCwgc3BlY2lhbCBjYXNlIHRoaXMgYXMgaXQncyBzbyBjb21tb25cbiAgICBpZiAoZ2x5cGguY29kZSA9PT0gMzIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIEV4aXQgZWFybHkgZm9yIHVuY2FjaGFibGUgZ2x5cGhzXG4gICAgaWYgKCF0aGlzLl9jYW5DYWNoZShnbHlwaCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBnbHlwaEtleSA9IGdldEdseXBoQ2FjaGVLZXkoZ2x5cGgpO1xuICAgIGNvbnN0IGNhY2hlVmFsdWUgPSB0aGlzLl9jYWNoZU1hcC5nZXQoZ2x5cGhLZXkpO1xuICAgIGlmIChjYWNoZVZhbHVlICE9PSBudWxsICYmIGNhY2hlVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fZHJhd0Zyb21DYWNoZShjdHgsIGNhY2hlVmFsdWUsIHgsIHkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9kcmF3VG9DYWNoZUNvdW50IDwgRlJBTUVfQ0FDSEVfRFJBV19MSU1JVCkge1xuICAgICAgbGV0IGluZGV4O1xuICAgICAgaWYgKHRoaXMuX2NhY2hlTWFwLnNpemUgPCB0aGlzLl9jYWNoZU1hcC5jYXBhY2l0eSkge1xuICAgICAgICBpbmRleCA9IHRoaXMuX2NhY2hlTWFwLnNpemU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB3ZSdyZSBvdXQgb2Ygc3BhY2UsIHNvIG91ciBjYWxsIHRvIHNldCB3aWxsIGRlbGV0ZSB0aGlzIGl0ZW1cbiAgICAgICAgaW5kZXggPSB0aGlzLl9jYWNoZU1hcC5wZWVrKCkhLmluZGV4O1xuICAgICAgfVxuICAgICAgY29uc3QgY2FjaGVWYWx1ZSA9IHRoaXMuX2RyYXdUb0NhY2hlKGdseXBoLCBpbmRleCk7XG4gICAgICB0aGlzLl9jYWNoZU1hcC5zZXQoZ2x5cGhLZXksIGNhY2hlVmFsdWUpO1xuICAgICAgdGhpcy5fZHJhd0Zyb21DYWNoZShjdHgsIGNhY2hlVmFsdWUsIHgsIHkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgX2NhbkNhY2hlKGdseXBoOiBJR2x5cGhJZGVudGlmaWVyKTogYm9vbGVhbiB7XG4gICAgLy8gT25seSBjYWNoZSBhc2NpaSBhbmQgZXh0ZW5kZWQgY2hhcmFjdGVycyBmb3Igbm93LCB0byBiZSBzYWZlLiBJbiB0aGUgZnV0dXJlLCB3ZSBjb3VsZCBkb1xuICAgIC8vIHNvbWV0aGluZyBtb3JlIGNvbXBsaWNhdGVkIHRvIGRldGVybWluZSB0aGUgZXhwZWN0ZWQgd2lkdGggb2YgYSBjaGFyYWN0ZXIuXG4gICAgLy9cbiAgICAvLyBJZiB3ZSBzd2l0Y2ggdGhlIHJlbmRlcmVyIG92ZXIgdG8gd2ViZ2wgYXQgc29tZSBwb2ludCwgd2UgbWF5IGJlIGFibGUgdG8gdXNlIGJsZW5kaW5nIG1vZGVzXG4gICAgLy8gdG8gZHJhdyBvdmVybGFwcGluZyBnbHlwaHMgZnJvbSB0aGUgYXRsYXM6XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3NlcnZvL3dlYnJlbmRlci9pc3N1ZXMvNDY0I2lzc3VlY29tbWVudC0yNTU2MzI4NzVcbiAgICAvLyBodHRwczovL3dlYmdsZnVuZGFtZW50YWxzLm9yZy93ZWJnbC9sZXNzb25zL3dlYmdsLXRleHQtdGV4dHVyZS5odG1sXG4gICAgcmV0dXJuIGdseXBoLmNvZGUgPCAyNTY7XG4gIH1cblxuICBwcml2YXRlIF90b0Nvb3JkaW5hdGVYKGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiAoaW5kZXggJSB0aGlzLl93aWR0aCkgKiB0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoO1xuICB9XG5cbiAgcHJpdmF0ZSBfdG9Db29yZGluYXRlWShpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihpbmRleCAvIHRoaXMuX3dpZHRoKSAqIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBfZHJhd0Zyb21DYWNoZShcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICBjYWNoZVZhbHVlOiBJR2x5cGhDYWNoZVZhbHVlLFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXJcbiAgKTogdm9pZCB7XG4gICAgLy8gV2UgZG9uJ3QgYWN0dWFsbHkgbmVlZCB0byBkbyBhbnl0aGluZyBpZiB0aGlzIGlzIHdoaXRlc3BhY2UuXG4gICAgaWYgKGNhY2hlVmFsdWUuaXNFbXB0eSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjYWNoZVggPSB0aGlzLl90b0Nvb3JkaW5hdGVYKGNhY2hlVmFsdWUuaW5kZXgpO1xuICAgIGNvbnN0IGNhY2hlWSA9IHRoaXMuX3RvQ29vcmRpbmF0ZVkoY2FjaGVWYWx1ZS5pbmRleCk7XG4gICAgY3R4LmRyYXdJbWFnZShcbiAgICAgIGNhY2hlVmFsdWUuaW5CaXRtYXAgPyB0aGlzLl9iaXRtYXAhIDogdGhpcy5fY2FjaGVDYW52YXMsXG4gICAgICBjYWNoZVgsXG4gICAgICBjYWNoZVksXG4gICAgICB0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoLFxuICAgICAgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQsXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsXG4gICAgICB0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9nZXRDb2xvckZyb21BbnNpSW5kZXgoaWR4OiBudW1iZXIpOiBJQ29sb3Ige1xuICAgIGlmIChpZHggPCB0aGlzLl9jb25maWcuY29sb3JzLmFuc2kubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29uZmlnLmNvbG9ycy5hbnNpW2lkeF07XG4gICAgfVxuICAgIHJldHVybiBERUZBVUxUX0FOU0lfQ09MT1JTW2lkeF07XG4gIH1cblxuICBwcml2YXRlIF9nZXRCYWNrZ3JvdW5kQ29sb3IoZ2x5cGg6IElHbHlwaElkZW50aWZpZXIpOiBJQ29sb3Ige1xuICAgIGlmICh0aGlzLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3kpIHtcbiAgICAgIC8vIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIG1pZ2h0IGhhdmUgc29tZSB0cmFuc3BhcmVuY3ksIHNvIHdlIG5lZWQgdG8gcmVuZGVyIGl0IGFzIGZ1bGx5XG4gICAgICAvLyB0cmFuc3BhcmVudCBpbiB0aGUgYXRsYXMuIE90aGVyd2lzZSB3ZSdkIGVuZCB1cCBkcmF3aW5nIHRoZSB0cmFuc3BhcmVudCBiYWNrZ3JvdW5kIHR3aWNlXG4gICAgICAvLyBhcm91bmQgdGhlIGFudGktYWxpYXNlZCBlZGdlcyBvZiB0aGUgZ2x5cGgsIGFuZCBpdCB3b3VsZCBsb29rIHRvbyBkYXJrLlxuICAgICAgcmV0dXJuIFRSQU5TUEFSRU5UX0NPTE9SO1xuICAgIH0gZWxzZSBpZiAoZ2x5cGguYmcgPT09IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmQ7XG4gICAgfSBlbHNlIGlmIChnbHlwaC5iZyA8IDI1Nikge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChnbHlwaC5iZyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmJhY2tncm91bmQ7XG4gIH1cblxuICBwcml2YXRlIF9nZXRGb3JlZ3JvdW5kQ29sb3IoZ2x5cGg6IElHbHlwaElkZW50aWZpZXIpOiBJQ29sb3Ige1xuICAgIGlmIChnbHlwaC5mZyA9PT0gSU5WRVJURURfREVGQVVMVF9DT0xPUikge1xuICAgICAgcmV0dXJuIGNvbG9yLm9wYXF1ZSh0aGlzLl9jb25maWcuY29sb3JzLmJhY2tncm91bmQpO1xuICAgIH0gZWxzZSBpZiAoZ2x5cGguZmcgPCAyNTYpIHtcbiAgICAgIC8vIDI1NiBjb2xvciBzdXBwb3J0XG4gICAgICByZXR1cm4gdGhpcy5fZ2V0Q29sb3JGcm9tQW5zaUluZGV4KGdseXBoLmZnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5jb2xvcnMuZm9yZWdyb3VuZDtcbiAgfVxuXG4gIC8vIFRPRE86IFdlIGRvIHRoaXMgKG9yIHNvbWV0aGluZyBzaW1pbGFyKSBpbiBtdWx0aXBsZSBwbGFjZXMuIFdlIHNob3VsZCBzcGxpdCB0aGlzIG9mZlxuICAvLyBpbnRvIGEgc2hhcmVkIGZ1bmN0aW9uLlxuICBwcml2YXRlIF9kcmF3VG9DYWNoZShnbHlwaDogSUdseXBoSWRlbnRpZmllciwgaW5kZXg6IG51bWJlcik6IElHbHlwaENhY2hlVmFsdWUge1xuICAgIHRoaXMuX2RyYXdUb0NhY2hlQ291bnQrKztcblxuICAgIHRoaXMuX3RtcEN0eC5zYXZlKCk7XG5cbiAgICAvLyBkcmF3IHRoZSBiYWNrZ3JvdW5kXG4gICAgY29uc3QgYmFja2dyb3VuZENvbG9yID0gdGhpcy5fZ2V0QmFja2dyb3VuZENvbG9yKGdseXBoKTtcbiAgICAvLyBVc2UgYSAnY29weScgY29tcG9zaXRlIG9wZXJhdGlvbiB0byBjbGVhciBhbnkgZXhpc3RpbmcgZ2x5cGggb3V0IG9mIF90bXBDdHhXaXRoQWxwaGEsIHJlZ2FyZGxlc3Mgb2ZcbiAgICAvLyB0cmFuc3BhcmVuY3kgaW4gYmFja2dyb3VuZENvbG9yXG4gICAgdGhpcy5fdG1wQ3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdjb3B5JztcbiAgICB0aGlzLl90bXBDdHguZmlsbFN0eWxlID0gYmFja2dyb3VuZENvbG9yLmNzcztcbiAgICB0aGlzLl90bXBDdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCwgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpO1xuICAgIHRoaXMuX3RtcEN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuXG4gICAgLy8gZHJhdyB0aGUgZm9yZWdyb3VuZC9nbHlwaFxuICAgIGNvbnN0IGZvbnRXZWlnaHQgPSBnbHlwaC5ib2xkID8gdGhpcy5fY29uZmlnLmZvbnRXZWlnaHRCb2xkIDogdGhpcy5fY29uZmlnLmZvbnRXZWlnaHQ7XG4gICAgY29uc3QgZm9udFN0eWxlID0gZ2x5cGguaXRhbGljID8gJ2l0YWxpYycgOiAnJztcbiAgICB0aGlzLl90bXBDdHguZm9udCA9XG4gICAgICBgJHtmb250U3R5bGV9ICR7Zm9udFdlaWdodH0gJHt0aGlzLl9jb25maWcuZm9udFNpemUgKiB0aGlzLl9jb25maWcuZGV2aWNlUGl4ZWxSYXRpb31weCAke3RoaXMuX2NvbmZpZy5mb250RmFtaWx5fWA7XG4gICAgdGhpcy5fdG1wQ3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuXG4gICAgdGhpcy5fdG1wQ3R4LmZpbGxTdHlsZSA9IHRoaXMuX2dldEZvcmVncm91bmRDb2xvcihnbHlwaCkuY3NzO1xuXG4gICAgLy8gQXBwbHkgYWxwaGEgdG8gZGltIHRoZSBjaGFyYWN0ZXJcbiAgICBpZiAoZ2x5cGguZGltKSB7XG4gICAgICB0aGlzLl90bXBDdHguZ2xvYmFsQWxwaGEgPSBESU1fT1BBQ0lUWTtcbiAgICB9XG4gICAgLy8gRHJhdyB0aGUgY2hhcmFjdGVyXG4gICAgdGhpcy5fdG1wQ3R4LmZpbGxUZXh0KGdseXBoLmNoYXJzLCAwLCB0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCAvIDIpO1xuICAgIHRoaXMuX3RtcEN0eC5yZXN0b3JlKCk7XG5cbiAgICAvLyBjbGVhciB0aGUgYmFja2dyb3VuZCBmcm9tIHRoZSBjaGFyYWN0ZXIgdG8gYXZvaWQgaXNzdWVzIHdpdGggZHJhd2luZyBvdmVyIHRoZSBwcmV2aW91c1xuICAgIC8vIGNoYXJhY3RlciBpZiBpdCBleHRlbmRzIHBhc3QgaXQncyBib3VuZHNcbiAgICBjb25zdCBpbWFnZURhdGEgPSB0aGlzLl90bXBDdHguZ2V0SW1hZ2VEYXRhKFxuICAgICAgMCwgMCwgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCwgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHRcbiAgICApO1xuICAgIGxldCBpc0VtcHR5ID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3kpIHtcbiAgICAgIGlzRW1wdHkgPSBjbGVhckNvbG9yKGltYWdlRGF0YSwgYmFja2dyb3VuZENvbG9yKTtcbiAgICB9XG5cbiAgICAvLyBjb3B5IHRoZSBkYXRhIGZyb20gaW1hZ2VEYXRhIHRvIF9jYWNoZUNhbnZhc1xuICAgIGNvbnN0IHggPSB0aGlzLl90b0Nvb3JkaW5hdGVYKGluZGV4KTtcbiAgICBjb25zdCB5ID0gdGhpcy5fdG9Db29yZGluYXRlWShpbmRleCk7XG4gICAgLy8gcHV0SW1hZ2VEYXRhIGRvZXNuJ3QgZG8gYW55IGJsZW5kaW5nLCBzbyBpdCB3aWxsIG92ZXJ3cml0ZSBhbnkgZXhpc3RpbmcgY2FjaGUgZW50cnkgZm9yIHVzXG4gICAgdGhpcy5fY2FjaGVDdHgucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgeCwgeSk7XG5cbiAgICAvLyBBZGQgdGhlIGdseXBoIGFuZCBxdWV1ZSBpdCB0byB0aGUgYml0bWFwIChpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBpdClcbiAgICBjb25zdCBjYWNoZVZhbHVlID0ge1xuICAgICAgaW5kZXgsXG4gICAgICBpc0VtcHR5LFxuICAgICAgaW5CaXRtYXA6IGZhbHNlXG4gICAgfTtcbiAgICB0aGlzLl9hZGRHbHlwaFRvQml0bWFwKGNhY2hlVmFsdWUpO1xuXG4gICAgcmV0dXJuIGNhY2hlVmFsdWU7XG4gIH1cblxuICBwcml2YXRlIF9hZGRHbHlwaFRvQml0bWFwKGNhY2hlVmFsdWU6IElHbHlwaENhY2hlVmFsdWUpOiB2b2lkIHtcbiAgICAvLyBTdXBwb3J0IGlzIHBhdGNoeSBmb3IgY3JlYXRlSW1hZ2VCaXRtYXAgYXQgdGhlIG1vbWVudCwgcGFzcyBhIGNhbnZhcyBiYWNrXG4gICAgLy8gaWYgc3VwcG9ydCBpcyBsYWNraW5nIGFzIGRyYXdJbWFnZSB3b3JrcyB0aGVyZSB0b28uIEZpcmVmb3ggaXMgYWxzb1xuICAgIC8vIGluY2x1ZGVkIGhlcmUgYXMgSW1hZ2VCaXRtYXAgYXBwZWFycyBib3RoIGJ1Z2d5IGFuZCBoYXMgaG9ycmlibGVcbiAgICAvLyBwZXJmb3JtYW5jZSAodGVzdGVkIG9uIHY1NSkuXG4gICAgaWYgKCEoJ2NyZWF0ZUltYWdlQml0bWFwJyBpbiB3aW5kb3cpIHx8IGlzRmlyZWZveCB8fCBpc1NhZmFyaSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgZ2x5cGggdG8gdGhlIHF1ZXVlXG4gICAgdGhpcy5fZ2x5cGhzV2FpdGluZ09uQml0bWFwLnB1c2goY2FjaGVWYWx1ZSk7XG5cbiAgICAvLyBDaGVjayBpZiBiaXRtYXAgZ2VuZXJhdGlvbiB0aW1lb3V0IGFscmVhZHkgZXhpc3RzXG4gICAgaWYgKHRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQgIT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5fZ2VuZXJhdGVCaXRtYXAoKSwgR0xZUEhfQklUTUFQX0NPTU1JVF9ERUxBWSk7XG4gIH1cblxuICBwcml2YXRlIF9nZW5lcmF0ZUJpdG1hcCgpOiB2b2lkIHtcbiAgICBjb25zdCBnbHlwaHNNb3ZpbmdUb0JpdG1hcCA9IHRoaXMuX2dseXBoc1dhaXRpbmdPbkJpdG1hcDtcbiAgICB0aGlzLl9nbHlwaHNXYWl0aW5nT25CaXRtYXAgPSBbXTtcbiAgICB3aW5kb3cuY3JlYXRlSW1hZ2VCaXRtYXAodGhpcy5fY2FjaGVDYW52YXMpLnRoZW4oYml0bWFwID0+IHtcbiAgICAgIC8vIFNldCBiaXRtYXBcbiAgICAgIHRoaXMuX2JpdG1hcCA9IGJpdG1hcDtcblxuICAgICAgLy8gTWFyayBhbGwgbmV3IGdseXBocyBhcyBpbiBiaXRtYXAsIGV4Y2x1ZGluZyBnbHlwaHMgdGhhdCBjYW1lIGluIGFmdGVyXG4gICAgICAvLyB0aGUgYml0bWFwIHdhcyByZXF1ZXN0ZWRcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2x5cGhzTW92aW5nVG9CaXRtYXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBnbHlwaHNNb3ZpbmdUb0JpdG1hcFtpXTtcbiAgICAgICAgLy8gSXQgZG9lc24ndCBtYXR0ZXIgaWYgdGhlIHZhbHVlIHdhcyBhbHJlYWR5IGV2aWN0ZWQsIGl0IHdpbGwgYmVcbiAgICAgICAgLy8gcmVsZWFzZWQgZnJvbSBtZW1vcnkgYWZ0ZXIgdGhpcyBibG9jayBpZiBzby5cbiAgICAgICAgdmFsdWUuaW5CaXRtYXAgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQgPSBudWxsO1xuICB9XG59XG5cbi8vIFRoaXMgaXMgdXNlZCBmb3IgZGVidWdnaW5nIHRoZSByZW5kZXJlciwganVzdCBzd2FwIG91dCBgbmV3IER5bmFtaWNDaGFyQXRsYXNgIHdpdGhcbi8vIGBuZXcgTm9uZUNoYXJBdGxhc2AuXG5leHBvcnQgY2xhc3MgTm9uZUNoYXJBdGxhcyBleHRlbmRzIEJhc2VDaGFyQXRsYXMge1xuICBjb25zdHJ1Y3Rvcihkb2N1bWVudDogRG9jdW1lbnQsIGNvbmZpZzogSUNoYXJBdGxhc0NvbmZpZykge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBwdWJsaWMgZHJhdyhcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICBnbHlwaDogSUdseXBoSWRlbnRpZmllcixcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyXG4gICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIE1ha2VzIGEgcGFydGlpY3VsYXIgcmdiIGNvbG9yIGluIGFuIEltYWdlRGF0YSBjb21wbGV0ZWx5IHRyYW5zcGFyZW50LlxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgcmVzdWx0IGlzIFwiZW1wdHlcIiwgbWVhbmluZyBhbGwgcGl4ZWxzIGFyZSBmdWxseSB0cmFuc3BhcmVudC5cbiAqL1xuZnVuY3Rpb24gY2xlYXJDb2xvcihpbWFnZURhdGE6IEltYWdlRGF0YSwgY29sb3I6IElDb2xvcik6IGJvb2xlYW4ge1xuICBsZXQgaXNFbXB0eSA9IHRydWU7XG4gIGNvbnN0IHIgPSBjb2xvci5yZ2JhID4+PiAyNDtcbiAgY29uc3QgZyA9IGNvbG9yLnJnYmEgPj4+IDE2ICYgMHhGRjtcbiAgY29uc3QgYiA9IGNvbG9yLnJnYmEgPj4+IDggJiAweEZGO1xuICBmb3IgKGxldCBvZmZzZXQgPSAwOyBvZmZzZXQgPCBpbWFnZURhdGEuZGF0YS5sZW5ndGg7IG9mZnNldCArPSA0KSB7XG4gICAgaWYgKGltYWdlRGF0YS5kYXRhW29mZnNldF0gPT09IHIgJiZcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbb2Zmc2V0ICsgMV0gPT09IGcgJiZcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbb2Zmc2V0ICsgMl0gPT09IGIpIHtcbiAgICAgIGltYWdlRGF0YS5kYXRhW29mZnNldCArIDNdID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaXNFbXB0eTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW50ZXJmYWNlIElMaW5rZWRMaXN0Tm9kZTxUPiB7XG4gIHByZXY6IElMaW5rZWRMaXN0Tm9kZTxUPiB8IG51bGw7XG4gIG5leHQ6IElMaW5rZWRMaXN0Tm9kZTxUPiB8IG51bGw7XG4gIGtleTogbnVtYmVyIHwgbnVsbDtcbiAgdmFsdWU6IFQgfCBudWxsO1xufVxuXG5leHBvcnQgY2xhc3MgTFJVTWFwPFQ+IHtcbiAgcHJpdmF0ZSBfbWFwOiB7IFtrZXk6IG51bWJlcl06IElMaW5rZWRMaXN0Tm9kZTxUPiB9ID0ge307XG4gIHByaXZhdGUgX2hlYWQ6IElMaW5rZWRMaXN0Tm9kZTxUPiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF90YWlsOiBJTGlua2VkTGlzdE5vZGU8VD4gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBfbm9kZVBvb2w6IElMaW5rZWRMaXN0Tm9kZTxUPltdID0gW107XG4gIHB1YmxpYyBzaXplOiBudW1iZXIgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBjYXBhY2l0eTogbnVtYmVyKSB7IH1cblxuICBwcml2YXRlIF91bmxpbmtOb2RlKG5vZGU6IElMaW5rZWRMaXN0Tm9kZTxUPik6IHZvaWQge1xuICAgIGNvbnN0IHByZXYgPSBub2RlLnByZXY7XG4gICAgY29uc3QgbmV4dCA9IG5vZGUubmV4dDtcbiAgICBpZiAobm9kZSA9PT0gdGhpcy5faGVhZCkge1xuICAgICAgdGhpcy5faGVhZCA9IG5leHQ7XG4gICAgfVxuICAgIGlmIChub2RlID09PSB0aGlzLl90YWlsKSB7XG4gICAgICB0aGlzLl90YWlsID0gcHJldjtcbiAgICB9XG4gICAgaWYgKHByZXYgIT09IG51bGwpIHtcbiAgICAgIHByZXYubmV4dCA9IG5leHQ7XG4gICAgfVxuICAgIGlmIChuZXh0ICE9PSBudWxsKSB7XG4gICAgICBuZXh0LnByZXYgPSBwcmV2O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2FwcGVuZE5vZGUobm9kZTogSUxpbmtlZExpc3ROb2RlPFQ+KTogdm9pZCB7XG4gICAgY29uc3QgdGFpbCA9IHRoaXMuX3RhaWw7XG4gICAgaWYgKHRhaWwgIT09IG51bGwpIHtcbiAgICAgIHRhaWwubmV4dCA9IG5vZGU7XG4gICAgfVxuICAgIG5vZGUucHJldiA9IHRhaWw7XG4gICAgbm9kZS5uZXh0ID0gbnVsbDtcbiAgICB0aGlzLl90YWlsID0gbm9kZTtcbiAgICBpZiAodGhpcy5faGVhZCA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5faGVhZCA9IG5vZGU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByZWFsbG9jYXRlIGEgYnVuY2ggb2YgbGlua2VkLWxpc3Qgbm9kZXMuIEFsbG9jYXRpbmcgdGhlc2Ugbm9kZXMgYWhlYWQgb2YgdGltZSBtZWFucyB0aGF0XG4gICAqIHRoZXkncmUgbW9yZSBsaWtlbHkgdG8gbGl2ZSBuZXh0IHRvIGVhY2ggb3RoZXIgaW4gbWVtb3J5LCB3aGljaCBzZWVtcyB0byBpbXByb3ZlIHBlcmZvcm1hbmNlLlxuICAgKlxuICAgKiBFYWNoIGVtcHR5IG9iamVjdCBvbmx5IGNvbnN1bWVzIGFib3V0IDYwIGJ5dGVzIG9mIG1lbW9yeSwgc28gdGhpcyBpcyBwcmV0dHkgY2hlYXAsIGV2ZW4gZm9yXG4gICAqIGxhcmdlIG1hcHMuXG4gICAqL1xuICBwdWJsaWMgcHJlYWxsb2MoY291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IG5vZGVQb29sID0gdGhpcy5fbm9kZVBvb2w7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICBub2RlUG9vbC5wdXNoKHtcbiAgICAgICAgcHJldjogbnVsbCxcbiAgICAgICAgbmV4dDogbnVsbCxcbiAgICAgICAga2V5OiBudWxsLFxuICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldChrZXk6IG51bWJlcik6IFQgfCBudWxsIHtcbiAgICAvLyBUaGlzIGlzIHVuc2FmZTogV2UncmUgYXNzdW1pbmcgb3VyIGtleXNwYWNlIGRvZXNuJ3Qgb3ZlcmxhcCB3aXRoIE9iamVjdC5wcm90b3R5cGUuIEhvd2V2ZXIsXG4gICAgLy8gaXQncyBmYXN0ZXIgdGhhbiBjYWxsaW5nIGhhc093blByb3BlcnR5LCBhbmQgaW4gb3VyIGNhc2UsIGl0IHdvdWxkIG5ldmVyIG92ZXJsYXAuXG4gICAgY29uc3Qgbm9kZSA9IHRoaXMuX21hcFtrZXldO1xuICAgIGlmIChub2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX3VubGlua05vZGUobm9kZSk7XG4gICAgICB0aGlzLl9hcHBlbmROb2RlKG5vZGUpO1xuICAgICAgcmV0dXJuIG5vZGUudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZSBmcm9tIGEga2V5IHdpdGhvdXQgbWFya2luZyBpdCBhcyB0aGUgbW9zdCByZWNlbnRseSB1c2VkIGl0ZW0uXG4gICAqL1xuICBwdWJsaWMgcGVla1ZhbHVlKGtleTogbnVtYmVyKTogVCB8IG51bGwge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLl9tYXBba2V5XTtcbiAgICBpZiAobm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gbm9kZS52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwdWJsaWMgcGVlaygpOiBUIHwgbnVsbCB7XG4gICAgY29uc3QgaGVhZCA9IHRoaXMuX2hlYWQ7XG4gICAgcmV0dXJuIGhlYWQgPT09IG51bGwgPyBudWxsIDogaGVhZC52YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBzZXQoa2V5OiBudW1iZXIsIHZhbHVlOiBUKTogdm9pZCB7XG4gICAgLy8gVGhpcyBpcyB1bnNhZmU6IFNlZSBub3RlIGFib3ZlLlxuICAgIGxldCBub2RlID0gdGhpcy5fbWFwW2tleV07XG4gICAgaWYgKG5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gYWxyZWFkeSBleGlzdHMsIHdlIGp1c3QgbmVlZCB0byBtdXRhdGUgaXQgYW5kIG1vdmUgaXQgdG8gdGhlIGVuZCBvZiB0aGUgbGlzdFxuICAgICAgbm9kZSA9IHRoaXMuX21hcFtrZXldO1xuICAgICAgdGhpcy5fdW5saW5rTm9kZShub2RlKTtcbiAgICAgIG5vZGUudmFsdWUgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2l6ZSA+PSB0aGlzLmNhcGFjaXR5KSB7XG4gICAgICAvLyB3ZSdyZSBvdXQgb2Ygc3BhY2U6IHJlY3ljbGUgdGhlIGhlYWQgbm9kZSwgbW92ZSBpdCB0byB0aGUgdGFpbFxuICAgICAgbm9kZSA9IHRoaXMuX2hlYWQhO1xuICAgICAgdGhpcy5fdW5saW5rTm9kZShub2RlKTtcbiAgICAgIGRlbGV0ZSB0aGlzLl9tYXBbbm9kZS5rZXkhXTtcbiAgICAgIG5vZGUua2V5ID0ga2V5O1xuICAgICAgbm9kZS52YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy5fbWFwW2tleV0gPSBub2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBtYWtlIGEgbmV3IGVsZW1lbnRcbiAgICAgIGNvbnN0IG5vZGVQb29sID0gdGhpcy5fbm9kZVBvb2w7XG4gICAgICBpZiAobm9kZVBvb2wubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyB1c2UgYSBwcmVhbGxvY2F0ZWQgbm9kZSBpZiB3ZSBjYW5cbiAgICAgICAgbm9kZSA9IG5vZGVQb29sLnBvcCgpITtcbiAgICAgICAgbm9kZS5rZXkgPSBrZXk7XG4gICAgICAgIG5vZGUudmFsdWUgPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGUgPSB7XG4gICAgICAgICAgcHJldjogbnVsbCxcbiAgICAgICAgICBuZXh0OiBudWxsLFxuICAgICAgICAgIGtleSxcbiAgICAgICAgICB2YWx1ZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgdGhpcy5fbWFwW2tleV0gPSBub2RlO1xuICAgICAgdGhpcy5zaXplKys7XG4gICAgfVxuICAgIHRoaXMuX2FwcGVuZE5vZGUobm9kZSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVJlbmRlcmVyLCBJUmVuZGVyRGltZW5zaW9ucywgQ2hhcmFjdGVySm9pbmVySGFuZGxlciwgSVJlcXVlc3RSZWZyZXNoUm93c0V2ZW50IH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBCT0xEX0NMQVNTLCBJVEFMSUNfQ0xBU1MsIENVUlNPUl9DTEFTUywgQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTLCBDVVJTT1JfQkxJTktfQ0xBU1MsIENVUlNPUl9TVFlMRV9CQVJfQ0xBU1MsIENVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1MsIERvbVJlbmRlcmVyUm93RmFjdG9yeSB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvZG9tL0RvbVJlbmRlcmVyUm93RmFjdG9yeSc7XG5pbXBvcnQgeyBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9Db25zdGFudHMnO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgSUNvbG9yU2V0LCBJTGlua2lmaWVyRXZlbnQsIElMaW5raWZpZXIgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElDaGFyU2l6ZVNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElPcHRpb25zU2VydmljZSwgSUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IGNvbG9yIH0gZnJvbSAnYnJvd3Nlci9Db2xvcic7XG5cbmNvbnN0IFRFUk1JTkFMX0NMQVNTX1BSRUZJWCA9ICd4dGVybS1kb20tcmVuZGVyZXItb3duZXItJztcbmNvbnN0IFJPV19DT05UQUlORVJfQ0xBU1MgPSAneHRlcm0tcm93cyc7XG5jb25zdCBGR19DTEFTU19QUkVGSVggPSAneHRlcm0tZmctJztcbmNvbnN0IEJHX0NMQVNTX1BSRUZJWCA9ICd4dGVybS1iZy0nO1xuY29uc3QgRk9DVVNfQ0xBU1MgPSAneHRlcm0tZm9jdXMnO1xuY29uc3QgU0VMRUNUSU9OX0NMQVNTID0gJ3h0ZXJtLXNlbGVjdGlvbic7XG5cbmxldCBuZXh0VGVybWluYWxJZCA9IDE7XG5cbi8qKlxuICogQSBmYWxsYmFjayByZW5kZXJlciBmb3Igd2hlbiBjYW52YXMgaXMgc2xvdy4gVGhpcyBpcyBub3QgbWVhbnQgdG8gYmVcbiAqIHBhcnRpY3VsYXJseSBmYXN0IG9yIGZlYXR1cmUgY29tcGxldGUsIG1vcmUganVzdCBzdGFibGUgYW5kIHVzYWJsZSBmb3Igd2hlblxuICogY2FudmFzIGlzIG5vdCBhbiBvcHRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBEb21SZW5kZXJlciBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJUmVuZGVyZXIge1xuICBwcml2YXRlIF9yb3dGYWN0b3J5OiBEb21SZW5kZXJlclJvd0ZhY3Rvcnk7XG4gIHByaXZhdGUgX3Rlcm1pbmFsQ2xhc3M6IG51bWJlciA9IG5leHRUZXJtaW5hbElkKys7XG5cbiAgcHJpdmF0ZSBfdGhlbWVTdHlsZUVsZW1lbnQhOiBIVE1MU3R5bGVFbGVtZW50O1xuICBwcml2YXRlIF9kaW1lbnNpb25zU3R5bGVFbGVtZW50ITogSFRNTFN0eWxlRWxlbWVudDtcbiAgcHJpdmF0ZSBfcm93Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfcm93RWxlbWVudHM6IEhUTUxFbGVtZW50W10gPSBbXTtcbiAgcHJpdmF0ZSBfc2VsZWN0aW9uQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcblxuICBwdWJsaWMgZGltZW5zaW9uczogSVJlbmRlckRpbWVuc2lvbnM7XG5cbiAgcHJpdmF0ZSBfb25SZXF1ZXN0UmVmcmVzaFJvd3MgPSBuZXcgRXZlbnRFbWl0dGVyPElSZXF1ZXN0UmVmcmVzaFJvd3NFdmVudD4oKTtcbiAgcHVibGljIGdldCBvblJlcXVlc3RSZWZyZXNoUm93cygpOiBJRXZlbnQ8SVJlcXVlc3RSZWZyZXNoUm93c0V2ZW50PiB7IHJldHVybiB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2NvbG9yczogSUNvbG9yU2V0LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2VsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NjcmVlbkVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3ZpZXdwb3J0RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfbGlua2lmaWVyOiBJTGlua2lmaWVyLFxuICAgIEBJQ2hhclNpemVTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NoYXJTaXplU2VydmljZTogSUNoYXJTaXplU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9yb3dDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LmFkZChST1dfQ09OVEFJTkVSX0NMQVNTKTtcbiAgICB0aGlzLl9yb3dDb250YWluZXIuc3R5bGUubGluZUhlaWdodCA9ICdub3JtYWwnO1xuICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICB0aGlzLl9yZWZyZXNoUm93RWxlbWVudHModGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpO1xuICAgIHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFNFTEVDVElPTl9DTEFTUyk7XG4gICAgdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuXG4gICAgdGhpcy5kaW1lbnNpb25zID0ge1xuICAgICAgc2NhbGVkQ2hhcldpZHRoOiAwLFxuICAgICAgc2NhbGVkQ2hhckhlaWdodDogMCxcbiAgICAgIHNjYWxlZENlbGxXaWR0aDogMCxcbiAgICAgIHNjYWxlZENlbGxIZWlnaHQ6IDAsXG4gICAgICBzY2FsZWRDaGFyTGVmdDogMCxcbiAgICAgIHNjYWxlZENoYXJUb3A6IDAsXG4gICAgICBzY2FsZWRDYW52YXNXaWR0aDogMCxcbiAgICAgIHNjYWxlZENhbnZhc0hlaWdodDogMCxcbiAgICAgIGNhbnZhc1dpZHRoOiAwLFxuICAgICAgY2FudmFzSGVpZ2h0OiAwLFxuICAgICAgYWN0dWFsQ2VsbFdpZHRoOiAwLFxuICAgICAgYWN0dWFsQ2VsbEhlaWdodDogMFxuICAgIH07XG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICAgIHRoaXMuX2luamVjdENzcygpO1xuXG4gICAgdGhpcy5fcm93RmFjdG9yeSA9IG5ldyBEb21SZW5kZXJlclJvd0ZhY3RvcnkoZG9jdW1lbnQsIHRoaXMuX29wdGlvbnNTZXJ2aWNlLCB0aGlzLl9jb2xvcnMpO1xuXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKFRFUk1JTkFMX0NMQVNTX1BSRUZJWCArIHRoaXMuX3Rlcm1pbmFsQ2xhc3MpO1xuICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fcm93Q29udGFpbmVyKTtcbiAgICB0aGlzLl9zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lcik7XG5cbiAgICB0aGlzLl9saW5raWZpZXIub25MaW5rSG92ZXIoZSA9PiB0aGlzLl9vbkxpbmtIb3ZlcihlKSk7XG4gICAgdGhpcy5fbGlua2lmaWVyLm9uTGlua0xlYXZlKGUgPT4gdGhpcy5fb25MaW5rTGVhdmUoZSkpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFRFUk1JTkFMX0NMQVNTX1BSRUZJWCArIHRoaXMuX3Rlcm1pbmFsQ2xhc3MpO1xuICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5fcm93Q29udGFpbmVyKTtcbiAgICB0aGlzLl9zY3JlZW5FbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lcik7XG4gICAgdGhpcy5fc2NyZWVuRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLl90aGVtZVN0eWxlRWxlbWVudCk7XG4gICAgdGhpcy5fc2NyZWVuRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50KTtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVEaW1lbnNpb25zKCk6IHZvaWQge1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGggPSB0aGlzLl9jaGFyU2l6ZVNlcnZpY2Uud2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCA9IE1hdGguY2VpbCh0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoICsgTWF0aC5yb3VuZCh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxldHRlclNwYWNpbmcpO1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0ID0gTWF0aC5mbG9vcih0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCAqIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubGluZUhlaWdodCk7XG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJMZWZ0ID0gMDtcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhclRvcCA9IDA7XG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoID0gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCAqIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0ID0gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQgKiB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoID0gTWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGggLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCA9IE1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoID0gdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoIC8gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgIHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0ID0gdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCAvIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcblxuICAgIHRoaXMuX3Jvd0VsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRofXB4YDtcbiAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHR9cHhgO1xuICAgICAgZWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gYCR7dGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHR9cHhgO1xuICAgICAgLy8gTWFrZSBzdXJlIHJvd3MgZG9uJ3Qgb3ZlcmZsb3cgb250byBmb2xsb3dpbmcgcm93XG4gICAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgdGhpcy5fc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50KTtcbiAgICB9XG5cbiAgICBjb25zdCBzdHlsZXMgPVxuICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfSBzcGFuIHtgICtcbiAgICAgICAgYCBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7YCArXG4gICAgICAgIGAgaGVpZ2h0OiAxMDAlO2AgK1xuICAgICAgICBgIHZlcnRpY2FsLWFsaWduOiB0b3A7YCArXG4gICAgICAgIGAgd2lkdGg6ICR7dGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aH1weGAgK1xuICAgICAgICBgfWA7XG5cbiAgICB0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50LmlubmVySFRNTCA9IHN0eWxlcztcblxuICAgIHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSB0aGlzLl92aWV3cG9ydEVsZW1lbnQuc3R5bGUuaGVpZ2h0O1xuICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHt0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGh9cHhgO1xuICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodH1weGA7XG4gIH1cblxuICBwdWJsaWMgc2V0Q29sb3JzKGNvbG9yczogSUNvbG9yU2V0KTogdm9pZCB7XG4gICAgdGhpcy5fY29sb3JzID0gY29sb3JzO1xuICAgIHRoaXMuX2luamVjdENzcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfaW5qZWN0Q3NzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vIEJhc2UgQ1NTXG4gICAgbGV0IHN0eWxlcyA9XG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9IHtgICtcbiAgICAgICAgYCBjb2xvcjogJHt0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3N9O2AgK1xuICAgICAgICBgIGJhY2tncm91bmQtY29sb3I6ICR7dGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzfTtgICtcbiAgICAgICAgYCBmb250LWZhbWlseTogJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRGYW1pbHl9O2AgK1xuICAgICAgICBgIGZvbnQtc2l6ZTogJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRTaXplfXB4O2AgK1xuICAgICAgICBgfWA7XG4gICAgLy8gVGV4dCBzdHlsZXNcbiAgICBzdHlsZXMgKz1cbiAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gc3Bhbjpub3QoLiR7Qk9MRF9DTEFTU30pIHtgICtcbiAgICAgICAgYCBmb250LXdlaWdodDogJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRXZWlnaHR9O2AgK1xuICAgICAgICBgfWAgK1xuICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSBzcGFuLiR7Qk9MRF9DTEFTU30ge2AgK1xuICAgICAgICBgIGZvbnQtd2VpZ2h0OiAke3RoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZm9udFdlaWdodEJvbGR9O2AgK1xuICAgICAgICBgfWAgK1xuICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSBzcGFuLiR7SVRBTElDX0NMQVNTfSB7YCArXG4gICAgICAgIGAgZm9udC1zdHlsZTogaXRhbGljO2AgK1xuICAgICAgICBgfWA7XG4gICAgLy8gQmxpbmsgYW5pbWF0aW9uXG4gICAgc3R5bGVzICs9XG4gICAgICAgIGBAa2V5ZnJhbWVzIGJsaW5rX2JveF9zaGFkb3cge2AgK1xuICAgICAgICBgIDUwJSB7YCArXG4gICAgICAgIGAgIGJveC1zaGFkb3c6IG5vbmU7YCArXG4gICAgICAgIGAgfWAgK1xuICAgICAgICBgfWA7XG4gICAgc3R5bGVzICs9XG4gICAgICAgIGBAa2V5ZnJhbWVzIGJsaW5rX2Jsb2NrIHtgICtcbiAgICAgICAgYCAwJSB7YCArXG4gICAgICAgIGAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhpcy5fY29sb3JzLmN1cnNvci5jc3N9O2AgK1xuICAgICAgICBgICBjb2xvcjogJHt0aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzc307YCArXG4gICAgICAgIGAgfWAgK1xuICAgICAgICBgIDUwJSB7YCArXG4gICAgICAgIGAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhpcy5fY29sb3JzLmN1cnNvckFjY2VudC5jc3N9O2AgK1xuICAgICAgICBgICBjb2xvcjogJHt0aGlzLl9jb2xvcnMuY3Vyc29yLmNzc307YCArXG4gICAgICAgIGAgfWAgK1xuICAgICAgICBgfWA7XG4gICAgLy8gQ3Vyc29yXG4gICAgc3R5bGVzICs9XG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9Om5vdCguJHtGT0NVU19DTEFTU30pIC4ke0NVUlNPUl9DTEFTU30uJHtDVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1N9IHtgICtcbiAgICAgICAgYCBvdXRsaW5lOiAxcHggc29saWQgJHt0aGlzLl9jb2xvcnMuY3Vyc29yLmNzc307YCArXG4gICAgICAgIGAgb3V0bGluZS1vZmZzZXQ6IC0xcHg7YCArXG4gICAgICAgIGB9YCArXG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9LiR7Rk9DVVNfQ0xBU1N9IC4ke0NVUlNPUl9DTEFTU30uJHtDVVJTT1JfQkxJTktfQ0xBU1N9Om5vdCguJHtDVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1N9KSB7YCArXG4gICAgICAgIGAgYW5pbWF0aW9uOiBibGlua19ib3hfc2hhZG93IDFzIHN0ZXAtZW5kIGluZmluaXRlO2AgK1xuICAgICAgICBgfWAgK1xuICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfS4ke0ZPQ1VTX0NMQVNTfSAuJHtDVVJTT1JfQ0xBU1N9LiR7Q1VSU09SX0JMSU5LX0NMQVNTfS4ke0NVUlNPUl9TVFlMRV9CTE9DS19DTEFTU30ge2AgK1xuICAgICAgICBgIGFuaW1hdGlvbjogYmxpbmtfYmxvY2sgMXMgc3RlcC1lbmQgaW5maW5pdGU7YCArXG4gICAgICAgIGB9YCArXG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9LiR7Rk9DVVNfQ0xBU1N9IC4ke0NVUlNPUl9DTEFTU30uJHtDVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1N9IHtgICtcbiAgICAgICAgYCBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzfTtgICtcbiAgICAgICAgYCBjb2xvcjogJHt0aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzc307YCArXG4gICAgICAgIGB9YCArXG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9IC4ke0NVUlNPUl9DTEFTU30uJHtDVVJTT1JfU1RZTEVfQkFSX0NMQVNTfSB7YCArXG4gICAgICAgIGAgYm94LXNoYWRvdzogJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvcldpZHRofXB4IDAgMCAke3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzfSBpbnNldDtgICtcbiAgICAgICAgYH1gICtcbiAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU30gLiR7Q1VSU09SX0NMQVNTfS4ke0NVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1N9IHtgICtcbiAgICAgICAgYCBib3gtc2hhZG93OiAwIC0xcHggMCAke3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzfSBpbnNldDtgICtcbiAgICAgICAgYH1gO1xuICAgIC8vIFNlbGVjdGlvblxuICAgIHN0eWxlcyArPVxuICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtTRUxFQ1RJT05fQ0xBU1N9IHtgICtcbiAgICAgICAgYCBwb3NpdGlvbjogYWJzb2x1dGU7YCArXG4gICAgICAgIGAgdG9wOiAwO2AgK1xuICAgICAgICBgIGxlZnQ6IDA7YCArXG4gICAgICAgIGAgei1pbmRleDogMTtgICtcbiAgICAgICAgYCBwb2ludGVyLWV2ZW50czogbm9uZTtgICtcbiAgICAgICAgYH1gICtcbiAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7U0VMRUNUSU9OX0NMQVNTfSBkaXYge2AgK1xuICAgICAgICBgIHBvc2l0aW9uOiBhYnNvbHV0ZTtgICtcbiAgICAgICAgYCBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuX2NvbG9ycy5zZWxlY3Rpb24uY3NzfTtgICtcbiAgICAgICAgYH1gO1xuICAgIC8vIENvbG9yc1xuICAgIHRoaXMuX2NvbG9ycy5hbnNpLmZvckVhY2goKGMsIGkpID0+IHtcbiAgICAgIHN0eWxlcyArPVxuICAgICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke0ZHX0NMQVNTX1BSRUZJWH0ke2l9IHsgY29sb3I6ICR7Yy5jc3N9OyB9YCArXG4gICAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7QkdfQ0xBU1NfUFJFRklYfSR7aX0geyBiYWNrZ3JvdW5kLWNvbG9yOiAke2MuY3NzfTsgfWA7XG4gICAgfSk7XG4gICAgc3R5bGVzICs9XG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke0ZHX0NMQVNTX1BSRUZJWH0ke0lOVkVSVEVEX0RFRkFVTFRfQ09MT1J9IHsgY29sb3I6ICR7Y29sb3Iub3BhcXVlKHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kKS5jc3N9OyB9YCArXG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke0JHX0NMQVNTX1BSRUZJWH0ke0lOVkVSVEVEX0RFRkFVTFRfQ09MT1J9IHsgYmFja2dyb3VuZC1jb2xvcjogJHt0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3N9OyB9YDtcblxuICAgIHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50LmlubmVySFRNTCA9IHN0eWxlcztcbiAgfVxuXG4gIHB1YmxpYyBvbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UoKTogdm9pZCB7XG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVmcmVzaFJvd0VsZW1lbnRzKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gQWRkIG1pc3NpbmcgZWxlbWVudHNcbiAgICBmb3IgKGxldCBpID0gdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoOyBpIDw9IHJvd3M7IGkrKykge1xuICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0aGlzLl9yb3dDb250YWluZXIuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgIHRoaXMuX3Jvd0VsZW1lbnRzLnB1c2gocm93KTtcbiAgICB9XG4gICAgLy8gUmVtb3ZlIGV4Y2VzcyBlbGVtZW50c1xuICAgIHdoaWxlICh0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGggPiByb3dzKSB7XG4gICAgICB0aGlzLl9yb3dDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5fcm93RWxlbWVudHMucG9wKCkhKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25SZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9yZWZyZXNoUm93RWxlbWVudHMoY29scywgcm93cyk7XG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICB9XG5cbiAgcHVibGljIG9uQ2hhclNpemVDaGFuZ2VkKCk6IHZvaWQge1xuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkJsdXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoRk9DVVNfQ0xBU1MpO1xuICB9XG5cbiAgcHVibGljIG9uRm9jdXMoKTogdm9pZCB7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoRk9DVVNfQ0xBU1MpO1xuICB9XG5cbiAgcHVibGljIG9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydDogW251bWJlciwgbnVtYmVyXSwgZW5kOiBbbnVtYmVyLCBudW1iZXJdLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuKTogdm9pZCB7XG4gICAgLy8gUmVtb3ZlIGFsbCBzZWxlY3Rpb25zXG4gICAgd2hpbGUgKHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9zZWxlY3Rpb25Db250YWluZXIuY2hpbGRyZW5bMF0pO1xuICAgIH1cblxuICAgIC8vIFNlbGVjdGlvbiBkb2VzIG5vdCBleGlzdFxuICAgIGlmICghc3RhcnQgfHwgIWVuZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRyYW5zbGF0ZSBmcm9tIGJ1ZmZlciBwb3NpdGlvbiB0byB2aWV3cG9ydCBwb3NpdGlvblxuICAgIGNvbnN0IHZpZXdwb3J0U3RhcnRSb3cgPSBzdGFydFsxXSAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO1xuICAgIGNvbnN0IHZpZXdwb3J0RW5kUm93ID0gZW5kWzFdIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7XG4gICAgY29uc3Qgdmlld3BvcnRDYXBwZWRTdGFydFJvdyA9IE1hdGgubWF4KHZpZXdwb3J0U3RhcnRSb3csIDApO1xuICAgIGNvbnN0IHZpZXdwb3J0Q2FwcGVkRW5kUm93ID0gTWF0aC5taW4odmlld3BvcnRFbmRSb3csIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEpO1xuXG4gICAgLy8gTm8gbmVlZCB0byBkcmF3IHRoZSBzZWxlY3Rpb25cbiAgICBpZiAodmlld3BvcnRDYXBwZWRTdGFydFJvdyA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgfHwgdmlld3BvcnRDYXBwZWRFbmRSb3cgPCAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHRoZSBzZWxlY3Rpb25zXG4gICAgY29uc3QgZG9jdW1lbnRGcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgIGlmIChjb2x1bW5TZWxlY3RNb2RlKSB7XG4gICAgICBkb2N1bWVudEZyYWdtZW50LmFwcGVuZENoaWxkKFxuICAgICAgICB0aGlzLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3csIHN0YXJ0WzBdLCBlbmRbMF0sIHZpZXdwb3J0Q2FwcGVkRW5kUm93IC0gdmlld3BvcnRDYXBwZWRTdGFydFJvdyArIDEpXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEcmF3IGZpcnN0IHJvd1xuICAgICAgY29uc3Qgc3RhcnRDb2wgPSB2aWV3cG9ydFN0YXJ0Um93ID09PSB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID8gc3RhcnRbMF0gOiAwO1xuICAgICAgY29uc3QgZW5kQ29sID0gdmlld3BvcnRDYXBwZWRTdGFydFJvdyA9PT0gdmlld3BvcnRDYXBwZWRFbmRSb3cgPyBlbmRbMF0gOiB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICBkb2N1bWVudEZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQodmlld3BvcnRDYXBwZWRTdGFydFJvdywgc3RhcnRDb2wsIGVuZENvbCkpO1xuICAgICAgLy8gRHJhdyBtaWRkbGUgcm93c1xuICAgICAgY29uc3QgbWlkZGxlUm93c0NvdW50ID0gdmlld3BvcnRDYXBwZWRFbmRSb3cgLSB2aWV3cG9ydENhcHBlZFN0YXJ0Um93IC0gMTtcbiAgICAgIGRvY3VtZW50RnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudCh2aWV3cG9ydENhcHBlZFN0YXJ0Um93ICsgMSwgMCwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCBtaWRkbGVSb3dzQ291bnQpKTtcbiAgICAgIC8vIERyYXcgZmluYWwgcm93XG4gICAgICBpZiAodmlld3BvcnRDYXBwZWRTdGFydFJvdyAhPT0gdmlld3BvcnRDYXBwZWRFbmRSb3cpIHtcbiAgICAgICAgLy8gT25seSBkcmF3IHZpZXdwb3J0RW5kUm93IGlmIGl0J3Mgbm90IHRoZSBzYW1lIGFzIHZpZXdwb3J0dGFydFJvd1xuICAgICAgICBjb25zdCBlbmRDb2wgPSB2aWV3cG9ydEVuZFJvdyA9PT0gdmlld3BvcnRDYXBwZWRFbmRSb3cgPyBlbmRbMF0gOiB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICAgIGRvY3VtZW50RnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudCh2aWV3cG9ydENhcHBlZEVuZFJvdywgMCwgZW5kQ29sKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChkb2N1bWVudEZyYWdtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgc2VsZWN0aW9uIGVsZW1lbnQgYXQgdGhlIHNwZWNpZmllZCBwb3NpdGlvbi5cbiAgICogQHBhcmFtIHJvdyBUaGUgcm93IG9mIHRoZSBzZWxlY3Rpb24uXG4gICAqIEBwYXJhbSBjb2xTdGFydCBUaGUgc3RhcnQgY29sdW1uLlxuICAgKiBAcGFyYW0gY29sRW5kIFRoZSBlbmQgY29sdW1ucy5cbiAgICovXG4gIHByaXZhdGUgX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQocm93OiBudW1iZXIsIGNvbFN0YXJ0OiBudW1iZXIsIGNvbEVuZDogbnVtYmVyLCByb3dDb3VudDogbnVtYmVyID0gMSk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHtyb3dDb3VudCAqIHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0fXB4YDtcbiAgICBlbGVtZW50LnN0eWxlLnRvcCA9IGAke3JvdyAqIHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0fXB4YDtcbiAgICBlbGVtZW50LnN0eWxlLmxlZnQgPSBgJHtjb2xTdGFydCAqIHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGh9cHhgO1xuICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHt0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoICogKGNvbEVuZCAtIGNvbFN0YXJ0KX1weGA7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKCk6IHZvaWQge1xuICAgIC8vIE5vLW9wLCB0aGUgY3Vyc29yIGlzIGRyYXduIHdoZW4gcm93cyBhcmUgZHJhd25cbiAgfVxuXG4gIHB1YmxpYyBvbk9wdGlvbnNDaGFuZ2VkKCk6IHZvaWQge1xuICAgIC8vIEZvcmNlIGEgcmVmcmVzaFxuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcbiAgICB0aGlzLl9pbmplY3RDc3MoKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9yb3dFbGVtZW50cy5mb3JFYWNoKGUgPT4gZS5pbm5lckhUTUwgPSAnJyk7XG4gIH1cblxuICBwdWJsaWMgcmVuZGVyUm93cyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGN1cnNvckFic29sdXRlWSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlICsgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueTtcbiAgICBjb25zdCBjdXJzb3JYID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueDtcbiAgICBjb25zdCBjdXJzb3JCbGluayA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yQmxpbms7XG5cbiAgICBmb3IgKGxldCB5ID0gc3RhcnQ7IHkgPD0gZW5kOyB5KyspIHtcbiAgICAgIGNvbnN0IHJvd0VsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50c1t5XTtcbiAgICAgIHJvd0VsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgIGNvbnN0IHJvdyA9IHkgKyB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtcbiAgICAgIGNvbnN0IGxpbmVEYXRhID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KHJvdyk7XG4gICAgICBjb25zdCBjdXJzb3JTdHlsZSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGU7XG4gICAgICByb3dFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3Jvd0ZhY3RvcnkuY3JlYXRlUm93KGxpbmVEYXRhISwgcm93ID09PSBjdXJzb3JBYnNvbHV0ZVksIGN1cnNvclN0eWxlLCBjdXJzb3JYLCBjdXJzb3JCbGluaywgdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX3Rlcm1pbmFsU2VsZWN0b3IoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYC4ke1RFUk1JTkFMX0NMQVNTX1BSRUZJWH0ke3RoaXMuX3Rlcm1pbmFsQ2xhc3N9YDtcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyOiBDaGFyYWN0ZXJKb2luZXJIYW5kbGVyKTogbnVtYmVyIHsgcmV0dXJuIC0xOyB9XG4gIHB1YmxpYyBkZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGpvaW5lcklkOiBudW1iZXIpOiBib29sZWFuIHsgcmV0dXJuIGZhbHNlOyB9XG5cbiAgcHJpdmF0ZSBfb25MaW5rSG92ZXIoZTogSUxpbmtpZmllckV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fc2V0Q2VsbFVuZGVybGluZShlLngxLCBlLngyLCBlLnkxLCBlLnkyLCBlLmNvbHMsIHRydWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfb25MaW5rTGVhdmUoZTogSUxpbmtpZmllckV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fc2V0Q2VsbFVuZGVybGluZShlLngxLCBlLngyLCBlLnkxLCBlLnkyLCBlLmNvbHMsIGZhbHNlKTtcbiAgfVxuXG4gIHByaXZhdGUgX3NldENlbGxVbmRlcmxpbmUoeDogbnVtYmVyLCB4MjogbnVtYmVyLCB5OiBudW1iZXIsIHkyOiBudW1iZXIsIGNvbHM6IG51bWJlciwgZW5hYmxlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIHdoaWxlICh4ICE9PSB4MiB8fCB5ICE9PSB5Mikge1xuICAgICAgY29uc3Qgcm93ID0gdGhpcy5fcm93RWxlbWVudHNbeV07XG4gICAgICBpZiAoIXJvdykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBzcGFuID0gPEhUTUxFbGVtZW50PnJvdy5jaGlsZHJlblt4XTtcbiAgICAgIGlmIChzcGFuKSB7XG4gICAgICAgIHNwYW4uc3R5bGUudGV4dERlY29yYXRpb24gPSBlbmFibGVkID8gJ3VuZGVybGluZScgOiAnbm9uZSc7XG4gICAgICB9XG4gICAgICBpZiAoKyt4ID49IGNvbHMpIHtcbiAgICAgICAgeCA9IDA7XG4gICAgICAgIHkrKztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlckxpbmUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSU5WRVJURURfREVGQVVMVF9DT0xPUiB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQ29uc3RhbnRzJztcbmltcG9ydCB7IE5VTExfQ0VMTF9DT0RFLCBXSElURVNQQUNFX0NFTExfQ0hBUiwgQXR0cmlidXRlcyB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgY29sb3IsIHJnYmEgfSBmcm9tICdicm93c2VyL0NvbG9yJztcbmltcG9ydCB7IElDb2xvclNldCwgSUNvbG9yIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5cbmV4cG9ydCBjb25zdCBCT0xEX0NMQVNTID0gJ3h0ZXJtLWJvbGQnO1xuZXhwb3J0IGNvbnN0IERJTV9DTEFTUyA9ICd4dGVybS1kaW0nO1xuZXhwb3J0IGNvbnN0IElUQUxJQ19DTEFTUyA9ICd4dGVybS1pdGFsaWMnO1xuZXhwb3J0IGNvbnN0IFVOREVSTElORV9DTEFTUyA9ICd4dGVybS11bmRlcmxpbmUnO1xuZXhwb3J0IGNvbnN0IENVUlNPUl9DTEFTUyA9ICd4dGVybS1jdXJzb3InO1xuZXhwb3J0IGNvbnN0IENVUlNPUl9CTElOS19DTEFTUyA9ICd4dGVybS1jdXJzb3ItYmxpbmsnO1xuZXhwb3J0IGNvbnN0IENVUlNPUl9TVFlMRV9CTE9DS19DTEFTUyA9ICd4dGVybS1jdXJzb3ItYmxvY2snO1xuZXhwb3J0IGNvbnN0IENVUlNPUl9TVFlMRV9CQVJfQ0xBU1MgPSAneHRlcm0tY3Vyc29yLWJhcic7XG5leHBvcnQgY29uc3QgQ1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTUyA9ICd4dGVybS1jdXJzb3ItdW5kZXJsaW5lJztcblxuZXhwb3J0IGNsYXNzIERvbVJlbmRlcmVyUm93RmFjdG9yeSB7XG4gIHByaXZhdGUgX3dvcmtDZWxsOiBDZWxsRGF0YSA9IG5ldyBDZWxsRGF0YSgpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2RvY3VtZW50OiBEb2N1bWVudCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlLFxuICAgIHByaXZhdGUgX2NvbG9yczogSUNvbG9yU2V0XG4gICkge1xuICB9XG5cbiAgcHVibGljIHNldENvbG9ycyhjb2xvcnM6IElDb2xvclNldCk6IHZvaWQge1xuICAgIHRoaXMuX2NvbG9ycyA9IGNvbG9ycztcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVSb3cobGluZURhdGE6IElCdWZmZXJMaW5lLCBpc0N1cnNvclJvdzogYm9vbGVhbiwgY3Vyc29yU3R5bGU6IHN0cmluZyB8IHVuZGVmaW5lZCwgY3Vyc29yWDogbnVtYmVyLCBjdXJzb3JCbGluazogYm9vbGVhbiwgY2VsbFdpZHRoOiBudW1iZXIsIGNvbHM6IG51bWJlcik6IERvY3VtZW50RnJhZ21lbnQge1xuICAgIGNvbnN0IGZyYWdtZW50ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgLy8gRmluZCB0aGUgbGluZSBsZW5ndGggZmlyc3QsIHRoaXMgcHJldmVudHMgdGhlIG5lZWQgdG8gb3V0cHV0IGEgYnVuY2ggb2ZcbiAgICAvLyBlbXB0eSBjZWxscyBhdCB0aGUgZW5kLiBUaGlzIGNhbm5vdCBlYXNpbHkgYmUgaW50ZWdyYXRlZCBpbnRvIHRoZSBtYWluXG4gICAgLy8gbG9vcCBiZWxvdyBiZWNhdXNlIG9mIHRoZSBjb2xDb3VudCBmZWF0dXJlICh3aGljaCBjYW4gYmUgcmVtb3ZlZCBhZnRlciB3ZVxuICAgIC8vIHByb3Blcmx5IHN1cHBvcnQgcmVmbG93IGFuZCBkaXNhbGxvdyBkYXRhIHRvIGdvIGJleW9uZCB0aGUgcmlnaHQtc2lkZSBvZlxuICAgIC8vIHRoZSB2aWV3cG9ydCkuXG4gICAgbGV0IGxpbmVMZW5ndGggPSAwO1xuICAgIGZvciAobGV0IHggPSBNYXRoLm1pbihsaW5lRGF0YS5sZW5ndGgsIGNvbHMpIC0gMTsgeCA+PSAwOyB4LS0pIHtcbiAgICAgIGlmIChsaW5lRGF0YS5sb2FkQ2VsbCh4LCB0aGlzLl93b3JrQ2VsbCkuZ2V0Q29kZSgpICE9PSBOVUxMX0NFTExfQ09ERSB8fCAoaXNDdXJzb3JSb3cgJiYgeCA9PT0gY3Vyc29yWCkpIHtcbiAgICAgICAgbGluZUxlbmd0aCA9IHggKyAxO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGxpbmVMZW5ndGg7IHgrKykge1xuICAgICAgbGluZURhdGEubG9hZENlbGwoeCwgdGhpcy5fd29ya0NlbGwpO1xuICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpO1xuXG4gICAgICAvLyBUaGUgY2hhcmFjdGVyIHRvIHRoZSBsZWZ0IGlzIGEgd2lkZSBjaGFyYWN0ZXIsIGRyYXdpbmcgaXMgb3duZWQgYnkgdGhlIGNoYXIgYXQgeC0xXG4gICAgICBpZiAod2lkdGggPT09IDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoYXJFbGVtZW50ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgaWYgKHdpZHRoID4gMSkge1xuICAgICAgICBjaGFyRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke2NlbGxXaWR0aCAqIHdpZHRofXB4YDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQ3Vyc29yUm93ICYmIHggPT09IGN1cnNvclgpIHtcbiAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChDVVJTT1JfQ0xBU1MpO1xuXG4gICAgICAgIGlmIChjdXJzb3JCbGluaykge1xuICAgICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ1VSU09SX0JMSU5LX0NMQVNTKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAoY3Vyc29yU3R5bGUpIHtcbiAgICAgICAgICBjYXNlICdiYXInOlxuICAgICAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChDVVJTT1JfU1RZTEVfQkFSX0NMQVNTKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3VuZGVybGluZSc6XG4gICAgICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKENVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5pc0JvbGQoKSkge1xuICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKEJPTERfQ0xBU1MpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fd29ya0NlbGwuaXNJdGFsaWMoKSkge1xuICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKElUQUxJQ19DTEFTUyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5pc0RpbSgpKSB7XG4gICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoRElNX0NMQVNTKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmlzVW5kZXJsaW5lKCkpIHtcbiAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChVTkRFUkxJTkVfQ0xBU1MpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fd29ya0NlbGwuaXNJbnZpc2libGUoKSkge1xuICAgICAgICBjaGFyRWxlbWVudC50ZXh0Q29udGVudCA9IFdISVRFU1BBQ0VfQ0VMTF9DSEFSO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhckVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpIHx8IFdISVRFU1BBQ0VfQ0VMTF9DSEFSO1xuICAgICAgfVxuXG4gICAgICBsZXQgZmcgPSB0aGlzLl93b3JrQ2VsbC5nZXRGZ0NvbG9yKCk7XG4gICAgICBsZXQgZmdDb2xvck1vZGUgPSB0aGlzLl93b3JrQ2VsbC5nZXRGZ0NvbG9yTW9kZSgpO1xuICAgICAgbGV0IGJnID0gdGhpcy5fd29ya0NlbGwuZ2V0QmdDb2xvcigpO1xuICAgICAgbGV0IGJnQ29sb3JNb2RlID0gdGhpcy5fd29ya0NlbGwuZ2V0QmdDb2xvck1vZGUoKTtcbiAgICAgIGNvbnN0IGlzSW52ZXJzZSA9ICEhdGhpcy5fd29ya0NlbGwuaXNJbnZlcnNlKCk7XG4gICAgICBpZiAoaXNJbnZlcnNlKSB7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBmZztcbiAgICAgICAgZmcgPSBiZztcbiAgICAgICAgYmcgPSB0ZW1wO1xuICAgICAgICBjb25zdCB0ZW1wMiA9IGZnQ29sb3JNb2RlO1xuICAgICAgICBmZ0NvbG9yTW9kZSA9IGJnQ29sb3JNb2RlO1xuICAgICAgICBiZ0NvbG9yTW9kZSA9IHRlbXAyO1xuICAgICAgfVxuXG4gICAgICAvLyBGb3JlZ3JvdW5kXG4gICAgICBzd2l0Y2ggKGZnQ29sb3JNb2RlKSB7XG4gICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMjU2OlxuICAgICAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5pc0JvbGQoKSAmJiBmZyA8IDggJiYgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycykge1xuICAgICAgICAgICAgZmcgKz0gODtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCF0aGlzLl9hcHBseU1pbmltdW1Db250cmFzdChjaGFyRWxlbWVudCwgdGhpcy5fY29sb3JzLmJhY2tncm91bmQsIHRoaXMuX2NvbG9ycy5hbnNpW2ZnXSkpIHtcbiAgICAgICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoYHh0ZXJtLWZnLSR7Zmd9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOlxuICAgICAgICAgIGNvbnN0IGNvbG9yID0gcmdiYS50b0NvbG9yKFxuICAgICAgICAgICAgKGZnID4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICAoZmcgPj4gIDgpICYgMHhGRixcbiAgICAgICAgICAgIChmZyAgICAgICkgJiAweEZGXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoIXRoaXMuX2FwcGx5TWluaW11bUNvbnRyYXN0KGNoYXJFbGVtZW50LCB0aGlzLl9jb2xvcnMuYmFja2dyb3VuZCwgY29sb3IpKSB7XG4gICAgICAgICAgICB0aGlzLl9hZGRTdHlsZShjaGFyRWxlbWVudCwgYGNvbG9yOiMke3BhZFN0YXJ0KGZnLnRvU3RyaW5nKDE2KSwgJzAnLCA2KX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9ERUZBVUxUOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmICghdGhpcy5fYXBwbHlNaW5pbXVtQ29udHJhc3QoY2hhckVsZW1lbnQsIHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLCB0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZCkpIHtcbiAgICAgICAgICAgIGlmIChpc0ludmVyc2UpIHtcbiAgICAgICAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChgeHRlcm0tZmctJHtJTlZFUlRFRF9ERUZBVUxUX0NPTE9SfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQmFja2dyb3VuZFxuICAgICAgc3dpdGNoIChiZ0NvbG9yTW9kZSkge1xuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDE2OlxuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjpcbiAgICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKGB4dGVybS1iZy0ke2JnfWApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOlxuICAgICAgICAgIHRoaXMuX2FkZFN0eWxlKGNoYXJFbGVtZW50LCBgYmFja2dyb3VuZC1jb2xvcjojJHtwYWRTdGFydChiZy50b1N0cmluZygxNiksICcwJywgNil9YCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9ERUZBVUxUOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmIChpc0ludmVyc2UpIHtcbiAgICAgICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoYHh0ZXJtLWJnLSR7SU5WRVJURURfREVGQVVMVF9DT0xPUn1gKTtcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGNoYXJFbGVtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGZyYWdtZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBfYXBwbHlNaW5pbXVtQ29udHJhc3QoZWxlbWVudDogSFRNTEVsZW1lbnQsIGJnOiBJQ29sb3IsIGZnOiBJQ29sb3IpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5taW5pbXVtQ29udHJhc3RSYXRpbyA9PT0gMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFRyeSBnZXQgZnJvbSBjYWNoZSBmaXJzdFxuICAgIGxldCBhZGp1c3RlZENvbG9yID0gdGhpcy5fY29sb3JzLmNvbnRyYXN0Q2FjaGUuZ2V0Q29sb3IodGhpcy5fd29ya0NlbGwuYmcsIHRoaXMuX3dvcmtDZWxsLmZnKTtcblxuICAgIC8vIENhbGN1bGF0ZSBhbmQgc3RvcmUgaW4gY2FjaGVcbiAgICBpZiAoYWRqdXN0ZWRDb2xvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBhZGp1c3RlZENvbG9yID0gY29sb3IuZW5zdXJlQ29udHJhc3RSYXRpbyhiZywgZmcsIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubWluaW11bUNvbnRyYXN0UmF0aW8pO1xuICAgICAgdGhpcy5fY29sb3JzLmNvbnRyYXN0Q2FjaGUuc2V0Q29sb3IodGhpcy5fd29ya0NlbGwuYmcsIHRoaXMuX3dvcmtDZWxsLmZnLCBhZGp1c3RlZENvbG9yID8/IG51bGwpO1xuICAgIH1cblxuICAgIGlmIChhZGp1c3RlZENvbG9yKSB7XG4gICAgICB0aGlzLl9hZGRTdHlsZShlbGVtZW50LCBgY29sb3I6JHthZGp1c3RlZENvbG9yLmNzc31gKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgX2FkZFN0eWxlKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBzdHlsZTogc3RyaW5nKTogdm9pZCB7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYCR7ZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3N0eWxlJykgfHwgJyd9JHtzdHlsZX07YCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFkU3RhcnQodGV4dDogc3RyaW5nLCBwYWRDaGFyOiBzdHJpbmcsIGxlbmd0aDogbnVtYmVyKTogc3RyaW5nIHtcbiAgd2hpbGUgKHRleHQubGVuZ3RoIDwgbGVuZ3RoKSB7XG4gICAgdGV4dCA9IHBhZENoYXIgKyB0ZXh0O1xuICB9XG4gIHJldHVybiB0ZXh0O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIHNlbGVjdGlvbiB3aXRoaW4gdGhlIGJ1ZmZlci4gVGhpcyBtb2RlbCBvbmx5IGNhcmVzIGFib3V0IGNvbHVtblxuICogYW5kIHJvdyBjb29yZGluYXRlcywgbm90IHdpZGUgY2hhcmFjdGVycy5cbiAqL1xuZXhwb3J0IGNsYXNzIFNlbGVjdGlvbk1vZGVsIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgc2VsZWN0IGFsbCBpcyBjdXJyZW50bHkgYWN0aXZlLlxuICAgKi9cbiAgcHVibGljIGlzU2VsZWN0QWxsQWN0aXZlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFRoZSBtaW5pbWFsIGxlbmd0aCBvZiB0aGUgc2VsZWN0aW9uIGZyb20gdGhlIHN0YXJ0IHBvc2l0aW9uLiBXaGVuIGRvdWJsZVxuICAgKiBjbGlja2luZyBvbiBhIHdvcmQsIHRoZSB3b3JkIHdpbGwgYmUgc2VsZWN0ZWQgd2hpY2ggbWFrZXMgdGhlIHNlbGVjdGlvblxuICAgKiBzdGFydCBhdCB0aGUgc3RhcnQgb2YgdGhlIHdvcmQgYW5kIG1ha2VzIHRoaXMgdmFyaWFibGUgdGhlIGxlbmd0aC5cbiAgICovXG4gIHB1YmxpYyBzZWxlY3Rpb25TdGFydExlbmd0aDogbnVtYmVyID0gMDtcblxuICAvKipcbiAgICogVGhlIFt4LCB5XSBwb3NpdGlvbiB0aGUgc2VsZWN0aW9uIHN0YXJ0cyBhdC5cbiAgICovXG4gIHB1YmxpYyBzZWxlY3Rpb25TdGFydDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIFt4LCB5XSBwb3NpdGlvbiB0aGUgc2VsZWN0aW9uIGVuZHMgYXQuXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0aW9uRW5kOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlXG4gICkge1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgY2xlYXJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3Rpb25TdGFydCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNlbGVjdGlvbkVuZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmlzU2VsZWN0QWxsQWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5zZWxlY3Rpb25TdGFydExlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGZpbmFsIHNlbGVjdGlvbiBzdGFydCwgdGFraW5nIGludG8gY29uc2lkZXJhdGlvbiBzZWxlY3QgYWxsLlxuICAgKi9cbiAgcHVibGljIGdldCBmaW5hbFNlbGVjdGlvblN0YXJ0KCk6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmlzU2VsZWN0QWxsQWN0aXZlKSB7XG4gICAgICByZXR1cm4gWzAsIDBdO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5zZWxlY3Rpb25FbmQgfHwgIXRoaXMuc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblN0YXJ0O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCkgPyB0aGlzLnNlbGVjdGlvbkVuZCA6IHRoaXMuc2VsZWN0aW9uU3RhcnQ7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGZpbmFsIHNlbGVjdGlvbiBlbmQsIHRha2luZyBpbnRvIGNvbnNpZGVyYXRpb24gc2VsZWN0IGFsbCwgZG91YmxlIGNsaWNrXG4gICAqIHdvcmQgc2VsZWN0aW9uIGFuZCB0cmlwbGUgY2xpY2sgbGluZSBzZWxlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgZ2V0IGZpbmFsU2VsZWN0aW9uRW5kKCk6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmlzU2VsZWN0QWxsQWN0aXZlKSB7XG4gICAgICByZXR1cm4gW3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgKyB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxXTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gVXNlIHRoZSBzZWxlY3Rpb24gc3RhcnQgKyBsZW5ndGggaWYgdGhlIGVuZCBkb2Vzbid0IGV4aXN0IG9yIHRoZXkncmUgcmV2ZXJzZWRcbiAgICBpZiAoIXRoaXMuc2VsZWN0aW9uRW5kIHx8IHRoaXMuYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKSkge1xuICAgICAgY29uc3Qgc3RhcnRQbHVzTGVuZ3RoID0gdGhpcy5zZWxlY3Rpb25TdGFydFswXSArIHRoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGg7XG4gICAgICBpZiAoc3RhcnRQbHVzTGVuZ3RoID4gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICAgIHJldHVybiBbc3RhcnRQbHVzTGVuZ3RoICUgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLnNlbGVjdGlvblN0YXJ0WzFdICsgTWF0aC5mbG9vcihzdGFydFBsdXNMZW5ndGggLyB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbc3RhcnRQbHVzTGVuZ3RoLCB0aGlzLnNlbGVjdGlvblN0YXJ0WzFdXTtcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgdGhlIHRoZSB3b3JkL2xpbmUgaXMgc2VsZWN0ZWQgYWZ0ZXIgYSBkb3VibGUvdHJpcGxlIGNsaWNrXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGgpIHtcbiAgICAgIC8vIFNlbGVjdCB0aGUgbGFyZ2VyIG9mIHRoZSB0d28gd2hlbiBzdGFydCBhbmQgZW5kIGFyZSBvbiB0aGUgc2FtZSBsaW5lXG4gICAgICBpZiAodGhpcy5zZWxlY3Rpb25FbmRbMV0gPT09IHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0pIHtcbiAgICAgICAgcmV0dXJuIFtNYXRoLm1heCh0aGlzLnNlbGVjdGlvblN0YXJ0WzBdICsgdGhpcy5zZWxlY3Rpb25TdGFydExlbmd0aCwgdGhpcy5zZWxlY3Rpb25FbmRbMF0pLCB0aGlzLnNlbGVjdGlvbkVuZFsxXV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbkVuZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHNlbGVjdGlvbiBzdGFydCBhbmQgZW5kIGFyZSByZXZlcnNlZC5cbiAgICovXG4gIHB1YmxpYyBhcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZCgpOiBib29sZWFuIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuc2VsZWN0aW9uU3RhcnQ7XG4gICAgY29uc3QgZW5kID0gdGhpcy5zZWxlY3Rpb25FbmQ7XG4gICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBzdGFydFsxXSA+IGVuZFsxXSB8fCAoc3RhcnRbMV0gPT09IGVuZFsxXSAmJiBzdGFydFswXSA+IGVuZFswXSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHRoZSBidWZmZXIgYmVpbmcgdHJpbW1lZCwgYWRqdXN0IHRoZSBzZWxlY3Rpb24gcG9zaXRpb24uXG4gICAqIEBwYXJhbSBhbW91bnQgVGhlIGFtb3VudCB0aGUgYnVmZmVyIGlzIGJlaW5nIHRyaW1tZWQuXG4gICAqIEByZXR1cm4gV2hldGhlciBhIHJlZnJlc2ggaXMgbmVjZXNzYXJ5LlxuICAgKi9cbiAgcHVibGljIG9uVHJpbShhbW91bnQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIC8vIEFkanVzdCB0aGUgc2VsZWN0aW9uIHBvc2l0aW9uIGJhc2VkIG9uIHRoZSB0cmltbWVkIGFtb3VudC5cbiAgICBpZiAodGhpcy5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgdGhpcy5zZWxlY3Rpb25TdGFydFsxXSAtPSBhbW91bnQ7XG4gICAgfVxuICAgIGlmICh0aGlzLnNlbGVjdGlvbkVuZCkge1xuICAgICAgdGhpcy5zZWxlY3Rpb25FbmRbMV0gLT0gYW1vdW50O1xuICAgIH1cblxuICAgIC8vIFRoZSBzZWxlY3Rpb24gaGFzIG1vdmVkIG9mZiB0aGUgYnVmZmVyLCBjbGVhciBpdC5cbiAgICBpZiAodGhpcy5zZWxlY3Rpb25FbmQgJiYgdGhpcy5zZWxlY3Rpb25FbmRbMV0gPCAwKSB7XG4gICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc2VsZWN0aW9uIHN0YXJ0IGlzIHRyaW1tZWQsIGVuc3VyZSB0aGUgc3RhcnQgY29sdW1uIGlzIDAuXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uU3RhcnQgJiYgdGhpcy5zZWxlY3Rpb25TdGFydFsxXSA8IDApIHtcbiAgICAgIHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElFdmVudCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBJQ2hhclNpemVTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBDaGFyU2l6ZVNlcnZpY2UgaW1wbGVtZW50cyBJQ2hhclNpemVTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHVibGljIHdpZHRoOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgaGVpZ2h0OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9tZWFzdXJlU3RyYXRlZ3k6IElNZWFzdXJlU3RyYXRlZ3k7XG5cbiAgcHVibGljIGdldCBoYXNWYWxpZFNpemUoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLndpZHRoID4gMCAmJiB0aGlzLmhlaWdodCA+IDA7IH1cblxuICBwcml2YXRlIF9vbkNoYXJTaXplQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBwdWJsaWMgZ2V0IG9uQ2hhclNpemVDaGFuZ2UoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX29uQ2hhclNpemVDaGFuZ2UuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICByZWFkb25seSBkb2N1bWVudDogRG9jdW1lbnQsXG4gICAgcmVhZG9ubHkgcGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgQElPcHRpb25zU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuX21lYXN1cmVTdHJhdGVneSA9IG5ldyBEb21NZWFzdXJlU3RyYXRlZ3koZG9jdW1lbnQsIHBhcmVudEVsZW1lbnQsIHRoaXMuX29wdGlvbnNTZXJ2aWNlKTtcbiAgfVxuXG4gIHB1YmxpYyBtZWFzdXJlKCk6IHZvaWQge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX21lYXN1cmVTdHJhdGVneS5tZWFzdXJlKCk7XG4gICAgaWYgKHJlc3VsdC53aWR0aCAhPT0gdGhpcy53aWR0aCB8fCByZXN1bHQuaGVpZ2h0ICE9PSB0aGlzLmhlaWdodCkge1xuICAgICAgdGhpcy53aWR0aCA9IHJlc3VsdC53aWR0aDtcbiAgICAgIHRoaXMuaGVpZ2h0ID0gcmVzdWx0LmhlaWdodDtcbiAgICAgIHRoaXMuX29uQ2hhclNpemVDaGFuZ2UuZmlyZSgpO1xuICAgIH1cbiAgfVxufVxuXG5pbnRlcmZhY2UgSU1lYXN1cmVTdHJhdGVneSB7XG4gIG1lYXN1cmUoKTogSVJlYWRvbmx5TWVhc3VyZVJlc3VsdDtcbn1cblxuaW50ZXJmYWNlIElSZWFkb25seU1lYXN1cmVSZXN1bHQge1xuICByZWFkb25seSB3aWR0aDogbnVtYmVyO1xuICByZWFkb25seSBoZWlnaHQ6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIElNZWFzdXJlUmVzdWx0IHtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG59XG5cbi8vIFRPRE86IEZvciBzdXBwb3J0aW5nIGJyb3dzZXJzIHdlIHNob3VsZCBhbHNvIHByb3ZpZGUgYSBDYW52YXNDaGFyRGltZW5zaW9uc1Byb3ZpZGVyIHRoYXQgdXNlcyBjdHgubWVhc3VyZVRleHRcbmNsYXNzIERvbU1lYXN1cmVTdHJhdGVneSBpbXBsZW1lbnRzIElNZWFzdXJlU3RyYXRlZ3kge1xuICBwcml2YXRlIF9yZXN1bHQ6IElNZWFzdXJlUmVzdWx0ID0geyB3aWR0aDogMCwgaGVpZ2h0OiAwIH07XG4gIHByaXZhdGUgX21lYXN1cmVFbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9kb2N1bWVudDogRG9jdW1lbnQsXG4gICAgcHJpdmF0ZSBfcGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudCA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCd4dGVybS1jaGFyLW1lYXN1cmUtZWxlbWVudCcpO1xuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50LnRleHRDb250ZW50ID0gJ1cnO1xuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIHRoaXMuX3BhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fbWVhc3VyZUVsZW1lbnQpO1xuICB9XG5cbiAgcHVibGljIG1lYXN1cmUoKTogSVJlYWRvbmx5TWVhc3VyZVJlc3VsdCB7XG4gICAgdGhpcy5fbWVhc3VyZUVsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZm9udEZhbWlseTtcbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGAke3RoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZm9udFNpemV9cHhgO1xuXG4gICAgLy8gTm90ZSB0aGF0IHRoaXMgdHJpZ2dlcnMgYSBzeW5jaHJvbm91cyBsYXlvdXRcbiAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuX21lYXN1cmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgLy8gSWYgdmFsdWVzIGFyZSAwIHRoZW4gdGhlIGVsZW1lbnQgaXMgbGlrZWx5IGN1cnJlbnRseSBkaXNwbGF5Om5vbmUsIGluIHdoaWNoIGNhc2Ugd2Ugc2hvdWxkXG4gICAgLy8gcmV0YWluIHRoZSBwcmV2aW91cyB2YWx1ZS5cbiAgICBpZiAoZ2VvbWV0cnkud2lkdGggIT09IDAgJiYgZ2VvbWV0cnkuaGVpZ2h0ICE9PSAwKSB7XG4gICAgICB0aGlzLl9yZXN1bHQud2lkdGggPSBnZW9tZXRyeS53aWR0aDtcbiAgICAgIHRoaXMuX3Jlc3VsdC5oZWlnaHQgPSBNYXRoLmNlaWwoZ2VvbWV0cnkuaGVpZ2h0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fcmVzdWx0O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDb3JlQnJvd3NlclNlcnZpY2UgfSBmcm9tICcuL1NlcnZpY2VzJztcblxuZXhwb3J0IGNsYXNzIENvcmVCcm93c2VyU2VydmljZSBpbXBsZW1lbnRzIElDb3JlQnJvd3NlclNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF90ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudFxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaXNGb2N1c2VkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSB0aGlzLl90ZXh0YXJlYSAmJiBkb2N1bWVudC5oYXNGb2N1cygpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaGFyU2l6ZVNlcnZpY2UsIElSZW5kZXJTZXJ2aWNlLCBJTW91c2VTZXJ2aWNlIH0gZnJvbSAnLi9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBnZXRDb29yZHMsIGdldFJhd0J5dGVDb29yZHMgfSBmcm9tICdicm93c2VyL2lucHV0L01vdXNlJztcblxuZXhwb3J0IGNsYXNzIE1vdXNlU2VydmljZSBpbXBsZW1lbnRzIElNb3VzZVNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASVJlbmRlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfcmVuZGVyU2VydmljZTogSVJlbmRlclNlcnZpY2UsXG4gICAgQElDaGFyU2l6ZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfY2hhclNpemVTZXJ2aWNlOiBJQ2hhclNpemVTZXJ2aWNlXG4gICkge1xuICB9XG5cbiAgcHVibGljIGdldENvb3JkcyhldmVudDoge2NsaWVudFg6IG51bWJlciwgY2xpZW50WTogbnVtYmVyfSwgZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbENvdW50OiBudW1iZXIsIHJvd0NvdW50OiBudW1iZXIsIGlzU2VsZWN0aW9uPzogYm9vbGVhbik6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBnZXRDb29yZHMoXG4gICAgICBldmVudCxcbiAgICAgIGVsZW1lbnQsXG4gICAgICBjb2xDb3VudCxcbiAgICAgIHJvd0NvdW50LFxuICAgICAgdGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZSxcbiAgICAgIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgsXG4gICAgICB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCxcbiAgICAgIGlzU2VsZWN0aW9uXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRSYXdCeXRlQ29vcmRzKGV2ZW50OiBNb3VzZUV2ZW50LCBlbGVtZW50OiBIVE1MRWxlbWVudCwgY29sQ291bnQ6IG51bWJlciwgcm93Q291bnQ6IG51bWJlcik6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgY29vcmRzID0gdGhpcy5nZXRDb29yZHMoZXZlbnQsIGVsZW1lbnQsIGNvbENvdW50LCByb3dDb3VudCk7XG4gICAgcmV0dXJuIGdldFJhd0J5dGVDb29yZHMoY29vcmRzKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJUmVuZGVyZXIsIElSZW5kZXJEaW1lbnNpb25zLCBDaGFyYWN0ZXJKb2luZXJIYW5kbGVyIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBSZW5kZXJEZWJvdW5jZXIgfSBmcm9tICdicm93c2VyL1JlbmRlckRlYm91bmNlcic7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgU2NyZWVuRHByTW9uaXRvciB9IGZyb20gJ2Jyb3dzZXIvU2NyZWVuRHByTW9uaXRvcic7XG5pbXBvcnQgeyBhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIgfSBmcm9tICdicm93c2VyL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJQ29sb3JTZXQgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJQ2hhclNpemVTZXJ2aWNlLCBJUmVuZGVyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuXG5leHBvcnQgY2xhc3MgUmVuZGVyU2VydmljZSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJUmVuZGVyU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHByaXZhdGUgX3JlbmRlckRlYm91bmNlcjogUmVuZGVyRGVib3VuY2VyO1xuICBwcml2YXRlIF9zY3JlZW5EcHJNb25pdG9yOiBTY3JlZW5EcHJNb25pdG9yO1xuXG4gIHByaXZhdGUgX2lzUGF1c2VkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX25lZWRzRnVsbFJlZnJlc2g6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfY2FudmFzV2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2NhbnZhc0hlaWdodDogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIF9vbkRpbWVuc2lvbnNDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPElSZW5kZXJEaW1lbnNpb25zPigpO1xuICBwdWJsaWMgZ2V0IG9uRGltZW5zaW9uc0NoYW5nZSgpOiBJRXZlbnQ8SVJlbmRlckRpbWVuc2lvbnM+IHsgcmV0dXJuIHRoaXMuX29uRGltZW5zaW9uc0NoYW5nZS5ldmVudDsgfVxuICBwcml2YXRlIF9vblJlbmRlciA9IG5ldyBFdmVudEVtaXR0ZXI8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PigpO1xuICBwdWJsaWMgZ2V0IG9uUmVuZGVyKCk6IElFdmVudDx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+IHsgcmV0dXJuIHRoaXMuX29uUmVuZGVyLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uUmVmcmVzaFJlcXVlc3QgPSBuZXcgRXZlbnRFbWl0dGVyPHsgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIgfT4oKTtcbiAgcHVibGljIGdldCBvblJlZnJlc2hSZXF1ZXN0KCk6IElFdmVudDx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+IHsgcmV0dXJuIHRoaXMuX29uUmVmcmVzaFJlcXVlc3QuZXZlbnQ7IH1cblxuICBwdWJsaWMgZ2V0IGRpbWVuc2lvbnMoKTogSVJlbmRlckRpbWVuc2lvbnMgeyByZXR1cm4gdGhpcy5fcmVuZGVyZXIuZGltZW5zaW9uczsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX3JlbmRlcmVyOiBJUmVuZGVyZXIsXG4gICAgcHJpdmF0ZSBfcm93Q291bnQ6IG51bWJlcixcbiAgICByZWFkb25seSBzY3JlZW5FbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHJlYWRvbmx5IG9wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgQElDaGFyU2l6ZVNlcnZpY2UgcmVhZG9ubHkgY2hhclNpemVTZXJ2aWNlOiBJQ2hhclNpemVTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fcmVuZGVyRGVib3VuY2VyID0gbmV3IFJlbmRlckRlYm91bmNlcigoc3RhcnQsIGVuZCkgPT4gdGhpcy5fcmVuZGVyUm93cyhzdGFydCwgZW5kKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJEZWJvdW5jZXIpO1xuXG4gICAgdGhpcy5fc2NyZWVuRHByTW9uaXRvciA9IG5ldyBTY3JlZW5EcHJNb25pdG9yKCk7XG4gICAgdGhpcy5fc2NyZWVuRHByTW9uaXRvci5zZXRMaXN0ZW5lcigoKSA9PiB0aGlzLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3NjcmVlbkRwck1vbml0b3IpO1xuXG4gICAgdGhpcy5yZWdpc3RlcihvcHRpb25zU2VydmljZS5vbk9wdGlvbkNoYW5nZSgoKSA9PiB0aGlzLl9yZW5kZXJlci5vbk9wdGlvbnNDaGFuZ2VkKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGNoYXJTaXplU2VydmljZS5vbkNoYXJTaXplQ2hhbmdlKCgpID0+IHRoaXMub25DaGFyU2l6ZUNoYW5nZWQoKSkpO1xuXG4gICAgLy8gTm8gbmVlZCB0byByZWdpc3RlciB0aGlzIGFzIHJlbmRlcmVyIGlzIGV4cGxpY2l0bHkgZGlzcG9zZWQgaW4gUmVuZGVyU2VydmljZS5kaXNwb3NlXG4gICAgdGhpcy5fcmVuZGVyZXIub25SZXF1ZXN0UmVmcmVzaFJvd3MoZSA9PiB0aGlzLnJlZnJlc2hSb3dzKGUuc3RhcnQsIGUuZW5kKSk7XG5cbiAgICAvLyBkcHJjaGFuZ2Ugc2hvdWxkIGhhbmRsZSB0aGlzIGNhc2UsIHdlIG5lZWQgdGhpcyBhcyB3ZWxsIGZvciBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgdGhlXG4gICAgLy8gbWF0Y2hNZWRpYSBxdWVyeS5cbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih3aW5kb3csICdyZXNpemUnLCAoKSA9PiB0aGlzLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpKSk7XG5cbiAgICAvLyBEZXRlY3Qgd2hldGhlciBJbnRlcnNlY3Rpb25PYnNlcnZlciBpcyBkZXRlY3RlZCBhbmQgZW5hYmxlIHJlbmRlcmVyIHBhdXNlXG4gICAgLy8gYW5kIHJlc3VtZSBiYXNlZCBvbiB0ZXJtaW5hbCB2aXNpYmlsaXR5IGlmIHNvXG4gICAgaWYgKCdJbnRlcnNlY3Rpb25PYnNlcnZlcicgaW4gd2luZG93KSB7XG4gICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihlID0+IHRoaXMuX29uSW50ZXJzZWN0aW9uQ2hhbmdlKGVbZS5sZW5ndGggLSAxXSksIHsgdGhyZXNob2xkOiAwIH0pO1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShzY3JlZW5FbGVtZW50KTtcbiAgICAgIHRoaXMucmVnaXN0ZXIoeyBkaXNwb3NlOiAoKSA9PiBvYnNlcnZlci5kaXNjb25uZWN0KCkgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25JbnRlcnNlY3Rpb25DaGFuZ2UoZW50cnk6IEludGVyc2VjdGlvbk9ic2VydmVyRW50cnkpOiB2b2lkIHtcbiAgICB0aGlzLl9pc1BhdXNlZCA9IGVudHJ5LmludGVyc2VjdGlvblJhdGlvID09PSAwO1xuICAgIGlmICghdGhpcy5faXNQYXVzZWQgJiYgdGhpcy5fbmVlZHNGdWxsUmVmcmVzaCkge1xuICAgICAgdGhpcy5yZWZyZXNoUm93cygwLCB0aGlzLl9yb3dDb3VudCAtIDEpO1xuICAgICAgdGhpcy5fbmVlZHNGdWxsUmVmcmVzaCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZWZyZXNoUm93cyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9pc1BhdXNlZCkge1xuICAgICAgdGhpcy5fbmVlZHNGdWxsUmVmcmVzaCA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3JlbmRlckRlYm91bmNlci5yZWZyZXNoKHN0YXJ0LCBlbmQsIHRoaXMuX3Jvd0NvdW50KTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlclJvd3Moc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJlci5yZW5kZXJSb3dzKHN0YXJ0LCBlbmQpO1xuICAgIHRoaXMuX29uUmVuZGVyLmZpcmUoeyBzdGFydCwgZW5kIH0pO1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3Jvd0NvdW50ID0gcm93cztcbiAgICB0aGlzLl9maXJlT25DYW52YXNSZXNpemUoKTtcbiAgfVxuXG4gIHB1YmxpYyBjaGFuZ2VPcHRpb25zKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLm9uT3B0aW9uc0NoYW5nZWQoKTtcbiAgICB0aGlzLnJlZnJlc2hSb3dzKDAsIHRoaXMuX3Jvd0NvdW50IC0gMSk7XG4gICAgdGhpcy5fZmlyZU9uQ2FudmFzUmVzaXplKCk7XG4gIH1cblxuICBwcml2YXRlIF9maXJlT25DYW52YXNSZXNpemUoKTogdm9pZCB7XG4gICAgLy8gRG9uJ3QgZmlyZSB0aGUgZXZlbnQgaWYgdGhlIGRpbWVuc2lvbnMgaGF2ZW4ndCBjaGFuZ2VkXG4gICAgaWYgKHRoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnMuY2FudmFzV2lkdGggPT09IHRoaXMuX2NhbnZhc1dpZHRoICYmIHRoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0ID09PSB0aGlzLl9jYW52YXNIZWlnaHQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fb25EaW1lbnNpb25zQ2hhbmdlLmZpcmUodGhpcy5fcmVuZGVyZXIuZGltZW5zaW9ucyk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJlci5kaXNwb3NlKCk7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG5cbiAgcHVibGljIHNldFJlbmRlcmVyKHJlbmRlcmVyOiBJUmVuZGVyZXIpOiB2b2lkIHtcbiAgICAvLyBUT0RPOiBSZW5kZXJTZXJ2aWNlIHNob3VsZCBiZSB0aGUgb25seSBvbmUgdG8gZGlzcG9zZSB0aGUgcmVuZGVyZXJcbiAgICB0aGlzLl9yZW5kZXJlci5kaXNwb3NlKCk7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9yZW5kZXJlci5vblJlcXVlc3RSZWZyZXNoUm93cyhlID0+IHRoaXMucmVmcmVzaFJvd3MoZS5zdGFydCwgZS5lbmQpKTtcbiAgICB0aGlzLnJlZnJlc2hSb3dzKDAsIHRoaXMuX3Jvd0NvdW50IC0gMSk7XG4gIH1cblxuICBwcml2YXRlIF9mdWxsUmVmcmVzaCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faXNQYXVzZWQpIHtcbiAgICAgIHRoaXMuX25lZWRzRnVsbFJlZnJlc2ggPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlZnJlc2hSb3dzKDAsIHRoaXMuX3Jvd0NvdW50IC0gMSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNldENvbG9ycyhjb2xvcnM6IElDb2xvclNldCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLnNldENvbG9ycyhjb2xvcnMpO1xuICAgIHRoaXMuX2Z1bGxSZWZyZXNoKCk7XG4gIH1cblxuICBwdWJsaWMgb25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpO1xuICAgIHRoaXMucmVmcmVzaFJvd3MoMCwgdGhpcy5fcm93Q291bnQgLSAxKTtcbiAgfVxuXG4gIHB1YmxpYyBvblJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLm9uUmVzaXplKGNvbHMsIHJvd3MpO1xuICAgIHRoaXMuX2Z1bGxSZWZyZXNoKCk7XG4gIH1cblxuICAvLyBUT0RPOiBJcyB0aGlzIHVzZWZ1bCB3aGVuIHdlIGhhdmUgb25SZXNpemU/XG4gIHB1YmxpYyBvbkNoYXJTaXplQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJlci5vbkNoYXJTaXplQ2hhbmdlZCgpO1xuICB9XG5cbiAgcHVibGljIG9uQmx1cigpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJlci5vbkJsdXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkZvY3VzKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLm9uRm9jdXMoKTtcbiAgfVxuXG4gIHB1YmxpYyBvblNlbGVjdGlvbkNoYW5nZWQoc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0sIGVuZDogW251bWJlciwgbnVtYmVyXSwgY29sdW1uU2VsZWN0TW9kZTogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLm9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydCwgZW5kLCBjb2x1bW5TZWxlY3RNb2RlKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkN1cnNvck1vdmUoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIub25DdXJzb3JNb3ZlKCk7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIuY2xlYXIoKTtcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyOiBDaGFyYWN0ZXJKb2luZXJIYW5kbGVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fcmVuZGVyZXIucmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoaGFuZGxlcik7XG4gIH1cblxuICBwdWJsaWMgZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVyLmRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoam9pbmVySWQpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElTZWxlY3Rpb25SZWRyYXdSZXF1ZXN0RXZlbnQgfSBmcm9tICdicm93c2VyL3NlbGVjdGlvbi9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyTGluZSwgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0ICogYXMgQnJvd3NlciBmcm9tICdjb21tb24vUGxhdGZvcm0nO1xuaW1wb3J0IHsgU2VsZWN0aW9uTW9kZWwgfSBmcm9tICdicm93c2VyL3NlbGVjdGlvbi9TZWxlY3Rpb25Nb2RlbCc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IElDaGFyU2l6ZVNlcnZpY2UsIElNb3VzZVNlcnZpY2UsIElTZWxlY3Rpb25TZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlLCBJQ29yZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQgfSBmcm9tICdicm93c2VyL2lucHV0L01vdXNlJztcbmltcG9ydCB7IG1vdmVUb0NlbGxTZXF1ZW5jZSB9IGZyb20gJ2Jyb3dzZXIvaW5wdXQvTW92ZVRvQ2VsbCc7XG5cbi8qKlxuICogVGhlIG51bWJlciBvZiBwaXhlbHMgdGhlIG1vdXNlIG5lZWRzIHRvIGJlIGFib3ZlIG9yIGJlbG93IHRoZSB2aWV3cG9ydCBpblxuICogb3JkZXIgdG8gc2Nyb2xsIGF0IHRoZSBtYXhpbXVtIHNwZWVkLlxuICovXG5jb25zdCBEUkFHX1NDUk9MTF9NQVhfVEhSRVNIT0xEID0gNTA7XG5cbi8qKlxuICogVGhlIG1heGltdW0gc2Nyb2xsaW5nIHNwZWVkXG4gKi9cbmNvbnN0IERSQUdfU0NST0xMX01BWF9TUEVFRCA9IDE1O1xuXG4vKipcbiAqIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gZHJhZyBzY3JvbGwgdXBkYXRlcy5cbiAqL1xuY29uc3QgRFJBR19TQ1JPTExfSU5URVJWQUwgPSA1MDtcblxuLyoqXG4gKiBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSB0aGF0IGNhbiBoYXZlIGVsYXBzZWQgZm9yIGFuIGFsdCBjbGljayB0byBtb3ZlIHRoZVxuICogY3Vyc29yLlxuICovXG5jb25zdCBBTFRfQ0xJQ0tfTU9WRV9DVVJTT1JfVElNRSA9IDUwMDtcblxuY29uc3QgTk9OX0JSRUFLSU5HX1NQQUNFX0NIQVIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDE2MCk7XG5jb25zdCBBTExfTk9OX0JSRUFLSU5HX1NQQUNFX1JFR0VYID0gbmV3IFJlZ0V4cChOT05fQlJFQUtJTkdfU1BBQ0VfQ0hBUiwgJ2cnKTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgcG9zaXRpb24gb2YgYSB3b3JkIG9uIGEgbGluZS5cbiAqL1xuaW50ZXJmYWNlIElXb3JkUG9zaXRpb24ge1xuICBzdGFydDogbnVtYmVyO1xuICBsZW5ndGg6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBBIHNlbGVjdGlvbiBtb2RlLCB0aGlzIGRyaXZlcyBob3cgdGhlIHNlbGVjdGlvbiBiZWhhdmVzIG9uIG1vdXNlIG1vdmUuXG4gKi9cbmV4cG9ydCBjb25zdCBlbnVtIFNlbGVjdGlvbk1vZGUge1xuICBOT1JNQUwsXG4gIFdPUkQsXG4gIExJTkUsXG4gIENPTFVNTlxufVxuXG4vKipcbiAqIEEgY2xhc3MgdGhhdCBtYW5hZ2VzIHRoZSBzZWxlY3Rpb24gb2YgdGhlIHRlcm1pbmFsLiBXaXRoIGhlbHAgZnJvbVxuICogU2VsZWN0aW9uTW9kZWwsIFNlbGVjdGlvblNlcnZpY2UgaGFuZGxlcyB3aXRoIGFsbCBsb2dpYyBhc3NvY2lhdGVkIHdpdGhcbiAqIGRlYWxpbmcgd2l0aCB0aGUgc2VsZWN0aW9uLCBpbmNsdWRpbmcgaGFuZGxpbmcgbW91c2UgaW50ZXJhY3Rpb24sIHdpZGVcbiAqIGNoYXJhY3RlcnMgYW5kIGZldGNoaW5nIHRoZSBhY3R1YWwgdGV4dCB3aXRoaW4gdGhlIHNlbGVjdGlvbi4gUmVuZGVyaW5nIGlzXG4gKiBub3QgaGFuZGxlZCBieSB0aGUgU2VsZWN0aW9uU2VydmljZSBidXQgdGhlIG9uUmVkcmF3UmVxdWVzdCBldmVudCBpcyBmaXJlZFxuICogd2hlbiB0aGUgc2VsZWN0aW9uIGlzIHJlYWR5IHRvIGJlIHJlZHJhd24gKG9uIGFuIGFuaW1hdGlvbiBmcmFtZSkuXG4gKi9cbmV4cG9ydCBjbGFzcyBTZWxlY3Rpb25TZXJ2aWNlIGltcGxlbWVudHMgSVNlbGVjdGlvblNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwcm90ZWN0ZWQgX21vZGVsOiBTZWxlY3Rpb25Nb2RlbDtcblxuICAvKipcbiAgICogVGhlIGFtb3VudCB0byBzY3JvbGwgZXZlcnkgZHJhZyBzY3JvbGwgdXBkYXRlIChkZXBlbmRzIG9uIGhvdyBmYXIgdGhlIG1vdXNlXG4gICAqIGRyYWcgaXMgYWJvdmUgb3IgYmVsb3cgdGhlIHRlcm1pbmFsKS5cbiAgICovXG4gIHByaXZhdGUgX2RyYWdTY3JvbGxBbW91bnQ6IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHNlbGVjdGlvbiBtb2RlLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9hY3RpdmVTZWxlY3Rpb25Nb2RlOiBTZWxlY3Rpb25Nb2RlO1xuXG4gIC8qKlxuICAgKiBBIHNldEludGVydmFsIHRpbWVyIHRoYXQgaXMgYWN0aXZlIHdoaWxlIHRoZSBtb3VzZSBpcyBkb3duIHdob3NlIGNhbGxiYWNrXG4gICAqIHNjcm9sbHMgdGhlIHZpZXdwb3J0IHdoZW4gbmVjZXNzYXJ5LlxuICAgKi9cbiAgcHJpdmF0ZSBfZHJhZ1Njcm9sbEludGVydmFsVGltZXI6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGFuaW1hdGlvbiBmcmFtZSBJRCB1c2VkIGZvciByZWZyZXNoaW5nIHRoZSBzZWxlY3Rpb24uXG4gICAqL1xuICBwcml2YXRlIF9yZWZyZXNoQW5pbWF0aW9uRnJhbWU6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogV2hldGhlciBzZWxlY3Rpb24gaXMgZW5hYmxlZC5cbiAgICovXG4gIHByaXZhdGUgX2VuYWJsZWQgPSB0cnVlO1xuXG4gIHByaXZhdGUgX21vdXNlTW92ZUxpc3RlbmVyOiBFdmVudExpc3RlbmVyO1xuICBwcml2YXRlIF9tb3VzZVVwTGlzdGVuZXI6IEV2ZW50TGlzdGVuZXI7XG4gIHByaXZhdGUgX3RyaW1MaXN0ZW5lcjogSURpc3Bvc2FibGU7XG4gIHByaXZhdGUgX3dvcmtDZWxsOiBDZWxsRGF0YSA9IG5ldyBDZWxsRGF0YSgpO1xuXG4gIHByaXZhdGUgX21vdXNlRG93blRpbWVTdGFtcDogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIF9vbkxpbnV4TW91c2VTZWxlY3Rpb24gPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcbiAgcHVibGljIGdldCBvbkxpbnV4TW91c2VTZWxlY3Rpb24oKTogSUV2ZW50PHN0cmluZz4geyByZXR1cm4gdGhpcy5fb25MaW51eE1vdXNlU2VsZWN0aW9uLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uUmVkcmF3UmVxdWVzdCA9IG5ldyBFdmVudEVtaXR0ZXI8SVNlbGVjdGlvblJlZHJhd1JlcXVlc3RFdmVudD4oKTtcbiAgcHVibGljIGdldCBvblJlZHJhd1JlcXVlc3QoKTogSUV2ZW50PElTZWxlY3Rpb25SZWRyYXdSZXF1ZXN0RXZlbnQ+IHsgcmV0dXJuIHRoaXMuX29uUmVkcmF3UmVxdWVzdC5ldmVudDsgfVxuICBwcml2YXRlIF9vblNlbGVjdGlvbkNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvblNlbGVjdGlvbkNoYW5nZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zY3JvbGxMaW5lczogKGFtb3VudDogbnVtYmVyLCBzdXBwcmVzc0V2ZW50OiBib29sZWFuKSA9PiB2b2lkLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2VsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NjcmVlbkVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIEBJQ2hhclNpemVTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NoYXJTaXplU2VydmljZTogSUNoYXJTaXplU2VydmljZSxcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgQElDb3JlU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlLFxuICAgIEBJTW91c2VTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX21vdXNlU2VydmljZTogSU1vdXNlU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2VcbiAgKSB7XG4gICAgLy8gSW5pdCBsaXN0ZW5lcnNcbiAgICB0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lciA9IGV2ZW50ID0+IHRoaXMuX29uTW91c2VNb3ZlKDxNb3VzZUV2ZW50PmV2ZW50KTtcbiAgICB0aGlzLl9tb3VzZVVwTGlzdGVuZXIgPSBldmVudCA9PiB0aGlzLl9vbk1vdXNlVXAoPE1vdXNlRXZlbnQ+ZXZlbnQpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLm9uVXNlcklucHV0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmhhc1NlbGVjdGlvbikge1xuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fdHJpbUxpc3RlbmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMub25UcmltKGFtb3VudCA9PiB0aGlzLl9vblRyaW0oYW1vdW50KSk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoZSA9PiB0aGlzLl9vbkJ1ZmZlckFjdGl2YXRlKGUpKTtcblxuICAgIHRoaXMuZW5hYmxlKCk7XG5cbiAgICB0aGlzLl9tb2RlbCA9IG5ldyBTZWxlY3Rpb25Nb2RlbCh0aGlzLl9idWZmZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlID0gU2VsZWN0aW9uTW9kZS5OT1JNQUw7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gIH1cblxuICAvKipcbiAgICogRGlzYWJsZXMgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyLiBUaGlzIGlzIHVzZWZ1bCBmb3Igd2hlbiB0ZXJtaW5hbCBtb3VzZVxuICAgKiBhcmUgZW5hYmxlZC5cbiAgICovXG4gIHB1YmxpYyBkaXNhYmxlKCk6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlIHRoZSBzZWxlY3Rpb24gbWFuYWdlci5cbiAgICovXG4gIHB1YmxpYyBlbmFibGUoKTogdm9pZCB7XG4gICAgdGhpcy5fZW5hYmxlZCA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHNlbGVjdGlvblN0YXJ0KCk6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQgeyByZXR1cm4gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydDsgfVxuICBwdWJsaWMgZ2V0IHNlbGVjdGlvbkVuZCgpOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHsgcmV0dXJuIHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kOyB9XG5cbiAgLyoqXG4gICAqIEdldHMgd2hldGhlciB0aGVyZSBpcyBhbiBhY3RpdmUgdGV4dCBzZWxlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgZ2V0IGhhc1NlbGVjdGlvbigpOiBib29sZWFuIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQ7XG4gICAgY29uc3QgZW5kID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7XG4gICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBzdGFydFswXSAhPT0gZW5kWzBdIHx8IHN0YXJ0WzFdICE9PSBlbmRbMV07XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdGV4dCBjdXJyZW50bHkgc2VsZWN0ZWQuXG4gICAqL1xuICBwdWJsaWMgZ2V0IHNlbGVjdGlvblRleHQoKTogc3RyaW5nIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQ7XG4gICAgY29uc3QgZW5kID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7XG4gICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgPT09IFNlbGVjdGlvbk1vZGUuQ09MVU1OKSB7XG4gICAgICAvLyBJZ25vcmUgemVybyB3aWR0aCBzZWxlY3Rpb25zXG4gICAgICBpZiAoc3RhcnRbMF0gPT09IGVuZFswXSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSBzdGFydFsxXTsgaSA8PSBlbmRbMV07IGkrKykge1xuICAgICAgICBjb25zdCBsaW5lVGV4dCA9IGJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoaSwgdHJ1ZSwgc3RhcnRbMF0sIGVuZFswXSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKGxpbmVUZXh0KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gR2V0IGZpcnN0IHJvd1xuICAgICAgY29uc3Qgc3RhcnRSb3dFbmRDb2wgPSBzdGFydFsxXSA9PT0gZW5kWzFdID8gZW5kWzBdIDogdW5kZWZpbmVkO1xuICAgICAgcmVzdWx0LnB1c2goYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhzdGFydFsxXSwgdHJ1ZSwgc3RhcnRbMF0sIHN0YXJ0Um93RW5kQ29sKSk7XG5cbiAgICAgIC8vIEdldCBtaWRkbGUgcm93c1xuICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0WzFdICsgMTsgaSA8PSBlbmRbMV0gLSAxOyBpKyspIHtcbiAgICAgICAgY29uc3QgYnVmZmVyTGluZSA9IGJ1ZmZlci5saW5lcy5nZXQoaSk7XG4gICAgICAgIGNvbnN0IGxpbmVUZXh0ID0gYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhpLCB0cnVlKTtcbiAgICAgICAgaWYgKGJ1ZmZlckxpbmUgJiYgYnVmZmVyTGluZS5pc1dyYXBwZWQpIHtcbiAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdICs9IGxpbmVUZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGxpbmVUZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBHZXQgZmluYWwgcm93XG4gICAgICBpZiAoc3RhcnRbMV0gIT09IGVuZFsxXSkge1xuICAgICAgICBjb25zdCBidWZmZXJMaW5lID0gYnVmZmVyLmxpbmVzLmdldChlbmRbMV0pO1xuICAgICAgICBjb25zdCBsaW5lVGV4dCA9IGJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoZW5kWzFdLCB0cnVlLCAwLCBlbmRbMF0pO1xuICAgICAgICBpZiAoYnVmZmVyTGluZSAmJiBidWZmZXJMaW5lIS5pc1dyYXBwZWQpIHtcbiAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdICs9IGxpbmVUZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGxpbmVUZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvcm1hdCBzdHJpbmcgYnkgcmVwbGFjaW5nIG5vbi1icmVha2luZyBzcGFjZSBjaGFycyB3aXRoIHJlZ3VsYXIgc3BhY2VzXG4gICAgLy8gYW5kIGpvaW5pbmcgdGhlIGFycmF5IGludG8gYSBtdWx0aS1saW5lIHN0cmluZy5cbiAgICBjb25zdCBmb3JtYXR0ZWRSZXN1bHQgPSByZXN1bHQubWFwKGxpbmUgPT4ge1xuICAgICAgcmV0dXJuIGxpbmUucmVwbGFjZShBTExfTk9OX0JSRUFLSU5HX1NQQUNFX1JFR0VYLCAnICcpO1xuICAgIH0pLmpvaW4oQnJvd3Nlci5pc1dpbmRvd3MgPyAnXFxyXFxuJyA6ICdcXG4nKTtcblxuICAgIHJldHVybiBmb3JtYXR0ZWRSZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBjdXJyZW50IHRlcm1pbmFsIHNlbGVjdGlvbi5cbiAgICovXG4gIHB1YmxpYyBjbGVhclNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLl9tb2RlbC5jbGVhclNlbGVjdGlvbigpO1xuICAgIHRoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWV1ZXMgYSByZWZyZXNoLCByZWRyYXdpbmcgdGhlIHNlbGVjdGlvbiBvbiB0aGUgbmV4dCBvcHBvcnR1bml0eS5cbiAgICogQHBhcmFtIGlzTGludXhNb3VzZVNlbGVjdGlvbiBXaGV0aGVyIHRoZSBzZWxlY3Rpb24gc2hvdWxkIGJlIHJlZ2lzdGVyZWQgYXMgYSBuZXdcbiAgICogc2VsZWN0aW9uIG9uIExpbnV4LlxuICAgKi9cbiAgcHVibGljIHJlZnJlc2goaXNMaW51eE1vdXNlU2VsZWN0aW9uPzogYm9vbGVhbik6IHZvaWQge1xuICAgIC8vIFF1ZXVlIHRoZSByZWZyZXNoIGZvciB0aGUgcmVuZGVyZXJcbiAgICBpZiAoIXRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSkge1xuICAgICAgdGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLl9yZWZyZXNoKCkpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBwbGF0Zm9ybSBpcyBMaW51eCBhbmQgdGhlIHJlZnJlc2ggY2FsbCBjb21lcyBmcm9tIGEgbW91c2UgZXZlbnQsXG4gICAgLy8gd2UgbmVlZCB0byB1cGRhdGUgdGhlIHNlbGVjdGlvbiBmb3IgbWlkZGxlIGNsaWNrIHRvIHBhc3RlIHNlbGVjdGlvbi5cbiAgICBpZiAoQnJvd3Nlci5pc0xpbnV4ICYmIGlzTGludXhNb3VzZVNlbGVjdGlvbikge1xuICAgICAgY29uc3Qgc2VsZWN0aW9uVGV4dCA9IHRoaXMuc2VsZWN0aW9uVGV4dDtcbiAgICAgIGlmIChzZWxlY3Rpb25UZXh0Lmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9vbkxpbnV4TW91c2VTZWxlY3Rpb24uZmlyZSh0aGlzLnNlbGVjdGlvblRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlcyB0aGUgcmVmcmVzaCBldmVudCwgY2F1c2luZyBjb25zdW1lcnMgdG8gcGljayBpdCB1cCBhbmQgcmVkcmF3IHRoZVxuICAgKiBzZWxlY3Rpb24gc3RhdGUuXG4gICAqL1xuICBwcml2YXRlIF9yZWZyZXNoKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9vblJlZHJhd1JlcXVlc3QuZmlyZSh7XG4gICAgICBzdGFydDogdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydCxcbiAgICAgIGVuZDogdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQsXG4gICAgICBjb2x1bW5TZWxlY3RNb2RlOiB0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlID09PSBTZWxlY3Rpb25Nb2RlLkNPTFVNTlxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCBjbGljayB3YXMgaW5zaWRlIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50XG4gICAqL1xuICBwdWJsaWMgaXNDbGlja0luU2VsZWN0aW9uKGV2ZW50OiBNb3VzZUV2ZW50KTogYm9vbGVhbiB7XG4gICAgY29uc3QgY29vcmRzID0gdGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQpO1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydDtcbiAgICBjb25zdCBlbmQgPSB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZDtcblxuICAgIGlmICghc3RhcnQgfHwgIWVuZCB8fCAhY29vcmRzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2FyZUNvb3Jkc0luU2VsZWN0aW9uKGNvb3Jkcywgc3RhcnQsIGVuZCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2FyZUNvb3Jkc0luU2VsZWN0aW9uKGNvb3JkczogW251bWJlciwgbnVtYmVyXSwgc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0sIGVuZDogW251bWJlciwgbnVtYmVyXSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoY29vcmRzWzFdID4gc3RhcnRbMV0gJiYgY29vcmRzWzFdIDwgZW5kWzFdKSB8fFxuICAgICAgICAoc3RhcnRbMV0gPT09IGVuZFsxXSAmJiBjb29yZHNbMV0gPT09IHN0YXJ0WzFdICYmIGNvb3Jkc1swXSA+PSBzdGFydFswXSAmJiBjb29yZHNbMF0gPCBlbmRbMF0pIHx8XG4gICAgICAgIChzdGFydFsxXSA8IGVuZFsxXSAmJiBjb29yZHNbMV0gPT09IGVuZFsxXSAmJiBjb29yZHNbMF0gPCBlbmRbMF0pIHx8XG4gICAgICAgIChzdGFydFsxXSA8IGVuZFsxXSAmJiBjb29yZHNbMV0gPT09IHN0YXJ0WzFdICYmIGNvb3Jkc1swXSA+PSBzdGFydFswXSk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0cyB3b3JkIGF0IHRoZSBjdXJyZW50IG1vdXNlIGV2ZW50IGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxuICAgKi9cbiAgcHVibGljIHNlbGVjdFdvcmRBdEN1cnNvcihldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNvb3JkcyA9IHRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGV2ZW50KTtcbiAgICBpZiAoY29vcmRzKSB7XG4gICAgICB0aGlzLl9zZWxlY3RXb3JkQXQoY29vcmRzLCBmYWxzZSk7XG4gICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgYWxsIHRleHQgd2l0aGluIHRoZSB0ZXJtaW5hbC5cbiAgICovXG4gIHB1YmxpYyBzZWxlY3RBbGwoKTogdm9pZCB7XG4gICAgdGhpcy5fbW9kZWwuaXNTZWxlY3RBbGxBY3RpdmUgPSB0cnVlO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKTtcbiAgfVxuXG4gIHB1YmxpYyBzZWxlY3RMaW5lcyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgc3RhcnQgPSBNYXRoLm1heChzdGFydCwgMCk7XG4gICAgZW5kID0gTWF0aC5taW4oZW5kLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGggLSAxKTtcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCA9IFswLCBzdGFydF07XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kID0gW3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgZW5kXTtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHRoZSBidWZmZXIgYmVpbmcgdHJpbW1lZCwgYWRqdXN0IHRoZSBzZWxlY3Rpb24gcG9zaXRpb24uXG4gICAqIEBwYXJhbSBhbW91bnQgVGhlIGFtb3VudCB0aGUgYnVmZmVyIGlzIGJlaW5nIHRyaW1tZWQuXG4gICAqL1xuICBwcml2YXRlIF9vblRyaW0oYW1vdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBuZWVkc1JlZnJlc2ggPSB0aGlzLl9tb2RlbC5vblRyaW0oYW1vdW50KTtcbiAgICBpZiAobmVlZHNSZWZyZXNoKSB7XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgMC1iYXNlZCBbeCwgeV0gYnVmZmVyIGNvb3JkaW5hdGVzIG9mIHRoZSBjdXJyZW50IG1vdXNlIGV2ZW50LlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBfZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQ6IE1vdXNlRXZlbnQpOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBjb29yZHMgPSB0aGlzLl9tb3VzZVNlcnZpY2UuZ2V0Q29vcmRzKGV2ZW50LCB0aGlzLl9zY3JlZW5FbGVtZW50LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cywgdHJ1ZSk7XG4gICAgaWYgKCFjb29yZHMpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gQ29udmVydCB0byAwLWJhc2VkXG4gICAgY29vcmRzWzBdLS07XG4gICAgY29vcmRzWzFdLS07XG5cbiAgICAvLyBDb252ZXJ0IHZpZXdwb3J0IGNvb3JkcyB0byBidWZmZXIgY29vcmRzXG4gICAgY29vcmRzWzFdICs9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO1xuICAgIHJldHVybiBjb29yZHM7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYW1vdW50IHRoZSB2aWV3cG9ydCBzaG91bGQgYmUgc2Nyb2xsZWQgYmFzZWQgb24gaG93IGZhciBvdXQgb2YgdGhlXG4gICAqIHRlcm1pbmFsIHRoZSBtb3VzZSBpcy5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX2dldE1vdXNlRXZlbnRTY3JvbGxBbW91bnQoZXZlbnQ6IE1vdXNlRXZlbnQpOiBudW1iZXIge1xuICAgIGxldCBvZmZzZXQgPSBnZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudChldmVudCwgdGhpcy5fc2NyZWVuRWxlbWVudClbMV07XG4gICAgY29uc3QgdGVybWluYWxIZWlnaHQgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgKiBNYXRoLmNlaWwodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCAqIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubGluZUhlaWdodCk7XG4gICAgaWYgKG9mZnNldCA+PSAwICYmIG9mZnNldCA8PSB0ZXJtaW5hbEhlaWdodCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGlmIChvZmZzZXQgPiB0ZXJtaW5hbEhlaWdodCkge1xuICAgICAgb2Zmc2V0IC09IHRlcm1pbmFsSGVpZ2h0O1xuICAgIH1cblxuICAgIG9mZnNldCA9IE1hdGgubWluKE1hdGgubWF4KG9mZnNldCwgLURSQUdfU0NST0xMX01BWF9USFJFU0hPTEQpLCBEUkFHX1NDUk9MTF9NQVhfVEhSRVNIT0xEKTtcbiAgICBvZmZzZXQgLz0gRFJBR19TQ1JPTExfTUFYX1RIUkVTSE9MRDtcbiAgICByZXR1cm4gKG9mZnNldCAvIE1hdGguYWJzKG9mZnNldCkpICsgTWF0aC5yb3VuZChvZmZzZXQgKiAoRFJBR19TQ1JPTExfTUFYX1NQRUVEIC0gMSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgc2VsZWN0aW9uIG1hbmFnZXIgc2hvdWxkIGZvcmNlIHNlbGVjdGlvbiwgcmVnYXJkbGVzcyBvZlxuICAgKiB3aGV0aGVyIHRoZSB0ZXJtaW5hbCBpcyBpbiBtb3VzZSBldmVudHMgbW9kZS5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHB1YmxpYyBzaG91bGRGb3JjZVNlbGVjdGlvbihldmVudDogTW91c2VFdmVudCk6IGJvb2xlYW4ge1xuICAgIGlmIChCcm93c2VyLmlzTWFjKSB7XG4gICAgICByZXR1cm4gZXZlbnQuYWx0S2V5ICYmIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb247XG4gICAgfVxuXG4gICAgcmV0dXJuIGV2ZW50LnNoaWZ0S2V5O1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGUgbW91c2Vkb3duIGV2ZW50LCBzZXR0aW5nIHVwIGZvciBhIG5ldyBzZWxlY3Rpb24uXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2Vkb3duIGV2ZW50LlxuICAgKi9cbiAgcHVibGljIG9uTW91c2VEb3duKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fbW91c2VEb3duVGltZVN0YW1wID0gZXZlbnQudGltZVN0YW1wO1xuICAgIC8vIElmIHdlIGhhdmUgc2VsZWN0aW9uLCB3ZSB3YW50IHRoZSBjb250ZXh0IG1lbnUgb24gcmlnaHQgY2xpY2sgZXZlbiBpZiB0aGVcbiAgICAvLyB0ZXJtaW5hbCBpcyBpbiBtb3VzZSBtb2RlLlxuICAgIGlmIChldmVudC5idXR0b24gPT09IDIgJiYgdGhpcy5oYXNTZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBPbmx5IGFjdGlvbiB0aGUgcHJpbWFyeSBidXR0b25cbiAgICBpZiAoZXZlbnQuYnV0dG9uICE9PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQWxsb3cgc2VsZWN0aW9uIHdoZW4gdXNpbmcgYSBzcGVjaWZpYyBtb2RpZmllciBrZXksIGV2ZW4gd2hlbiBkaXNhYmxlZFxuICAgIGlmICghdGhpcy5fZW5hYmxlZCkge1xuICAgICAgaWYgKCF0aGlzLnNob3VsZEZvcmNlU2VsZWN0aW9uKGV2ZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIERvbid0IHNlbmQgdGhlIG1vdXNlIGRvd24gZXZlbnQgdG8gdGhlIGN1cnJlbnQgcHJvY2Vzcywgd2Ugd2FudCB0byBzZWxlY3RcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cblxuICAgIC8vIFRlbGwgdGhlIGJyb3dzZXIgbm90IHRvIHN0YXJ0IGEgcmVndWxhciBzZWxlY3Rpb25cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gUmVzZXQgZHJhZyBzY3JvbGwgc3RhdGVcbiAgICB0aGlzLl9kcmFnU2Nyb2xsQW1vdW50ID0gMDtcblxuICAgIGlmICh0aGlzLl9lbmFibGVkICYmIGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICB0aGlzLl9vbkluY3JlbWVudGFsQ2xpY2soZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZXZlbnQuZGV0YWlsID09PSAxKSB7XG4gICAgICAgIHRoaXMuX29uU2luZ2xlQ2xpY2soZXZlbnQpO1xuICAgICAgfSBlbHNlIGlmIChldmVudC5kZXRhaWwgPT09IDIpIHtcbiAgICAgICAgdGhpcy5fb25Eb3VibGVDbGljayhldmVudCk7XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50LmRldGFpbCA9PT0gMykge1xuICAgICAgICB0aGlzLl9vblRyaXBsZUNsaWNrKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9hZGRNb3VzZURvd25MaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBsaXN0ZW5lcnMgd2hlbiBtb3VzZWRvd24gaXMgdHJpZ2dlcmVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfYWRkTW91c2VEb3duTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIC8vIExpc3RlbiBvbiB0aGUgZG9jdW1lbnQgc28gdGhhdCBkcmFnZ2luZyBvdXRzaWRlIG9mIHZpZXdwb3J0IHdvcmtzXG4gICAgaWYgKHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudCkge1xuICAgICAgdGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKTtcbiAgICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcExpc3RlbmVyKTtcbiAgICB9XG4gICAgdGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy5fZHJhZ1Njcm9sbCgpLCBEUkFHX1NDUk9MTF9JTlRFUlZBTCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgbGlzdGVuZXJzIHRoYXQgYXJlIHJlZ2lzdGVyZWQgd2hlbiBtb3VzZWRvd24gaXMgdHJpZ2dlcmVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQpIHtcbiAgICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lcik7XG4gICAgICB0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX21vdXNlVXBMaXN0ZW5lcik7XG4gICAgfVxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXIpO1xuICAgIHRoaXMuX2RyYWdTY3JvbGxJbnRlcnZhbFRpbWVyID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGFuIGluY3JlbWVudGFsIGNsaWNrLCBzZXR0aW5nIHRoZSBzZWxlY3Rpb24gZW5kIHBvc2l0aW9uIHRvIHRoZSBtb3VzZVxuICAgKiBwb3NpdGlvbi5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uSW5jcmVtZW50YWxDbGljayhldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kID0gdGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIHNpbmdsZSBjbGljaywgcmVzZXR0aW5nIHJlbGV2YW50IHN0YXRlIGFuZCBzZXR0aW5nIHRoZSBzZWxlY3Rpb25cbiAgICogc3RhcnQgcG9zaXRpb24uXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9vblNpbmdsZUNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGggPSAwO1xuICAgIHRoaXMuX21vZGVsLmlzU2VsZWN0QWxsQWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9IHRoaXMuc2hvdWxkQ29sdW1uU2VsZWN0KGV2ZW50KSA/IFNlbGVjdGlvbk1vZGUuQ09MVU1OIDogU2VsZWN0aW9uTW9kZS5OT1JNQUw7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBuZXcgc2VsZWN0aW9uXG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQgPSB0aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhldmVudCk7XG4gICAgaWYgKCF0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBFbnN1cmUgdGhlIGxpbmUgZXhpc3RzXG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFsxXSk7XG4gICAgaWYgKCFsaW5lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGVhcmx5IGlmIHRoZSBjbGljayBldmVudCBpcyBub3QgaW4gdGhlIGJ1ZmZlciAoZWcuIGluIHNjcm9sbCBiYXIpXG4gICAgaWYgKGxpbmUubGVuZ3RoID09PSB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFswXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBtb3VzZSBpcyBvdmVyIHRoZSBzZWNvbmQgaGFsZiBvZiBhIHdpZGUgY2hhcmFjdGVyLCBhZGp1c3QgdGhlXG4gICAgLy8gc2VsZWN0aW9uIHRvIGNvdmVyIHRoZSB3aG9sZSBjaGFyYWN0ZXJcbiAgICBpZiAobGluZS5oYXNXaWR0aCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFswXSkgPT09IDApIHtcbiAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzBdKys7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGEgZG91YmxlIGNsaWNrLCBzZWxlY3RpbmcgdGhlIGN1cnJlbnQgd29yay5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uRG91YmxlQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjb29yZHMgPSB0aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhldmVudCk7XG4gICAgaWYgKGNvb3Jkcykge1xuICAgICAgdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9IFNlbGVjdGlvbk1vZGUuV09SRDtcbiAgICAgIHRoaXMuX3NlbGVjdFdvcmRBdChjb29yZHMsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIHRyaXBsZSBjbGljaywgc2VsZWN0aW5nIHRoZSBjdXJyZW50IGxpbmUgYW5kIGFjdGl2YXRpbmcgbGluZVxuICAgKiBzZWxlY3QgbW9kZS5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uVHJpcGxlQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjb29yZHMgPSB0aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhldmVudCk7XG4gICAgaWYgKGNvb3Jkcykge1xuICAgICAgdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9IFNlbGVjdGlvbk1vZGUuTElORTtcbiAgICAgIHRoaXMuX3NlbGVjdExpbmVBdChjb29yZHNbMV0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyIHNob3VsZCBvcGVyYXRlIGluIGNvbHVtbiBzZWxlY3QgbW9kZVxuICAgKiBAcGFyYW0gZXZlbnQgdGhlIG1vdXNlIG9yIGtleWJvYXJkIGV2ZW50XG4gICAqL1xuICBwdWJsaWMgc2hvdWxkQ29sdW1uU2VsZWN0KGV2ZW50OiBLZXlib2FyZEV2ZW50IHwgTW91c2VFdmVudCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBldmVudC5hbHRLZXkgJiYgIShCcm93c2VyLmlzTWFjICYmIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIG1vdXNlbW92ZSBldmVudCB3aGVuIHRoZSBtb3VzZSBidXR0b24gaXMgZG93biwgcmVjb3JkaW5nIHRoZVxuICAgKiBlbmQgb2YgdGhlIHNlbGVjdGlvbiBhbmQgcmVmcmVzaGluZyB0aGUgc2VsZWN0aW9uLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlbW92ZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLy8gSWYgdGhlIG1vdXNlbW92ZSBsaXN0ZW5lciBpcyBhY3RpdmUgaXQgbWVhbnMgdGhhdCBhIHNlbGVjdGlvbiBpc1xuICAgIC8vIGN1cnJlbnRseSBiZWluZyBtYWRlLCB3ZSBzaG91bGQgc3RvcCBwcm9wYWdhdGlvbiB0byBwcmV2ZW50IG1vdXNlIGV2ZW50c1xuICAgIC8vIHRvIGJlIHNlbnQgdG8gdGhlIHB0eS5cbiAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblxuICAgIC8vIERvIG5vdGhpbmcgaWYgdGhlcmUgaXMgbm8gc2VsZWN0aW9uIHN0YXJ0LCB0aGlzIGNhbiBoYXBwZW4gaWYgdGhlIGZpcnN0XG4gICAgLy8gY2xpY2sgaW4gdGhlIHRlcm1pbmFsIGlzIGFuIGluY3JlbWVudGFsIGNsaWNrXG4gICAgaWYgKCF0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlY29yZCB0aGUgcHJldmlvdXMgcG9zaXRpb24gc28gd2Uga25vdyB3aGV0aGVyIHRvIHJlZHJhdyB0aGUgc2VsZWN0aW9uXG4gICAgLy8gYXQgdGhlIGVuZC5cbiAgICBjb25zdCBwcmV2aW91c1NlbGVjdGlvbkVuZCA9IHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA/IFt0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0sIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXV0gOiBudWxsO1xuXG4gICAgLy8gU2V0IHRoZSBpbml0aWFsIHNlbGVjdGlvbiBlbmQgYmFzZWQgb24gdGhlIG1vdXNlIGNvb3JkaW5hdGVzXG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kID0gdGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQpO1xuICAgIGlmICghdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kKSB7XG4gICAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2VsZWN0IHRoZSBlbnRpcmUgbGluZSBpZiBsaW5lIHNlbGVjdCBtb2RlIGlzIGFjdGl2ZS5cbiAgICBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9PT0gU2VsZWN0aW9uTW9kZS5MSU5FKSB7XG4gICAgICBpZiAodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdIDwgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMV0pIHtcbiAgICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgPT09IFNlbGVjdGlvbk1vZGUuV09SRCkge1xuICAgICAgdGhpcy5fc2VsZWN0VG9Xb3JkQXQodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kKTtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIGFtb3VudCBvZiBzY3JvbGxpbmcgdGhhdCB3aWxsIGhhcHBlbi5cbiAgICB0aGlzLl9kcmFnU2Nyb2xsQW1vdW50ID0gdGhpcy5fZ2V0TW91c2VFdmVudFNjcm9sbEFtb3VudChldmVudCk7XG5cbiAgICAvLyBJZiB0aGUgY3Vyc29yIHdhcyBhYm92ZSBvciBiZWxvdyB0aGUgdmlld3BvcnQsIG1ha2Ugc3VyZSBpdCdzIGF0IHRoZVxuICAgIC8vIHN0YXJ0IG9yIGVuZCBvZiB0aGUgdmlld3BvcnQgcmVzcGVjdGl2ZWx5LiBUaGlzIHNob3VsZCBvbmx5IGhhcHBlbiB3aGVuXG4gICAgLy8gTk9UIGluIGNvbHVtbiBzZWxlY3QgbW9kZS5cbiAgICBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSAhPT0gU2VsZWN0aW9uTW9kZS5DT0xVTU4pIHtcbiAgICAgIGlmICh0aGlzLl9kcmFnU2Nyb2xsQW1vdW50ID4gMCkge1xuICAgICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0gPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2RyYWdTY3JvbGxBbW91bnQgPCAwKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGNoYXJhY3RlciBpcyBhIHdpZGUgY2hhcmFjdGVyIGluY2x1ZGUgdGhlIGNlbGwgdG8gdGhlIHJpZ2h0IGluIHRoZVxuICAgIC8vIHNlbGVjdGlvbi4gTm90ZSB0aGF0IHNlbGVjdGlvbnMgYXQgdGhlIHZlcnkgZW5kIG9mIHRoZSBsaW5lIHdpbGwgbmV2ZXJcbiAgICAvLyBoYXZlIGEgY2hhcmFjdGVyLlxuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGlmICh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0gPCBidWZmZXIubGluZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBsaW5lID0gYnVmZmVyLmxpbmVzLmdldCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0pO1xuICAgICAgaWYgKGxpbmUgJiYgbGluZS5oYXNXaWR0aCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0pID09PSAwKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE9ubHkgZHJhdyBoZXJlIGlmIHRoZSBzZWxlY3Rpb24gY2hhbmdlcy5cbiAgICBpZiAoIXByZXZpb3VzU2VsZWN0aW9uRW5kIHx8XG4gICAgICBwcmV2aW91c1NlbGVjdGlvbkVuZFswXSAhPT0gdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdIHx8XG4gICAgICBwcmV2aW91c1NlbGVjdGlvbkVuZFsxXSAhPT0gdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdKSB7XG4gICAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjYWxsYmFjayB0aGF0IG9jY3VycyBldmVyeSBEUkFHX1NDUk9MTF9JTlRFUlZBTCBtcyB0aGF0IGRvZXMgdGhlXG4gICAqIHNjcm9sbGluZyBvZiB0aGUgdmlld3BvcnQuXG4gICAqL1xuICBwcml2YXRlIF9kcmFnU2Nyb2xsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kIHx8ICF0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fZHJhZ1Njcm9sbEFtb3VudCkge1xuICAgICAgdGhpcy5fc2Nyb2xsTGluZXModGhpcy5fZHJhZ1Njcm9sbEFtb3VudCwgZmFsc2UpO1xuICAgICAgLy8gUmUtZXZhbHVhdGUgc2VsZWN0aW9uXG4gICAgICAvLyBJZiB0aGUgY3Vyc29yIHdhcyBhYm92ZSBvciBiZWxvdyB0aGUgdmlld3BvcnQsIG1ha2Ugc3VyZSBpdCdzIGF0IHRoZVxuICAgICAgLy8gc3RhcnQgb3IgZW5kIG9mIHRoZSB2aWV3cG9ydCByZXNwZWN0aXZlbHkuIFRoaXMgc2hvdWxkIG9ubHkgaGFwcGVuIHdoZW5cbiAgICAgIC8vIE5PVCBpbiBjb2x1bW4gc2VsZWN0IG1vZGUuXG4gICAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICAgIGlmICh0aGlzLl9kcmFnU2Nyb2xsQW1vdW50ID4gMCkge1xuICAgICAgICBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSAhPT0gU2VsZWN0aW9uTW9kZS5DT0xVTU4pIHtcbiAgICAgICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0gPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdID0gTWF0aC5taW4oYnVmZmVyLnlkaXNwICsgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLCBidWZmZXIubGluZXMubGVuZ3RoIC0gMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSAhPT0gU2VsZWN0aW9uTW9kZS5DT0xVTU4pIHtcbiAgICAgICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXSA9IGJ1ZmZlci55ZGlzcDtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBtb3VzZXVwIGV2ZW50LCByZW1vdmluZyB0aGUgbW91c2Vkb3duIGxpc3RlbmVycy5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZXVwIGV2ZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBfb25Nb3VzZVVwKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGltZUVsYXBzZWQgPSBldmVudC50aW1lU3RhbXAgLSB0aGlzLl9tb3VzZURvd25UaW1lU3RhbXA7XG5cbiAgICB0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKTtcblxuICAgIGlmICh0aGlzLnNlbGVjdGlvblRleHQubGVuZ3RoIDw9IDEgJiYgdGltZUVsYXBzZWQgPCBBTFRfQ0xJQ0tfTU9WRV9DVVJTT1JfVElNRSkge1xuICAgICAgaWYgKGV2ZW50LmFsdEtleSAmJiB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSA9PT0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3ApIHtcbiAgICAgICAgY29uc3QgY29vcmRpbmF0ZXMgPSB0aGlzLl9tb3VzZVNlcnZpY2UuZ2V0Q29vcmRzKFxuICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgIHRoaXMuX2VsZW1lbnQsXG4gICAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLFxuICAgICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyxcbiAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgICBpZiAoY29vcmRpbmF0ZXMgJiYgY29vcmRpbmF0ZXNbMF0gIT09IHVuZGVmaW5lZCAmJiBjb29yZGluYXRlc1sxXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc3Qgc2VxdWVuY2UgPSBtb3ZlVG9DZWxsU2VxdWVuY2UoY29vcmRpbmF0ZXNbMF0gLSAxLCBjb29yZGluYXRlc1sxXSAtIDEsIHRoaXMuX2J1ZmZlclNlcnZpY2UsIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXMpO1xuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoc2VxdWVuY2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmhhc1NlbGVjdGlvbikge1xuICAgICAgdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uQnVmZmVyQWN0aXZhdGUoZToge2FjdGl2ZUJ1ZmZlcjogSUJ1ZmZlciwgaW5hY3RpdmVCdWZmZXI6IElCdWZmZXJ9KTogdm9pZCB7XG4gICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgIC8vIE9ubHkgYWRqdXN0IHRoZSBzZWxlY3Rpb24gb24gdHJpbSwgc2hpZnRFbGVtZW50cyBpcyByYXJlbHkgdXNlZCAob25seSBpblxuICAgIC8vIHJldmVyc2VJbmRleCkgYW5kIGRlbGV0ZSBpbiBhIHNwbGljZSBpcyBvbmx5IGV2ZXIgdXNlZCB3aGVuIHRoZSBzYW1lXG4gICAgLy8gbnVtYmVyIG9mIGVsZW1lbnRzIHdhcyBqdXN0IGFkZGVkLiBHaXZlbiB0aGlzIGlzIGNvdWxkIGFjdHVhbGx5IGJlXG4gICAgLy8gYmVuZWZpY2lhbCB0byBsZWF2ZSB0aGUgc2VsZWN0aW9uIGFzIGlzIGZvciB0aGVzZSBjYXNlcy5cbiAgICB0aGlzLl90cmltTGlzdGVuZXIuZGlzcG9zZSgpO1xuICAgIHRoaXMuX3RyaW1MaXN0ZW5lciA9IGUuYWN0aXZlQnVmZmVyLmxpbmVzLm9uVHJpbShhbW91bnQgPT4gdGhpcy5fb25UcmltKGFtb3VudCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGEgdmlld3BvcnQgY29sdW1uIHRvIHRoZSBjaGFyYWN0ZXIgaW5kZXggb24gdGhlIGJ1ZmZlciBsaW5lLCB0aGVcbiAgICogbGF0dGVyIHRha2VzIGludG8gYWNjb3VudCB3aWRlIGNoYXJhY3RlcnMuXG4gICAqIEBwYXJhbSBjb29yZHMgVGhlIGNvb3JkaW5hdGVzIHRvIGZpbmQgdGhlIDIgaW5kZXggZm9yLlxuICAgKi9cbiAgcHJpdmF0ZSBfY29udmVydFZpZXdwb3J0Q29sVG9DaGFyYWN0ZXJJbmRleChidWZmZXJMaW5lOiBJQnVmZmVyTGluZSwgY29vcmRzOiBbbnVtYmVyLCBudW1iZXJdKTogbnVtYmVyIHtcbiAgICBsZXQgY2hhckluZGV4ID0gY29vcmRzWzBdO1xuICAgIGZvciAobGV0IGkgPSAwOyBjb29yZHNbMF0gPj0gaTsgaSsrKSB7XG4gICAgICBjb25zdCBsZW5ndGggPSBidWZmZXJMaW5lLmxvYWRDZWxsKGksIHRoaXMuX3dvcmtDZWxsKS5nZXRDaGFycygpLmxlbmd0aDtcbiAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpID09PSAwKSB7XG4gICAgICAgIC8vIFdpZGUgY2hhcmFjdGVycyBhcmVuJ3QgaW5jbHVkZWQgaW4gdGhlIGxpbmUgc3RyaW5nIHNvIGRlY3JlbWVudCB0aGVcbiAgICAgICAgLy8gaW5kZXggc28gdGhlIGluZGV4IGlzIGJhY2sgb24gdGhlIHdpZGUgY2hhcmFjdGVyLlxuICAgICAgICBjaGFySW5kZXgtLTtcbiAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID4gMSAmJiBjb29yZHNbMF0gIT09IGkpIHtcbiAgICAgICAgLy8gRW1vamlzIHRha2UgdXAgbXVsdGlwbGUgY2hhcmFjdGVycywgc28gYWRqdXN0IGFjY29yZGluZ2x5LiBGb3IgdGhlc2VcbiAgICAgICAgLy8gd2UgZG9uJ3Qgd2FudCBvdCBpbmNsdWRlIHRoZSBjaGFyYWN0ZXIgYXQgdGhlIGNvbHVtbiBhcyB3ZSdyZVxuICAgICAgICAvLyByZXR1cm5pbmcgdGhlIHN0YXJ0IGluZGV4IGluIHRoZSBzdHJpbmcsIG5vdCB0aGUgZW5kIGluZGV4LlxuICAgICAgICBjaGFySW5kZXggKz0gbGVuZ3RoIC0gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNoYXJJbmRleDtcbiAgfVxuXG4gIHB1YmxpYyBzZXRTZWxlY3Rpb24oY29sOiBudW1iZXIsIHJvdzogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgdGhpcy5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQgPSBbY29sLCByb3ddO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0TGVuZ3RoID0gbGVuZ3RoO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgcG9zaXRpb25hbCBpbmZvcm1hdGlvbiBmb3IgdGhlIHdvcmQgYXQgdGhlIGNvb3JkaW5hdGVkIHNwZWNpZmllZC5cbiAgICogQHBhcmFtIGNvb3JkcyBUaGUgY29vcmRpbmF0ZXMgdG8gZ2V0IHRoZSB3b3JkIGF0LlxuICAgKi9cbiAgcHJpdmF0ZSBfZ2V0V29yZEF0KGNvb3JkczogW251bWJlciwgbnVtYmVyXSwgYWxsb3dXaGl0ZXNwYWNlT25seVNlbGVjdGlvbjogYm9vbGVhbiwgZm9sbG93V3JhcHBlZExpbmVzQWJvdmU6IGJvb2xlYW4gPSB0cnVlLCBmb2xsb3dXcmFwcGVkTGluZXNCZWxvdzogYm9vbGVhbiA9IHRydWUpOiBJV29yZFBvc2l0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICAvLyBFbnN1cmUgY29vcmRzIGFyZSB3aXRoaW4gdmlld3BvcnQgKGVnLiBub3Qgd2l0aGluIHNjcm9sbCBiYXIpXG4gICAgaWYgKGNvb3Jkc1swXSA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG4gICAgY29uc3QgYnVmZmVyTGluZSA9IGJ1ZmZlci5saW5lcy5nZXQoY29vcmRzWzFdKTtcbiAgICBpZiAoIWJ1ZmZlckxpbmUpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgbGluZSA9IGJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoY29vcmRzWzFdLCBmYWxzZSk7XG5cbiAgICAvLyBHZXQgYWN0dWFsIGluZGV4LCB0YWtpbmcgaW50byBjb25zaWRlcmF0aW9uIHdpZGUgY2hhcmFjdGVyc1xuICAgIGxldCBzdGFydEluZGV4ID0gdGhpcy5fY29udmVydFZpZXdwb3J0Q29sVG9DaGFyYWN0ZXJJbmRleChidWZmZXJMaW5lLCBjb29yZHMpO1xuICAgIGxldCBlbmRJbmRleCA9IHN0YXJ0SW5kZXg7XG5cbiAgICAvLyBSZWNvcmQgb2Zmc2V0IHRvIGJlIHVzZWQgbGF0ZXJcbiAgICBjb25zdCBjaGFyT2Zmc2V0ID0gY29vcmRzWzBdIC0gc3RhcnRJbmRleDtcbiAgICBsZXQgbGVmdFdpZGVDaGFyQ291bnQgPSAwO1xuICAgIGxldCByaWdodFdpZGVDaGFyQ291bnQgPSAwO1xuICAgIGxldCBsZWZ0TG9uZ0NoYXJPZmZzZXQgPSAwO1xuICAgIGxldCByaWdodExvbmdDaGFyT2Zmc2V0ID0gMDtcblxuICAgIGlmIChsaW5lLmNoYXJBdChzdGFydEluZGV4KSA9PT0gJyAnKSB7XG4gICAgICAvLyBFeHBhbmQgdW50aWwgbm9uLXdoaXRlc3BhY2UgaXMgaGl0XG4gICAgICB3aGlsZSAoc3RhcnRJbmRleCA+IDAgJiYgbGluZS5jaGFyQXQoc3RhcnRJbmRleCAtIDEpID09PSAnICcpIHtcbiAgICAgICAgc3RhcnRJbmRleC0tO1xuICAgICAgfVxuICAgICAgd2hpbGUgKGVuZEluZGV4IDwgbGluZS5sZW5ndGggJiYgbGluZS5jaGFyQXQoZW5kSW5kZXggKyAxKSA9PT0gJyAnKSB7XG4gICAgICAgIGVuZEluZGV4Kys7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEV4cGFuZCB1bnRpbCB3aGl0ZXNwYWNlIGlzIGhpdC4gVGhpcyBhbGdvcml0aG0gd29ya3MgYnkgc2Nhbm5pbmcgbGVmdFxuICAgICAgLy8gYW5kIHJpZ2h0IGZyb20gdGhlIHN0YXJ0aW5nIHBvc2l0aW9uLCBrZWVwaW5nIGJvdGggdGhlIGluZGV4IGZvcm1hdFxuICAgICAgLy8gKGxpbmUpIGFuZCB0aGUgY29sdW1uIGZvcm1hdCAoYnVmZmVyTGluZSkgaW4gc3luYy4gV2hlbiBhIHdpZGVcbiAgICAgIC8vIGNoYXJhY3RlciBpcyBoaXQsIGl0IGlzIHJlY29yZGVkIGFuZCB0aGUgY29sdW1uIGluZGV4IGlzIGFkanVzdGVkLlxuICAgICAgbGV0IHN0YXJ0Q29sID0gY29vcmRzWzBdO1xuICAgICAgbGV0IGVuZENvbCA9IGNvb3Jkc1swXTtcblxuICAgICAgLy8gQ29uc2lkZXIgdGhlIGluaXRpYWwgcG9zaXRpb24sIHNraXAgaXQgYW5kIGluY3JlbWVudCB0aGUgd2lkZSBjaGFyXG4gICAgICAvLyB2YXJpYWJsZVxuICAgICAgaWYgKGJ1ZmZlckxpbmUuZ2V0V2lkdGgoc3RhcnRDb2wpID09PSAwKSB7XG4gICAgICAgIGxlZnRXaWRlQ2hhckNvdW50Kys7XG4gICAgICAgIHN0YXJ0Q29sLS07XG4gICAgICB9XG4gICAgICBpZiAoYnVmZmVyTGluZS5nZXRXaWR0aChlbmRDb2wpID09PSAyKSB7XG4gICAgICAgIHJpZ2h0V2lkZUNoYXJDb3VudCsrO1xuICAgICAgICBlbmRDb2wrKztcbiAgICAgIH1cblxuICAgICAgLy8gQWRqdXN0IHRoZSBlbmQgaW5kZXggZm9yIGNoYXJhY3RlcnMgd2hvc2UgbGVuZ3RoIGFyZSA+IDEgKGVtb2ppcylcbiAgICAgIGNvbnN0IGxlbmd0aCA9IGJ1ZmZlckxpbmUuZ2V0U3RyaW5nKGVuZENvbCkubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmlnaHRMb25nQ2hhck9mZnNldCArPSBsZW5ndGggLSAxO1xuICAgICAgICBlbmRJbmRleCArPSBsZW5ndGggLSAxO1xuICAgICAgfVxuXG4gICAgICAvLyBFeHBhbmQgdGhlIHN0cmluZyBpbiBib3RoIGRpcmVjdGlvbnMgdW50aWwgYSBzcGFjZSBpcyBoaXRcbiAgICAgIHdoaWxlIChzdGFydENvbCA+IDAgJiYgc3RhcnRJbmRleCA+IDAgJiYgIXRoaXMuX2lzQ2hhcldvcmRTZXBhcmF0b3IoYnVmZmVyTGluZS5sb2FkQ2VsbChzdGFydENvbCAtIDEsIHRoaXMuX3dvcmtDZWxsKSkpIHtcbiAgICAgICAgYnVmZmVyTGluZS5sb2FkQ2VsbChzdGFydENvbCAtIDEsIHRoaXMuX3dvcmtDZWxsKTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5fd29ya0NlbGwuZ2V0Q2hhcnMoKS5sZW5ndGg7XG4gICAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpID09PSAwKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIG5leHQgY2hhcmFjdGVyIGlzIGEgd2lkZSBjaGFyLCByZWNvcmQgaXQgYW5kIHNraXAgdGhlIGNvbHVtblxuICAgICAgICAgIGxlZnRXaWRlQ2hhckNvdW50Kys7XG4gICAgICAgICAgc3RhcnRDb2wtLTtcbiAgICAgICAgfSBlbHNlIGlmIChsZW5ndGggPiAxKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIG5leHQgY2hhcmFjdGVyJ3Mgc3RyaW5nIGlzIGxvbmdlciB0aGFuIDEgY2hhciAoZWcuIGVtb2ppKSxcbiAgICAgICAgICAvLyBhZGp1c3QgdGhlIGluZGV4XG4gICAgICAgICAgbGVmdExvbmdDaGFyT2Zmc2V0ICs9IGxlbmd0aCAtIDE7XG4gICAgICAgICAgc3RhcnRJbmRleCAtPSBsZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0SW5kZXgtLTtcbiAgICAgICAgc3RhcnRDb2wtLTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChlbmRDb2wgPCBidWZmZXJMaW5lLmxlbmd0aCAmJiBlbmRJbmRleCArIDEgPCBsaW5lLmxlbmd0aCAmJiAhdGhpcy5faXNDaGFyV29yZFNlcGFyYXRvcihidWZmZXJMaW5lLmxvYWRDZWxsKGVuZENvbCArIDEsIHRoaXMuX3dvcmtDZWxsKSkpIHtcbiAgICAgICAgYnVmZmVyTGluZS5sb2FkQ2VsbChlbmRDb2wgKyAxLCB0aGlzLl93b3JrQ2VsbCk7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkubGVuZ3RoO1xuICAgICAgICBpZiAodGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKSA9PT0gMikge1xuICAgICAgICAgIC8vIElmIHRoZSBuZXh0IGNoYXJhY3RlciBpcyBhIHdpZGUgY2hhciwgcmVjb3JkIGl0IGFuZCBza2lwIHRoZSBjb2x1bW5cbiAgICAgICAgICByaWdodFdpZGVDaGFyQ291bnQrKztcbiAgICAgICAgICBlbmRDb2wrKztcbiAgICAgICAgfSBlbHNlIGlmIChsZW5ndGggPiAxKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIG5leHQgY2hhcmFjdGVyJ3Mgc3RyaW5nIGlzIGxvbmdlciB0aGFuIDEgY2hhciAoZWcuIGVtb2ppKSxcbiAgICAgICAgICAvLyBhZGp1c3QgdGhlIGluZGV4XG4gICAgICAgICAgcmlnaHRMb25nQ2hhck9mZnNldCArPSBsZW5ndGggLSAxO1xuICAgICAgICAgIGVuZEluZGV4ICs9IGxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgZW5kSW5kZXgrKztcbiAgICAgICAgZW5kQ29sKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5jcmVtZW5ldCB0aGUgZW5kIGluZGV4IHNvIGl0IGlzIGF0IHRoZSBzdGFydCBvZiB0aGUgbmV4dCBjaGFyYWN0ZXJcbiAgICBlbmRJbmRleCsrO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBzdGFydCBfY29sdW1uXywgY29udmVydGluZyB0aGUgdGhlIHN0cmluZyBpbmRleGVzIGJhY2sgdG9cbiAgICAvLyBjb2x1bW4gY29vcmRpbmF0ZXMuXG4gICAgbGV0IHN0YXJ0ID1cbiAgICAgICAgc3RhcnRJbmRleCAvLyBUaGUgaW5kZXggb2YgdGhlIHNlbGVjdGlvbidzIHN0YXJ0IGNoYXIgaW4gdGhlIGxpbmUgc3RyaW5nXG4gICAgICAgICsgY2hhck9mZnNldCAvLyBUaGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBpbml0aWFsIGNoYXIncyBjb2x1bW4gYW5kIGluZGV4XG4gICAgICAgIC0gbGVmdFdpZGVDaGFyQ291bnQgLy8gVGhlIG51bWJlciBvZiB3aWRlIGNoYXJzIGxlZnQgb2YgdGhlIGluaXRpYWwgY2hhclxuICAgICAgICArIGxlZnRMb25nQ2hhck9mZnNldDsgLy8gVGhlIG51bWJlciBvZiBhZGRpdGlvbmFsIGNoYXJzIGxlZnQgb2YgdGhlIGluaXRpYWwgY2hhciBhZGRlZCBieSBjb2x1bW5zIHdpdGggc3RyaW5ncyBsb25nZXIgdGhhbiAxIChlbW9qaXMpXG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIGxlbmd0aCBpbiBfY29sdW1uc18sIGNvbnZlcnRpbmcgdGhlIHRoZSBzdHJpbmcgaW5kZXhlcyBiYWNrXG4gICAgLy8gdG8gY29sdW1uIGNvb3JkaW5hdGVzLlxuICAgIGxldCBsZW5ndGggPSBNYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIC8vIERpc2FsbG93IGxlbmd0aHMgbGFyZ2VyIHRoYW4gdGhlIHRlcm1pbmFsIGNvbHNcbiAgICAgICAgZW5kSW5kZXggLy8gVGhlIGluZGV4IG9mIHRoZSBzZWxlY3Rpb24ncyBlbmQgY2hhciBpbiB0aGUgbGluZSBzdHJpbmdcbiAgICAgICAgLSBzdGFydEluZGV4IC8vIFRoZSBpbmRleCBvZiB0aGUgc2VsZWN0aW9uJ3Mgc3RhcnQgY2hhciBpbiB0aGUgbGluZSBzdHJpbmdcbiAgICAgICAgKyBsZWZ0V2lkZUNoYXJDb3VudCAvLyBUaGUgbnVtYmVyIG9mIHdpZGUgY2hhcnMgbGVmdCBvZiB0aGUgaW5pdGlhbCBjaGFyXG4gICAgICAgICsgcmlnaHRXaWRlQ2hhckNvdW50IC8vIFRoZSBudW1iZXIgb2Ygd2lkZSBjaGFycyByaWdodCBvZiB0aGUgaW5pdGlhbCBjaGFyIChpbmNsdXNpdmUpXG4gICAgICAgIC0gbGVmdExvbmdDaGFyT2Zmc2V0IC8vIFRoZSBudW1iZXIgb2YgYWRkaXRpb25hbCBjaGFycyBsZWZ0IG9mIHRoZSBpbml0aWFsIGNoYXIgYWRkZWQgYnkgY29sdW1ucyB3aXRoIHN0cmluZ3MgbG9uZ2VyIHRoYW4gMSAoZW1vamlzKVxuICAgICAgICAtIHJpZ2h0TG9uZ0NoYXJPZmZzZXQpOyAvLyBUaGUgbnVtYmVyIG9mIGFkZGl0aW9uYWwgY2hhcnMgcmlnaHQgb2YgdGhlIGluaXRpYWwgY2hhciAoaW5jbHVzaXZlKSBhZGRlZCBieSBjb2x1bW5zIHdpdGggc3RyaW5ncyBsb25nZXIgdGhhbiAxIChlbW9qaXMpXG5cbiAgICBpZiAoIWFsbG93V2hpdGVzcGFjZU9ubHlTZWxlY3Rpb24gJiYgbGluZS5zbGljZShzdGFydEluZGV4LCBlbmRJbmRleCkudHJpbSgpID09PSAnJykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBSZWN1cnNlIHVwd2FyZHMgaWYgdGhlIGxpbmUgaXMgd3JhcHBlZCBhbmQgdGhlIHdvcmQgd3JhcHMgdG8gdGhlIGFib3ZlIGxpbmVcbiAgICBpZiAoZm9sbG93V3JhcHBlZExpbmVzQWJvdmUpIHtcbiAgICAgIGlmIChzdGFydCA9PT0gMCAmJiBidWZmZXJMaW5lLmdldENvZGVQb2ludCgwKSAhPT0gMzIgLyonICcqLykge1xuICAgICAgICBjb25zdCBwcmV2aW91c0J1ZmZlckxpbmUgPSBidWZmZXIubGluZXMuZ2V0KGNvb3Jkc1sxXSAtIDEpO1xuICAgICAgICBpZiAocHJldmlvdXNCdWZmZXJMaW5lICYmIGJ1ZmZlckxpbmUuaXNXcmFwcGVkICYmIHByZXZpb3VzQnVmZmVyTGluZS5nZXRDb2RlUG9pbnQodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gMSkgIT09IDMyIC8qJyAnKi8pIHtcbiAgICAgICAgICBjb25zdCBwcmV2aW91c0xpbmVXb3JkUG9zaXRpb24gPSB0aGlzLl9nZXRXb3JkQXQoW3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAtIDEsIGNvb3Jkc1sxXSAtIDFdLCBmYWxzZSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgIGlmIChwcmV2aW91c0xpbmVXb3JkUG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAtIHByZXZpb3VzTGluZVdvcmRQb3NpdGlvbi5zdGFydDtcbiAgICAgICAgICAgIHN0YXJ0IC09IG9mZnNldDtcbiAgICAgICAgICAgIGxlbmd0aCArPSBvZmZzZXQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVjdXJzZSBkb3dud2FyZHMgaWYgdGhlIGxpbmUgaXMgd3JhcHBlZCBhbmQgdGhlIHdvcmQgd3JhcHMgdG8gdGhlIG5leHQgbGluZVxuICAgIGlmIChmb2xsb3dXcmFwcGVkTGluZXNCZWxvdykge1xuICAgICAgaWYgKHN0YXJ0ICsgbGVuZ3RoID09PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgJiYgYnVmZmVyTGluZS5nZXRDb2RlUG9pbnQodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gMSkgIT09IDMyIC8qJyAnKi8pIHtcbiAgICAgICAgY29uc3QgbmV4dEJ1ZmZlckxpbmUgPSBidWZmZXIubGluZXMuZ2V0KGNvb3Jkc1sxXSArIDEpO1xuICAgICAgICBpZiAobmV4dEJ1ZmZlckxpbmUgJiYgbmV4dEJ1ZmZlckxpbmUuaXNXcmFwcGVkICYmIG5leHRCdWZmZXJMaW5lLmdldENvZGVQb2ludCgwKSAhPT0gMzIgLyonICcqLykge1xuICAgICAgICAgIGNvbnN0IG5leHRMaW5lV29yZFBvc2l0aW9uID0gdGhpcy5fZ2V0V29yZEF0KFswLCBjb29yZHNbMV0gKyAxXSwgZmFsc2UsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICBpZiAobmV4dExpbmVXb3JkUG9zaXRpb24pIHtcbiAgICAgICAgICAgIGxlbmd0aCArPSBuZXh0TGluZVdvcmRQb3NpdGlvbi5sZW5ndGg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3RhcnQsIGxlbmd0aCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgdGhlIHdvcmQgYXQgdGhlIGNvb3JkaW5hdGVzIHNwZWNpZmllZC5cbiAgICogQHBhcmFtIGNvb3JkcyBUaGUgY29vcmRpbmF0ZXMgdG8gZ2V0IHRoZSB3b3JkIGF0LlxuICAgKiBAcGFyYW0gYWxsb3dXaGl0ZXNwYWNlT25seVNlbGVjdGlvbiBJZiB3aGl0ZXNwYWNlIHNob3VsZCBiZSBzZWxlY3RlZFxuICAgKi9cbiAgcHJvdGVjdGVkIF9zZWxlY3RXb3JkQXQoY29vcmRzOiBbbnVtYmVyLCBudW1iZXJdLCBhbGxvd1doaXRlc3BhY2VPbmx5U2VsZWN0aW9uOiBib29sZWFuKTogdm9pZCB7XG4gICAgY29uc3Qgd29yZFBvc2l0aW9uID0gdGhpcy5fZ2V0V29yZEF0KGNvb3JkcywgYWxsb3dXaGl0ZXNwYWNlT25seVNlbGVjdGlvbik7XG4gICAgaWYgKHdvcmRQb3NpdGlvbikge1xuICAgICAgLy8gQWRqdXN0IG5lZ2F0aXZlIHN0YXJ0IHZhbHVlXG4gICAgICB3aGlsZSAod29yZFBvc2l0aW9uLnN0YXJ0IDwgMCkge1xuICAgICAgICB3b3JkUG9zaXRpb24uc3RhcnQgKz0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgICAgICBjb29yZHNbMV0tLTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0ID0gW3dvcmRQb3NpdGlvbi5zdGFydCwgY29vcmRzWzFdXTtcbiAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0TGVuZ3RoID0gd29yZFBvc2l0aW9uLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgc2VsZWN0aW9uIGVuZCB0byB0aGUgd29yZCBhdCB0aGUgY29vcmRpbmF0ZWQgc3BlY2lmaWVkLlxuICAgKiBAcGFyYW0gY29vcmRzIFRoZSBjb29yZGluYXRlcyB0byBnZXQgdGhlIHdvcmQgYXQuXG4gICAqL1xuICBwcml2YXRlIF9zZWxlY3RUb1dvcmRBdChjb29yZHM6IFtudW1iZXIsIG51bWJlcl0pOiB2b2lkIHtcbiAgICBjb25zdCB3b3JkUG9zaXRpb24gPSB0aGlzLl9nZXRXb3JkQXQoY29vcmRzLCB0cnVlKTtcbiAgICBpZiAod29yZFBvc2l0aW9uKSB7XG4gICAgICBsZXQgZW5kUm93ID0gY29vcmRzWzFdO1xuXG4gICAgICAvLyBBZGp1c3QgbmVnYXRpdmUgc3RhcnQgdmFsdWVcbiAgICAgIHdoaWxlICh3b3JkUG9zaXRpb24uc3RhcnQgPCAwKSB7XG4gICAgICAgIHdvcmRQb3NpdGlvbi5zdGFydCArPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICAgIGVuZFJvdy0tO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGp1c3Qgd3JhcHBlZCBsZW5ndGggdmFsdWUsIHRoaXMgb25seSBuZWVkcyB0byBoYXBwZW4gd2hlbiB2YWx1ZXMgYXJlIHJldmVyc2VkIGFzIGluIHRoYXRcbiAgICAgIC8vIGNhc2Ugd2UncmUgaW50ZXJlc3RlZCBpbiB0aGUgc3RhcnQgb2YgdGhlIHdvcmQsIG5vdCB0aGUgZW5kXG4gICAgICBpZiAoIXRoaXMuX21vZGVsLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCkpIHtcbiAgICAgICAgd2hpbGUgKHdvcmRQb3NpdGlvbi5zdGFydCArIHdvcmRQb3NpdGlvbi5sZW5ndGggPiB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpIHtcbiAgICAgICAgICB3b3JkUG9zaXRpb24ubGVuZ3RoIC09IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgICAgICBlbmRSb3crKztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQgPSBbdGhpcy5fbW9kZWwuYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKSA/IHdvcmRQb3NpdGlvbi5zdGFydCA6IHdvcmRQb3NpdGlvbi5zdGFydCArIHdvcmRQb3NpdGlvbi5sZW5ndGgsIGVuZFJvd107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgd2hldGhlciB0aGUgY2hhcmFjdGVyIGlzIGNvbnNpZGVyZWQgYSB3b3JkIHNlcGFyYXRvciBieSB0aGUgc2VsZWN0XG4gICAqIHdvcmQgbG9naWMuXG4gICAqIEBwYXJhbSBjaGFyIFRoZSBjaGFyYWN0ZXIgdG8gY2hlY2suXG4gICAqL1xuICBwcml2YXRlIF9pc0NoYXJXb3JkU2VwYXJhdG9yKGNlbGw6IENlbGxEYXRhKTogYm9vbGVhbiB7XG4gICAgLy8gWmVybyB3aWR0aCBjaGFyYWN0ZXJzIGFyZSBuZXZlciBzZXBhcmF0b3JzIGFzIHRoZXkgYXJlIGFsd2F5cyB0byB0aGVcbiAgICAvLyByaWdodCBvZiB3aWRlIGNoYXJhY3RlcnNcbiAgICBpZiAoY2VsbC5nZXRXaWR0aCgpID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLndvcmRTZXBhcmF0b3IuaW5kZXhPZihjZWxsLmdldENoYXJzKCkpID49IDA7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0cyB0aGUgbGluZSBzcGVjaWZpZWQuXG4gICAqIEBwYXJhbSBsaW5lIFRoZSBsaW5lIGluZGV4LlxuICAgKi9cbiAgcHJvdGVjdGVkIF9zZWxlY3RMaW5lQXQobGluZTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3Qgd3JhcHBlZFJhbmdlID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuZ2V0V3JhcHBlZFJhbmdlRm9yTGluZShsaW5lKTtcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCA9IFswLCB3cmFwcGVkUmFuZ2UuZmlyc3RdO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IFt0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHdyYXBwZWRSYW5nZS5sYXN0XTtcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aCA9IDA7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBJUmVuZGVyRGltZW5zaW9ucywgSVJlbmRlcmVyLCBDaGFyYWN0ZXJKb2luZXJIYW5kbGVyIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBJQ29sb3JTZXQgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElTZWxlY3Rpb25SZWRyYXdSZXF1ZXN0RXZlbnQgfSBmcm9tICdicm93c2VyL3NlbGVjdGlvbi9UeXBlcyc7XG5pbXBvcnQgeyBjcmVhdGVEZWNvcmF0b3IgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZVJlZ2lzdHJ5JztcbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxuZXhwb3J0IGNvbnN0IElDaGFyU2l6ZVNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SUNoYXJTaXplU2VydmljZT4oJ0NoYXJTaXplU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJQ2hhclNpemVTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcmVhZG9ubHkgd2lkdGg6IG51bWJlcjtcbiAgcmVhZG9ubHkgaGVpZ2h0OiBudW1iZXI7XG4gIHJlYWRvbmx5IGhhc1ZhbGlkU2l6ZTogYm9vbGVhbjtcblxuICByZWFkb25seSBvbkNoYXJTaXplQ2hhbmdlOiBJRXZlbnQ8dm9pZD47XG5cbiAgbWVhc3VyZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgSUNvcmVCcm93c2VyU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJQ29yZUJyb3dzZXJTZXJ2aWNlPignQ29yZUJyb3dzZXJTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElDb3JlQnJvd3NlclNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICByZWFkb25seSBpc0ZvY3VzZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBJTW91c2VTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElNb3VzZVNlcnZpY2U+KCdNb3VzZVNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSU1vdXNlU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIGdldENvb3JkcyhldmVudDoge2NsaWVudFg6IG51bWJlciwgY2xpZW50WTogbnVtYmVyfSwgZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbENvdW50OiBudW1iZXIsIHJvd0NvdW50OiBudW1iZXIsIGlzU2VsZWN0aW9uPzogYm9vbGVhbik6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG4gIGdldFJhd0J5dGVDb29yZHMoZXZlbnQ6IE1vdXNlRXZlbnQsIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjb2xDb3VudDogbnVtYmVyLCByb3dDb3VudDogbnVtYmVyKTogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9IHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgY29uc3QgSVJlbmRlclNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SVJlbmRlclNlcnZpY2U+KCdSZW5kZXJTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElSZW5kZXJTZXJ2aWNlIGV4dGVuZHMgSURpc3Bvc2FibGUge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBvbkRpbWVuc2lvbnNDaGFuZ2U6IElFdmVudDxJUmVuZGVyRGltZW5zaW9ucz47XG4gIG9uUmVuZGVyOiBJRXZlbnQ8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PjtcbiAgb25SZWZyZXNoUmVxdWVzdDogSUV2ZW50PHsgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIgfT47XG5cbiAgZGltZW5zaW9uczogSVJlbmRlckRpbWVuc2lvbnM7XG5cbiAgcmVmcmVzaFJvd3Moc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkO1xuICByZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkO1xuICBjaGFuZ2VPcHRpb25zKCk6IHZvaWQ7XG4gIHNldFJlbmRlcmVyKHJlbmRlcmVyOiBJUmVuZGVyZXIpOiB2b2lkO1xuICBzZXRDb2xvcnMoY29sb3JzOiBJQ29sb3JTZXQpOiB2b2lkO1xuICBvbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UoKTogdm9pZDtcbiAgb25SZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkO1xuICAvLyBUT0RPOiBJcyB0aGlzIHVzZWZ1bCB3aGVuIHdlIGhhdmUgb25SZXNpemU/XG4gIG9uQ2hhclNpemVDaGFuZ2VkKCk6IHZvaWQ7XG4gIG9uQmx1cigpOiB2b2lkO1xuICBvbkZvY3VzKCk6IHZvaWQ7XG4gIG9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydDogW251bWJlciwgbnVtYmVyXSwgZW5kOiBbbnVtYmVyLCBudW1iZXJdLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuKTogdm9pZDtcbiAgb25DdXJzb3JNb3ZlKCk6IHZvaWQ7XG4gIGNsZWFyKCk6IHZvaWQ7XG4gIHJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGhhbmRsZXI6IENoYXJhY3RlckpvaW5lckhhbmRsZXIpOiBudW1iZXI7XG4gIGRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoam9pbmVySWQ6IG51bWJlcik6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBJU2VsZWN0aW9uU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJU2VsZWN0aW9uU2VydmljZT4oJ1NlbGVjdGlvblNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSVNlbGVjdGlvblNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICByZWFkb25seSBzZWxlY3Rpb25UZXh0OiBzdHJpbmc7XG4gIHJlYWRvbmx5IGhhc1NlbGVjdGlvbjogYm9vbGVhbjtcbiAgcmVhZG9ubHkgc2VsZWN0aW9uU3RhcnQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG4gIHJlYWRvbmx5IHNlbGVjdGlvbkVuZDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZDtcblxuICByZWFkb25seSBvbkxpbnV4TW91c2VTZWxlY3Rpb246IElFdmVudDxzdHJpbmc+O1xuICByZWFkb25seSBvblJlZHJhd1JlcXVlc3Q6IElFdmVudDxJU2VsZWN0aW9uUmVkcmF3UmVxdWVzdEV2ZW50PjtcbiAgcmVhZG9ubHkgb25TZWxlY3Rpb25DaGFuZ2U6IElFdmVudDx2b2lkPjtcblxuICBkaXNhYmxlKCk6IHZvaWQ7XG4gIGVuYWJsZSgpOiB2b2lkO1xuICByZXNldCgpOiB2b2lkO1xuICBzZXRTZWxlY3Rpb24ocm93OiBudW1iZXIsIGNvbDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IHZvaWQ7XG4gIHNlbGVjdEFsbCgpOiB2b2lkO1xuICBzZWxlY3RMaW5lcyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQ7XG4gIGNsZWFyU2VsZWN0aW9uKCk6IHZvaWQ7XG4gIGlzQ2xpY2tJblNlbGVjdGlvbihldmVudDogTW91c2VFdmVudCk6IGJvb2xlYW47XG4gIHNlbGVjdFdvcmRBdEN1cnNvcihldmVudDogTW91c2VFdmVudCk6IHZvaWQ7XG4gIHNob3VsZENvbHVtblNlbGVjdChldmVudDogS2V5Ym9hcmRFdmVudCB8IE1vdXNlRXZlbnQpOiBib29sZWFuO1xuICBzaG91bGRGb3JjZVNlbGVjdGlvbihldmVudDogTW91c2VFdmVudCk6IGJvb2xlYW47XG4gIHJlZnJlc2goaXNMaW51eE1vdXNlU2VsZWN0aW9uPzogYm9vbGVhbik6IHZvaWQ7XG4gIG9uTW91c2VEb3duKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IElTb3VuZFNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SVNvdW5kU2VydmljZT4oJ1NvdW5kU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJU291bmRTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcGxheUJlbGxTb3VuZCgpOiB2b2lkO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSVNvdW5kU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuXG5leHBvcnQgY2xhc3MgU291bmRTZXJ2aWNlIGltcGxlbWVudHMgSVNvdW5kU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHByaXZhdGUgc3RhdGljIF9hdWRpb0NvbnRleHQ6IEF1ZGlvQ29udGV4dDtcblxuICBzdGF0aWMgZ2V0IGF1ZGlvQ29udGV4dCgpOiBBdWRpb0NvbnRleHQgfCBudWxsIHtcbiAgICBpZiAoIVNvdW5kU2VydmljZS5fYXVkaW9Db250ZXh0KSB7XG4gICAgICBjb25zdCBhdWRpb0NvbnRleHRDdG9yOiB0eXBlb2YgQXVkaW9Db250ZXh0ID0gKDxhbnk+d2luZG93KS5BdWRpb0NvbnRleHQgfHwgKDxhbnk+d2luZG93KS53ZWJraXRBdWRpb0NvbnRleHQ7XG4gICAgICBpZiAoIWF1ZGlvQ29udGV4dEN0b3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdXZWIgQXVkaW8gQVBJIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyLiBDb25zaWRlciB1cGdyYWRpbmcgdG8gdGhlIGxhdGVzdCB2ZXJzaW9uJyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgU291bmRTZXJ2aWNlLl9hdWRpb0NvbnRleHQgPSBuZXcgYXVkaW9Db250ZXh0Q3RvcigpO1xuICAgIH1cbiAgICByZXR1cm4gU291bmRTZXJ2aWNlLl9hdWRpb0NvbnRleHQ7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2VcbiAgKSB7XG4gIH1cblxuICBwdWJsaWMgcGxheUJlbGxTb3VuZCgpOiB2b2lkIHtcbiAgICBjb25zdCBjdHggPSBTb3VuZFNlcnZpY2UuYXVkaW9Db250ZXh0O1xuICAgIGlmICghY3R4KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGJlbGxBdWRpb1NvdXJjZSA9IGN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICBjdHguZGVjb2RlQXVkaW9EYXRhKHRoaXMuX2Jhc2U2NFRvQXJyYXlCdWZmZXIodGhpcy5fcmVtb3ZlTWltZVR5cGUodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5iZWxsU291bmQpKSwgKGJ1ZmZlcikgPT4ge1xuICAgICAgYmVsbEF1ZGlvU291cmNlLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICAgIGJlbGxBdWRpb1NvdXJjZS5jb25uZWN0KGN0eC5kZXN0aW5hdGlvbik7XG4gICAgICBiZWxsQXVkaW9Tb3VyY2Uuc3RhcnQoMCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9iYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NDogc3RyaW5nKTogQXJyYXlCdWZmZXIge1xuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IHdpbmRvdy5hdG9iKGJhc2U2NCk7XG4gICAgY29uc3QgbGVuID0gYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbik7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBieXRlc1tpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cblxuICAgIHJldHVybiBieXRlcy5idWZmZXI7XG4gIH1cblxuICBwcml2YXRlIF9yZW1vdmVNaW1lVHlwZShkYXRhVVJJOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFNwbGl0IHRoZSBpbnB1dCB0byBnZXQgdGhlIG1pbWUtdHlwZSBhbmQgdGhlIGRhdGEgaXRzZWxmXG4gICAgY29uc3Qgc3BsaXRVcmkgPSBkYXRhVVJJLnNwbGl0KCcsJyk7XG5cbiAgICAvLyBSZXR1cm4gb25seSB0aGUgZGF0YVxuICAgIHJldHVybiBzcGxpdFVyaVsxXTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBmaWxsIH0gZnJvbSAnY29tbW9uL1R5cGVkQXJyYXlVdGlscyc7XG5cbmV4cG9ydCBjb25zdCB3Y3dpZHRoID0gKGZ1bmN0aW9uKG9wdHM6IHtudWw6IG51bWJlciwgY29udHJvbDogbnVtYmVyfSk6ICh1Y3M6IG51bWJlcikgPT4gbnVtYmVyIHtcbiAgLy8gZXh0cmFjdGVkIGZyb20gaHR0cHM6Ly93d3cuY2wuY2FtLmFjLnVrLyU3RW1nazI1L3Vjcy93Y3dpZHRoLmNcbiAgLy8gY29tYmluaW5nIGNoYXJhY3RlcnNcbiAgY29uc3QgQ09NQklOSU5HX0JNUCA9IFtcbiAgICBbMHgwMzAwLCAweDAzNkZdLCBbMHgwNDgzLCAweDA0ODZdLCBbMHgwNDg4LCAweDA0ODldLFxuICAgIFsweDA1OTEsIDB4MDVCRF0sIFsweDA1QkYsIDB4MDVCRl0sIFsweDA1QzEsIDB4MDVDMl0sXG4gICAgWzB4MDVDNCwgMHgwNUM1XSwgWzB4MDVDNywgMHgwNUM3XSwgWzB4MDYwMCwgMHgwNjAzXSxcbiAgICBbMHgwNjEwLCAweDA2MTVdLCBbMHgwNjRCLCAweDA2NUVdLCBbMHgwNjcwLCAweDA2NzBdLFxuICAgIFsweDA2RDYsIDB4MDZFNF0sIFsweDA2RTcsIDB4MDZFOF0sIFsweDA2RUEsIDB4MDZFRF0sXG4gICAgWzB4MDcwRiwgMHgwNzBGXSwgWzB4MDcxMSwgMHgwNzExXSwgWzB4MDczMCwgMHgwNzRBXSxcbiAgICBbMHgwN0E2LCAweDA3QjBdLCBbMHgwN0VCLCAweDA3RjNdLCBbMHgwOTAxLCAweDA5MDJdLFxuICAgIFsweDA5M0MsIDB4MDkzQ10sIFsweDA5NDEsIDB4MDk0OF0sIFsweDA5NEQsIDB4MDk0RF0sXG4gICAgWzB4MDk1MSwgMHgwOTU0XSwgWzB4MDk2MiwgMHgwOTYzXSwgWzB4MDk4MSwgMHgwOTgxXSxcbiAgICBbMHgwOUJDLCAweDA5QkNdLCBbMHgwOUMxLCAweDA5QzRdLCBbMHgwOUNELCAweDA5Q0RdLFxuICAgIFsweDA5RTIsIDB4MDlFM10sIFsweDBBMDEsIDB4MEEwMl0sIFsweDBBM0MsIDB4MEEzQ10sXG4gICAgWzB4MEE0MSwgMHgwQTQyXSwgWzB4MEE0NywgMHgwQTQ4XSwgWzB4MEE0QiwgMHgwQTREXSxcbiAgICBbMHgwQTcwLCAweDBBNzFdLCBbMHgwQTgxLCAweDBBODJdLCBbMHgwQUJDLCAweDBBQkNdLFxuICAgIFsweDBBQzEsIDB4MEFDNV0sIFsweDBBQzcsIDB4MEFDOF0sIFsweDBBQ0QsIDB4MEFDRF0sXG4gICAgWzB4MEFFMiwgMHgwQUUzXSwgWzB4MEIwMSwgMHgwQjAxXSwgWzB4MEIzQywgMHgwQjNDXSxcbiAgICBbMHgwQjNGLCAweDBCM0ZdLCBbMHgwQjQxLCAweDBCNDNdLCBbMHgwQjRELCAweDBCNERdLFxuICAgIFsweDBCNTYsIDB4MEI1Nl0sIFsweDBCODIsIDB4MEI4Ml0sIFsweDBCQzAsIDB4MEJDMF0sXG4gICAgWzB4MEJDRCwgMHgwQkNEXSwgWzB4MEMzRSwgMHgwQzQwXSwgWzB4MEM0NiwgMHgwQzQ4XSxcbiAgICBbMHgwQzRBLCAweDBDNERdLCBbMHgwQzU1LCAweDBDNTZdLCBbMHgwQ0JDLCAweDBDQkNdLFxuICAgIFsweDBDQkYsIDB4MENCRl0sIFsweDBDQzYsIDB4MENDNl0sIFsweDBDQ0MsIDB4MENDRF0sXG4gICAgWzB4MENFMiwgMHgwQ0UzXSwgWzB4MEQ0MSwgMHgwRDQzXSwgWzB4MEQ0RCwgMHgwRDREXSxcbiAgICBbMHgwRENBLCAweDBEQ0FdLCBbMHgwREQyLCAweDBERDRdLCBbMHgwREQ2LCAweDBERDZdLFxuICAgIFsweDBFMzEsIDB4MEUzMV0sIFsweDBFMzQsIDB4MEUzQV0sIFsweDBFNDcsIDB4MEU0RV0sXG4gICAgWzB4MEVCMSwgMHgwRUIxXSwgWzB4MEVCNCwgMHgwRUI5XSwgWzB4MEVCQiwgMHgwRUJDXSxcbiAgICBbMHgwRUM4LCAweDBFQ0RdLCBbMHgwRjE4LCAweDBGMTldLCBbMHgwRjM1LCAweDBGMzVdLFxuICAgIFsweDBGMzcsIDB4MEYzN10sIFsweDBGMzksIDB4MEYzOV0sIFsweDBGNzEsIDB4MEY3RV0sXG4gICAgWzB4MEY4MCwgMHgwRjg0XSwgWzB4MEY4NiwgMHgwRjg3XSwgWzB4MEY5MCwgMHgwRjk3XSxcbiAgICBbMHgwRjk5LCAweDBGQkNdLCBbMHgwRkM2LCAweDBGQzZdLCBbMHgxMDJELCAweDEwMzBdLFxuICAgIFsweDEwMzIsIDB4MTAzMl0sIFsweDEwMzYsIDB4MTAzN10sIFsweDEwMzksIDB4MTAzOV0sXG4gICAgWzB4MTA1OCwgMHgxMDU5XSwgWzB4MTE2MCwgMHgxMUZGXSwgWzB4MTM1RiwgMHgxMzVGXSxcbiAgICBbMHgxNzEyLCAweDE3MTRdLCBbMHgxNzMyLCAweDE3MzRdLCBbMHgxNzUyLCAweDE3NTNdLFxuICAgIFsweDE3NzIsIDB4MTc3M10sIFsweDE3QjQsIDB4MTdCNV0sIFsweDE3QjcsIDB4MTdCRF0sXG4gICAgWzB4MTdDNiwgMHgxN0M2XSwgWzB4MTdDOSwgMHgxN0QzXSwgWzB4MTdERCwgMHgxN0REXSxcbiAgICBbMHgxODBCLCAweDE4MERdLCBbMHgxOEE5LCAweDE4QTldLCBbMHgxOTIwLCAweDE5MjJdLFxuICAgIFsweDE5MjcsIDB4MTkyOF0sIFsweDE5MzIsIDB4MTkzMl0sIFsweDE5MzksIDB4MTkzQl0sXG4gICAgWzB4MUExNywgMHgxQTE4XSwgWzB4MUIwMCwgMHgxQjAzXSwgWzB4MUIzNCwgMHgxQjM0XSxcbiAgICBbMHgxQjM2LCAweDFCM0FdLCBbMHgxQjNDLCAweDFCM0NdLCBbMHgxQjQyLCAweDFCNDJdLFxuICAgIFsweDFCNkIsIDB4MUI3M10sIFsweDFEQzAsIDB4MURDQV0sIFsweDFERkUsIDB4MURGRl0sXG4gICAgWzB4MjAwQiwgMHgyMDBGXSwgWzB4MjAyQSwgMHgyMDJFXSwgWzB4MjA2MCwgMHgyMDYzXSxcbiAgICBbMHgyMDZBLCAweDIwNkZdLCBbMHgyMEQwLCAweDIwRUZdLCBbMHgzMDJBLCAweDMwMkZdLFxuICAgIFsweDMwOTksIDB4MzA5QV0sIFsweEE4MDYsIDB4QTgwNl0sIFsweEE4MEIsIDB4QTgwQl0sXG4gICAgWzB4QTgyNSwgMHhBODI2XSwgWzB4RkIxRSwgMHhGQjFFXSwgWzB4RkUwMCwgMHhGRTBGXSxcbiAgICBbMHhGRTIwLCAweEZFMjNdLCBbMHhGRUZGLCAweEZFRkZdLCBbMHhGRkY5LCAweEZGRkJdXG4gIF07XG4gIGNvbnN0IENPTUJJTklOR19ISUdIID0gW1xuICAgIFsweDEwQTAxLCAweDEwQTAzXSwgWzB4MTBBMDUsIDB4MTBBMDZdLCBbMHgxMEEwQywgMHgxMEEwRl0sXG4gICAgWzB4MTBBMzgsIDB4MTBBM0FdLCBbMHgxMEEzRiwgMHgxMEEzRl0sIFsweDFEMTY3LCAweDFEMTY5XSxcbiAgICBbMHgxRDE3MywgMHgxRDE4Ml0sIFsweDFEMTg1LCAweDFEMThCXSwgWzB4MUQxQUEsIDB4MUQxQURdLFxuICAgIFsweDFEMjQyLCAweDFEMjQ0XSwgWzB4RTAwMDEsIDB4RTAwMDFdLCBbMHhFMDAyMCwgMHhFMDA3Rl0sXG4gICAgWzB4RTAxMDAsIDB4RTAxRUZdXG4gIF07XG4gIC8vIGJpbmFyeSBzZWFyY2hcbiAgZnVuY3Rpb24gYmlzZWFyY2godWNzOiBudW1iZXIsIGRhdGE6IG51bWJlcltdW10pOiBib29sZWFuIHtcbiAgICBsZXQgbWluID0gMDtcbiAgICBsZXQgbWF4ID0gZGF0YS5sZW5ndGggLSAxO1xuICAgIGxldCBtaWQ7XG4gICAgaWYgKHVjcyA8IGRhdGFbMF1bMF0gfHwgdWNzID4gZGF0YVttYXhdWzFdKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHdoaWxlIChtYXggPj0gbWluKSB7XG4gICAgICBtaWQgPSAobWluICsgbWF4KSA+PiAxO1xuICAgICAgaWYgKHVjcyA+IGRhdGFbbWlkXVsxXSkge1xuICAgICAgICBtaW4gPSBtaWQgKyAxO1xuICAgICAgfSBlbHNlIGlmICh1Y3MgPCBkYXRhW21pZF1bMF0pIHtcbiAgICAgICAgbWF4ID0gbWlkIC0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZnVuY3Rpb24gd2N3aWR0aEhpZ2godWNzOiBudW1iZXIpOiAwIHwgMSB8IDIge1xuICAgIGlmIChiaXNlYXJjaCh1Y3MsIENPTUJJTklOR19ISUdIKSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGlmICgodWNzID49IDB4MjAwMDAgJiYgdWNzIDw9IDB4MmZmZmQpIHx8ICh1Y3MgPj0gMHgzMDAwMCAmJiB1Y3MgPD0gMHgzZmZmZCkpIHtcbiAgICAgIHJldHVybiAyO1xuICAgIH1cbiAgICByZXR1cm4gMTtcbiAgfVxuICBjb25zdCBjb250cm9sID0gb3B0cy5jb250cm9sIHwgMDtcblxuICAvLyBjcmVhdGUgbG9va3VwIHRhYmxlIGZvciBCTVAgcGxhbmVcbiAgY29uc3QgdGFibGUgPSBuZXcgVWludDhBcnJheSg2NTUzNik7XG4gIGZpbGwodGFibGUsIDEpO1xuICB0YWJsZVswXSA9IG9wdHMubnVsO1xuICAvLyBjb250cm9sIGNoYXJzXG4gIGZpbGwodGFibGUsIG9wdHMuY29udHJvbCwgMSwgMzIpO1xuICBmaWxsKHRhYmxlLCBvcHRzLmNvbnRyb2wsIDB4N2YsIDB4YTApO1xuXG4gIC8vIGFwcGx5IHdpZGUgY2hhciBydWxlcyBmaXJzdFxuICAvLyB3aWRlIGNoYXJzXG4gIGZpbGwodGFibGUsIDIsIDB4MTEwMCwgMHgxMTYwKTtcbiAgdGFibGVbMHgyMzI5XSA9IDI7XG4gIHRhYmxlWzB4MjMyYV0gPSAyO1xuICBmaWxsKHRhYmxlLCAyLCAweDJlODAsIDB4YTRkMCk7XG4gIHRhYmxlWzB4MzAzZl0gPSAxOyAgLy8gd3JvbmdseSBpbiBsYXN0IGxpbmVcblxuICBmaWxsKHRhYmxlLCAyLCAweGFjMDAsIDB4ZDdhNCk7XG4gIGZpbGwodGFibGUsIDIsIDB4ZjkwMCwgMHhmYjAwKTtcbiAgZmlsbCh0YWJsZSwgMiwgMHhmZTEwLCAweGZlMWEpO1xuICBmaWxsKHRhYmxlLCAyLCAweGZlMzAsIDB4ZmU3MCk7XG4gIGZpbGwodGFibGUsIDIsIDB4ZmYwMCwgMHhmZjYxKTtcbiAgZmlsbCh0YWJsZSwgMiwgMHhmZmUwLCAweGZmZTcpO1xuXG4gIC8vIGFwcGx5IGNvbWJpbmluZyBsYXN0IHRvIGVuc3VyZSB3ZSBvdmVyd3JpdGVcbiAgLy8gd3JvbmdseSB3aWRlIHNldCBjaGFyczpcbiAgLy8gICAgdGhlIG9yaWdpbmFsIGFsZ28gZXZhbHMgY29tYmluaW5nIGZpcnN0IGFuZCBmYWxsc1xuICAvLyAgICB0aHJvdWdoIHRvIHdpZGUgY2hlY2sgc28gd2Ugc2ltcGx5IGRvIGhlcmUgdGhlIG9wcG9zaXRlXG4gIC8vIGNvbWJpbmluZyAwXG4gIGZvciAobGV0IHIgPSAwOyByIDwgQ09NQklOSU5HX0JNUC5sZW5ndGg7ICsrcikge1xuICAgIGZpbGwodGFibGUsIDAsIENPTUJJTklOR19CTVBbcl1bMF0sIENPTUJJTklOR19CTVBbcl1bMV0gKyAxKTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAobnVtOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmIChudW0gPCAzMikge1xuICAgICAgcmV0dXJuIGNvbnRyb2wgfCAwO1xuICAgIH1cbiAgICBpZiAobnVtIDwgMTI3KSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgaWYgKG51bSA8IDY1NTM2KSB7XG4gICAgICByZXR1cm4gdGFibGVbbnVtXTtcbiAgICB9XG4gICAgLy8gZG8gYSBmdWxsIHNlYXJjaCBmb3IgaGlnaCBjb2RlcG9pbnRzXG4gICAgcmV0dXJuIHdjd2lkdGhIaWdoKG51bSk7XG4gIH07XG59KSh7bnVsOiAwLCBjb250cm9sOiAwfSk7ICAvLyBjb25maWd1cmFibGUgb3B0aW9uc1xuXG4vKipcbiAqIEdldCB0aGUgdGVybWluYWwgY2VsbCB3aWR0aCBmb3IgYSBzdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHJpbmdDZWxsV2lkdGgoczogc3RyaW5nKTogbnVtYmVyIHtcbiAgbGV0IHJlc3VsdCA9IDA7XG4gIGNvbnN0IGxlbmd0aCA9IHMubGVuZ3RoO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgbGV0IGNvZGUgPSBzLmNoYXJDb2RlQXQoaSk7XG4gICAgLy8gc3Vycm9nYXRlIHBhaXIgZmlyc3RcbiAgICBpZiAoMHhEODAwIDw9IGNvZGUgJiYgY29kZSA8PSAweERCRkYpIHtcbiAgICAgIGlmICgrK2kgPj0gbGVuZ3RoKSB7XG4gICAgICAgIC8vIHRoaXMgc2hvdWxkIG5vdCBoYXBwZW4gd2l0aCBzdHJpbmdzIHJldHJpZXZlZCBmcm9tXG4gICAgICAgIC8vIEJ1ZmZlci50cmFuc2xhdGVUb1N0cmluZyBhcyBpdCBjb252ZXJ0cyBmcm9tIFVURi0zMlxuICAgICAgICAvLyBhbmQgdGhlcmVmb3JlIGFsd2F5cyBzaG91bGQgY29udGFpbiB0aGUgc2Vjb25kIHBhcnRcbiAgICAgICAgLy8gZm9yIGFueSBvdGhlciBzdHJpbmcgd2Ugc3RpbGwgaGF2ZSB0byBoYW5kbGUgaXQgc29tZWhvdzpcbiAgICAgICAgLy8gc2ltcGx5IHRyZWF0IHRoZSBsb25lbHkgc3Vycm9nYXRlIGZpcnN0IGFzIGEgc2luZ2xlIGNoYXIgKFVDUy0yIGJlaGF2aW9yKVxuICAgICAgICByZXR1cm4gcmVzdWx0ICsgd2N3aWR0aChjb2RlKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNlY29uZCA9IHMuY2hhckNvZGVBdChpKTtcbiAgICAgIC8vIGNvbnZlcnQgc3Vycm9nYXRlIHBhaXIgdG8gaGlnaCBjb2RlcG9pbnQgb25seSBmb3IgdmFsaWQgc2Vjb25kIHBhcnQgKFVURi0xNilcbiAgICAgIC8vIG90aGVyd2lzZSB0cmVhdCB0aGVtIGluZGVwZW5kZW50bHkgKFVDUy0yIGJlaGF2aW9yKVxuICAgICAgaWYgKDB4REMwMCA8PSBzZWNvbmQgJiYgc2Vjb25kIDw9IDB4REZGRikge1xuICAgICAgICBjb2RlID0gKGNvZGUgLSAweEQ4MDApICogMHg0MDAgKyBzZWNvbmQgLSAweERDMDAgKyAweDEwMDAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ICs9IHdjd2lkdGgoc2Vjb25kKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVzdWx0ICs9IHdjd2lkdGgoY29kZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNpcmN1bGFyTGlzdCB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIElJbnNlcnRFdmVudCB7XG4gIGluZGV4OiBudW1iZXI7XG4gIGFtb3VudDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEZWxldGVFdmVudCB7XG4gIGluZGV4OiBudW1iZXI7XG4gIGFtb3VudDogbnVtYmVyO1xufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaXJjdWxhciBsaXN0OyBhIGxpc3Qgd2l0aCBhIG1heGltdW0gc2l6ZSB0aGF0IHdyYXBzIGFyb3VuZCB3aGVuIHB1c2ggaXMgY2FsbGVkLFxuICogb3ZlcnJpZGluZyB2YWx1ZXMgYXQgdGhlIHN0YXJ0IG9mIHRoZSBsaXN0LlxuICovXG5leHBvcnQgY2xhc3MgQ2lyY3VsYXJMaXN0PFQ+IGltcGxlbWVudHMgSUNpcmN1bGFyTGlzdDxUPiB7XG4gIHByb3RlY3RlZCBfYXJyYXk6IChUIHwgdW5kZWZpbmVkKVtdO1xuICBwcml2YXRlIF9zdGFydEluZGV4OiBudW1iZXI7XG4gIHByaXZhdGUgX2xlbmd0aDogbnVtYmVyO1xuXG4gIHB1YmxpYyBvbkRlbGV0ZUVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPElEZWxldGVFdmVudD4oKTtcbiAgcHVibGljIGdldCBvbkRlbGV0ZSgpOiBJRXZlbnQ8SURlbGV0ZUV2ZW50PiB7IHJldHVybiB0aGlzLm9uRGVsZXRlRW1pdHRlci5ldmVudDsgfVxuICBwdWJsaWMgb25JbnNlcnRFbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcjxJSW5zZXJ0RXZlbnQ+KCk7XG4gIHB1YmxpYyBnZXQgb25JbnNlcnQoKTogSUV2ZW50PElJbnNlcnRFdmVudD4geyByZXR1cm4gdGhpcy5vbkluc2VydEVtaXR0ZXIuZXZlbnQ7IH1cbiAgcHVibGljIG9uVHJpbUVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKTtcbiAgcHVibGljIGdldCBvblRyaW0oKTogSUV2ZW50PG51bWJlcj4geyByZXR1cm4gdGhpcy5vblRyaW1FbWl0dGVyLmV2ZW50OyB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfbWF4TGVuZ3RoOiBudW1iZXJcbiAgKSB7XG4gICAgdGhpcy5fYXJyYXkgPSBuZXcgQXJyYXk8VD4odGhpcy5fbWF4TGVuZ3RoKTtcbiAgICB0aGlzLl9zdGFydEluZGV4ID0gMDtcbiAgICB0aGlzLl9sZW5ndGggPSAwO1xuICB9XG5cbiAgcHVibGljIGdldCBtYXhMZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbWF4TGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIHNldCBtYXhMZW5ndGgobmV3TWF4TGVuZ3RoOiBudW1iZXIpIHtcbiAgICAvLyBUaGVyZSB3YXMgbm8gY2hhbmdlIGluIG1heExlbmd0aCwgcmV0dXJuIGVhcmx5LlxuICAgIGlmICh0aGlzLl9tYXhMZW5ndGggPT09IG5ld01heExlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlY29uc3RydWN0IGFycmF5LCBzdGFydGluZyBhdCBpbmRleCAwLiBPbmx5IHRyYW5zZmVyIHZhbHVlcyBmcm9tIHRoZVxuICAgIC8vIGluZGV4ZXMgMCB0byBsZW5ndGguXG4gICAgY29uc3QgbmV3QXJyYXkgPSBuZXcgQXJyYXk8VCB8IHVuZGVmaW5lZD4obmV3TWF4TGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgubWluKG5ld01heExlbmd0aCwgdGhpcy5sZW5ndGgpOyBpKyspIHtcbiAgICAgIG5ld0FycmF5W2ldID0gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaSldO1xuICAgIH1cbiAgICB0aGlzLl9hcnJheSA9IG5ld0FycmF5O1xuICAgIHRoaXMuX21heExlbmd0aCA9IG5ld01heExlbmd0aDtcbiAgICB0aGlzLl9zdGFydEluZGV4ID0gMDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbGVuZ3RoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2xlbmd0aDtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgbGVuZ3RoKG5ld0xlbmd0aDogbnVtYmVyKSB7XG4gICAgaWYgKG5ld0xlbmd0aCA+IHRoaXMuX2xlbmd0aCkge1xuICAgICAgZm9yIChsZXQgaSA9IHRoaXMuX2xlbmd0aDsgaSA8IG5ld0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX2FycmF5W2ldID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9sZW5ndGggPSBuZXdMZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdmFsdWUgYXQgYW4gaW5kZXguXG4gICAqXG4gICAqIE5vdGUgdGhhdCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucyB0aGVyZSBpcyBubyBib3VuZHMgY2hlY2tpbmcgaGVyZSwgdGhlIGluZGV4IHJlZmVyZW5jZSBpc1xuICAgKiBjaXJjdWxhciBzbyB0aGlzIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsdWUgYW5kIG5ldmVyIHRocm93LlxuICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gICAqIEByZXR1cm4gVGhlIHZhbHVlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGluZGV4LlxuICAgKi9cbiAgcHVibGljIGdldChpbmRleDogbnVtYmVyKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGluZGV4KV07XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgYXQgYW4gaW5kZXguXG4gICAqXG4gICAqIE5vdGUgdGhhdCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucyB0aGVyZSBpcyBubyBib3VuZHMgY2hlY2tpbmcgaGVyZSwgdGhlIGluZGV4IHJlZmVyZW5jZSBpc1xuICAgKiBjaXJjdWxhciBzbyB0aGlzIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsdWUgYW5kIG5ldmVyIHRocm93LlxuICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHRvIHNldC5cbiAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gICAqL1xuICBwdWJsaWMgc2V0KGluZGV4OiBudW1iZXIsIHZhbHVlOiBUIHwgdW5kZWZpbmVkKTogdm9pZCB7XG4gICAgdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaW5kZXgpXSA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFB1c2hlcyBhIG5ldyB2YWx1ZSBvbnRvIHRoZSBsaXN0LCB3cmFwcGluZyBhcm91bmQgdG8gdGhlIHN0YXJ0IG9mIHRoZSBhcnJheSwgb3ZlcnJpZGluZyBpbmRleCAwXG4gICAqIGlmIHRoZSBtYXhpbXVtIGxlbmd0aCBpcyByZWFjaGVkLlxuICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHB1c2ggb250byB0aGUgbGlzdC5cbiAgICovXG4gIHB1YmxpYyBwdXNoKHZhbHVlOiBUKTogdm9pZCB7XG4gICAgdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoKV0gPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5fbGVuZ3RoID09PSB0aGlzLl9tYXhMZW5ndGgpIHtcbiAgICAgIHRoaXMuX3N0YXJ0SW5kZXggPSArK3RoaXMuX3N0YXJ0SW5kZXggJSB0aGlzLl9tYXhMZW5ndGg7XG4gICAgICB0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZSgxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGVuZ3RoKys7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkdmFuY2UgcmluZ2J1ZmZlciBpbmRleCBhbmQgcmV0dXJuIGN1cnJlbnQgZWxlbWVudCBmb3IgcmVjeWNsaW5nLlxuICAgKiBOb3RlOiBUaGUgYnVmZmVyIG11c3QgYmUgZnVsbCBmb3IgdGhpcyBtZXRob2QgdG8gd29yay5cbiAgICogQHRocm93cyBXaGVuIHRoZSBidWZmZXIgaXMgbm90IGZ1bGwuXG4gICAqL1xuICBwdWJsaWMgcmVjeWNsZSgpOiBUIHtcbiAgICBpZiAodGhpcy5fbGVuZ3RoICE9PSB0aGlzLl9tYXhMZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuIG9ubHkgcmVjeWNsZSB3aGVuIHRoZSBidWZmZXIgaXMgZnVsbCcpO1xuICAgIH1cbiAgICB0aGlzLl9zdGFydEluZGV4ID0gKyt0aGlzLl9zdGFydEluZGV4ICUgdGhpcy5fbWF4TGVuZ3RoO1xuICAgIHRoaXMub25UcmltRW1pdHRlci5maXJlKDEpO1xuICAgIHJldHVybiB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleCh0aGlzLl9sZW5ndGggLSAxKV0hO1xuICB9XG5cbiAgLyoqXG4gICAqIFJpbmdidWZmZXIgaXMgYXQgbWF4IGxlbmd0aC5cbiAgICovXG4gIHB1YmxpYyBnZXQgaXNGdWxsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGggPT09IHRoaXMuX21heExlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFuZCByZXR1cm5zIHRoZSBsYXN0IHZhbHVlIG9uIHRoZSBsaXN0LlxuICAgKiBAcmV0dXJuIFRoZSBwb3BwZWQgdmFsdWUuXG4gICAqL1xuICBwdWJsaWMgcG9wKCk6IFQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleCh0aGlzLl9sZW5ndGgtLSAtIDEpXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFuZC9vciBpbnNlcnRzIGl0ZW1zIGF0IGEgcGFydGljdWxhciBpbmRleCAoaW4gdGhhdCBvcmRlcikuIFVubGlrZVxuICAgKiBBcnJheS5wcm90b3R5cGUuc3BsaWNlLCB0aGlzIG9wZXJhdGlvbiBkb2VzIG5vdCByZXR1cm4gdGhlIGRlbGV0ZWQgaXRlbXMgYXMgYSBuZXcgYXJyYXkgaW5cbiAgICogb3JkZXIgdG8gc2F2ZSBjcmVhdGluZyBhIG5ldyBhcnJheS4gTm90ZSB0aGF0IHRoaXMgb3BlcmF0aW9uIG1heSBzaGlmdCBhbGwgdmFsdWVzIGluIHRoZSBsaXN0XG4gICAqIGluIHRoZSB3b3JzdCBjYXNlLlxuICAgKiBAcGFyYW0gc3RhcnQgVGhlIGluZGV4IHRvIGRlbGV0ZSBhbmQvb3IgaW5zZXJ0LlxuICAgKiBAcGFyYW0gZGVsZXRlQ291bnQgVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBkZWxldGUuXG4gICAqIEBwYXJhbSBpdGVtcyBUaGUgaXRlbXMgdG8gaW5zZXJ0LlxuICAgKi9cbiAgcHVibGljIHNwbGljZShzdGFydDogbnVtYmVyLCBkZWxldGVDb3VudDogbnVtYmVyLCAuLi5pdGVtczogVFtdKTogdm9pZCB7XG4gICAgLy8gRGVsZXRlIGl0ZW1zXG4gICAgaWYgKGRlbGV0ZUNvdW50KSB7XG4gICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCB0aGlzLl9sZW5ndGggLSBkZWxldGVDb3VudDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGkpXSA9IHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGkgKyBkZWxldGVDb3VudCldO1xuICAgICAgfVxuICAgICAgdGhpcy5fbGVuZ3RoIC09IGRlbGV0ZUNvdW50O1xuICAgIH1cblxuICAgIC8vIEFkZCBpdGVtc1xuICAgIGZvciAobGV0IGkgPSB0aGlzLl9sZW5ndGggLSAxOyBpID49IHN0YXJ0OyBpLS0pIHtcbiAgICAgIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGkgKyBpdGVtcy5sZW5ndGgpXSA9IHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGkpXTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoc3RhcnQgKyBpKV0gPSBpdGVtc1tpXTtcbiAgICB9XG5cbiAgICAvLyBBZGp1c3QgbGVuZ3RoIGFzIG5lZWRlZFxuICAgIGlmICh0aGlzLl9sZW5ndGggKyBpdGVtcy5sZW5ndGggPiB0aGlzLl9tYXhMZW5ndGgpIHtcbiAgICAgIGNvbnN0IGNvdW50VG9UcmltID0gKHRoaXMuX2xlbmd0aCArIGl0ZW1zLmxlbmd0aCkgLSB0aGlzLl9tYXhMZW5ndGg7XG4gICAgICB0aGlzLl9zdGFydEluZGV4ICs9IGNvdW50VG9UcmltO1xuICAgICAgdGhpcy5fbGVuZ3RoID0gdGhpcy5fbWF4TGVuZ3RoO1xuICAgICAgdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoY291bnRUb1RyaW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sZW5ndGggKz0gaXRlbXMubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmltcyBhIG51bWJlciBvZiBpdGVtcyBmcm9tIHRoZSBzdGFydCBvZiB0aGUgbGlzdC5cbiAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgaXRlbXMgdG8gcmVtb3ZlLlxuICAgKi9cbiAgcHVibGljIHRyaW1TdGFydChjb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGNvdW50ID4gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICBjb3VudCA9IHRoaXMuX2xlbmd0aDtcbiAgICB9XG4gICAgdGhpcy5fc3RhcnRJbmRleCArPSBjb3VudDtcbiAgICB0aGlzLl9sZW5ndGggLT0gY291bnQ7XG4gICAgdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoY291bnQpO1xuICB9XG5cbiAgcHVibGljIHNoaWZ0RWxlbWVudHMoc3RhcnQ6IG51bWJlciwgY291bnQ6IG51bWJlciwgb2Zmc2V0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoY291bnQgPD0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMuX2xlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdGFydCBhcmd1bWVudCBvdXQgb2YgcmFuZ2UnKTtcbiAgICB9XG4gICAgaWYgKHN0YXJ0ICsgb2Zmc2V0IDwgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc2hpZnQgZWxlbWVudHMgaW4gbGlzdCBiZXlvbmQgaW5kZXggMCcpO1xuICAgIH1cblxuICAgIGlmIChvZmZzZXQgPiAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gY291bnQgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB0aGlzLnNldChzdGFydCArIGkgKyBvZmZzZXQsIHRoaXMuZ2V0KHN0YXJ0ICsgaSkpO1xuICAgICAgfVxuICAgICAgY29uc3QgZXhwYW5kTGlzdEJ5ID0gKHN0YXJ0ICsgY291bnQgKyBvZmZzZXQpIC0gdGhpcy5fbGVuZ3RoO1xuICAgICAgaWYgKGV4cGFuZExpc3RCeSA+IDApIHtcbiAgICAgICAgdGhpcy5fbGVuZ3RoICs9IGV4cGFuZExpc3RCeTtcbiAgICAgICAgd2hpbGUgKHRoaXMuX2xlbmd0aCA+IHRoaXMuX21heExlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX2xlbmd0aC0tO1xuICAgICAgICAgIHRoaXMuX3N0YXJ0SW5kZXgrKztcbiAgICAgICAgICB0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZSgxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgdGhpcy5zZXQoc3RhcnQgKyBpICsgb2Zmc2V0LCB0aGlzLmdldChzdGFydCArIGkpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3ljbGljIGluZGV4IGZvciB0aGUgc3BlY2lmaWVkIHJlZ3VsYXIgaW5kZXguIFRoZSBjeWNsaWMgaW5kZXggY2FuIHRoZW4gYmUgdXNlZCBvbiB0aGVcbiAgICogYmFja2luZyBhcnJheSB0byBnZXQgdGhlIGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWd1bGFyIGluZGV4LlxuICAgKiBAcGFyYW0gaW5kZXggVGhlIHJlZ3VsYXIgaW5kZXguXG4gICAqIEByZXR1cm5zIFRoZSBjeWNsaWMgaW5kZXguXG4gICAqL1xuICBwcml2YXRlIF9nZXRDeWNsaWNJbmRleChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHRoaXMuX3N0YXJ0SW5kZXggKyBpbmRleCkgJSB0aGlzLl9tYXhMZW5ndGg7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuLypcbiAqIEEgc2ltcGxlIHV0aWxpdHkgZm9yIGNsb25pbmcgdmFsdWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZTxUPih2YWw6IFQsIGRlcHRoOiBudW1iZXIgPSA1KTogVCB7XG4gIGlmICh0eXBlb2YgdmFsICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiB2YWw7XG4gIH1cblxuICAvLyBJZiB3ZSdyZSBjbG9uaW5nIGFuIGFycmF5LCB1c2UgYW4gYXJyYXkgYXMgdGhlIGJhc2UsIG90aGVyd2lzZSB1c2UgYW4gb2JqZWN0XG4gIGNvbnN0IGNsb25lZE9iamVjdDogYW55ID0gQXJyYXkuaXNBcnJheSh2YWwpID8gW10gOiB7fTtcblxuICBmb3IgKGNvbnN0IGtleSBpbiB2YWwpIHtcbiAgICAvLyBSZWN1cnNpdmVseSBjbG9uZSBlYWNrIGl0ZW0gdW5sZXNzIHdlJ3JlIGF0IHRoZSBtYXhpbXVtIGRlcHRoXG4gICAgY2xvbmVkT2JqZWN0W2tleV0gPSBkZXB0aCA8PSAxID8gdmFsW2tleV0gOiAodmFsW2tleV0gPyBjbG9uZSh2YWxba2V5XSwgZGVwdGggLSAxKSA6IHZhbFtrZXldKTtcbiAgfVxuXG4gIHJldHVybiBjbG9uZWRPYmplY3QgYXMgVDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG5pbnRlcmZhY2UgSUxpc3RlbmVyPFQsIFUgPSB2b2lkPiB7XG4gIChhcmcxOiBULCBhcmcyOiBVKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRXZlbnQ8VCwgVSA9IHZvaWQ+IHtcbiAgKGxpc3RlbmVyOiAoYXJnMTogVCwgYXJnMjogVSkgPT4gYW55KTogSURpc3Bvc2FibGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUV2ZW50RW1pdHRlcjxULCBVID0gdm9pZD4ge1xuICBldmVudDogSUV2ZW50PFQsIFU+O1xuICBmaXJlKGFyZzE6IFQsIGFyZzI6IFUpOiB2b2lkO1xuICBkaXNwb3NlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXI8VCwgVSA9IHZvaWQ+IGltcGxlbWVudHMgSUV2ZW50RW1pdHRlcjxULCBVPiB7XG4gIHByaXZhdGUgX2xpc3RlbmVyczogSUxpc3RlbmVyPFQsIFU+W10gPSBbXTtcbiAgcHJpdmF0ZSBfZXZlbnQ/OiBJRXZlbnQ8VCwgVT47XG4gIHByaXZhdGUgX2Rpc3Bvc2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIGdldCBldmVudCgpOiBJRXZlbnQ8VCwgVT4ge1xuICAgIGlmICghdGhpcy5fZXZlbnQpIHtcbiAgICAgIHRoaXMuX2V2ZW50ID0gKGxpc3RlbmVyOiAoYXJnMTogVCwgYXJnMjogVSkgPT4gYW55KSA9PiB7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgY29uc3QgZGlzcG9zYWJsZSA9IHtcbiAgICAgICAgICBkaXNwb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2xpc3RlbmVyc1tpXSA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9ldmVudDtcbiAgfVxuXG4gIHB1YmxpYyBmaXJlKGFyZzE6IFQsIGFyZzI6IFUpOiB2b2lkIHtcbiAgICBjb25zdCBxdWV1ZTogSUxpc3RlbmVyPFQsIFU+W10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2xpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgcXVldWUucHVzaCh0aGlzLl9saXN0ZW5lcnNbaV0pO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBxdWV1ZVtpXS5jYWxsKHVuZGVmaW5lZCwgYXJnMSwgYXJnMik7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2xpc3RlbmVycykge1xuICAgICAgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aCA9IDA7XG4gICAgfVxuICAgIHRoaXMuX2Rpc3Bvc2VkID0gdHJ1ZTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbi8qKlxuICogQSBiYXNlIGNsYXNzIHRoYXQgY2FuIGJlIGV4dGVuZGVkIHRvIHByb3ZpZGUgY29udmVuaWVuY2UgbWV0aG9kcyBmb3IgbWFuYWdpbmcgdGhlIGxpZmVjeWNsZSBvZiBhblxuICogb2JqZWN0IGFuZCBpdHMgY29tcG9uZW50cy5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJRGlzcG9zYWJsZSB7XG4gIHByb3RlY3RlZCBfZGlzcG9zYWJsZXM6IElEaXNwb3NhYmxlW10gPSBbXTtcbiAgcHJvdGVjdGVkIF9pc0Rpc3Bvc2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gIH1cblxuICAvKipcbiAgICogRGlzcG9zZXMgdGhlIG9iamVjdCwgdHJpZ2dlcmluZyB0aGUgYGRpc3Bvc2VgIG1ldGhvZCBvbiBhbGwgcmVnaXN0ZXJlZCBJRGlzcG9zYWJsZXMuXG4gICAqL1xuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5mb3JFYWNoKGQgPT4gZC5kaXNwb3NlKCkpO1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLmxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgZGlzcG9zYWJsZSBvYmplY3QuXG4gICAqIEBwYXJhbSBkIFRoZSBkaXNwb3NhYmxlIHRvIHJlZ2lzdGVyLlxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyPFQgZXh0ZW5kcyBJRGlzcG9zYWJsZT4oZDogVCk6IHZvaWQge1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2goZCk7XG4gIH1cblxuICAvKipcbiAgICogVW5yZWdpc3RlcnMgYSBkaXNwb3NhYmxlIG9iamVjdCBpZiBpdCBoYXMgYmVlbiByZWdpc3RlcmVkLCBpZiBub3QgZG9cbiAgICogbm90aGluZy5cbiAgICogQHBhcmFtIGQgVGhlIGRpc3Bvc2FibGUgdG8gdW5yZWdpc3Rlci5cbiAgICovXG4gIHB1YmxpYyB1bnJlZ2lzdGVyPFQgZXh0ZW5kcyBJRGlzcG9zYWJsZT4oZDogVCk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fZGlzcG9zYWJsZXMuaW5kZXhPZihkKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICB0aGlzLl9kaXNwb3NhYmxlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbnRlcmZhY2UgSU5hdmlnYXRvciB7XG4gIHVzZXJBZ2VudDogc3RyaW5nO1xuICBsYW5ndWFnZTogc3RyaW5nO1xuICBwbGF0Zm9ybTogc3RyaW5nO1xufVxuXG4vLyBXZSdyZSBkZWNsYXJpbmcgYSBuYXZpZ2F0b3IgZ2xvYmFsIGhlcmUgYXMgd2UgZXhwZWN0IGl0IGluIGFsbCBydW50aW1lcyAobm9kZSBhbmQgYnJvd3NlciksIGJ1dFxuLy8gd2Ugd2FudCB0aGlzIG1vZHVsZSB0byBsaXZlIGluIGNvbW1vbi5cbmRlY2xhcmUgY29uc3QgbmF2aWdhdG9yOiBJTmF2aWdhdG9yO1xuXG5jb25zdCBpc05vZGUgPSAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcpID8gdHJ1ZSA6IGZhbHNlO1xuY29uc3QgdXNlckFnZW50ID0gKGlzTm9kZSkgPyAnbm9kZScgOiBuYXZpZ2F0b3IudXNlckFnZW50O1xuY29uc3QgcGxhdGZvcm0gPSAoaXNOb2RlKSA/ICdub2RlJyA6IG5hdmlnYXRvci5wbGF0Zm9ybTtcblxuZXhwb3J0IGNvbnN0IGlzRmlyZWZveCA9ICEhfnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94Jyk7XG5leHBvcnQgY29uc3QgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KHVzZXJBZ2VudCk7XG5cbi8vIEZpbmQgdGhlIHVzZXJzIHBsYXRmb3JtLiBXZSB1c2UgdGhpcyB0byBpbnRlcnByZXQgdGhlIG1ldGEga2V5XG4vLyBhbmQgSVNPIHRoaXJkIGxldmVsIHNoaWZ0cy5cbi8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xLzE5ODc3OTI0LzU3NzU5OFxuZXhwb3J0IGNvbnN0IGlzTWFjID0gY29udGFpbnMoWydNYWNpbnRvc2gnLCAnTWFjSW50ZWwnLCAnTWFjUFBDJywgJ01hYzY4SyddLCBwbGF0Zm9ybSk7XG5leHBvcnQgY29uc3QgaXNJcGFkID0gcGxhdGZvcm0gPT09ICdpUGFkJztcbmV4cG9ydCBjb25zdCBpc0lwaG9uZSA9IHBsYXRmb3JtID09PSAnaVBob25lJztcbmV4cG9ydCBjb25zdCBpc1dpbmRvd3MgPSBjb250YWlucyhbJ1dpbmRvd3MnLCAnV2luMTYnLCAnV2luMzInLCAnV2luQ0UnXSwgcGxhdGZvcm0pO1xuZXhwb3J0IGNvbnN0IGlzTGludXggPSBwbGF0Zm9ybS5pbmRleE9mKCdMaW51eCcpID49IDA7XG5cbi8qKlxuICogUmV0dXJuIGlmIHRoZSBnaXZlbiBhcnJheSBjb250YWlucyB0aGUgZ2l2ZW4gZWxlbWVudFxuICogQHBhcmFtIGFyciBUaGUgYXJyYXkgdG8gc2VhcmNoIGZvciB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAqIEBwYXJhbSBlbCBUaGUgZWxlbWVudCB0byBsb29rIGZvciBpbnRvIHRoZSBhcnJheVxuICovXG5mdW5jdGlvbiBjb250YWlucyhhcnI6IGFueVtdLCBlbDogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBhcnIuaW5kZXhPZihlbCkgPj0gMDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZXhwb3J0IHR5cGUgVHlwZWRBcnJheSA9IFVpbnQ4QXJyYXkgfCBVaW50MTZBcnJheSB8IFVpbnQzMkFycmF5IHwgVWludDhDbGFtcGVkQXJyYXlcbiAgfCBJbnQ4QXJyYXkgfCBJbnQxNkFycmF5IHwgSW50MzJBcnJheVxuICB8IEZsb2F0MzJBcnJheSB8IEZsb2F0NjRBcnJheTtcblxuXG4vKipcbiAqIHBvbHlmaWxsIGZvciBUeXBlZEFycmF5LmZpbGxcbiAqIFRoaXMgaXMgbmVlZGVkIHRvIHN1cHBvcnQgLmZpbGwgaW4gYWxsIHNhZmFyaSB2ZXJzaW9ucyBhbmQgSUUgMTEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWxsPFQgZXh0ZW5kcyBUeXBlZEFycmF5PihhcnJheTogVCwgdmFsdWU6IG51bWJlciwgc3RhcnQ/OiBudW1iZXIsIGVuZD86IG51bWJlcik6IFQge1xuICAvLyBhbGwgbW9kZXJuIGVuZ2luZXMgdGhhdCBzdXBwb3J0IC5maWxsXG4gIGlmIChhcnJheS5maWxsKSB7XG4gICAgcmV0dXJuIGFycmF5LmZpbGwodmFsdWUsIHN0YXJ0LCBlbmQpIGFzIFQ7XG4gIH1cbiAgcmV0dXJuIGZpbGxGYWxsYmFjayhhcnJheSwgdmFsdWUsIHN0YXJ0LCBlbmQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmlsbEZhbGxiYWNrPFQgZXh0ZW5kcyBUeXBlZEFycmF5PihhcnJheTogVCwgdmFsdWU6IG51bWJlciwgc3RhcnQ6IG51bWJlciA9IDAsIGVuZDogbnVtYmVyID0gYXJyYXkubGVuZ3RoKTogVCB7XG4gIC8vIHNhZmFyaSBhbmQgSUUgMTFcbiAgLy8gc2luY2UgSUUgMTEgZG9lcyBub3Qgc3VwcG9ydCBBcnJheS5wcm90b3R5cGUuZmlsbCBlaXRoZXJcbiAgLy8gd2UgY2Fubm90IHVzZSB0aGUgc3VnZ2VzdGVkIHBvbHlmaWxsIGZyb20gTUROXG4gIC8vIGluc3RlYWQgd2Ugc2ltcGx5IGZhbGwgYmFjayB0byBsb29waW5nXG4gIGlmIChzdGFydCA+PSBhcnJheS5sZW5ndGgpIHtcbiAgICByZXR1cm4gYXJyYXk7XG4gIH1cbiAgc3RhcnQgPSAoYXJyYXkubGVuZ3RoICsgc3RhcnQpICUgYXJyYXkubGVuZ3RoO1xuICBpZiAoZW5kID49IGFycmF5Lmxlbmd0aCkge1xuICAgIGVuZCA9IGFycmF5Lmxlbmd0aDtcbiAgfSBlbHNlIHtcbiAgICBlbmQgPSAoYXJyYXkubGVuZ3RoICsgZW5kKSAlIGFycmF5Lmxlbmd0aDtcbiAgfVxuICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIGFycmF5W2ldID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG4vKipcbiAqIENvbmNhdCB0d28gdHlwZWQgYXJyYXlzIGBhYCBhbmQgYGJgLlxuICogUmV0dXJucyBhIG5ldyB0eXBlZCBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdDxUIGV4dGVuZHMgVHlwZWRBcnJheT4oYTogVCwgYjogVCk6IFQge1xuICBjb25zdCByZXN1bHQgPSBuZXcgKGEuY29uc3RydWN0b3IgYXMgYW55KShhLmxlbmd0aCArIGIubGVuZ3RoKTtcbiAgcmVzdWx0LnNldChhKTtcbiAgcmVzdWx0LnNldChiLCBhLmxlbmd0aCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IENIQVJfREFUQV9DT0RFX0lOREVYLCBOVUxMX0NFTExfQ09ERSwgV0hJVEVTUEFDRV9DRUxMX0NPREUgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZShidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSk6IHZvaWQge1xuICAvLyBXaW5wdHkgZG9lcyBub3Qgc3VwcG9ydCB3cmFwYXJvdW5kIG1vZGUgd2hpY2ggbWVhbnMgdGhhdCBsaW5lcyB3aWxsIG5ldmVyXG4gIC8vIGJlIG1hcmtlZCBhcyB3cmFwcGVkLiBUaGlzIGNhdXNlcyBpc3N1ZXMgZm9yIHRoaW5ncyBsaWtlIGNvcHlpbmcgYSBsaW5lXG4gIC8vIHJldGFpbmluZyB0aGUgd3JhcHBlZCBuZXcgbGluZSBjaGFyYWN0ZXJzIG9yIGlmIGNvbnN1bWVycyBhcmUgbGlzdGVuaW5nXG4gIC8vIGluIG9uIHRoZSBkYXRhIHN0cmVhbS5cbiAgLy9cbiAgLy8gVGhlIHdvcmthcm91bmQgZm9yIHRoaXMgaXMgdG8gbGlzdGVuIHRvIGV2ZXJ5IGluY29taW5nIGxpbmUgZmVlZCBhbmQgbWFya1xuICAvLyB0aGUgbGluZSBhcyB3cmFwcGVkIGlmIHRoZSBsYXN0IGNoYXJhY3RlciBpbiB0aGUgcHJldmlvdXMgbGluZSBpcyBub3QgYVxuICAvLyBzcGFjZS4gVGhpcyBpcyBjZXJ0YWlubHkgbm90IHdpdGhvdXQgaXRzIHByb2JsZW1zLCBidXQgZ2VuZXJhbGx5IG9uXG4gIC8vIFdpbmRvd3Mgd2hlbiB0ZXh0IHJlYWNoZXMgdGhlIGVuZCBvZiB0aGUgdGVybWluYWwgaXQncyBsaWtlbHkgZ29pbmcgdG8gYmVcbiAgLy8gd3JhcHBlZC5cbiAgY29uc3QgbGluZSA9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChidWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSArIGJ1ZmZlclNlcnZpY2UuYnVmZmVyLnkgLSAxKTtcbiAgY29uc3QgbGFzdENoYXIgPSBsaW5lPy5nZXQoYnVmZmVyU2VydmljZS5jb2xzIC0gMSk7XG5cbiAgY29uc3QgbmV4dExpbmUgPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgKyBidWZmZXJTZXJ2aWNlLmJ1ZmZlci55KTtcbiAgaWYgKG5leHRMaW5lICYmIGxhc3RDaGFyKSB7XG4gICAgbmV4dExpbmUuaXNXcmFwcGVkID0gKGxhc3RDaGFyW0NIQVJfREFUQV9DT0RFX0lOREVYXSAhPT0gTlVMTF9DRUxMX0NPREUgJiYgbGFzdENoYXJbQ0hBUl9EQVRBX0NPREVfSU5ERVhdICE9PSBXSElURVNQQUNFX0NFTExfQ09ERSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUF0dHJpYnV0ZURhdGEsIElDb2xvclJHQiB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBBdHRyaWJ1dGVzLCBGZ0ZsYWdzLCBCZ0ZsYWdzIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuXG5leHBvcnQgY2xhc3MgQXR0cmlidXRlRGF0YSBpbXBsZW1lbnRzIElBdHRyaWJ1dGVEYXRhIHtcbiAgc3RhdGljIHRvQ29sb3JSR0IodmFsdWU6IG51bWJlcik6IElDb2xvclJHQiB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHZhbHVlID4+PiBBdHRyaWJ1dGVzLlJFRF9TSElGVCAmIDI1NSxcbiAgICAgIHZhbHVlID4+PiBBdHRyaWJ1dGVzLkdSRUVOX1NISUZUICYgMjU1LFxuICAgICAgdmFsdWUgJiAyNTVcbiAgICBdO1xuICB9XG4gIHN0YXRpYyBmcm9tQ29sb3JSR0IodmFsdWU6IElDb2xvclJHQik6IG51bWJlciB7XG4gICAgcmV0dXJuICh2YWx1ZVswXSAmIDI1NSkgPDwgQXR0cmlidXRlcy5SRURfU0hJRlQgfCAodmFsdWVbMV0gJiAyNTUpIDw8IEF0dHJpYnV0ZXMuR1JFRU5fU0hJRlQgfCB2YWx1ZVsyXSAmIDI1NTtcbiAgfVxuXG4gIHB1YmxpYyBjbG9uZSgpOiBJQXR0cmlidXRlRGF0YSB7XG4gICAgY29uc3QgbmV3T2JqID0gbmV3IEF0dHJpYnV0ZURhdGEoKTtcbiAgICBuZXdPYmouZmcgPSB0aGlzLmZnO1xuICAgIG5ld09iai5iZyA9IHRoaXMuYmc7XG4gICAgcmV0dXJuIG5ld09iajtcbiAgfVxuXG4gIC8vIGRhdGFcbiAgcHVibGljIGZnOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgYmc6IG51bWJlciA9IDA7XG5cbiAgLy8gZmxhZ3NcbiAgcHVibGljIGlzSW52ZXJzZSgpOiBudW1iZXIgICB7IHJldHVybiB0aGlzLmZnICYgRmdGbGFncy5JTlZFUlNFOyB9XG4gIHB1YmxpYyBpc0JvbGQoKTogbnVtYmVyICAgICAgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuQk9MRDsgfVxuICBwdWJsaWMgaXNVbmRlcmxpbmUoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZmcgJiBGZ0ZsYWdzLlVOREVSTElORTsgfVxuICBwdWJsaWMgaXNCbGluaygpOiBudW1iZXIgICAgIHsgcmV0dXJuIHRoaXMuZmcgJiBGZ0ZsYWdzLkJMSU5LOyB9XG4gIHB1YmxpYyBpc0ludmlzaWJsZSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuSU5WSVNJQkxFOyB9XG4gIHB1YmxpYyBpc0l0YWxpYygpOiBudW1iZXIgICAgeyByZXR1cm4gdGhpcy5iZyAmIEJnRmxhZ3MuSVRBTElDOyB9XG4gIHB1YmxpYyBpc0RpbSgpOiBudW1iZXIgICAgICAgeyByZXR1cm4gdGhpcy5iZyAmIEJnRmxhZ3MuRElNOyB9XG5cbiAgLy8gY29sb3IgbW9kZXNcbiAgcHVibGljIGdldEZnQ29sb3JNb2RlKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmZnICYgQXR0cmlidXRlcy5DTV9NQVNLOyB9XG4gIHB1YmxpYyBnZXRCZ0NvbG9yTW9kZSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5iZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSzsgfVxuICBwdWJsaWMgaXNGZ1JHQigpOiBib29sZWFuICAgICAgIHsgcmV0dXJuICh0aGlzLmZnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9SR0I7IH1cbiAgcHVibGljIGlzQmdSR0IoKTogYm9vbGVhbiAgICAgICB7IHJldHVybiAodGhpcy5iZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUkdCOyB9XG4gIHB1YmxpYyBpc0ZnUGFsZXR0ZSgpOiBib29sZWFuICAgeyByZXR1cm4gKHRoaXMuZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1AxNiB8fCAodGhpcy5mZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUDI1NjsgfVxuICBwdWJsaWMgaXNCZ1BhbGV0dGUoKTogYm9vbGVhbiAgIHsgcmV0dXJuICh0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9QMTYgfHwgKHRoaXMuYmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1AyNTY7IH1cbiAgcHVibGljIGlzRmdEZWZhdWx0KCk6IGJvb2xlYW4gICB7IHJldHVybiAodGhpcy5mZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IDA7IH1cbiAgcHVibGljIGlzQmdEZWZhdWx0KCk6IGJvb2xlYW4gICB7IHJldHVybiAodGhpcy5iZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IDA7IH1cblxuICAvLyBjb2xvcnNcbiAgcHVibGljIGdldEZnQ29sb3IoKTogbnVtYmVyIHtcbiAgICBzd2l0Y2ggKHRoaXMuZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spIHtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjogIHJldHVybiB0aGlzLmZnICYgQXR0cmlidXRlcy5QQ09MT1JfTUFTSztcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6ICAgcmV0dXJuIHRoaXMuZmcgJiBBdHRyaWJ1dGVzLlJHQl9NQVNLO1xuICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICByZXR1cm4gLTE7ICAvLyBDTV9ERUZBVUxUIGRlZmF1bHRzIHRvIC0xXG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXRCZ0NvbG9yKCk6IG51bWJlciB7XG4gICAgc3dpdGNoICh0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLKSB7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDE2OlxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AyNTY6ICByZXR1cm4gdGhpcy5iZyAmIEF0dHJpYnV0ZXMuUENPTE9SX01BU0s7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOiAgIHJldHVybiB0aGlzLmJnICYgQXR0cmlidXRlcy5SR0JfTUFTSztcbiAgICAgIGRlZmF1bHQ6ICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOyAgLy8gQ01fREVGQVVMVCBkZWZhdWx0cyB0byAtMVxuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBDaXJjdWxhckxpc3QsIElJbnNlcnRFdmVudCB9IGZyb20gJ2NvbW1vbi9DaXJjdWxhckxpc3QnO1xuaW1wb3J0IHsgSUJ1ZmZlciwgQnVmZmVySW5kZXgsIElCdWZmZXJTdHJpbmdJdGVyYXRvciwgSUJ1ZmZlclN0cmluZ0l0ZXJhdG9yUmVzdWx0IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyTGluZSwgSUNlbGxEYXRhLCBJQXR0cmlidXRlRGF0YSwgSUNoYXJzZXQgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgQnVmZmVyTGluZSwgREVGQVVMVF9BVFRSX0RBVEEgfSBmcm9tICdjb21tb24vYnVmZmVyL0J1ZmZlckxpbmUnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IE5VTExfQ0VMTF9DSEFSLCBOVUxMX0NFTExfV0lEVEgsIE5VTExfQ0VMTF9DT0RFLCBXSElURVNQQUNFX0NFTExfQ0hBUiwgV0hJVEVTUEFDRV9DRUxMX1dJRFRILCBXSElURVNQQUNFX0NFTExfQ09ERSwgQ0hBUl9EQVRBX1dJRFRIX0lOREVYLCBDSEFSX0RBVEFfQ0hBUl9JTkRFWCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IHJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0LCByZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQsIHJlZmxvd0xhcmdlckdldExpbmVzVG9SZW1vdmUsIHJlZmxvd1NtYWxsZXJHZXROZXdMaW5lTGVuZ3RocywgZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9CdWZmZXJSZWZsb3cnO1xuaW1wb3J0IHsgTWFya2VyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9NYXJrZXInO1xuaW1wb3J0IHsgSU9wdGlvbnNTZXJ2aWNlLCBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBERUZBVUxUX0NIQVJTRVQgfSBmcm9tICdjb21tb24vZGF0YS9DaGFyc2V0cyc7XG5cbmV4cG9ydCBjb25zdCBNQVhfQlVGRkVSX1NJWkUgPSA0Mjk0OTY3Mjk1OyAvLyAyXjMyIC0gMVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyBhIHRlcm1pbmFsIGJ1ZmZlciAoYW4gaW50ZXJuYWwgc3RhdGUgb2YgdGhlIHRlcm1pbmFsKSwgd2hlcmUgdGhlXG4gKiBmb2xsb3dpbmcgaW5mb3JtYXRpb24gaXMgc3RvcmVkIChpbiBoaWdoLWxldmVsKTpcbiAqICAgLSB0ZXh0IGNvbnRlbnQgb2YgdGhpcyBwYXJ0aWN1bGFyIGJ1ZmZlclxuICogICAtIGN1cnNvciBwb3NpdGlvblxuICogICAtIHNjcm9sbCBwb3NpdGlvblxuICovXG5leHBvcnQgY2xhc3MgQnVmZmVyIGltcGxlbWVudHMgSUJ1ZmZlciB7XG4gIHB1YmxpYyBsaW5lczogQ2lyY3VsYXJMaXN0PElCdWZmZXJMaW5lPjtcbiAgcHVibGljIHlkaXNwOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgeWJhc2U6IG51bWJlciA9IDA7XG4gIHB1YmxpYyB5OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgeDogbnVtYmVyID0gMDtcbiAgcHVibGljIHNjcm9sbEJvdHRvbTogbnVtYmVyO1xuICBwdWJsaWMgc2Nyb2xsVG9wOiBudW1iZXI7XG4gIC8vIFRPRE86IFR5cGUgbWVcbiAgcHVibGljIHRhYnM6IGFueTtcbiAgcHVibGljIHNhdmVkWTogbnVtYmVyID0gMDtcbiAgcHVibGljIHNhdmVkWDogbnVtYmVyID0gMDtcbiAgcHVibGljIHNhdmVkQ3VyQXR0ckRhdGEgPSBERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpO1xuICBwdWJsaWMgc2F2ZWRDaGFyc2V0OiBJQ2hhcnNldCB8IG51bGwgPSBERUZBVUxUX0NIQVJTRVQ7XG4gIHB1YmxpYyBtYXJrZXJzOiBNYXJrZXJbXSA9IFtdO1xuICBwcml2YXRlIF9udWxsQ2VsbDogSUNlbGxEYXRhID0gQ2VsbERhdGEuZnJvbUNoYXJEYXRhKFswLCBOVUxMX0NFTExfQ0hBUiwgTlVMTF9DRUxMX1dJRFRILCBOVUxMX0NFTExfQ09ERV0pO1xuICBwcml2YXRlIF93aGl0ZXNwYWNlQ2VsbDogSUNlbGxEYXRhID0gQ2VsbERhdGEuZnJvbUNoYXJEYXRhKFswLCBXSElURVNQQUNFX0NFTExfQ0hBUiwgV0hJVEVTUEFDRV9DRUxMX1dJRFRILCBXSElURVNQQUNFX0NFTExfQ09ERV0pO1xuICBwcml2YXRlIF9jb2xzOiBudW1iZXI7XG4gIHByaXZhdGUgX3Jvd3M6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9oYXNTY3JvbGxiYWNrOiBib29sZWFuLFxuICAgIHByaXZhdGUgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgcHJpdmF0ZSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5fY29scyA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICB0aGlzLl9yb3dzID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzO1xuICAgIHRoaXMubGluZXMgPSBuZXcgQ2lyY3VsYXJMaXN0PElCdWZmZXJMaW5lPih0aGlzLl9nZXRDb3JyZWN0QnVmZmVyTGVuZ3RoKHRoaXMuX3Jvd3MpKTtcbiAgICB0aGlzLnNjcm9sbFRvcCA9IDA7XG4gICAgdGhpcy5zY3JvbGxCb3R0b20gPSB0aGlzLl9yb3dzIC0gMTtcbiAgICB0aGlzLnNldHVwVGFiU3RvcHMoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXROdWxsQ2VsbChhdHRyPzogSUF0dHJpYnV0ZURhdGEpOiBJQ2VsbERhdGEge1xuICAgIGlmIChhdHRyKSB7XG4gICAgICB0aGlzLl9udWxsQ2VsbC5mZyA9IGF0dHIuZmc7XG4gICAgICB0aGlzLl9udWxsQ2VsbC5iZyA9IGF0dHIuYmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX251bGxDZWxsLmZnID0gMDtcbiAgICAgIHRoaXMuX251bGxDZWxsLmJnID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX251bGxDZWxsO1xuICB9XG5cbiAgcHVibGljIGdldFdoaXRlc3BhY2VDZWxsKGF0dHI/OiBJQXR0cmlidXRlRGF0YSk6IElDZWxsRGF0YSB7XG4gICAgaWYgKGF0dHIpIHtcbiAgICAgIHRoaXMuX3doaXRlc3BhY2VDZWxsLmZnID0gYXR0ci5mZztcbiAgICAgIHRoaXMuX3doaXRlc3BhY2VDZWxsLmJnID0gYXR0ci5iZztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fd2hpdGVzcGFjZUNlbGwuZmcgPSAwO1xuICAgICAgdGhpcy5fd2hpdGVzcGFjZUNlbGwuYmcgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fd2hpdGVzcGFjZUNlbGw7XG4gIH1cblxuICBwdWJsaWMgZ2V0QmxhbmtMaW5lKGF0dHI6IElBdHRyaWJ1dGVEYXRhLCBpc1dyYXBwZWQ/OiBib29sZWFuKTogSUJ1ZmZlckxpbmUge1xuICAgIHJldHVybiBuZXcgQnVmZmVyTGluZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuZ2V0TnVsbENlbGwoYXR0ciksIGlzV3JhcHBlZCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGhhc1Njcm9sbGJhY2soKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2hhc1Njcm9sbGJhY2sgJiYgdGhpcy5saW5lcy5tYXhMZW5ndGggPiB0aGlzLl9yb3dzO1xuICB9XG5cbiAgcHVibGljIGdldCBpc0N1cnNvckluVmlld3BvcnQoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYWJzb2x1dGVZID0gdGhpcy55YmFzZSArIHRoaXMueTtcbiAgICBjb25zdCByZWxhdGl2ZVkgPSBhYnNvbHV0ZVkgLSB0aGlzLnlkaXNwO1xuICAgIHJldHVybiAocmVsYXRpdmVZID49IDAgJiYgcmVsYXRpdmVZIDwgdGhpcy5fcm93cyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY29ycmVjdCBidWZmZXIgbGVuZ3RoIGJhc2VkIG9uIHRoZSByb3dzIHByb3ZpZGVkLCB0aGUgdGVybWluYWwnc1xuICAgKiBzY3JvbGxiYWNrIGFuZCB3aGV0aGVyIHRoaXMgYnVmZmVyIGlzIGZsYWdnZWQgdG8gaGF2ZSBzY3JvbGxiYWNrIG9yIG5vdC5cbiAgICogQHBhcmFtIHJvd3MgVGhlIHRlcm1pbmFsIHJvd3MgdG8gdXNlIGluIHRoZSBjYWxjdWxhdGlvbi5cbiAgICovXG4gIHByaXZhdGUgX2dldENvcnJlY3RCdWZmZXJMZW5ndGgocm93czogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuX2hhc1Njcm9sbGJhY2spIHtcbiAgICAgIHJldHVybiByb3dzO1xuICAgIH1cblxuICAgIGNvbnN0IGNvcnJlY3RCdWZmZXJMZW5ndGggPSByb3dzICsgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5zY3JvbGxiYWNrO1xuXG4gICAgcmV0dXJuIGNvcnJlY3RCdWZmZXJMZW5ndGggPiBNQVhfQlVGRkVSX1NJWkUgPyBNQVhfQlVGRkVSX1NJWkUgOiBjb3JyZWN0QnVmZmVyTGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbGxzIHRoZSBidWZmZXIncyB2aWV3cG9ydCB3aXRoIGJsYW5rIGxpbmVzLlxuICAgKi9cbiAgcHVibGljIGZpbGxWaWV3cG9ydFJvd3MoZmlsbEF0dHI/OiBJQXR0cmlidXRlRGF0YSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxpbmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaWYgKGZpbGxBdHRyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZmlsbEF0dHIgPSBERUZBVUxUX0FUVFJfREFUQTtcbiAgICAgIH1cbiAgICAgIGxldCBpID0gdGhpcy5fcm93cztcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdGhpcy5saW5lcy5wdXNoKHRoaXMuZ2V0QmxhbmtMaW5lKGZpbGxBdHRyKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgYnVmZmVyIHRvIGl0J3MgaW5pdGlhbCBzdGF0ZSwgZGlzY2FyZGluZyBhbGwgcHJldmlvdXMgZGF0YS5cbiAgICovXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLnlkaXNwID0gMDtcbiAgICB0aGlzLnliYXNlID0gMDtcbiAgICB0aGlzLnkgPSAwO1xuICAgIHRoaXMueCA9IDA7XG4gICAgdGhpcy5saW5lcyA9IG5ldyBDaXJjdWxhckxpc3Q8SUJ1ZmZlckxpbmU+KHRoaXMuX2dldENvcnJlY3RCdWZmZXJMZW5ndGgodGhpcy5fcm93cykpO1xuICAgIHRoaXMuc2Nyb2xsVG9wID0gMDtcbiAgICB0aGlzLnNjcm9sbEJvdHRvbSA9IHRoaXMuX3Jvd3MgLSAxO1xuICAgIHRoaXMuc2V0dXBUYWJTdG9wcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2l6ZXMgdGhlIGJ1ZmZlciwgYWRqdXN0aW5nIGl0cyBkYXRhIGFjY29yZGluZ2x5LlxuICAgKiBAcGFyYW0gbmV3Q29scyBUaGUgbmV3IG51bWJlciBvZiBjb2x1bW5zLlxuICAgKiBAcGFyYW0gbmV3Um93cyBUaGUgbmV3IG51bWJlciBvZiByb3dzLlxuICAgKi9cbiAgcHVibGljIHJlc2l6ZShuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIHN0b3JlIHJlZmVyZW5jZSB0byBudWxsIGNlbGwgd2l0aCBkZWZhdWx0IGF0dHJzXG4gICAgY29uc3QgbnVsbENlbGwgPSB0aGlzLmdldE51bGxDZWxsKERFRkFVTFRfQVRUUl9EQVRBKTtcblxuICAgIC8vIEluY3JlYXNlIG1heCBsZW5ndGggaWYgbmVlZGVkIGJlZm9yZSBhZGp1c3RtZW50cyB0byBhbGxvdyBzcGFjZSB0byBmaWxsXG4gICAgLy8gYXMgcmVxdWlyZWQuXG4gICAgY29uc3QgbmV3TWF4TGVuZ3RoID0gdGhpcy5fZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aChuZXdSb3dzKTtcbiAgICBpZiAobmV3TWF4TGVuZ3RoID4gdGhpcy5saW5lcy5tYXhMZW5ndGgpIHtcbiAgICAgIHRoaXMubGluZXMubWF4TGVuZ3RoID0gbmV3TWF4TGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIFRoZSBmb2xsb3dpbmcgYWRqdXN0bWVudHMgc2hvdWxkIG9ubHkgaGFwcGVuIGlmIHRoZSBidWZmZXIgaGFzIGJlZW5cbiAgICAvLyBpbml0aWFsaXplZC9maWxsZWQuXG4gICAgaWYgKHRoaXMubGluZXMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gRGVhbCB3aXRoIGNvbHVtbnMgaW5jcmVhc2luZyAocmVkdWNpbmcgbmVlZHMgdG8gaGFwcGVuIGFmdGVyIHJlZmxvdylcbiAgICAgIGlmICh0aGlzLl9jb2xzIDwgbmV3Q29scykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzLmxpbmVzLmdldChpKSEucmVzaXplKG5ld0NvbHMsIG51bGxDZWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZXNpemUgcm93cyBpbiBib3RoIGRpcmVjdGlvbnMgYXMgbmVlZGVkXG4gICAgICBsZXQgYWRkVG9ZID0gMDtcbiAgICAgIGlmICh0aGlzLl9yb3dzIDwgbmV3Um93cykge1xuICAgICAgICBmb3IgKGxldCB5ID0gdGhpcy5fcm93czsgeSA8IG5ld1Jvd3M7IHkrKykge1xuICAgICAgICAgIGlmICh0aGlzLmxpbmVzLmxlbmd0aCA8IG5ld1Jvd3MgKyB0aGlzLnliYXNlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy53aW5kb3dzTW9kZSkge1xuICAgICAgICAgICAgICAvLyBKdXN0IGFkZCB0aGUgbmV3IG1pc3Npbmcgcm93cyBvbiBXaW5kb3dzIGFzIGNvbnB0eSByZXByaW50cyB0aGUgc2NyZWVuIHdpdGggaXQnc1xuICAgICAgICAgICAgICAvLyB2aWV3IG9mIHRoZSB3b3JsZC4gT25jZSBhIGxpbmUgZW50ZXJzIHNjcm9sbGJhY2sgZm9yIGNvbnB0eSBpdCByZW1haW5zIHRoZXJlXG4gICAgICAgICAgICAgIHRoaXMubGluZXMucHVzaChuZXcgQnVmZmVyTGluZShuZXdDb2xzLCBudWxsQ2VsbCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMueWJhc2UgPiAwICYmIHRoaXMubGluZXMubGVuZ3RoIDw9IHRoaXMueWJhc2UgKyB0aGlzLnkgKyBhZGRUb1kgKyAxKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgcm9vbSBhYm92ZSB0aGUgYnVmZmVyIGFuZCB0aGVyZSBhcmUgbm8gZW1wdHkgZWxlbWVudHMgYmVsb3cgdGhlIGxpbmUsXG4gICAgICAgICAgICAgICAgLy8gc2Nyb2xsIHVwXG4gICAgICAgICAgICAgICAgdGhpcy55YmFzZS0tO1xuICAgICAgICAgICAgICAgIGFkZFRvWSsrO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnlkaXNwID4gMCkge1xuICAgICAgICAgICAgICAgICAgLy8gVmlld3BvcnQgaXMgYXQgdGhlIHRvcCBvZiB0aGUgYnVmZmVyLCBtdXN0IGluY3JlYXNlIGRvd253YXJkc1xuICAgICAgICAgICAgICAgICAgdGhpcy55ZGlzcC0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgYSBibGFuayBsaW5lIGlmIHRoZXJlIGlzIG5vIGJ1ZmZlciBsZWZ0IGF0IHRoZSB0b3AgdG8gc2Nyb2xsIHRvLCBvciBpZiB0aGVyZVxuICAgICAgICAgICAgICAgIC8vIGFyZSBibGFuayBsaW5lcyBhZnRlciB0aGUgY3Vyc29yXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lcy5wdXNoKG5ldyBCdWZmZXJMaW5lKG5ld0NvbHMsIG51bGxDZWxsKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7IC8vICh0aGlzLl9yb3dzID49IG5ld1Jvd3MpXG4gICAgICAgIGZvciAobGV0IHkgPSB0aGlzLl9yb3dzOyB5ID4gbmV3Um93czsgeS0tKSB7XG4gICAgICAgICAgaWYgKHRoaXMubGluZXMubGVuZ3RoID4gbmV3Um93cyArIHRoaXMueWJhc2UpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmVzLmxlbmd0aCA+IHRoaXMueWJhc2UgKyB0aGlzLnkgKyAxKSB7XG4gICAgICAgICAgICAgIC8vIFRoZSBsaW5lIGlzIGEgYmxhbmsgbGluZSBiZWxvdyB0aGUgY3Vyc29yLCByZW1vdmUgaXRcbiAgICAgICAgICAgICAgdGhpcy5saW5lcy5wb3AoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFRoZSBsaW5lIGlzIHRoZSBjdXJzb3IsIHNjcm9sbCBkb3duXG4gICAgICAgICAgICAgIHRoaXMueWJhc2UrKztcbiAgICAgICAgICAgICAgdGhpcy55ZGlzcCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZWR1Y2UgbWF4IGxlbmd0aCBpZiBuZWVkZWQgYWZ0ZXIgYWRqdXN0bWVudHMsIHRoaXMgaXMgZG9uZSBhZnRlciBhcyBpdFxuICAgICAgLy8gd291bGQgb3RoZXJ3aXNlIGN1dCBkYXRhIGZyb20gdGhlIGJvdHRvbSBvZiB0aGUgYnVmZmVyLlxuICAgICAgaWYgKG5ld01heExlbmd0aCA8IHRoaXMubGluZXMubWF4TGVuZ3RoKSB7XG4gICAgICAgIC8vIFRyaW0gZnJvbSB0aGUgdG9wIG9mIHRoZSBidWZmZXIgYW5kIGFkanVzdCB5YmFzZSBhbmQgeWRpc3AuXG4gICAgICAgIGNvbnN0IGFtb3VudFRvVHJpbSA9IHRoaXMubGluZXMubGVuZ3RoIC0gbmV3TWF4TGVuZ3RoO1xuICAgICAgICBpZiAoYW1vdW50VG9UcmltID4gMCkge1xuICAgICAgICAgIHRoaXMubGluZXMudHJpbVN0YXJ0KGFtb3VudFRvVHJpbSk7XG4gICAgICAgICAgdGhpcy55YmFzZSA9IE1hdGgubWF4KHRoaXMueWJhc2UgLSBhbW91bnRUb1RyaW0sIDApO1xuICAgICAgICAgIHRoaXMueWRpc3AgPSBNYXRoLm1heCh0aGlzLnlkaXNwIC0gYW1vdW50VG9UcmltLCAwKTtcbiAgICAgICAgICB0aGlzLnNhdmVkWSA9IE1hdGgubWF4KHRoaXMuc2F2ZWRZIC0gYW1vdW50VG9UcmltLCAwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpbmVzLm1heExlbmd0aCA9IG5ld01heExlbmd0aDtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIGN1cnNvciBzdGF5cyBvbiBzY3JlZW5cbiAgICAgIHRoaXMueCA9IE1hdGgubWluKHRoaXMueCwgbmV3Q29scyAtIDEpO1xuICAgICAgdGhpcy55ID0gTWF0aC5taW4odGhpcy55LCBuZXdSb3dzIC0gMSk7XG4gICAgICBpZiAoYWRkVG9ZKSB7XG4gICAgICAgIHRoaXMueSArPSBhZGRUb1k7XG4gICAgICB9XG4gICAgICB0aGlzLnNhdmVkWCA9IE1hdGgubWluKHRoaXMuc2F2ZWRYLCBuZXdDb2xzIC0gMSk7XG5cbiAgICAgIHRoaXMuc2Nyb2xsVG9wID0gMDtcbiAgICB9XG5cbiAgICB0aGlzLnNjcm9sbEJvdHRvbSA9IG5ld1Jvd3MgLSAxO1xuXG4gICAgaWYgKHRoaXMuX2lzUmVmbG93RW5hYmxlZCkge1xuICAgICAgdGhpcy5fcmVmbG93KG5ld0NvbHMsIG5ld1Jvd3MpO1xuXG4gICAgICAvLyBUcmltIHRoZSBlbmQgb2YgdGhlIGxpbmUgb2ZmIGlmIGNvbHMgc2hydW5rXG4gICAgICBpZiAodGhpcy5fY29scyA+IG5ld0NvbHMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5saW5lcy5nZXQoaSkhLnJlc2l6ZShuZXdDb2xzLCBudWxsQ2VsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9jb2xzID0gbmV3Q29scztcbiAgICB0aGlzLl9yb3dzID0gbmV3Um93cztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IF9pc1JlZmxvd0VuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2hhc1Njcm9sbGJhY2sgJiYgIXRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMud2luZG93c01vZGU7XG4gIH1cblxuICBwcml2YXRlIF9yZWZsb3cobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY29scyA9PT0gbmV3Q29scykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCByb3dzLCBpZ25vcmUgdGhlIGxhc3Qgb25lIGFzIGl0IGNhbm5vdCBiZSB3cmFwcGVkXG4gICAgaWYgKG5ld0NvbHMgPiB0aGlzLl9jb2xzKSB7XG4gICAgICB0aGlzLl9yZWZsb3dMYXJnZXIobmV3Q29scywgbmV3Um93cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3JlZmxvd1NtYWxsZXIobmV3Q29scywgbmV3Um93cyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVmbG93TGFyZ2VyKG5ld0NvbHM6IG51bWJlciwgbmV3Um93czogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgdG9SZW1vdmU6IG51bWJlcltdID0gcmVmbG93TGFyZ2VyR2V0TGluZXNUb1JlbW92ZSh0aGlzLmxpbmVzLCB0aGlzLl9jb2xzLCBuZXdDb2xzLCB0aGlzLnliYXNlICsgdGhpcy55LCB0aGlzLmdldE51bGxDZWxsKERFRkFVTFRfQVRUUl9EQVRBKSk7XG4gICAgaWYgKHRvUmVtb3ZlLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG5ld0xheW91dFJlc3VsdCA9IHJlZmxvd0xhcmdlckNyZWF0ZU5ld0xheW91dCh0aGlzLmxpbmVzLCB0b1JlbW92ZSk7XG4gICAgICByZWZsb3dMYXJnZXJBcHBseU5ld0xheW91dCh0aGlzLmxpbmVzLCBuZXdMYXlvdXRSZXN1bHQubGF5b3V0KTtcbiAgICAgIHRoaXMuX3JlZmxvd0xhcmdlckFkanVzdFZpZXdwb3J0KG5ld0NvbHMsIG5ld1Jvd3MsIG5ld0xheW91dFJlc3VsdC5jb3VudFJlbW92ZWQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3JlZmxvd0xhcmdlckFkanVzdFZpZXdwb3J0KG5ld0NvbHM6IG51bWJlciwgbmV3Um93czogbnVtYmVyLCBjb3VudFJlbW92ZWQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IG51bGxDZWxsID0gdGhpcy5nZXROdWxsQ2VsbChERUZBVUxUX0FUVFJfREFUQSk7XG4gICAgLy8gQWRqdXN0IHZpZXdwb3J0IGJhc2VkIG9uIG51bWJlciBvZiBpdGVtcyByZW1vdmVkXG4gICAgbGV0IHZpZXdwb3J0QWRqdXN0bWVudHMgPSBjb3VudFJlbW92ZWQ7XG4gICAgd2hpbGUgKHZpZXdwb3J0QWRqdXN0bWVudHMtLSA+IDApIHtcbiAgICAgIGlmICh0aGlzLnliYXNlID09PSAwKSB7XG4gICAgICAgIGlmICh0aGlzLnkgPiAwKSB7XG4gICAgICAgICAgdGhpcy55LS07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubGluZXMubGVuZ3RoIDwgbmV3Um93cykge1xuICAgICAgICAgIC8vIEFkZCBhbiBleHRyYSByb3cgYXQgdGhlIGJvdHRvbSBvZiB0aGUgdmlld3BvcnRcbiAgICAgICAgICB0aGlzLmxpbmVzLnB1c2gobmV3IEJ1ZmZlckxpbmUobmV3Q29scywgbnVsbENlbGwpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMueWRpc3AgPT09IHRoaXMueWJhc2UpIHtcbiAgICAgICAgICB0aGlzLnlkaXNwLS07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy55YmFzZS0tO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnNhdmVkWSA9IE1hdGgubWF4KHRoaXMuc2F2ZWRZIC0gY291bnRSZW1vdmVkLCAwKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlZmxvd1NtYWxsZXIobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBudWxsQ2VsbCA9IHRoaXMuZ2V0TnVsbENlbGwoREVGQVVMVF9BVFRSX0RBVEEpO1xuICAgIC8vIEdhdGhlciBhbGwgQnVmZmVyTGluZXMgdGhhdCBuZWVkIHRvIGJlIGluc2VydGVkIGludG8gdGhlIEJ1ZmZlciBoZXJlIHNvIHRoYXQgdGhleSBjYW4gYmVcbiAgICAvLyBiYXRjaGVkIHVwIGFuZCBvbmx5IGNvbW1pdHRlZCBvbmNlXG4gICAgY29uc3QgdG9JbnNlcnQgPSBbXTtcbiAgICBsZXQgY291bnRUb0luc2VydCA9IDA7XG4gICAgLy8gR28gYmFja3dhcmRzIGFzIG1hbnkgbGluZXMgbWF5IGJlIHRyaW1tZWQgYW5kIHRoaXMgd2lsbCBhdm9pZCBjb25zaWRlcmluZyB0aGVtXG4gICAgZm9yIChsZXQgeSA9IHRoaXMubGluZXMubGVuZ3RoIC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBsaW5lIGlzIGEgcHJvYmxlbVxuICAgICAgbGV0IG5leHRMaW5lID0gdGhpcy5saW5lcy5nZXQoeSkgYXMgQnVmZmVyTGluZTtcbiAgICAgIGlmICghbmV4dExpbmUgfHwgIW5leHRMaW5lLmlzV3JhcHBlZCAmJiBuZXh0TGluZS5nZXRUcmltbWVkTGVuZ3RoKCkgPD0gbmV3Q29scykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gR2F0aGVyIHdyYXBwZWQgbGluZXMgYW5kIGFkanVzdCB5IHRvIGJlIHRoZSBzdGFydGluZyBsaW5lXG4gICAgICBjb25zdCB3cmFwcGVkTGluZXM6IEJ1ZmZlckxpbmVbXSA9IFtuZXh0TGluZV07XG4gICAgICB3aGlsZSAobmV4dExpbmUuaXNXcmFwcGVkICYmIHkgPiAwKSB7XG4gICAgICAgIG5leHRMaW5lID0gdGhpcy5saW5lcy5nZXQoLS15KSBhcyBCdWZmZXJMaW5lO1xuICAgICAgICB3cmFwcGVkTGluZXMudW5zaGlmdChuZXh0TGluZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZXNlIGxpbmVzIGNvbnRhaW4gdGhlIGN1cnNvciBkb24ndCB0b3VjaCB0aGVtLCB0aGUgcHJvZ3JhbSB3aWxsIGhhbmRsZSBmaXhpbmcgdXBcbiAgICAgIC8vIHdyYXBwZWQgbGluZXMgd2l0aCB0aGUgY3Vyc29yXG4gICAgICBjb25zdCBhYnNvbHV0ZVkgPSB0aGlzLnliYXNlICsgdGhpcy55O1xuICAgICAgaWYgKGFic29sdXRlWSA+PSB5ICYmIGFic29sdXRlWSA8IHkgKyB3cmFwcGVkTGluZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsYXN0TGluZUxlbmd0aCA9IHdyYXBwZWRMaW5lc1t3cmFwcGVkTGluZXMubGVuZ3RoIC0gMV0uZ2V0VHJpbW1lZExlbmd0aCgpO1xuICAgICAgY29uc3QgZGVzdExpbmVMZW5ndGhzID0gcmVmbG93U21hbGxlckdldE5ld0xpbmVMZW5ndGhzKHdyYXBwZWRMaW5lcywgdGhpcy5fY29scywgbmV3Q29scyk7XG4gICAgICBjb25zdCBsaW5lc1RvQWRkID0gZGVzdExpbmVMZW5ndGhzLmxlbmd0aCAtIHdyYXBwZWRMaW5lcy5sZW5ndGg7XG4gICAgICBsZXQgdHJpbW1lZExpbmVzOiBudW1iZXI7XG4gICAgICBpZiAodGhpcy55YmFzZSA9PT0gMCAmJiB0aGlzLnkgIT09IHRoaXMubGluZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAvLyBJZiB0aGUgdG9wIHNlY3Rpb24gb2YgdGhlIGJ1ZmZlciBpcyBub3QgeWV0IGZpbGxlZFxuICAgICAgICB0cmltbWVkTGluZXMgPSBNYXRoLm1heCgwLCB0aGlzLnkgLSB0aGlzLmxpbmVzLm1heExlbmd0aCArIGxpbmVzVG9BZGQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJpbW1lZExpbmVzID0gTWF0aC5tYXgoMCwgdGhpcy5saW5lcy5sZW5ndGggLSB0aGlzLmxpbmVzLm1heExlbmd0aCArIGxpbmVzVG9BZGQpO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgdGhlIG5ldyBsaW5lc1xuICAgICAgY29uc3QgbmV3TGluZXM6IEJ1ZmZlckxpbmVbXSA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lc1RvQWRkOyBpKyspIHtcbiAgICAgICAgY29uc3QgbmV3TGluZSA9IHRoaXMuZ2V0QmxhbmtMaW5lKERFRkFVTFRfQVRUUl9EQVRBLCB0cnVlKSBhcyBCdWZmZXJMaW5lO1xuICAgICAgICBuZXdMaW5lcy5wdXNoKG5ld0xpbmUpO1xuICAgICAgfVxuICAgICAgaWYgKG5ld0xpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdG9JbnNlcnQucHVzaCh7XG4gICAgICAgICAgLy8gY291bnRUb0luc2VydCBoZXJlIGdldHMgdGhlIGFjdHVhbCBpbmRleCwgdGFraW5nIGludG8gYWNjb3VudCBvdGhlciBpbnNlcnRlZCBpdGVtcy5cbiAgICAgICAgICAvLyB1c2luZyB0aGlzIHdlIGNhbiBpdGVyYXRlIHRocm91Z2ggdGhlIGxpc3QgZm9yd2FyZHNcbiAgICAgICAgICBzdGFydDogeSArIHdyYXBwZWRMaW5lcy5sZW5ndGggKyBjb3VudFRvSW5zZXJ0LFxuICAgICAgICAgIG5ld0xpbmVzXG4gICAgICAgIH0pO1xuICAgICAgICBjb3VudFRvSW5zZXJ0ICs9IG5ld0xpbmVzLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIHdyYXBwZWRMaW5lcy5wdXNoKC4uLm5ld0xpbmVzKTtcblxuICAgICAgLy8gQ29weSBidWZmZXIgZGF0YSB0byBuZXcgbG9jYXRpb25zLCB0aGlzIG5lZWRzIHRvIGhhcHBlbiBiYWNrd2FyZHMgdG8gZG8gaW4tcGxhY2VcbiAgICAgIGxldCBkZXN0TGluZUluZGV4ID0gZGVzdExpbmVMZW5ndGhzLmxlbmd0aCAtIDE7IC8vIE1hdGguZmxvb3IoY2VsbHNOZWVkZWQgLyBuZXdDb2xzKTtcbiAgICAgIGxldCBkZXN0Q29sID0gZGVzdExpbmVMZW5ndGhzW2Rlc3RMaW5lSW5kZXhdOyAvLyBjZWxsc05lZWRlZCAlIG5ld0NvbHM7XG4gICAgICBpZiAoZGVzdENvbCA9PT0gMCkge1xuICAgICAgICBkZXN0TGluZUluZGV4LS07XG4gICAgICAgIGRlc3RDb2wgPSBkZXN0TGluZUxlbmd0aHNbZGVzdExpbmVJbmRleF07XG4gICAgICB9XG4gICAgICBsZXQgc3JjTGluZUluZGV4ID0gd3JhcHBlZExpbmVzLmxlbmd0aCAtIGxpbmVzVG9BZGQgLSAxO1xuICAgICAgbGV0IHNyY0NvbCA9IGxhc3RMaW5lTGVuZ3RoO1xuICAgICAgd2hpbGUgKHNyY0xpbmVJbmRleCA+PSAwKSB7XG4gICAgICAgIGNvbnN0IGNlbGxzVG9Db3B5ID0gTWF0aC5taW4oc3JjQ29sLCBkZXN0Q29sKTtcbiAgICAgICAgd3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXhdLmNvcHlDZWxsc0Zyb20od3JhcHBlZExpbmVzW3NyY0xpbmVJbmRleF0sIHNyY0NvbCAtIGNlbGxzVG9Db3B5LCBkZXN0Q29sIC0gY2VsbHNUb0NvcHksIGNlbGxzVG9Db3B5LCB0cnVlKTtcbiAgICAgICAgZGVzdENvbCAtPSBjZWxsc1RvQ29weTtcbiAgICAgICAgaWYgKGRlc3RDb2wgPT09IDApIHtcbiAgICAgICAgICBkZXN0TGluZUluZGV4LS07XG4gICAgICAgICAgZGVzdENvbCA9IGRlc3RMaW5lTGVuZ3Roc1tkZXN0TGluZUluZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBzcmNDb2wgLT0gY2VsbHNUb0NvcHk7XG4gICAgICAgIGlmIChzcmNDb2wgPT09IDApIHtcbiAgICAgICAgICBzcmNMaW5lSW5kZXgtLTtcbiAgICAgICAgICBjb25zdCB3cmFwcGVkTGluZXNJbmRleCA9IE1hdGgubWF4KHNyY0xpbmVJbmRleCwgMCk7XG4gICAgICAgICAgc3JjQ29sID0gZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoKHdyYXBwZWRMaW5lcywgd3JhcHBlZExpbmVzSW5kZXgsIHRoaXMuX2NvbHMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE51bGwgb3V0IHRoZSBlbmQgb2YgdGhlIGxpbmUgZW5kcyBpZiBhIHdpZGUgY2hhcmFjdGVyIHdyYXBwZWQgdG8gdGhlIGZvbGxvd2luZyBsaW5lXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdyYXBwZWRMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZGVzdExpbmVMZW5ndGhzW2ldIDwgbmV3Q29scykge1xuICAgICAgICAgIHdyYXBwZWRMaW5lc1tpXS5zZXRDZWxsKGRlc3RMaW5lTGVuZ3Roc1tpXSwgbnVsbENlbGwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFkanVzdCB2aWV3cG9ydCBhcyBuZWVkZWRcbiAgICAgIGxldCB2aWV3cG9ydEFkanVzdG1lbnRzID0gbGluZXNUb0FkZCAtIHRyaW1tZWRMaW5lcztcbiAgICAgIHdoaWxlICh2aWV3cG9ydEFkanVzdG1lbnRzLS0gPiAwKSB7XG4gICAgICAgIGlmICh0aGlzLnliYXNlID09PSAwKSB7XG4gICAgICAgICAgaWYgKHRoaXMueSA8IG5ld1Jvd3MgLSAxKSB7XG4gICAgICAgICAgICB0aGlzLnkrKztcbiAgICAgICAgICAgIHRoaXMubGluZXMucG9wKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMueWJhc2UrKztcbiAgICAgICAgICAgIHRoaXMueWRpc3ArKztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRW5zdXJlIHliYXNlIGRvZXMgbm90IGV4Y2VlZCBpdHMgbWF4aW11bSB2YWx1ZVxuICAgICAgICAgIGlmICh0aGlzLnliYXNlIDwgTWF0aC5taW4odGhpcy5saW5lcy5tYXhMZW5ndGgsIHRoaXMubGluZXMubGVuZ3RoICsgY291bnRUb0luc2VydCkgLSBuZXdSb3dzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy55YmFzZSA9PT0gdGhpcy55ZGlzcCkge1xuICAgICAgICAgICAgICB0aGlzLnlkaXNwKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnliYXNlKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnNhdmVkWSA9IE1hdGgubWluKHRoaXMuc2F2ZWRZICsgbGluZXNUb0FkZCwgdGhpcy55YmFzZSArIG5ld1Jvd3MgLSAxKTtcbiAgICB9XG5cbiAgICAvLyBSZWFycmFuZ2UgbGluZXMgaW4gdGhlIGJ1ZmZlciBpZiB0aGVyZSBhcmUgYW55IGluc2VydGlvbnMsIHRoaXMgaXMgZG9uZSBhdCB0aGUgZW5kIHJhdGhlclxuICAgIC8vIHRoYW4gZWFybGllciBzbyB0aGF0IGl0J3MgYSBzaW5nbGUgTyhuKSBwYXNzIHRocm91Z2ggdGhlIGJ1ZmZlciwgaW5zdGVhZCBvZiBPKG5eMikgZnJvbSBtYW55XG4gICAgLy8gY29zdGx5IGNhbGxzIHRvIENpcmN1bGFyTGlzdC5zcGxpY2UuXG4gICAgaWYgKHRvSW5zZXJ0Lmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIFJlY29yZCBidWZmZXIgaW5zZXJ0IGV2ZW50cyBhbmQgdGhlbiBwbGF5IHRoZW0gYmFjayBiYWNrd2FyZHMgc28gdGhhdCB0aGUgaW5kZXhlcyBhcmVcbiAgICAgIC8vIGNvcnJlY3RcbiAgICAgIGNvbnN0IGluc2VydEV2ZW50czogSUluc2VydEV2ZW50W10gPSBbXTtcblxuICAgICAgLy8gUmVjb3JkIG9yaWdpbmFsIGxpbmVzIHNvIHRoZXkgZG9uJ3QgZ2V0IG92ZXJyaWRkZW4gd2hlbiB3ZSByZWFycmFuZ2UgdGhlIGxpc3RcbiAgICAgIGNvbnN0IG9yaWdpbmFsTGluZXM6IEJ1ZmZlckxpbmVbXSA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG9yaWdpbmFsTGluZXMucHVzaCh0aGlzLmxpbmVzLmdldChpKSBhcyBCdWZmZXJMaW5lKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9yaWdpbmFsTGluZXNMZW5ndGggPSB0aGlzLmxpbmVzLmxlbmd0aDtcblxuICAgICAgbGV0IG9yaWdpbmFsTGluZUluZGV4ID0gb3JpZ2luYWxMaW5lc0xlbmd0aCAtIDE7XG4gICAgICBsZXQgbmV4dFRvSW5zZXJ0SW5kZXggPSAwO1xuICAgICAgbGV0IG5leHRUb0luc2VydCA9IHRvSW5zZXJ0W25leHRUb0luc2VydEluZGV4XTtcbiAgICAgIHRoaXMubGluZXMubGVuZ3RoID0gTWF0aC5taW4odGhpcy5saW5lcy5tYXhMZW5ndGgsIHRoaXMubGluZXMubGVuZ3RoICsgY291bnRUb0luc2VydCk7XG4gICAgICBsZXQgY291bnRJbnNlcnRlZFNvRmFyID0gMDtcbiAgICAgIGZvciAobGV0IGkgPSBNYXRoLm1pbih0aGlzLmxpbmVzLm1heExlbmd0aCAtIDEsIG9yaWdpbmFsTGluZXNMZW5ndGggKyBjb3VudFRvSW5zZXJ0IC0gMSk7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGlmIChuZXh0VG9JbnNlcnQgJiYgbmV4dFRvSW5zZXJ0LnN0YXJ0ID4gb3JpZ2luYWxMaW5lSW5kZXggKyBjb3VudEluc2VydGVkU29GYXIpIHtcbiAgICAgICAgICAvLyBJbnNlcnQgZXh0cmEgbGluZXMgaGVyZSwgYWRqdXN0aW5nIGkgYXMgbmVlZGVkXG4gICAgICAgICAgZm9yIChsZXQgbmV4dEkgPSBuZXh0VG9JbnNlcnQubmV3TGluZXMubGVuZ3RoIC0gMTsgbmV4dEkgPj0gMDsgbmV4dEktLSkge1xuICAgICAgICAgICAgdGhpcy5saW5lcy5zZXQoaS0tLCBuZXh0VG9JbnNlcnQubmV3TGluZXNbbmV4dEldKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaSsrO1xuXG4gICAgICAgICAgLy8gQ3JlYXRlIGluc2VydCBldmVudHMgZm9yIGxhdGVyXG4gICAgICAgICAgaW5zZXJ0RXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgaW5kZXg6IG9yaWdpbmFsTGluZUluZGV4ICsgMSxcbiAgICAgICAgICAgIGFtb3VudDogbmV4dFRvSW5zZXJ0Lm5ld0xpbmVzLmxlbmd0aFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY291bnRJbnNlcnRlZFNvRmFyICs9IG5leHRUb0luc2VydC5uZXdMaW5lcy5sZW5ndGg7XG4gICAgICAgICAgbmV4dFRvSW5zZXJ0ID0gdG9JbnNlcnRbKytuZXh0VG9JbnNlcnRJbmRleF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5saW5lcy5zZXQoaSwgb3JpZ2luYWxMaW5lc1tvcmlnaW5hbExpbmVJbmRleC0tXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIG1hcmtlcnNcbiAgICAgIGxldCBpbnNlcnRDb3VudEVtaXR0ZWQgPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IGluc2VydEV2ZW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBpbnNlcnRFdmVudHNbaV0uaW5kZXggKz0gaW5zZXJ0Q291bnRFbWl0dGVkO1xuICAgICAgICB0aGlzLmxpbmVzLm9uSW5zZXJ0RW1pdHRlci5maXJlKGluc2VydEV2ZW50c1tpXSk7XG4gICAgICAgIGluc2VydENvdW50RW1pdHRlZCArPSBpbnNlcnRFdmVudHNbaV0uYW1vdW50O1xuICAgICAgfVxuICAgICAgY29uc3QgYW1vdW50VG9UcmltID0gTWF0aC5tYXgoMCwgb3JpZ2luYWxMaW5lc0xlbmd0aCArIGNvdW50VG9JbnNlcnQgLSB0aGlzLmxpbmVzLm1heExlbmd0aCk7XG4gICAgICBpZiAoYW1vdW50VG9UcmltID4gMCkge1xuICAgICAgICB0aGlzLmxpbmVzLm9uVHJpbUVtaXR0ZXIuZmlyZShhbW91bnRUb1RyaW0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIHByaXZhdGUgX3JlZmxvd1NtYWxsZXJHZXRMaW5lc05lZWRlZCgpXG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgYSBzdHJpbmcgaW5kZXggYmFjayB0byBhIEJ1ZmZlckluZGV4LlxuICAgKiBUbyBnZXQgdGhlIGNvcnJlY3QgYnVmZmVyIHBvc2l0aW9uIHRoZSBzdHJpbmcgbXVzdCBzdGFydCBhdCBgc3RhcnRDb2xgIDBcbiAgICogKGRlZmF1bHQgaW4gdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKS5cbiAgICogVGhlIG1ldGhvZCBhbHNvIHdvcmtzIG9uIHdyYXBwZWQgbGluZSBzdHJpbmdzIGdpdmVuIHJvd3Mgd2VyZSBub3QgdHJpbW1lZC5cbiAgICogVGhlIG1ldGhvZCBvcGVyYXRlcyBvbiB0aGUgQ2hhckRhdGEgc3RyaW5nIGxlbmd0aCwgdGhlcmUgYXJlIG5vXG4gICAqIGFkZGl0aW9uYWwgY29udGVudCBvciBib3VuZGFyeSBjaGVja3MuIFRoZXJlZm9yZSB0aGUgc3RyaW5nIGFuZCB0aGUgYnVmZmVyXG4gICAqIHNob3VsZCBub3QgYmUgYWx0ZXJlZCBpbiBiZXR3ZWVuLlxuICAgKiBUT0RPOiByZXNwZWN0IHRyaW0gZmxhZyBhZnRlciBmaXhpbmcgIzE2ODVcbiAgICogQHBhcmFtIGxpbmVJbmRleCBsaW5lIGluZGV4IHRoZSBzdHJpbmcgd2FzIHJldHJpZXZlZCBmcm9tXG4gICAqIEBwYXJhbSBzdHJpbmdJbmRleCBpbmRleCB3aXRoaW4gdGhlIHN0cmluZ1xuICAgKiBAcGFyYW0gc3RhcnRDb2wgY29sdW1uIG9mZnNldCB0aGUgc3RyaW5nIHdhcyByZXRyaWV2ZWQgZnJvbVxuICAgKi9cbiAgcHVibGljIHN0cmluZ0luZGV4VG9CdWZmZXJJbmRleChsaW5lSW5kZXg6IG51bWJlciwgc3RyaW5nSW5kZXg6IG51bWJlciwgdHJpbVJpZ2h0OiBib29sZWFuID0gZmFsc2UpOiBCdWZmZXJJbmRleCB7XG4gICAgd2hpbGUgKHN0cmluZ0luZGV4KSB7XG4gICAgICBjb25zdCBsaW5lID0gdGhpcy5saW5lcy5nZXQobGluZUluZGV4KTtcbiAgICAgIGlmICghbGluZSkge1xuICAgICAgICByZXR1cm4gWy0xLCAtMV07XG4gICAgICB9XG4gICAgICBjb25zdCBsZW5ndGggPSAodHJpbVJpZ2h0KSA/IGxpbmUuZ2V0VHJpbW1lZExlbmd0aCgpIDogbGluZS5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChsaW5lLmdldChpKVtDSEFSX0RBVEFfV0lEVEhfSU5ERVhdKSB7XG4gICAgICAgICAgLy8gZW1wdHkgY2VsbHMgcmVwb3J0IGEgc3RyaW5nIGxlbmd0aCBvZiAwLCBidXQgZ2V0IHJlcGxhY2VkXG4gICAgICAgICAgLy8gd2l0aCBhIHdoaXRlc3BhY2UgaW4gdHJhbnNsYXRlVG9TdHJpbmcsIHRodXMgcmVwbGFjZSB3aXRoIDFcbiAgICAgICAgICBzdHJpbmdJbmRleCAtPSBsaW5lLmdldChpKVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RoIHx8IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0cmluZ0luZGV4IDwgMCkge1xuICAgICAgICAgIHJldHVybiBbbGluZUluZGV4LCBpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGluZUluZGV4Kys7XG4gICAgfVxuICAgIHJldHVybiBbbGluZUluZGV4LCAwXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIGEgYnVmZmVyIGxpbmUgdG8gYSBzdHJpbmcsIHdpdGggb3B0aW9uYWwgc3RhcnQgYW5kIGVuZCBjb2x1bW5zLlxuICAgKiBXaWRlIGNoYXJhY3RlcnMgd2lsbCBjb3VudCBhcyB0d28gY29sdW1ucyBpbiB0aGUgcmVzdWx0aW5nIHN0cmluZy4gVGhpc1xuICAgKiBmdW5jdGlvbiBpcyB1c2VmdWwgZm9yIGdldHRpbmcgdGhlIGFjdHVhbCB0ZXh0IHVuZGVybmVhdGggdGhlIHJhdyBzZWxlY3Rpb25cbiAgICogcG9zaXRpb24uXG4gICAqIEBwYXJhbSBsaW5lIFRoZSBsaW5lIGJlaW5nIHRyYW5zbGF0ZWQuXG4gICAqIEBwYXJhbSB0cmltUmlnaHQgV2hldGhlciB0byB0cmltIHdoaXRlc3BhY2UgdG8gdGhlIHJpZ2h0LlxuICAgKiBAcGFyYW0gc3RhcnRDb2wgVGhlIGNvbHVtbiB0byBzdGFydCBhdC5cbiAgICogQHBhcmFtIGVuZENvbCBUaGUgY29sdW1uIHRvIGVuZCBhdC5cbiAgICovXG4gIHB1YmxpYyB0cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcobGluZUluZGV4OiBudW1iZXIsIHRyaW1SaWdodDogYm9vbGVhbiwgc3RhcnRDb2w6IG51bWJlciA9IDAsIGVuZENvbD86IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgbGluZSA9IHRoaXMubGluZXMuZ2V0KGxpbmVJbmRleCk7XG4gICAgaWYgKCFsaW5lKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHJldHVybiBsaW5lLnRyYW5zbGF0ZVRvU3RyaW5nKHRyaW1SaWdodCwgc3RhcnRDb2wsIGVuZENvbCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0V3JhcHBlZFJhbmdlRm9yTGluZSh5OiBudW1iZXIpOiB7IGZpcnN0OiBudW1iZXIsIGxhc3Q6IG51bWJlciB9IHtcbiAgICBsZXQgZmlyc3QgPSB5O1xuICAgIGxldCBsYXN0ID0geTtcbiAgICAvLyBTY2FuIHVwd2FyZHMgZm9yIHdyYXBwZWQgbGluZXNcbiAgICB3aGlsZSAoZmlyc3QgPiAwICYmIHRoaXMubGluZXMuZ2V0KGZpcnN0KSEuaXNXcmFwcGVkKSB7XG4gICAgICBmaXJzdC0tO1xuICAgIH1cbiAgICAvLyBTY2FuIGRvd253YXJkcyBmb3Igd3JhcHBlZCBsaW5lc1xuICAgIHdoaWxlIChsYXN0ICsgMSA8IHRoaXMubGluZXMubGVuZ3RoICYmIHRoaXMubGluZXMuZ2V0KGxhc3QgKyAxKSEuaXNXcmFwcGVkKSB7XG4gICAgICBsYXN0Kys7XG4gICAgfVxuICAgIHJldHVybiB7IGZpcnN0LCBsYXN0IH07XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgdGhlIHRhYiBzdG9wcy5cbiAgICogQHBhcmFtIGkgVGhlIGluZGV4IHRvIHN0YXJ0IHNldHRpbmcgdXAgdGFiIHN0b3BzIGZyb20uXG4gICAqL1xuICBwdWJsaWMgc2V0dXBUYWJTdG9wcyhpPzogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGkgIT09IG51bGwgJiYgaSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXRoaXMudGFic1tpXSkge1xuICAgICAgICBpID0gdGhpcy5wcmV2U3RvcChpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50YWJzID0ge307XG4gICAgICBpID0gMDtcbiAgICB9XG5cbiAgICBmb3IgKDsgaSA8IHRoaXMuX2NvbHM7IGkgKz0gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy50YWJTdG9wV2lkdGgpIHtcbiAgICAgIHRoaXMudGFic1tpXSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIGN1cnNvciB0byB0aGUgcHJldmlvdXMgdGFiIHN0b3AgZnJvbSB0aGUgZ2l2ZW4gcG9zaXRpb24gKGRlZmF1bHQgaXMgY3VycmVudCkuXG4gICAqIEBwYXJhbSB4IFRoZSBwb3NpdGlvbiB0byBtb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIHByZXZpb3VzIHRhYiBzdG9wLlxuICAgKi9cbiAgcHVibGljIHByZXZTdG9wKHg/OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmICh4ID09PSBudWxsIHx8IHggPT09IHVuZGVmaW5lZCkge1xuICAgICAgeCA9IHRoaXMueDtcbiAgICB9XG4gICAgd2hpbGUgKCF0aGlzLnRhYnNbLS14XSAmJiB4ID4gMCk7XG4gICAgcmV0dXJuIHggPj0gdGhpcy5fY29scyA/IHRoaXMuX2NvbHMgLSAxIDogeCA8IDAgPyAwIDogeDtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBjdXJzb3Igb25lIHRhYiBzdG9wIGZvcndhcmQgZnJvbSB0aGUgZ2l2ZW4gcG9zaXRpb24gKGRlZmF1bHQgaXMgY3VycmVudCkuXG4gICAqIEBwYXJhbSB4IFRoZSBwb3NpdGlvbiB0byBtb3ZlIHRoZSBjdXJzb3Igb25lIHRhYiBzdG9wIGZvcndhcmQuXG4gICAqL1xuICBwdWJsaWMgbmV4dFN0b3AoeD86IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHggPT09IG51bGwgfHwgeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB4ID0gdGhpcy54O1xuICAgIH1cbiAgICB3aGlsZSAoIXRoaXMudGFic1srK3hdICYmIHggPCB0aGlzLl9jb2xzKTtcbiAgICByZXR1cm4geCA+PSB0aGlzLl9jb2xzID8gdGhpcy5fY29scyAtIDEgOiB4IDwgMCA/IDAgOiB4O1xuICB9XG5cbiAgcHVibGljIGFkZE1hcmtlcih5OiBudW1iZXIpOiBNYXJrZXIge1xuICAgIGNvbnN0IG1hcmtlciA9IG5ldyBNYXJrZXIoeSk7XG4gICAgdGhpcy5tYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICBtYXJrZXIucmVnaXN0ZXIodGhpcy5saW5lcy5vblRyaW0oYW1vdW50ID0+IHtcbiAgICAgIG1hcmtlci5saW5lIC09IGFtb3VudDtcbiAgICAgIC8vIFRoZSBtYXJrZXIgc2hvdWxkIGJlIGRpc3Bvc2VkIHdoZW4gdGhlIGxpbmUgaXMgdHJpbW1lZCBmcm9tIHRoZSBidWZmZXJcbiAgICAgIGlmIChtYXJrZXIubGluZSA8IDApIHtcbiAgICAgICAgbWFya2VyLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgbWFya2VyLnJlZ2lzdGVyKHRoaXMubGluZXMub25JbnNlcnQoZXZlbnQgPT4ge1xuICAgICAgaWYgKG1hcmtlci5saW5lID49IGV2ZW50LmluZGV4KSB7XG4gICAgICAgIG1hcmtlci5saW5lICs9IGV2ZW50LmFtb3VudDtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgbWFya2VyLnJlZ2lzdGVyKHRoaXMubGluZXMub25EZWxldGUoZXZlbnQgPT4ge1xuICAgICAgLy8gRGVsZXRlIHRoZSBtYXJrZXIgaWYgaXQncyB3aXRoaW4gdGhlIHJhbmdlXG4gICAgICBpZiAobWFya2VyLmxpbmUgPj0gZXZlbnQuaW5kZXggJiYgbWFya2VyLmxpbmUgPCBldmVudC5pbmRleCArIGV2ZW50LmFtb3VudCkge1xuICAgICAgICBtYXJrZXIuZGlzcG9zZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBTaGlmdCB0aGUgbWFya2VyIGlmIGl0J3MgYWZ0ZXIgdGhlIGRlbGV0ZWQgcmFuZ2VcbiAgICAgIGlmIChtYXJrZXIubGluZSA+IGV2ZW50LmluZGV4KSB7XG4gICAgICAgIG1hcmtlci5saW5lIC09IGV2ZW50LmFtb3VudDtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgbWFya2VyLnJlZ2lzdGVyKG1hcmtlci5vbkRpc3Bvc2UoKCkgPT4gdGhpcy5fcmVtb3ZlTWFya2VyKG1hcmtlcikpKTtcbiAgICByZXR1cm4gbWFya2VyO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVtb3ZlTWFya2VyKG1hcmtlcjogTWFya2VyKTogdm9pZCB7XG4gICAgdGhpcy5tYXJrZXJzLnNwbGljZSh0aGlzLm1hcmtlcnMuaW5kZXhPZihtYXJrZXIpLCAxKTtcbiAgfVxuXG4gIHB1YmxpYyBpdGVyYXRvcih0cmltUmlnaHQ6IGJvb2xlYW4sIHN0YXJ0SW5kZXg/OiBudW1iZXIsIGVuZEluZGV4PzogbnVtYmVyLCBzdGFydE92ZXJzY2FuPzogbnVtYmVyLCBlbmRPdmVyc2Nhbj86IG51bWJlcik6IElCdWZmZXJTdHJpbmdJdGVyYXRvciB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXJTdHJpbmdJdGVyYXRvcih0aGlzLCB0cmltUmlnaHQsIHN0YXJ0SW5kZXgsIGVuZEluZGV4LCBzdGFydE92ZXJzY2FuLCBlbmRPdmVyc2Nhbik7XG4gIH1cbn1cblxuLyoqXG4gKiBJdGVyYXRvciB0byBnZXQgdW53cmFwcGVkIGNvbnRlbnQgc3RyaW5ncyBmcm9tIHRoZSBidWZmZXIuXG4gKiBUaGUgaXRlcmF0b3IgcmV0dXJucyBhdCBsZWFzdCB0aGUgc3RyaW5nIGRhdGEgYmV0d2VlbiB0aGUgYm9yZGVyc1xuICogYHN0YXJ0SW5kZXhgIGFuZCBgZW5kSW5kZXhgIChleGNsdXNpdmUpIGFuZCB3aWxsIGV4cGFuZCB0aGUgbGluZXNcbiAqIGJ5IGBzdGFydE92ZXJzY2FuYCB0byB0aGUgdG9wIGFuZCBieSBgZW5kT3ZlcnNjYW5gIHRvIHRoZSBib3R0b20sXG4gKiBpZiBubyBuZXcgbGluZSB3YXMgZm91bmQgaW4gYmV0d2Vlbi5cbiAqIEl0IHdpbGwgbmV2ZXIgcmVhZC9yZXR1cm4gc3RyaW5nIGRhdGEgYmV5b25kIGBzdGFydEluZGV4IC0gc3RhcnRPdmVyc2NhbmBcbiAqIG9yIGBlbmRJbmRleCArIGVuZE92ZXJzY2FuYC4gVGhlcmVmb3JlIHRoZSBmaXJzdCBhbmQgbGFzdCBsaW5lIG1pZ2h0IGJlIHRydW5jYXRlZC5cbiAqIEl0IGlzIHBvc3NpYmxlIHRvIGFsd2F5cyBnZXQgdGhlIGZ1bGwgc3RyaW5nIGZvciB0aGUgZmlyc3QgYW5kIGxhc3QgbGluZSBhcyB3ZWxsXG4gKiBieSBzZXR0aW5nIHRoZSBvdmVyc2NhbiB2YWx1ZXMgdG8gdGhlIGFjdHVhbCBidWZmZXIgbGVuZ3RoLiBUaGlzIG5vdCByZWNvbW1lbmRlZFxuICogc2luY2UgaXQgbWlnaHQgcmV0dXJuIHRoZSB3aG9sZSBidWZmZXIgd2l0aGluIGEgc2luZ2xlIHN0cmluZyBpbiBhIHdvcnN0IGNhc2Ugc2NlbmFyaW8uXG4gKi9cbmV4cG9ydCBjbGFzcyBCdWZmZXJTdHJpbmdJdGVyYXRvciBpbXBsZW1lbnRzIElCdWZmZXJTdHJpbmdJdGVyYXRvciB7XG4gIHByaXZhdGUgX2N1cnJlbnQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvciAoXG4gICAgcHJpdmF0ZSBfYnVmZmVyOiBJQnVmZmVyLFxuICAgIHByaXZhdGUgX3RyaW1SaWdodDogYm9vbGVhbixcbiAgICBwcml2YXRlIF9zdGFydEluZGV4OiBudW1iZXIgPSAwLFxuICAgIHByaXZhdGUgX2VuZEluZGV4OiBudW1iZXIgPSBfYnVmZmVyLmxpbmVzLmxlbmd0aCxcbiAgICBwcml2YXRlIF9zdGFydE92ZXJzY2FuOiBudW1iZXIgPSAwLFxuICAgIHByaXZhdGUgX2VuZE92ZXJzY2FuOiBudW1iZXIgPSAwXG4gICkge1xuICAgIGlmICh0aGlzLl9zdGFydEluZGV4IDwgMCkge1xuICAgICAgdGhpcy5fc3RhcnRJbmRleCA9IDA7XG4gICAgfVxuICAgIGlmICh0aGlzLl9lbmRJbmRleCA+IHRoaXMuX2J1ZmZlci5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2VuZEluZGV4ID0gdGhpcy5fYnVmZmVyLmxpbmVzLmxlbmd0aDtcbiAgICB9XG4gICAgdGhpcy5fY3VycmVudCA9IHRoaXMuX3N0YXJ0SW5kZXg7XG4gIH1cblxuICBwdWJsaWMgaGFzTmV4dCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudCA8IHRoaXMuX2VuZEluZGV4O1xuICB9XG5cbiAgcHVibGljIG5leHQoKTogSUJ1ZmZlclN0cmluZ0l0ZXJhdG9yUmVzdWx0IHtcbiAgICBjb25zdCByYW5nZSA9IHRoaXMuX2J1ZmZlci5nZXRXcmFwcGVkUmFuZ2VGb3JMaW5lKHRoaXMuX2N1cnJlbnQpO1xuICAgIC8vIGxpbWl0IHNlYXJjaCB3aW5kb3cgdG8gb3ZlcnNjYW4gdmFsdWUgYXQgYm90aCBib3JkZXJzXG4gICAgaWYgKHJhbmdlLmZpcnN0IDwgdGhpcy5fc3RhcnRJbmRleCAtIHRoaXMuX3N0YXJ0T3ZlcnNjYW4pIHtcbiAgICAgIHJhbmdlLmZpcnN0ID0gdGhpcy5fc3RhcnRJbmRleCAtIHRoaXMuX3N0YXJ0T3ZlcnNjYW47XG4gICAgfVxuICAgIGlmIChyYW5nZS5sYXN0ID4gdGhpcy5fZW5kSW5kZXggKyB0aGlzLl9lbmRPdmVyc2Nhbikge1xuICAgICAgcmFuZ2UubGFzdCA9IHRoaXMuX2VuZEluZGV4ICsgdGhpcy5fZW5kT3ZlcnNjYW47XG4gICAgfVxuICAgIC8vIGxpbWl0IHRvIGN1cnJlbnQgYnVmZmVyIGxlbmd0aFxuICAgIHJhbmdlLmZpcnN0ID0gTWF0aC5tYXgocmFuZ2UuZmlyc3QsIDApO1xuICAgIHJhbmdlLmxhc3QgPSBNYXRoLm1pbihyYW5nZS5sYXN0LCB0aGlzLl9idWZmZXIubGluZXMubGVuZ3RoKTtcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IHJhbmdlLmZpcnN0OyBpIDw9IHJhbmdlLmxhc3Q7ICsraSkge1xuICAgICAgcmVzdWx0ICs9IHRoaXMuX2J1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoaSwgdGhpcy5fdHJpbVJpZ2h0KTtcbiAgICB9XG4gICAgdGhpcy5fY3VycmVudCA9IHJhbmdlLmxhc3QgKyAxO1xuICAgIHJldHVybiB7cmFuZ2U6IHJhbmdlLCBjb250ZW50OiByZXN1bHR9O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IENoYXJEYXRhLCBJQnVmZmVyTGluZSwgSUNlbGxEYXRhLCBJQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBzdHJpbmdGcm9tQ29kZVBvaW50IH0gZnJvbSAnY29tbW9uL2lucHV0L1RleHREZWNvZGVyJztcbmltcG9ydCB7IENIQVJfREFUQV9DSEFSX0lOREVYLCBDSEFSX0RBVEFfV0lEVEhfSU5ERVgsIENIQVJfREFUQV9BVFRSX0lOREVYLCBOVUxMX0NFTExfQ0hBUiwgTlVMTF9DRUxMX1dJRFRILCBOVUxMX0NFTExfQ09ERSwgV0hJVEVTUEFDRV9DRUxMX0NIQVIsIENvbnRlbnQgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5cbi8qKlxuICogYnVmZmVyIG1lbW9yeSBsYXlvdXQ6XG4gKlxuICogICB8ICAgICAgICAgICAgIHVpbnQzMl90ICAgICAgICAgICAgIHwgICAgICAgIHVpbnQzMl90ICAgICAgICAgfCAgICAgICAgdWludDMyX3QgICAgICAgICB8XG4gKiAgIHwgICAgICAgICAgICAgYGNvbnRlbnRgICAgICAgICAgICAgfCAgICAgICAgICBgRkdgICAgICAgICAgICB8ICAgICAgICAgIGBCR2AgICAgICAgICAgIHxcbiAqICAgfCB3Y3dpZHRoKDIpIGNvbWIoMSkgY29kZXBvaW50KDIxKSB8IGZsYWdzKDgpIFIoOCkgRyg4KSBCKDgpIHwgZmxhZ3MoOCkgUig4KSBHKDgpIEIoOCkgfFxuICovXG5cblxuLyoqIHR5cGVkIGFycmF5IHNsb3RzIHRha2VuIGJ5IG9uZSBjZWxsICovXG5jb25zdCBDRUxMX1NJWkUgPSAzO1xuXG4vKipcbiAqIENlbGwgbWVtYmVyIGluZGljZXMuXG4gKlxuICogRGlyZWN0IGFjY2VzczpcbiAqICAgIGBjb250ZW50ID0gZGF0YVtjb2x1bW4gKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdO2BcbiAqICAgIGBmZyA9IGRhdGFbY29sdW1uICogQ0VMTF9TSVpFICsgQ2VsbC5GR107YFxuICogICAgYGJnID0gZGF0YVtjb2x1bW4gKiBDRUxMX1NJWkUgKyBDZWxsLkJHXTtgXG4gKi9cbmNvbnN0IGVudW0gQ2VsbCB7XG4gIENPTlRFTlQgPSAwLFxuICBGRyA9IDEsIC8vIGN1cnJlbnRseSBzaW1wbHkgaG9sZHMgYWxsIGtub3duIGF0dHJzXG4gIEJHID0gMiAgLy8gY3VycmVudGx5IHVudXNlZFxufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9BVFRSX0RBVEEgPSBPYmplY3QuZnJlZXplKG5ldyBBdHRyaWJ1dGVEYXRhKCkpO1xuXG4vKipcbiAqIFR5cGVkIGFycmF5IGJhc2VkIGJ1ZmZlcmxpbmUgaW1wbGVtZW50YXRpb24uXG4gKlxuICogVGhlcmUgYXJlIDIgd2F5cyB0byBpbnNlcnQgZGF0YSBpbnRvIHRoZSBjZWxsIGJ1ZmZlcjpcbiAqIC0gYHNldENlbGxGcm9tQ29kZXBvaW50YCArIGBhZGRDb2RlcG9pbnRUb0NlbGxgXG4gKiAgIFVzZSB0aGVzZSBmb3IgZGF0YSB0aGF0IGlzIGFscmVhZHkgVVRGMzIuXG4gKiAgIFVzZWQgZHVyaW5nIG5vcm1hbCBpbnB1dCBpbiBgSW5wdXRIYW5kbGVyYCBmb3IgZmFzdGVyIGJ1ZmZlciBhY2Nlc3MuXG4gKiAtIGBzZXRDZWxsYFxuICogICBUaGlzIG1ldGhvZCB0YWtlcyBhIENlbGxEYXRhIG9iamVjdCBhbmQgc3RvcmVzIHRoZSBkYXRhIGluIHRoZSBidWZmZXIuXG4gKiAgIFVzZSBgQ2VsbERhdGEuZnJvbUNoYXJEYXRhYCB0byBjcmVhdGUgdGhlIENlbGxEYXRhIG9iamVjdCAoZS5nLiBmcm9tIEpTIHN0cmluZykuXG4gKlxuICogVG8gcmV0cmlldmUgZGF0YSBmcm9tIHRoZSBidWZmZXIgdXNlIGVpdGhlciBvbmUgb2YgdGhlIHByaW1pdGl2ZSBtZXRob2RzXG4gKiAoaWYgb25seSBvbmUgcGFydGljdWxhciB2YWx1ZSBpcyBuZWVkZWQpIG9yIGBsb2FkQ2VsbGAuIEZvciBgbG9hZENlbGxgIGluIGEgbG9vcFxuICogbWVtb3J5IGFsbG9jcyAvIEdDIHByZXNzdXJlIGNhbiBiZSBncmVhdGx5IHJlZHVjZWQgYnkgcmV1c2luZyB0aGUgQ2VsbERhdGEgb2JqZWN0LlxuICovXG5leHBvcnQgY2xhc3MgQnVmZmVyTGluZSBpbXBsZW1lbnRzIElCdWZmZXJMaW5lIHtcbiAgcHJvdGVjdGVkIF9kYXRhOiBVaW50MzJBcnJheTtcbiAgcHJvdGVjdGVkIF9jb21iaW5lZDoge1tpbmRleDogbnVtYmVyXTogc3RyaW5nfSA9IHt9O1xuICBwdWJsaWMgbGVuZ3RoOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoY29sczogbnVtYmVyLCBmaWxsQ2VsbERhdGE/OiBJQ2VsbERhdGEsIHB1YmxpYyBpc1dyYXBwZWQ6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHRoaXMuX2RhdGEgPSBuZXcgVWludDMyQXJyYXkoY29scyAqIENFTExfU0laRSk7XG4gICAgY29uc3QgY2VsbCA9IGZpbGxDZWxsRGF0YSB8fCBDZWxsRGF0YS5mcm9tQ2hhckRhdGEoWzAsIE5VTExfQ0VMTF9DSEFSLCBOVUxMX0NFTExfV0lEVEgsIE5VTExfQ0VMTF9DT0RFXSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xzOyArK2kpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbChpLCBjZWxsKTtcbiAgICB9XG4gICAgdGhpcy5sZW5ndGggPSBjb2xzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjZWxsIGRhdGEgQ2hhckRhdGEuXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBwdWJsaWMgZ2V0KGluZGV4OiBudW1iZXIpOiBDaGFyRGF0YSB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdO1xuICAgIGNvbnN0IGNwID0gY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0s7XG4gICAgcmV0dXJuIFtcbiAgICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkZHXSxcbiAgICAgIChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKVxuICAgICAgICA/IHRoaXMuX2NvbWJpbmVkW2luZGV4XVxuICAgICAgICA6IChjcCkgPyBzdHJpbmdGcm9tQ29kZVBvaW50KGNwKSA6ICcnLFxuICAgICAgY29udGVudCA+PiBDb250ZW50LldJRFRIX1NISUZULFxuICAgICAgKGNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0spXG4gICAgICAgID8gdGhpcy5fY29tYmluZWRbaW5kZXhdLmNoYXJDb2RlQXQodGhpcy5fY29tYmluZWRbaW5kZXhdLmxlbmd0aCAtIDEpXG4gICAgICAgIDogY3BcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBjZWxsIGRhdGEgZnJvbSBDaGFyRGF0YS5cbiAgICogQGRlcHJlY2F0ZWRcbiAgICovXG4gIHB1YmxpYyBzZXQoaW5kZXg6IG51bWJlciwgdmFsdWU6IENoYXJEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuRkddID0gdmFsdWVbQ0hBUl9EQVRBX0FUVFJfSU5ERVhdO1xuICAgIGlmICh2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RoID4gMSkge1xuICAgICAgdGhpcy5fY29tYmluZWRbaW5kZXhdID0gdmFsdWVbMV07XG4gICAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA9IGluZGV4IHwgQ29udGVudC5JU19DT01CSU5FRF9NQVNLIHwgKHZhbHVlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPDwgQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdID0gdmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMCkgfCAodmFsdWVbQ0hBUl9EQVRBX1dJRFRIX0lOREVYXSA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcHJpbWl0aXZlIGdldHRlcnNcbiAgICogdXNlIHRoZXNlIHdoZW4gb25seSBvbmUgdmFsdWUgaXMgbmVlZGVkLCBvdGhlcndpc2UgdXNlIGBsb2FkQ2VsbGBcbiAgICovXG4gIHB1YmxpYyBnZXRXaWR0aChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPj4gQ29udGVudC5XSURUSF9TSElGVDtcbiAgfVxuXG4gIC8qKiBUZXN0IHdoZXRoZXIgY29udGVudCBoYXMgd2lkdGguICovXG4gIHB1YmxpYyBoYXNXaWR0aChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gJiBDb250ZW50LldJRFRIX01BU0s7XG4gIH1cblxuICAvKiogR2V0IEZHIGNlbGwgY29tcG9uZW50LiAqL1xuICBwdWJsaWMgZ2V0RmcoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkZHXTtcbiAgfVxuXG4gIC8qKiBHZXQgQkcgY2VsbCBjb21wb25lbnQuICovXG4gIHB1YmxpYyBnZXRCZyhpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQkddO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3Qgd2hldGhlciBjb250YWlucyBhbnkgY2hhcnMuXG4gICAqIEJhc2ljYWxseSBhbiBlbXB0eSBoYXMgbm8gY29udGVudCwgYnV0IG90aGVyIGNlbGxzIG1pZ2h0IGRpZmZlciBpbiBGRy9CR1xuICAgKiBmcm9tIHJlYWwgZW1wdHkgY2VsbHMuXG4gICAqICovXG4gIHB1YmxpYyBoYXNDb250ZW50KGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSAmIENvbnRlbnQuSEFTX0NPTlRFTlRfTUFTSztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY29kZXBvaW50IG9mIHRoZSBjZWxsLlxuICAgKiBUbyBiZSBpbiBsaW5lIHdpdGggYGNvZGVgIGluIENoYXJEYXRhIHRoaXMgZWl0aGVyIHJldHVybnNcbiAgICogYSBzaW5nbGUgVVRGMzIgY29kZXBvaW50IG9yIHRoZSBsYXN0IGNvZGVwb2ludCBvZiBhIGNvbWJpbmVkIHN0cmluZy5cbiAgICovXG4gIHB1YmxpYyBnZXRDb2RlUG9pbnQoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdO1xuICAgIGlmIChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29tYmluZWRbaW5kZXhdLmNoYXJDb2RlQXQodGhpcy5fY29tYmluZWRbaW5kZXhdLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICByZXR1cm4gY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0s7XG4gIH1cblxuICAvKiogVGVzdCB3aGV0aGVyIHRoZSBjZWxsIGNvbnRhaW5zIGEgY29tYmluZWQgc3RyaW5nLiAqL1xuICBwdWJsaWMgaXNDb21iaW5lZChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0s7XG4gIH1cblxuICAvKiogUmV0dXJucyB0aGUgc3RyaW5nIGNvbnRlbnQgb2YgdGhlIGNlbGwuICovXG4gIHB1YmxpYyBnZXRTdHJpbmcoaW5kZXg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdO1xuICAgIGlmIChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29tYmluZWRbaW5kZXhdO1xuICAgIH1cbiAgICBpZiAoY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0spIHtcbiAgICAgIHJldHVybiBzdHJpbmdGcm9tQ29kZVBvaW50KGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLKTtcbiAgICB9XG4gICAgLy8gcmV0dXJuIGVtcHR5IHN0cmluZyBmb3IgZW1wdHkgY2VsbHNcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCBkYXRhIGF0IGBpbmRleGAgaW50byBgY2VsbGAuIFRoaXMgaXMgdXNlZCB0byBhY2Nlc3MgY2VsbHMgaW4gYSB3YXkgdGhhdCdzIG1vcmUgZnJpZW5kbHlcbiAgICogdG8gR0MgYXMgaXQgc2lnbmlmaWNhbnRseSByZWR1Y2VkIHRoZSBhbW91bnQgb2YgbmV3IG9iamVjdHMvcmVmZXJlbmNlcyBuZWVkZWQuXG4gICAqL1xuICBwdWJsaWMgbG9hZENlbGwoaW5kZXg6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKTogSUNlbGxEYXRhIHtcbiAgICBjb25zdCBzdGFydEluZGV4ID0gaW5kZXggKiBDRUxMX1NJWkU7XG4gICAgY2VsbC5jb250ZW50ID0gdGhpcy5fZGF0YVtzdGFydEluZGV4ICsgQ2VsbC5DT05URU5UXTtcbiAgICBjZWxsLmZnID0gdGhpcy5fZGF0YVtzdGFydEluZGV4ICsgQ2VsbC5GR107XG4gICAgY2VsbC5iZyA9IHRoaXMuX2RhdGFbc3RhcnRJbmRleCArIENlbGwuQkddO1xuICAgIGlmIChjZWxsLmNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0spIHtcbiAgICAgIGNlbGwuY29tYmluZWREYXRhID0gdGhpcy5fY29tYmluZWRbaW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gY2VsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgZGF0YSBhdCBgaW5kZXhgIHRvIGBjZWxsYC5cbiAgICovXG4gIHB1YmxpYyBzZXRDZWxsKGluZGV4OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIGlmIChjZWxsLmNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0spIHtcbiAgICAgIHRoaXMuX2NvbWJpbmVkW2luZGV4XSA9IGNlbGwuY29tYmluZWREYXRhO1xuICAgIH1cbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA9IGNlbGwuY29udGVudDtcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5GR10gPSBjZWxsLmZnO1xuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkJHXSA9IGNlbGwuYmc7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGNlbGwgZGF0YSBmcm9tIGlucHV0IGhhbmRsZXIuXG4gICAqIFNpbmNlIHRoZSBpbnB1dCBoYW5kbGVyIHNlZSB0aGUgaW5jb21pbmcgY2hhcnMgYXMgVVRGMzIgY29kZXBvaW50cyxcbiAgICogaXQgZ2V0cyBhbiBvcHRpbWl6ZWQgYWNjZXNzIG1ldGhvZC5cbiAgICovXG4gIHB1YmxpYyBzZXRDZWxsRnJvbUNvZGVQb2ludChpbmRleDogbnVtYmVyLCBjb2RlUG9pbnQ6IG51bWJlciwgd2lkdGg6IG51bWJlciwgZmc6IG51bWJlciwgYmc6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdID0gY29kZVBvaW50IHwgKHdpZHRoIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkZHXSA9IGZnO1xuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkJHXSA9IGJnO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvZGVwb2ludCB0byBhIGNlbGwgZnJvbSBpbnB1dCBoYW5kbGVyLlxuICAgKiBEdXJpbmcgaW5wdXQgc3RhZ2UgY29tYmluaW5nIGNoYXJzIHdpdGggYSB3aWR0aCBvZiAwIGZvbGxvdyBhbmQgc3RhY2tcbiAgICogb250byBhIGxlYWRpbmcgY2hhci4gU2luY2Ugd2UgYWxyZWFkeSBzZXQgdGhlIGF0dHJzXG4gICAqIGJ5IHRoZSBwcmV2aW91cyBgc2V0RGF0YUZyb21Db2RlUG9pbnRgIGNhbGwsIHdlIGNhbiBvbWl0IGl0IGhlcmUuXG4gICAqL1xuICBwdWJsaWMgYWRkQ29kZXBvaW50VG9DZWxsKGluZGV4OiBudW1iZXIsIGNvZGVQb2ludDogbnVtYmVyKTogdm9pZCB7XG4gICAgbGV0IGNvbnRlbnQgPSB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtcbiAgICBpZiAoY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgLy8gd2UgYWxyZWFkeSBoYXZlIGEgY29tYmluZWQgc3RyaW5nLCBzaW1wbHkgYWRkXG4gICAgICB0aGlzLl9jb21iaW5lZFtpbmRleF0gKz0gc3RyaW5nRnJvbUNvZGVQb2ludChjb2RlUG9pbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0spIHtcbiAgICAgICAgLy8gbm9ybWFsIGNhc2UgZm9yIGNvbWJpbmluZyBjaGFyczpcbiAgICAgICAgLy8gIC0gbW92ZSBjdXJyZW50IGxlYWRpbmcgY2hhciArIG5ldyBvbmUgaW50byBjb21iaW5lZCBzdHJpbmdcbiAgICAgICAgLy8gIC0gc2V0IGNvbWJpbmVkIGZsYWdcbiAgICAgICAgdGhpcy5fY29tYmluZWRbaW5kZXhdID0gc3RyaW5nRnJvbUNvZGVQb2ludChjb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSykgKyBzdHJpbmdGcm9tQ29kZVBvaW50KGNvZGVQb2ludCk7XG4gICAgICAgIGNvbnRlbnQgJj0gfkNvbnRlbnQuQ09ERVBPSU5UX01BU0s7IC8vIHNldCBjb2RlcG9pbnQgaW4gYnVmZmVyIHRvIDBcbiAgICAgICAgY29udGVudCB8PSBDb250ZW50LklTX0NPTUJJTkVEX01BU0s7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzaG91bGQgbm90IGhhcHBlbiAtIHdlIGFjdHVhbGx5IGhhdmUgbm8gZGF0YSBpbiB0aGUgY2VsbCB5ZXRcbiAgICAgICAgLy8gc2ltcGx5IHNldCB0aGUgZGF0YSBpbiB0aGUgY2VsbCBidWZmZXIgd2l0aCBhIHdpZHRoIG9mIDFcbiAgICAgICAgY29udGVudCA9IGNvZGVQb2ludCB8ICgxIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPSBjb250ZW50O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpbnNlcnRDZWxscyhwb3M6IG51bWJlciwgbjogbnVtYmVyLCBmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSwgZXJhc2VBdHRyPzogSUF0dHJpYnV0ZURhdGEpOiB2b2lkIHtcbiAgICBwb3MgJT0gdGhpcy5sZW5ndGg7XG5cbiAgICAvLyBoYW5kbGUgZnVsbHdpZHRoIGF0IHBvczogcmVzZXQgY2VsbCBvbmUgdG8gdGhlIGxlZnQgaWYgcG9zIGlzIHNlY29uZCBjZWxsIG9mIGEgd2lkZSBjaGFyXG4gICAgaWYgKHBvcyAmJiB0aGlzLmdldFdpZHRoKHBvcyAtIDEpID09PSAyKSB7XG4gICAgICB0aGlzLnNldENlbGxGcm9tQ29kZVBvaW50KHBvcyAtIDEsIDAsIDEsIGVyYXNlQXR0cj8uZmcgfHwgMCwgZXJhc2VBdHRyPy5iZyB8fCAwKTtcbiAgICB9XG5cbiAgICBpZiAobiA8IHRoaXMubGVuZ3RoIC0gcG9zKSB7XG4gICAgICBjb25zdCBjZWxsID0gbmV3IENlbGxEYXRhKCk7XG4gICAgICBmb3IgKGxldCBpID0gdGhpcy5sZW5ndGggLSBwb3MgLSBuIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKHBvcyArIG4gKyBpLCB0aGlzLmxvYWRDZWxsKHBvcyArIGksIGNlbGwpKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbChwb3MgKyBpLCBmaWxsQ2VsbERhdGEpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gcG9zOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwoaSwgZmlsbENlbGxEYXRhKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBoYW5kbGUgZnVsbHdpZHRoIGF0IGxpbmUgZW5kOiByZXNldCBsYXN0IGNlbGwgaWYgaXQgaXMgZmlyc3QgY2VsbCBvZiBhIHdpZGUgY2hhclxuICAgIGlmICh0aGlzLmdldFdpZHRoKHRoaXMubGVuZ3RoIC0gMSkgPT09IDIpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbEZyb21Db2RlUG9pbnQodGhpcy5sZW5ndGggLSAxLCAwLCAxLCBlcmFzZUF0dHI/LmZnIHx8IDAsIGVyYXNlQXR0cj8uYmcgfHwgMCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRlbGV0ZUNlbGxzKHBvczogbnVtYmVyLCBuOiBudW1iZXIsIGZpbGxDZWxsRGF0YTogSUNlbGxEYXRhLCBlcmFzZUF0dHI/OiBJQXR0cmlidXRlRGF0YSk6IHZvaWQge1xuICAgIHBvcyAlPSB0aGlzLmxlbmd0aDtcbiAgICBpZiAobiA8IHRoaXMubGVuZ3RoIC0gcG9zKSB7XG4gICAgICBjb25zdCBjZWxsID0gbmV3IENlbGxEYXRhKCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoIC0gcG9zIC0gbjsgKytpKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbChwb3MgKyBpLCB0aGlzLmxvYWRDZWxsKHBvcyArIG4gKyBpLCBjZWxsKSk7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gdGhpcy5sZW5ndGggLSBuOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwoaSwgZmlsbENlbGxEYXRhKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IHBvczsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKGksIGZpbGxDZWxsRGF0YSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gaGFuZGxlIGZ1bGx3aWR0aCBhdCBwb3M6XG4gICAgLy8gLSByZXNldCBwb3MtMSBpZiB3aWRlIGNoYXJcbiAgICAvLyAtIHJlc2V0IHBvcyBpZiB3aWR0aD09MCAocHJldmlvdXMgc2Vjb25kIGNlbGwgb2YgYSB3aWRlIGNoYXIpXG4gICAgaWYgKHBvcyAmJiB0aGlzLmdldFdpZHRoKHBvcyAtIDEpID09PSAyKSB7XG4gICAgICB0aGlzLnNldENlbGxGcm9tQ29kZVBvaW50KHBvcyAtIDEsIDAsIDEsIGVyYXNlQXR0cj8uZmcgfHwgMCwgZXJhc2VBdHRyPy5iZyB8fCAwKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZ2V0V2lkdGgocG9zKSA9PT0gMCAmJiAhdGhpcy5oYXNDb250ZW50KHBvcykpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbEZyb21Db2RlUG9pbnQocG9zLCAwLCAxLCBlcmFzZUF0dHI/LmZnIHx8IDAsIGVyYXNlQXR0cj8uYmcgfHwgMCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlcGxhY2VDZWxscyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciwgZmlsbENlbGxEYXRhOiBJQ2VsbERhdGEsIGVyYXNlQXR0cj86IElBdHRyaWJ1dGVEYXRhKTogdm9pZCB7XG4gICAgLy8gaGFuZGxlIGZ1bGx3aWR0aCBhdCBzdGFydDogcmVzZXQgY2VsbCBvbmUgdG8gdGhlIGxlZnQgaWYgc3RhcnQgaXMgc2Vjb25kIGNlbGwgb2YgYSB3aWRlIGNoYXJcbiAgICBpZiAoc3RhcnQgJiYgdGhpcy5nZXRXaWR0aChzdGFydCAtIDEpID09PSAyKSB7XG4gICAgICB0aGlzLnNldENlbGxGcm9tQ29kZVBvaW50KHN0YXJ0IC0gMSwgMCwgMSwgZXJhc2VBdHRyPy5mZyB8fCAwLCBlcmFzZUF0dHI/LmJnIHx8IDApO1xuICAgIH1cbiAgICAvLyBoYW5kbGUgZnVsbHdpZHRoIGF0IGxhc3QgY2VsbCArIDE6IHJlc2V0IHRvIGVtcHR5IGNlbGwgaWYgaXQgaXMgc2Vjb25kIHBhcnQgb2YgYSB3aWRlIGNoYXJcbiAgICBpZiAoZW5kIDwgdGhpcy5sZW5ndGggJiYgdGhpcy5nZXRXaWR0aChlbmQgLSAxKSA9PT0gMikge1xuICAgICAgdGhpcy5zZXRDZWxsRnJvbUNvZGVQb2ludChlbmQsIDAsIDEsIGVyYXNlQXR0cj8uZmcgfHwgMCwgZXJhc2VBdHRyPy5iZyB8fCAwKTtcbiAgICB9XG5cbiAgICB3aGlsZSAoc3RhcnQgPCBlbmQgICYmIHN0YXJ0IDwgdGhpcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbChzdGFydCsrLCBmaWxsQ2VsbERhdGEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZXNpemUoY29sczogbnVtYmVyLCBmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIGlmIChjb2xzID09PSB0aGlzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY29scyA+IHRoaXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQzMkFycmF5KGNvbHMgKiBDRUxMX1NJWkUpO1xuICAgICAgaWYgKHRoaXMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChjb2xzICogQ0VMTF9TSVpFIDwgdGhpcy5fZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICBkYXRhLnNldCh0aGlzLl9kYXRhLnN1YmFycmF5KDAsIGNvbHMgKiBDRUxMX1NJWkUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRhLnNldCh0aGlzLl9kYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgICBmb3IgKGxldCBpID0gdGhpcy5sZW5ndGg7IGkgPCBjb2xzOyArK2kpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKGksIGZpbGxDZWxsRGF0YSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjb2xzKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDMyQXJyYXkoY29scyAqIENFTExfU0laRSk7XG4gICAgICAgIGRhdGEuc2V0KHRoaXMuX2RhdGEuc3ViYXJyYXkoMCwgY29scyAqIENFTExfU0laRSkpO1xuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICAgICAgLy8gUmVtb3ZlIGFueSBjdXQgb2ZmIGNvbWJpbmVkIGRhdGFcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuX2NvbWJpbmVkKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qga2V5ID0gcGFyc2VJbnQoa2V5c1tpXSwgMTApO1xuICAgICAgICAgIGlmIChrZXkgPj0gY29scykge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2NvbWJpbmVkW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KDApO1xuICAgICAgICB0aGlzLl9jb21iaW5lZCA9IHt9O1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmxlbmd0aCA9IGNvbHM7XG4gIH1cblxuICAvKiogZmlsbCBhIGxpbmUgd2l0aCBmaWxsQ2hhckRhdGEgKi9cbiAgcHVibGljIGZpbGwoZmlsbENlbGxEYXRhOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jb21iaW5lZCA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgdGhpcy5zZXRDZWxsKGksIGZpbGxDZWxsRGF0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqIGFsdGVyIHRvIGEgZnVsbCBjb3B5IG9mIGxpbmUgICovXG4gIHB1YmxpYyBjb3B5RnJvbShsaW5lOiBCdWZmZXJMaW5lKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubGVuZ3RoICE9PSBsaW5lLmxlbmd0aCkge1xuICAgICAgdGhpcy5fZGF0YSA9IG5ldyBVaW50MzJBcnJheShsaW5lLl9kYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXNlIGhpZ2ggc3BlZWQgY29weSBpZiBsZW5ndGhzIGFyZSBlcXVhbFxuICAgICAgdGhpcy5fZGF0YS5zZXQobGluZS5fZGF0YSk7XG4gICAgfVxuICAgIHRoaXMubGVuZ3RoID0gbGluZS5sZW5ndGg7XG4gICAgdGhpcy5fY29tYmluZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGVsIGluIGxpbmUuX2NvbWJpbmVkKSB7XG4gICAgICB0aGlzLl9jb21iaW5lZFtlbF0gPSBsaW5lLl9jb21iaW5lZFtlbF07XG4gICAgfVxuICAgIHRoaXMuaXNXcmFwcGVkID0gbGluZS5pc1dyYXBwZWQ7XG4gIH1cblxuICAvKiogY3JlYXRlIGEgbmV3IGNsb25lICovXG4gIHB1YmxpYyBjbG9uZSgpOiBJQnVmZmVyTGluZSB7XG4gICAgY29uc3QgbmV3TGluZSA9IG5ldyBCdWZmZXJMaW5lKDApO1xuICAgIG5ld0xpbmUuX2RhdGEgPSBuZXcgVWludDMyQXJyYXkodGhpcy5fZGF0YSk7XG4gICAgbmV3TGluZS5sZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgICBmb3IgKGNvbnN0IGVsIGluIHRoaXMuX2NvbWJpbmVkKSB7XG4gICAgICBuZXdMaW5lLl9jb21iaW5lZFtlbF0gPSB0aGlzLl9jb21iaW5lZFtlbF07XG4gICAgfVxuICAgIG5ld0xpbmUuaXNXcmFwcGVkID0gdGhpcy5pc1dyYXBwZWQ7XG4gICAgcmV0dXJuIG5ld0xpbmU7XG4gIH1cblxuICBwdWJsaWMgZ2V0VHJpbW1lZExlbmd0aCgpOiBudW1iZXIge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICBpZiAoKHRoaXMuX2RhdGFbaSAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gJiBDb250ZW50LkhBU19DT05URU5UX01BU0spKSB7XG4gICAgICAgIHJldHVybiBpICsgKHRoaXMuX2RhdGFbaSAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPj4gQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcHVibGljIGNvcHlDZWxsc0Zyb20oc3JjOiBCdWZmZXJMaW5lLCBzcmNDb2w6IG51bWJlciwgZGVzdENvbDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgYXBwbHlJblJldmVyc2U6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBzcmNEYXRhID0gc3JjLl9kYXRhO1xuICAgIGlmIChhcHBseUluUmV2ZXJzZSkge1xuICAgICAgZm9yIChsZXQgY2VsbCA9IGxlbmd0aCAtIDE7IGNlbGwgPj0gMDsgY2VsbC0tKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ0VMTF9TSVpFOyBpKyspIHtcbiAgICAgICAgICB0aGlzLl9kYXRhWyhkZXN0Q29sICsgY2VsbCkgKiBDRUxMX1NJWkUgKyBpXSA9IHNyY0RhdGFbKHNyY0NvbCArIGNlbGwpICogQ0VMTF9TSVpFICsgaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgY2VsbCA9IDA7IGNlbGwgPCBsZW5ndGg7IGNlbGwrKykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IENFTExfU0laRTsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5fZGF0YVsoZGVzdENvbCArIGNlbGwpICogQ0VMTF9TSVpFICsgaV0gPSBzcmNEYXRhWyhzcmNDb2wgKyBjZWxsKSAqIENFTExfU0laRSArIGldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW92ZSBhbnkgY29tYmluZWQgZGF0YSBvdmVyIGFzIG5lZWRlZFxuICAgIGNvbnN0IHNyY0NvbWJpbmVkS2V5cyA9IE9iamVjdC5rZXlzKHNyYy5fY29tYmluZWQpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3JjQ29tYmluZWRLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSBwYXJzZUludChzcmNDb21iaW5lZEtleXNbaV0sIDEwKTtcbiAgICAgIGlmIChrZXkgPj0gc3JjQ29sKSB7XG4gICAgICAgIHRoaXMuX2NvbWJpbmVkW2tleSAtIHNyY0NvbCArIGRlc3RDb2xdID0gc3JjLl9jb21iaW5lZFtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB0cmFuc2xhdGVUb1N0cmluZyh0cmltUmlnaHQ6IGJvb2xlYW4gPSBmYWxzZSwgc3RhcnRDb2w6IG51bWJlciA9IDAsIGVuZENvbDogbnVtYmVyID0gdGhpcy5sZW5ndGgpOiBzdHJpbmcge1xuICAgIGlmICh0cmltUmlnaHQpIHtcbiAgICAgIGVuZENvbCA9IE1hdGgubWluKGVuZENvbCwgdGhpcy5nZXRUcmltbWVkTGVuZ3RoKCkpO1xuICAgIH1cbiAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgd2hpbGUgKHN0YXJ0Q29sIDwgZW5kQ29sKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5fZGF0YVtzdGFydENvbCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF07XG4gICAgICBjb25zdCBjcCA9IGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLO1xuICAgICAgcmVzdWx0ICs9IChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSA/IHRoaXMuX2NvbWJpbmVkW3N0YXJ0Q29sXSA6IChjcCkgPyBzdHJpbmdGcm9tQ29kZVBvaW50KGNwKSA6IFdISVRFU1BBQ0VfQ0VMTF9DSEFSO1xuICAgICAgc3RhcnRDb2wgKz0gKGNvbnRlbnQgPj4gQ29udGVudC5XSURUSF9TSElGVCkgfHwgMTsgLy8gYWx3YXlzIGFkdmFuY2UgYnkgMVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IEJ1ZmZlckxpbmUgfSBmcm9tICdjb21tb24vYnVmZmVyL0J1ZmZlckxpbmUnO1xuaW1wb3J0IHsgQ2lyY3VsYXJMaXN0IH0gZnJvbSAnY29tbW9uL0NpcmN1bGFyTGlzdCc7XG5pbXBvcnQgeyBJQnVmZmVyTGluZSwgSUNlbGxEYXRhIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBJTmV3TGF5b3V0UmVzdWx0IHtcbiAgbGF5b3V0OiBudW1iZXJbXTtcbiAgY291bnRSZW1vdmVkOiBudW1iZXI7XG59XG5cbi8qKlxuICogRXZhbHVhdGVzIGFuZCByZXR1cm5zIGluZGV4ZXMgdG8gYmUgcmVtb3ZlZCBhZnRlciBhIHJlZmxvdyBsYXJnZXIgb2NjdXJzLiBMaW5lcyB3aWxsIGJlIHJlbW92ZWRcbiAqIHdoZW4gYSB3cmFwcGVkIGxpbmUgdW53cmFwcy5cbiAqIEBwYXJhbSBsaW5lcyBUaGUgYnVmZmVyIGxpbmVzLlxuICogQHBhcmFtIG5ld0NvbHMgVGhlIGNvbHVtbnMgYWZ0ZXIgcmVzaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVmbG93TGFyZ2VyR2V0TGluZXNUb1JlbW92ZShsaW5lczogQ2lyY3VsYXJMaXN0PElCdWZmZXJMaW5lPiwgb2xkQ29sczogbnVtYmVyLCBuZXdDb2xzOiBudW1iZXIsIGJ1ZmZlckFic29sdXRlWTogbnVtYmVyLCBudWxsQ2VsbDogSUNlbGxEYXRhKTogbnVtYmVyW10ge1xuICAvLyBHYXRoZXIgYWxsIEJ1ZmZlckxpbmVzIHRoYXQgbmVlZCB0byBiZSByZW1vdmVkIGZyb20gdGhlIEJ1ZmZlciBoZXJlIHNvIHRoYXQgdGhleSBjYW4gYmVcbiAgLy8gYmF0Y2hlZCB1cCBhbmQgb25seSBjb21taXR0ZWQgb25jZVxuICBjb25zdCB0b1JlbW92ZTogbnVtYmVyW10gPSBbXTtcblxuICBmb3IgKGxldCB5ID0gMDsgeSA8IGxpbmVzLmxlbmd0aCAtIDE7IHkrKykge1xuICAgIC8vIENoZWNrIGlmIHRoaXMgcm93IGlzIHdyYXBwZWRcbiAgICBsZXQgaSA9IHk7XG4gICAgbGV0IG5leHRMaW5lID0gbGluZXMuZ2V0KCsraSkgYXMgQnVmZmVyTGluZTtcbiAgICBpZiAoIW5leHRMaW5lLmlzV3JhcHBlZCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaG93IG1hbnkgbGluZXMgaXQncyB3cmFwcGVkIGZvclxuICAgIGNvbnN0IHdyYXBwZWRMaW5lczogQnVmZmVyTGluZVtdID0gW2xpbmVzLmdldCh5KSBhcyBCdWZmZXJMaW5lXTtcbiAgICB3aGlsZSAoaSA8IGxpbmVzLmxlbmd0aCAmJiBuZXh0TGluZS5pc1dyYXBwZWQpIHtcbiAgICAgIHdyYXBwZWRMaW5lcy5wdXNoKG5leHRMaW5lKTtcbiAgICAgIG5leHRMaW5lID0gbGluZXMuZ2V0KCsraSkgYXMgQnVmZmVyTGluZTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVzZSBsaW5lcyBjb250YWluIHRoZSBjdXJzb3IgZG9uJ3QgdG91Y2ggdGhlbSwgdGhlIHByb2dyYW0gd2lsbCBoYW5kbGUgZml4aW5nIHVwIHdyYXBwZWRcbiAgICAvLyBsaW5lcyB3aXRoIHRoZSBjdXJzb3JcbiAgICBpZiAoYnVmZmVyQWJzb2x1dGVZID49IHkgJiYgYnVmZmVyQWJzb2x1dGVZIDwgaSkge1xuICAgICAgeSArPSB3cmFwcGVkTGluZXMubGVuZ3RoIC0gMTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIENvcHkgYnVmZmVyIGRhdGEgdG8gbmV3IGxvY2F0aW9uc1xuICAgIGxldCBkZXN0TGluZUluZGV4ID0gMDtcbiAgICBsZXQgZGVzdENvbCA9IGdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aCh3cmFwcGVkTGluZXMsIGRlc3RMaW5lSW5kZXgsIG9sZENvbHMpO1xuICAgIGxldCBzcmNMaW5lSW5kZXggPSAxO1xuICAgIGxldCBzcmNDb2wgPSAwO1xuICAgIHdoaWxlIChzcmNMaW5lSW5kZXggPCB3cmFwcGVkTGluZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBzcmNUcmltbWVkVGluZUxlbmd0aCA9IGdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aCh3cmFwcGVkTGluZXMsIHNyY0xpbmVJbmRleCwgb2xkQ29scyk7XG4gICAgICBjb25zdCBzcmNSZW1haW5pbmdDZWxscyA9IHNyY1RyaW1tZWRUaW5lTGVuZ3RoIC0gc3JjQ29sO1xuICAgICAgY29uc3QgZGVzdFJlbWFpbmluZ0NlbGxzID0gbmV3Q29scyAtIGRlc3RDb2w7XG4gICAgICBjb25zdCBjZWxsc1RvQ29weSA9IE1hdGgubWluKHNyY1JlbWFpbmluZ0NlbGxzLCBkZXN0UmVtYWluaW5nQ2VsbHMpO1xuXG4gICAgICB3cmFwcGVkTGluZXNbZGVzdExpbmVJbmRleF0uY29weUNlbGxzRnJvbSh3cmFwcGVkTGluZXNbc3JjTGluZUluZGV4XSwgc3JjQ29sLCBkZXN0Q29sLCBjZWxsc1RvQ29weSwgZmFsc2UpO1xuXG4gICAgICBkZXN0Q29sICs9IGNlbGxzVG9Db3B5O1xuICAgICAgaWYgKGRlc3RDb2wgPT09IG5ld0NvbHMpIHtcbiAgICAgICAgZGVzdExpbmVJbmRleCsrO1xuICAgICAgICBkZXN0Q29sID0gMDtcbiAgICAgIH1cbiAgICAgIHNyY0NvbCArPSBjZWxsc1RvQ29weTtcbiAgICAgIGlmIChzcmNDb2wgPT09IHNyY1RyaW1tZWRUaW5lTGVuZ3RoKSB7XG4gICAgICAgIHNyY0xpbmVJbmRleCsrO1xuICAgICAgICBzcmNDb2wgPSAwO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIGxhc3QgY2VsbCBpc24ndCB3aWRlLCBpZiBpdCBpcyBjb3B5IGl0IHRvIHRoZSBjdXJyZW50IGRlc3RcbiAgICAgIGlmIChkZXN0Q29sID09PSAwICYmIGRlc3RMaW5lSW5kZXggIT09IDApIHtcbiAgICAgICAgaWYgKHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4IC0gMV0uZ2V0V2lkdGgobmV3Q29scyAtIDEpID09PSAyKSB7XG4gICAgICAgICAgd3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXhdLmNvcHlDZWxsc0Zyb20od3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXggLSAxXSwgbmV3Q29scyAtIDEsIGRlc3RDb2wrKywgMSwgZmFsc2UpO1xuICAgICAgICAgIC8vIE51bGwgb3V0IHRoZSBlbmQgb2YgdGhlIGxhc3Qgcm93XG4gICAgICAgICAgd3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXggLSAxXS5zZXRDZWxsKG5ld0NvbHMgLSAxLCBudWxsQ2VsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDbGVhciBvdXQgcmVtYWluaW5nIGNlbGxzIG9yIGZyYWdtZW50cyBjb3VsZCByZW1haW47XG4gICAgd3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXhdLnJlcGxhY2VDZWxscyhkZXN0Q29sLCBuZXdDb2xzLCBudWxsQ2VsbCk7XG5cbiAgICAvLyBXb3JrIGJhY2t3YXJkcyBhbmQgcmVtb3ZlIGFueSByb3dzIGF0IHRoZSBlbmQgdGhhdCBvbmx5IGNvbnRhaW4gbnVsbCBjZWxsc1xuICAgIGxldCBjb3VudFRvUmVtb3ZlID0gMDtcbiAgICBmb3IgKGxldCBpID0gd3JhcHBlZExpbmVzLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICAgIGlmIChpID4gZGVzdExpbmVJbmRleCB8fCB3cmFwcGVkTGluZXNbaV0uZ2V0VHJpbW1lZExlbmd0aCgpID09PSAwKSB7XG4gICAgICAgIGNvdW50VG9SZW1vdmUrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb3VudFRvUmVtb3ZlID4gMCkge1xuICAgICAgdG9SZW1vdmUucHVzaCh5ICsgd3JhcHBlZExpbmVzLmxlbmd0aCAtIGNvdW50VG9SZW1vdmUpOyAvLyBpbmRleFxuICAgICAgdG9SZW1vdmUucHVzaChjb3VudFRvUmVtb3ZlKTtcbiAgICB9XG5cbiAgICB5ICs9IHdyYXBwZWRMaW5lcy5sZW5ndGggLSAxO1xuICB9XG4gIHJldHVybiB0b1JlbW92ZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm4gdGhlIG5ldyBsYXlvdXQgZm9yIGxpbmVzIGdpdmVuIGFuIGFycmF5IG9mIGluZGV4ZXMgdG8gYmUgcmVtb3ZlZC5cbiAqIEBwYXJhbSBsaW5lcyBUaGUgYnVmZmVyIGxpbmVzLlxuICogQHBhcmFtIHRvUmVtb3ZlIFRoZSBpbmRleGVzIHRvIHJlbW92ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZmxvd0xhcmdlckNyZWF0ZU5ld0xheW91dChsaW5lczogQ2lyY3VsYXJMaXN0PElCdWZmZXJMaW5lPiwgdG9SZW1vdmU6IG51bWJlcltdKTogSU5ld0xheW91dFJlc3VsdCB7XG4gIGNvbnN0IGxheW91dDogbnVtYmVyW10gPSBbXTtcbiAgLy8gRmlyc3QgaXRlcmF0ZSB0aHJvdWdoIHRoZSBsaXN0IGFuZCBnZXQgdGhlIGFjdHVhbCBpbmRleGVzIHRvIHVzZSBmb3Igcm93c1xuICBsZXQgbmV4dFRvUmVtb3ZlSW5kZXggPSAwO1xuICBsZXQgbmV4dFRvUmVtb3ZlU3RhcnQgPSB0b1JlbW92ZVtuZXh0VG9SZW1vdmVJbmRleF07XG4gIGxldCBjb3VudFJlbW92ZWRTb0ZhciA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAobmV4dFRvUmVtb3ZlU3RhcnQgPT09IGkpIHtcbiAgICAgIGNvbnN0IGNvdW50VG9SZW1vdmUgPSB0b1JlbW92ZVsrK25leHRUb1JlbW92ZUluZGV4XTtcblxuICAgICAgLy8gVGVsbCBtYXJrZXJzIHRoYXQgdGhlcmUgd2FzIGEgZGVsZXRpb25cbiAgICAgIGxpbmVzLm9uRGVsZXRlRW1pdHRlci5maXJlKHtcbiAgICAgICAgaW5kZXg6IGkgLSBjb3VudFJlbW92ZWRTb0ZhcixcbiAgICAgICAgYW1vdW50OiBjb3VudFRvUmVtb3ZlXG4gICAgICB9KTtcblxuICAgICAgaSArPSBjb3VudFRvUmVtb3ZlIC0gMTtcbiAgICAgIGNvdW50UmVtb3ZlZFNvRmFyICs9IGNvdW50VG9SZW1vdmU7XG4gICAgICBuZXh0VG9SZW1vdmVTdGFydCA9IHRvUmVtb3ZlWysrbmV4dFRvUmVtb3ZlSW5kZXhdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsYXlvdXQucHVzaChpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBsYXlvdXQsXG4gICAgY291bnRSZW1vdmVkOiBjb3VudFJlbW92ZWRTb0ZhclxuICB9O1xufVxuXG4vKipcbiAqIEFwcGxpZXMgYSBuZXcgbGF5b3V0IHRvIHRoZSBidWZmZXIuIFRoaXMgZXNzZW50aWFsbHkgZG9lcyB0aGUgc2FtZSBhcyBtYW55IHNwbGljZSBjYWxscyBidXQgaXQnc1xuICogZG9uZSBhbGwgYXQgb25jZSBpbiBhIHNpbmdsZSBpdGVyYXRpb24gdGhyb3VnaCB0aGUgbGlzdCBzaW5jZSBzcGxpY2UgaXMgdmVyeSBleHBlbnNpdmUuXG4gKiBAcGFyYW0gbGluZXMgVGhlIGJ1ZmZlciBsaW5lcy5cbiAqIEBwYXJhbSBuZXdMYXlvdXQgVGhlIG5ldyBsYXlvdXQgdG8gYXBwbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWZsb3dMYXJnZXJBcHBseU5ld0xheW91dChsaW5lczogQ2lyY3VsYXJMaXN0PElCdWZmZXJMaW5lPiwgbmV3TGF5b3V0OiBudW1iZXJbXSk6IHZvaWQge1xuICAvLyBSZWNvcmQgb3JpZ2luYWwgbGluZXMgc28gdGhleSBkb24ndCBnZXQgb3ZlcnJpZGRlbiB3aGVuIHdlIHJlYXJyYW5nZSB0aGUgbGlzdFxuICBjb25zdCBuZXdMYXlvdXRMaW5lczogQnVmZmVyTGluZVtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3TGF5b3V0Lmxlbmd0aDsgaSsrKSB7XG4gICAgbmV3TGF5b3V0TGluZXMucHVzaChsaW5lcy5nZXQobmV3TGF5b3V0W2ldKSBhcyBCdWZmZXJMaW5lKTtcbiAgfVxuXG4gIC8vIFJlYXJyYW5nZSB0aGUgbGlzdFxuICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld0xheW91dExpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGluZXMuc2V0KGksIG5ld0xheW91dExpbmVzW2ldKTtcbiAgfVxuICBsaW5lcy5sZW5ndGggPSBuZXdMYXlvdXQubGVuZ3RoO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG5ldyBsaW5lIGxlbmd0aHMgZm9yIGEgZ2l2ZW4gd3JhcHBlZCBsaW5lLiBUaGUgcHVycG9zZSBvZiB0aGlzIGZ1bmN0aW9uIGl0IHRvIHByZS1cbiAqIGNvbXB1dGUgdGhlIHdyYXBwaW5nIHBvaW50cyBzaW5jZSB3aWRlIGNoYXJhY3RlcnMgbWF5IG5lZWQgdG8gYmUgd3JhcHBlZCBvbnRvIHRoZSBmb2xsb3dpbmcgbGluZS5cbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gYW4gYXJyYXkgb2YgbnVtYmVycyBvZiB3aGVyZSBlYWNoIGxpbmUgd3JhcHMgdG8sIHRoZSByZXN1bHRpbmcgYXJyYXlcbiAqIHdpbGwgb25seSBjb250YWluIHRoZSB2YWx1ZXMgYG5ld0NvbHNgICh3aGVuIHRoZSBsaW5lIGRvZXMgbm90IGVuZCB3aXRoIGEgd2lkZSBjaGFyYWN0ZXIpIGFuZFxuICogYG5ld0NvbHMgLSAxYCAod2hlbiB0aGUgbGluZSBkb2VzIGVuZCB3aXRoIGEgd2lkZSBjaGFyYWN0ZXIpLCBleGNlcHQgZm9yIHRoZSBsYXN0IHZhbHVlIHdoaWNoXG4gKiB3aWxsIGNvbnRhaW4gdGhlIHJlbWFpbmluZyBpdGVtcyB0byBmaWxsIHRoZSBsaW5lLlxuICpcbiAqIENhbGxpbmcgdGhpcyB3aXRoIGEgYG5ld0NvbHNgIHZhbHVlIG9mIGAxYCB3aWxsIGxvY2sgdXAuXG4gKlxuICogQHBhcmFtIHdyYXBwZWRMaW5lcyBUaGUgd3JhcHBlZCBsaW5lcyB0byBldmFsdWF0ZS5cbiAqIEBwYXJhbSBvbGRDb2xzIFRoZSBjb2x1bW5zIGJlZm9yZSByZXNpemUuXG4gKiBAcGFyYW0gbmV3Q29scyBUaGUgY29sdW1ucyBhZnRlciByZXNpemUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHMod3JhcHBlZExpbmVzOiBCdWZmZXJMaW5lW10sIG9sZENvbHM6IG51bWJlciwgbmV3Q29sczogbnVtYmVyKTogbnVtYmVyW10ge1xuICBjb25zdCBuZXdMaW5lTGVuZ3RoczogbnVtYmVyW10gPSBbXTtcbiAgY29uc3QgY2VsbHNOZWVkZWQgPSB3cmFwcGVkTGluZXMubWFwKChsLCBpKSA9PiBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgod3JhcHBlZExpbmVzLCBpLCBvbGRDb2xzKSkucmVkdWNlKChwLCBjKSA9PiBwICsgYyk7XG5cbiAgLy8gVXNlIHNyY0NvbCBhbmQgc3JjTGluZSB0byBmaW5kIHRoZSBuZXcgd3JhcHBpbmcgcG9pbnQsIHVzZSB0aGF0IHRvIGdldCB0aGUgY2VsbHNBdmFpbGFibGUgYW5kXG4gIC8vIGxpbmVzTmVlZGVkXG4gIGxldCBzcmNDb2wgPSAwO1xuICBsZXQgc3JjTGluZSA9IDA7XG4gIGxldCBjZWxsc0F2YWlsYWJsZSA9IDA7XG4gIHdoaWxlIChjZWxsc0F2YWlsYWJsZSA8IGNlbGxzTmVlZGVkKSB7XG4gICAgaWYgKGNlbGxzTmVlZGVkIC0gY2VsbHNBdmFpbGFibGUgPCBuZXdDb2xzKSB7XG4gICAgICAvLyBBZGQgdGhlIGZpbmFsIGxpbmUgYW5kIGV4aXQgdGhlIGxvb3BcbiAgICAgIG5ld0xpbmVMZW5ndGhzLnB1c2goY2VsbHNOZWVkZWQgLSBjZWxsc0F2YWlsYWJsZSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgc3JjQ29sICs9IG5ld0NvbHM7XG4gICAgY29uc3Qgb2xkVHJpbW1lZExlbmd0aCA9IGdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aCh3cmFwcGVkTGluZXMsIHNyY0xpbmUsIG9sZENvbHMpO1xuICAgIGlmIChzcmNDb2wgPiBvbGRUcmltbWVkTGVuZ3RoKSB7XG4gICAgICBzcmNDb2wgLT0gb2xkVHJpbW1lZExlbmd0aDtcbiAgICAgIHNyY0xpbmUrKztcbiAgICB9XG4gICAgY29uc3QgZW5kc1dpdGhXaWRlID0gd3JhcHBlZExpbmVzW3NyY0xpbmVdLmdldFdpZHRoKHNyY0NvbCAtIDEpID09PSAyO1xuICAgIGlmIChlbmRzV2l0aFdpZGUpIHtcbiAgICAgIHNyY0NvbC0tO1xuICAgIH1cbiAgICBjb25zdCBsaW5lTGVuZ3RoID0gZW5kc1dpdGhXaWRlID8gbmV3Q29scyAtIDEgOiBuZXdDb2xzO1xuICAgIG5ld0xpbmVMZW5ndGhzLnB1c2gobGluZUxlbmd0aCk7XG4gICAgY2VsbHNBdmFpbGFibGUgKz0gbGluZUxlbmd0aDtcbiAgfVxuXG4gIHJldHVybiBuZXdMaW5lTGVuZ3Rocztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aChsaW5lczogQnVmZmVyTGluZVtdLCBpOiBudW1iZXIsIGNvbHM6IG51bWJlcik6IG51bWJlciB7XG4gIC8vIElmIHRoaXMgaXMgdGhlIGxhc3Qgcm93IGluIHRoZSB3cmFwcGVkIGxpbmUsIGdldCB0aGUgYWN0dWFsIHRyaW1tZWQgbGVuZ3RoXG4gIGlmIChpID09PSBsaW5lcy5sZW5ndGggLSAxKSB7XG4gICAgcmV0dXJuIGxpbmVzW2ldLmdldFRyaW1tZWRMZW5ndGgoKTtcbiAgfVxuICAvLyBEZXRlY3Qgd2hldGhlciB0aGUgZm9sbG93aW5nIGxpbmUgc3RhcnRzIHdpdGggYSB3aWRlIGNoYXJhY3RlciBhbmQgdGhlIGVuZCBvZiB0aGUgY3VycmVudCBsaW5lXG4gIC8vIGlzIG51bGwsIGlmIHNvIHRoZW4gd2UgY2FuIGJlIHByZXR0eSBzdXJlIHRoZSBudWxsIGNoYXJhY3RlciBzaG91bGQgYmUgZXhjbHVkZWQgZnJvbSB0aGUgbGluZVxuICAvLyBsZW5ndGhdXG4gIGNvbnN0IGVuZHNJbk51bGwgPSAhKGxpbmVzW2ldLmhhc0NvbnRlbnQoY29scyAtIDEpKSAmJiBsaW5lc1tpXS5nZXRXaWR0aChjb2xzIC0gMSkgPT09IDE7XG4gIGNvbnN0IGZvbGxvd2luZ0xpbmVTdGFydHNXaXRoV2lkZSA9IGxpbmVzW2kgKyAxXS5nZXRXaWR0aCgwKSA9PT0gMjtcbiAgaWYgKGVuZHNJbk51bGwgJiYgZm9sbG93aW5nTGluZVN0YXJ0c1dpdGhXaWRlKSB7XG4gICAgcmV0dXJuIGNvbHMgLSAxO1xuICB9XG4gIHJldHVybiBjb2xzO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQnVmZmVyLCBJQnVmZmVyU2V0IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBJQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdjb21tb24vYnVmZmVyL0J1ZmZlcic7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSU9wdGlvbnNTZXJ2aWNlLCBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbi8qKlxuICogVGhlIEJ1ZmZlclNldCByZXByZXNlbnRzIHRoZSBzZXQgb2YgdHdvIGJ1ZmZlcnMgdXNlZCBieSB4dGVybSB0ZXJtaW5hbHMgKG5vcm1hbCBhbmQgYWx0KSBhbmRcbiAqIHByb3ZpZGVzIGFsc28gdXRpbGl0aWVzIGZvciB3b3JraW5nIHdpdGggdGhlbS5cbiAqL1xuZXhwb3J0IGNsYXNzIEJ1ZmZlclNldCBpbXBsZW1lbnRzIElCdWZmZXJTZXQge1xuICBwcml2YXRlIF9ub3JtYWw6IEJ1ZmZlcjtcbiAgcHJpdmF0ZSBfYWx0OiBCdWZmZXI7XG4gIHByaXZhdGUgX2FjdGl2ZUJ1ZmZlcjogQnVmZmVyO1xuXG5cbiAgcHJpdmF0ZSBfb25CdWZmZXJBY3RpdmF0ZSA9IG5ldyBFdmVudEVtaXR0ZXI8e2FjdGl2ZUJ1ZmZlcjogSUJ1ZmZlciwgaW5hY3RpdmVCdWZmZXI6IElCdWZmZXJ9PigpO1xuICBwdWJsaWMgZ2V0IG9uQnVmZmVyQWN0aXZhdGUoKTogSUV2ZW50PHthY3RpdmVCdWZmZXI6IElCdWZmZXIsIGluYWN0aXZlQnVmZmVyOiBJQnVmZmVyfT4geyByZXR1cm4gdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5ldmVudDsgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgQnVmZmVyU2V0IGZvciB0aGUgZ2l2ZW4gdGVybWluYWwuXG4gICAqIEBwYXJhbSBfdGVybWluYWwgLSBUaGUgdGVybWluYWwgdGhlIEJ1ZmZlclNldCB3aWxsIGJlbG9uZyB0b1xuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcmVhZG9ubHkgb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICByZWFkb25seSBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgICB0aGlzLl9ub3JtYWwgPSBuZXcgQnVmZmVyKHRydWUsIG9wdGlvbnNTZXJ2aWNlLCBidWZmZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9ub3JtYWwuZmlsbFZpZXdwb3J0Um93cygpO1xuXG4gICAgLy8gVGhlIGFsdCBidWZmZXIgc2hvdWxkIG5ldmVyIGhhdmUgc2Nyb2xsYmFjay5cbiAgICAvLyBTZWUgaHR0cDovL2ludmlzaWJsZS1pc2xhbmQubmV0L3h0ZXJtL2N0bHNlcXMvY3Rsc2Vxcy5odG1sI2gyLVRoZS1BbHRlcm5hdGUtU2NyZWVuLUJ1ZmZlclxuICAgIHRoaXMuX2FsdCA9IG5ldyBCdWZmZXIoZmFsc2UsIG9wdGlvbnNTZXJ2aWNlLCBidWZmZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIgPSB0aGlzLl9ub3JtYWw7XG5cbiAgICB0aGlzLnNldHVwVGFiU3RvcHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhbHQgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXRcbiAgICovXG4gIHB1YmxpYyBnZXQgYWx0KCk6IEJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuX2FsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBub3JtYWwgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXRcbiAgICovXG4gIHB1YmxpYyBnZXQgYWN0aXZlKCk6IEJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50bHkgYWN0aXZlIEJ1ZmZlciBvZiB0aGUgQnVmZmVyU2V0XG4gICAqL1xuICBwdWJsaWMgZ2V0IG5vcm1hbCgpOiBCdWZmZXIge1xuICAgIHJldHVybiB0aGlzLl9ub3JtYWw7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbm9ybWFsIEJ1ZmZlciBvZiB0aGUgQnVmZmVyU2V0IGFzIGl0cyBjdXJyZW50bHkgYWN0aXZlIEJ1ZmZlclxuICAgKi9cbiAgcHVibGljIGFjdGl2YXRlTm9ybWFsQnVmZmVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIgPT09IHRoaXMuX25vcm1hbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9ub3JtYWwueCA9IHRoaXMuX2FsdC54O1xuICAgIHRoaXMuX25vcm1hbC55ID0gdGhpcy5fYWx0Lnk7XG4gICAgLy8gVGhlIGFsdCBidWZmZXIgc2hvdWxkIGFsd2F5cyBiZSBjbGVhcmVkIHdoZW4gd2Ugc3dpdGNoIHRvIHRoZSBub3JtYWxcbiAgICAvLyBidWZmZXIuIFRoaXMgZnJlZXMgdXAgbWVtb3J5IHNpbmNlIHRoZSBhbHQgYnVmZmVyIHNob3VsZCBhbHdheXMgYmUgbmV3XG4gICAgLy8gd2hlbiBhY3RpdmF0ZWQuXG4gICAgdGhpcy5fYWx0LmNsZWFyKCk7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyID0gdGhpcy5fbm9ybWFsO1xuICAgIHRoaXMuX29uQnVmZmVyQWN0aXZhdGUuZmlyZSh7XG4gICAgICBhY3RpdmVCdWZmZXI6IHRoaXMuX25vcm1hbCxcbiAgICAgIGluYWN0aXZlQnVmZmVyOiB0aGlzLl9hbHRcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBhbHQgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXQgYXMgaXRzIGN1cnJlbnRseSBhY3RpdmUgQnVmZmVyXG4gICAqL1xuICBwdWJsaWMgYWN0aXZhdGVBbHRCdWZmZXIoZmlsbEF0dHI/OiBJQXR0cmlidXRlRGF0YSk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIgPT09IHRoaXMuX2FsdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBTaW5jZSB0aGUgYWx0IGJ1ZmZlciBpcyBhbHdheXMgY2xlYXJlZCB3aGVuIHRoZSBub3JtYWwgYnVmZmVyIGlzXG4gICAgLy8gYWN0aXZhdGVkLCB3ZSB3YW50IHRvIGZpbGwgaXQgd2hlbiBzd2l0Y2hpbmcgdG8gaXQuXG4gICAgdGhpcy5fYWx0LmZpbGxWaWV3cG9ydFJvd3MoZmlsbEF0dHIpO1xuICAgIHRoaXMuX2FsdC54ID0gdGhpcy5fbm9ybWFsLng7XG4gICAgdGhpcy5fYWx0LnkgPSB0aGlzLl9ub3JtYWwueTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIgPSB0aGlzLl9hbHQ7XG4gICAgdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5maXJlKHtcbiAgICAgIGFjdGl2ZUJ1ZmZlcjogdGhpcy5fYWx0LFxuICAgICAgaW5hY3RpdmVCdWZmZXI6IHRoaXMuX25vcm1hbFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2l6ZXMgYm90aCBub3JtYWwgYW5kIGFsdCBidWZmZXJzLCBhZGp1c3RpbmcgdGhlaXIgZGF0YSBhY2NvcmRpbmdseS5cbiAgICogQHBhcmFtIG5ld0NvbHMgVGhlIG5ldyBudW1iZXIgb2YgY29sdW1ucy5cbiAgICogQHBhcmFtIG5ld1Jvd3MgVGhlIG5ldyBudW1iZXIgb2Ygcm93cy5cbiAgICovXG4gIHB1YmxpYyByZXNpemUobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9ub3JtYWwucmVzaXplKG5ld0NvbHMsIG5ld1Jvd3MpO1xuICAgIHRoaXMuX2FsdC5yZXNpemUobmV3Q29scywgbmV3Um93cyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgdGhlIHRhYiBzdG9wcy5cbiAgICogQHBhcmFtIGkgVGhlIGluZGV4IHRvIHN0YXJ0IHNldHRpbmcgdXAgdGFiIHN0b3BzIGZyb20uXG4gICAqL1xuICBwdWJsaWMgc2V0dXBUYWJTdG9wcyhpPzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fbm9ybWFsLnNldHVwVGFiU3RvcHMoaSk7XG4gICAgdGhpcy5fYWx0LnNldHVwVGFiU3RvcHMoaSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgQ2hhckRhdGEsIElDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBzdHJpbmdGcm9tQ29kZVBvaW50IH0gZnJvbSAnY29tbW9uL2lucHV0L1RleHREZWNvZGVyJztcbmltcG9ydCB7IENIQVJfREFUQV9DSEFSX0lOREVYLCBDSEFSX0RBVEFfV0lEVEhfSU5ERVgsIENIQVJfREFUQV9BVFRSX0lOREVYLCBDb250ZW50IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5cbi8qKlxuICogQ2VsbERhdGEgLSByZXByZXNlbnRzIGEgc2luZ2xlIENlbGwgaW4gdGhlIHRlcm1pbmFsIGJ1ZmZlci5cbiAqL1xuZXhwb3J0IGNsYXNzIENlbGxEYXRhIGV4dGVuZHMgQXR0cmlidXRlRGF0YSBpbXBsZW1lbnRzIElDZWxsRGF0YSB7XG4gIC8qKiBIZWxwZXIgdG8gY3JlYXRlIENlbGxEYXRhIGZyb20gQ2hhckRhdGEuICovXG4gIHB1YmxpYyBzdGF0aWMgZnJvbUNoYXJEYXRhKHZhbHVlOiBDaGFyRGF0YSk6IENlbGxEYXRhIHtcbiAgICBjb25zdCBvYmogPSBuZXcgQ2VsbERhdGEoKTtcbiAgICBvYmouc2V0RnJvbUNoYXJEYXRhKHZhbHVlKTtcbiAgICByZXR1cm4gb2JqO1xuICB9XG4gIC8qKiBQcmltaXRpdmVzIGZyb20gdGVybWluYWwgYnVmZmVyLiAqL1xuICBwdWJsaWMgY29udGVudDogbnVtYmVyID0gMDtcbiAgcHVibGljIGZnOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgYmc6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBjb21iaW5lZERhdGE6IHN0cmluZyA9ICcnO1xuICAvKiogV2hldGhlciBjZWxsIGNvbnRhaW5zIGEgY29tYmluZWQgc3RyaW5nLiAqL1xuICBwdWJsaWMgaXNDb21iaW5lZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0s7XG4gIH1cbiAgLyoqIFdpZHRoIG9mIHRoZSBjZWxsLiAqL1xuICBwdWJsaWMgZ2V0V2lkdGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50ID4+IENvbnRlbnQuV0lEVEhfU0hJRlQ7XG4gIH1cbiAgLyoqIEpTIHN0cmluZyBvZiB0aGUgY29udGVudC4gKi9cbiAgcHVibGljIGdldENoYXJzKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgcmV0dXJuIHRoaXMuY29tYmluZWREYXRhO1xuICAgIH1cbiAgICBpZiAodGhpcy5jb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSykge1xuICAgICAgcmV0dXJuIHN0cmluZ0Zyb21Db2RlUG9pbnQodGhpcy5jb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSyk7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfVxuICAvKipcbiAgICogQ29kZXBvaW50IG9mIGNlbGxcbiAgICogTm90ZSB0aGlzIHJldHVybnMgdGhlIFVURjMyIGNvZGVwb2ludCBvZiBzaW5nbGUgY2hhcnMsXG4gICAqIGlmIGNvbnRlbnQgaXMgYSBjb21iaW5lZCBzdHJpbmcgaXQgcmV0dXJucyB0aGUgY29kZXBvaW50XG4gICAqIG9mIHRoZSBsYXN0IGNoYXIgaW4gc3RyaW5nIHRvIGJlIGluIGxpbmUgd2l0aCBjb2RlIGluIENoYXJEYXRhLlxuICAgKiAqL1xuICBwdWJsaWMgZ2V0Q29kZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAodGhpcy5pc0NvbWJpbmVkKCkpXG4gICAgICA/IHRoaXMuY29tYmluZWREYXRhLmNoYXJDb2RlQXQodGhpcy5jb21iaW5lZERhdGEubGVuZ3RoIC0gMSlcbiAgICAgIDogdGhpcy5jb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSztcbiAgfVxuICAvKiogU2V0IGRhdGEgZnJvbSBDaGFyRGF0YSAqL1xuICBwdWJsaWMgc2V0RnJvbUNoYXJEYXRhKHZhbHVlOiBDaGFyRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuZmcgPSB2YWx1ZVtDSEFSX0RBVEFfQVRUUl9JTkRFWF07XG4gICAgdGhpcy5iZyA9IDA7XG4gICAgbGV0IGNvbWJpbmVkID0gZmFsc2U7XG4gICAgLy8gc3Vycm9nYXRlcyBhbmQgY29tYmluZWQgc3RyaW5ncyBuZWVkIHNwZWNpYWwgdHJlYXRtZW50XG4gICAgaWYgKHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGggPiAyKSB7XG4gICAgICBjb21iaW5lZCA9IHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGggPT09IDIpIHtcbiAgICAgIGNvbnN0IGNvZGUgPSB2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgwKTtcbiAgICAgIC8vIGlmIHRoZSAyLWNoYXIgc3RyaW5nIGlzIGEgc3Vycm9nYXRlIGNyZWF0ZSBzaW5nbGUgY29kZXBvaW50XG4gICAgICAvLyBldmVyeXRoaW5nIGVsc2UgaXMgY29tYmluZWRcbiAgICAgIGlmICgweEQ4MDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4REJGRikge1xuICAgICAgICBjb25zdCBzZWNvbmQgPSB2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgxKTtcbiAgICAgICAgaWYgKDB4REMwMCA8PSBzZWNvbmQgJiYgc2Vjb25kIDw9IDB4REZGRikge1xuICAgICAgICAgIHRoaXMuY29udGVudCA9ICgoY29kZSAtIDB4RDgwMCkgKiAweDQwMCArIHNlY29uZCAtIDB4REMwMCArIDB4MTAwMDApIHwgKHZhbHVlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPDwgQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY29tYmluZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29tYmluZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuY29udGVudCA9IHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDApIHwgKHZhbHVlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPDwgQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgfVxuICAgIGlmIChjb21iaW5lZCkge1xuICAgICAgdGhpcy5jb21iaW5lZERhdGEgPSB2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF07XG4gICAgICB0aGlzLmNvbnRlbnQgPSBDb250ZW50LklTX0NPTUJJTkVEX01BU0sgfCAodmFsdWVbQ0hBUl9EQVRBX1dJRFRIX0lOREVYXSA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICB9XG4gIH1cbiAgLyoqIEdldCBkYXRhIGFzIENoYXJEYXRhLiAqL1xuICBwdWJsaWMgZ2V0QXNDaGFyRGF0YSgpOiBDaGFyRGF0YSB7XG4gICAgcmV0dXJuIFt0aGlzLmZnLCB0aGlzLmdldENoYXJzKCksIHRoaXMuZ2V0V2lkdGgoKSwgdGhpcy5nZXRDb2RlKCldO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0NPTE9SID0gMjU2O1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQVRUUiA9ICgwIDw8IDE4KSB8IChERUZBVUxUX0NPTE9SIDw8IDkpIHwgKDI1NiA8PCAwKTtcblxuZXhwb3J0IGNvbnN0IENIQVJfREFUQV9BVFRSX0lOREVYID0gMDtcbmV4cG9ydCBjb25zdCBDSEFSX0RBVEFfQ0hBUl9JTkRFWCA9IDE7XG5leHBvcnQgY29uc3QgQ0hBUl9EQVRBX1dJRFRIX0lOREVYID0gMjtcbmV4cG9ydCBjb25zdCBDSEFSX0RBVEFfQ09ERV9JTkRFWCA9IDM7XG5cbi8qKlxuICogTnVsbCBjZWxsIC0gYSByZWFsIGVtcHR5IGNlbGwgKGNvbnRhaW5pbmcgbm90aGluZykuXG4gKiBOb3RlIHRoYXQgY29kZSBzaG91bGQgYWx3YXlzIGJlIDAgZm9yIGEgbnVsbCBjZWxsIGFzXG4gKiBzZXZlcmFsIHRlc3QgY29uZGl0aW9uIG9mIHRoZSBidWZmZXIgbGluZSByZWx5IG9uIHRoaXMuXG4gKi9cbmV4cG9ydCBjb25zdCBOVUxMX0NFTExfQ0hBUiA9ICcnO1xuZXhwb3J0IGNvbnN0IE5VTExfQ0VMTF9XSURUSCA9IDE7XG5leHBvcnQgY29uc3QgTlVMTF9DRUxMX0NPREUgPSAwO1xuXG4vKipcbiAqIFdoaXRlc3BhY2UgY2VsbC5cbiAqIFRoaXMgaXMgbWVhbnQgYXMgYSByZXBsYWNlbWVudCBmb3IgZW1wdHkgY2VsbHMgd2hlbiBuZWVkZWRcbiAqIGR1cmluZyByZW5kZXJpbmcgbGluZXMgdG8gcHJlc2VydmUgY29ycmVjdCBhbGlnbWVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IFdISVRFU1BBQ0VfQ0VMTF9DSEFSID0gJyAnO1xuZXhwb3J0IGNvbnN0IFdISVRFU1BBQ0VfQ0VMTF9XSURUSCA9IDE7XG5leHBvcnQgY29uc3QgV0hJVEVTUEFDRV9DRUxMX0NPREUgPSAzMjtcblxuLyoqXG4gKiBCaXRtYXNrcyBmb3IgYWNjZXNzaW5nIGRhdGEgaW4gYGNvbnRlbnRgLlxuICovXG5leHBvcnQgY29uc3QgZW51bSBDb250ZW50IHtcbiAgLyoqXG4gICAqIGJpdCAxLi4yMSAgICBjb2RlcG9pbnQsIG1heCBhbGxvd2VkIGluIFVURjMyIGlzIDB4MTBGRkZGICgyMSBiaXRzIHRha2VuKVxuICAgKiAgICAgICAgICAgICAgcmVhZDogICBgY29kZXBvaW50ID0gY29udGVudCAmIENvbnRlbnQuY29kZXBvaW50TWFzaztgXG4gICAqICAgICAgICAgICAgICB3cml0ZTogIGBjb250ZW50IHw9IGNvZGVwb2ludCAmIENvbnRlbnQuY29kZXBvaW50TWFzaztgXG4gICAqICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0IGlmIHByZWNvbmRpdGlvbiBgY29kZXBvaW50IDw9IDB4MTBGRkZGYCBpcyBtZXQ6XG4gICAqICAgICAgICAgICAgICAgICAgICAgIGBjb250ZW50IHw9IGNvZGVwb2ludDtgXG4gICAqL1xuICBDT0RFUE9JTlRfTUFTSyA9IDB4MUZGRkZGLFxuXG4gIC8qKlxuICAgKiBiaXQgMjIgICAgICAgZmxhZyBpbmRpY2F0aW9uIHdoZXRoZXIgYSBjZWxsIGNvbnRhaW5zIGNvbWJpbmVkIGNvbnRlbnRcbiAgICogICAgICAgICAgICAgIHJlYWQ6ICAgYGlzQ29tYmluZWQgPSBjb250ZW50ICYgQ29udGVudC5pc0NvbWJpbmVkO2BcbiAgICogICAgICAgICAgICAgIHNldDogICAgYGNvbnRlbnQgfD0gQ29udGVudC5pc0NvbWJpbmVkO2BcbiAgICogICAgICAgICAgICAgIGNsZWFyOiAgYGNvbnRlbnQgJj0gfkNvbnRlbnQuaXNDb21iaW5lZDtgXG4gICAqL1xuICBJU19DT01CSU5FRF9NQVNLID0gMHgyMDAwMDAsICAvLyAxIDw8IDIxXG5cbiAgLyoqXG4gICAqIGJpdCAxLi4yMiAgICBtYXNrIHRvIGNoZWNrIHdoZXRoZXIgYSBjZWxsIGNvbnRhaW5zIGFueSBzdHJpbmcgZGF0YVxuICAgKiAgICAgICAgICAgICAgd2UgbmVlZCB0byBjaGVjayBmb3IgY29kZXBvaW50IGFuZCBpc0NvbWJpbmVkIGJpdHMgdG8gc2VlXG4gICAqICAgICAgICAgICAgICB3aGV0aGVyIGEgY2VsbCBjb250YWlucyBhbnl0aGluZ1xuICAgKiAgICAgICAgICAgICAgcmVhZDogICBgaXNFbXB0eSA9ICEoY29udGVudCAmIENvbnRlbnQuaGFzQ29udGVudClgXG4gICAqL1xuICBIQVNfQ09OVEVOVF9NQVNLID0gMHgzRkZGRkYsXG5cbiAgLyoqXG4gICAqIGJpdCAyMy4uMjQgICB3Y3dpZHRoIHZhbHVlIG9mIGNlbGwsIHRha2VzIDIgYml0cyAocmFuZ2VzIGZyb20gMC4uMilcbiAgICogICAgICAgICAgICAgIHJlYWQ6ICAgYHdpZHRoID0gKGNvbnRlbnQgJiBDb250ZW50LndpZHRoTWFzaykgPj4gQ29udGVudC53aWR0aFNoaWZ0O2BcbiAgICogICAgICAgICAgICAgICAgICAgICAgYGhhc1dpZHRoID0gY29udGVudCAmIENvbnRlbnQud2lkdGhNYXNrO2BcbiAgICogICAgICAgICAgICAgICAgICAgICAgYXMgbG9uZyBhcyB3Y3dpZHRoIGlzIGhpZ2hlc3QgdmFsdWUgaW4gYGNvbnRlbnRgOlxuICAgKiAgICAgICAgICAgICAgICAgICAgICBgd2lkdGggPSBjb250ZW50ID4+IENvbnRlbnQud2lkdGhTaGlmdDtgXG4gICAqICAgICAgICAgICAgICB3cml0ZTogIGBjb250ZW50IHw9ICh3aWR0aCA8PCBDb250ZW50LndpZHRoU2hpZnQpICYgQ29udGVudC53aWR0aE1hc2s7YFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dCBpZiBwcmVjb25kaXRpb24gYDAgPD0gd2lkdGggPD0gM2AgaXMgbWV0OlxuICAgKiAgICAgICAgICAgICAgICAgICAgICBgY29udGVudCB8PSB3aWR0aCA8PCBDb250ZW50LndpZHRoU2hpZnQ7YFxuICAgKi9cbiAgV0lEVEhfTUFTSyA9IDB4QzAwMDAwLCAgIC8vIDMgPDwgMjJcbiAgV0lEVEhfU0hJRlQgPSAyMlxufVxuXG5leHBvcnQgY29uc3QgZW51bSBBdHRyaWJ1dGVzIHtcbiAgLyoqXG4gICAqIGJpdCAxLi44ICAgICBibHVlIGluIFJHQiwgY29sb3IgaW4gUDI1NiBhbmQgUDE2XG4gICAqL1xuICBCTFVFX01BU0sgPSAweEZGLFxuICBCTFVFX1NISUZUID0gMCxcbiAgUENPTE9SX01BU0sgPSAweEZGLFxuICBQQ09MT1JfU0hJRlQgPSAwLFxuXG4gIC8qKlxuICAgKiBiaXQgOS4uMTYgICAgZ3JlZW4gaW4gUkdCXG4gICAqL1xuICBHUkVFTl9NQVNLID0gMHhGRjAwLFxuICBHUkVFTl9TSElGVCA9IDgsXG5cbiAgLyoqXG4gICAqIGJpdCAxNy4uMjQgICByZWQgaW4gUkdCXG4gICAqL1xuICBSRURfTUFTSyA9IDB4RkYwMDAwLFxuICBSRURfU0hJRlQgPSAxNixcblxuICAvKipcbiAgICogYml0IDI1Li4yNiAgIGNvbG9yIG1vZGU6IERFRkFVTFQgKDApIHwgUDE2ICgxKSB8IFAyNTYgKDIpIHwgUkdCICgzKVxuICAgKi9cbiAgQ01fTUFTSyA9IDB4MzAwMDAwMCxcbiAgQ01fREVGQVVMVCA9IDAsXG4gIENNX1AxNiA9IDB4MTAwMDAwMCxcbiAgQ01fUDI1NiA9IDB4MjAwMDAwMCxcbiAgQ01fUkdCID0gMHgzMDAwMDAwLFxuXG4gIC8qKlxuICAgKiBiaXQgMS4uMjQgIFJHQiByb29tXG4gICAqL1xuICBSR0JfTUFTSyA9IDB4RkZGRkZGXG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIEZnRmxhZ3Mge1xuICAvKipcbiAgICogYml0IDI3Li4zMSAoMzJ0aCBiaXQgdW51c2VkKVxuICAgKi9cbiAgSU5WRVJTRSA9IDB4NDAwMDAwMCxcbiAgQk9MRCA9IDB4ODAwMDAwMCxcbiAgVU5ERVJMSU5FID0gMHgxMDAwMDAwMCxcbiAgQkxJTksgPSAweDIwMDAwMDAwLFxuICBJTlZJU0lCTEUgPSAweDQwMDAwMDAwXG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIEJnRmxhZ3Mge1xuICAvKipcbiAgICogYml0IDI3Li4zMiAodXBwZXIgNCB1bnVzZWQpXG4gICAqL1xuICBJVEFMSUMgPSAweDQwMDAwMDAsXG4gIERJTSA9IDB4ODAwMDAwMFxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgSU1hcmtlciB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBNYXJrZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSU1hcmtlciB7XG4gIHByaXZhdGUgc3RhdGljIF9uZXh0SWQgPSAxO1xuXG4gIHByaXZhdGUgX2lkOiBudW1iZXIgPSBNYXJrZXIuX25leHRJZCsrO1xuICBwdWJsaWMgaXNEaXNwb3NlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHB1YmxpYyBnZXQgaWQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2lkOyB9XG5cbiAgcHJpdmF0ZSBfb25EaXNwb3NlID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBwdWJsaWMgZ2V0IG9uRGlzcG9zZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25EaXNwb3NlLmV2ZW50OyB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGxpbmU6IG51bWJlclxuICApIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgIHRoaXMubGluZSA9IC0xO1xuICAgIC8vIEVtaXQgYmVmb3JlIHN1cGVyLmRpc3Bvc2Ugc3VjaCB0aGF0IGRpc3Bvc2UgbGlzdGVuZXJzIGdldCBhIGNoYW5nZSB0byByZWFjdFxuICAgIHRoaXMuX29uRGlzcG9zZS5maXJlKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNoYXJzZXQgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG4vKipcbiAqIFRoZSBjaGFyYWN0ZXIgc2V0cyBzdXBwb3J0ZWQgYnkgdGhlIHRlcm1pbmFsLiBUaGVzZSBlbmFibGUgc2V2ZXJhbCBsYW5ndWFnZXNcbiAqIHRvIGJlIHJlcHJlc2VudGVkIHdpdGhpbiB0aGUgdGVybWluYWwgd2l0aCBvbmx5IDgtYml0IGVuY29kaW5nLiBTZWUgSVNPIDIwMjJcbiAqIGZvciBhIGRpc2N1c3Npb24gb24gY2hhcmFjdGVyIHNldHMuIE9ubHkgVlQxMDAgY2hhcmFjdGVyIHNldHMgYXJlIHN1cHBvcnRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IENIQVJTRVRTOiB7IFtrZXk6IHN0cmluZ106IElDaGFyc2V0IHwgbnVsbCB9ID0ge307XG5cbi8qKlxuICogVGhlIGRlZmF1bHQgY2hhcmFjdGVyIHNldCwgVVMuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX0NIQVJTRVQ6IElDaGFyc2V0IHwgbnVsbCA9IENIQVJTRVRTWydCJ107XG5cbi8qKlxuICogREVDIFNwZWNpYWwgQ2hhcmFjdGVyIGFuZCBMaW5lIERyYXdpbmcgU2V0LlxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQxMDItdWcvdGFibGU1LTEzLmh0bWxcbiAqIEEgbG90IG9mIGN1cnNlcyBhcHBzIHVzZSB0aGlzIGlmIHRoZXkgc2VlIFRFUk09eHRlcm0uXG4gKiB0ZXN0aW5nOiBlY2hvIC1lICdcXGUoMGFcXGUoQidcbiAqIFRoZSB4dGVybSBvdXRwdXQgc29tZXRpbWVzIHNlZW1zIHRvIGNvbmZsaWN0IHdpdGggdGhlXG4gKiByZWZlcmVuY2UgYWJvdmUuIHh0ZXJtIHNlZW1zIGluIGxpbmUgd2l0aCB0aGUgcmVmZXJlbmNlXG4gKiB3aGVuIHJ1bm5pbmcgdnR0ZXN0IGhvd2V2ZXIuXG4gKiBUaGUgdGFibGUgYmVsb3cgbm93IHVzZXMgeHRlcm0ncyBvdXRwdXQgZnJvbSB2dHRlc3QuXG4gKi9cbkNIQVJTRVRTWycwJ10gPSB7XG4gICdgJzogJ1xcdTI1YzYnLCAvLyAn4peGJ1xuICAnYSc6ICdcXHUyNTkyJywgLy8gJ+KWkidcbiAgJ2InOiAnXFx1MDAwOScsIC8vICdcXHQnXG4gICdjJzogJ1xcdTAwMGMnLCAvLyAnXFxmJ1xuICAnZCc6ICdcXHUwMDBkJywgLy8gJ1xccidcbiAgJ2UnOiAnXFx1MDAwYScsIC8vICdcXG4nXG4gICdmJzogJ1xcdTAwYjAnLCAvLyAnwrAnXG4gICdnJzogJ1xcdTAwYjEnLCAvLyAnwrEnXG4gICdoJzogJ1xcdTI0MjQnLCAvLyAnXFx1MjQyNCcgKE5MKVxuICAnaSc6ICdcXHUwMDBiJywgLy8gJ1xcdidcbiAgJ2onOiAnXFx1MjUxOCcsIC8vICfilJgnXG4gICdrJzogJ1xcdTI1MTAnLCAvLyAn4pSQJ1xuICAnbCc6ICdcXHUyNTBjJywgLy8gJ+KUjCdcbiAgJ20nOiAnXFx1MjUxNCcsIC8vICfilJQnXG4gICduJzogJ1xcdTI1M2MnLCAvLyAn4pS8J1xuICAnbyc6ICdcXHUyM2JhJywgLy8gJ+KOuidcbiAgJ3AnOiAnXFx1MjNiYicsIC8vICfijrsnXG4gICdxJzogJ1xcdTI1MDAnLCAvLyAn4pSAJ1xuICAncic6ICdcXHUyM2JjJywgLy8gJ+KOvCdcbiAgJ3MnOiAnXFx1MjNiZCcsIC8vICfijr0nXG4gICd0JzogJ1xcdTI1MWMnLCAvLyAn4pScJ1xuICAndSc6ICdcXHUyNTI0JywgLy8gJ+KUpCdcbiAgJ3YnOiAnXFx1MjUzNCcsIC8vICfilLQnXG4gICd3JzogJ1xcdTI1MmMnLCAvLyAn4pSsJ1xuICAneCc6ICdcXHUyNTAyJywgLy8gJ+KUgidcbiAgJ3knOiAnXFx1MjI2NCcsIC8vICfiiaQnXG4gICd6JzogJ1xcdTIyNjUnLCAvLyAn4omlJ1xuICAneyc6ICdcXHUwM2MwJywgLy8gJ8+AJ1xuICAnfCc6ICdcXHUyMjYwJywgLy8gJ+KJoCdcbiAgJ30nOiAnXFx1MDBhMycsIC8vICfCoydcbiAgJ34nOiAnXFx1MDBiNycgIC8vICfCtydcbn07XG5cbi8qKlxuICogQnJpdGlzaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEFcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi01Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ0EnXSA9IHtcbiAgJyMnOiAnwqMnXG59O1xuXG4vKipcbiAqIFVuaXRlZCBTdGF0ZXMgY2hhcmFjdGVyIHNldFxuICogRVNDIChCXG4gKi9cbkNIQVJTRVRTWydCJ10gPSBudWxsO1xuXG4vKipcbiAqIER1dGNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoNFxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTYuaHRtbFxuICovXG5DSEFSU0VUU1snNCddID0ge1xuICAnIyc6ICfCoycsXG4gICdAJzogJ8K+JyxcbiAgJ1snOiAnaWonLFxuICAnXFxcXCc6ICfCvScsXG4gICddJzogJ3wnLFxuICAneyc6ICfCqCcsXG4gICd8JzogJ2YnLFxuICAnfSc6ICfCvCcsXG4gICd+JzogJ8K0J1xufTtcblxuLyoqXG4gKiBGaW5uaXNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoQyBvciBFU0MgKDVcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi03Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ0MnXSA9XG5DSEFSU0VUU1snNSddID0ge1xuICAnWyc6ICfDhCcsXG4gICdcXFxcJzogJ8OWJyxcbiAgJ10nOiAnw4UnLFxuICAnXic6ICfDnCcsXG4gICdgJzogJ8OpJyxcbiAgJ3snOiAnw6QnLFxuICAnfCc6ICfDticsXG4gICd9JzogJ8OlJyxcbiAgJ34nOiAnw7wnXG59O1xuXG4vKipcbiAqIEZyZW5jaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKFJcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi04Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ1InXSA9IHtcbiAgJyMnOiAnwqMnLFxuICAnQCc6ICfDoCcsXG4gICdbJzogJ8KwJyxcbiAgJ1xcXFwnOiAnw6cnLFxuICAnXSc6ICfCpycsXG4gICd7JzogJ8OpJyxcbiAgJ3wnOiAnw7knLFxuICAnfSc6ICfDqCcsXG4gICd+JzogJ8KoJ1xufTtcblxuLyoqXG4gKiBGcmVuY2ggQ2FuYWRpYW4gY2hhcmFjdGVyIHNldFxuICogRVNDIChRXG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItOS5odG1sXG4gKi9cbkNIQVJTRVRTWydRJ10gPSB7XG4gICdAJzogJ8OgJyxcbiAgJ1snOiAnw6InLFxuICAnXFxcXCc6ICfDpycsXG4gICddJzogJ8OqJyxcbiAgJ14nOiAnw64nLFxuICAnYCc6ICfDtCcsXG4gICd7JzogJ8OpJyxcbiAgJ3wnOiAnw7knLFxuICAnfSc6ICfDqCcsXG4gICd+JzogJ8O7J1xufTtcblxuLyoqXG4gKiBHZXJtYW4gY2hhcmFjdGVyIHNldFxuICogRVNDIChLXG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItMTAuaHRtbFxuICovXG5DSEFSU0VUU1snSyddID0ge1xuICAnQCc6ICfCpycsXG4gICdbJzogJ8OEJyxcbiAgJ1xcXFwnOiAnw5YnLFxuICAnXSc6ICfDnCcsXG4gICd7JzogJ8OkJyxcbiAgJ3wnOiAnw7YnLFxuICAnfSc6ICfDvCcsXG4gICd+JzogJ8OfJ1xufTtcblxuLyoqXG4gKiBJdGFsaWFuIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoWVxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTExLmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ1knXSA9IHtcbiAgJyMnOiAnwqMnLFxuICAnQCc6ICfCpycsXG4gICdbJzogJ8KwJyxcbiAgJ1xcXFwnOiAnw6cnLFxuICAnXSc6ICfDqScsXG4gICdgJzogJ8O5JyxcbiAgJ3snOiAnw6AnLFxuICAnfCc6ICfDsicsXG4gICd9JzogJ8OoJyxcbiAgJ34nOiAnw6wnXG59O1xuXG4vKipcbiAqIE5vcndlZ2lhbi9EYW5pc2ggY2hhcmFjdGVyIHNldFxuICogRVNDIChFIG9yIEVTQyAoNlxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTEyLmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ0UnXSA9XG5DSEFSU0VUU1snNiddID0ge1xuICAnQCc6ICfDhCcsXG4gICdbJzogJ8OGJyxcbiAgJ1xcXFwnOiAnw5gnLFxuICAnXSc6ICfDhScsXG4gICdeJzogJ8OcJyxcbiAgJ2AnOiAnw6QnLFxuICAneyc6ICfDpicsXG4gICd8JzogJ8O4JyxcbiAgJ30nOiAnw6UnLFxuICAnfic6ICfDvCdcbn07XG5cbi8qKlxuICogU3BhbmlzaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKFpcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi0xMy5odG1sXG4gKi9cbkNIQVJTRVRTWydaJ10gPSB7XG4gICcjJzogJ8KjJyxcbiAgJ0AnOiAnwqcnLFxuICAnWyc6ICfCoScsXG4gICdcXFxcJzogJ8ORJyxcbiAgJ10nOiAnwr8nLFxuICAneyc6ICfCsCcsXG4gICd8JzogJ8OxJyxcbiAgJ30nOiAnw6cnXG59O1xuXG4vKipcbiAqIFN3ZWRpc2ggY2hhcmFjdGVyIHNldFxuICogRVNDIChIIG9yIEVTQyAoN1xuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTE0Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ0gnXSA9XG5DSEFSU0VUU1snNyddID0ge1xuICAnQCc6ICfDiScsXG4gICdbJzogJ8OEJyxcbiAgJ1xcXFwnOiAnw5YnLFxuICAnXSc6ICfDhScsXG4gICdeJzogJ8OcJyxcbiAgJ2AnOiAnw6knLFxuICAneyc6ICfDpCcsXG4gICd8JzogJ8O2JyxcbiAgJ30nOiAnw6UnLFxuICAnfic6ICfDvCdcbn07XG5cbi8qKlxuICogU3dpc3MgY2hhcmFjdGVyIHNldFxuICogRVNDICg9XG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItMTUuaHRtbFxuICovXG5DSEFSU0VUU1snPSddID0ge1xuICAnIyc6ICfDuScsXG4gICdAJzogJ8OgJyxcbiAgJ1snOiAnw6knLFxuICAnXFxcXCc6ICfDpycsXG4gICddJzogJ8OqJyxcbiAgJ14nOiAnw64nLFxuICAnXyc6ICfDqCcsXG4gICdgJzogJ8O0JyxcbiAgJ3snOiAnw6QnLFxuICAnfCc6ICfDticsXG4gICd9JzogJ8O8JyxcbiAgJ34nOiAnw7snXG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG4vKipcbiAqIEMwIGNvbnRyb2wgY29kZXNcbiAqIFNlZSA9IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0MwX2FuZF9DMV9jb250cm9sX2NvZGVzXG4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgQzAge1xuICAvKiogTnVsbCAoQ2FyZXQgPSBeQCwgQyA9IFxcMCkgKi9cbiAgZXhwb3J0IGNvbnN0IE5VTCA9ICdcXHgwMCc7XG4gIC8qKiBTdGFydCBvZiBIZWFkaW5nIChDYXJldCA9IF5BKSAqL1xuICBleHBvcnQgY29uc3QgU09IID0gJ1xceDAxJztcbiAgLyoqIFN0YXJ0IG9mIFRleHQgKENhcmV0ID0gXkIpICovXG4gIGV4cG9ydCBjb25zdCBTVFggPSAnXFx4MDInO1xuICAvKiogRW5kIG9mIFRleHQgKENhcmV0ID0gXkMpICovXG4gIGV4cG9ydCBjb25zdCBFVFggPSAnXFx4MDMnO1xuICAvKiogRW5kIG9mIFRyYW5zbWlzc2lvbiAoQ2FyZXQgPSBeRCkgKi9cbiAgZXhwb3J0IGNvbnN0IEVPVCA9ICdcXHgwNCc7XG4gIC8qKiBFbnF1aXJ5IChDYXJldCA9IF5FKSAqL1xuICBleHBvcnQgY29uc3QgRU5RID0gJ1xceDA1JztcbiAgLyoqIEFja25vd2xlZGdlIChDYXJldCA9IF5GKSAqL1xuICBleHBvcnQgY29uc3QgQUNLID0gJ1xceDA2JztcbiAgLyoqIEJlbGwgKENhcmV0ID0gXkcsIEMgPSBcXGEpICovXG4gIGV4cG9ydCBjb25zdCBCRUwgPSAnXFx4MDcnO1xuICAvKiogQmFja3NwYWNlIChDYXJldCA9IF5ILCBDID0gXFxiKSAqL1xuICBleHBvcnQgY29uc3QgQlMgID0gJ1xceDA4JztcbiAgLyoqIENoYXJhY3RlciBUYWJ1bGF0aW9uLCBIb3Jpem9udGFsIFRhYnVsYXRpb24gKENhcmV0ID0gXkksIEMgPSBcXHQpICovXG4gIGV4cG9ydCBjb25zdCBIVCAgPSAnXFx4MDknO1xuICAvKiogTGluZSBGZWVkIChDYXJldCA9IF5KLCBDID0gXFxuKSAqL1xuICBleHBvcnQgY29uc3QgTEYgID0gJ1xceDBhJztcbiAgLyoqIExpbmUgVGFidWxhdGlvbiwgVmVydGljYWwgVGFidWxhdGlvbiAoQ2FyZXQgPSBeSywgQyA9IFxcdikgKi9cbiAgZXhwb3J0IGNvbnN0IFZUICA9ICdcXHgwYic7XG4gIC8qKiBGb3JtIEZlZWQgKENhcmV0ID0gXkwsIEMgPSBcXGYpICovXG4gIGV4cG9ydCBjb25zdCBGRiAgPSAnXFx4MGMnO1xuICAvKiogQ2FycmlhZ2UgUmV0dXJuIChDYXJldCA9IF5NLCBDID0gXFxyKSAqL1xuICBleHBvcnQgY29uc3QgQ1IgID0gJ1xceDBkJztcbiAgLyoqIFNoaWZ0IE91dCAoQ2FyZXQgPSBeTikgKi9cbiAgZXhwb3J0IGNvbnN0IFNPICA9ICdcXHgwZSc7XG4gIC8qKiBTaGlmdCBJbiAoQ2FyZXQgPSBeTykgKi9cbiAgZXhwb3J0IGNvbnN0IFNJICA9ICdcXHgwZic7XG4gIC8qKiBEYXRhIExpbmsgRXNjYXBlIChDYXJldCA9IF5QKSAqL1xuICBleHBvcnQgY29uc3QgRExFID0gJ1xceDEwJztcbiAgLyoqIERldmljZSBDb250cm9sIE9uZSAoWE9OKSAoQ2FyZXQgPSBeUSkgKi9cbiAgZXhwb3J0IGNvbnN0IERDMSA9ICdcXHgxMSc7XG4gIC8qKiBEZXZpY2UgQ29udHJvbCBUd28gKENhcmV0ID0gXlIpICovXG4gIGV4cG9ydCBjb25zdCBEQzIgPSAnXFx4MTInO1xuICAvKiogRGV2aWNlIENvbnRyb2wgVGhyZWUgKFhPRkYpIChDYXJldCA9IF5TKSAqL1xuICBleHBvcnQgY29uc3QgREMzID0gJ1xceDEzJztcbiAgLyoqIERldmljZSBDb250cm9sIEZvdXIgKENhcmV0ID0gXlQpICovXG4gIGV4cG9ydCBjb25zdCBEQzQgPSAnXFx4MTQnO1xuICAvKiogTmVnYXRpdmUgQWNrbm93bGVkZ2UgKENhcmV0ID0gXlUpICovXG4gIGV4cG9ydCBjb25zdCBOQUsgPSAnXFx4MTUnO1xuICAvKiogU3luY2hyb25vdXMgSWRsZSAoQ2FyZXQgPSBeVikgKi9cbiAgZXhwb3J0IGNvbnN0IFNZTiA9ICdcXHgxNic7XG4gIC8qKiBFbmQgb2YgVHJhbnNtaXNzaW9uIEJsb2NrIChDYXJldCA9IF5XKSAqL1xuICBleHBvcnQgY29uc3QgRVRCID0gJ1xceDE3JztcbiAgLyoqIENhbmNlbCAoQ2FyZXQgPSBeWCkgKi9cbiAgZXhwb3J0IGNvbnN0IENBTiA9ICdcXHgxOCc7XG4gIC8qKiBFbmQgb2YgTWVkaXVtIChDYXJldCA9IF5ZKSAqL1xuICBleHBvcnQgY29uc3QgRU0gID0gJ1xceDE5JztcbiAgLyoqIFN1YnN0aXR1dGUgKENhcmV0ID0gXlopICovXG4gIGV4cG9ydCBjb25zdCBTVUIgPSAnXFx4MWEnO1xuICAvKiogRXNjYXBlIChDYXJldCA9IF5bLCBDID0gXFxlKSAqL1xuICBleHBvcnQgY29uc3QgRVNDID0gJ1xceDFiJztcbiAgLyoqIEZpbGUgU2VwYXJhdG9yIChDYXJldCA9IF5cXCkgKi9cbiAgZXhwb3J0IGNvbnN0IEZTICA9ICdcXHgxYyc7XG4gIC8qKiBHcm91cCBTZXBhcmF0b3IgKENhcmV0ID0gXl0pICovXG4gIGV4cG9ydCBjb25zdCBHUyAgPSAnXFx4MWQnO1xuICAvKiogUmVjb3JkIFNlcGFyYXRvciAoQ2FyZXQgPSBeXikgKi9cbiAgZXhwb3J0IGNvbnN0IFJTICA9ICdcXHgxZSc7XG4gIC8qKiBVbml0IFNlcGFyYXRvciAoQ2FyZXQgPSBeXykgKi9cbiAgZXhwb3J0IGNvbnN0IFVTICA9ICdcXHgxZic7XG4gIC8qKiBTcGFjZSAqL1xuICBleHBvcnQgY29uc3QgU1AgID0gJ1xceDIwJztcbiAgLyoqIERlbGV0ZSAoQ2FyZXQgPSBePykgKi9cbiAgZXhwb3J0IGNvbnN0IERFTCA9ICdcXHg3Zic7XG59XG5cbi8qKlxuICogQzEgY29udHJvbCBjb2Rlc1xuICogU2VlID0gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQzBfYW5kX0MxX2NvbnRyb2xfY29kZXNcbiAqL1xuZXhwb3J0IG5hbWVzcGFjZSBDMSB7XG4gIC8qKiBwYWRkaW5nIGNoYXJhY3RlciAqL1xuICBleHBvcnQgY29uc3QgUEFEID0gJ1xceDgwJztcbiAgLyoqIEhpZ2ggT2N0ZXQgUHJlc2V0ICovXG4gIGV4cG9ydCBjb25zdCBIT1AgPSAnXFx4ODEnO1xuICAvKiogQnJlYWsgUGVybWl0dGVkIEhlcmUgKi9cbiAgZXhwb3J0IGNvbnN0IEJQSCA9ICdcXHg4Mic7XG4gIC8qKiBObyBCcmVhayBIZXJlICovXG4gIGV4cG9ydCBjb25zdCBOQkggPSAnXFx4ODMnO1xuICAvKiogSW5kZXggKi9cbiAgZXhwb3J0IGNvbnN0IElORCA9ICdcXHg4NCc7XG4gIC8qKiBOZXh0IExpbmUgKi9cbiAgZXhwb3J0IGNvbnN0IE5FTCA9ICdcXHg4NSc7XG4gIC8qKiBTdGFydCBvZiBTZWxlY3RlZCBBcmVhICovXG4gIGV4cG9ydCBjb25zdCBTU0EgPSAnXFx4ODYnO1xuICAvKiogRW5kIG9mIFNlbGVjdGVkIEFyZWEgKi9cbiAgZXhwb3J0IGNvbnN0IEVTQSA9ICdcXHg4Nyc7XG4gIC8qKiBIb3Jpem9udGFsIFRhYnVsYXRpb24gU2V0ICovXG4gIGV4cG9ydCBjb25zdCBIVFMgPSAnXFx4ODgnO1xuICAvKiogSG9yaXpvbnRhbCBUYWJ1bGF0aW9uIFdpdGggSnVzdGlmaWNhdGlvbiAqL1xuICBleHBvcnQgY29uc3QgSFRKID0gJ1xceDg5JztcbiAgLyoqIFZlcnRpY2FsIFRhYnVsYXRpb24gU2V0ICovXG4gIGV4cG9ydCBjb25zdCBWVFMgPSAnXFx4OGEnO1xuICAvKiogUGFydGlhbCBMaW5lIERvd24gKi9cbiAgZXhwb3J0IGNvbnN0IFBMRCA9ICdcXHg4Yic7XG4gIC8qKiBQYXJ0aWFsIExpbmUgVXAgKi9cbiAgZXhwb3J0IGNvbnN0IFBMVSA9ICdcXHg4Yyc7XG4gIC8qKiBSZXZlcnNlIEluZGV4ICovXG4gIGV4cG9ydCBjb25zdCBSSSA9ICdcXHg4ZCc7XG4gIC8qKiBTaW5nbGUtU2hpZnQgMiAqL1xuICBleHBvcnQgY29uc3QgU1MyID0gJ1xceDhlJztcbiAgLyoqIFNpbmdsZS1TaGlmdCAzICovXG4gIGV4cG9ydCBjb25zdCBTUzMgPSAnXFx4OGYnO1xuICAvKiogRGV2aWNlIENvbnRyb2wgU3RyaW5nICovXG4gIGV4cG9ydCBjb25zdCBEQ1MgPSAnXFx4OTAnO1xuICAvKiogUHJpdmF0ZSBVc2UgMSAqL1xuICBleHBvcnQgY29uc3QgUFUxID0gJ1xceDkxJztcbiAgLyoqIFByaXZhdGUgVXNlIDIgKi9cbiAgZXhwb3J0IGNvbnN0IFBVMiA9ICdcXHg5Mic7XG4gIC8qKiBTZXQgVHJhbnNtaXQgU3RhdGUgKi9cbiAgZXhwb3J0IGNvbnN0IFNUUyA9ICdcXHg5Myc7XG4gIC8qKiBEZXN0cnVjdGl2ZSBiYWNrc3BhY2UsIGludGVuZGVkIHRvIGVsaW1pbmF0ZSBhbWJpZ3VpdHkgYWJvdXQgbWVhbmluZyBvZiBCUy4gKi9cbiAgZXhwb3J0IGNvbnN0IENDSCA9ICdcXHg5NCc7XG4gIC8qKiBNZXNzYWdlIFdhaXRpbmcgKi9cbiAgZXhwb3J0IGNvbnN0IE1XID0gJ1xceDk1JztcbiAgLyoqIFN0YXJ0IG9mIFByb3RlY3RlZCBBcmVhICovXG4gIGV4cG9ydCBjb25zdCBTUEEgPSAnXFx4OTYnO1xuICAvKiogRW5kIG9mIFByb3RlY3RlZCBBcmVhICovXG4gIGV4cG9ydCBjb25zdCBFUEEgPSAnXFx4OTcnO1xuICAvKiogU3RhcnQgb2YgU3RyaW5nICovXG4gIGV4cG9ydCBjb25zdCBTT1MgPSAnXFx4OTgnO1xuICAvKiogU2luZ2xlIEdyYXBoaWMgQ2hhcmFjdGVyIEludHJvZHVjZXIgKi9cbiAgZXhwb3J0IGNvbnN0IFNHQ0kgPSAnXFx4OTknO1xuICAvKiogU2luZ2xlIENoYXJhY3RlciBJbnRyb2R1Y2VyICovXG4gIGV4cG9ydCBjb25zdCBTQ0kgPSAnXFx4OWEnO1xuICAvKiogQ29udHJvbCBTZXF1ZW5jZSBJbnRyb2R1Y2VyICovXG4gIGV4cG9ydCBjb25zdCBDU0kgPSAnXFx4OWInO1xuICAvKiogU3RyaW5nIFRlcm1pbmF0b3IgKi9cbiAgZXhwb3J0IGNvbnN0IFNUID0gJ1xceDljJztcbiAgLyoqIE9wZXJhdGluZyBTeXN0ZW0gQ29tbWFuZCAqL1xuICBleHBvcnQgY29uc3QgT1NDID0gJ1xceDlkJztcbiAgLyoqIFByaXZhY3kgTWVzc2FnZSAqL1xuICBleHBvcnQgY29uc3QgUE0gPSAnXFx4OWUnO1xuICAvKiogQXBwbGljYXRpb24gUHJvZ3JhbSBDb21tYW5kICovXG4gIGV4cG9ydCBjb25zdCBBUEMgPSAnXFx4OWYnO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxMywgQ2hyaXN0b3BoZXIgSmVmZnJleSAoTUlUIExpY2Vuc2UpXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJS2V5Ym9hcmRFdmVudCwgSUtleWJvYXJkUmVzdWx0LCBLZXlib2FyZFJlc3VsdFR5cGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgQzAgfSBmcm9tICdjb21tb24vZGF0YS9Fc2NhcGVTZXF1ZW5jZXMnO1xuXG4vLyByZWcgKyBzaGlmdCBrZXkgbWFwcGluZ3MgZm9yIGRpZ2l0cyBhbmQgc3BlY2lhbCBjaGFyc1xuY29uc3QgS0VZQ09ERV9LRVlfTUFQUElOR1M6IHsgW2tleTogbnVtYmVyXTogW3N0cmluZywgc3RyaW5nXX0gPSB7XG4gIC8vIGRpZ2l0cyAwLTlcbiAgNDg6IFsnMCcsICcpJ10sXG4gIDQ5OiBbJzEnLCAnISddLFxuICA1MDogWycyJywgJ0AnXSxcbiAgNTE6IFsnMycsICcjJ10sXG4gIDUyOiBbJzQnLCAnJCddLFxuICA1MzogWyc1JywgJyUnXSxcbiAgNTQ6IFsnNicsICdeJ10sXG4gIDU1OiBbJzcnLCAnJiddLFxuICA1NjogWyc4JywgJyonXSxcbiAgNTc6IFsnOScsICcoJ10sXG5cbiAgLy8gc3BlY2lhbCBjaGFyc1xuICAxODY6IFsnOycsICc6J10sXG4gIDE4NzogWyc9JywgJysnXSxcbiAgMTg4OiBbJywnLCAnPCddLFxuICAxODk6IFsnLScsICdfJ10sXG4gIDE5MDogWycuJywgJz4nXSxcbiAgMTkxOiBbJy8nLCAnPyddLFxuICAxOTI6IFsnYCcsICd+J10sXG4gIDIxOTogWydbJywgJ3snXSxcbiAgMjIwOiBbJ1xcXFwnLCAnfCddLFxuICAyMjE6IFsnXScsICd9J10sXG4gIDIyMjogWydcXCcnLCAnXCInXVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGV2YWx1YXRlS2V5Ym9hcmRFdmVudChcbiAgZXY6IElLZXlib2FyZEV2ZW50LFxuICBhcHBsaWNhdGlvbkN1cnNvck1vZGU6IGJvb2xlYW4sXG4gIGlzTWFjOiBib29sZWFuLFxuICBtYWNPcHRpb25Jc01ldGE6IGJvb2xlYW5cbik6IElLZXlib2FyZFJlc3VsdCB7XG4gIGNvbnN0IHJlc3VsdDogSUtleWJvYXJkUmVzdWx0ID0ge1xuICAgIHR5cGU6IEtleWJvYXJkUmVzdWx0VHlwZS5TRU5EX0tFWSxcbiAgICAvLyBXaGV0aGVyIHRvIGNhbmNlbCBldmVudCBwcm9wYWdhdGlvbiAoTk9URTogdGhpcyBtYXkgbm90IGJlIG5lZWRlZCBzaW5jZSB0aGUgZXZlbnQgaXNcbiAgICAvLyBjYW5jZWxlZCBhdCB0aGUgZW5kIG9mIGtleURvd25cbiAgICBjYW5jZWw6IGZhbHNlLFxuICAgIC8vIFRoZSBuZXcga2V5IGV2ZW4gdG8gZW1pdFxuICAgIGtleTogdW5kZWZpbmVkXG4gIH07XG4gIGNvbnN0IG1vZGlmaWVycyA9IChldi5zaGlmdEtleSA/IDEgOiAwKSB8IChldi5hbHRLZXkgPyAyIDogMCkgfCAoZXYuY3RybEtleSA/IDQgOiAwKSB8IChldi5tZXRhS2V5ID8gOCA6IDApO1xuICBzd2l0Y2ggKGV2LmtleUNvZGUpIHtcbiAgICBjYXNlIDA6XG4gICAgICBpZiAoZXYua2V5ID09PSAnVUlLZXlJbnB1dFVwQXJyb3cnKSB7XG4gICAgICAgIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09BJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tBJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZXYua2V5ID09PSAnVUlLZXlJbnB1dExlZnRBcnJvdycpIHtcbiAgICAgICAgaWYgKGFwcGxpY2F0aW9uQ3Vyc29yTW9kZSkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0QnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW0QnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChldi5rZXkgPT09ICdVSUtleUlucHV0UmlnaHRBcnJvdycpIHtcbiAgICAgICAgaWYgKGFwcGxpY2F0aW9uQ3Vyc29yTW9kZSkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0MnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW0MnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChldi5rZXkgPT09ICdVSUtleUlucHV0RG93bkFycm93Jykge1xuICAgICAgICBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPQic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbQic7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgODpcbiAgICAgIC8vIGJhY2tzcGFjZVxuICAgICAgaWYgKGV2LnNoaWZ0S2V5KSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5CUzsgLy8gXkhcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2UgaWYgKGV2LmFsdEtleSkge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgQzAuREVMOyAvLyBcXGUgXj9cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXN1bHQua2V5ID0gQzAuREVMOyAvLyBeP1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA5OlxuICAgICAgLy8gdGFiXG4gICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbWic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVzdWx0LmtleSA9IEMwLkhUO1xuICAgICAgcmVzdWx0LmNhbmNlbCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEzOlxuICAgICAgLy8gcmV0dXJuL2VudGVyXG4gICAgICByZXN1bHQua2V5ID0gQzAuQ1I7XG4gICAgICByZXN1bHQuY2FuY2VsID0gdHJ1ZTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjc6XG4gICAgICAvLyBlc2NhcGVcbiAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0M7XG4gICAgICByZXN1bHQuY2FuY2VsID0gdHJ1ZTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzc6XG4gICAgICAvLyBsZWZ0LWFycm93XG4gICAgICBpZiAoZXYubWV0YUtleSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ0QnO1xuICAgICAgICAvLyBIQUNLOiBNYWtlIEFsdCArIGxlZnQtYXJyb3cgYmVoYXZlIGxpa2UgQ3RybCArIGxlZnQtYXJyb3c6IG1vdmUgb25lIHdvcmQgYmFja3dhcmRzXG4gICAgICAgIC8vIGh0dHA6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL2EvMTA4MTA2XG4gICAgICAgIC8vIG1hY09TIHVzZXMgZGlmZmVyZW50IGVzY2FwZSBzZXF1ZW5jZXMgdGhhbiBsaW51eFxuICAgICAgICBpZiAocmVzdWx0LmtleSA9PT0gQzAuRVNDICsgJ1sxOzNEJykge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAoaXNNYWMgPyAnYicgOiAnWzE7NUQnKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPRCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tEJztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzk6XG4gICAgICAvLyByaWdodC1hcnJvd1xuICAgICAgaWYgKGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdDJztcbiAgICAgICAgLy8gSEFDSzogTWFrZSBBbHQgKyByaWdodC1hcnJvdyBiZWhhdmUgbGlrZSBDdHJsICsgcmlnaHQtYXJyb3c6IG1vdmUgb25lIHdvcmQgZm9yd2FyZFxuICAgICAgICAvLyBodHRwOi8vdW5peC5zdGFja2V4Y2hhbmdlLmNvbS9hLzEwODEwNlxuICAgICAgICAvLyBtYWNPUyB1c2VzIGRpZmZlcmVudCBlc2NhcGUgc2VxdWVuY2VzIHRoYW4gbGludXhcbiAgICAgICAgaWYgKHJlc3VsdC5rZXkgPT09IEMwLkVTQyArICdbMTszQycpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgKGlzTWFjID8gJ2YnIDogJ1sxOzVDJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0MnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbQyc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM4OlxuICAgICAgLy8gdXAtYXJyb3dcbiAgICAgIGlmIChldi5tZXRhS2V5KSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOycgKyAobW9kaWZpZXJzICsgMSkgKyAnQSc7XG4gICAgICAgIC8vIEhBQ0s6IE1ha2UgQWx0ICsgdXAtYXJyb3cgYmVoYXZlIGxpa2UgQ3RybCArIHVwLWFycm93XG4gICAgICAgIC8vIGh0dHA6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL2EvMTA4MTA2XG4gICAgICAgIC8vIG1hY09TIHVzZXMgZGlmZmVyZW50IGVzY2FwZSBzZXF1ZW5jZXMgdGhhbiBsaW51eFxuICAgICAgICBpZiAoIWlzTWFjICYmIHJlc3VsdC5rZXkgPT09IEMwLkVTQyArICdbMTszQScpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOzVBJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPQSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tBJztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNDA6XG4gICAgICAvLyBkb3duLWFycm93XG4gICAgICBpZiAoZXYubWV0YUtleSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ0InO1xuICAgICAgICAvLyBIQUNLOiBNYWtlIEFsdCArIGRvd24tYXJyb3cgYmVoYXZlIGxpa2UgQ3RybCArIGRvd24tYXJyb3dcbiAgICAgICAgLy8gaHR0cDovL3VuaXguc3RhY2tleGNoYW5nZS5jb20vYS8xMDgxMDZcbiAgICAgICAgLy8gbWFjT1MgdXNlcyBkaWZmZXJlbnQgZXNjYXBlIHNlcXVlbmNlcyB0aGFuIGxpbnV4XG4gICAgICAgIGlmICghaXNNYWMgJiYgcmVzdWx0LmtleSA9PT0gQzAuRVNDICsgJ1sxOzNCJykge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7NUInO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFwcGxpY2F0aW9uQ3Vyc29yTW9kZSkge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09CJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW0InO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSA0NTpcbiAgICAgIC8vIGluc2VydFxuICAgICAgaWYgKCFldi5zaGlmdEtleSAmJiAhZXYuY3RybEtleSkge1xuICAgICAgICAvLyA8Q3RybD4gb3IgPFNoaWZ0PiArIDxJbnNlcnQ+IGFyZSB1c2VkIHRvXG4gICAgICAgIC8vIGNvcHktcGFzdGUgb24gc29tZSBzeXN0ZW1zLlxuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1syfic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ2OlxuICAgICAgLy8gZGVsZXRlXG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzM7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzN+JztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzY6XG4gICAgICAvLyBob21lXG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdIJztcbiAgICAgIH0gZWxzZSBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0gnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbSCc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM1OlxuICAgICAgLy8gZW5kXG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdGJztcbiAgICAgIH0gZWxzZSBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0YnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbRic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDMzOlxuICAgICAgLy8gcGFnZSB1cFxuICAgICAgaWYgKGV2LnNoaWZ0S2V5KSB7XG4gICAgICAgIHJlc3VsdC50eXBlID0gS2V5Ym9hcmRSZXN1bHRUeXBlLlBBR0VfVVA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1s1fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM0OlxuICAgICAgLy8gcGFnZSBkb3duXG4gICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgcmVzdWx0LnR5cGUgPSBLZXlib2FyZFJlc3VsdFR5cGUuUEFHRV9ET1dOO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbNn4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTI6XG4gICAgICAvLyBGMS1GMTJcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ1AnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPUCc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExMzpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ1EnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPUSc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExNDpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ1InO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPUic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExNTpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ1MnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPUyc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExNjpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTU7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE1fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExNzpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTc7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE3fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExODpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTg7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE4fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExOTpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTk7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE5fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyMDpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMjA7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIwfic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyMTpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMjE7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIxfic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyMjpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMjM7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIzfic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyMzpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMjQ7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzI0fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgLy8gYS16IGFuZCBzcGFjZVxuICAgICAgaWYgKGV2LmN0cmxLZXkgJiYgIWV2LnNoaWZ0S2V5ICYmICFldi5hbHRLZXkgJiYgIWV2Lm1ldGFLZXkpIHtcbiAgICAgICAgaWYgKGV2LmtleUNvZGUgPj0gNjUgJiYgZXYua2V5Q29kZSA8PSA5MCkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGV2LmtleUNvZGUgLSA2NCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PT0gMzIpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuTlVMO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPj0gNTEgJiYgZXYua2V5Q29kZSA8PSA1NSkge1xuICAgICAgICAgIC8vIGVzY2FwZSwgZmlsZSBzZXAsIGdyb3VwIHNlcCwgcmVjb3JkIHNlcCwgdW5pdCBzZXBcbiAgICAgICAgICByZXN1bHQua2V5ID0gU3RyaW5nLmZyb21DaGFyQ29kZShldi5rZXlDb2RlIC0gNTEgKyAyNyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PT0gNTYpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuREVMO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDIxOSkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0M7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PT0gMjIwKSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkZTO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDIyMSkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5HUztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICgoIWlzTWFjIHx8IG1hY09wdGlvbklzTWV0YSkgJiYgZXYuYWx0S2V5ICYmICFldi5tZXRhS2V5KSB7XG4gICAgICAgIC8vIE9uIG1hY09TIHRoaXMgaXMgYSB0aGlyZCBsZXZlbCBzaGlmdCB3aGVuICFtYWNPcHRpb25Jc01ldGEuIFVzZSA8RXNjPiBpbnN0ZWFkLlxuICAgICAgICBjb25zdCBrZXlNYXBwaW5nID0gS0VZQ09ERV9LRVlfTUFQUElOR1NbZXYua2V5Q29kZV07XG4gICAgICAgIGNvbnN0IGtleSA9IGtleU1hcHBpbmcgJiYga2V5TWFwcGluZ1shZXYuc2hpZnRLZXkgPyAwIDogMV07XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsga2V5O1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPj0gNjUgJiYgZXYua2V5Q29kZSA8PSA5MCkge1xuICAgICAgICAgIGNvbnN0IGtleUNvZGUgPSBldi5jdHJsS2V5ID8gZXYua2V5Q29kZSAtIDY0IDogZXYua2V5Q29kZSArIDMyO1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGtleUNvZGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzTWFjICYmICFldi5hbHRLZXkgJiYgIWV2LmN0cmxLZXkgJiYgZXYubWV0YUtleSkge1xuICAgICAgICBpZiAoZXYua2V5Q29kZSA9PT0gNjUpIHsgLy8gY21kICsgYVxuICAgICAgICAgIHJlc3VsdC50eXBlID0gS2V5Ym9hcmRSZXN1bHRUeXBlLlNFTEVDVF9BTEw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXYua2V5ICYmICFldi5jdHJsS2V5ICYmICFldi5hbHRLZXkgJiYgIWV2Lm1ldGFLZXkgJiYgZXYua2V5Q29kZSA+PSA0OCAmJiBldi5rZXkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vIEluY2x1ZGUgb25seSBrZXlzIHRoYXQgdGhhdCByZXN1bHQgaW4gYSBfc2luZ2xlXyBjaGFyYWN0ZXI7IGRvbid0IGluY2x1ZGUgbnVtIGxvY2ssIHZvbHVtZSB1cCwgZXRjLlxuICAgICAgICByZXN1bHQua2V5ID0gZXYua2V5O1xuICAgICAgfSBlbHNlIGlmIChldi5rZXkgJiYgZXYuY3RybEtleSkge1xuICAgICAgICBpZiAoZXYua2V5ID09PSAnXycpIHsgLy8gXl9cbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuVVM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuLyoqXG4gKiBQb2x5ZmlsbCAtIENvbnZlcnQgVVRGMzIgY29kZXBvaW50IGludG8gSlMgc3RyaW5nLlxuICogTm90ZTogVGhlIGJ1aWx0LWluIFN0cmluZy5mcm9tQ29kZVBvaW50IGhhcHBlbnMgdG8gYmUgbXVjaCBzbG93ZXJcbiAqICAgICAgIGR1ZSB0byBhZGRpdGlvbmFsIHNhbml0eSBjaGVja3MuIFdlIGNhbiBhdm9pZCB0aGVtIHNpbmNlXG4gKiAgICAgICB3ZSBhbHdheXMgb3BlcmF0ZSBvbiBsZWdhbCBVVEYzMiAoZ3JhbnRlZCBieSB0aGUgaW5wdXQgZGVjb2RlcnMpXG4gKiAgICAgICBhbmQgdXNlIHRoaXMgZmFzdGVyIHZlcnNpb24gaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0Zyb21Db2RlUG9pbnQoY29kZVBvaW50OiBudW1iZXIpOiBzdHJpbmcge1xuICBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgY29kZVBvaW50IC09IDB4MTAwMDA7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoKGNvZGVQb2ludCA+PiAxMCkgKyAweEQ4MDApICsgU3RyaW5nLmZyb21DaGFyQ29kZSgoY29kZVBvaW50ICUgMHg0MDApICsgMHhEQzAwKTtcbiAgfVxuICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlUG9pbnQpO1xufVxuXG4vKipcbiAqIENvbnZlcnQgVVRGMzIgY2hhciBjb2RlcyBpbnRvIEpTIHN0cmluZy5cbiAqIEJhc2ljYWxseSB0aGUgc2FtZSBhcyBgc3RyaW5nRnJvbUNvZGVQb2ludGAgYnV0IGZvciBtdWx0aXBsZSBjb2RlcG9pbnRzXG4gKiBpbiBhIGxvb3AgKHdoaWNoIGlzIGEgbG90IGZhc3RlcikuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1dGYzMlRvU3RyaW5nKGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyID0gMCwgZW5kOiBudW1iZXIgPSBkYXRhLmxlbmd0aCk6IHN0cmluZyB7XG4gIGxldCByZXN1bHQgPSAnJztcbiAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBsZXQgY29kZXBvaW50ID0gZGF0YVtpXTtcbiAgICBpZiAoY29kZXBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBKUyBzdHJpbmdzIGFyZSBlbmNvZGVkIGFzIFVURjE2LCB0aHVzIGEgbm9uIEJNUCBjb2RlcG9pbnQgZ2V0cyBjb252ZXJ0ZWQgaW50byBhIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICAvLyBjb252ZXJzaW9uIHJ1bGVzOlxuICAgICAgLy8gIC0gc3VidHJhY3QgMHgxMDAwMCBmcm9tIGNvZGUgcG9pbnQsIGxlYXZpbmcgYSAyMCBiaXQgbnVtYmVyXG4gICAgICAvLyAgLSBhZGQgaGlnaCAxMCBiaXRzIHRvIDB4RDgwMCAgLS0+IGZpcnN0IHN1cnJvZ2F0ZVxuICAgICAgLy8gIC0gYWRkIGxvdyAxMCBiaXRzIHRvIDB4REMwMCAgIC0tPiBzZWNvbmQgc3Vycm9nYXRlXG4gICAgICBjb2RlcG9pbnQgLT0gMHgxMDAwMDtcbiAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjb2RlcG9pbnQgPj4gMTApICsgMHhEODAwKSArIFN0cmluZy5mcm9tQ2hhckNvZGUoKGNvZGVwb2ludCAlIDB4NDAwKSArIDB4REMwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGVwb2ludCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogU3RyaW5nVG9VdGYzMiAtIGRlY29kZXMgVVRGMTYgc2VxdWVuY2VzIGludG8gVVRGMzIgY29kZXBvaW50cy5cbiAqIFRvIGtlZXAgdGhlIGRlY29kZXIgaW4gbGluZSB3aXRoIEpTIHN0cmluZ3MgaXQgaGFuZGxlcyBzaW5nbGUgc3Vycm9nYXRlcyBhcyBVQ1MyLlxuICovXG5leHBvcnQgY2xhc3MgU3RyaW5nVG9VdGYzMiB7XG4gIHByaXZhdGUgX2ludGVyaW06IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIENsZWFycyBpbnRlcmltIGFuZCByZXNldHMgZGVjb2RlciB0byBjbGVhbiBzdGF0ZS5cbiAgICovXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9pbnRlcmltID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvZGUgSlMgc3RyaW5nIHRvIFVURjMyIGNvZGVwb2ludHMuXG4gICAqIFRoZSBtZXRob2RzIGFzc3VtZXMgc3RyZWFtIGlucHV0IGFuZCB3aWxsIHN0b3JlIHBhcnRseSB0cmFuc21pdHRlZFxuICAgKiBzdXJyb2dhdGUgcGFpcnMgYW5kIGRlY29kZSB0aGVtIHdpdGggdGhlIG5leHQgZGF0YSBjaHVuay5cbiAgICogTm90ZTogVGhlIG1ldGhvZCBkb2VzIG5vIGJvdW5kIGNoZWNrcyBmb3IgdGFyZ2V0LCB0aGVyZWZvcmUgbWFrZSBzdXJlXG4gICAqIHRoZSBwcm92aWRlZCBpbnB1dCBkYXRhIGRvZXMgbm90IGV4Y2VlZCB0aGUgc2l6ZSBvZiBgdGFyZ2V0YC5cbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHdyaXR0ZW4gY29kZXBvaW50cyBpbiBgdGFyZ2V0YC5cbiAgICovXG4gIGRlY29kZShpbnB1dDogc3RyaW5nLCB0YXJnZXQ6IFVpbnQzMkFycmF5KTogbnVtYmVyIHtcbiAgICBjb25zdCBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG5cbiAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgbGV0IHNpemUgPSAwO1xuICAgIGxldCBzdGFydFBvcyA9IDA7XG5cbiAgICAvLyBoYW5kbGUgbGVmdG92ZXIgc3Vycm9nYXRlIGhpZ2hcbiAgICBpZiAodGhpcy5faW50ZXJpbSkge1xuICAgICAgY29uc3Qgc2Vjb25kID0gaW5wdXQuY2hhckNvZGVBdChzdGFydFBvcysrKTtcbiAgICAgIGlmICgweERDMDAgPD0gc2Vjb25kICYmIHNlY29uZCA8PSAweERGRkYpIHtcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSAodGhpcy5faW50ZXJpbSAtIDB4RDgwMCkgKiAweDQwMCArIHNlY29uZCAtIDB4REMwMCArIDB4MTAwMDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpbGxlZ2FsIGNvZGVwb2ludCAoVVNDMiBoYW5kbGluZylcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSB0aGlzLl9pbnRlcmltO1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IHNlY29uZDtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ludGVyaW0gPSAwO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSBzdGFydFBvczsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCBjb2RlID0gaW5wdXQuY2hhckNvZGVBdChpKTtcbiAgICAgIC8vIHN1cnJvZ2F0ZSBwYWlyIGZpcnN0XG4gICAgICBpZiAoMHhEODAwIDw9IGNvZGUgJiYgY29kZSA8PSAweERCRkYpIHtcbiAgICAgICAgaWYgKCsraSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLl9pbnRlcmltID0gY29kZTtcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWNvbmQgPSBpbnB1dC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBpZiAoMHhEQzAwIDw9IHNlY29uZCAmJiBzZWNvbmQgPD0gMHhERkZGKSB7XG4gICAgICAgICAgdGFyZ2V0W3NpemUrK10gPSAoY29kZSAtIDB4RDgwMCkgKiAweDQwMCArIHNlY29uZCAtIDB4REMwMCArIDB4MTAwMDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnQgKFVTQzIgaGFuZGxpbmcpXG4gICAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjb2RlO1xuICAgICAgICAgIHRhcmdldFtzaXplKytdID0gc2Vjb25kO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdGFyZ2V0W3NpemUrK10gPSBjb2RlO1xuICAgIH1cbiAgICByZXR1cm4gc2l6ZTtcbiAgfVxufVxuXG4vKipcbiAqIFV0ZjhEZWNvZGVyIC0gZGVjb2RlcyBVVEY4IGJ5dGUgc2VxdWVuY2VzIGludG8gVVRGMzIgY29kZXBvaW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIFV0ZjhUb1V0ZjMyIHtcbiAgcHVibGljIGludGVyaW06IFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheSgzKTtcblxuICAvKipcbiAgICogQ2xlYXJzIGludGVyaW0gYnl0ZXMgYW5kIHJlc2V0cyBkZWNvZGVyIHRvIGNsZWFuIHN0YXRlLlxuICAgKi9cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuaW50ZXJpbS5maWxsKDApO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29kZXMgVVRGOCBieXRlIHNlcXVlbmNlcyBpbiBgaW5wdXRgIHRvIFVURjMyIGNvZGVwb2ludHMgaW4gYHRhcmdldGAuXG4gICAqIFRoZSBtZXRob2RzIGFzc3VtZXMgc3RyZWFtIGlucHV0IGFuZCB3aWxsIHN0b3JlIHBhcnRseSB0cmFuc21pdHRlZCBieXRlc1xuICAgKiBhbmQgZGVjb2RlIHRoZW0gd2l0aCB0aGUgbmV4dCBkYXRhIGNodW5rLlxuICAgKiBOb3RlOiBUaGUgbWV0aG9kIGRvZXMgbm8gYm91bmQgY2hlY2tzIGZvciB0YXJnZXQsIHRoZXJlZm9yZSBtYWtlIHN1cmVcbiAgICogdGhlIHByb3ZpZGVkIGRhdGEgY2h1bmsgZG9lcyBub3QgZXhjZWVkIHRoZSBzaXplIG9mIGB0YXJnZXRgLlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygd3JpdHRlbiBjb2RlcG9pbnRzIGluIGB0YXJnZXRgLlxuICAgKi9cbiAgZGVjb2RlKGlucHV0OiBVaW50OEFycmF5LCB0YXJnZXQ6IFVpbnQzMkFycmF5KTogbnVtYmVyIHtcbiAgICBjb25zdCBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG5cbiAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgbGV0IHNpemUgPSAwO1xuICAgIGxldCBieXRlMTogbnVtYmVyO1xuICAgIGxldCBieXRlMjogbnVtYmVyO1xuICAgIGxldCBieXRlMzogbnVtYmVyO1xuICAgIGxldCBieXRlNDogbnVtYmVyO1xuICAgIGxldCBjb2RlcG9pbnQgPSAwO1xuICAgIGxldCBzdGFydFBvcyA9IDA7XG5cbiAgICAvLyBoYW5kbGUgbGVmdG92ZXIgYnl0ZXNcbiAgICBpZiAodGhpcy5pbnRlcmltWzBdKSB7XG4gICAgICBsZXQgZGlzY2FyZEludGVyaW0gPSBmYWxzZTtcbiAgICAgIGxldCBjcCA9IHRoaXMuaW50ZXJpbVswXTtcbiAgICAgIGNwICY9ICgoKChjcCAmIDB4RTApID09PSAweEMwKSkgPyAweDFGIDogKCgoY3AgJiAweEYwKSA9PT0gMHhFMCkpID8gMHgwRiA6IDB4MDcpO1xuICAgICAgbGV0IHBvcyA9IDA7XG4gICAgICBsZXQgdG1wOiBudW1iZXI7XG4gICAgICB3aGlsZSAoKHRtcCA9IHRoaXMuaW50ZXJpbVsrK3Bvc10gJiAweDNGKSAmJiBwb3MgPCA0KSB7XG4gICAgICAgIGNwIDw8PSA2O1xuICAgICAgICBjcCB8PSB0bXA7XG4gICAgICB9XG4gICAgICAvLyBtaXNzaW5nIGJ5dGVzIC0gcmVhZCBhaGVhZCBmcm9tIGlucHV0XG4gICAgICBjb25zdCB0eXBlID0gKCgodGhpcy5pbnRlcmltWzBdICYgMHhFMCkgPT09IDB4QzApKSA/IDIgOiAoKCh0aGlzLmludGVyaW1bMF0gJiAweEYwKSA9PT0gMHhFMCkpID8gMyA6IDQ7XG4gICAgICBjb25zdCBtaXNzaW5nID0gdHlwZSAtIHBvcztcbiAgICAgIHdoaWxlIChzdGFydFBvcyA8IG1pc3NpbmcpIHtcbiAgICAgICAgaWYgKHN0YXJ0UG9zID49IGxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHRtcCA9IGlucHV0W3N0YXJ0UG9zKytdO1xuICAgICAgICBpZiAoKHRtcCAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgICAgLy8gd3JvbmcgY29udGludWF0aW9uLCBkaXNjYXJkIGludGVyaW0gYnl0ZXMgY29tcGxldGVseVxuICAgICAgICAgIHN0YXJ0UG9zLS07XG4gICAgICAgICAgZGlzY2FyZEludGVyaW0gPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5lZWQgdG8gc2F2ZSBzbyB3ZSBjYW4gY29udGludWUgc2hvcnQgaW5wdXRzIGluIG5leHQgY2FsbFxuICAgICAgICAgIHRoaXMuaW50ZXJpbVtwb3MrK10gPSB0bXA7XG4gICAgICAgICAgY3AgPDw9IDY7XG4gICAgICAgICAgY3AgfD0gdG1wICYgMHgzRjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFkaXNjYXJkSW50ZXJpbSkge1xuICAgICAgICAvLyBmaW5hbCB0ZXN0IGlzIHR5cGUgZGVwZW5kZW50XG4gICAgICAgIGlmICh0eXBlID09PSAyKSB7XG4gICAgICAgICAgaWYgKGNwIDwgMHg4MCkge1xuICAgICAgICAgICAgLy8gd3Jvbmcgc3RhcnRlciBieXRlXG4gICAgICAgICAgICBzdGFydFBvcy0tO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGNwO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAzKSB7XG4gICAgICAgICAgaWYgKGNwIDwgMHgwODAwIHx8IChjcCA+PSAweEQ4MDAgJiYgY3AgPD0gMHhERkZGKSkge1xuICAgICAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjcDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGNwIDwgMHgwMTAwMDAgfHwgY3AgPiAweDEwRkZGRikge1xuICAgICAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjcDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuaW50ZXJpbS5maWxsKDApO1xuICAgIH1cblxuICAgIC8vIGxvb3AgdGhyb3VnaCBpbnB1dFxuICAgIGNvbnN0IGZvdXJTdG9wID0gbGVuZ3RoIC0gNDtcbiAgICBsZXQgaSA9IHN0YXJ0UG9zO1xuICAgIHdoaWxlIChpIDwgbGVuZ3RoKSB7XG4gICAgICAvKipcbiAgICAgICAqIEFTQ0lJIHNob3J0Y3V0IHdpdGggbG9vcCB1bnJvbGxlZCB0byA0IGNvbnNlY3V0aXZlIEFTQ0lJIGNoYXJzLlxuICAgICAgICogVGhpcyBpcyBhIGNvbXByb21pc2UgYmV0d2VlbiBzcGVlZCBnYWluIGZvciBBU0NJSVxuICAgICAgICogYW5kIHBlbmFsdHkgZm9yIG5vbiBBU0NJSTpcbiAgICAgICAqIEZvciBiZXN0IEFTQ0lJIHBlcmZvcm1hbmNlIHRoZSBjaGFyIHNob3VsZCBiZSBzdG9yZWQgZGlyZWN0bHkgaW50byB0YXJnZXQsXG4gICAgICAgKiBidXQgZXZlbiBhIHNpbmdsZSBhdHRlbXB0IHRvIHdyaXRlIHRvIHRhcmdldCBhbmQgY29tcGFyZSBhZnRlcndhcmRzXG4gICAgICAgKiBwZW5hbGl6ZXMgbm9uIEFTQ0lJIHJlYWxseSBiYWQgKC01MCUpLCB0aHVzIHdlIGxvYWQgdGhlIGNoYXIgaW50byBieXRlWCBmaXJzdCxcbiAgICAgICAqIHdoaWNoIHJlZHVjZXMgQVNDSUkgcGVyZm9ybWFuY2UgYnkgfjE1JS5cbiAgICAgICAqIFRoaXMgdHJpYWwgZm9yIEFTQ0lJIHJlZHVjZXMgbm9uIEFTQ0lJIHBlcmZvcm1hbmNlIGJ5IH4xMCUgd2hpY2ggc2VlbXMgYWNjZXB0aWJsZVxuICAgICAgICogY29tcGFyZWQgdG8gdGhlIGdhaW5zLlxuICAgICAgICogTm90ZSB0aGF0IHRoaXMgb3B0aW1pemF0aW9uIG9ubHkgdGFrZXMgcGxhY2UgZm9yIDQgY29uc2VjdXRpdmUgQVNDSUkgY2hhcnMsXG4gICAgICAgKiBmb3IgYW55IHNob3J0ZXIgaXQgYmFpbHMgb3V0LiBXb3JzdCBjYXNlIC0gYWxsIDQgYnl0ZXMgYmVpbmcgcmVhZCBidXRcbiAgICAgICAqIHRocm93biBhd2F5IGR1ZSB0byB0aGUgbGFzdCBiZWluZyBhIG5vbiBBU0NJSSBjaGFyICgtMTAlIHBlcmZvcm1hbmNlKS5cbiAgICAgICAqL1xuICAgICAgd2hpbGUgKGkgPCBmb3VyU3RvcFxuICAgICAgICAmJiAhKChieXRlMSA9IGlucHV0W2ldKSAmIDB4ODApXG4gICAgICAgICYmICEoKGJ5dGUyID0gaW5wdXRbaSArIDFdKSAmIDB4ODApXG4gICAgICAgICYmICEoKGJ5dGUzID0gaW5wdXRbaSArIDJdKSAmIDB4ODApXG4gICAgICAgICYmICEoKGJ5dGU0ID0gaW5wdXRbaSArIDNdKSAmIDB4ODApKVxuICAgICAge1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGJ5dGUxO1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGJ5dGUyO1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGJ5dGUzO1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGJ5dGU0O1xuICAgICAgICBpICs9IDQ7XG4gICAgICB9XG5cbiAgICAgIC8vIHJlcmVhZCBieXRlMVxuICAgICAgYnl0ZTEgPSBpbnB1dFtpKytdO1xuXG4gICAgICAvLyAxIGJ5dGVcbiAgICAgIGlmIChieXRlMSA8IDB4ODApIHtcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBieXRlMTtcblxuICAgICAgICAvLyAyIGJ5dGVzXG4gICAgICB9IGVsc2UgaWYgKChieXRlMSAmIDB4RTApID09PSAweEMwKSB7XG4gICAgICAgIGlmIChpID49IGxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVswXSA9IGJ5dGUxO1xuICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9XG4gICAgICAgIGJ5dGUyID0gaW5wdXRbaSsrXTtcbiAgICAgICAgaWYgKChieXRlMiAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgICAgLy8gd3JvbmcgY29udGludWF0aW9uXG4gICAgICAgICAgaS0tO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvZGVwb2ludCA9IChieXRlMSAmIDB4MUYpIDw8IDYgfCAoYnl0ZTIgJiAweDNGKTtcbiAgICAgICAgaWYgKGNvZGVwb2ludCA8IDB4ODApIHtcbiAgICAgICAgICAvLyB3cm9uZyBzdGFydGVyIGJ5dGVcbiAgICAgICAgICBpLS07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjb2RlcG9pbnQ7XG5cbiAgICAgICAgLy8gMyBieXRlc1xuICAgICAgfSBlbHNlIGlmICgoYnl0ZTEgJiAweEYwKSA9PT0gMHhFMCkge1xuICAgICAgICBpZiAoaSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMF0gPSBieXRlMTtcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBieXRlMiA9IGlucHV0W2krK107XG4gICAgICAgIGlmICgoYnl0ZTIgJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIGNvbnRpbnVhdGlvblxuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMF0gPSBieXRlMTtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMV0gPSBieXRlMjtcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBieXRlMyA9IGlucHV0W2krK107XG4gICAgICAgIGlmICgoYnl0ZTMgJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIGNvbnRpbnVhdGlvblxuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb2RlcG9pbnQgPSAoYnl0ZTEgJiAweDBGKSA8PCAxMiB8IChieXRlMiAmIDB4M0YpIDw8IDYgfCAoYnl0ZTMgJiAweDNGKTtcbiAgICAgICAgaWYgKGNvZGVwb2ludCA8IDB4MDgwMCB8fCAoY29kZXBvaW50ID49IDB4RDgwMCAmJiBjb2RlcG9pbnQgPD0gMHhERkZGKSkge1xuICAgICAgICAgIC8vIGlsbGVnYWwgY29kZXBvaW50LCBubyBpLS0gaGVyZVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gY29kZXBvaW50O1xuXG4gICAgICAgIC8vIDQgYnl0ZXNcbiAgICAgIH0gZWxzZSBpZiAoKGJ5dGUxICYgMHhGOCkgPT09IDB4RjApIHtcbiAgICAgICAgaWYgKGkgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzBdID0gYnl0ZTE7XG4gICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgYnl0ZTIgPSBpbnB1dFtpKytdO1xuICAgICAgICBpZiAoKGJ5dGUyICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgICAgICAvLyB3cm9uZyBjb250aW51YXRpb25cbiAgICAgICAgICBpLS07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzBdID0gYnl0ZTE7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzFdID0gYnl0ZTI7XG4gICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgYnl0ZTMgPSBpbnB1dFtpKytdO1xuICAgICAgICBpZiAoKGJ5dGUzICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgICAgICAvLyB3cm9uZyBjb250aW51YXRpb25cbiAgICAgICAgICBpLS07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzBdID0gYnl0ZTE7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzFdID0gYnl0ZTI7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzJdID0gYnl0ZTM7XG4gICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgYnl0ZTQgPSBpbnB1dFtpKytdO1xuICAgICAgICBpZiAoKGJ5dGU0ICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgICAgICAvLyB3cm9uZyBjb250aW51YXRpb25cbiAgICAgICAgICBpLS07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29kZXBvaW50ID0gKGJ5dGUxICYgMHgwNykgPDwgMTggfCAoYnl0ZTIgJiAweDNGKSA8PCAxMiB8IChieXRlMyAmIDB4M0YpIDw8IDYgfCAoYnl0ZTQgJiAweDNGKTtcbiAgICAgICAgaWYgKGNvZGVwb2ludCA8IDB4MDEwMDAwIHx8IGNvZGVwb2ludCA+IDB4MTBGRkZGKSB7XG4gICAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnQsIG5vIGktLSBoZXJlXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjb2RlcG9pbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpbGxlZ2FsIGJ5dGUsIGp1c3Qgc2tpcFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2l6ZTtcbiAgfVxufVxuIiwiXG4vKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmRlY2xhcmUgY29uc3Qgc2V0VGltZW91dDogKGhhbmRsZXI6ICgpID0+IHZvaWQsIHRpbWVvdXQ/OiBudW1iZXIpID0+IHZvaWQ7XG5cbi8qKlxuICogU2FmZXR5IHdhdGVybWFyayB0byBhdm9pZCBtZW1vcnkgZXhoYXVzdGlvbiBhbmQgYnJvd3NlciBlbmdpbmUgY3Jhc2ggb24gZmFzdCBkYXRhIGlucHV0LlxuICogRW5hYmxlIGZsb3cgY29udHJvbCB0byBhdm9pZCB0aGlzIGxpbWl0IGFuZCBtYWtlIHN1cmUgdGhhdCB5b3VyIGJhY2tlbmQgY29ycmVjdGx5XG4gKiBwcm9wYWdhdGVzIHRoaXMgdG8gdGhlIHVuZGVybHlpbmcgcHR5LiAoc2VlIGRvY3MgZm9yIGZ1cnRoZXIgaW5zdHJ1Y3Rpb25zKVxuICogU2luY2UgdGhpcyBsaW1pdCBpcyBtZWFudCBhcyBhIHNhZmV0eSBwYXJhY2h1dGUgdG8gcHJldmVudCBicm93c2VyIGNyYXNocyxcbiAqIGl0IGlzIHNldCB0byBhIHZlcnkgaGlnaCBudW1iZXIuIFR5cGljYWxseSB4dGVybS5qcyBnZXRzIHVucmVzcG9uc2l2ZSB3aXRoXG4gKiBhIDEwMCB0aW1lcyBsb3dlciBudW1iZXIgKD41MDAga0IpLlxuICovXG5jb25zdCBESVNDQVJEX1dBVEVSTUFSSyA9IDUwMDAwMDAwOyAvLyB+NTAgTUJcblxuLyoqXG4gKiBUaGUgbWF4IG51bWJlciBvZiBtcyB0byBzcGVuZCBvbiB3cml0ZXMgYmVmb3JlIGFsbG93aW5nIHRoZSByZW5kZXJlciB0b1xuICogY2F0Y2ggdXAgd2l0aCBhIDBtcyBzZXRUaW1lb3V0LiBBIHZhbHVlIG9mIDwgMzMgdG8ga2VlcCB1cyBjbG9zZSB0b1xuICogMzBmcHMsIGFuZCBhIHZhbHVlIG9mIDwgMTYgdG8gdHJ5IHRvIHJ1biBhdCA2MGZwcy4gT2YgY291cnNlLCB0aGUgcmVhbCBGUFNcbiAqIGRlcGVuZHMgb24gdGhlIHRpbWUgaXQgdGFrZXMgZm9yIHRoZSByZW5kZXJlciB0byBkcmF3IHRoZSBmcmFtZS5cbiAqL1xuY29uc3QgV1JJVEVfVElNRU9VVF9NUyA9IDEyO1xuXG4vKipcbiAqIFRocmVzaG9sZCBvZiBtYXggaGVsZCBjaHVua3MgaW4gdGhlIHdyaXRlIGJ1ZmZlciwgdGhhdCB3ZXJlIGFscmVhZHkgcHJvY2Vzc2VkLlxuICogVGhpcyBpcyBhIHRyYWRlb2ZmIGJldHdlZW4gZXh0ZW5zaXZlIHdyaXRlIGJ1ZmZlciBzaGlmdHMgKGJhZCBydW50aW1lKSBhbmQgaGlnaFxuICogbWVtb3J5IGNvbnN1bXB0aW9uIGJ5IGRhdGEgdGhhdHMgbm90IHVzZWQgYW55bW9yZS5cbiAqL1xuY29uc3QgV1JJVEVfQlVGRkVSX0xFTkdUSF9USFJFU0hPTEQgPSA1MDtcblxuZXhwb3J0IGNsYXNzIFdyaXRlQnVmZmVyIHtcbiAgcHJpdmF0ZSBfd3JpdGVCdWZmZXI6IChzdHJpbmcgfCBVaW50OEFycmF5KVtdID0gW107XG4gIHByaXZhdGUgX2NhbGxiYWNrczogKCgoKSA9PiB2b2lkKSB8IHVuZGVmaW5lZClbXSA9IFtdO1xuICBwcml2YXRlIF9wZW5kaW5nRGF0YSA9IDA7XG4gIHByaXZhdGUgX2J1ZmZlck9mZnNldCA9IDA7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfYWN0aW9uOiAoZGF0YTogc3RyaW5nIHwgVWludDhBcnJheSkgPT4gdm9pZCkgeyB9XG5cbiAgcHVibGljIHdyaXRlU3luYyhkYXRhOiBzdHJpbmcgfCBVaW50OEFycmF5KTogdm9pZCB7XG4gICAgLy8gZm9yY2Ugc3luYyBwcm9jZXNzaW5nIG9uIHBlbmRpbmcgZGF0YSBjaHVua3MgdG8gYXZvaWQgaW4tYmFuZCBkYXRhIHNjcmFtYmxpbmdcbiAgICAvLyBkb2VzIHRoZSBzYW1lIGFzIGlubmVyV3JpdGUgYnV0IHdpdGhvdXQgZXZlbnQgbG9vcFxuICAgIGlmICh0aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLl9idWZmZXJPZmZzZXQ7IGkgPCB0aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5fd3JpdGVCdWZmZXJbaV07XG4gICAgICAgIGNvbnN0IGNiID0gdGhpcy5fY2FsbGJhY2tzW2ldO1xuICAgICAgICB0aGlzLl9hY3Rpb24oZGF0YSk7XG4gICAgICAgIGlmIChjYikgY2IoKTtcbiAgICAgIH1cbiAgICAgIC8vIHJlc2V0IGFsbCB0byBhdm9pZCByZXByb2Nlc3Npbmcgb2YgY2h1bmtzIHdpdGggc2NoZWR1bGVkIGlubmVyV3JpdGUgY2FsbFxuICAgICAgdGhpcy5fd3JpdGVCdWZmZXIgPSBbXTtcbiAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IFtdO1xuICAgICAgdGhpcy5fcGVuZGluZ0RhdGEgPSAwO1xuICAgICAgLy8gc3RvcCBzY2hlZHVsZWQgaW5uZXJXcml0ZSBieSBvZmZzZXQgPiBsZW5ndGggY29uZGl0aW9uXG4gICAgICB0aGlzLl9idWZmZXJPZmZzZXQgPSAweDdGRkZGRkZGO1xuICAgIH1cbiAgICAvLyBoYW5kbGUgY3VycmVudCBkYXRhIGNodW5rXG4gICAgdGhpcy5fYWN0aW9uKGRhdGEpO1xuICB9XG5cbiAgcHVibGljIHdyaXRlKGRhdGE6IHN0cmluZyB8IFVpbnQ4QXJyYXksIGNhbGxiYWNrPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9wZW5kaW5nRGF0YSA+IERJU0NBUkRfV0FURVJNQVJLKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dyaXRlIGRhdGEgZGlzY2FyZGVkLCB1c2UgZmxvdyBjb250cm9sIHRvIGF2b2lkIGxvc2luZyBkYXRhJyk7XG4gICAgfVxuXG4gICAgLy8gc2NoZWR1bGUgY2h1bmsgcHJvY2Vzc2luZyBmb3IgbmV4dCBldmVudCBsb29wIHJ1blxuICAgIGlmICghdGhpcy5fd3JpdGVCdWZmZXIubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9idWZmZXJPZmZzZXQgPSAwO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLl9pbm5lcldyaXRlKCkpO1xuICAgIH1cblxuICAgIHRoaXMuX3BlbmRpbmdEYXRhICs9IGRhdGEubGVuZ3RoO1xuICAgIHRoaXMuX3dyaXRlQnVmZmVyLnB1c2goZGF0YSk7XG4gICAgdGhpcy5fY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9pbm5lcldyaXRlKCk6IHZvaWQge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgd2hpbGUgKHRoaXMuX3dyaXRlQnVmZmVyLmxlbmd0aCA+IHRoaXMuX2J1ZmZlck9mZnNldCkge1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX3dyaXRlQnVmZmVyW3RoaXMuX2J1ZmZlck9mZnNldF07XG4gICAgICBjb25zdCBjYiA9IHRoaXMuX2NhbGxiYWNrc1t0aGlzLl9idWZmZXJPZmZzZXRdO1xuICAgICAgdGhpcy5fYnVmZmVyT2Zmc2V0Kys7XG5cbiAgICAgIHRoaXMuX2FjdGlvbihkYXRhKTtcbiAgICAgIHRoaXMuX3BlbmRpbmdEYXRhIC09IGRhdGEubGVuZ3RoO1xuICAgICAgaWYgKGNiKSBjYigpO1xuXG4gICAgICBpZiAoRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSA+PSBXUklURV9USU1FT1VUX01TKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5fd3JpdGVCdWZmZXIubGVuZ3RoID4gdGhpcy5fYnVmZmVyT2Zmc2V0KSB7XG4gICAgICAvLyBBbGxvdyByZW5kZXJlciB0byBjYXRjaCB1cCBiZWZvcmUgcHJvY2Vzc2luZyB0aGUgbmV4dCBiYXRjaFxuICAgICAgLy8gdHJpbSBhbHJlYWR5IHByb2Nlc3NlZCBjaHVua3MgaWYgd2UgYXJlIGFib3ZlIHRocmVzaG9sZFxuICAgICAgaWYgKHRoaXMuX2J1ZmZlck9mZnNldCA+IFdSSVRFX0JVRkZFUl9MRU5HVEhfVEhSRVNIT0xEKSB7XG4gICAgICAgIHRoaXMuX3dyaXRlQnVmZmVyID0gdGhpcy5fd3JpdGVCdWZmZXIuc2xpY2UodGhpcy5fYnVmZmVyT2Zmc2V0KTtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzLnNsaWNlKHRoaXMuX2J1ZmZlck9mZnNldCk7XG4gICAgICAgIHRoaXMuX2J1ZmZlck9mZnNldCA9IDA7XG4gICAgICB9XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuX2lubmVyV3JpdGUoKSwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3dyaXRlQnVmZmVyID0gW107XG4gICAgICB0aGlzLl9jYWxsYmFja3MgPSBbXTtcbiAgICAgIHRoaXMuX3BlbmRpbmdEYXRhID0gMDtcbiAgICAgIHRoaXMuX2J1ZmZlck9mZnNldCA9IDA7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbi8qKlxuICogSW50ZXJuYWwgc3RhdGVzIG9mIEVzY2FwZVNlcXVlbmNlUGFyc2VyLlxuICovXG5leHBvcnQgY29uc3QgZW51bSBQYXJzZXJTdGF0ZSB7XG4gIEdST1VORCA9IDAsXG4gIEVTQ0FQRSA9IDEsXG4gIEVTQ0FQRV9JTlRFUk1FRElBVEUgPSAyLFxuICBDU0lfRU5UUlkgPSAzLFxuICBDU0lfUEFSQU0gPSA0LFxuICBDU0lfSU5URVJNRURJQVRFID0gNSxcbiAgQ1NJX0lHTk9SRSA9IDYsXG4gIFNPU19QTV9BUENfU1RSSU5HID0gNyxcbiAgT1NDX1NUUklORyA9IDgsXG4gIERDU19FTlRSWSA9IDksXG4gIERDU19QQVJBTSA9IDEwLFxuICBEQ1NfSUdOT1JFID0gMTEsXG4gIERDU19JTlRFUk1FRElBVEUgPSAxMixcbiAgRENTX1BBU1NUSFJPVUdIID0gMTNcbn1cblxuLyoqXG4qIEludGVybmFsIGFjdGlvbnMgb2YgRXNjYXBlU2VxdWVuY2VQYXJzZXIuXG4qL1xuZXhwb3J0IGNvbnN0IGVudW0gUGFyc2VyQWN0aW9uIHtcbiAgSUdOT1JFID0gMCxcbiAgRVJST1IgPSAxLFxuICBQUklOVCA9IDIsXG4gIEVYRUNVVEUgPSAzLFxuICBPU0NfU1RBUlQgPSA0LFxuICBPU0NfUFVUID0gNSxcbiAgT1NDX0VORCA9IDYsXG4gIENTSV9ESVNQQVRDSCA9IDcsXG4gIFBBUkFNID0gOCxcbiAgQ09MTEVDVCA9IDksXG4gIEVTQ19ESVNQQVRDSCA9IDEwLFxuICBDTEVBUiA9IDExLFxuICBEQ1NfSE9PSyA9IDEyLFxuICBEQ1NfUFVUID0gMTMsXG4gIERDU19VTkhPT0sgPSAxNFxufVxuXG4vKipcbiAqIEludGVybmFsIHN0YXRlcyBvZiBPc2NQYXJzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBlbnVtIE9zY1N0YXRlIHtcbiAgU1RBUlQgPSAwLFxuICBJRCA9IDEsXG4gIFBBWUxPQUQgPSAyLFxuICBBQk9SVCA9IDNcbn1cblxuLy8gcGF5bG9hZCBsaW1pdCBmb3IgT1NDIGFuZCBEQ1NcbmV4cG9ydCBjb25zdCBQQVlMT0FEX0xJTUlUID0gMTAwMDAwMDA7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IElEY3NIYW5kbGVyLCBJUGFyYW1zLCBJSGFuZGxlckNvbGxlY3Rpb24sIElEY3NQYXJzZXIsIERjc0ZhbGxiYWNrSGFuZGxlclR5cGUgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcbmltcG9ydCB7IHV0ZjMyVG9TdHJpbmcgfSBmcm9tICdjb21tb24vaW5wdXQvVGV4dERlY29kZXInO1xuaW1wb3J0IHsgUGFyYW1zIH0gZnJvbSAnY29tbW9uL3BhcnNlci9QYXJhbXMnO1xuaW1wb3J0IHsgUEFZTE9BRF9MSU1JVCB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvQ29uc3RhbnRzJztcblxuY29uc3QgRU1QVFlfSEFORExFUlM6IElEY3NIYW5kbGVyW10gPSBbXTtcblxuZXhwb3J0IGNsYXNzIERjc1BhcnNlciBpbXBsZW1lbnRzIElEY3NQYXJzZXIge1xuICBwcml2YXRlIF9oYW5kbGVyczogSUhhbmRsZXJDb2xsZWN0aW9uPElEY3NIYW5kbGVyPiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHByaXZhdGUgX2FjdGl2ZTogSURjc0hhbmRsZXJbXSA9IEVNUFRZX0hBTkRMRVJTO1xuICBwcml2YXRlIF9pZGVudDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfaGFuZGxlckZiOiBEY3NGYWxsYmFja0hhbmRsZXJUeXBlID0gKCkgPT4ge307XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5faGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2hhbmRsZXJGYiA9ICgpID0+IHt9O1xuICB9XG5cbiAgcHVibGljIGFkZEhhbmRsZXIoaWRlbnQ6IG51bWJlciwgaGFuZGxlcjogSURjc0hhbmRsZXIpOiBJRGlzcG9zYWJsZSB7XG4gICAgaWYgKHRoaXMuX2hhbmRsZXJzW2lkZW50XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9oYW5kbGVyc1tpZGVudF0gPSBbXTtcbiAgICB9XG4gICAgY29uc3QgaGFuZGxlckxpc3QgPSB0aGlzLl9oYW5kbGVyc1tpZGVudF07XG4gICAgaGFuZGxlckxpc3QucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgICBjb25zdCBoYW5kbGVySW5kZXggPSBoYW5kbGVyTGlzdC5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaGFuZGxlckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIGhhbmRsZXJMaXN0LnNwbGljZShoYW5kbGVySW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRIYW5kbGVyKGlkZW50OiBudW1iZXIsIGhhbmRsZXI6IElEY3NIYW5kbGVyKTogdm9pZCB7XG4gICAgdGhpcy5faGFuZGxlcnNbaWRlbnRdID0gW2hhbmRsZXJdO1xuICB9XG5cbiAgcHVibGljIGNsZWFySGFuZGxlcihpZGVudDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2hhbmRsZXJzW2lkZW50XSkgZGVsZXRlIHRoaXMuX2hhbmRsZXJzW2lkZW50XTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRIYW5kbGVyRmFsbGJhY2soaGFuZGxlcjogRGNzRmFsbGJhY2tIYW5kbGVyVHlwZSk6IHZvaWQge1xuICAgIHRoaXMuX2hhbmRsZXJGYiA9IGhhbmRsZXI7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZS5sZW5ndGgpIHtcbiAgICAgIHRoaXMudW5ob29rKGZhbHNlKTtcbiAgICB9XG4gICAgdGhpcy5fYWN0aXZlID0gRU1QVFlfSEFORExFUlM7XG4gICAgdGhpcy5faWRlbnQgPSAwO1xuICB9XG5cbiAgcHVibGljIGhvb2soaWRlbnQ6IG51bWJlciwgcGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgLy8gYWx3YXlzIHJlc2V0IGxlZnRvdmVyIGhhbmRsZXJzXG4gICAgdGhpcy5yZXNldCgpO1xuICAgIHRoaXMuX2lkZW50ID0gaWRlbnQ7XG4gICAgdGhpcy5fYWN0aXZlID0gdGhpcy5faGFuZGxlcnNbaWRlbnRdIHx8IEVNUFRZX0hBTkRMRVJTO1xuICAgIGlmICghdGhpcy5fYWN0aXZlLmxlbmd0aCkge1xuICAgICAgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkZW50LCAnSE9PSycsIHBhcmFtcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGogPSB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlW2pdLmhvb2socGFyYW1zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5fYWN0aXZlLmxlbmd0aCkge1xuICAgICAgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkZW50LCAnUFVUJywgdXRmMzJUb1N0cmluZyhkYXRhLCBzdGFydCwgZW5kKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGogPSB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlW2pdLnB1dChkYXRhLCBzdGFydCwgZW5kKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdW5ob29rKHN1Y2Nlc3M6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2FjdGl2ZS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZGVudCwgJ1VOSE9PSycsIHN1Y2Nlc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgaiA9IHRoaXMuX2FjdGl2ZS5sZW5ndGggLSAxO1xuICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmVbal0udW5ob29rKHN1Y2Nlc3MpICE9PSBmYWxzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBqLS07XG4gICAgICAvLyBjbGVhbnVwIGxlZnQgb3ZlciBoYW5kbGVyc1xuICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIHRoaXMuX2FjdGl2ZVtqXS51bmhvb2soZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9hY3RpdmUgPSBFTVBUWV9IQU5ETEVSUztcbiAgICB0aGlzLl9pZGVudCA9IDA7XG4gIH1cbn1cblxuLyoqXG4gKiBDb252ZW5pZW50IGNsYXNzIHRvIGNyZWF0ZSBhIERDUyBoYW5kbGVyIGZyb20gYSBzaW5nbGUgY2FsbGJhY2sgZnVuY3Rpb24uXG4gKiBOb3RlOiBUaGUgcGF5bG9hZCBpcyBjdXJyZW50bHkgbGltaXRlZCB0byA1MCBNQiAoaGFyZGNvZGVkKS5cbiAqL1xuZXhwb3J0IGNsYXNzIERjc0hhbmRsZXIgaW1wbGVtZW50cyBJRGNzSGFuZGxlciB7XG4gIHByaXZhdGUgX2RhdGEgPSAnJztcbiAgcHJpdmF0ZSBfcGFyYW1zOiBJUGFyYW1zIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9oaXRMaW1pdDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2hhbmRsZXI6IChkYXRhOiBzdHJpbmcsIHBhcmFtczogSVBhcmFtcykgPT4gYW55KSB7fVxuXG4gIHB1YmxpYyBob29rKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3BhcmFtcyA9IHBhcmFtcy5jbG9uZSgpO1xuICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICB0aGlzLl9oaXRMaW1pdCA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIHB1dChkYXRhOiBVaW50MzJBcnJheSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faGl0TGltaXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZGF0YSArPSB1dGYzMlRvU3RyaW5nKGRhdGEsIHN0YXJ0LCBlbmQpO1xuICAgIGlmICh0aGlzLl9kYXRhLmxlbmd0aCA+IFBBWUxPQURfTElNSVQpIHtcbiAgICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICAgIHRoaXMuX2hpdExpbWl0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdW5ob29rKHN1Y2Nlc3M6IGJvb2xlYW4pOiBhbnkge1xuICAgIGxldCByZXQ7XG4gICAgaWYgKHRoaXMuX2hpdExpbWl0KSB7XG4gICAgICByZXQgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgIHJldCA9IHRoaXMuX2hhbmRsZXIodGhpcy5fZGF0YSwgdGhpcy5fcGFyYW1zID8gdGhpcy5fcGFyYW1zIDogbmV3IFBhcmFtcygpKTtcbiAgICB9XG4gICAgdGhpcy5fcGFyYW1zID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICB0aGlzLl9oaXRMaW1pdCA9IGZhbHNlO1xuICAgIHJldHVybiByZXQ7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVBhcnNpbmdTdGF0ZSwgSURjc0hhbmRsZXIsIElFc2NhcGVTZXF1ZW5jZVBhcnNlciwgSVBhcmFtcywgSU9zY0hhbmRsZXIsIElIYW5kbGVyQ29sbGVjdGlvbiwgQ3NpSGFuZGxlclR5cGUsIE9zY0ZhbGxiYWNrSGFuZGxlclR5cGUsIElPc2NQYXJzZXIsIEVzY0hhbmRsZXJUeXBlLCBJRGNzUGFyc2VyLCBEY3NGYWxsYmFja0hhbmRsZXJUeXBlLCBJRnVuY3Rpb25JZGVudGlmaWVyLCBFeGVjdXRlRmFsbGJhY2tIYW5kbGVyVHlwZSwgQ3NpRmFsbGJhY2tIYW5kbGVyVHlwZSwgRXNjRmFsbGJhY2tIYW5kbGVyVHlwZSwgUHJpbnRIYW5kbGVyVHlwZSwgUHJpbnRGYWxsYmFja0hhbmRsZXJUeXBlLCBFeGVjdXRlSGFuZGxlclR5cGUgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcbmltcG9ydCB7IFBhcnNlclN0YXRlLCBQYXJzZXJBY3Rpb24gfSBmcm9tICdjb21tb24vcGFyc2VyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBmaWxsIH0gZnJvbSAnY29tbW9uL1R5cGVkQXJyYXlVdGlscyc7XG5pbXBvcnQgeyBQYXJhbXMgfSBmcm9tICdjb21tb24vcGFyc2VyL1BhcmFtcyc7XG5pbXBvcnQgeyBPc2NQYXJzZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL09zY1BhcnNlcic7XG5pbXBvcnQgeyBEY3NQYXJzZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL0Rjc1BhcnNlcic7XG5cbi8qKlxuICogVGFibGUgdmFsdWVzIGFyZSBnZW5lcmF0ZWQgbGlrZSB0aGlzOlxuICogICAgaW5kZXg6ICBjdXJyZW50U3RhdGUgPDwgVGFibGVWYWx1ZS5JTkRFWF9TVEFURV9TSElGVCB8IGNoYXJDb2RlXG4gKiAgICB2YWx1ZTogIGFjdGlvbiA8PCBUYWJsZVZhbHVlLlRSQU5TSVRJT05fQUNUSU9OX1NISUZUIHwgbmV4dFN0YXRlXG4gKi9cbmNvbnN0IGVudW0gVGFibGVBY2Nlc3Mge1xuICBUUkFOU0lUSU9OX0FDVElPTl9TSElGVCA9IDQsXG4gIFRSQU5TSVRJT05fU1RBVEVfTUFTSyA9IDE1LFxuICBJTkRFWF9TVEFURV9TSElGVCA9IDhcbn1cblxuLyoqXG4gKiBUcmFuc2l0aW9uIHRhYmxlIGZvciBFc2NhcGVTZXF1ZW5jZVBhcnNlci5cbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zaXRpb25UYWJsZSB7XG4gIHB1YmxpYyB0YWJsZTogVWludDhBcnJheTtcblxuICBjb25zdHJ1Y3RvcihsZW5ndGg6IG51bWJlcikge1xuICAgIHRoaXMudGFibGUgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBkZWZhdWx0IHRyYW5zaXRpb24uXG4gICAqIEBwYXJhbSBhY3Rpb24gZGVmYXVsdCBhY3Rpb25cbiAgICogQHBhcmFtIG5leHQgZGVmYXVsdCBuZXh0IHN0YXRlXG4gICAqL1xuICBwdWJsaWMgc2V0RGVmYXVsdChhY3Rpb246IFBhcnNlckFjdGlvbiwgbmV4dDogUGFyc2VyU3RhdGUpOiB2b2lkIHtcbiAgICBmaWxsKHRoaXMudGFibGUsIGFjdGlvbiA8PCBUYWJsZUFjY2Vzcy5UUkFOU0lUSU9OX0FDVElPTl9TSElGVCB8IG5leHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHRyYW5zaXRpb24gdG8gdGhlIHRyYW5zaXRpb24gdGFibGUuXG4gICAqIEBwYXJhbSBjb2RlIGlucHV0IGNoYXJhY3RlciBjb2RlXG4gICAqIEBwYXJhbSBzdGF0ZSBjdXJyZW50IHBhcnNlciBzdGF0ZVxuICAgKiBAcGFyYW0gYWN0aW9uIHBhcnNlciBhY3Rpb24gdG8gYmUgZG9uZVxuICAgKiBAcGFyYW0gbmV4dCBuZXh0IHBhcnNlciBzdGF0ZVxuICAgKi9cbiAgcHVibGljIGFkZChjb2RlOiBudW1iZXIsIHN0YXRlOiBQYXJzZXJTdGF0ZSwgYWN0aW9uOiBQYXJzZXJBY3Rpb24sIG5leHQ6IFBhcnNlclN0YXRlKTogdm9pZCB7XG4gICAgdGhpcy50YWJsZVtzdGF0ZSA8PCBUYWJsZUFjY2Vzcy5JTkRFWF9TVEFURV9TSElGVCB8IGNvZGVdID0gYWN0aW9uIDw8IFRhYmxlQWNjZXNzLlRSQU5TSVRJT05fQUNUSU9OX1NISUZUIHwgbmV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdHJhbnNpdGlvbnMgZm9yIG11bHRpcGxlIGlucHV0IGNoYXJhY3RlciBjb2Rlcy5cbiAgICogQHBhcmFtIGNvZGVzIGlucHV0IGNoYXJhY3RlciBjb2RlIGFycmF5XG4gICAqIEBwYXJhbSBzdGF0ZSBjdXJyZW50IHBhcnNlciBzdGF0ZVxuICAgKiBAcGFyYW0gYWN0aW9uIHBhcnNlciBhY3Rpb24gdG8gYmUgZG9uZVxuICAgKiBAcGFyYW0gbmV4dCBuZXh0IHBhcnNlciBzdGF0ZVxuICAgKi9cbiAgcHVibGljIGFkZE1hbnkoY29kZXM6IG51bWJlcltdLCBzdGF0ZTogUGFyc2VyU3RhdGUsIGFjdGlvbjogUGFyc2VyQWN0aW9uLCBuZXh0OiBQYXJzZXJTdGF0ZSk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMudGFibGVbc3RhdGUgPDwgVGFibGVBY2Nlc3MuSU5ERVhfU1RBVEVfU0hJRlQgfCBjb2Rlc1tpXV0gPSBhY3Rpb24gPDwgVGFibGVBY2Nlc3MuVFJBTlNJVElPTl9BQ1RJT05fU0hJRlQgfCBuZXh0O1xuICAgIH1cbiAgfVxufVxuXG5cbi8vIFBzZXVkby1jaGFyYWN0ZXIgcGxhY2Vob2xkZXIgZm9yIHByaW50YWJsZSBub24tYXNjaWkgY2hhcmFjdGVycyAodW5pY29kZSkuXG5jb25zdCBOT05fQVNDSUlfUFJJTlRBQkxFID0gMHhBMDtcblxuXG4vKipcbiAqIFZUNTAwIGNvbXBhdGlibGUgdHJhbnNpdGlvbiB0YWJsZS5cbiAqIFRha2VuIGZyb20gaHR0cHM6Ly92dDEwMC5uZXQvZW11L2RlY19hbnNpX3BhcnNlci5cbiAqL1xuZXhwb3J0IGNvbnN0IFZUNTAwX1RSQU5TSVRJT05fVEFCTEUgPSAoZnVuY3Rpb24gKCk6IFRyYW5zaXRpb25UYWJsZSB7XG4gIGNvbnN0IHRhYmxlOiBUcmFuc2l0aW9uVGFibGUgPSBuZXcgVHJhbnNpdGlvblRhYmxlKDQwOTUpO1xuXG4gIC8vIHJhbmdlIG1hY3JvIGZvciBieXRlXG4gIGNvbnN0IEJZVEVfVkFMVUVTID0gMjU2O1xuICBjb25zdCBibHVlcHJpbnQgPSBBcnJheS5hcHBseShudWxsLCBBcnJheShCWVRFX1ZBTFVFUykpLm1hcCgodW51c2VkOiBhbnksIGk6IG51bWJlcikgPT4gaSk7XG4gIGNvbnN0IHIgPSAoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpID0+IGJsdWVwcmludC5zbGljZShzdGFydCwgZW5kKTtcblxuICAvLyBEZWZhdWx0IGRlZmluaXRpb25zLlxuICBjb25zdCBQUklOVEFCTEVTID0gcigweDIwLCAweDdmKTsgLy8gMHgyMCAoU1ApIGluY2x1ZGVkLCAweDdGIChERUwpIGV4Y2x1ZGVkXG4gIGNvbnN0IEVYRUNVVEFCTEVTID0gcigweDAwLCAweDE4KTtcbiAgRVhFQ1VUQUJMRVMucHVzaCgweDE5KTtcbiAgRVhFQ1VUQUJMRVMucHVzaC5hcHBseShFWEVDVVRBQkxFUywgcigweDFjLCAweDIwKSk7XG5cbiAgY29uc3Qgc3RhdGVzOiBudW1iZXJbXSA9IHIoUGFyc2VyU3RhdGUuR1JPVU5ELCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0ggKyAxKTtcbiAgbGV0IHN0YXRlOiBhbnk7XG5cbiAgLy8gc2V0IGRlZmF1bHQgdHJhbnNpdGlvblxuICB0YWJsZS5zZXREZWZhdWx0KFBhcnNlckFjdGlvbi5FUlJPUiwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgLy8gcHJpbnRhYmxlc1xuICB0YWJsZS5hZGRNYW55KFBSSU5UQUJMRVMsIFBhcnNlclN0YXRlLkdST1VORCwgUGFyc2VyQWN0aW9uLlBSSU5ULCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAvLyBnbG9iYWwgYW55d2hlcmUgcnVsZXNcbiAgZm9yIChzdGF0ZSBpbiBzdGF0ZXMpIHtcbiAgICB0YWJsZS5hZGRNYW55KFsweDE4LCAweDFhLCAweDk5LCAweDlhXSwgc3RhdGUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAgIHRhYmxlLmFkZE1hbnkocigweDgwLCAweDkwKSwgc3RhdGUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAgIHRhYmxlLmFkZE1hbnkocigweDkwLCAweDk4KSwgc3RhdGUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAgIHRhYmxlLmFkZCgweDljLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuR1JPVU5EKTsgLy8gU1QgYXMgdGVybWluYXRvclxuICAgIHRhYmxlLmFkZCgweDFiLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5FU0NBUEUpOyAgLy8gRVNDXG4gICAgdGFibGUuYWRkKDB4OWQsIHN0YXRlLCBQYXJzZXJBY3Rpb24uT1NDX1NUQVJULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTsgIC8vIE9TQ1xuICAgIHRhYmxlLmFkZE1hbnkoWzB4OTgsIDB4OWUsIDB4OWZdLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcpO1xuICAgIHRhYmxlLmFkZCgweDliLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpOyAgLy8gQ1NJXG4gICAgdGFibGUuYWRkKDB4OTAsIHN0YXRlLCBQYXJzZXJBY3Rpb24uQ0xFQVIsIFBhcnNlclN0YXRlLkRDU19FTlRSWSk7ICAvLyBEQ1NcbiAgfVxuICAvLyBydWxlcyBmb3IgZXhlY3V0YWJsZXMgYW5kIDdmXG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkdST1VORCwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkVTQ0FQRSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkVTQ0FQRSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlksIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0sIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0pO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFKTtcbiAgLy8gb3NjXG4gIHRhYmxlLmFkZCgweDVkLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5PU0NfU1RBUlQsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICB0YWJsZS5hZGRNYW55KFBSSU5UQUJMRVMsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfUFVULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfUFVULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTtcbiAgdGFibGUuYWRkTWFueShbMHg5YywgMHgxYiwgMHgxOCwgMHgxYSwgMHgwN10sIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfRU5ELCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgxYywgMHgyMCksIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICAvLyBzb3MvcG0vYXBjIGRvZXMgbm90aGluZ1xuICB0YWJsZS5hZGRNYW55KFsweDU4LCAweDVlLCAweDVmXSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5TT1NfUE1fQVBDX1NUUklORyk7XG4gIHRhYmxlLmFkZE1hbnkoUFJJTlRBQkxFUywgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgdGFibGUuYWRkKDB4OWMsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgLy8gY3NpIGVudHJpZXNcbiAgdGFibGUuYWRkKDB4NWIsIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkNTSV9FTlRSWSwgUGFyc2VyQWN0aW9uLkNTSV9ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4M2MpLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlksIFBhcnNlckFjdGlvbi5QQVJBTSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShbMHgzYywgMHgzZCwgMHgzZSwgMHgzZl0sIFBhcnNlclN0YXRlLkNTSV9FTlRSWSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkNTSV9QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDNjKSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uUEFSQU0sIFBhcnNlclN0YXRlLkNTSV9QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDQwLCAweDdmKSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uQ1NJX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KFsweDNjLCAweDNkLCAweDNlLCAweDNmXSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4NDApLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkNTSV9JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHg0MCksIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5DU0lfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSk7XG4gIC8vIGVzY19pbnRlcm1lZGlhdGVcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDdmKSwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkVTQ19ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4NTApLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5FU0NfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDUxLCAweDU4KSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KFsweDU5LCAweDVhLCAweDVjXSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg2MCwgMHg3ZiksIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkVTQ19ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgLy8gZGNzIGVudHJ5XG4gIHRhYmxlLmFkZCgweDUwLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5DTEVBUiwgUGFyc2VyU3RhdGUuRENTX0VOVFJZKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlkpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgxYywgMHgyMCksIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0VOVFJZKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4M2MpLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5QQVJBTSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShbMHgzYywgMHgzZCwgMHgzZSwgMHgzZl0sIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkRDU19JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHg4MCksIFBhcnNlclN0YXRlLkRDU19JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgxYywgMHgyMCksIFBhcnNlclN0YXRlLkRDU19JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDFjLCAweDIwKSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHgzYyksIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLlBBUkFNLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KFsweDNjLCAweDNkLCAweDNlLCAweDNmXSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MWMsIDB4MjApLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDQwKSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDQwLCAweDdmKSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkRDU19IT09LLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLkRDU19IT09LLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLkRDU19IT09LLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gsIFBhcnNlckFjdGlvbi5EQ1NfUFVULCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KFBSSU5UQUJMRVMsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCwgUGFyc2VyQWN0aW9uLkRDU19QVVQsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCk7XG4gIHRhYmxlLmFkZE1hbnkoWzB4MWIsIDB4OWMsIDB4MTgsIDB4MWFdLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gsIFBhcnNlckFjdGlvbi5EQ1NfVU5IT09LLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAvLyBzcGVjaWFsIGhhbmRsaW5nIG9mIHVuaWNvZGUgY2hhcnNcbiAgdGFibGUuYWRkKE5PTl9BU0NJSV9QUklOVEFCTEUsIFBhcnNlclN0YXRlLkdST1VORCwgUGFyc2VyQWN0aW9uLlBSSU5ULCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGQoTk9OX0FTQ0lJX1BSSU5UQUJMRSwgUGFyc2VyU3RhdGUuT1NDX1NUUklORywgUGFyc2VyQWN0aW9uLk9TQ19QVVQsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICB0YWJsZS5hZGQoTk9OX0FTQ0lJX1BSSU5UQUJMRSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZChOT05fQVNDSUlfUFJJTlRBQkxFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFKTtcbiAgdGFibGUuYWRkKE5PTl9BU0NJSV9QUklOVEFCTEUsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCwgUGFyc2VyQWN0aW9uLkRDU19QVVQsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCk7XG4gIHJldHVybiB0YWJsZTtcbn0pKCk7XG5cblxuLyoqXG4gKiBFc2NhcGVTZXF1ZW5jZVBhcnNlci5cbiAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgQU5TSS9ERUMgY29tcGF0aWJsZSBwYXJzZXIgZGVzY3JpYmVkIGJ5XG4gKiBQYXVsIFdpbGxpYW1zIChodHRwczovL3Z0MTAwLm5ldC9lbXUvZGVjX2Fuc2lfcGFyc2VyKS5cbiAqXG4gKiBUbyBpbXBsZW1lbnQgY3VzdG9tIEFOU0kgY29tcGxpYW50IGVzY2FwZSBzZXF1ZW5jZXMgaXQgaXMgbm90IG5lZWRlZCB0b1xuICogYWx0ZXIgdGhpcyBwYXJzZXIsIGluc3RlYWQgY29uc2lkZXIgcmVnaXN0ZXJpbmcgYSBjdXN0b20gaGFuZGxlci5cbiAqIEZvciBub24gQU5TSSBjb21wbGlhbnQgc2VxdWVuY2VzIGNoYW5nZSB0aGUgdHJhbnNpdGlvbiB0YWJsZSB3aXRoXG4gKiB0aGUgb3B0aW9uYWwgYHRyYW5zaXRpb25zYCBjb25zdHJ1Y3RvciBhcmd1bWVudCBhbmRcbiAqIHJlaW1wbGVtZW50IHRoZSBgcGFyc2VgIG1ldGhvZC5cbiAqXG4gKiBUaGlzIHBhcnNlciBpcyBjdXJyZW50bHkgaGFyZGNvZGVkIHRvIG9wZXJhdGUgaW4gWkRNIChaZXJvIERlZmF1bHQgTW9kZSlcbiAqIGFzIHN1Z2dlc3RlZCBieSB0aGUgb3JpZ2luYWwgcGFyc2VyLCB0aHVzIGVtcHR5IHBhcmFtZXRlcnMgYXJlIHNldCB0byAwLlxuICogVGhpcyB0aGlzIGlzIG5vdCBpbiBsaW5lIHdpdGggdGhlIGxhdGVzdCBFQ01BLTQ4IHNwZWNpZmljYXRpb25cbiAqIChaRE0gd2FzIHBhcnQgb2YgdGhlIGVhcmx5IHNwZWNzIGFuZCBnb3QgY29tcGxldGVseSByZW1vdmVkIGxhdGVyIG9uKS5cbiAqXG4gKiBPdGhlciB0aGFuIHRoZSBvcmlnaW5hbCBwYXJzZXIgZnJvbSB2dDEwMC5uZXQgdGhpcyBwYXJzZXIgc3VwcG9ydHNcbiAqIHN1YiBwYXJhbWV0ZXJzIGluIGRpZ2l0YWwgcGFyYW1ldGVycyBzZXBhcmF0ZWQgYnkgY29sb25zLiBFbXB0eSBzdWIgcGFyYW1ldGVyc1xuICogYXJlIHNldCB0byAtMSAobm8gWkRNIGZvciBzdWIgcGFyYW1ldGVycykuXG4gKlxuICogQWJvdXQgcHJlZml4IGFuZCBpbnRlcm1lZGlhdGUgYnl0ZXM6XG4gKiBUaGlzIHBhcnNlciBmb2xsb3dzIHRoZSBhc3N1bXB0aW9ucyBvZiB0aGUgdnQxMDAubmV0IHBhcnNlciB3aXRoIHRoZXNlIHJlc3RyaWN0aW9uczpcbiAqIC0gb25seSBvbmUgcHJlZml4IGJ5dGUgaXMgYWxsb3dlZCBhcyBmaXJzdCBwYXJhbWV0ZXIgYnl0ZSwgYnl0ZSByYW5nZSAweDNjIC4uIDB4M2ZcbiAqIC0gbWF4LiB0d28gaW50ZXJtZWRpYXRlcyBhcmUgcmVzcGVjdGVkLCBieXRlIHJhbmdlIDB4MjAgLi4gMHgyZlxuICogTm90ZSB0aGF0IHRoaXMgaXMgbm90IGluIGxpbmUgd2l0aCBFQ01BLTQ4IHdoaWNoIGRvZXMgbm90IGxpbWl0IGVpdGhlciBvZiB0aG9zZS5cbiAqIEZ1cnRoZXJtb3JlIEVDTUEtNDggYWxsb3dzIHRoZSBwcmVmaXggYnl0ZSByYW5nZSBhdCBhbnkgcGFyYW0gYnl0ZSBwb3NpdGlvbi4gQ3VycmVudGx5XG4gKiB0aGVyZSBhcmUgbm8ga25vd24gc2VxdWVuY2VzIHRoYXQgZm9sbG93IHRoZSBicm9hZGVyIGRlZmluaXRpb24gb2YgdGhlIHNwZWNpZmljYXRpb24uXG4gKlxuICogVE9ETzogaW1wbGVtZW50IGVycm9yIHJlY292ZXJ5IGhvb2sgdmlhIGVycm9yIGhhbmRsZXIgcmV0dXJuIHZhbHVlc1xuICovXG5leHBvcnQgY2xhc3MgRXNjYXBlU2VxdWVuY2VQYXJzZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUVzY2FwZVNlcXVlbmNlUGFyc2VyIHtcbiAgcHVibGljIGluaXRpYWxTdGF0ZTogbnVtYmVyO1xuICBwdWJsaWMgY3VycmVudFN0YXRlOiBudW1iZXI7XG4gIHB1YmxpYyBwcmVjZWRpbmdDb2RlcG9pbnQ6IG51bWJlcjtcblxuICAvLyBidWZmZXJzIG92ZXIgc2V2ZXJhbCBwYXJzZSBjYWxsc1xuICBwcm90ZWN0ZWQgX3BhcmFtczogUGFyYW1zO1xuICBwcm90ZWN0ZWQgX2NvbGxlY3Q6IG51bWJlcjtcblxuICAvLyBoYW5kbGVyIGxvb2t1cCBjb250YWluZXJzXG4gIHByb3RlY3RlZCBfcHJpbnRIYW5kbGVyOiBQcmludEhhbmRsZXJUeXBlO1xuICBwcm90ZWN0ZWQgX2V4ZWN1dGVIYW5kbGVyczoge1tmbGFnOiBudW1iZXJdOiBFeGVjdXRlSGFuZGxlclR5cGV9O1xuICBwcm90ZWN0ZWQgX2NzaUhhbmRsZXJzOiBJSGFuZGxlckNvbGxlY3Rpb248Q3NpSGFuZGxlclR5cGU+O1xuICBwcm90ZWN0ZWQgX2VzY0hhbmRsZXJzOiBJSGFuZGxlckNvbGxlY3Rpb248RXNjSGFuZGxlclR5cGU+O1xuICBwcm90ZWN0ZWQgX29zY1BhcnNlcjogSU9zY1BhcnNlcjtcbiAgcHJvdGVjdGVkIF9kY3NQYXJzZXI6IElEY3NQYXJzZXI7XG4gIHByb3RlY3RlZCBfZXJyb3JIYW5kbGVyOiAoc3RhdGU6IElQYXJzaW5nU3RhdGUpID0+IElQYXJzaW5nU3RhdGU7XG5cbiAgLy8gZmFsbGJhY2sgaGFuZGxlcnNcbiAgcHJvdGVjdGVkIF9wcmludEhhbmRsZXJGYjogUHJpbnRGYWxsYmFja0hhbmRsZXJUeXBlO1xuICBwcm90ZWN0ZWQgX2V4ZWN1dGVIYW5kbGVyRmI6IEV4ZWN1dGVGYWxsYmFja0hhbmRsZXJUeXBlO1xuICBwcm90ZWN0ZWQgX2NzaUhhbmRsZXJGYjogQ3NpRmFsbGJhY2tIYW5kbGVyVHlwZTtcbiAgcHJvdGVjdGVkIF9lc2NIYW5kbGVyRmI6IEVzY0ZhbGxiYWNrSGFuZGxlclR5cGU7XG4gIHByb3RlY3RlZCBfZXJyb3JIYW5kbGVyRmI6IChzdGF0ZTogSVBhcnNpbmdTdGF0ZSkgPT4gSVBhcnNpbmdTdGF0ZTtcblxuICBjb25zdHJ1Y3RvcihyZWFkb25seSBUUkFOU0lUSU9OUzogVHJhbnNpdGlvblRhYmxlID0gVlQ1MDBfVFJBTlNJVElPTl9UQUJMRSkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLmluaXRpYWxTdGF0ZSA9IFBhcnNlclN0YXRlLkdST1VORDtcbiAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRoaXMuaW5pdGlhbFN0YXRlO1xuICAgIHRoaXMuX3BhcmFtcyA9IG5ldyBQYXJhbXMoKTsgLy8gZGVmYXVsdHMgdG8gMzIgc3RvcmFibGUgcGFyYW1zL3N1YnBhcmFtc1xuICAgIHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTsgICAgLy8gWkRNXG4gICAgdGhpcy5fY29sbGVjdCA9IDA7XG4gICAgdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQgPSAwO1xuXG4gICAgLy8gc2V0IGRlZmF1bHQgZmFsbGJhY2sgaGFuZGxlcnMgYW5kIGhhbmRsZXIgbG9va3VwIGNvbnRhaW5lcnNcbiAgICB0aGlzLl9wcmludEhhbmRsZXJGYiA9IChkYXRhLCBzdGFydCwgZW5kKTogdm9pZCA9PiB7IH07XG4gICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJGYiA9IChjb2RlOiBudW1iZXIpOiB2b2lkID0+IHsgfTtcbiAgICB0aGlzLl9jc2lIYW5kbGVyRmIgPSAoaWRlbnQ6IG51bWJlciwgcGFyYW1zOiBJUGFyYW1zKTogdm9pZCA9PiB7IH07XG4gICAgdGhpcy5fZXNjSGFuZGxlckZiID0gKGlkZW50OiBudW1iZXIpOiB2b2lkID0+IHsgfTtcbiAgICB0aGlzLl9lcnJvckhhbmRsZXJGYiA9IChzdGF0ZTogSVBhcnNpbmdTdGF0ZSk6IElQYXJzaW5nU3RhdGUgPT4gc3RhdGU7XG4gICAgdGhpcy5fcHJpbnRIYW5kbGVyID0gdGhpcy5fcHJpbnRIYW5kbGVyRmI7XG4gICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9jc2lIYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fZXNjSGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX29zY1BhcnNlciA9IG5ldyBPc2NQYXJzZXIoKTtcbiAgICB0aGlzLl9kY3NQYXJzZXIgPSBuZXcgRGNzUGFyc2VyKCk7XG4gICAgdGhpcy5fZXJyb3JIYW5kbGVyID0gdGhpcy5fZXJyb3JIYW5kbGVyRmI7XG5cbiAgICAvLyBzd2FsbG93IDdiaXQgU1QgKEVTQytcXClcbiAgICB0aGlzLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnXFxcXCd9LCAoKSA9PiB7fSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2lkZW50aWZpZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGZpbmFsUmFuZ2U6IG51bWJlcltdID0gWzB4NDAsIDB4N2VdKTogbnVtYmVyIHtcbiAgICBsZXQgcmVzID0gMDtcbiAgICBpZiAoaWQucHJlZml4KSB7XG4gICAgICBpZiAoaWQucHJlZml4Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvbmx5IG9uZSBieXRlIGFzIHByZWZpeCBzdXBwb3J0ZWQnKTtcbiAgICAgIH1cbiAgICAgIHJlcyA9IGlkLnByZWZpeC5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKHJlcyAmJiAweDNjID4gcmVzIHx8IHJlcyA+IDB4M2YpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcmVmaXggbXVzdCBiZSBpbiByYW5nZSAweDNjIC4uIDB4M2YnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlkLmludGVybWVkaWF0ZXMpIHtcbiAgICAgIGlmIChpZC5pbnRlcm1lZGlhdGVzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvbmx5IHR3byBieXRlcyBhcyBpbnRlcm1lZGlhdGVzIGFyZSBzdXBwb3J0ZWQnKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWQuaW50ZXJtZWRpYXRlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBpbnRlcm1lZGlhdGUgPSBpZC5pbnRlcm1lZGlhdGVzLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmICgweDIwID4gaW50ZXJtZWRpYXRlIHx8IGludGVybWVkaWF0ZSA+IDB4MmYpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludGVybWVkaWF0ZSBtdXN0IGJlIGluIHJhbmdlIDB4MjAgLi4gMHgyZicpO1xuICAgICAgICB9XG4gICAgICAgIHJlcyA8PD0gODtcbiAgICAgICAgcmVzIHw9IGludGVybWVkaWF0ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlkLmZpbmFsLmxlbmd0aCAhPT0gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdmaW5hbCBtdXN0IGJlIGEgc2luZ2xlIGJ5dGUnKTtcbiAgICB9XG4gICAgY29uc3QgZmluYWxDb2RlID0gaWQuZmluYWwuY2hhckNvZGVBdCgwKTtcbiAgICBpZiAoZmluYWxSYW5nZVswXSA+IGZpbmFsQ29kZSB8fCBmaW5hbENvZGUgPiBmaW5hbFJhbmdlWzFdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGZpbmFsIG11c3QgYmUgaW4gcmFuZ2UgJHtmaW5hbFJhbmdlWzBdfSAuLiAke2ZpbmFsUmFuZ2VbMV19YCk7XG4gICAgfVxuICAgIHJlcyA8PD0gODtcbiAgICByZXMgfD0gZmluYWxDb2RlO1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIHB1YmxpYyBpZGVudFRvU3RyaW5nKGlkZW50OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IHJlczogc3RyaW5nW10gPSBbXTtcbiAgICB3aGlsZSAoaWRlbnQpIHtcbiAgICAgIHJlcy5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaWRlbnQgJiAweEZGKSk7XG4gICAgICBpZGVudCA+Pj0gODtcbiAgICB9XG4gICAgcmV0dXJuIHJlcy5yZXZlcnNlKCkuam9pbignJyk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9jc2lIYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9lc2NIYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fb3NjUGFyc2VyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl9kY3NQYXJzZXIuZGlzcG9zZSgpO1xuICB9XG5cbiAgcHVibGljIHNldFByaW50SGFuZGxlcihoYW5kbGVyOiBQcmludEhhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fcHJpbnRIYW5kbGVyID0gaGFuZGxlcjtcbiAgfVxuICBwdWJsaWMgY2xlYXJQcmludEhhbmRsZXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcHJpbnRIYW5kbGVyID0gdGhpcy5fcHJpbnRIYW5kbGVyRmI7XG4gIH1cblxuICBwdWJsaWMgYWRkRXNjSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgaGFuZGxlcjogRXNjSGFuZGxlclR5cGUpOiBJRGlzcG9zYWJsZSB7XG4gICAgY29uc3QgaWRlbnQgPSB0aGlzLl9pZGVudGlmaWVyKGlkLCBbMHgzMCwgMHg3ZV0pO1xuICAgIGlmICh0aGlzLl9lc2NIYW5kbGVyc1tpZGVudF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fZXNjSGFuZGxlcnNbaWRlbnRdID0gW107XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZXJMaXN0ID0gdGhpcy5fZXNjSGFuZGxlcnNbaWRlbnRdO1xuICAgIGhhbmRsZXJMaXN0LnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlckluZGV4ID0gaGFuZGxlckxpc3QuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGhhbmRsZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBoYW5kbGVyTGlzdC5zcGxpY2UoaGFuZGxlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgcHVibGljIHNldEVzY0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGhhbmRsZXI6IEVzY0hhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fZXNjSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihpZCwgWzB4MzAsIDB4N2VdKV0gPSBbaGFuZGxlcl07XG4gIH1cbiAgcHVibGljIGNsZWFyRXNjSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9lc2NIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGlkLCBbMHgzMCwgMHg3ZV0pXSkgZGVsZXRlIHRoaXMuX2VzY0hhbmRsZXJzW3RoaXMuX2lkZW50aWZpZXIoaWQsIFsweDMwLCAweDdlXSldO1xuICB9XG4gIHB1YmxpYyBzZXRFc2NIYW5kbGVyRmFsbGJhY2soaGFuZGxlcjogRXNjRmFsbGJhY2tIYW5kbGVyVHlwZSk6IHZvaWQge1xuICAgIHRoaXMuX2VzY0hhbmRsZXJGYiA9IGhhbmRsZXI7XG4gIH1cblxuICBwdWJsaWMgc2V0RXhlY3V0ZUhhbmRsZXIoZmxhZzogc3RyaW5nLCBoYW5kbGVyOiBFeGVjdXRlSGFuZGxlclR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLl9leGVjdXRlSGFuZGxlcnNbZmxhZy5jaGFyQ29kZUF0KDApXSA9IGhhbmRsZXI7XG4gIH1cbiAgcHVibGljIGNsZWFyRXhlY3V0ZUhhbmRsZXIoZmxhZzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tmbGFnLmNoYXJDb2RlQXQoMCldKSBkZWxldGUgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzW2ZsYWcuY2hhckNvZGVBdCgwKV07XG4gIH1cbiAgcHVibGljIHNldEV4ZWN1dGVIYW5kbGVyRmFsbGJhY2soaGFuZGxlcjogRXhlY3V0ZUZhbGxiYWNrSGFuZGxlclR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLl9leGVjdXRlSGFuZGxlckZiID0gaGFuZGxlcjtcbiAgfVxuXG4gIHB1YmxpYyBhZGRDc2lIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBoYW5kbGVyOiBDc2lIYW5kbGVyVHlwZSk6IElEaXNwb3NhYmxlIHtcbiAgICBjb25zdCBpZGVudCA9IHRoaXMuX2lkZW50aWZpZXIoaWQpO1xuICAgIGlmICh0aGlzLl9jc2lIYW5kbGVyc1tpZGVudF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fY3NpSGFuZGxlcnNbaWRlbnRdID0gW107XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZXJMaXN0ID0gdGhpcy5fY3NpSGFuZGxlcnNbaWRlbnRdO1xuICAgIGhhbmRsZXJMaXN0LnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlckluZGV4ID0gaGFuZGxlckxpc3QuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGhhbmRsZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBoYW5kbGVyTGlzdC5zcGxpY2UoaGFuZGxlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgcHVibGljIHNldENzaUhhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGhhbmRsZXI6IENzaUhhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihpZCldID0gW2hhbmRsZXJdO1xuICB9XG4gIHB1YmxpYyBjbGVhckNzaUhhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihpZCldKSBkZWxldGUgdGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihpZCldO1xuICB9XG4gIHB1YmxpYyBzZXRDc2lIYW5kbGVyRmFsbGJhY2soY2FsbGJhY2s6IChpZGVudDogbnVtYmVyLCBwYXJhbXM6IElQYXJhbXMpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl9jc2lIYW5kbGVyRmIgPSBjYWxsYmFjaztcbiAgfVxuXG4gIHB1YmxpYyBhZGREY3NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBoYW5kbGVyOiBJRGNzSGFuZGxlcik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fZGNzUGFyc2VyLmFkZEhhbmRsZXIodGhpcy5faWRlbnRpZmllcihpZCksIGhhbmRsZXIpO1xuICB9XG4gIHB1YmxpYyBzZXREY3NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBoYW5kbGVyOiBJRGNzSGFuZGxlcik6IHZvaWQge1xuICAgIHRoaXMuX2Rjc1BhcnNlci5zZXRIYW5kbGVyKHRoaXMuX2lkZW50aWZpZXIoaWQpLCBoYW5kbGVyKTtcbiAgfVxuICBwdWJsaWMgY2xlYXJEY3NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyKTogdm9pZCB7XG4gICAgdGhpcy5fZGNzUGFyc2VyLmNsZWFySGFuZGxlcih0aGlzLl9pZGVudGlmaWVyKGlkKSk7XG4gIH1cbiAgcHVibGljIHNldERjc0hhbmRsZXJGYWxsYmFjayhoYW5kbGVyOiBEY3NGYWxsYmFja0hhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fZGNzUGFyc2VyLnNldEhhbmRsZXJGYWxsYmFjayhoYW5kbGVyKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIsIGhhbmRsZXI6IElPc2NIYW5kbGVyKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9vc2NQYXJzZXIuYWRkSGFuZGxlcihpZGVudCwgaGFuZGxlcik7XG4gIH1cbiAgcHVibGljIHNldE9zY0hhbmRsZXIoaWRlbnQ6IG51bWJlciwgaGFuZGxlcjogSU9zY0hhbmRsZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9vc2NQYXJzZXIuc2V0SGFuZGxlcihpZGVudCwgaGFuZGxlcik7XG4gIH1cbiAgcHVibGljIGNsZWFyT3NjSGFuZGxlcihpZGVudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fb3NjUGFyc2VyLmNsZWFySGFuZGxlcihpZGVudCk7XG4gIH1cbiAgcHVibGljIHNldE9zY0hhbmRsZXJGYWxsYmFjayhoYW5kbGVyOiBPc2NGYWxsYmFja0hhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fb3NjUGFyc2VyLnNldEhhbmRsZXJGYWxsYmFjayhoYW5kbGVyKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRFcnJvckhhbmRsZXIoY2FsbGJhY2s6IChzdGF0ZTogSVBhcnNpbmdTdGF0ZSkgPT4gSVBhcnNpbmdTdGF0ZSk6IHZvaWQge1xuICAgIHRoaXMuX2Vycm9ySGFuZGxlciA9IGNhbGxiYWNrO1xuICB9XG4gIHB1YmxpYyBjbGVhckVycm9ySGFuZGxlcigpOiB2b2lkIHtcbiAgICB0aGlzLl9lcnJvckhhbmRsZXIgPSB0aGlzLl9lcnJvckhhbmRsZXJGYjtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRoaXMuaW5pdGlhbFN0YXRlO1xuICAgIHRoaXMuX29zY1BhcnNlci5yZXNldCgpO1xuICAgIHRoaXMuX2Rjc1BhcnNlci5yZXNldCgpO1xuICAgIHRoaXMuX3BhcmFtcy5yZXNldCgpO1xuICAgIHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTsgLy8gWkRNXG4gICAgdGhpcy5fY29sbGVjdCA9IDA7XG4gICAgdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQgPSAwO1xuICB9XG5cblxuXG4gIC8qKlxuICAgKiBQYXJzZSBVVEYzMiBjb2RlcG9pbnRzIGluIGBkYXRhYCB1cCB0byBgbGVuZ3RoYC5cbiAgICpcbiAgICogTm90ZTogRm9yIHNldmVyYWwgYWN0aW9ucyB3aXRoIGhpZ2ggZGF0YSBsb2FkIHRoZSBwYXJzaW5nIGlzIG9wdGltaXplZFxuICAgKiBieSB1c2luZyBsb2NhbCByZWFkIGFoZWFkIGxvb3BzIHdpdGggaGFyZGNvZGVkIGNvbmRpdGlvbnMgdG9cbiAgICogYXZvaWQgY29zdGx5IHRhYmxlIGxvb2t1cHMuIE1ha2Ugc3VyZSB0aGF0IGFueSBjaGFuZ2Ugb2YgdGFibGUgdmFsdWVzXG4gICAqIHdpbGwgYmUgcmVmbGVjdGVkIGluIHRoZSBsb29wIGNvbmRpdGlvbnMgYXMgd2VsbCBhbmQgdmljZSB2ZXJzYS5cbiAgICogQWZmZWN0ZWQgc3RhdGVzL2FjdGlvbnM6XG4gICAqIC0gR1JPVU5EOlBSSU5UXG4gICAqIC0gQ1NJX1BBUkFNOlBBUkFNXG4gICAqIC0gRENTX1BBUkFNOlBBUkFNXG4gICAqIC0gT1NDX1NUUklORzpPU0NfUFVUXG4gICAqIC0gRENTX1BBU1NUSFJPVUdIOkRDU19QVVRcbiAgICovXG4gIHB1YmxpYyBwYXJzZShkYXRhOiBVaW50MzJBcnJheSwgbGVuZ3RoOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgY29kZSA9IDA7XG4gICAgbGV0IHRyYW5zaXRpb24gPSAwO1xuICAgIGxldCBjdXJyZW50U3RhdGUgPSB0aGlzLmN1cnJlbnRTdGF0ZTtcbiAgICBjb25zdCBvc2MgPSB0aGlzLl9vc2NQYXJzZXI7XG4gICAgY29uc3QgZGNzID0gdGhpcy5fZGNzUGFyc2VyO1xuICAgIGxldCBjb2xsZWN0ID0gdGhpcy5fY29sbGVjdDtcbiAgICBjb25zdCBwYXJhbXMgPSB0aGlzLl9wYXJhbXM7XG4gICAgY29uc3QgdGFibGU6IFVpbnQ4QXJyYXkgPSB0aGlzLlRSQU5TSVRJT05TLnRhYmxlO1xuXG4gICAgLy8gcHJvY2VzcyBpbnB1dCBzdHJpbmdcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICBjb2RlID0gZGF0YVtpXTtcblxuICAgICAgLy8gbm9ybWFsIHRyYW5zaXRpb24gJiBhY3Rpb24gbG9va3VwXG4gICAgICB0cmFuc2l0aW9uID0gdGFibGVbY3VycmVudFN0YXRlIDw8IFRhYmxlQWNjZXNzLklOREVYX1NUQVRFX1NISUZUIHwgKGNvZGUgPCAweGEwID8gY29kZSA6IE5PTl9BU0NJSV9QUklOVEFCTEUpXTtcbiAgICAgIHN3aXRjaCAodHJhbnNpdGlvbiA+PiBUYWJsZUFjY2Vzcy5UUkFOU0lUSU9OX0FDVElPTl9TSElGVCkge1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5QUklOVDpcbiAgICAgICAgICAvLyByZWFkIGFoZWFkIHdpdGggbG9vcCB1bnJvbGxpbmdcbiAgICAgICAgICAvLyBOb3RlOiAweDIwIChTUCkgaXMgaW5jbHVkZWQsIDB4N0YgKERFTCkgaXMgZXhjbHVkZWRcbiAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IDsgKytqKSB7XG4gICAgICAgICAgICBpZiAoaiA+PSBsZW5ndGggfHwgKGNvZGUgPSBkYXRhW2pdKSA8IDB4MjAgfHwgKGNvZGUgPiAweDdlICYmIGNvZGUgPCBOT05fQVNDSUlfUFJJTlRBQkxFKSkge1xuICAgICAgICAgICAgICB0aGlzLl9wcmludEhhbmRsZXIoZGF0YSwgaSwgaik7XG4gICAgICAgICAgICAgIGkgPSBqIC0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKytqID49IGxlbmd0aCB8fCAoY29kZSA9IGRhdGFbal0pIDwgMHgyMCB8fCAoY29kZSA+IDB4N2UgJiYgY29kZSA8IE5PTl9BU0NJSV9QUklOVEFCTEUpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3ByaW50SGFuZGxlcihkYXRhLCBpLCBqKTtcbiAgICAgICAgICAgICAgaSA9IGogLSAxO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgrK2ogPj0gbGVuZ3RoIHx8IChjb2RlID0gZGF0YVtqXSkgPCAweDIwIHx8IChjb2RlID4gMHg3ZSAmJiBjb2RlIDwgTk9OX0FTQ0lJX1BSSU5UQUJMRSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcHJpbnRIYW5kbGVyKGRhdGEsIGksIGopO1xuICAgICAgICAgICAgICBpID0gaiAtIDE7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCsraiA+PSBsZW5ndGggfHwgKGNvZGUgPSBkYXRhW2pdKSA8IDB4MjAgfHwgKGNvZGUgPiAweDdlICYmIGNvZGUgPCBOT05fQVNDSUlfUFJJTlRBQkxFKSkge1xuICAgICAgICAgICAgICB0aGlzLl9wcmludEhhbmRsZXIoZGF0YSwgaSwgaik7XG4gICAgICAgICAgICAgIGkgPSBqIC0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5FWEVDVVRFOlxuICAgICAgICAgIGlmICh0aGlzLl9leGVjdXRlSGFuZGxlcnNbY29kZV0pIHRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tjb2RlXSgpO1xuICAgICAgICAgIGVsc2UgdGhpcy5fZXhlY3V0ZUhhbmRsZXJGYihjb2RlKTtcbiAgICAgICAgICB0aGlzLnByZWNlZGluZ0NvZGVwb2ludCA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLklHTk9SRTpcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uRVJST1I6XG4gICAgICAgICAgY29uc3QgaW5qZWN0OiBJUGFyc2luZ1N0YXRlID0gdGhpcy5fZXJyb3JIYW5kbGVyKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBwb3NpdGlvbjogaSxcbiAgICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgICAgY3VycmVudFN0YXRlLFxuICAgICAgICAgICAgICBjb2xsZWN0LFxuICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgIGFib3J0OiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGluamVjdC5hYm9ydCkgcmV0dXJuO1xuICAgICAgICAgIC8vIGluamVjdCB2YWx1ZXM6IGN1cnJlbnRseSBub3QgaW1wbGVtZW50ZWRcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uQ1NJX0RJU1BBVENIOlxuICAgICAgICAgIC8vIFRyaWdnZXIgQ1NJIEhhbmRsZXJcbiAgICAgICAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2NzaUhhbmRsZXJzW2NvbGxlY3QgPDwgOCB8IGNvZGVdO1xuICAgICAgICAgIGxldCBqID0gaGFuZGxlcnMgPyBoYW5kbGVycy5sZW5ndGggLSAxIDogLTE7XG4gICAgICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgICAvLyB1bmRlZmluZWQgb3IgdHJ1ZSBtZWFucyBzdWNjZXNzIGFuZCB0byBzdG9wIGJ1YmJsaW5nXG4gICAgICAgICAgICBpZiAoaGFuZGxlcnNbal0ocGFyYW1zKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChqIDwgMCkge1xuICAgICAgICAgICAgdGhpcy5fY3NpSGFuZGxlckZiKGNvbGxlY3QgPDwgOCB8IGNvZGUsIHBhcmFtcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucHJlY2VkaW5nQ29kZXBvaW50ID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uUEFSQU06XG4gICAgICAgICAgLy8gaW5uZXIgbG9vcDogZGlnaXRzICgweDMwIC0gMHgzOSkgYW5kIDsgKDB4M2IpIGFuZCA6ICgweDNhKVxuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIHN3aXRjaCAoY29kZSkge1xuICAgICAgICAgICAgICBjYXNlIDB4M2I6XG4gICAgICAgICAgICAgICAgcGFyYW1zLmFkZFBhcmFtKDApOyAgLy8gWkRNXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgMHgzYTpcbiAgICAgICAgICAgICAgICBwYXJhbXMuYWRkU3ViUGFyYW0oLTEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBkZWZhdWx0OiAgLy8gMHgzMCAtIDB4MzlcbiAgICAgICAgICAgICAgICBwYXJhbXMuYWRkRGlnaXQoY29kZSAtIDQ4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IHdoaWxlICgrK2kgPCBsZW5ndGggJiYgKGNvZGUgPSBkYXRhW2ldKSA+IDB4MmYgJiYgY29kZSA8IDB4M2MpO1xuICAgICAgICAgIGktLTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uQ09MTEVDVDpcbiAgICAgICAgICBjb2xsZWN0IDw8PSA4O1xuICAgICAgICAgIGNvbGxlY3QgfD0gY29kZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENIOlxuICAgICAgICAgIGNvbnN0IGhhbmRsZXJzRXNjID0gdGhpcy5fZXNjSGFuZGxlcnNbY29sbGVjdCA8PCA4IHwgY29kZV07XG4gICAgICAgICAgbGV0IGpqID0gaGFuZGxlcnNFc2MgPyBoYW5kbGVyc0VzYy5sZW5ndGggLSAxIDogLTE7XG4gICAgICAgICAgZm9yICg7IGpqID49IDA7IGpqLS0pIHtcbiAgICAgICAgICAgIC8vIHVuZGVmaW5lZCBvciB0cnVlIG1lYW5zIHN1Y2Nlc3MgYW5kIHRvIHN0b3AgYnViYmxpbmdcbiAgICAgICAgICAgIGlmIChoYW5kbGVyc0VzY1tqal0oKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChqaiA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2VzY0hhbmRsZXJGYihjb2xsZWN0IDw8IDggfCBjb2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5DTEVBUjpcbiAgICAgICAgICBwYXJhbXMucmVzZXQoKTtcbiAgICAgICAgICBwYXJhbXMuYWRkUGFyYW0oMCk7IC8vIFpETVxuICAgICAgICAgIGNvbGxlY3QgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5EQ1NfSE9PSzpcbiAgICAgICAgICBkY3MuaG9vayhjb2xsZWN0IDw8IDggfCBjb2RlLCBwYXJhbXMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5EQ1NfUFVUOlxuICAgICAgICAgIC8vIGlubmVyIGxvb3AgLSBleGl0IERDU19QVVQ6IDB4MTgsIDB4MWEsIDB4MWIsIDB4N2YsIDB4ODAgLSAweDlmXG4gICAgICAgICAgLy8gdW5ob29rIHRyaWdnZXJlZCBieTogMHgxYiwgMHg5YyAoc3VjY2VzcykgYW5kIDB4MTgsIDB4MWEgKGFib3J0KVxuICAgICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgOyArK2opIHtcbiAgICAgICAgICAgIGlmIChqID49IGxlbmd0aCB8fCAoY29kZSA9IGRhdGFbal0pID09PSAweDE4IHx8IGNvZGUgPT09IDB4MWEgfHwgY29kZSA9PT0gMHgxYiB8fCAoY29kZSA+IDB4N2YgJiYgY29kZSA8IE5PTl9BU0NJSV9QUklOVEFCTEUpKSB7XG4gICAgICAgICAgICAgIGRjcy5wdXQoZGF0YSwgaSwgaik7XG4gICAgICAgICAgICAgIGkgPSBqIC0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5EQ1NfVU5IT09LOlxuICAgICAgICAgIGRjcy51bmhvb2soY29kZSAhPT0gMHgxOCAmJiBjb2RlICE9PSAweDFhKTtcbiAgICAgICAgICBpZiAoY29kZSA9PT0gMHgxYikgdHJhbnNpdGlvbiB8PSBQYXJzZXJTdGF0ZS5FU0NBUEU7XG4gICAgICAgICAgcGFyYW1zLnJlc2V0KCk7XG4gICAgICAgICAgcGFyYW1zLmFkZFBhcmFtKDApOyAvLyBaRE1cbiAgICAgICAgICBjb2xsZWN0ID0gMDtcbiAgICAgICAgICB0aGlzLnByZWNlZGluZ0NvZGVwb2ludCA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLk9TQ19TVEFSVDpcbiAgICAgICAgICBvc2Muc3RhcnQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uT1NDX1BVVDpcbiAgICAgICAgICAvLyBpbm5lciBsb29wOiAweDIwIChTUCkgaW5jbHVkZWQsIDB4N0YgKERFTCkgaW5jbHVkZWRcbiAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoaiA+PSBsZW5ndGggfHwgKGNvZGUgPSBkYXRhW2pdKSA8IDB4MjAgfHwgKGNvZGUgPiAweDdmICYmIGNvZGUgPD0gMHg5ZikpIHtcbiAgICAgICAgICAgICAgb3NjLnB1dChkYXRhLCBpLCBqKTtcbiAgICAgICAgICAgICAgaSA9IGogLSAxO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLk9TQ19FTkQ6XG4gICAgICAgICAgb3NjLmVuZChjb2RlICE9PSAweDE4ICYmIGNvZGUgIT09IDB4MWEpO1xuICAgICAgICAgIGlmIChjb2RlID09PSAweDFiKSB0cmFuc2l0aW9uIHw9IFBhcnNlclN0YXRlLkVTQ0FQRTtcbiAgICAgICAgICBwYXJhbXMucmVzZXQoKTtcbiAgICAgICAgICBwYXJhbXMuYWRkUGFyYW0oMCk7IC8vIFpETVxuICAgICAgICAgIGNvbGxlY3QgPSAwO1xuICAgICAgICAgIHRoaXMucHJlY2VkaW5nQ29kZXBvaW50ID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGN1cnJlbnRTdGF0ZSA9IHRyYW5zaXRpb24gJiBUYWJsZUFjY2Vzcy5UUkFOU0lUSU9OX1NUQVRFX01BU0s7XG4gICAgfVxuXG4gICAgLy8gc2F2ZSBjb2xsZWN0ZWQgaW50ZXJtZWRpYXRlc1xuICAgIHRoaXMuX2NvbGxlY3QgPSBjb2xsZWN0O1xuXG4gICAgLy8gc2F2ZSBzdGF0ZVxuICAgIHRoaXMuY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElPc2NIYW5kbGVyLCBJSGFuZGxlckNvbGxlY3Rpb24sIE9zY0ZhbGxiYWNrSGFuZGxlclR5cGUsIElPc2NQYXJzZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcbmltcG9ydCB7IE9zY1N0YXRlLCBQQVlMT0FEX0xJTUlUIH0gZnJvbSAnY29tbW9uL3BhcnNlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgdXRmMzJUb1N0cmluZyB9IGZyb20gJ2NvbW1vbi9pbnB1dC9UZXh0RGVjb2Rlcic7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cblxuZXhwb3J0IGNsYXNzIE9zY1BhcnNlciBpbXBsZW1lbnRzIElPc2NQYXJzZXIge1xuICBwcml2YXRlIF9zdGF0ZSA9IE9zY1N0YXRlLlNUQVJUO1xuICBwcml2YXRlIF9pZCA9IC0xO1xuICBwcml2YXRlIF9oYW5kbGVyczogSUhhbmRsZXJDb2xsZWN0aW9uPElPc2NIYW5kbGVyPiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHByaXZhdGUgX2hhbmRsZXJGYjogT3NjRmFsbGJhY2tIYW5kbGVyVHlwZSA9ICgpID0+IHsgfTtcblxuICBwdWJsaWMgYWRkSGFuZGxlcihpZGVudDogbnVtYmVyLCBoYW5kbGVyOiBJT3NjSGFuZGxlcik6IElEaXNwb3NhYmxlIHtcbiAgICBpZiAodGhpcy5faGFuZGxlcnNbaWRlbnRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2hhbmRsZXJzW2lkZW50XSA9IFtdO1xuICAgIH1cbiAgICBjb25zdCBoYW5kbGVyTGlzdCA9IHRoaXMuX2hhbmRsZXJzW2lkZW50XTtcbiAgICBoYW5kbGVyTGlzdC5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiB7XG4gICAgICBkaXNwb3NlOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXJJbmRleCA9IGhhbmRsZXJMaXN0LmluZGV4T2YoaGFuZGxlcik7XG4gICAgICAgIGlmIChoYW5kbGVySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgaGFuZGxlckxpc3Quc3BsaWNlKGhhbmRsZXJJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHB1YmxpYyBzZXRIYW5kbGVyKGlkZW50OiBudW1iZXIsIGhhbmRsZXI6IElPc2NIYW5kbGVyKTogdm9pZCB7XG4gICAgdGhpcy5faGFuZGxlcnNbaWRlbnRdID0gW2hhbmRsZXJdO1xuICB9XG4gIHB1YmxpYyBjbGVhckhhbmRsZXIoaWRlbnQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9oYW5kbGVyc1tpZGVudF0pIGRlbGV0ZSB0aGlzLl9oYW5kbGVyc1tpZGVudF07XG4gIH1cbiAgcHVibGljIHNldEhhbmRsZXJGYWxsYmFjayhoYW5kbGVyOiBPc2NGYWxsYmFja0hhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5faGFuZGxlckZiID0gaGFuZGxlcjtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX2hhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9oYW5kbGVyRmIgPSAoKSA9PiB7fTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICAvLyBjbGVhbnVwIGhhbmRsZXJzIGlmIHBheWxvYWQgd2FzIGFscmVhZHkgc2VudFxuICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gT3NjU3RhdGUuUEFZTE9BRCkge1xuICAgICAgdGhpcy5lbmQoZmFsc2UpO1xuICAgIH1cbiAgICB0aGlzLl9pZCA9IC0xO1xuICAgIHRoaXMuX3N0YXRlID0gT3NjU3RhdGUuU1RBUlQ7XG4gIH1cblxuICBwcml2YXRlIF9zdGFydCgpOiB2b2lkIHtcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2hhbmRsZXJzW3RoaXMuX2lkXTtcbiAgICBpZiAoIWhhbmRsZXJzKSB7XG4gICAgICB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWQsICdTVEFSVCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBqID0gaGFuZGxlcnMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgaGFuZGxlcnNbal0uc3RhcnQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9wdXQoZGF0YTogVWludDMyQXJyYXksIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLl9oYW5kbGVyc1t0aGlzLl9pZF07XG4gICAgaWYgKCFoYW5kbGVycykge1xuICAgICAgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkLCAnUFVUJywgdXRmMzJUb1N0cmluZyhkYXRhLCBzdGFydCwgZW5kKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGogPSBoYW5kbGVycy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICBoYW5kbGVyc1tqXS5wdXQoZGF0YSwgc3RhcnQsIGVuZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZW5kKHN1Y2Nlc3M6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyBvdGhlciB0aGFuIHRoZSBvbGQgY29kZSB3ZSBhbHdheXMgaGF2ZSB0byBjYWxsIC5lbmRcbiAgICAvLyB0byBrZWVwIHRoZSBidWJibGluZyB3ZSB1c2UgYHN1Y2Nlc3NgIHRvIGluZGljYXRlXG4gICAgLy8gd2hldGhlciBhIGhhbmRsZXIgc2hvdWxkIGV4ZWN1dGVcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2hhbmRsZXJzW3RoaXMuX2lkXTtcbiAgICBpZiAoIWhhbmRsZXJzKSB7XG4gICAgICB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWQsICdFTkQnLCBzdWNjZXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGogPSBoYW5kbGVycy5sZW5ndGggLSAxO1xuICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChoYW5kbGVyc1tqXS5lbmQoc3VjY2VzcykgIT09IGZhbHNlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGotLTtcbiAgICAgIC8vIGNsZWFudXAgbGVmdCBvdmVyIGhhbmRsZXJzXG4gICAgICBmb3IgKDsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgaGFuZGxlcnNbal0uZW5kKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhcnQoKTogdm9pZCB7XG4gICAgLy8gYWx3YXlzIHJlc2V0IGxlZnRvdmVyIGhhbmRsZXJzXG4gICAgdGhpcy5yZXNldCgpO1xuICAgIHRoaXMuX2lkID0gLTE7XG4gICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5JRDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdXQgZGF0YSB0byBjdXJyZW50IE9TQyBjb21tYW5kLlxuICAgKiBFeHBlY3RzIHRoZSBpZGVudGlmaWVyIG9mIHRoZSBPU0MgY29tbWFuZCBpbiB0aGUgZm9ybVxuICAgKiBPU0MgaWQgOyBwYXlsb2FkIFNUL0JFTFxuICAgKiBQYXlsb2FkIGNodW5rcyBhcmUgbm90IGZ1cnRoZXIgcHJvY2Vzc2VkIGFuZCBnZXRcbiAgICogZGlyZWN0bHkgcGFzc2VkIHRvIHRoZSBoYW5kbGVycy5cbiAgICovXG4gIHB1YmxpYyBwdXQoZGF0YTogVWludDMyQXJyYXksIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSBPc2NTdGF0ZS5BQk9SVCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IE9zY1N0YXRlLklEKSB7XG4gICAgICB3aGlsZSAoc3RhcnQgPCBlbmQpIHtcbiAgICAgICAgY29uc3QgY29kZSA9IGRhdGFbc3RhcnQrK107XG4gICAgICAgIGlmIChjb2RlID09PSAweDNiKSB7XG4gICAgICAgICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5QQVlMT0FEO1xuICAgICAgICAgIHRoaXMuX3N0YXJ0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvZGUgPCAweDMwIHx8IDB4MzkgPCBjb2RlKSB7XG4gICAgICAgICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5BQk9SVDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2lkID09PSAtMSkge1xuICAgICAgICAgIHRoaXMuX2lkID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pZCA9IHRoaXMuX2lkICogMTAgKyBjb2RlIC0gNDg7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gT3NjU3RhdGUuUEFZTE9BRCAmJiBlbmQgLSBzdGFydCA+IDApIHtcbiAgICAgIHRoaXMuX3B1dChkYXRhLCBzdGFydCwgZW5kKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5kaWNhdGVzIGVuZCBvZiBhbiBPU0MgY29tbWFuZC5cbiAgICogV2hldGhlciB0aGUgT1NDIGdvdCBhYm9ydGVkIG9yIGZpbmlzaGVkIG5vcm1hbGx5XG4gICAqIGlzIGluZGljYXRlZCBieSBgc3VjY2Vzc2AuXG4gICAqL1xuICBwdWJsaWMgZW5kKHN1Y2Nlc3M6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IE9zY1N0YXRlLlNUQVJUKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGRvIG5vdGhpbmcgaWYgY29tbWFuZCB3YXMgZmF1bHR5XG4gICAgaWYgKHRoaXMuX3N0YXRlICE9PSBPc2NTdGF0ZS5BQk9SVCkge1xuICAgICAgLy8gaWYgd2UgYXJlIHN0aWxsIGluIElEIHN0YXRlIGFuZCBnZXQgYW4gZWFybHkgZW5kXG4gICAgICAvLyBtZWFucyB0aGF0IHRoZSBjb21tYW5kIGhhcyBubyBwYXlsb2FkIHRodXMgd2Ugc3RpbGwgaGF2ZVxuICAgICAgLy8gdG8gYW5ub3VuY2UgU1RBUlQgYW5kIHNlbmQgRU5EIHJpZ2h0IGFmdGVyXG4gICAgICBpZiAodGhpcy5fc3RhdGUgPT09IE9zY1N0YXRlLklEKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0KCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9lbmQoc3VjY2Vzcyk7XG4gICAgfVxuICAgIHRoaXMuX2lkID0gLTE7XG4gICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5TVEFSVDtcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlbmllbnQgY2xhc3MgdG8gYWxsb3cgYXR0YWNoaW5nIHN0cmluZyBiYXNlZCBoYW5kbGVyIGZ1bmN0aW9uc1xuICogYXMgT1NDIGhhbmRsZXJzLlxuICovXG5leHBvcnQgY2xhc3MgT3NjSGFuZGxlciBpbXBsZW1lbnRzIElPc2NIYW5kbGVyIHtcbiAgcHJpdmF0ZSBfZGF0YSA9ICcnO1xuICBwcml2YXRlIF9oaXRMaW1pdDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2hhbmRsZXI6IChkYXRhOiBzdHJpbmcpID0+IGFueSkge31cblxuICBwdWJsaWMgc3RhcnQoKTogdm9pZCB7XG4gICAgdGhpcy5fZGF0YSA9ICcnO1xuICAgIHRoaXMuX2hpdExpbWl0ID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9oaXRMaW1pdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9kYXRhICs9IHV0ZjMyVG9TdHJpbmcoZGF0YSwgc3RhcnQsIGVuZCk7XG4gICAgaWYgKHRoaXMuX2RhdGEubGVuZ3RoID4gUEFZTE9BRF9MSU1JVCkge1xuICAgICAgdGhpcy5fZGF0YSA9ICcnO1xuICAgICAgdGhpcy5faGl0TGltaXQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBlbmQoc3VjY2VzczogYm9vbGVhbik6IGFueSB7XG4gICAgbGV0IHJldDtcbiAgICBpZiAodGhpcy5faGl0TGltaXQpIHtcbiAgICAgIHJldCA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoc3VjY2Vzcykge1xuICAgICAgcmV0ID0gdGhpcy5faGFuZGxlcih0aGlzLl9kYXRhKTtcbiAgICB9XG4gICAgdGhpcy5fZGF0YSA9ICcnO1xuICAgIHRoaXMuX2hpdExpbWl0ID0gZmFsc2U7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuaW1wb3J0IHsgSVBhcmFtcywgUGFyYW1zQXJyYXkgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcblxuLy8gbWF4IHZhbHVlIHN1cHBvcnRlZCBmb3IgYSBzaW5nbGUgcGFyYW0vc3VicGFyYW0gKGNsYW1wZWQgdG8gcG9zaXRpdmUgaW50MzIgcmFuZ2UpXG5jb25zdCBNQVhfVkFMVUUgPSAweDdGRkZGRkZGO1xuLy8gbWF4IGFsbG93ZWQgc3VicGFyYW1zIGZvciBhIHNpbmdsZSBzZXF1ZW5jZSAoaGFyZGNvZGVkIGxpbWl0YXRpb24pXG5jb25zdCBNQVhfU1VCUEFSQU1TID0gMjU2O1xuXG4vKipcbiAqIFBhcmFtcyBzdG9yYWdlIGNsYXNzLlxuICogVGhpcyB0eXBlIGlzIHVzZWQgYnkgdGhlIHBhcnNlciB0byBhY2N1bXVsYXRlIHNlcXVlbmNlIHBhcmFtZXRlcnMgYW5kIHN1YiBwYXJhbWV0ZXJzXG4gKiBhbmQgdHJhbnNtaXQgdGhlbSB0byB0aGUgaW5wdXQgaGFuZGxlciBhY3Rpb25zLlxuICpcbiAqIE5PVEVTOlxuICogIC0gcGFyYW1zIG9iamVjdCBmb3IgYWN0aW9uIGhhbmRsZXJzIGlzIGJvcnJvd2VkLCB1c2UgYC50b0FycmF5YCBvciBgLmNsb25lYCB0byBnZXQgYSBjb3B5XG4gKiAgLSBuZXZlciByZWFkIGJleW9uZCBgcGFyYW1zLmxlbmd0aCAtIDFgIChsaWtlbHkgdG8gY29udGFpbiBhcmJpdHJhcnkgZGF0YSlcbiAqICAtIGAuZ2V0U3ViUGFyYW1zYCByZXR1cm5zIGEgYm9ycm93ZWQgdHlwZWQgYXJyYXksIHVzZSBgLmdldFN1YlBhcmFtc0FsbGAgZm9yIGNsb25lZCBzdWIgcGFyYW1zXG4gKiAgLSBoYXJkY29kZWQgbGltaXRhdGlvbnM6XG4gKiAgICAtIG1heC4gdmFsdWUgZm9yIGEgc2luZ2xlIChzdWIpIHBhcmFtIGlzIDJeMzEgLSAxIChncmVhdGVyIHZhbHVlcyBhcmUgY2xhbXBlZCB0byB0aGF0KVxuICogICAgLSBtYXguIDI1NiBzdWIgcGFyYW1zIHBvc3NpYmxlXG4gKiAgICAtIG5lZ2F0aXZlIHZhbHVlcyBhcmUgbm90IGFsbG93ZWQgYmVzaWRlIC0xIChwbGFjZWhvbGRlciBmb3IgZGVmYXVsdCB2YWx1ZSlcbiAqXG4gKiBBYm91dCBaRE0gKFplcm8gRGVmYXVsdCBNb2RlKTpcbiAqIFpETSBpcyBub3Qgb3JjaGVzdHJhdGVkIGJ5IHRoaXMgY2xhc3MuIElmIHRoZSBwYXJzZXIgaXMgaW4gWkRNLFxuICogaXQgc2hvdWxkIGFkZCAwIGZvciBlbXB0eSBwYXJhbXMsIG90aGVyd2lzZSAtMS4gVGhpcyBkb2VzIG5vdCBhcHBseVxuICogdG8gc3VicGFyYW1zLCBlbXB0eSBzdWJwYXJhbXMgc2hvdWxkIGFsd2F5cyBiZSBhZGRlZCB3aXRoIC0xLlxuICovXG5leHBvcnQgY2xhc3MgUGFyYW1zIGltcGxlbWVudHMgSVBhcmFtcyB7XG4gIC8vIHBhcmFtcyBzdG9yZSBhbmQgbGVuZ3RoXG4gIHB1YmxpYyBwYXJhbXM6IEludDMyQXJyYXk7XG4gIHB1YmxpYyBsZW5ndGg6IG51bWJlcjtcblxuICAvLyBzdWIgcGFyYW1zIHN0b3JlIGFuZCBsZW5ndGhcbiAgcHJvdGVjdGVkIF9zdWJQYXJhbXM6IEludDMyQXJyYXk7XG4gIHByb3RlY3RlZCBfc3ViUGFyYW1zTGVuZ3RoOiBudW1iZXI7XG5cbiAgLy8gc3ViIHBhcmFtcyBvZmZzZXRzIGZyb20gcGFyYW06IHBhcmFtIGlkeCAtLT4gW3N0YXJ0LCBlbmRdIG9mZnNldFxuICBwcml2YXRlIF9zdWJQYXJhbXNJZHg6IFVpbnQxNkFycmF5O1xuICBwcml2YXRlIF9yZWplY3REaWdpdHM6IGJvb2xlYW47XG4gIHByaXZhdGUgX3JlamVjdFN1YkRpZ2l0czogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfZGlnaXRJc1N1YjogYm9vbGVhbjtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgYFBhcmFtc2AgdHlwZSBmcm9tIEpTIGFycmF5IHJlcHJlc2VudGF0aW9uLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBmcm9tQXJyYXkodmFsdWVzOiBQYXJhbXNBcnJheSk6IFBhcmFtcyB7XG4gICAgY29uc3QgcGFyYW1zID0gbmV3IFBhcmFtcygpO1xuICAgIGlmICghdmFsdWVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG4gICAgLy8gc2tpcCBsZWFkaW5nIHN1YiBwYXJhbXNcbiAgICBmb3IgKGxldCBpID0gKHZhbHVlc1swXSBpbnN0YW5jZW9mIEFycmF5KSA/IDEgOiAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1tpXTtcbiAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdmFsdWUubGVuZ3RoOyArK2spIHtcbiAgICAgICAgICBwYXJhbXMuYWRkU3ViUGFyYW0odmFsdWVba10pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJhbXMuYWRkUGFyYW0odmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBtYXhMZW5ndGggbWF4IGxlbmd0aCBvZiBzdG9yYWJsZSBwYXJhbWV0ZXJzXG4gICAqIEBwYXJhbSBtYXhTdWJQYXJhbXNMZW5ndGggbWF4IGxlbmd0aCBvZiBzdG9yYWJsZSBzdWIgcGFyYW1ldGVyc1xuICAgKi9cbiAgY29uc3RydWN0b3IocHVibGljIG1heExlbmd0aDogbnVtYmVyID0gMzIsIHB1YmxpYyBtYXhTdWJQYXJhbXNMZW5ndGg6IG51bWJlciA9IDMyKSB7XG4gICAgaWYgKG1heFN1YlBhcmFtc0xlbmd0aCA+IE1BWF9TVUJQQVJBTVMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbWF4U3ViUGFyYW1zTGVuZ3RoIG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiAyNTYnKTtcbiAgICB9XG4gICAgdGhpcy5wYXJhbXMgPSBuZXcgSW50MzJBcnJheShtYXhMZW5ndGgpO1xuICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9zdWJQYXJhbXMgPSBuZXcgSW50MzJBcnJheShtYXhTdWJQYXJhbXNMZW5ndGgpO1xuICAgIHRoaXMuX3N1YlBhcmFtc0xlbmd0aCA9IDA7XG4gICAgdGhpcy5fc3ViUGFyYW1zSWR4ID0gbmV3IFVpbnQxNkFycmF5KG1heExlbmd0aCk7XG4gICAgdGhpcy5fcmVqZWN0RGlnaXRzID0gZmFsc2U7XG4gICAgdGhpcy5fcmVqZWN0U3ViRGlnaXRzID0gZmFsc2U7XG4gICAgdGhpcy5fZGlnaXRJc1N1YiA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb25lIG9iamVjdC5cbiAgICovXG4gIHB1YmxpYyBjbG9uZSgpOiBQYXJhbXMge1xuICAgIGNvbnN0IG5ld1BhcmFtcyA9IG5ldyBQYXJhbXModGhpcy5tYXhMZW5ndGgsIHRoaXMubWF4U3ViUGFyYW1zTGVuZ3RoKTtcbiAgICBuZXdQYXJhbXMucGFyYW1zLnNldCh0aGlzLnBhcmFtcyk7XG4gICAgbmV3UGFyYW1zLmxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICAgIG5ld1BhcmFtcy5fc3ViUGFyYW1zLnNldCh0aGlzLl9zdWJQYXJhbXMpO1xuICAgIG5ld1BhcmFtcy5fc3ViUGFyYW1zTGVuZ3RoID0gdGhpcy5fc3ViUGFyYW1zTGVuZ3RoO1xuICAgIG5ld1BhcmFtcy5fc3ViUGFyYW1zSWR4LnNldCh0aGlzLl9zdWJQYXJhbXNJZHgpO1xuICAgIG5ld1BhcmFtcy5fcmVqZWN0RGlnaXRzID0gdGhpcy5fcmVqZWN0RGlnaXRzO1xuICAgIG5ld1BhcmFtcy5fcmVqZWN0U3ViRGlnaXRzID0gdGhpcy5fcmVqZWN0U3ViRGlnaXRzO1xuICAgIG5ld1BhcmFtcy5fZGlnaXRJc1N1YiA9IHRoaXMuX2RpZ2l0SXNTdWI7XG4gICAgcmV0dXJuIG5ld1BhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBKUyBhcnJheSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3VycmVudCBwYXJhbWV0ZXJzIGFuZCBzdWIgcGFyYW1ldGVycy5cbiAgICogVGhlIGFycmF5IGlzIHN0cnVjdHVyZWQgYXMgZm9sbG93czpcbiAgICogICAgc2VxdWVuY2U6IFwiMTsyOjM6NDs1Ojo2XCJcbiAgICogICAgYXJyYXkgICA6IFsxLCAyLCBbMywgNF0sIDUsIFstMSwgNl1dXG4gICAqL1xuICBwdWJsaWMgdG9BcnJheSgpOiBQYXJhbXNBcnJheSB7XG4gICAgY29uc3QgcmVzOiBQYXJhbXNBcnJheSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgcmVzLnB1c2godGhpcy5wYXJhbXNbaV0pO1xuICAgICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9zdWJQYXJhbXNJZHhbaV0gPj4gODtcbiAgICAgIGNvbnN0IGVuZCA9IHRoaXMuX3N1YlBhcmFtc0lkeFtpXSAmIDB4RkY7XG4gICAgICBpZiAoZW5kIC0gc3RhcnQgPiAwKSB7XG4gICAgICAgIHJlcy5wdXNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX3N1YlBhcmFtcywgc3RhcnQsIGVuZCkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHRvIGluaXRpYWwgZW1wdHkgc3RhdGUuXG4gICAqL1xuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuX3N1YlBhcmFtc0xlbmd0aCA9IDA7XG4gICAgdGhpcy5fcmVqZWN0RGlnaXRzID0gZmFsc2U7XG4gICAgdGhpcy5fcmVqZWN0U3ViRGlnaXRzID0gZmFsc2U7XG4gICAgdGhpcy5fZGlnaXRJc1N1YiA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHBhcmFtZXRlciB2YWx1ZS5cbiAgICogYFBhcmFtc2Agb25seSBzdG9yZXMgdXAgdG8gYG1heExlbmd0aGAgcGFyYW1ldGVycywgYW55IGxhdGVyXG4gICAqIHBhcmFtZXRlciB3aWxsIGJlIGlnbm9yZWQuXG4gICAqIE5vdGU6IFZUIGRldmljZXMgb25seSBzdG9yZWQgdXAgdG8gMTYgdmFsdWVzLCB4dGVybSBzZWVtcyB0b1xuICAgKiBzdG9yZSB1cCB0byAzMC5cbiAgICovXG4gIHB1YmxpYyBhZGRQYXJhbSh2YWx1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fZGlnaXRJc1N1YiA9IGZhbHNlO1xuICAgIGlmICh0aGlzLmxlbmd0aCA+PSB0aGlzLm1heExlbmd0aCkge1xuICAgICAgdGhpcy5fcmVqZWN0RGlnaXRzID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHZhbHVlIDwgLTEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndmFsdWVzIGxlc3NlciB0aGFuIC0xIGFyZSBub3QgYWxsb3dlZCcpO1xuICAgIH1cbiAgICB0aGlzLl9zdWJQYXJhbXNJZHhbdGhpcy5sZW5ndGhdID0gdGhpcy5fc3ViUGFyYW1zTGVuZ3RoIDw8IDggfCB0aGlzLl9zdWJQYXJhbXNMZW5ndGg7XG4gICAgdGhpcy5wYXJhbXNbdGhpcy5sZW5ndGgrK10gPSB2YWx1ZSA+IE1BWF9WQUxVRSA/IE1BWF9WQUxVRSA6IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHN1YiBwYXJhbWV0ZXIgdmFsdWUuXG4gICAqIFRoZSBzdWIgcGFyYW1ldGVyIGlzIGF1dG9tYXRpY2FsbHkgYXNzb2NpYXRlZCB3aXRoIHRoZSBsYXN0IHBhcmFtZXRlciB2YWx1ZS5cbiAgICogVGh1cyBpdCBpcyBub3QgcG9zc2libGUgdG8gYWRkIGEgc3VicGFyYW1ldGVyIHdpdGhvdXQgYW55IHBhcmFtZXRlciBhZGRlZCB5ZXQuXG4gICAqIGBQYXJhbXNgIG9ubHkgc3RvcmVzIHVwIHRvIGBzdWJQYXJhbXNMZW5ndGhgIHN1YiBwYXJhbWV0ZXJzLCBhbnkgbGF0ZXJcbiAgICogc3ViIHBhcmFtZXRlciB3aWxsIGJlIGlnbm9yZWQuXG4gICAqL1xuICBwdWJsaWMgYWRkU3ViUGFyYW0odmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2RpZ2l0SXNTdWIgPSB0cnVlO1xuICAgIGlmICghdGhpcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3JlamVjdERpZ2l0cyB8fCB0aGlzLl9zdWJQYXJhbXNMZW5ndGggPj0gdGhpcy5tYXhTdWJQYXJhbXNMZW5ndGgpIHtcbiAgICAgIHRoaXMuX3JlamVjdFN1YkRpZ2l0cyA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh2YWx1ZSA8IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3ZhbHVlcyBsZXNzZXIgdGhhbiAtMSBhcmUgbm90IGFsbG93ZWQnKTtcbiAgICB9XG4gICAgdGhpcy5fc3ViUGFyYW1zW3RoaXMuX3N1YlBhcmFtc0xlbmd0aCsrXSA9IHZhbHVlID4gTUFYX1ZBTFVFID8gTUFYX1ZBTFVFIDogdmFsdWU7XG4gICAgdGhpcy5fc3ViUGFyYW1zSWR4W3RoaXMubGVuZ3RoIC0gMV0rKztcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHBhcmFtZXRlciBhdCBpbmRleCBgaWR4YCBoYXMgc3ViIHBhcmFtZXRlcnMuXG4gICAqL1xuICBwdWJsaWMgaGFzU3ViUGFyYW1zKGlkeDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICgodGhpcy5fc3ViUGFyYW1zSWR4W2lkeF0gJiAweEZGKSAtICh0aGlzLl9zdWJQYXJhbXNJZHhbaWR4XSA+PiA4KSA+IDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBzdWIgcGFyYW1ldGVycyBmb3IgcGFyYW1ldGVyIGF0IGluZGV4IGBpZHhgLlxuICAgKiBOb3RlOiBUaGUgdmFsdWVzIGFyZSBib3Jyb3dlZCwgdGh1cyB5b3UgbmVlZCB0byBjb3B5XG4gICAqIHRoZSB2YWx1ZXMgaWYgeW91IG5lZWQgdG8gaG9sZCB0aGVtIGluIG5vbmxvY2FsIHNjb3BlLlxuICAgKi9cbiAgcHVibGljIGdldFN1YlBhcmFtcyhpZHg6IG51bWJlcik6IEludDMyQXJyYXkgfCBudWxsIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX3N1YlBhcmFtc0lkeFtpZHhdID4+IDg7XG4gICAgY29uc3QgZW5kID0gdGhpcy5fc3ViUGFyYW1zSWR4W2lkeF0gJiAweEZGO1xuICAgIGlmIChlbmQgLSBzdGFydCA+IDApIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdWJQYXJhbXMuc3ViYXJyYXkoc3RhcnQsIGVuZCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbGwgc3ViIHBhcmFtZXRlcnMgYXMge2lkeDogc3VicGFyYW1zfSBtYXBwaW5nLlxuICAgKiBOb3RlOiBUaGUgdmFsdWVzIGFyZSBub3QgYm9ycm93ZWQuXG4gICAqL1xuICBwdWJsaWMgZ2V0U3ViUGFyYW1zQWxsKCk6IHtbaWR4OiBudW1iZXJdOiBJbnQzMkFycmF5fSB7XG4gICAgY29uc3QgcmVzdWx0OiB7W2lkeDogbnVtYmVyXTogSW50MzJBcnJheX0gPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fc3ViUGFyYW1zSWR4W2ldID4+IDg7XG4gICAgICBjb25zdCBlbmQgPSB0aGlzLl9zdWJQYXJhbXNJZHhbaV0gJiAweEZGO1xuICAgICAgaWYgKGVuZCAtIHN0YXJ0ID4gMCkge1xuICAgICAgICByZXN1bHRbaV0gPSB0aGlzLl9zdWJQYXJhbXMuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgc2luZ2xlIGRpZ2l0IHZhbHVlIHRvIGN1cnJlbnQgcGFyYW1ldGVyLlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgdGhlIHBhcnNlciB0byBhY2NvdW50IGRpZ2l0cyBvbiBhIGNoYXIgYnkgY2hhciBiYXNpcy5cbiAgICovXG4gIHB1YmxpYyBhZGREaWdpdCh2YWx1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgbGV0IGxlbmd0aDtcbiAgICBpZiAodGhpcy5fcmVqZWN0RGlnaXRzXG4gICAgICB8fCAhKGxlbmd0aCA9IHRoaXMuX2RpZ2l0SXNTdWIgPyB0aGlzLl9zdWJQYXJhbXNMZW5ndGggOiB0aGlzLmxlbmd0aClcbiAgICAgIHx8ICh0aGlzLl9kaWdpdElzU3ViICYmIHRoaXMuX3JlamVjdFN1YkRpZ2l0cylcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdG9yZSA9IHRoaXMuX2RpZ2l0SXNTdWIgPyB0aGlzLl9zdWJQYXJhbXMgOiB0aGlzLnBhcmFtcztcbiAgICBjb25zdCBjdXIgPSBzdG9yZVtsZW5ndGggLSAxXTtcbiAgICBzdG9yZVtsZW5ndGggLSAxXSA9IH5jdXIgPyBNYXRoLm1pbihjdXIgKiAxMCArIHZhbHVlLCBNQVhfVkFMVUUpIDogdmFsdWU7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBCdWZmZXJTZXQgfSBmcm9tICdjb21tb24vYnVmZmVyL0J1ZmZlclNldCc7XG5pbXBvcnQgeyBJQnVmZmVyU2V0LCBJQnVmZmVyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5cbmV4cG9ydCBjb25zdCBNSU5JTVVNX0NPTFMgPSAyOyAvLyBMZXNzIHRoYW4gMiBjYW4gbWVzcyB3aXRoIHdpZGUgY2hhcnNcbmV4cG9ydCBjb25zdCBNSU5JTVVNX1JPV1MgPSAxO1xuXG5leHBvcnQgY2xhc3MgQnVmZmVyU2VydmljZSBpbXBsZW1lbnRzIElCdWZmZXJTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHVibGljIGNvbHM6IG51bWJlcjtcbiAgcHVibGljIHJvd3M6IG51bWJlcjtcbiAgcHVibGljIGJ1ZmZlcnM6IElCdWZmZXJTZXQ7XG5cbiAgcHVibGljIGdldCBidWZmZXIoKTogSUJ1ZmZlciB7IHJldHVybiB0aGlzLmJ1ZmZlcnMuYWN0aXZlOyB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElPcHRpb25zU2VydmljZSBwcml2YXRlIF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuY29scyA9IE1hdGgubWF4KF9vcHRpb25zU2VydmljZS5vcHRpb25zLmNvbHMsIE1JTklNVU1fQ09MUyk7XG4gICAgdGhpcy5yb3dzID0gTWF0aC5tYXgoX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMucm93cywgTUlOSU1VTV9ST1dTKTtcbiAgICB0aGlzLmJ1ZmZlcnMgPSBuZXcgQnVmZmVyU2V0KF9vcHRpb25zU2VydmljZSwgdGhpcyk7XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5jb2xzID0gY29scztcbiAgICB0aGlzLnJvd3MgPSByb3dzO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuYnVmZmVycyA9IG5ldyBCdWZmZXJTZXQodGhpcy5fb3B0aW9uc1NlcnZpY2UsIHRoaXMpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaGFyc2V0U2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJQ2hhcnNldCB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBDaGFyc2V0U2VydmljZSBpbXBsZW1lbnRzIElDaGFyc2V0U2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHB1YmxpYyBjaGFyc2V0OiBJQ2hhcnNldCB8IHVuZGVmaW5lZDtcbiAgcHVibGljIGNoYXJzZXRzOiBJQ2hhcnNldFtdID0gW107XG4gIHB1YmxpYyBnbGV2ZWw6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuY2hhcnNldCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmNoYXJzZXRzID0gW107XG4gICAgdGhpcy5nbGV2ZWwgPSAwO1xuICB9XG5cbiAgcHVibGljIHNldGdMZXZlbChnOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmdsZXZlbCA9IGc7XG4gICAgdGhpcy5jaGFyc2V0ID0gdGhpcy5jaGFyc2V0c1tnXTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRnQ2hhcnNldChnOiBudW1iZXIsIGNoYXJzZXQ6IElDaGFyc2V0KTogdm9pZCB7XG4gICAgdGhpcy5jaGFyc2V0c1tnXSA9IGNoYXJzZXQ7XG4gICAgaWYgKHRoaXMuZ2xldmVsID09PSBnKSB7XG4gICAgICB0aGlzLmNoYXJzZXQgPSBjaGFyc2V0O1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElDb3JlU2VydmljZSwgSUNvcmVNb3VzZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IElDb3JlTW91c2VQcm90b2NvbCwgSUNvcmVNb3VzZUV2ZW50LCBDb3JlTW91c2VFbmNvZGluZywgQ29yZU1vdXNlRXZlbnRUeXBlLCBDb3JlTW91c2VCdXR0b24sIENvcmVNb3VzZUFjdGlvbiB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbi8qKlxuICogU3VwcG9ydGVkIGRlZmF1bHQgcHJvdG9jb2xzLlxuICovXG5jb25zdCBERUZBVUxUX1BST1RPQ09MUzoge1trZXk6IHN0cmluZ106IElDb3JlTW91c2VQcm90b2NvbH0gPSB7XG4gIC8qKlxuICAgKiBOT05FXG4gICAqIEV2ZW50czogbm9uZVxuICAgKiBNb2RpZmllcnM6IG5vbmVcbiAgICovXG4gIE5PTkU6IHtcbiAgICBldmVudHM6IENvcmVNb3VzZUV2ZW50VHlwZS5OT05FLFxuICAgIHJlc3RyaWN0OiAoKSA9PiBmYWxzZVxuICB9LFxuICAvKipcbiAgICogWDEwXG4gICAqIEV2ZW50czogbW91c2Vkb3duXG4gICAqIE1vZGlmaWVyczogbm9uZVxuICAgKi9cbiAgWDEwOiB7XG4gICAgZXZlbnRzOiBDb3JlTW91c2VFdmVudFR5cGUuRE9XTixcbiAgICByZXN0cmljdDogKGU6IElDb3JlTW91c2VFdmVudCkgPT4ge1xuICAgICAgLy8gbm8gd2hlZWwsIG5vIG1vdmUsIG5vIHVwXG4gICAgICBpZiAoZS5idXR0b24gPT09IENvcmVNb3VzZUJ1dHRvbi5XSEVFTCB8fCBlLmFjdGlvbiAhPT0gQ29yZU1vdXNlQWN0aW9uLkRPV04pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gbm8gbW9kaWZpZXJzXG4gICAgICBlLmN0cmwgPSBmYWxzZTtcbiAgICAgIGUuYWx0ID0gZmFsc2U7XG4gICAgICBlLnNoaWZ0ID0gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiBWVDIwMFxuICAgKiBFdmVudHM6IG1vdXNlZG93biAvIG1vdXNldXAgLyB3aGVlbFxuICAgKiBNb2RpZmllcnM6IGFsbFxuICAgKi9cbiAgVlQyMDA6IHtcbiAgICBldmVudHM6IENvcmVNb3VzZUV2ZW50VHlwZS5ET1dOIHwgQ29yZU1vdXNlRXZlbnRUeXBlLlVQIHwgQ29yZU1vdXNlRXZlbnRUeXBlLldIRUVMLFxuICAgIHJlc3RyaWN0OiAoZTogSUNvcmVNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAvLyBubyBtb3ZlXG4gICAgICBpZiAoZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5NT1ZFKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIERSQUdcbiAgICogRXZlbnRzOiBtb3VzZWRvd24gLyBtb3VzZXVwIC8gd2hlZWwgLyBtb3VzZWRyYWdcbiAgICogTW9kaWZpZXJzOiBhbGxcbiAgICovXG4gIERSQUc6IHtcbiAgICBldmVudHM6IENvcmVNb3VzZUV2ZW50VHlwZS5ET1dOIHwgQ29yZU1vdXNlRXZlbnRUeXBlLlVQIHwgQ29yZU1vdXNlRXZlbnRUeXBlLldIRUVMIHwgQ29yZU1vdXNlRXZlbnRUeXBlLkRSQUcsXG4gICAgcmVzdHJpY3Q6IChlOiBJQ29yZU1vdXNlRXZlbnQpID0+IHtcbiAgICAgIC8vIG5vIG1vdmUgd2l0aG91dCBidXR0b25cbiAgICAgIGlmIChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLk1PVkUgJiYgZS5idXR0b24gPT09IENvcmVNb3VzZUJ1dHRvbi5OT05FKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIEFOWVxuICAgKiBFdmVudHM6IGFsbCBtb3VzZSByZWxhdGVkIGV2ZW50c1xuICAgKiBNb2RpZmllcnM6IGFsbFxuICAgKi9cbiAgQU5ZOiB7XG4gICAgZXZlbnRzOlxuICAgICAgQ29yZU1vdXNlRXZlbnRUeXBlLkRPV04gfCBDb3JlTW91c2VFdmVudFR5cGUuVVAgfCBDb3JlTW91c2VFdmVudFR5cGUuV0hFRUxcbiAgICAgIHwgQ29yZU1vdXNlRXZlbnRUeXBlLkRSQUcgfCBDb3JlTW91c2VFdmVudFR5cGUuTU9WRSxcbiAgICByZXN0cmljdDogKGU6IElDb3JlTW91c2VFdmVudCkgPT4gdHJ1ZVxuICB9XG59O1xuXG5jb25zdCBlbnVtIE1vZGlmaWVycyB7XG4gIFNISUZUID0gNCxcbiAgQUxUID0gOCxcbiAgQ1RSTCA9IDE2XG59XG5cbi8vIGhlbHBlciBmb3IgZGVmYXVsdCBlbmNvZGVycyB0byBnZW5lcmF0ZSB0aGUgZXZlbnQgY29kZS5cbmZ1bmN0aW9uIGV2ZW50Q29kZShlOiBJQ29yZU1vdXNlRXZlbnQsIGlzU0dSOiBib29sZWFuKTogbnVtYmVyIHtcbiAgbGV0IGNvZGUgPSAoZS5jdHJsID8gTW9kaWZpZXJzLkNUUkwgOiAwKSB8IChlLnNoaWZ0ID8gTW9kaWZpZXJzLlNISUZUIDogMCkgfCAoZS5hbHQgPyBNb2RpZmllcnMuQUxUIDogMCk7XG4gIGlmIChlLmJ1dHRvbiA9PT0gQ29yZU1vdXNlQnV0dG9uLldIRUVMKSB7XG4gICAgY29kZSB8PSA2NDtcbiAgICBjb2RlIHw9IGUuYWN0aW9uO1xuICB9IGVsc2Uge1xuICAgIGNvZGUgfD0gZS5idXR0b24gJiAzO1xuICAgIGlmIChlLmJ1dHRvbiAmIDQpIHtcbiAgICAgIGNvZGUgfD0gNjQ7XG4gICAgfVxuICAgIGlmIChlLmJ1dHRvbiAmIDgpIHtcbiAgICAgIGNvZGUgfD0gMTI4O1xuICAgIH1cbiAgICBpZiAoZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5NT1ZFKSB7XG4gICAgICBjb2RlIHw9IENvcmVNb3VzZUFjdGlvbi5NT1ZFO1xuICAgIH0gZWxzZSBpZiAoZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5VUCAmJiAhaXNTR1IpIHtcbiAgICAgIC8vIHNwZWNpYWwgY2FzZSAtIG9ubHkgU0dSIGNhbiByZXBvcnQgYnV0dG9uIG9uIHJlbGVhc2VcbiAgICAgIC8vIGFsbCBvdGhlcnMgaGF2ZSB0byBnbyB3aXRoIE5PTkVcbiAgICAgIGNvZGUgfD0gQ29yZU1vdXNlQnV0dG9uLk5PTkU7XG4gICAgfVxuICB9XG4gIHJldHVybiBjb2RlO1xufVxuXG5jb25zdCBTID0gU3RyaW5nLmZyb21DaGFyQ29kZTtcblxuLyoqXG4gKiBTdXBwb3J0ZWQgZGVmYXVsdCBlbmNvZGluZ3MuXG4gKi9cbmNvbnN0IERFRkFVTFRfRU5DT0RJTkdTOiB7W2tleTogc3RyaW5nXTogQ29yZU1vdXNlRW5jb2Rpbmd9ID0ge1xuICAvKipcbiAgICogREVGQVVMVCAtIENTSSBNIFBiIFB4IFB5XG4gICAqIFNpbmdsZSBieXRlIGVuY29kaW5nIGZvciBjb29yZHMgYW5kIGV2ZW50IGNvZGUuXG4gICAqIENhbiBlbmNvZGUgdmFsdWVzIHVwIHRvIDIyMyAoMS1iYXNlZCkuXG4gICAqL1xuICBERUZBVUxUOiAoZTogSUNvcmVNb3VzZUV2ZW50KSA9PiB7XG4gICAgY29uc3QgcGFyYW1zID0gW2V2ZW50Q29kZShlLCBmYWxzZSkgKyAzMiwgZS5jb2wgKyAzMiwgZS5yb3cgKyAzMl07XG4gICAgLy8gc3VwcmVzcyBtb3VzZSByZXBvcnQgaWYgd2UgZXhjZWVkIGFkZHJlc3NpYmxlIHJhbmdlXG4gICAgLy8gTm90ZSB0aGlzIGlzIGhhbmRsZWQgZGlmZmVyZW50bHkgYnkgZW11bGF0b3JzXG4gICAgLy8gLSB4dGVybTogICAgICAgICBzZW5kcyAwOzAgY29vcmRzIGluc3RlYWRcbiAgICAvLyAtIHZ0ZSwga29uc29sZTogIG5vIHJlcG9ydFxuICAgIGlmIChwYXJhbXNbMF0gPiAyNTUgfHwgcGFyYW1zWzFdID4gMjU1IHx8IHBhcmFtc1syXSA+IDI1NSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gYFxceDFiW00ke1MocGFyYW1zWzBdKX0ke1MocGFyYW1zWzFdKX0ke1MocGFyYW1zWzJdKX1gO1xuICB9LFxuICAvKipcbiAgICogU0dSIC0gQ1NJIDwgUGIgOyBQeCA7IFB5IE18bVxuICAgKiBObyBlbmNvZGluZyBsaW1pdGF0aW9uLlxuICAgKiBDYW4gcmVwb3J0IGJ1dHRvbiBvbiByZWxlYXNlIGFuZCB3b3JrcyB3aXRoIGEgd2VsbCBmb3JtZWQgc2VxdWVuY2UuXG4gICAqL1xuICBTR1I6IChlOiBJQ29yZU1vdXNlRXZlbnQpID0+IHtcbiAgICBjb25zdCBmaW5hbCA9IChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLlVQICYmIGUuYnV0dG9uICE9PSBDb3JlTW91c2VCdXR0b24uV0hFRUwpID8gJ20nIDogJ00nO1xuICAgIHJldHVybiBgXFx4MWJbPCR7ZXZlbnRDb2RlKGUsIHRydWUpfTske2UuY29sfTske2Uucm93fSR7ZmluYWx9YDtcbiAgfVxufTtcblxuLyoqXG4gKiBDb3JlTW91c2VTZXJ2aWNlXG4gKlxuICogUHJvdmlkZXMgbW91c2UgdHJhY2tpbmcgcmVwb3J0cyB3aXRoIGRpZmZlcmVudCBwcm90b2NvbHMgYW5kIGVuY29kaW5ncy5cbiAqICAtIHByb3RvY29sczogTk9ORSAoZGVmYXVsdCksIFgxMCwgVlQyMDAsIERSQUcsIEFOWVxuICogIC0gZW5jb2RpbmdzOiBERUZBVUxULCBTR1IgKFVURjgsIFVSWFZUIHJlbW92ZWQgaW4gIzI1MDcpXG4gKlxuICogQ3VzdG9tIHByb3RvY29scy9lbmNvZGluZ3MgY2FuIGJlIGFkZGVkIGJ5IGBhZGRQcm90b2NvbGAgLyBgYWRkRW5jb2RpbmdgLlxuICogVG8gYWN0aXZhdGUgYSBwcm90b2NvbC9lbmNvZGluZywgc2V0IGBhY3RpdmVQcm90b2NvbGAgLyBgYWN0aXZlRW5jb2RpbmdgLlxuICogU3dpdGNoaW5nIGEgcHJvdG9jb2wgd2lsbCBzZW5kIGEgbm90aWZpY2F0aW9uIGV2ZW50IGBvblByb3RvY29sQ2hhbmdlYFxuICogd2l0aCBhIGxpc3Qgb2YgbmVlZGVkIGV2ZW50cyB0byB0cmFjay5cbiAqXG4gKiBUaGUgc2VydmljZSBoYW5kbGVzIHRoZSBtb3VzZSB0cmFja2luZyBzdGF0ZSBhbmQgZGVjaWRlcyB3aGV0aGVyIHRvIHNlbmRcbiAqIGEgdHJhY2tpbmcgcmVwb3J0IHRvIHRoZSBiYWNrZW5kIGJhc2VkIG9uIHByb3RvY29sIGFuZCBlbmNvZGluZyBsaW1pdGF0aW9ucy5cbiAqIFRvIHNlbmQgYSBtb3VzZSBldmVudCBjYWxsIGB0cmlnZ2VyTW91c2VFdmVudGAuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb3JlTW91c2VTZXJ2aWNlIGltcGxlbWVudHMgSUNvcmVNb3VzZVNlcnZpY2Uge1xuICBwcml2YXRlIF9wcm90b2NvbHM6IHtbbmFtZTogc3RyaW5nXTogSUNvcmVNb3VzZVByb3RvY29sfSA9IHt9O1xuICBwcml2YXRlIF9lbmNvZGluZ3M6IHtbbmFtZTogc3RyaW5nXTogQ29yZU1vdXNlRW5jb2Rpbmd9ID0ge307XG4gIHByaXZhdGUgX2FjdGl2ZVByb3RvY29sOiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBfYWN0aXZlRW5jb2Rpbmc6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIF9vblByb3RvY29sQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxDb3JlTW91c2VFdmVudFR5cGU+KCk7XG4gIHByaXZhdGUgX2xhc3RFdmVudDogSUNvcmVNb3VzZUV2ZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIEBJQ29yZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfY29yZVNlcnZpY2U6IElDb3JlU2VydmljZVxuICApIHtcbiAgICAvLyByZWdpc3RlciBkZWZhdWx0IHByb3RvY29scyBhbmQgZW5jb2RpbmdzXG4gICAgT2JqZWN0LmtleXMoREVGQVVMVF9QUk9UT0NPTFMpLmZvckVhY2gobmFtZSA9PiB0aGlzLmFkZFByb3RvY29sKG5hbWUsIERFRkFVTFRfUFJPVE9DT0xTW25hbWVdKSk7XG4gICAgT2JqZWN0LmtleXMoREVGQVVMVF9FTkNPRElOR1MpLmZvckVhY2gobmFtZSA9PiB0aGlzLmFkZEVuY29kaW5nKG5hbWUsIERFRkFVTFRfRU5DT0RJTkdTW25hbWVdKSk7XG4gICAgLy8gY2FsbCByZXNldCB0byBzZXQgZGVmYXVsdHNcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxuICBwdWJsaWMgYWRkUHJvdG9jb2wobmFtZTogc3RyaW5nLCBwcm90b2NvbDogSUNvcmVNb3VzZVByb3RvY29sKTogdm9pZCB7XG4gICAgdGhpcy5fcHJvdG9jb2xzW25hbWVdID0gcHJvdG9jb2w7XG4gIH1cblxuICBwdWJsaWMgYWRkRW5jb2RpbmcobmFtZTogc3RyaW5nLCBlbmNvZGluZzogQ29yZU1vdXNlRW5jb2RpbmcpOiB2b2lkIHtcbiAgICB0aGlzLl9lbmNvZGluZ3NbbmFtZV0gPSBlbmNvZGluZztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYWN0aXZlUHJvdG9jb2woKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlUHJvdG9jb2w7XG4gIH1cblxuICBwdWJsaWMgc2V0IGFjdGl2ZVByb3RvY29sKG5hbWU6IHN0cmluZykge1xuICAgIGlmICghdGhpcy5fcHJvdG9jb2xzW25hbWVdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHVua25vd24gcHJvdG9jb2wgXCIke25hbWV9XCJgKTtcbiAgICB9XG4gICAgdGhpcy5fYWN0aXZlUHJvdG9jb2wgPSBuYW1lO1xuICAgIHRoaXMuX29uUHJvdG9jb2xDaGFuZ2UuZmlyZSh0aGlzLl9wcm90b2NvbHNbbmFtZV0uZXZlbnRzKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYWN0aXZlRW5jb2RpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlRW5jb2Rpbmc7XG4gIH1cblxuICBwdWJsaWMgc2V0IGFjdGl2ZUVuY29kaW5nKG5hbWU6IHN0cmluZykge1xuICAgIGlmICghdGhpcy5fZW5jb2RpbmdzW25hbWVdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHVua25vd24gZW5jb2RpbmcgXCIke25hbWV9XCJgKTtcbiAgICB9XG4gICAgdGhpcy5fYWN0aXZlRW5jb2RpbmcgPSBuYW1lO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuYWN0aXZlUHJvdG9jb2wgPSAnTk9ORSc7XG4gICAgdGhpcy5hY3RpdmVFbmNvZGluZyA9ICdERUZBVUxUJztcbiAgICB0aGlzLl9sYXN0RXZlbnQgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IHRvIGFubm91bmNlIGNoYW5nZXMgaW4gbW91c2UgdHJhY2tpbmcuXG4gICAqL1xuICBwdWJsaWMgZ2V0IG9uUHJvdG9jb2xDaGFuZ2UoKTogSUV2ZW50PENvcmVNb3VzZUV2ZW50VHlwZT4ge1xuICAgIHJldHVybiB0aGlzLl9vblByb3RvY29sQ2hhbmdlLmV2ZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIGEgbW91c2UgZXZlbnQgdG8gYmUgc2VudC5cbiAgICpcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBldmVudCBwYXNzZWQgYWxsIHByb3RvY29sIHJlc3RyaWN0aW9ucyBhbmQgYSByZXBvcnRcbiAgICogd2FzIHNlbnQsIG90aGVyd2lzZSBmYWxzZS4gVGhlIHJldHVybiB2YWx1ZSBtYXkgYmUgdXNlZCB0byBkZWNpZGUgd2hldGhlclxuICAgKiB0aGUgZGVmYXVsdCBldmVudCBhY3Rpb24gaW4gdGhlIGJvd3NlciBjb21wb25lbnQgc2hvdWxkIGJlIG9taXR0ZWQuXG4gICAqXG4gICAqIE5vdGU6IFRoZSBtZXRob2Qgd2lsbCBjaGFuZ2UgdmFsdWVzIG9mIHRoZSBnaXZlbiBldmVudCBvYmplY3RcbiAgICogdG8gZnVsbGZpbGwgcHJvdG9jb2wgYW5kIGVuY29kaW5nIHJlc3RyaWN0aW9ucy5cbiAgICovXG4gIHB1YmxpYyB0cmlnZ2VyTW91c2VFdmVudChlOiBJQ29yZU1vdXNlRXZlbnQpOiBib29sZWFuIHtcbiAgICAvLyByYW5nZSBjaGVjayBmb3IgY29sL3Jvd1xuICAgIGlmIChlLmNvbCA8IDAgfHwgZS5jb2wgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzXG4gICAgICAgIHx8IGUucm93IDwgMCB8fCBlLnJvdyA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBmaWx0ZXIgbm9uc2Vuc2UgY29tYmluYXRpb25zIG9mIGJ1dHRvbiArIGFjdGlvblxuICAgIGlmIChlLmJ1dHRvbiA9PT0gQ29yZU1vdXNlQnV0dG9uLldIRUVMICYmIGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uTU9WRSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZS5idXR0b24gPT09IENvcmVNb3VzZUJ1dHRvbi5OT05FICYmIGUuYWN0aW9uICE9PSBDb3JlTW91c2VBY3Rpb24uTU9WRSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZS5idXR0b24gIT09IENvcmVNb3VzZUJ1dHRvbi5XSEVFTCAmJiAoZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5MRUZUIHx8IGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uUklHSFQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gcmVwb3J0IDEtYmFzZWQgY29vcmRzXG4gICAgZS5jb2wrKztcbiAgICBlLnJvdysrO1xuXG4gICAgLy8gZGVib3VuY2UgbW92ZSBhdCBncmlkIGxldmVsXG4gICAgaWYgKGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uTU9WRSAmJiB0aGlzLl9sYXN0RXZlbnQgJiYgdGhpcy5fY29tcGFyZUV2ZW50cyh0aGlzLl9sYXN0RXZlbnQsIGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gYXBwbHkgcHJvdG9jb2wgcmVzdHJpY3Rpb25zXG4gICAgaWYgKCF0aGlzLl9wcm90b2NvbHNbdGhpcy5fYWN0aXZlUHJvdG9jb2xdLnJlc3RyaWN0KGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gZW5jb2RlIHJlcG9ydCBhbmQgc2VuZFxuICAgIGNvbnN0IHJlcG9ydCA9IHRoaXMuX2VuY29kaW5nc1t0aGlzLl9hY3RpdmVFbmNvZGluZ10oZSk7XG4gICAgaWYgKHJlcG9ydCkge1xuICAgICAgLy8gYWx3YXlzIHNlbmQgREVGQVVMVCBhcyBiaW5hcnkgZGF0YVxuICAgICAgaWYgKHRoaXMuX2FjdGl2ZUVuY29kaW5nID09PSAnREVGQVVMVCcpIHtcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckJpbmFyeUV2ZW50KHJlcG9ydCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHJlcG9ydCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fbGFzdEV2ZW50ID0gZTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGV4cGxhaW5FdmVudHMoZXZlbnRzOiBDb3JlTW91c2VFdmVudFR5cGUpOiB7W2V2ZW50OiBzdHJpbmddOiBib29sZWFufSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIERPV046ICEhKGV2ZW50cyAmIENvcmVNb3VzZUV2ZW50VHlwZS5ET1dOKSxcbiAgICAgIFVQOiAhIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuVVApLFxuICAgICAgRFJBRzogISEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLkRSQUcpLFxuICAgICAgTU9WRTogISEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLk1PVkUpLFxuICAgICAgV0hFRUw6ICEhKGV2ZW50cyAmIENvcmVNb3VzZUV2ZW50VHlwZS5XSEVFTClcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBfY29tcGFyZUV2ZW50cyhlMTogSUNvcmVNb3VzZUV2ZW50LCBlMjogSUNvcmVNb3VzZUV2ZW50KTogYm9vbGVhbiB7XG4gICAgaWYgKGUxLmNvbCAhPT0gZTIuY29sKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGUxLnJvdyAhPT0gZTIucm93KSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGUxLmJ1dHRvbiAhPT0gZTIuYnV0dG9uKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGUxLmFjdGlvbiAhPT0gZTIuYWN0aW9uKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGUxLmN0cmwgIT09IGUyLmN0cmwpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoZTEuYWx0ICE9PSBlMi5hbHQpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoZTEuc2hpZnQgIT09IGUyLnNoaWZ0KSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNvcmVTZXJ2aWNlLCBJTG9nU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlLCBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSURlY1ByaXZhdGVNb2RlcywgSUNoYXJzZXQgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgY2xvbmUgfSBmcm9tICdjb21tb24vQ2xvbmUnO1xuXG5jb25zdCBERUZBVUxUX0RFQ19QUklWQVRFX01PREVTOiBJRGVjUHJpdmF0ZU1vZGVzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGFwcGxpY2F0aW9uQ3Vyc29yS2V5czogZmFsc2UsXG4gIGFwcGxpY2F0aW9uS2V5cGFkOiBmYWxzZSxcbiAgb3JpZ2luOiBmYWxzZSxcbiAgd3JhcGFyb3VuZDogdHJ1ZSAvLyBkZWZhdWx0czogeHRlcm0gLSB0cnVlLCB2dDEwMCAtIGZhbHNlXG59KTtcblxuZXhwb3J0IGNsYXNzIENvcmVTZXJ2aWNlIGltcGxlbWVudHMgSUNvcmVTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHVibGljIGlzQ3Vyc29ySW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIGlzQ3Vyc29ySGlkZGVuOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBkZWNQcml2YXRlTW9kZXM6IElEZWNQcml2YXRlTW9kZXM7XG5cbiAgcHJpdmF0ZSBfb25EYXRhID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XG4gIHB1YmxpYyBnZXQgb25EYXRhKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX29uRGF0YS5ldmVudDsgfVxuICBwcml2YXRlIF9vblVzZXJJbnB1dCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvblVzZXJJbnB1dCgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25Vc2VySW5wdXQuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25CaW5hcnkgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcbiAgcHVibGljIGdldCBvbkJpbmFyeSgpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9vbkJpbmFyeS5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIC8vIFRPRE86IE1vdmUgdGhpcyBpbnRvIGEgc2VydmljZVxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3Njcm9sbFRvQm90dG9tOiAoKSA9PiB2b2lkLFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASUxvZ1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfbG9nU2VydmljZTogSUxvZ1NlcnZpY2UsXG4gICAgQElPcHRpb25zU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuZGVjUHJpdmF0ZU1vZGVzID0gY2xvbmUoREVGQVVMVF9ERUNfUFJJVkFURV9NT0RFUyk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5kZWNQcml2YXRlTW9kZXMgPSBjbG9uZShERUZBVUxUX0RFQ19QUklWQVRFX01PREVTKTtcbiAgfVxuXG4gIHB1YmxpYyB0cmlnZ2VyRGF0YUV2ZW50KGRhdGE6IHN0cmluZywgd2FzVXNlcklucHV0OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICAvLyBQcmV2ZW50cyBhbGwgZXZlbnRzIHRvIHB0eSBwcm9jZXNzIGlmIHN0ZGluIGlzIGRpc2FibGVkXG4gICAgaWYgKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZGlzYWJsZVN0ZGluKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW5wdXQgaXMgYmVpbmcgc2VudCB0byB0aGUgdGVybWluYWwsIHRoZSB0ZXJtaW5hbCBzaG91bGQgZm9jdXMgdGhlIHByb21wdC5cbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICBpZiAoYnVmZmVyLnliYXNlICE9PSBidWZmZXIueWRpc3ApIHtcbiAgICAgIHRoaXMuX3Njcm9sbFRvQm90dG9tKCk7XG4gICAgfVxuXG4gICAgLy8gRmlyZSBvblVzZXJJbnB1dCBzbyBsaXN0ZW5lcnMgY2FuIHJlYWN0IGFzIHdlbGwgKGVnLiBjbGVhciBzZWxlY3Rpb24pXG4gICAgaWYgKHdhc1VzZXJJbnB1dCkge1xuICAgICAgdGhpcy5fb25Vc2VySW5wdXQuZmlyZSgpO1xuICAgIH1cblxuICAgIC8vIEZpcmUgb25EYXRhIEFQSVxuICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoYHNlbmRpbmcgZGF0YSBcIiR7ZGF0YX1cImAsICgpID0+IGRhdGEuc3BsaXQoJycpLm1hcChlID0+IGUuY2hhckNvZGVBdCgwKSkpO1xuICAgIHRoaXMuX29uRGF0YS5maXJlKGRhdGEpO1xuICB9XG5cbiAgcHVibGljIHRyaWdnZXJCaW5hcnlFdmVudChkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5kaXNhYmxlU3RkaW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1Zyhgc2VuZGluZyBiaW5hcnkgXCIke2RhdGF9XCJgLCAoKSA9PiBkYXRhLnNwbGl0KCcnKS5tYXAoZSA9PiBlLmNoYXJDb2RlQXQoMCkpKTtcbiAgICB0aGlzLl9vbkJpbmFyeS5maXJlKGRhdGEpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJRGlydHlSb3dTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuZXhwb3J0IGNsYXNzIERpcnR5Um93U2VydmljZSBpbXBsZW1lbnRzIElEaXJ0eVJvd1NlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwcml2YXRlIF9zdGFydCE6IG51bWJlcjtcbiAgcHJpdmF0ZSBfZW5kITogbnVtYmVyO1xuXG4gIHB1YmxpYyBnZXQgc3RhcnQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX3N0YXJ0OyB9XG4gIHB1YmxpYyBnZXQgZW5kKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9lbmQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5jbGVhclJhbmdlKCk7XG4gIH1cblxuICBwdWJsaWMgY2xlYXJSYW5nZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9zdGFydCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnk7XG4gICAgdGhpcy5fZW5kID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueTtcbiAgfVxuXG4gIHB1YmxpYyBtYXJrRGlydHkoeTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHkgPCB0aGlzLl9zdGFydCkge1xuICAgICAgdGhpcy5fc3RhcnQgPSB5O1xuICAgIH0gZWxzZSBpZiAoeSA+IHRoaXMuX2VuZCkge1xuICAgICAgdGhpcy5fZW5kID0geTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbWFya1JhbmdlRGlydHkoeTE6IG51bWJlciwgeTI6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh5MSA+IHkyKSB7XG4gICAgICBjb25zdCB0ZW1wID0geTE7XG4gICAgICB5MSA9IHkyO1xuICAgICAgeTIgPSB0ZW1wO1xuICAgIH1cbiAgICBpZiAoeTEgPCB0aGlzLl9zdGFydCkge1xuICAgICAgdGhpcy5fc3RhcnQgPSB5MTtcbiAgICB9XG4gICAgaWYgKHkyID4gdGhpcy5fZW5kKSB7XG4gICAgICB0aGlzLl9lbmQgPSB5MjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbWFya0FsbERpcnR5KCk6IHZvaWQge1xuICAgIHRoaXMubWFya1JhbmdlRGlydHkoMCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKlxuICogVGhpcyB3YXMgaGVhdmlseSBpbnNwaXJlZCBmcm9tIG1pY3Jvc29mdC92c2NvZGUncyBkZXBlbmRlbmN5IGluamVjdGlvbiBzeXN0ZW0gKE1JVCkuXG4gKi9cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBJSW5zdGFudGlhdGlvblNlcnZpY2UsIElTZXJ2aWNlSWRlbnRpZmllciB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBnZXRTZXJ2aWNlRGVwZW5kZW5jaWVzIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VSZWdpc3RyeSc7XG5cbmV4cG9ydCBjbGFzcyBTZXJ2aWNlQ29sbGVjdGlvbiB7XG5cbiAgcHJpdmF0ZSBfZW50cmllcyA9IG5ldyBNYXA8SVNlcnZpY2VJZGVudGlmaWVyPGFueT4sIGFueT4oKTtcblxuICBjb25zdHJ1Y3RvciguLi5lbnRyaWVzOiBbSVNlcnZpY2VJZGVudGlmaWVyPGFueT4sIGFueV1bXSkge1xuICAgIGZvciAoY29uc3QgW2lkLCBzZXJ2aWNlXSBvZiBlbnRyaWVzKSB7XG4gICAgICB0aGlzLnNldChpZCwgc2VydmljZSk7XG4gICAgfVxuICB9XG5cbiAgc2V0PFQ+KGlkOiBJU2VydmljZUlkZW50aWZpZXI8VD4sIGluc3RhbmNlOiBUKTogVCB7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZW50cmllcy5nZXQoaWQpO1xuICAgIHRoaXMuX2VudHJpZXMuc2V0KGlkLCBpbnN0YW5jZSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZvckVhY2goY2FsbGJhY2s6IChpZDogSVNlcnZpY2VJZGVudGlmaWVyPGFueT4sIGluc3RhbmNlOiBhbnkpID0+IGFueSk6IHZvaWQge1xuICAgIHRoaXMuX2VudHJpZXMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4gY2FsbGJhY2soa2V5LCB2YWx1ZSkpO1xuICB9XG5cbiAgaGFzKGlkOiBJU2VydmljZUlkZW50aWZpZXI8YW55Pik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9lbnRyaWVzLmhhcyhpZCk7XG4gIH1cblxuICBnZXQ8VD4oaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxUPik6IFQge1xuICAgIHJldHVybiB0aGlzLl9lbnRyaWVzLmdldChpZCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEluc3RhbnRpYXRpb25TZXJ2aWNlIGltcGxlbWVudHMgSUluc3RhbnRpYXRpb25TZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBfc2VydmljZXM6IFNlcnZpY2VDb2xsZWN0aW9uID0gbmV3IFNlcnZpY2VDb2xsZWN0aW9uKCk7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc2VydmljZXMuc2V0KElJbnN0YW50aWF0aW9uU2VydmljZSwgdGhpcyk7XG4gIH1cblxuICBwdWJsaWMgc2V0U2VydmljZTxUPihpZDogSVNlcnZpY2VJZGVudGlmaWVyPFQ+LCBpbnN0YW5jZTogVCk6IHZvaWQge1xuICAgIHRoaXMuX3NlcnZpY2VzLnNldChpZCwgaW5zdGFuY2UpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZUluc3RhbmNlPFQ+KGN0b3I6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnkge1xuICAgIGNvbnN0IHNlcnZpY2VEZXBlbmRlbmNpZXMgPSBnZXRTZXJ2aWNlRGVwZW5kZW5jaWVzKGN0b3IpLnNvcnQoKGEsIGIpID0+IGEuaW5kZXggLSBiLmluZGV4KTtcblxuICAgIGNvbnN0IHNlcnZpY2VBcmdzOiBhbnlbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgZGVwZW5kZW5jeSBvZiBzZXJ2aWNlRGVwZW5kZW5jaWVzKSB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gdGhpcy5fc2VydmljZXMuZ2V0KGRlcGVuZGVuY3kuaWQpO1xuICAgICAgaWYgKCFzZXJ2aWNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgW2NyZWF0ZUluc3RhbmNlXSAke2N0b3IubmFtZX0gZGVwZW5kcyBvbiBVTktOT1dOIHNlcnZpY2UgJHtkZXBlbmRlbmN5LmlkfS5gKTtcbiAgICAgIH1cbiAgICAgIHNlcnZpY2VBcmdzLnB1c2goc2VydmljZSk7XG4gICAgfVxuXG4gICAgY29uc3QgZmlyc3RTZXJ2aWNlQXJnUG9zID0gc2VydmljZURlcGVuZGVuY2llcy5sZW5ndGggPiAwID8gc2VydmljZURlcGVuZGVuY2llc1swXS5pbmRleCA6IGFyZ3MubGVuZ3RoO1xuXG4gICAgLy8gY2hlY2sgZm9yIGFyZ3VtZW50IG1pc21hdGNoZXMsIGFkanVzdCBzdGF0aWMgYXJncyBpZiBuZWVkZWRcbiAgICBpZiAoYXJncy5sZW5ndGggIT09IGZpcnN0U2VydmljZUFyZ1Bvcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBbY3JlYXRlSW5zdGFuY2VdIEZpcnN0IHNlcnZpY2UgZGVwZW5kZW5jeSBvZiAke2N0b3IubmFtZX0gYXQgcG9zaXRpb24gJHtmaXJzdFNlcnZpY2VBcmdQb3MgKyAxfSBjb25mbGljdHMgd2l0aCAke2FyZ3MubGVuZ3RofSBzdGF0aWMgYXJndW1lbnRzYCk7XG4gICAgfVxuXG4gICAgLy8gbm93IGNyZWF0ZSB0aGUgaW5zdGFuY2VcbiAgICByZXR1cm4gPFQ+bmV3IGN0b3IoLi4uWy4uLmFyZ3MsIC4uLnNlcnZpY2VBcmdzXSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUxvZ1NlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbnR5cGUgTG9nVHlwZSA9IChtZXNzYWdlPzogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pID0+IHZvaWQ7XG5cbmludGVyZmFjZSBJQ29uc29sZSB7XG4gIGxvZzogTG9nVHlwZTtcbiAgZXJyb3I6IExvZ1R5cGU7XG4gIGluZm86IExvZ1R5cGU7XG4gIHRyYWNlOiBMb2dUeXBlO1xuICB3YXJuOiBMb2dUeXBlO1xufVxuXG4vLyBjb25zb2xlIGlzIGF2YWlsYWJsZSBvbiBib3RoIG5vZGUuanMgYW5kIGJyb3dzZXIgY29udGV4dHMgYnV0IHRoZSBjb21tb25cbi8vIG1vZHVsZSBkb2Vzbid0IGRlcGVuZCBvbiB0aGVtIHNvIHdlIG5lZWQgdG8gZXhwbGljaXRseSBkZWNsYXJlIGl0LlxuZGVjbGFyZSBjb25zdCBjb25zb2xlOiBJQ29uc29sZTtcblxuXG5leHBvcnQgZW51bSBMb2dMZXZlbCB7XG4gIERFQlVHID0gMCxcbiAgSU5GTyA9IDEsXG4gIFdBUk4gPSAyLFxuICBFUlJPUiA9IDMsXG4gIE9GRiA9IDRcbn1cblxuY29uc3Qgb3B0aW9uc0tleVRvTG9nTGV2ZWw6IHsgW2tleTogc3RyaW5nXTogTG9nTGV2ZWwgfSA9IHtcbiAgZGVidWc6IExvZ0xldmVsLkRFQlVHLFxuICBpbmZvOiBMb2dMZXZlbC5JTkZPLFxuICB3YXJuOiBMb2dMZXZlbC5XQVJOLFxuICBlcnJvcjogTG9nTGV2ZWwuRVJST1IsXG4gIG9mZjogTG9nTGV2ZWwuT0ZGXG59O1xuXG5jb25zdCBMT0dfUFJFRklYID0gJ3h0ZXJtLmpzOiAnO1xuXG5leHBvcnQgY2xhc3MgTG9nU2VydmljZSBpbXBsZW1lbnRzIElMb2dTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHJpdmF0ZSBfbG9nTGV2ZWwhOiBMb2dMZXZlbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5fdXBkYXRlTG9nTGV2ZWwoKTtcbiAgICB0aGlzLl9vcHRpb25zU2VydmljZS5vbk9wdGlvbkNoYW5nZShrZXkgPT4ge1xuICAgICAgaWYgKGtleSA9PT0gJ2xvZ0xldmVsJykge1xuICAgICAgICB0aGlzLl91cGRhdGVMb2dMZXZlbCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlTG9nTGV2ZWwoKTogdm9pZCB7XG4gICAgdGhpcy5fbG9nTGV2ZWwgPSBvcHRpb25zS2V5VG9Mb2dMZXZlbFt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxvZ0xldmVsXTtcbiAgfVxuXG4gIHByaXZhdGUgX2V2YWxMYXp5T3B0aW9uYWxQYXJhbXMob3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25hbFBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25hbFBhcmFtc1tpXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBvcHRpb25hbFBhcmFtc1tpXSA9IG9wdGlvbmFsUGFyYW1zW2ldKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfbG9nKHR5cGU6IExvZ1R5cGUsIG1lc3NhZ2U6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgdGhpcy5fZXZhbExhenlPcHRpb25hbFBhcmFtcyhvcHRpb25hbFBhcmFtcyk7XG4gICAgdHlwZS5jYWxsKGNvbnNvbGUsIExPR19QUkVGSVggKyBtZXNzYWdlLCAuLi5vcHRpb25hbFBhcmFtcyk7XG4gIH1cblxuICBkZWJ1ZyhtZXNzYWdlOiBzdHJpbmcsIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9sb2dMZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgdGhpcy5fbG9nKGNvbnNvbGUubG9nLCBtZXNzYWdlLCBvcHRpb25hbFBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgaW5mbyhtZXNzYWdlOiBzdHJpbmcsIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9sb2dMZXZlbCA8PSBMb2dMZXZlbC5JTkZPKSB7XG4gICAgICB0aGlzLl9sb2coY29uc29sZS5pbmZvLCBtZXNzYWdlLCBvcHRpb25hbFBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgd2FybihtZXNzYWdlOiBzdHJpbmcsIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9sb2dMZXZlbCA8PSBMb2dMZXZlbC5XQVJOKSB7XG4gICAgICB0aGlzLl9sb2coY29uc29sZS53YXJuLCBtZXNzYWdlLCBvcHRpb25hbFBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbG9nTGV2ZWwgPD0gTG9nTGV2ZWwuRVJST1IpIHtcbiAgICAgIHRoaXMuX2xvZyhjb25zb2xlLmVycm9yLCBtZXNzYWdlLCBvcHRpb25hbFBhcmFtcyk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElPcHRpb25zU2VydmljZSwgSVRlcm1pbmFsT3B0aW9ucywgSVBhcnRpYWxUZXJtaW5hbE9wdGlvbnMgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IGlzTWFjIH0gZnJvbSAnY29tbW9uL1BsYXRmb3JtJztcbmltcG9ydCB7IGNsb25lIH0gZnJvbSAnY29tbW9uL0Nsb25lJztcblxuLy8gU291cmNlOiBodHRwczovL2ZyZWVzb3VuZC5vcmcvcGVvcGxlL2FsdGVtYXJrL3NvdW5kcy80NTc1OS9cbi8vIFRoaXMgc291bmQgaXMgcmVsZWFzZWQgdW5kZXIgdGhlIENyZWF0aXZlIENvbW1vbnMgQXR0cmlidXRpb24gMy4wIFVucG9ydGVkXG4vLyAoQ0MgQlkgMy4wKSBsaWNlbnNlLiBJdCB3YXMgY3JlYXRlZCBieSAnYWx0ZW1hcmsnLiBObyBtb2RpZmljYXRpb25zIGhhdmUgYmVlblxuLy8gbWFkZSwgYXBhcnQgZnJvbSB0aGUgY29udmVyc2lvbiB0byBiYXNlNjQuXG5leHBvcnQgY29uc3QgREVGQVVMVF9CRUxMX1NPVU5EID0gJ2RhdGE6YXVkaW8vbXAzO2Jhc2U2NCxTVVF6QkFBQUFBQUFJMVJUVTBVQUFBQVBBQUFEVEdGMlpqVTRMak15TGpFd05BQUFBQUFBQUFBQUFBQUEvL3RReEFBREI4QWhTbXhoSUlFVkNTaUpyRENRQlRjdTNVckFJd1Vka1JnUWJGQVpDMUNRRXdUSjltalJ2QkE0VU9MRDhuS1ZPV2ZoK1VsSzN6LzE3N09YcmZPZEtsN3B5bjNYZi8vV3JleVRSVW9BV2dCZ2tPQUdiWkhCZ0cxT0Y2ek04MkRXYlphVW1NQnB0Z1FoR2pzeVlxYzlhZTlYRnoyODA5NDhOTUJXSW5sanl6c05SRkxQV2RuWkdXcmRkRHNqSzF1bnVTclZOOWpKc0s4S3VRdFFDdE1CakNFdEltSVNkTktKT29wSXBCRnBOU01iSUhDU1JwUlI1aWFralRpeXpMaGNoVVVCd0NneUtpd2VCdi83VXNRYmc4aXNWTm9NUE1qQUFBQTBnQUFBQkVWRkdtZ3FLLy8vLzliUC82WEN5a3hCVFVVekxqRXdNS3FxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxJztcblxuLy8gVE9ETzogRnJlZXplP1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1BUSU9OUzogSVRlcm1pbmFsT3B0aW9ucyA9IE9iamVjdC5mcmVlemUoe1xuICBjb2xzOiA4MCxcbiAgcm93czogMjQsXG4gIGN1cnNvckJsaW5rOiBmYWxzZSxcbiAgY3Vyc29yU3R5bGU6ICdibG9jaycsXG4gIGN1cnNvcldpZHRoOiAxLFxuICBiZWxsU291bmQ6ICBERUZBVUxUX0JFTExfU09VTkQsXG4gIGJlbGxTdHlsZTogJ25vbmUnLFxuICBkcmF3Qm9sZFRleHRJbkJyaWdodENvbG9yczogdHJ1ZSxcbiAgZmFzdFNjcm9sbE1vZGlmaWVyOiAnYWx0JyxcbiAgZmFzdFNjcm9sbFNlbnNpdGl2aXR5OiA1LFxuICBmb250RmFtaWx5OiAnY291cmllci1uZXcsIGNvdXJpZXIsIG1vbm9zcGFjZScsXG4gIGZvbnRTaXplOiAxNSxcbiAgZm9udFdlaWdodDogJ25vcm1hbCcsXG4gIGZvbnRXZWlnaHRCb2xkOiAnYm9sZCcsXG4gIGxpbmVIZWlnaHQ6IDEuMCxcbiAgbGV0dGVyU3BhY2luZzogMCxcbiAgbG9nTGV2ZWw6ICdpbmZvJyxcbiAgc2Nyb2xsYmFjazogMTAwMCxcbiAgc2Nyb2xsU2Vuc2l0aXZpdHk6IDEsXG4gIHNjcmVlblJlYWRlck1vZGU6IGZhbHNlLFxuICBtYWNPcHRpb25Jc01ldGE6IGZhbHNlLFxuICBtYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbjogZmFsc2UsXG4gIG1pbmltdW1Db250cmFzdFJhdGlvOiAxLFxuICBkaXNhYmxlU3RkaW46IGZhbHNlLFxuICBhbGxvd1RyYW5zcGFyZW5jeTogZmFsc2UsXG4gIHRhYlN0b3BXaWR0aDogOCxcbiAgdGhlbWU6IHt9LFxuICByaWdodENsaWNrU2VsZWN0c1dvcmQ6IGlzTWFjLFxuICByZW5kZXJlclR5cGU6ICdjYW52YXMnLFxuICB3aW5kb3dzTW9kZTogZmFsc2UsXG5cbiAgY29udmVydEVvbDogZmFsc2UsXG4gIHRlcm1OYW1lOiAneHRlcm0nLFxuICBzY3JlZW5LZXlzOiBmYWxzZSxcbiAgY2FuY2VsRXZlbnRzOiBmYWxzZSxcbiAgdXNlRmxvd0NvbnRyb2w6IGZhbHNlLFxuICB3b3JkU2VwYXJhdG9yOiAnICgpW117fVxcJyw6O1wiYCdcbn0pO1xuXG4vKipcbiAqIFRoZSBzZXQgb2Ygb3B0aW9ucyB0aGF0IG9ubHkgaGF2ZSBhbiBlZmZlY3Qgd2hlbiBzZXQgaW4gdGhlIFRlcm1pbmFsIGNvbnN0cnVjdG9yLlxuICovXG5jb25zdCBDT05TVFJVQ1RPUl9PTkxZX09QVElPTlMgPSBbJ2NvbHMnLCAncm93cyddO1xuXG5leHBvcnQgY2xhc3MgT3B0aW9uc1NlcnZpY2UgaW1wbGVtZW50cyBJT3B0aW9uc1NlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwdWJsaWMgb3B0aW9uczogSVRlcm1pbmFsT3B0aW9ucztcblxuICBwcml2YXRlIF9vbk9wdGlvbkNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICBwdWJsaWMgZ2V0IG9uT3B0aW9uQ2hhbmdlKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX29uT3B0aW9uQ2hhbmdlLmV2ZW50OyB9XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogSVBhcnRpYWxUZXJtaW5hbE9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBjbG9uZShERUZBVUxUX09QVElPTlMpO1xuICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goayA9PiB7XG4gICAgICBpZiAoayBpbiB0aGlzLm9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBvcHRpb25zW2sgYXMga2V5b2YgSVBhcnRpYWxUZXJtaW5hbE9wdGlvbnNdIGFzIGFueTtcbiAgICAgICAgdGhpcy5vcHRpb25zW2tdID0gbmV3VmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgaWYgKCEoa2V5IGluIERFRkFVTFRfT1BUSU9OUykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gb3B0aW9uIHdpdGgga2V5IFwiJyArIGtleSArICdcIicpO1xuICAgIH1cbiAgICBpZiAoQ09OU1RSVUNUT1JfT05MWV9PUFRJT05TLmluZGV4T2Yoa2V5KSAhPT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgT3B0aW9uIFwiJHtrZXl9XCIgY2FuIG9ubHkgYmUgc2V0IGluIHRoZSBjb25zdHJ1Y3RvcmApO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zW2tleV0gPT09IHZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFsdWUgPSB0aGlzLl9zYW5pdGl6ZUFuZFZhbGlkYXRlT3B0aW9uKGtleSwgdmFsdWUpO1xuXG4gICAgLy8gRG9uJ3QgZmlyZSBhbiBvcHRpb24gY2hhbmdlIGV2ZW50IGlmIHRoZXkgZGlkbid0IGNoYW5nZVxuICAgIGlmICh0aGlzLm9wdGlvbnNba2V5XSA9PT0gdmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm9wdGlvbnNba2V5XSA9IHZhbHVlO1xuICAgIHRoaXMuX29uT3B0aW9uQ2hhbmdlLmZpcmUoa2V5KTtcbiAgfVxuXG4gIHByaXZhdGUgX3Nhbml0aXplQW5kVmFsaWRhdGVPcHRpb24oa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBhbnkge1xuICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICBjYXNlICdiZWxsU3R5bGUnOlxuICAgICAgY2FzZSAnY3Vyc29yU3R5bGUnOlxuICAgICAgY2FzZSAnZm9udFdlaWdodCc6XG4gICAgICBjYXNlICdmb250V2VpZ2h0Qm9sZCc6XG4gICAgICBjYXNlICdyZW5kZXJlclR5cGUnOlxuICAgICAgY2FzZSAnd29yZFNlcGFyYXRvcic6XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZSA9IERFRkFVTFRfT1BUSU9OU1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY3Vyc29yV2lkdGgnOlxuICAgICAgICB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpO1xuICAgICAgICAvLyBGYWxsIHRocm91Z2ggZm9yIGJvdW5kcyBjaGVja1xuICAgICAgY2FzZSAnbGluZUhlaWdodCc6XG4gICAgICBjYXNlICd0YWJTdG9wV2lkdGgnOlxuICAgICAgICBpZiAodmFsdWUgPCAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2tleX0gY2Fubm90IGJlIGxlc3MgdGhhbiAxLCB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ21pbmltdW1Db250cmFzdFJhdGlvJzpcbiAgICAgICAgdmFsdWUgPSBNYXRoLm1heCgxLCBNYXRoLm1pbigyMSwgTWF0aC5yb3VuZCh2YWx1ZSAqIDEwKSAvIDEwKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2Nyb2xsYmFjayc6XG4gICAgICAgIHZhbHVlID0gTWF0aC5taW4odmFsdWUsIDQyOTQ5NjcyOTUpO1xuICAgICAgICBpZiAodmFsdWUgPCAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2tleX0gY2Fubm90IGJlIGxlc3MgdGhhbiAwLCB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Zhc3RTY3JvbGxTZW5zaXRpdml0eSc6XG4gICAgICBjYXNlICdzY3JvbGxTZW5zaXRpdml0eSc6XG4gICAgICAgIGlmICh2YWx1ZSA8PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2tleX0gY2Fubm90IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byAwLCB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgcHVibGljIGdldE9wdGlvbihrZXk6IHN0cmluZyk6IGFueSB7XG4gICAgaWYgKCEoa2V5IGluIERFRkFVTFRfT1BUSU9OUykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gb3B0aW9uIHdpdGgga2V5IFwiJHtrZXl9XCJgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub3B0aW9uc1trZXldO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICpcbiAqIFRoaXMgd2FzIGhlYXZpbHkgaW5zcGlyZWQgZnJvbSBtaWNyb3NvZnQvdnNjb2RlJ3MgZGVwZW5kZW5jeSBpbmplY3Rpb24gc3lzdGVtIChNSVQpLlxuICovXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgSVNlcnZpY2VJZGVudGlmaWVyIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuY29uc3QgRElfVEFSR0VUID0gJ2RpJHRhcmdldCc7XG5jb25zdCBESV9ERVBFTkRFTkNJRVMgPSAnZGkkZGVwZW5kZW5jaWVzJztcblxuZXhwb3J0IGNvbnN0IHNlcnZpY2VSZWdpc3RyeTogTWFwPHN0cmluZywgSVNlcnZpY2VJZGVudGlmaWVyPGFueT4+ID0gbmV3IE1hcCgpO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZURlcGVuZGVuY2llcyhjdG9yOiBhbnkpOiB7IGlkOiBJU2VydmljZUlkZW50aWZpZXI8YW55PiwgaW5kZXg6IG51bWJlciwgb3B0aW9uYWw6IGJvb2xlYW4gfVtdIHtcbiAgcmV0dXJuIGN0b3JbRElfREVQRU5ERU5DSUVTXSB8fCBbXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURlY29yYXRvcjxUPihpZDogc3RyaW5nKTogSVNlcnZpY2VJZGVudGlmaWVyPFQ+IHtcbiAgaWYgKHNlcnZpY2VSZWdpc3RyeS5oYXMoaWQpKSB7XG4gICAgcmV0dXJuIHNlcnZpY2VSZWdpc3RyeS5nZXQoaWQpITtcbiAgfVxuXG4gIGNvbnN0IGRlY29yYXRvciA9IDxhbnk+ZnVuY3Rpb24gKHRhcmdldDogRnVuY3Rpb24sIGtleTogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogYW55IHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAhPT0gMykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdASVNlcnZpY2VOYW1lLWRlY29yYXRvciBjYW4gb25seSBiZSB1c2VkIHRvIGRlY29yYXRlIGEgcGFyYW1ldGVyJyk7XG4gICAgfVxuXG4gICAgc3RvcmVTZXJ2aWNlRGVwZW5kZW5jeShkZWNvcmF0b3IsIHRhcmdldCwgaW5kZXgpO1xuICB9O1xuXG4gIGRlY29yYXRvci50b1N0cmluZyA9ICgpID0+IGlkO1xuXG4gIHNlcnZpY2VSZWdpc3RyeS5zZXQoaWQsIGRlY29yYXRvcik7XG4gIHJldHVybiBkZWNvcmF0b3I7XG59XG5cbmZ1bmN0aW9uIHN0b3JlU2VydmljZURlcGVuZGVuY3koaWQ6IEZ1bmN0aW9uLCB0YXJnZXQ6IEZ1bmN0aW9uLCBpbmRleDogbnVtYmVyKTogdm9pZCB7XG4gIGlmICgodGFyZ2V0IGFzIGFueSlbRElfVEFSR0VUXSA9PT0gdGFyZ2V0KSB7XG4gICAgKHRhcmdldCBhcyBhbnkpW0RJX0RFUEVOREVOQ0lFU10ucHVzaCh7IGlkLCBpbmRleCB9KTtcbiAgfSBlbHNlIHtcbiAgICAodGFyZ2V0IGFzIGFueSlbRElfREVQRU5ERU5DSUVTXSA9IFt7IGlkLCBpbmRleCB9XTtcbiAgICAodGFyZ2V0IGFzIGFueSlbRElfVEFSR0VUXSA9IHRhcmdldDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IElCdWZmZXIsIElCdWZmZXJTZXQgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IElEZWNQcml2YXRlTW9kZXMsIElDb3JlTW91c2VFdmVudCwgQ29yZU1vdXNlRW5jb2RpbmcsIElDb3JlTW91c2VQcm90b2NvbCwgQ29yZU1vdXNlRXZlbnRUeXBlLCBJQ2hhcnNldCB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBjcmVhdGVEZWNvcmF0b3IgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZVJlZ2lzdHJ5JztcblxuZXhwb3J0IGNvbnN0IElCdWZmZXJTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElCdWZmZXJTZXJ2aWNlPignQnVmZmVyU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJQnVmZmVyU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHJlYWRvbmx5IGNvbHM6IG51bWJlcjtcbiAgcmVhZG9ubHkgcm93czogbnVtYmVyO1xuICByZWFkb25seSBidWZmZXI6IElCdWZmZXI7XG4gIHJlYWRvbmx5IGJ1ZmZlcnM6IElCdWZmZXJTZXQ7XG5cbiAgLy8gVE9ETzogTW92ZSByZXNpemUgZXZlbnQgaGVyZVxuXG4gIHJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQ7XG4gIHJlc2V0KCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBJQ29yZU1vdXNlU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJQ29yZU1vdXNlU2VydmljZT4oJ0NvcmVNb3VzZVNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSUNvcmVNb3VzZVNlcnZpY2Uge1xuICBhY3RpdmVQcm90b2NvbDogc3RyaW5nO1xuICBhY3RpdmVFbmNvZGluZzogc3RyaW5nO1xuICBhZGRQcm90b2NvbChuYW1lOiBzdHJpbmcsIHByb3RvY29sOiBJQ29yZU1vdXNlUHJvdG9jb2wpOiB2b2lkO1xuICBhZGRFbmNvZGluZyhuYW1lOiBzdHJpbmcsIGVuY29kaW5nOiBDb3JlTW91c2VFbmNvZGluZyk6IHZvaWQ7XG4gIHJlc2V0KCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIGEgbW91c2UgZXZlbnQgdG8gYmUgc2VudC5cbiAgICpcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBldmVudCBwYXNzZWQgYWxsIHByb3RvY29sIHJlc3RyaWN0aW9ucyBhbmQgYSByZXBvcnRcbiAgICogd2FzIHNlbnQsIG90aGVyd2lzZSBmYWxzZS4gVGhlIHJldHVybiB2YWx1ZSBtYXkgYmUgdXNlZCB0byBkZWNpZGUgd2hldGhlclxuICAgKiB0aGUgZGVmYXVsdCBldmVudCBhY3Rpb24gaW4gdGhlIGJvd3NlciBjb21wb25lbnQgc2hvdWxkIGJlIG9taXR0ZWQuXG4gICAqXG4gICAqIE5vdGU6IFRoZSBtZXRob2Qgd2lsbCBjaGFuZ2UgdmFsdWVzIG9mIHRoZSBnaXZlbiBldmVudCBvYmplY3RcbiAgICogdG8gZnVsbGZpbGwgcHJvdG9jb2wgYW5kIGVuY29kaW5nIHJlc3RyaWN0aW9ucy5cbiAgICovXG4gIHRyaWdnZXJNb3VzZUV2ZW50KGV2ZW50OiBJQ29yZU1vdXNlRXZlbnQpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBFdmVudCB0byBhbm5vdW5jZSBjaGFuZ2VzIGluIG1vdXNlIHRyYWNraW5nLlxuICAgKi9cbiAgb25Qcm90b2NvbENoYW5nZTogSUV2ZW50PENvcmVNb3VzZUV2ZW50VHlwZT47XG5cbiAgLyoqXG4gICAqIEh1bWFuIHJlYWRhYmxlIHZlcnNpb24gb2YgbW91c2UgZXZlbnRzLlxuICAgKi9cbiAgZXhwbGFpbkV2ZW50cyhldmVudHM6IENvcmVNb3VzZUV2ZW50VHlwZSk6IHtbZXZlbnQ6IHN0cmluZ106IGJvb2xlYW59O1xufVxuXG5leHBvcnQgY29uc3QgSUNvcmVTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElDb3JlU2VydmljZT4oJ0NvcmVTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElDb3JlU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsbHkgdGhlIGN1cnNvciB3aWxsIG5vdCBiZSB2aXNpYmxlIHVudGlsIHRoZSBmaXJzdCB0aW1lIHRoZSB0ZXJtaW5hbFxuICAgKiBpcyBmb2N1c2VkLlxuICAgKi9cbiAgaXNDdXJzb3JJbml0aWFsaXplZDogYm9vbGVhbjtcbiAgaXNDdXJzb3JIaWRkZW46IGJvb2xlYW47XG5cbiAgcmVhZG9ubHkgZGVjUHJpdmF0ZU1vZGVzOiBJRGVjUHJpdmF0ZU1vZGVzO1xuXG4gIHJlYWRvbmx5IG9uRGF0YTogSUV2ZW50PHN0cmluZz47XG4gIHJlYWRvbmx5IG9uVXNlcklucHV0OiBJRXZlbnQ8dm9pZD47XG4gIHJlYWRvbmx5IG9uQmluYXJ5OiBJRXZlbnQ8c3RyaW5nPjtcblxuICByZXNldCgpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyB0aGUgb25EYXRhIGV2ZW50IGluIHRoZSBwdWJsaWMgQVBJLlxuICAgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0aGF0IGlzIGJlaW5nIGVtaXR0ZWQuXG4gICAqIEBwYXJhbSB3YXNGcm9tVXNlciBXaGV0aGVyIHRoZSBkYXRhIG9yaWdpbmF0ZWQgZnJvbSB0aGUgdXNlciAoYXMgb3Bwb3NlZCB0b1xuICAgKiByZXN1bHRpbmcgZnJvbSBwYXJzaW5nIGluY29taW5nIGRhdGEpLiBXaGVuIHRydWUgdGhpcyB3aWxsIGFsc286XG4gICAqIC0gU2Nyb2xsIHRvIHRoZSBib3R0b20gb2YgdGhlIGJ1ZmZlci5zXG4gICAqIC0gRmlyZSB0aGUgYG9uVXNlcklucHV0YCBldmVudCAoc28gc2VsZWN0aW9uIGNhbiBiZSBjbGVhcmVkKS5cbiAgICovXG4gIHRyaWdnZXJEYXRhRXZlbnQoZGF0YTogc3RyaW5nLCB3YXNVc2VySW5wdXQ/OiBib29sZWFuKTogdm9pZDtcblxuICAvKipcbiAgICogVHJpZ2dlcnMgdGhlIG9uQmluYXJ5IGV2ZW50IGluIHRoZSBwdWJsaWMgQVBJLlxuICAgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0aGF0IGlzIGJlaW5nIGVtaXR0ZWQuXG4gICAqL1xuICAgdHJpZ2dlckJpbmFyeUV2ZW50KGRhdGE6IHN0cmluZyk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBJQ2hhcnNldFNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SUNoYXJzZXRTZXJ2aWNlPignQ2hhcnNldFNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSUNoYXJzZXRTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgY2hhcnNldDogSUNoYXJzZXQgfCB1bmRlZmluZWQ7XG4gIHJlYWRvbmx5IGdsZXZlbDogbnVtYmVyO1xuICByZWFkb25seSBjaGFyc2V0czogUmVhZG9ubHlBcnJheTxJQ2hhcnNldD47XG5cbiAgcmVzZXQoKTogdm9pZDtcblxuICAvKipcbiAgICogU2V0IHRoZSBHIGxldmVsIG9mIHRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIGdcbiAgICovXG4gICBzZXRnTGV2ZWwoZzogbnVtYmVyKTogdm9pZDtcblxuICAvKipcbiAgICogU2V0IHRoZSBjaGFyc2V0IGZvciB0aGUgZ2l2ZW4gRyBsZXZlbCBvZiB0aGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSBnXG4gICAqIEBwYXJhbSBjaGFyc2V0XG4gICAqL1xuICBzZXRnQ2hhcnNldChnOiBudW1iZXIsIGNoYXJzZXQ6IElDaGFyc2V0KTogdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IElEaXJ0eVJvd1NlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SURpcnR5Um93U2VydmljZT4oJ0RpcnR5Um93U2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJRGlydHlSb3dTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcmVhZG9ubHkgc3RhcnQ6IG51bWJlcjtcbiAgcmVhZG9ubHkgZW5kOiBudW1iZXI7XG5cbiAgY2xlYXJSYW5nZSgpOiB2b2lkO1xuICBtYXJrRGlydHkoeTogbnVtYmVyKTogdm9pZDtcbiAgbWFya1JhbmdlRGlydHkoeTE6IG51bWJlciwgeTI6IG51bWJlcik6IHZvaWQ7XG4gIG1hcmtBbGxEaXJ0eSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTZXJ2aWNlSWRlbnRpZmllcjxUPiB7XG4gICguLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gIHR5cGU6IFQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbnN0cnVjdG9yU2lnbmF0dXJlMDxUPiB7XG4gIG5ldyguLi5zZXJ2aWNlczogeyBzZXJ2aWNlQnJhbmQ6IGFueTsgfVtdKTogVDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ29uc3RydWN0b3JTaWduYXR1cmUxPEExLCBUPiB7XG4gIG5ldyhmaXJzdDogQTEsIC4uLnNlcnZpY2VzOiB7IHNlcnZpY2VCcmFuZDogYW55OyB9W10pOiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb25zdHJ1Y3RvclNpZ25hdHVyZTI8QTEsIEEyLCBUPiB7XG4gIG5ldyhmaXJzdDogQTEsIHNlY29uZDogQTIsIC4uLnNlcnZpY2VzOiB7IHNlcnZpY2VCcmFuZDogYW55OyB9W10pOiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb25zdHJ1Y3RvclNpZ25hdHVyZTM8QTEsIEEyLCBBMywgVD4ge1xuICBuZXcoZmlyc3Q6IEExLCBzZWNvbmQ6IEEyLCB0aGlyZDogQTMsIC4uLnNlcnZpY2VzOiB7IHNlcnZpY2VCcmFuZDogYW55OyB9W10pOiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb25zdHJ1Y3RvclNpZ25hdHVyZTQ8QTEsIEEyLCBBMywgQTQsIFQ+IHtcbiAgbmV3KGZpcnN0OiBBMSwgc2Vjb25kOiBBMiwgdGhpcmQ6IEEzLCBmb3VydGg6IEE0LCAuLi5zZXJ2aWNlczogeyBzZXJ2aWNlQnJhbmQ6IGFueTsgfVtdKTogVDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ29uc3RydWN0b3JTaWduYXR1cmU1PEExLCBBMiwgQTMsIEE0LCBBNSwgVD4ge1xuICBuZXcoZmlyc3Q6IEExLCBzZWNvbmQ6IEEyLCB0aGlyZDogQTMsIGZvdXJ0aDogQTQsIGZpZnRoOiBBNSwgLi4uc2VydmljZXM6IHsgc2VydmljZUJyYW5kOiBhbnk7IH1bXSk6IFQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbnN0cnVjdG9yU2lnbmF0dXJlNjxBMSwgQTIsIEEzLCBBNCwgQTUsIEE2LCBUPiB7XG4gIG5ldyhmaXJzdDogQTEsIHNlY29uZDogQTIsIHRoaXJkOiBBMywgZm91cnRoOiBBNCwgZmlmdGg6IEE1LCBzaXh0aDogQTYsIC4uLnNlcnZpY2VzOiB7IHNlcnZpY2VCcmFuZDogYW55OyB9W10pOiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb25zdHJ1Y3RvclNpZ25hdHVyZTc8QTEsIEEyLCBBMywgQTQsIEE1LCBBNiwgQTcsIFQ+IHtcbiAgbmV3KGZpcnN0OiBBMSwgc2Vjb25kOiBBMiwgdGhpcmQ6IEEzLCBmb3VydGg6IEE0LCBmaWZ0aDogQTUsIHNpeHRoOiBBNiwgc2V2ZW50aDogQTcsIC4uLnNlcnZpY2VzOiB7IHNlcnZpY2VCcmFuZDogYW55OyB9W10pOiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb25zdHJ1Y3RvclNpZ25hdHVyZTg8QTEsIEEyLCBBMywgQTQsIEE1LCBBNiwgQTcsIEE4LCBUPiB7XG4gIG5ldyhmaXJzdDogQTEsIHNlY29uZDogQTIsIHRoaXJkOiBBMywgZm91cnRoOiBBNCwgZmlmdGg6IEE1LCBzaXh0aDogQTYsIHNldmVudGg6IEE3LCBlaWd0aDogQTgsIC4uLnNlcnZpY2VzOiB7IHNlcnZpY2VCcmFuZDogYW55OyB9W10pOiBUO1xufVxuXG5leHBvcnQgY29uc3QgSUluc3RhbnRpYXRpb25TZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElJbnN0YW50aWF0aW9uU2VydmljZT4oJ0luc3RhbnRpYXRpb25TZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElJbnN0YW50aWF0aW9uU2VydmljZSB7XG4gIHNldFNlcnZpY2U8VD4oaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxUPiwgaW5zdGFuY2U6IFQpOiB2b2lkO1xuXG4gIGNyZWF0ZUluc3RhbmNlPFQ+KGN0b3I6IElDb25zdHJ1Y3RvclNpZ25hdHVyZTA8VD4pOiBUO1xuICBjcmVhdGVJbnN0YW5jZTxBMSwgVD4oY3RvcjogSUNvbnN0cnVjdG9yU2lnbmF0dXJlMTxBMSwgVD4sIGZpcnN0OiBBMSk6IFQ7XG4gIGNyZWF0ZUluc3RhbmNlPEExLCBBMiwgVD4oY3RvcjogSUNvbnN0cnVjdG9yU2lnbmF0dXJlMjxBMSwgQTIsIFQ+LCBmaXJzdDogQTEsIHNlY29uZDogQTIpOiBUO1xuICBjcmVhdGVJbnN0YW5jZTxBMSwgQTIsIEEzLCBUPihjdG9yOiBJQ29uc3RydWN0b3JTaWduYXR1cmUzPEExLCBBMiwgQTMsIFQ+LCBmaXJzdDogQTEsIHNlY29uZDogQTIsIHRoaXJkOiBBMyk6IFQ7XG4gIGNyZWF0ZUluc3RhbmNlPEExLCBBMiwgQTMsIEE0LCBUPihjdG9yOiBJQ29uc3RydWN0b3JTaWduYXR1cmU0PEExLCBBMiwgQTMsIEE0LCBUPiwgZmlyc3Q6IEExLCBzZWNvbmQ6IEEyLCB0aGlyZDogQTMsIGZvdXJ0aDogQTQpOiBUO1xuICBjcmVhdGVJbnN0YW5jZTxBMSwgQTIsIEEzLCBBNCwgQTUsIFQ+KGN0b3I6IElDb25zdHJ1Y3RvclNpZ25hdHVyZTU8QTEsIEEyLCBBMywgQTQsIEE1LCBUPiwgZmlyc3Q6IEExLCBzZWNvbmQ6IEEyLCB0aGlyZDogQTMsIGZvdXJ0aDogQTQsIGZpZnRoOiBBNSk6IFQ7XG4gIGNyZWF0ZUluc3RhbmNlPEExLCBBMiwgQTMsIEE0LCBBNSwgQTYsIFQ+KGN0b3I6IElDb25zdHJ1Y3RvclNpZ25hdHVyZTY8QTEsIEEyLCBBMywgQTQsIEE1LCBBNiwgVD4sIGZpcnN0OiBBMSwgc2Vjb25kOiBBMiwgdGhpcmQ6IEEzLCBmb3VydGg6IEE0LCBmaWZ0aDogQTUsIHNpeHRoOiBBNik6IFQ7XG4gIGNyZWF0ZUluc3RhbmNlPEExLCBBMiwgQTMsIEE0LCBBNSwgQTYsIEE3LCBUPihjdG9yOiBJQ29uc3RydWN0b3JTaWduYXR1cmU3PEExLCBBMiwgQTMsIEE0LCBBNSwgQTYsIEE3LCBUPiwgZmlyc3Q6IEExLCBzZWNvbmQ6IEEyLCB0aGlyZDogQTMsIGZvdXJ0aDogQTQsIGZpZnRoOiBBNSwgc2l4dGg6IEE2LCBzZXZlbnRoOiBBNyk6IFQ7XG4gIGNyZWF0ZUluc3RhbmNlPEExLCBBMiwgQTMsIEE0LCBBNSwgQTYsIEE3LCBBOCwgVD4oY3RvcjogSUNvbnN0cnVjdG9yU2lnbmF0dXJlODxBMSwgQTIsIEEzLCBBNCwgQTUsIEE2LCBBNywgQTgsIFQ+LCBmaXJzdDogQTEsIHNlY29uZDogQTIsIHRoaXJkOiBBMywgZm91cnRoOiBBNCwgZmlmdGg6IEE1LCBzaXh0aDogQTYsIHNldmVudGg6IEE3LCBlaWd0aDogQTgpOiBUO1xufVxuXG5leHBvcnQgY29uc3QgSUxvZ1NlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SUxvZ1NlcnZpY2U+KCdMb2dTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElMb2dTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgZGVidWcobWVzc2FnZTogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkO1xuICBpbmZvKG1lc3NhZ2U6IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZDtcbiAgd2FybihtZXNzYWdlOiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQ7XG4gIGVycm9yKG1lc3NhZ2U6IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IElPcHRpb25zU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJT3B0aW9uc1NlcnZpY2U+KCdPcHRpb25zU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJT3B0aW9uc1NlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICByZWFkb25seSBvcHRpb25zOiBJVGVybWluYWxPcHRpb25zO1xuXG4gIHJlYWRvbmx5IG9uT3B0aW9uQ2hhbmdlOiBJRXZlbnQ8c3RyaW5nPjtcblxuICBzZXRPcHRpb248VD4oa2V5OiBzdHJpbmcsIHZhbHVlOiBUKTogdm9pZDtcbiAgZ2V0T3B0aW9uPFQ+KGtleTogc3RyaW5nKTogVCB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IHR5cGUgRm9udFdlaWdodCA9ICdub3JtYWwnIHwgJ2JvbGQnIHwgJzEwMCcgfCAnMjAwJyB8ICczMDAnIHwgJzQwMCcgfCAnNTAwJyB8ICc2MDAnIHwgJzcwMCcgfCAnODAwJyB8ICc5MDAnO1xuZXhwb3J0IHR5cGUgTG9nTGV2ZWwgPSAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyB8ICdvZmYnO1xuZXhwb3J0IHR5cGUgUmVuZGVyZXJUeXBlID0gJ2RvbScgfCAnY2FudmFzJztcblxuZXhwb3J0IGludGVyZmFjZSBJUGFydGlhbFRlcm1pbmFsT3B0aW9ucyB7XG4gIGFsbG93VHJhbnNwYXJlbmN5PzogYm9vbGVhbjtcbiAgYmVsbFNvdW5kPzogc3RyaW5nO1xuICBiZWxsU3R5bGU/OiAnbm9uZScgLyp8ICd2aXN1YWwnKi8gfCAnc291bmQnIC8qfCAnYm90aCcqLztcbiAgY29scz86IG51bWJlcjtcbiAgY3Vyc29yQmxpbms/OiBib29sZWFuO1xuICBjdXJzb3JTdHlsZT86ICdibG9jaycgfCAndW5kZXJsaW5lJyB8ICdiYXInO1xuICBjdXJzb3JXaWR0aD86IG51bWJlcjtcbiAgZGlzYWJsZVN0ZGluPzogYm9vbGVhbjtcbiAgZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnM/OiBib29sZWFuO1xuICBmYXN0U2Nyb2xsTW9kaWZpZXI/OiAnYWx0JyB8ICdjdHJsJyB8ICdzaGlmdCc7XG4gIGZhc3RTY3JvbGxTZW5zaXRpdml0eT86IG51bWJlcjtcbiAgZm9udFNpemU/OiBudW1iZXI7XG4gIGZvbnRGYW1pbHk/OiBzdHJpbmc7XG4gIGZvbnRXZWlnaHQ/OiBGb250V2VpZ2h0O1xuICBmb250V2VpZ2h0Qm9sZD86IEZvbnRXZWlnaHQ7XG4gIGxldHRlclNwYWNpbmc/OiBudW1iZXI7XG4gIGxpbmVIZWlnaHQ/OiBudW1iZXI7XG4gIGxvZ0xldmVsPzogTG9nTGV2ZWw7XG4gIG1hY09wdGlvbklzTWV0YT86IGJvb2xlYW47XG4gIG1hY09wdGlvbkNsaWNrRm9yY2VzU2VsZWN0aW9uPzogYm9vbGVhbjtcbiAgcmVuZGVyZXJUeXBlPzogUmVuZGVyZXJUeXBlO1xuICByaWdodENsaWNrU2VsZWN0c1dvcmQ/OiBib29sZWFuO1xuICByb3dzPzogbnVtYmVyO1xuICBzY3JlZW5SZWFkZXJNb2RlPzogYm9vbGVhbjtcbiAgc2Nyb2xsYmFjaz86IG51bWJlcjtcbiAgc2Nyb2xsU2Vuc2l0aXZpdHk/OiBudW1iZXI7XG4gIHRhYlN0b3BXaWR0aD86IG51bWJlcjtcbiAgdGhlbWU/OiBJVGhlbWU7XG4gIHdpbmRvd3NNb2RlPzogYm9vbGVhbjtcbiAgd29yZFNlcGFyYXRvcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJVGVybWluYWxPcHRpb25zIHtcbiAgYWxsb3dUcmFuc3BhcmVuY3k6IGJvb2xlYW47XG4gIGJlbGxTb3VuZDogc3RyaW5nO1xuICBiZWxsU3R5bGU6ICdub25lJyAvKnwgJ3Zpc3VhbCcqLyB8ICdzb3VuZCcgLyp8ICdib3RoJyovO1xuICBjb2xzOiBudW1iZXI7XG4gIGN1cnNvckJsaW5rOiBib29sZWFuO1xuICBjdXJzb3JTdHlsZTogJ2Jsb2NrJyB8ICd1bmRlcmxpbmUnIHwgJ2Jhcic7XG4gIGN1cnNvcldpZHRoOiBudW1iZXI7XG4gIGRpc2FibGVTdGRpbjogYm9vbGVhbjtcbiAgZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnM6IGJvb2xlYW47XG4gIGZhc3RTY3JvbGxNb2RpZmllcjogJ2FsdCcgfCAnY3RybCcgfCAnc2hpZnQnIHwgdW5kZWZpbmVkO1xuICBmYXN0U2Nyb2xsU2Vuc2l0aXZpdHk6IG51bWJlcjtcbiAgZm9udFNpemU6IG51bWJlcjtcbiAgZm9udEZhbWlseTogc3RyaW5nO1xuICBmb250V2VpZ2h0OiBGb250V2VpZ2h0O1xuICBmb250V2VpZ2h0Qm9sZDogRm9udFdlaWdodDtcbiAgbGV0dGVyU3BhY2luZzogbnVtYmVyO1xuICBsaW5lSGVpZ2h0OiBudW1iZXI7XG4gIGxvZ0xldmVsOiBMb2dMZXZlbDtcbiAgbWFjT3B0aW9uSXNNZXRhOiBib29sZWFuO1xuICBtYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbjogYm9vbGVhbjtcbiAgbWluaW11bUNvbnRyYXN0UmF0aW86IG51bWJlcjtcbiAgcmVuZGVyZXJUeXBlOiBSZW5kZXJlclR5cGU7XG4gIHJpZ2h0Q2xpY2tTZWxlY3RzV29yZDogYm9vbGVhbjtcbiAgcm93czogbnVtYmVyO1xuICBzY3JlZW5SZWFkZXJNb2RlOiBib29sZWFuO1xuICBzY3JvbGxiYWNrOiBudW1iZXI7XG4gIHNjcm9sbFNlbnNpdGl2aXR5OiBudW1iZXI7XG4gIHRhYlN0b3BXaWR0aDogbnVtYmVyO1xuICB0aGVtZTogSVRoZW1lO1xuICB3aW5kb3dzTW9kZTogYm9vbGVhbjtcbiAgd29yZFNlcGFyYXRvcjogc3RyaW5nO1xuXG4gIFtrZXk6IHN0cmluZ106IGFueTtcbiAgY2FuY2VsRXZlbnRzOiBib29sZWFuO1xuICBjb252ZXJ0RW9sOiBib29sZWFuO1xuICBzY3JlZW5LZXlzOiBib29sZWFuO1xuICB0ZXJtTmFtZTogc3RyaW5nO1xuICB1c2VGbG93Q29udHJvbDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJVGhlbWUge1xuICBmb3JlZ3JvdW5kPzogc3RyaW5nO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xuICBjdXJzb3I/OiBzdHJpbmc7XG4gIGN1cnNvckFjY2VudD86IHN0cmluZztcbiAgc2VsZWN0aW9uPzogc3RyaW5nO1xuICBibGFjaz86IHN0cmluZztcbiAgcmVkPzogc3RyaW5nO1xuICBncmVlbj86IHN0cmluZztcbiAgeWVsbG93Pzogc3RyaW5nO1xuICBibHVlPzogc3RyaW5nO1xuICBtYWdlbnRhPzogc3RyaW5nO1xuICBjeWFuPzogc3RyaW5nO1xuICB3aGl0ZT86IHN0cmluZztcbiAgYnJpZ2h0QmxhY2s/OiBzdHJpbmc7XG4gIGJyaWdodFJlZD86IHN0cmluZztcbiAgYnJpZ2h0R3JlZW4/OiBzdHJpbmc7XG4gIGJyaWdodFllbGxvdz86IHN0cmluZztcbiAgYnJpZ2h0Qmx1ZT86IHN0cmluZztcbiAgYnJpZ2h0TWFnZW50YT86IHN0cmluZztcbiAgYnJpZ2h0Q3lhbj86IHN0cmluZztcbiAgYnJpZ2h0V2hpdGU/OiBzdHJpbmc7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElUZXJtaW5hbEFkZG9uLCBJRGlzcG9zYWJsZSwgVGVybWluYWwgfSBmcm9tICd4dGVybSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUxvYWRlZEFkZG9uIHtcbiAgaW5zdGFuY2U6IElUZXJtaW5hbEFkZG9uO1xuICBkaXNwb3NlOiAoKSA9PiB2b2lkO1xuICBpc0Rpc3Bvc2VkOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgQWRkb25NYW5hZ2VyIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuICBwcm90ZWN0ZWQgX2FkZG9uczogSUxvYWRlZEFkZG9uW10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLl9hZGRvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHRoaXMuX2FkZG9uc1tpXS5pbnN0YW5jZS5kaXNwb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGxvYWRBZGRvbih0ZXJtaW5hbDogVGVybWluYWwsIGluc3RhbmNlOiBJVGVybWluYWxBZGRvbik6IHZvaWQge1xuICAgIGNvbnN0IGxvYWRlZEFkZG9uOiBJTG9hZGVkQWRkb24gPSB7XG4gICAgICBpbnN0YW5jZSxcbiAgICAgIGRpc3Bvc2U6IGluc3RhbmNlLmRpc3Bvc2UsXG4gICAgICBpc0Rpc3Bvc2VkOiBmYWxzZVxuICAgIH07XG4gICAgdGhpcy5fYWRkb25zLnB1c2gobG9hZGVkQWRkb24pO1xuICAgIGluc3RhbmNlLmRpc3Bvc2UgPSAoKSA9PiB0aGlzLl93cmFwcGVkQWRkb25EaXNwb3NlKGxvYWRlZEFkZG9uKTtcbiAgICBpbnN0YW5jZS5hY3RpdmF0ZSg8YW55PnRlcm1pbmFsKTtcbiAgfVxuXG4gIHByaXZhdGUgX3dyYXBwZWRBZGRvbkRpc3Bvc2UobG9hZGVkQWRkb246IElMb2FkZWRBZGRvbik6IHZvaWQge1xuICAgIGlmIChsb2FkZWRBZGRvbi5pc0Rpc3Bvc2VkKSB7XG4gICAgICAvLyBEbyBub3RoaW5nIGlmIGFscmVhZHkgZGlzcG9zZWRcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9hZGRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLl9hZGRvbnNbaV0gPT09IGxvYWRlZEFkZG9uKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGRpc3Bvc2UgYW4gYWRkb24gdGhhdCBoYXMgbm90IGJlZW4gbG9hZGVkJyk7XG4gICAgfVxuICAgIGxvYWRlZEFkZG9uLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgIGxvYWRlZEFkZG9uLmRpc3Bvc2UuYXBwbHkobG9hZGVkQWRkb24uaW5zdGFuY2UpO1xuICAgIHRoaXMuX2FkZG9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IFRlcm1pbmFsIGFzIElUZXJtaW5hbEFwaSwgSVRlcm1pbmFsT3B0aW9ucywgSU1hcmtlciwgSURpc3Bvc2FibGUsIElMaW5rTWF0Y2hlck9wdGlvbnMsIElUaGVtZSwgSUxvY2FsaXphYmxlU3RyaW5ncywgSVRlcm1pbmFsQWRkb24sIElTZWxlY3Rpb25Qb3NpdGlvbiwgSUJ1ZmZlciBhcyBJQnVmZmVyQXBpLCBJQnVmZmVyTGluZSBhcyBJQnVmZmVyTGluZUFwaSwgSUJ1ZmZlckNlbGwgYXMgSUJ1ZmZlckNlbGxBcGksIElQYXJzZXIsIElGdW5jdGlvbklkZW50aWZpZXIgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBJVGVybWluYWwgfSBmcm9tICcuLi9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyTGluZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBUZXJtaW5hbCBhcyBUZXJtaW5hbENvcmUgfSBmcm9tICcuLi9UZXJtaW5hbCc7XG5pbXBvcnQgKiBhcyBTdHJpbmdzIGZyb20gJy4uL2Jyb3dzZXIvTG9jYWxpemFibGVTdHJpbmdzJztcbmltcG9ydCB7IElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgQWRkb25NYW5hZ2VyIH0gZnJvbSAnLi9BZGRvbk1hbmFnZXInO1xuaW1wb3J0IHsgSVBhcmFtcyB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvVHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgVGVybWluYWwgaW1wbGVtZW50cyBJVGVybWluYWxBcGkge1xuICBwcml2YXRlIF9jb3JlOiBJVGVybWluYWw7XG4gIHByaXZhdGUgX2FkZG9uTWFuYWdlcjogQWRkb25NYW5hZ2VyO1xuICBwcml2YXRlIF9wYXJzZXI6IElQYXJzZXI7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IElUZXJtaW5hbE9wdGlvbnMpIHtcbiAgICB0aGlzLl9jb3JlID0gbmV3IFRlcm1pbmFsQ29yZShvcHRpb25zKTtcbiAgICB0aGlzLl9hZGRvbk1hbmFnZXIgPSBuZXcgQWRkb25NYW5hZ2VyKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IG9uQ3Vyc29yTW92ZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fY29yZS5vbkN1cnNvck1vdmU7IH1cbiAgcHVibGljIGdldCBvbkxpbmVGZWVkKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9jb3JlLm9uTGluZUZlZWQ7IH1cbiAgcHVibGljIGdldCBvblNlbGVjdGlvbkNoYW5nZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fY29yZS5vblNlbGVjdGlvbkNoYW5nZTsgfVxuICBwdWJsaWMgZ2V0IG9uRGF0YSgpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9jb3JlLm9uRGF0YTsgfVxuICBwdWJsaWMgZ2V0IG9uQmluYXJ5KCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25CaW5hcnk7IH1cbiAgcHVibGljIGdldCBvblRpdGxlQ2hhbmdlKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25UaXRsZUNoYW5nZTsgfVxuICBwdWJsaWMgZ2V0IG9uU2Nyb2xsKCk6IElFdmVudDxudW1iZXI+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25TY3JvbGw7IH1cbiAgcHVibGljIGdldCBvbktleSgpOiBJRXZlbnQ8eyBrZXk6IHN0cmluZywgZG9tRXZlbnQ6IEtleWJvYXJkRXZlbnQgfT4geyByZXR1cm4gdGhpcy5fY29yZS5vbktleTsgfVxuICBwdWJsaWMgZ2V0IG9uUmVuZGVyKCk6IElFdmVudDx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25SZW5kZXI7IH1cbiAgcHVibGljIGdldCBvblJlc2l6ZSgpOiBJRXZlbnQ8eyBjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlciB9PiB7IHJldHVybiB0aGlzLl9jb3JlLm9uUmVzaXplOyB9XG5cbiAgcHVibGljIGdldCBlbGVtZW50KCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHsgcmV0dXJuIHRoaXMuX2NvcmUuZWxlbWVudDsgfVxuICBwdWJsaWMgZ2V0IHBhcnNlcigpOiBJUGFyc2VyIHtcbiAgICBpZiAoIXRoaXMuX3BhcnNlcikge1xuICAgICAgdGhpcy5fcGFyc2VyID0gbmV3IFBhcnNlckFwaSh0aGlzLl9jb3JlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlcjtcbiAgfVxuICBwdWJsaWMgZ2V0IHRleHRhcmVhKCk6IEhUTUxUZXh0QXJlYUVsZW1lbnQgfCB1bmRlZmluZWQgeyByZXR1cm4gdGhpcy5fY29yZS50ZXh0YXJlYTsgfVxuICBwdWJsaWMgZ2V0IHJvd3MoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2NvcmUucm93czsgfVxuICBwdWJsaWMgZ2V0IGNvbHMoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2NvcmUuY29sczsgfVxuICBwdWJsaWMgZ2V0IGJ1ZmZlcigpOiBJQnVmZmVyQXBpIHsgcmV0dXJuIG5ldyBCdWZmZXJBcGlWaWV3KHRoaXMuX2NvcmUuYnVmZmVyKTsgfVxuICBwdWJsaWMgZ2V0IG1hcmtlcnMoKTogUmVhZG9ubHlBcnJheTxJTWFya2VyPiB7IHJldHVybiB0aGlzLl9jb3JlLm1hcmtlcnM7IH1cbiAgcHVibGljIGJsdXIoKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5ibHVyKCk7XG4gIH1cbiAgcHVibGljIGZvY3VzKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuZm9jdXMoKTtcbiAgfVxuICBwdWJsaWMgcmVzaXplKGNvbHVtbnM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMoY29sdW1ucywgcm93cyk7XG4gICAgdGhpcy5fY29yZS5yZXNpemUoY29sdW1ucywgcm93cyk7XG4gIH1cbiAgcHVibGljIG9wZW4ocGFyZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUub3BlbihwYXJlbnQpO1xuICB9XG4gIHB1YmxpYyBhdHRhY2hDdXN0b21LZXlFdmVudEhhbmRsZXIoY3VzdG9tS2V5RXZlbnRIYW5kbGVyOiAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLmF0dGFjaEN1c3RvbUtleUV2ZW50SGFuZGxlcihjdXN0b21LZXlFdmVudEhhbmRsZXIpO1xuICB9XG4gIHB1YmxpYyByZWdpc3RlckxpbmtNYXRjaGVyKHJlZ2V4OiBSZWdFeHAsIGhhbmRsZXI6IChldmVudDogTW91c2VFdmVudCwgdXJpOiBzdHJpbmcpID0+IHZvaWQsIG9wdGlvbnM/OiBJTGlua01hdGNoZXJPcHRpb25zKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5yZWdpc3RlckxpbmtNYXRjaGVyKHJlZ2V4LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgfVxuICBwdWJsaWMgZGVyZWdpc3RlckxpbmtNYXRjaGVyKG1hdGNoZXJJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5kZXJlZ2lzdGVyTGlua01hdGNoZXIobWF0Y2hlcklkKTtcbiAgfVxuICBwdWJsaWMgcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoaGFuZGxlcjogKHRleHQ6IHN0cmluZykgPT4gW251bWJlciwgbnVtYmVyXVtdKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5yZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyKTtcbiAgfVxuICBwdWJsaWMgZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5kZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGpvaW5lcklkKTtcbiAgfVxuICBwdWJsaWMgcmVnaXN0ZXJNYXJrZXIoY3Vyc29yWU9mZnNldDogbnVtYmVyKTogSU1hcmtlciB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMoY3Vyc29yWU9mZnNldCk7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUuYWRkTWFya2VyKGN1cnNvcllPZmZzZXQpO1xuICB9XG4gIHB1YmxpYyBhZGRNYXJrZXIoY3Vyc29yWU9mZnNldDogbnVtYmVyKTogSU1hcmtlciB7XG4gICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJNYXJrZXIoY3Vyc29yWU9mZnNldCk7XG4gIH1cbiAgcHVibGljIGhhc1NlbGVjdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5oYXNTZWxlY3Rpb24oKTtcbiAgfVxuICBwdWJsaWMgc2VsZWN0KGNvbHVtbjogbnVtYmVyLCByb3c6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl92ZXJpZnlJbnRlZ2Vycyhjb2x1bW4sIHJvdywgbGVuZ3RoKTtcbiAgICB0aGlzLl9jb3JlLnNlbGVjdChjb2x1bW4sIHJvdywgbGVuZ3RoKTtcbiAgfVxuICBwdWJsaWMgZ2V0U2VsZWN0aW9uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUuZ2V0U2VsZWN0aW9uKCk7XG4gIH1cbiAgcHVibGljIGdldFNlbGVjdGlvblBvc2l0aW9uKCk6IElTZWxlY3Rpb25Qb3NpdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUuZ2V0U2VsZWN0aW9uUG9zaXRpb24oKTtcbiAgfVxuICBwdWJsaWMgY2xlYXJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5jbGVhclNlbGVjdGlvbigpO1xuICB9XG4gIHB1YmxpYyBzZWxlY3RBbGwoKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5zZWxlY3RBbGwoKTtcbiAgfVxuICBwdWJsaWMgc2VsZWN0TGluZXMoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl92ZXJpZnlJbnRlZ2VycyhzdGFydCwgZW5kKTtcbiAgICB0aGlzLl9jb3JlLnNlbGVjdExpbmVzKHN0YXJ0LCBlbmQpO1xuICB9XG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX2FkZG9uTWFuYWdlci5kaXNwb3NlKCk7XG4gICAgdGhpcy5fY29yZS5kaXNwb3NlKCk7XG4gIH1cbiAgcHVibGljIHNjcm9sbExpbmVzKGFtb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMoYW1vdW50KTtcbiAgICB0aGlzLl9jb3JlLnNjcm9sbExpbmVzKGFtb3VudCk7XG4gIH1cbiAgcHVibGljIHNjcm9sbFBhZ2VzKHBhZ2VDb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMocGFnZUNvdW50KTtcbiAgICB0aGlzLl9jb3JlLnNjcm9sbFBhZ2VzKHBhZ2VDb3VudCk7XG4gIH1cbiAgcHVibGljIHNjcm9sbFRvVG9wKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuc2Nyb2xsVG9Ub3AoKTtcbiAgfVxuICBwdWJsaWMgc2Nyb2xsVG9Cb3R0b20oKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5zY3JvbGxUb0JvdHRvbSgpO1xuICB9XG4gIHB1YmxpYyBzY3JvbGxUb0xpbmUobGluZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMobGluZSk7XG4gICAgdGhpcy5fY29yZS5zY3JvbGxUb0xpbmUobGluZSk7XG4gIH1cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuY2xlYXIoKTtcbiAgfVxuICBwdWJsaWMgd3JpdGUoZGF0YTogc3RyaW5nIHwgVWludDhBcnJheSwgY2FsbGJhY2s/OiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS53cml0ZShkYXRhLCBjYWxsYmFjayk7XG4gIH1cbiAgcHVibGljIHdyaXRlVXRmOChkYXRhOiBVaW50OEFycmF5LCBjYWxsYmFjaz86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLndyaXRlKGRhdGEsIGNhbGxiYWNrKTtcbiAgfVxuICBwdWJsaWMgd3JpdGVsbihkYXRhOiBzdHJpbmcgfCBVaW50OEFycmF5LCBjYWxsYmFjaz86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLndyaXRlKGRhdGEpO1xuICAgIHRoaXMuX2NvcmUud3JpdGUoJ1xcclxcbicsIGNhbGxiYWNrKTtcbiAgfVxuICBwdWJsaWMgcGFzdGUoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5wYXN0ZShkYXRhKTtcbiAgfVxuICBwdWJsaWMgZ2V0T3B0aW9uKGtleTogJ2JlbGxTb3VuZCcgfCAnYmVsbFN0eWxlJyB8ICdjdXJzb3JTdHlsZScgfCAnZm9udEZhbWlseScgfCAnZm9udFdlaWdodCcgfCAnZm9udFdlaWdodEJvbGQnIHwgJ2xvZ0xldmVsJyB8ICdyZW5kZXJlclR5cGUnIHwgJ3Rlcm1OYW1lJyB8ICd3b3JkU2VwYXJhdG9yJyk6IHN0cmluZztcbiAgcHVibGljIGdldE9wdGlvbihrZXk6ICdhbGxvd1RyYW5zcGFyZW5jeScgfCAnY2FuY2VsRXZlbnRzJyB8ICdjb252ZXJ0RW9sJyB8ICdjdXJzb3JCbGluaycgfCAnZGlzYWJsZVN0ZGluJyB8ICdtYWNPcHRpb25Jc01ldGEnIHwgJ3JpZ2h0Q2xpY2tTZWxlY3RzV29yZCcgfCAncG9wT25CZWxsJyB8ICdzY3JlZW5LZXlzJyB8ICd1c2VGbG93Q29udHJvbCcgfCAndmlzdWFsQmVsbCcpOiBib29sZWFuO1xuICBwdWJsaWMgZ2V0T3B0aW9uKGtleTogJ2NvbG9ycycpOiBzdHJpbmdbXTtcbiAgcHVibGljIGdldE9wdGlvbihrZXk6ICdjb2xzJyB8ICdmb250U2l6ZScgfCAnbGV0dGVyU3BhY2luZycgfCAnbGluZUhlaWdodCcgfCAncm93cycgfCAndGFiU3RvcFdpZHRoJyB8ICdzY3JvbGxiYWNrJyk6IG51bWJlcjtcbiAgcHVibGljIGdldE9wdGlvbihrZXk6ICdoYW5kbGVyJyk6IChkYXRhOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHB1YmxpYyBnZXRPcHRpb24oa2V5OiBzdHJpbmcpOiBhbnk7XG4gIHB1YmxpYyBnZXRPcHRpb24oa2V5OiBhbnkpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLm9wdGlvbnNTZXJ2aWNlLmdldE9wdGlvbihrZXkpO1xuICB9XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiAnYmVsbFNvdW5kJyB8ICdmb250RmFtaWx5JyB8ICd0ZXJtTmFtZScgfCAnd29yZFNlcGFyYXRvcicsIHZhbHVlOiBzdHJpbmcpOiB2b2lkO1xuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogJ2ZvbnRXZWlnaHQnIHwgJ2ZvbnRXZWlnaHRCb2xkJywgdmFsdWU6ICdub3JtYWwnIHwgJ2JvbGQnIHwgJzEwMCcgfCAnMjAwJyB8ICczMDAnIHwgJzQwMCcgfCAnNTAwJyB8ICc2MDAnIHwgJzcwMCcgfCAnODAwJyB8ICc5MDAnKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICdsb2dMZXZlbCcsIHZhbHVlOiAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyB8ICdvZmYnKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICdiZWxsU3R5bGUnLCB2YWx1ZTogJ25vbmUnIHwgJ3Zpc3VhbCcgfCAnc291bmQnIHwgJ2JvdGgnKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICdjdXJzb3JTdHlsZScsIHZhbHVlOiAnYmxvY2snIHwgJ3VuZGVybGluZScgfCAnYmFyJyk6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiAnYWxsb3dUcmFuc3BhcmVuY3knIHwgJ2NhbmNlbEV2ZW50cycgfCAnY29udmVydEVvbCcgfCAnY3Vyc29yQmxpbmsnIHwgJ2Rpc2FibGVTdGRpbicgfCAnbWFjT3B0aW9uSXNNZXRhJyB8ICdyaWdodENsaWNrU2VsZWN0c1dvcmQnIHwgJ3BvcE9uQmVsbCcgfCAnc2NyZWVuS2V5cycgfCAndXNlRmxvd0NvbnRyb2wnIHwgJ3Zpc3VhbEJlbGwnLCB2YWx1ZTogYm9vbGVhbik6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiAnY29sb3JzJywgdmFsdWU6IHN0cmluZ1tdKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICdmb250U2l6ZScgfCAnbGV0dGVyU3BhY2luZycgfCAnbGluZUhlaWdodCcgfCAndGFiU3RvcFdpZHRoJyB8ICdzY3JvbGxiYWNrJywgdmFsdWU6IG51bWJlcik6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiAnaGFuZGxlcicsIHZhbHVlOiAoZGF0YTogc3RyaW5nKSA9PiB2b2lkKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICd0aGVtZScsIHZhbHVlOiBJVGhlbWUpOiB2b2lkO1xuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogJ2NvbHMnIHwgJ3Jvd3MnLCB2YWx1ZTogbnVtYmVyKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiBhbnksIHZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLm9wdGlvbnNTZXJ2aWNlLnNldE9wdGlvbihrZXksIHZhbHVlKTtcbiAgfVxuICBwdWJsaWMgcmVmcmVzaChzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKHN0YXJ0LCBlbmQpO1xuICAgIHRoaXMuX2NvcmUucmVmcmVzaChzdGFydCwgZW5kKTtcbiAgfVxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5yZXNldCgpO1xuICB9XG4gIHB1YmxpYyBsb2FkQWRkb24oYWRkb246IElUZXJtaW5hbEFkZG9uKTogdm9pZCB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZG9uTWFuYWdlci5sb2FkQWRkb24odGhpcywgYWRkb24pO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHN0cmluZ3MoKTogSUxvY2FsaXphYmxlU3RyaW5ncyB7XG4gICAgcmV0dXJuIFN0cmluZ3M7XG4gIH1cblxuICBwcml2YXRlIF92ZXJpZnlJbnRlZ2VycyguLi52YWx1ZXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgdmFsdWVzLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSBJbmZpbml0eSB8fCBpc05hTih2YWx1ZSkgfHwgdmFsdWUgJSAxICE9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhpcyBBUEkgb25seSBhY2NlcHRzIGludGVnZXJzJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuY2xhc3MgQnVmZmVyQXBpVmlldyBpbXBsZW1lbnRzIElCdWZmZXJBcGkge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9idWZmZXI6IElCdWZmZXIpIHt9XG5cbiAgcHVibGljIGdldCBjdXJzb3JZKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9idWZmZXIueTsgfVxuICBwdWJsaWMgZ2V0IGN1cnNvclgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2J1ZmZlci54OyB9XG4gIHB1YmxpYyBnZXQgdmlld3BvcnRZKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9idWZmZXIueWRpc3A7IH1cbiAgcHVibGljIGdldCBiYXNlWSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyLnliYXNlOyB9XG4gIHB1YmxpYyBnZXQgbGVuZ3RoKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9idWZmZXIubGluZXMubGVuZ3RoOyB9XG4gIHB1YmxpYyBnZXRMaW5lKHk6IG51bWJlcik6IElCdWZmZXJMaW5lQXBpIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5fYnVmZmVyLmxpbmVzLmdldCh5KTtcbiAgICBpZiAoIWxpbmUpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQnVmZmVyTGluZUFwaVZpZXcobGluZSk7XG4gIH1cbn1cblxuY2xhc3MgQnVmZmVyTGluZUFwaVZpZXcgaW1wbGVtZW50cyBJQnVmZmVyTGluZUFwaSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2xpbmU6IElCdWZmZXJMaW5lKSB7fVxuXG4gIHB1YmxpYyBnZXQgaXNXcmFwcGVkKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5fbGluZS5pc1dyYXBwZWQ7IH1cbiAgcHVibGljIGdldENlbGwoeDogbnVtYmVyKTogSUJ1ZmZlckNlbGxBcGkgfCB1bmRlZmluZWQge1xuICAgIGlmICh4IDwgMCB8fCB4ID49IHRoaXMuX2xpbmUubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEJ1ZmZlckNlbGxBcGlWaWV3KHRoaXMuX2xpbmUsIHgpO1xuICB9XG4gIHB1YmxpYyB0cmFuc2xhdGVUb1N0cmluZyh0cmltUmlnaHQ/OiBib29sZWFuLCBzdGFydENvbHVtbj86IG51bWJlciwgZW5kQ29sdW1uPzogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fbGluZS50cmFuc2xhdGVUb1N0cmluZyh0cmltUmlnaHQsIHN0YXJ0Q29sdW1uLCBlbmRDb2x1bW4pO1xuICB9XG59XG5cbmNsYXNzIEJ1ZmZlckNlbGxBcGlWaWV3IGltcGxlbWVudHMgSUJ1ZmZlckNlbGxBcGkge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9saW5lOiBJQnVmZmVyTGluZSwgcHJpdmF0ZSBfeDogbnVtYmVyKSB7fVxuICBwdWJsaWMgZ2V0IGNoYXIoKTogc3RyaW5nIHsgcmV0dXJuIHRoaXMuX2xpbmUuZ2V0U3RyaW5nKHRoaXMuX3gpOyB9XG4gIHB1YmxpYyBnZXQgd2lkdGgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2xpbmUuZ2V0V2lkdGgodGhpcy5feCk7IH1cbn1cblxuY2xhc3MgUGFyc2VyQXBpIGltcGxlbWVudHMgSVBhcnNlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2NvcmU6IElUZXJtaW5hbCkge31cblxuICBwdWJsaWMgcmVnaXN0ZXJDc2lIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBjYWxsYmFjazogKHBhcmFtczogKG51bWJlciB8IG51bWJlcltdKVtdKSA9PiBib29sZWFuKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLmFkZENzaUhhbmRsZXIoaWQsIChwYXJhbXM6IElQYXJhbXMpID0+IGNhbGxiYWNrKHBhcmFtcy50b0FycmF5KCkpKTtcbiAgfVxuICBwdWJsaWMgYWRkQ3NpSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChwYXJhbXM6IChudW1iZXIgfCBudW1iZXJbXSlbXSkgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5yZWdpc3RlckNzaUhhbmRsZXIoaWQsIGNhbGxiYWNrKTtcbiAgfVxuICBwdWJsaWMgcmVnaXN0ZXJEY3NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZywgcGFyYW06IChudW1iZXIgfCBudW1iZXJbXSlbXSkgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5hZGREY3NIYW5kbGVyKGlkLCAoZGF0YTogc3RyaW5nLCBwYXJhbXM6IElQYXJhbXMpID0+IGNhbGxiYWNrKGRhdGEsIHBhcmFtcy50b0FycmF5KCkpKTtcbiAgfVxuICBwdWJsaWMgYWRkRGNzSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChkYXRhOiBzdHJpbmcsIHBhcmFtOiAobnVtYmVyIHwgbnVtYmVyW10pW10pID0+IGJvb2xlYW4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJEY3NIYW5kbGVyKGlkLCBjYWxsYmFjayk7XG4gIH1cbiAgcHVibGljIHJlZ2lzdGVyRXNjSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgaGFuZGxlcjogKCkgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5hZGRFc2NIYW5kbGVyKGlkLCBoYW5kbGVyKTtcbiAgfVxuICBwdWJsaWMgYWRkRXNjSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgaGFuZGxlcjogKCkgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5yZWdpc3RlckVzY0hhbmRsZXIoaWQsIGhhbmRsZXIpO1xuICB9XG4gIHB1YmxpYyByZWdpc3Rlck9zY0hhbmRsZXIoaWRlbnQ6IG51bWJlciwgY2FsbGJhY2s6IChkYXRhOiBzdHJpbmcpID0+IGJvb2xlYW4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUuYWRkT3NjSGFuZGxlcihpZGVudCwgY2FsbGJhY2spO1xuICB9XG4gIHB1YmxpYyBhZGRPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nKSA9PiBib29sZWFuKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyT3NjSGFuZGxlcihpZGVudCwgY2FsbGJhY2spO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9